"use strict";var mZ=Object.defineProperty,_Z=Object.defineProperties,yZ=Object.getOwnPropertyDescriptors,vL=Object.getOwnPropertySymbols,vZ=Object.prototype.hasOwnProperty,wZ=Object.prototype.propertyIsEnumerable,wL=(Je,ve,F)=>ve in Je?mZ(Je,ve,{enumerable:!0,configurable:!0,writable:!0,value:F}):Je[ve]=F,EL=(Je,ve)=>{for(var F in ve||(ve={}))vZ.call(ve,F)&&wL(Je,F,ve[F]);if(vL)for(var F of vL(ve))wZ.call(ve,F)&&wL(Je,F,ve[F]);return Je},bL=(Je,ve)=>_Z(Je,yZ(ve));(self.webpackChunkapp_articles=self.webpackChunkapp_articles||[]).push([[179],{2011:(Je,ve,F)=>{F.d(ve,{Dh:()=>ce,GT:()=>we,cc:()=>De,hO:()=>$e,on:()=>$,pX:()=>ue,xv:()=>pe});var u=F(5e3),te=F(127),L=F(5813);Je=F.hmd(Je);const le=["ngOnDestroy"],ue=(ne,be,Ve,Pe={})=>new Proxy(ne,{get:(ot,Ne)=>Ve.runOutsideAngular(()=>{var qe;if(ne[Ne])return(null===(qe=null==Pe?void 0:Pe.spy)||void 0===qe?void 0:qe.get)&&Pe.spy.get(Ne,ne[Ne]),ne[Ne];if(le.indexOf(Ne)>-1)return()=>{};const Ke=be.toPromise().then(Ee=>{const Y=Ee&&Ee[Ne];return"function"==typeof Y?Y.bind(Ee):Y&&Y.then?Y.then(X=>Ve.run(()=>X)):Ve.run(()=>Y)});return new Proxy(()=>{},{get:(Ee,Y)=>Ke[Y],apply:(Ee,Y,X)=>Ke.then(de=>{var ye;const xe=de&&de(...X);return(null===(ye=null==Pe?void 0:Pe.spy)||void 0===ye?void 0:ye.apply)&&Pe.spy.apply(Ne,X,xe),xe})})})}),we=(ne,be)=>{be.forEach(Ve=>{Object.getOwnPropertyNames(Ve.prototype||Ve).forEach(Pe=>{Object.defineProperty(ne.prototype,Pe,Object.getOwnPropertyDescriptor(Ve.prototype||Ve,Pe))})})};class he{constructor(be){return be}}const ce=new u.OlP("angularfire2.app.options"),pe=new u.OlP("angularfire2.app.name");function $(ne,be,Ve){const ot="object"==typeof Ve&&Ve||{};ot.name=ot.name||"string"==typeof Ve&&Ve||"[DEFAULT]";const qe=te.Z.apps.filter(Ke=>Ke&&Ke.name===ot.name)[0]||be.runOutsideAngular(()=>te.Z.initializeApp(ne,ot));try{JSON.stringify(ne)!==JSON.stringify(qe.options)&&z("error",`${qe.name} Firebase App already initialized with different options${Je.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ke){}return new he(qe)}const z=(ne,...be)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[ne](...be)},re={provide:he,useFactory:$,deps:[ce,u.R0b,[new u.FiY,pe]]};let $e=(()=>{class ne{constructor(Ve){te.Z.registerVersion("angularfire",L.q4.full,"core"),te.Z.registerVersion("angularfire",L.q4.full,"app-compat"),te.Z.registerVersion("angular",u.q4F.full,Ve.toString())}static initializeApp(Ve,Pe){return{ngModule:ne,providers:[{provide:ce,useValue:Ve},{provide:pe,useValue:Pe}]}}}return ne.\u0275fac=function(Ve){return new(Ve||ne)(u.LFG(u.Lbi))},ne.\u0275mod=u.oAB({type:ne}),ne.\u0275inj=u.cJS({providers:[re]}),ne})();function De(ne,be,Ve,Pe,ot){const[,Ne,qe]=globalThis.\u0275AngularfireInstanceCache.find(Ke=>Ke[0]===ne)||[];if(Ne)return function Ze(ne,be){try{return ne.toString()===be.toString()}catch(Ve){return ne===be}}(ot,qe)||(Le("error",`${be} was already initialized on the ${Ve} Firebase App with different settings.${je?" You may need to reload as Firebase is not HMR aware.":""}`),Le("warn",{is:ot,was:qe})),Ne;{const Ke=Pe();return globalThis.\u0275AngularfireInstanceCache.push([ne,Ke,ot]),Ke}}const je=!!Je.hot,Le=(ne,...be)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[ne](...be)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Je,ve,F)=>{F.d(ve,{q4:()=>ni,iC:()=>ks,fc:()=>du,HU:()=>Ho,vb:()=>Mn,JM:()=>jd});var u=F(5e3),te=F(5867),L=F(5861),le=F(9681),ue=F(2090),we=F(4859),he=F(1877),ce=F(8766);const pe="@firebase/installations",$="0.5.12",re=`w:${$}`,$e="FIS_v2",be=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ve(I){return I instanceof ue.ZR&&I.code.includes("request-failed")}function Pe({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function ot(I){return{token:I.token,requestStatus:2,expiresIn:de(I.expiresIn),creationTime:Date.now()}}function Ne(I,A){return qe.apply(this,arguments)}function qe(){return(qe=(0,L.Z)(function*(I,A){const V=(yield A.json()).error;return be.create("request-failed",{requestName:I,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function Ke({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Ee(I,{refreshToken:A}){const M=Ke(I);return M.append("Authorization",function ye(I){return`${$e} ${I}`}(A)),M}function Y(I){return X.apply(this,arguments)}function X(){return(X=(0,L.Z)(function*(I){const A=yield I();return A.status>=500&&A.status<600?I():A})).apply(this,arguments)}function de(I){return Number(I.replace("s","000"))}function xe(I,A){return se.apply(this,arguments)}function se(){return(se=(0,L.Z)(function*({appConfig:I,heartbeatServiceProvider:A},{fid:M}){const V=Pe(I),Q=Ke(I),oe=A.getImmediate({optional:!0});if(oe){const Tt=yield oe.getHeartbeatsHeader();Tt&&Q.append("x-firebase-client",Tt)}const Ue={method:"POST",headers:Q,body:JSON.stringify({fid:M,authVersion:$e,appId:I.appId,sdkVersion:re})},ut=yield Y(()=>fetch(V,Ue));if(ut.ok){const Tt=yield ut.json();return{fid:Tt.fid||M,registrationStatus:2,refreshToken:Tt.refreshToken,authToken:ot(Tt.authToken)}}throw yield Ne("Create Installation",ut)})).apply(this,arguments)}function _t(I){return new Promise(A=>{setTimeout(A,I)})}const vn=/^[cdef][\w-]{21}$/;function qt(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function Ct(I){return function Ut(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return vn.test(M)?M:""}catch(I){return""}}function sn(I){return`${I.appName}!${I.appId}`}const or=new Map;function di(I,A){const M=sn(I);Gn(M,A),function zi(I,A){const M=function Yt(){return!Tr&&"BroadcastChannel"in self&&(Tr=new BroadcastChannel("[Firebase] FID Change"),Tr.onmessage=I=>{Gn(I.data.key,I.data.fid)}),Tr}();M&&M.postMessage({key:I,fid:A}),function Bn(){0===or.size&&Tr&&(Tr.close(),Tr=null)}()}(M,A)}function Gn(I,A){const M=or.get(I);if(M)for(const V of M)V(A)}let Tr=null;const fr="firebase-installations-store";let Re=null;function pr(){return Re||(Re=(0,ce.X3)("firebase-installations-database",1,{upgrade:(I,A)=>{0===A&&I.createObjectStore(fr)}})),Re}function ct(I,A){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,L.Z)(function*(I,A){const M=sn(I),Q=(yield pr()).transaction(fr,"readwrite"),oe=Q.objectStore(fr),Se=yield oe.get(M);return yield oe.put(A,M),yield Q.done,(!Se||Se.fid!==A.fid)&&di(I,A.fid),A})).apply(this,arguments)}function Fn(I){return gr.apply(this,arguments)}function gr(){return(gr=(0,L.Z)(function*(I){const A=sn(I),V=(yield pr()).transaction(fr,"readwrite");yield V.objectStore(fr).delete(A),yield V.done})).apply(this,arguments)}function Ki(I,A){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,L.Z)(function*(I,A){const M=sn(I),Q=(yield pr()).transaction(fr,"readwrite"),oe=Q.objectStore(fr),Se=yield oe.get(M),Ue=A(Se);return void 0===Ue?yield oe.delete(M):yield oe.put(Ue,M),yield Q.done,Ue&&(!Se||Se.fid!==Ue.fid)&&di(I,Ue.fid),Ue})).apply(this,arguments)}function Wn(I){return wn.apply(this,arguments)}function wn(){return(wn=(0,L.Z)(function*(I){let A;const M=yield Ki(I.appConfig,V=>{const Q=qa(V),oe=xn(I,Q);return A=oe.registrationPromise,oe.installationEntry});return""===M.fid?{installationEntry:yield A}:{installationEntry:M,registrationPromise:A}})).apply(this,arguments)}function qa(I){return wt(I||{fid:qt(),registrationStatus:0})}function xn(I,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(be.create("app-offline"))};const M={fid:A.fid,registrationStatus:1,registrationTime:Date.now()},V=function et(I,A){return vt.apply(this,arguments)}(I,M);return{installationEntry:M,registrationPromise:V}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:zs(I)}:{installationEntry:A}}function vt(){return(vt=(0,L.Z)(function*(I,A){try{const M=yield xe(I,A);return ct(I.appConfig,M)}catch(M){throw Ve(M)&&409===M.customData.serverCode?yield Fn(I.appConfig):yield ct(I.appConfig,{fid:A.fid,registrationStatus:0}),M}})).apply(this,arguments)}function zs(I){return ki.apply(this,arguments)}function ki(){return(ki=(0,L.Z)(function*(I){let A=yield Jr(I.appConfig);for(;1===A.registrationStatus;)yield _t(100),A=yield Jr(I.appConfig);if(0===A.registrationStatus){const{installationEntry:M,registrationPromise:V}=yield Wn(I);return V||M}return A})).apply(this,arguments)}function Jr(I){return Ki(I,A=>{if(!A)throw be.create("installation-not-found");return wt(A)})}function wt(I){return function zt(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function pa(I,A){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,L.Z)(function*({appConfig:I,heartbeatServiceProvider:A},M){const V=Gt(I,M),Q=Ee(I,M),oe=A.getImmediate({optional:!0});if(oe){const Tt=yield oe.getHeartbeatsHeader();Tt&&Q.append("x-firebase-client",Tt)}const Ue={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:re,appId:I.appId}})},ut=yield Y(()=>fetch(V,Ue));if(ut.ok)return ot(yield ut.json());throw yield Ne("Generate Auth Token",ut)})).apply(this,arguments)}function Gt(I,{fid:A}){return`${Pe(I)}/${A}/authTokens:generate`}function H(I){return W.apply(this,arguments)}function W(){return(W=(0,L.Z)(function*(I,A=!1){let M;const V=yield Ki(I.appConfig,oe=>{if(!mt(oe))throw be.create("not-registered");const Se=oe.authToken;if(!A&&Xt(Se))return oe;if(1===Se.requestStatus)return M=B(I,A),oe;{if(!navigator.onLine)throw be.create("app-offline");const Ue=Xr(oe);return M=Te(I,Ue),Ue}});return M?yield M:V.authToken})).apply(this,arguments)}function B(I,A){return K.apply(this,arguments)}function K(){return(K=(0,L.Z)(function*(I,A){let M=yield q(I.appConfig);for(;1===M.authToken.requestStatus;)yield _t(100),M=yield q(I.appConfig);const V=M.authToken;return 0===V.requestStatus?H(I,A):V})).apply(this,arguments)}function q(I){return Ki(I,A=>{if(!mt(A))throw be.create("not-registered");return function Vt(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function Te(I,A){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,L.Z)(function*(I,A){try{const M=yield pa(I,A),V=Object.assign(Object.assign({},A),{authToken:M});return yield ct(I.appConfig,V),M}catch(M){if(!Ve(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const V=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield ct(I.appConfig,V)}else yield Fn(I.appConfig);throw M}})).apply(this,arguments)}function mt(I){return void 0!==I&&2===I.registrationStatus}function Xt(I){return 2===I.requestStatus&&!function hn(I){const A=Date.now();return A<I.creationTime||I.creationTime+I.expiresIn<A+36e5}(I)}function Xr(I){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:A})}function Ks(){return(Ks=(0,L.Z)(function*(I){const A=I,{installationEntry:M,registrationPromise:V}=yield Wn(A);return V?V.catch(console.error):H(A).catch(console.error),M.fid})).apply(this,arguments)}function ma(){return(ma=(0,L.Z)(function*(I,A=!1){const M=I;return yield _a(M),(yield H(M,A)).token})).apply(this,arguments)}function _a(I){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,L.Z)(function*(I){const{registrationPromise:A}=yield Wn(I);A&&(yield A)})).apply(this,arguments)}function kn(I){return be.create("missing-app-config-values",{valueName:I})}const _d="installations",We=I=>{const A=I.getProvider("app").getImmediate(),M=function Ao(I){if(!I||!I.options)throw kn("App Configuration");if(!I.name)throw kn("App Name");const A=["projectId","apiKey","appId"];for(const M of A)if(!I.options[M])throw kn(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(A);return{app:A,appConfig:M,heartbeatServiceProvider:(0,le._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},St=I=>{const A=I.getProvider("app").getImmediate(),M=(0,le._getProvider)(A,_d).getImmediate();return{getId:()=>function hi(I){return Ks.apply(this,arguments)}(M),getToken:Q=>function ga(I){return ma.apply(this,arguments)}(M,Q)}};(function on(){(0,le._registerComponent)(new we.wA(_d,We,"PUBLIC")),(0,le._registerComponent)(new we.wA("installations-internal",St,"PRIVATE"))})(),(0,le.registerVersion)(pe,$),(0,le.registerVersion)(pe,$,"esm2017");const Rn="@firebase/remote-config",In=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class yf{constructor(A,M,V,Q){this.client=A,this.storage=M,this.storageCache=V,this.logger=Q}isCachedDataFresh(A,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-M,Q=V<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${Q}.`),Q}fetch(A){var M=this;return(0,L.Z)(function*(){const[V,Q]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Q&&M.isCachedDataFresh(A.cacheMaxAgeMillis,V))return Q;A.eTag=Q&&Q.eTag;const oe=yield M.client.fetch(A),Se=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===oe.status&&Se.push(M.storage.setLastSuccessfulFetchResponse(oe)),yield Promise.all(Se),oe})()}}function Qg(I=navigator){return I.languages&&I.languages[0]||I.language}class Ni{constructor(A,M,V,Q,oe,Se){this.firebaseInstallations=A,this.sdkVersion=M,this.namespace=V,this.projectId=Q,this.apiKey=oe,this.appId=Se}fetch(A){var M=this;return(0,L.Z)(function*(){var V,Q,oe;const[Se,Ue]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Tt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,It={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},gt={sdk_version:M.sdkVersion,app_instance_id:Se,app_instance_id_token:Ue,app_id:M.appId,language_code:Qg()},Vn={method:"POST",headers:It,body:JSON.stringify(gt)},tr=fetch(Tt,Vn),Ei=new Promise((qo,Go)=>{A.signal.addEventListener(()=>{const hu=new Error("The operation was aborted.");hu.name="AbortError",Go(hu)})});let $o;try{yield Promise.race([tr,Ei]),$o=yield tr}catch(qo){let Go="fetch-client-network";throw"AbortError"===(null===(V=qo)||void 0===V?void 0:V.name)&&(Go="fetch-timeout"),In.create(Go,{originalErrorMessage:null===(Q=qo)||void 0===Q?void 0:Q.message})}let Fa=$o.status;const bc=$o.headers.get("ETag")||void 0;let as,Ur;if(200===$o.status){let qo;try{qo=yield $o.json()}catch(Go){throw In.create("fetch-client-parse",{originalErrorMessage:null===(oe=Go)||void 0===oe?void 0:oe.message})}as=qo.entries,Ur=qo.state}if("INSTANCE_STATE_UNSPECIFIED"===Ur?Fa=500:"NO_CHANGE"===Ur?Fa=304:("NO_TEMPLATE"===Ur||"EMPTY_CONFIG"===Ur)&&(as={}),304!==Fa&&200!==Fa)throw In.create("fetch-status",{httpStatus:Fa});return{status:Fa,eTag:bc,config:as}})()}}class Wa{constructor(A,M){this.client=A,this.storage=M}fetch(A){var M=this;return(0,L.Z)(function*(){const V=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(A,V)})()}attemptFetch(A,{throttleEndTimeMillis:M,backoffCount:V}){var Q=this;return(0,L.Z)(function*(){yield function yd(I,A){return new Promise((M,V)=>{const Q=Math.max(A-Date.now(),0),oe=setTimeout(M,Q);I.addEventListener(()=>{clearTimeout(oe),V(In.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,M);try{const oe=yield Q.client.fetch(A);return yield Q.storage.deleteThrottleMetadata(),oe}catch(oe){if(!function Jg(I){if(!(I instanceof ue.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}(oe))throw oe;const Se={throttleEndTimeMillis:Date.now()+(0,ue.$s)(V),backoffCount:V+1};return yield Q.storage.setThrottleMetadata(Se),Q.attemptFetch(A,Se)}})()}}class wf{constructor(A,M,V,Q,oe){this.app=A,this._client=M,this._storageCache=V,this._storage=Q,this._logger=oe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function za(I,A){var M;const V=I.target.error||void 0;return In.create(A,{originalErrorMessage:V&&(null===(M=V)||void 0===M?void 0:M.message)})}const Ia="app_namespace_store";class nc{constructor(A,M,V,Q=function Ta(){return new Promise((I,A)=>{var M;try{const V=indexedDB.open("firebase_remote_config",1);V.onerror=Q=>{A(za(Q,"storage-open"))},V.onsuccess=Q=>{I(Q.target.result)},V.onupgradeneeded=Q=>{0===Q.oldVersion&&Q.target.result.createObjectStore(Ia,{keyPath:"compositeKey"})}}catch(V){A(In.create("storage-open",{originalErrorMessage:null===(M=V)||void 0===M?void 0:M.message}))}})}()){this.appId=A,this.appName=M,this.namespace=V,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var M=this;return(0,L.Z)(function*(){const V=yield M.openDbPromise;return new Promise((Q,oe)=>{var Se;const ut=V.transaction([Ia],"readonly").objectStore(Ia),Tt=M.createCompositeKey(A);try{const It=ut.get(Tt);It.onerror=gt=>{oe(za(gt,"storage-get"))},It.onsuccess=gt=>{const Vn=gt.target.result;Q(Vn?Vn.value:void 0)}}catch(It){oe(In.create("storage-get",{originalErrorMessage:null===(Se=It)||void 0===Se?void 0:Se.message}))}})})()}set(A,M){var V=this;return(0,L.Z)(function*(){const Q=yield V.openDbPromise;return new Promise((oe,Se)=>{var Ue;const Tt=Q.transaction([Ia],"readwrite").objectStore(Ia),It=V.createCompositeKey(A);try{const gt=Tt.put({compositeKey:It,value:M});gt.onerror=Vn=>{Se(za(Vn,"storage-set"))},gt.onsuccess=()=>{oe()}}catch(gt){Se(In.create("storage-set",{originalErrorMessage:null===(Ue=gt)||void 0===Ue?void 0:Ue.message}))}})})()}delete(A){var M=this;return(0,L.Z)(function*(){const V=yield M.openDbPromise;return new Promise((Q,oe)=>{var Se;const ut=V.transaction([Ia],"readwrite").objectStore(Ia),Tt=M.createCompositeKey(A);try{const It=ut.delete(Tt);It.onerror=gt=>{oe(za(gt,"storage-delete"))},It.onsuccess=()=>{Q()}}catch(It){oe(In.create("storage-delete",{originalErrorMessage:null===(Se=It)||void 0===Se?void 0:Se.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class wd{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,L.Z)(function*(){const M=A.storage.getLastFetchStatus(),V=A.storage.getLastSuccessfulFetchTimestampMillis(),Q=A.storage.getActiveConfig(),oe=yield M;oe&&(A.lastFetchStatus=oe);const Se=yield V;Se&&(A.lastSuccessfulFetchTimestampMillis=Se);const Ue=yield Q;Ue&&(A.activeConfig=Ue)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function Ka(){return rc.apply(this,arguments)}function rc(){return(rc=(0,L.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch(I){return!1}})).apply(this,arguments)}!function em(){(0,le._registerComponent)(new we.wA("remote-config",function I(A,{instanceIdentifier:M}){const V=A.getProvider("app").getImmediate(),Q=A.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw In.create("registration-window");if(!(0,ue.hl)())throw In.create("indexed-db-unavailable");const{projectId:oe,apiKey:Se,appId:Ue}=V.options;if(!oe)throw In.create("registration-project-id");if(!Se)throw In.create("registration-api-key");if(!Ue)throw In.create("registration-app-id");const ut=new nc(Ue,V.name,M=M||"firebase"),Tt=new wd(ut),It=new he.Yd(Rn);It.logLevel=he.in.ERROR;const gt=new Ni(Q,le.SDK_VERSION,M,oe,Se,Ue),Vn=new Wa(gt,ut),tr=new yf(Vn,ut,Tt,It),Ei=new wf(V,tr,Tt,ut,It);return function Ri(I){const A=(0,ue.m9)(I);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(Ei),Ei},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(Rn,"0.3.11"),(0,le.registerVersion)(Rn,"0.3.11","esm2017")}();const Ed="/firebase-messaging-sw.js",tm="/firebase-cloud-messaging-push-scope",Qi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Js="google.c.a.c_id",bd="google.c.a.c_l",Cd="google.c.a.ts",Ya="google.c.a.e";var bs=(()=>{return(I=bs||(bs={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",bs;var I})();function Cs(I){const A=new Uint8Array(I);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function gi(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(M),Q=new Uint8Array(V.length);for(let oe=0;oe<V.length;++oe)Q[oe]=V.charCodeAt(oe);return Q}const Id="fcm_token_details_db",Td="fcm_token_object_Store";function sc(I){return Wl.apply(this,arguments)}function Wl(){return Wl=(0,L.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(oe=>oe.name).includes(Id))return null;let A=null;return(yield(0,ce.X3)(Id,5,{upgrade:(V=(0,L.Z)(function*(Q,oe,Se,Ue){var ut;if(oe<2||!Q.objectStoreNames.contains(Td))return;const Tt=Ue.objectStore(Td),It=yield Tt.index("fcmSenderId").get(I);if(yield Tt.clear(),It)if(2===oe){const gt=It;if(!gt.auth||!gt.p256dh||!gt.endpoint)return;A={token:gt.fcmToken,createTime:null!==(ut=gt.createTime)&&void 0!==ut?ut:Date.now(),subscriptionOptions:{auth:gt.auth,p256dh:gt.p256dh,endpoint:gt.endpoint,swScope:gt.swScope,vapidKey:"string"==typeof gt.vapidKey?gt.vapidKey:Cs(gt.vapidKey)}}}else if(3===oe){const gt=It;A={token:gt.fcmToken,createTime:gt.createTime,subscriptionOptions:{auth:Cs(gt.auth),p256dh:Cs(gt.p256dh),endpoint:gt.endpoint,swScope:gt.swScope,vapidKey:Cs(gt.vapidKey)}}}else if(4===oe){const gt=It;A={token:gt.fcmToken,createTime:gt.createTime,subscriptionOptions:{auth:Cs(gt.auth),p256dh:Cs(gt.p256dh),endpoint:gt.endpoint,swScope:gt.swScope,vapidKey:Cs(gt.vapidKey)}}}}),function(oe,Se,Ue,ut){return V.apply(this,arguments)})})).close(),yield(0,ce.Lj)(Id),yield(0,ce.Lj)("fcm_vapid_details_db"),yield(0,ce.Lj)("undefined"),oc(A)?A:null;var V}),Wl.apply(this,arguments)}function oc(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:A}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const Qt="firebase-messaging-store";let Is=null;function zl(){return Is||(Is=(0,ce.X3)("firebase-messaging-database",1,{upgrade:(I,A)=>{0===A&&I.createObjectStore(Qt)}})),Is}function Un(I){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,L.Z)(function*(I){const A=Pi(I),V=yield(yield zl()).transaction(Qt).objectStore(Qt).get(A);if(V)return V;{const Q=yield sc(I.appConfig.senderId);if(Q)return yield Qa(I,Q),Q}})).apply(this,arguments)}function Qa(I,A){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,L.Z)(function*(I,A){const M=Pi(I),Q=(yield zl()).transaction(Qt,"readwrite");return yield Q.objectStore(Qt).put(A,M),yield Q.done,A})).apply(this,arguments)}function Tn(I){return eo.apply(this,arguments)}function eo(){return(eo=(0,L.Z)(function*(I){const A=Pi(I),V=(yield zl()).transaction(Qt,"readwrite");yield V.objectStore(Qt).delete(A),yield V.done})).apply(this,arguments)}function Pi({appConfig:I}){return I.appId}const Jt=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ja(I,A){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,L.Z)(function*(I,A){var M;const V=yield el(I),Q=tl(A),oe={method:"POST",headers:V,body:JSON.stringify(Q)};let Se;try{Se=yield(yield fetch(ft(I.appConfig),oe)).json()}catch(Ue){throw Jt.create("token-subscribe-failed",{errorInfo:null===(M=Ue)||void 0===M?void 0:M.toString()})}if(Se.error)throw Jt.create("token-subscribe-failed",{errorInfo:Se.error.message});if(!Se.token)throw Jt.create("token-subscribe-no-token");return Se.token})).apply(this,arguments)}function Ds(I,A){return ei.apply(this,arguments)}function ei(){return(ei=(0,L.Z)(function*(I,A){var M;const V=yield el(I),Q=tl(A.subscriptionOptions),oe={method:"PATCH",headers:V,body:JSON.stringify(Q)};let Se;try{Se=yield(yield fetch(`${ft(I.appConfig)}/${A.token}`,oe)).json()}catch(Ue){throw Jt.create("token-update-failed",{errorInfo:null===(M=Ue)||void 0===M?void 0:M.toString()})}if(Se.error)throw Jt.create("token-update-failed",{errorInfo:Se.error.message});if(!Se.token)throw Jt.create("token-update-no-token");return Se.token})).apply(this,arguments)}function xo(I,A){return ko.apply(this,arguments)}function ko(){return(ko=(0,L.Z)(function*(I,A){var M;const Q={method:"DELETE",headers:yield el(I)};try{const Se=yield(yield fetch(`${ft(I.appConfig)}/${A}`,Q)).json();if(Se.error)throw Jt.create("token-unsubscribe-failed",{errorInfo:Se.error.message})}catch(oe){throw Jt.create("token-unsubscribe-failed",{errorInfo:null===(M=oe)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function ft({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function el(I){return yr.apply(this,arguments)}function yr(){return(yr=(0,L.Z)(function*({appConfig:I,installations:A}){const M=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function tl({p256dh:I,auth:A,endpoint:M,vapidKey:V}){const Q={web:{endpoint:M,auth:A,p256dh:I}};return V!==Qi&&(Q.web.applicationPubKey=V),Q}const Dd=6048e5;function nl(I){return Da.apply(this,arguments)}function Da(){return(Da=(0,L.Z)(function*(I){const A=yield Xi(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:A.endpoint,auth:Cs(A.getKey("auth")),p256dh:Cs(A.getKey("p256dh"))},V=yield Un(I.firebaseDependencies);if(V){if(Kl(V.subscriptionOptions,M))return Date.now()>=V.createTime+Dd?Zt(I,{token:V.token,createTime:Date.now(),subscriptionOptions:M}):V.token;try{yield xo(I.firebaseDependencies,V.token)}catch(Q){console.warn(Q)}return Dn(I.firebaseDependencies,M)}return Dn(I.firebaseDependencies,M)})).apply(this,arguments)}function lc(I){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,L.Z)(function*(I){const A=yield Un(I.firebaseDependencies);A&&(yield xo(I.firebaseDependencies,A.token),yield Tn(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Zt(I,A){return As.apply(this,arguments)}function As(){return(As=(0,L.Z)(function*(I,A){try{const M=yield Ds(I.firebaseDependencies,A),V=Object.assign(Object.assign({},A),{token:M,createTime:Date.now()});return yield Qa(I.firebaseDependencies,V),M}catch(M){throw yield lc(I),M}})).apply(this,arguments)}function Dn(I,A){return rl.apply(this,arguments)}function rl(){return(rl=(0,L.Z)(function*(I,A){const V={token:yield Ja(I,A),createTime:Date.now(),subscriptionOptions:A};return yield Qa(I,V),V.token})).apply(this,arguments)}function Xi(I,A){return vr.apply(this,arguments)}function vr(){return(vr=(0,L.Z)(function*(I,A){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:gi(A)})})).apply(this,arguments)}function Kl(I,A){return A.vapidKey===I.vapidKey&&A.endpoint===I.endpoint&&A.auth===I.auth&&A.p256dh===I.p256dh}function Ro(I){const A={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Cf(I,A){if(!A.notification)return;I.notification={};const M=A.notification.title;M&&(I.notification.title=M);const V=A.notification.body;V&&(I.notification.body=V);const Q=A.notification.image;Q&&(I.notification.image=Q)}(A,I),function uc(I,A){!A.data||(I.data=A.data)}(A,I),function Mo(I,A){var M,V,Q,oe,Se;if(!A.fcmOptions&&!(null===(M=A.notification)||void 0===M?void 0:M.click_action))return;I.fcmOptions={};const Ue=null!==(Q=null===(V=A.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==Q?Q:null===(oe=A.notification)||void 0===oe?void 0:oe.click_action;Ue&&(I.fcmOptions.link=Ue);const ut=null===(Se=A.fcmOptions)||void 0===Se?void 0:Se.analytics_label;ut&&(I.fcmOptions.analyticsLabel=ut)}(A,I),A}function No(I){return"object"==typeof I&&!!I&&Js in I}function lr(I,A){const M=[];for(let V=0;V<I.length;V++)M.push(I.charAt(V)),V<A.length&&M.push(A.charAt(V));return M.join("")}function Aa(I){return Jt.create("missing-app-config-values",{valueName:I})}lr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),lr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class to{constructor(A,M,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function Oi(I){if(!I||!I.options)throw Aa("App Configuration Object");if(!I.name)throw Aa("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const V of A)if(!M[V])throw Aa(V);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:Q,installations:M,analyticsProvider:V}}_delete(){return Promise.resolve()}}function es(I){return il.apply(this,arguments)}function il(){return(il=(0,L.Z)(function*(I){var A;try{I.swRegistration=yield navigator.serviceWorker.register(Ed,{scope:tm}),I.swRegistration.update().catch(()=>{})}catch(M){throw Jt.create("failed-service-worker-registration",{browserErrorMessage:null===(A=M)||void 0===A?void 0:A.message})}})).apply(this,arguments)}function Ad(I,A){return sl.apply(this,arguments)}function sl(){return(sl=(0,L.Z)(function*(I,A){if(!A&&!I.swRegistration&&(yield es(I)),A||!I.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw Jt.create("invalid-sw-registration");I.swRegistration=A}})).apply(this,arguments)}function Yl(I,A){return Po.apply(this,arguments)}function Po(){return(Po=(0,L.Z)(function*(I,A){A?I.vapidKey=A:I.vapidKey||(I.vapidKey=Qi)})).apply(this,arguments)}function Ql(){return(Ql=(0,L.Z)(function*(I,A){if(!navigator)throw Jt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Jt.create("permission-blocked");return yield Yl(I,null==A?void 0:A.vapidKey),yield Ad(I,null==A?void 0:A.serviceWorkerRegistration),nl(I)})).apply(this,arguments)}function ol(I,A,M){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,L.Z)(function*(I,A,M){const V=Jl(A);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:M[Js],message_name:M[bd],message_time:M[Cd],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Jl(I){switch(I){case bs.NOTIFICATION_CLICKED:return"notification_open";case bs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function al(){return(al=(0,L.Z)(function*(I,A){const M=A.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===bs.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Ro(M)):I.onMessageHandler.next(Ro(M)));const V=M.data;No(V)&&"1"===V[Ya]&&(yield ol(I,M.messageType,V))})).apply(this,arguments)}const Xl="@firebase/messaging",xd=I=>{const A=new to(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function cc(I,A){return al.apply(this,arguments)}(A,M)),A},ul=I=>{const A=I.getProvider("messaging").getImmediate();return{getToken:V=>function Oo(I,A){return Ql.apply(this,arguments)}(A,V)}};function cl(){return En.apply(this,arguments)}function En(){return(En=(0,L.Z)(function*(){try{yield(0,ue.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,ue.hl)()&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function nm(){(0,le._registerComponent)(new we.wA("messaging",xd,"PUBLIC")),(0,le._registerComponent)(new we.wA("messaging-internal",ul,"PRIVATE")),(0,le.registerVersion)(Xl,"0.9.16"),(0,le.registerVersion)(Xl,"0.9.16","esm2017")}();const ro="analytics",tu="firebase_id",dc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Nd="https://www.googletagmanager.com/gtag/js",yn=new he.Yd("@firebase/analytics");function hl(I){return Promise.all(I.map(A=>A.catch(M=>M)))}function Pd(I,A){const M=document.createElement("script");M.src=`${Nd}?l=${I}&id=${A}`,M.async=!0,document.head.appendChild(M)}function nu(I,A,M,V,Q,oe){return fl.apply(this,arguments)}function fl(){return(fl=(0,L.Z)(function*(I,A,M,V,Q,oe){const Se=V[Q];try{if(Se)yield A[Se];else{const ut=(yield hl(M)).find(Tt=>Tt.measurementId===Q);ut&&(yield A[ut.appId])}}catch(Ue){yn.error(Ue)}I("config",Q,oe)})).apply(this,arguments)}function Od(I,A,M,V,Q){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,L.Z)(function*(I,A,M,V,Q){try{let oe=[];if(Q&&Q.send_to){let Se=Q.send_to;Array.isArray(Se)||(Se=[Se]);const Ue=yield hl(M);for(const ut of Se){const Tt=Ue.find(gt=>gt.measurementId===ut),It=Tt&&A[Tt.appId];if(!It){oe=[];break}oe.push(It)}}0===oe.length&&(oe=Object.values(A)),yield Promise.all(oe),I("event",V,Q||{})}catch(oe){yn.error(oe)}})).apply(this,arguments)}function en(){const I=window.document.getElementsByTagName("script");for(const A of Object.values(I))if(A.src&&A.src.includes(Nd))return A;return null}const tt=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Sa=new class er{constructor(A={},M=1e3){this.throttleMetadata=A,this.intervalMillis=M}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,M){this.throttleMetadata[A]=M}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function om(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function gl(I){return ru.apply(this,arguments)}function ru(){return(ru=(0,L.Z)(function*(I){var A;const{appId:M,apiKey:V}=I,Q={method:"GET",headers:om(V)},oe=dc.replace("{app-id}",M),Se=yield fetch(oe,Q);if(200!==Se.status&&304!==Se.status){let Ue="";try{const ut=yield Se.json();(null===(A=ut.error)||void 0===A?void 0:A.message)&&(Ue=ut.error.message)}catch(ut){}throw tt.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:Ue})}return Se.json()})).apply(this,arguments)}function iu(I){return Df.apply(this,arguments)}function Df(){return(Df=(0,L.Z)(function*(I,A=Sa,M){const{appId:V,apiKey:Q,measurementId:oe}=I.options;if(!V)throw tt.create("no-app-id");if(!Q){if(oe)return{measurementId:oe,appId:V};throw tt.create("no-api-key")}const Se=A.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ue=new xa;return setTimeout((0,L.Z)(function*(){Ue.abort()}),void 0!==M?M:6e4),Fo({appId:V,apiKey:Q,measurementId:oe},Se,Ue,A)})).apply(this,arguments)}function Fo(I,A,M){return nt.apply(this,arguments)}function nt(){return(nt=(0,L.Z)(function*(I,{throttleEndTimeMillis:A,backoffCount:M},V,Q=Sa){var oe,Se;const{appId:Ue,measurementId:ut}=I;try{yield Lo(V,A)}catch(Tt){if(ut)return yn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ut} provided in the "measurementId" field in the local Firebase config. [${null===(oe=Tt)||void 0===oe?void 0:oe.message}]`),{appId:Ue,measurementId:ut};throw Tt}try{const Tt=yield gl(I);return Q.deleteThrottleMetadata(Ue),Tt}catch(Tt){const It=Tt;if(!hc(It)){if(Q.deleteThrottleMetadata(Ue),ut)return yn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ut} provided in the "measurementId" field in the local Firebase config. [${null==It?void 0:It.message}]`),{appId:Ue,measurementId:ut};throw Tt}const gt=503===Number(null===(Se=null==It?void 0:It.customData)||void 0===Se?void 0:Se.httpStatus)?(0,ue.$s)(M,Q.intervalMillis,30):(0,ue.$s)(M,Q.intervalMillis),Vn={throttleEndTimeMillis:Date.now()+gt,backoffCount:M+1};return Q.setThrottleMetadata(Ue,Vn),yn.debug(`Calling attemptFetch again in ${gt} millis`),Fo(I,Vn,V,Q)}})).apply(this,arguments)}function Lo(I,A){return new Promise((M,V)=>{const Q=Math.max(A-Date.now(),0),oe=setTimeout(M,Q);I.addEventListener(()=>{clearTimeout(oe),V(tt.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function hc(I){if(!(I instanceof ue.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}class xa{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}let ka,Ss;function Ra(){return(Ra=(0,L.Z)(function*(I,A,M,V,Q){if(Q&&Q.global)I("event",M,V);else{const oe=yield A;I("event",M,Object.assign(Object.assign({},V),{send_to:oe}))}})).apply(this,arguments)}function ts(I){Ss=I}function Pa(I){ka=I}function ns(){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,L.Z)(function*(){var I;if(!(0,ue.hl)())return yn.warn(tt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(A){return yn.warn(tt.create("indexeddb-unavailable",{errorInfo:null===(I=A)||void 0===I?void 0:I.toString()}).message),!1}return!0})).apply(this,arguments)}function so(){return(so=(0,L.Z)(function*(I,A,M,V,Q,oe,Se){var Ue;const ut=iu(I);ut.then(tr=>{M[tr.measurementId]=tr.appId,I.options.measurementId&&tr.measurementId!==I.options.measurementId&&yn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${tr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(tr=>yn.error(tr)),A.push(ut);const Tt=ns().then(tr=>{if(tr)return V.getId()}),[It,gt]=yield Promise.all([ut,Tt]);en()||Pd(oe,It.measurementId),Ss&&(Q("consent","default",Ss),ts(void 0)),Q("js",new Date);const Vn=null!==(Ue=null==Se?void 0:Se.config)&&void 0!==Ue?Ue:{};return Vn.origin="firebase",Vn.update=!0,null!=gt&&(Vn[tu]=gt),Q("config",It.measurementId,Vn),ka&&(Q("set",ka),Pa(void 0)),It.measurementId})).apply(this,arguments)}class Hn{constructor(A){this.app=A}_delete(){return delete Kt[this.app.options.appId],Promise.resolve()}}let Kt={},rs=[];const xs={};let Fi,tn,xr="dataLayer",su=!1;function pc(I,A,M){!function pn(){const I=[];if((0,ue.ru)()&&I.push("This is a browser extension environment."),(0,ue.zI)()||I.push("Cookies are not available."),I.length>0){const A=I.map((V,Q)=>`(${Q+1}) ${V}`).join(" "),M=tt.create("invalid-analytics-context",{errorInfo:A});yn.warn(M.message)}}();const V=I.options.appId;if(!V)throw tt.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw tt.create("no-api-key");yn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Kt[V])throw tt.create("already-exists",{id:V});if(!su){!function im(I){let A=[];Array.isArray(window[I])?A=window[I]:window[I]=A}(xr);const{wrappedGtag:oe,gtagCore:Se}=function sm(I,A,M,V,Q){let oe=function(...Se){window[V].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(oe=window[Q]),window[Q]=function pl(I,A,M,V){function oe(){return(oe=(0,L.Z)(function*(Se,Ue,ut){try{"event"===Se?yield Od(I,A,M,Ue,ut):"config"===Se?yield nu(I,A,M,V,Ue,ut):"consent"===Se?I("consent","update",ut):I("set",Ue)}catch(Tt){yn.error(Tt)}})).apply(this,arguments)}return function Q(Se,Ue,ut){return oe.apply(this,arguments)}}(oe,I,A,M),{gtagCore:oe,wrappedGtag:window[Q]}}(Kt,rs,xs,xr,"gtag");tn=oe,Fi=Se,su=!0}return Kt[V]=function Bo(I,A,M,V,Q,oe,Se){return so.apply(this,arguments)}(I,rs,xs,A,Fi,xr,M),new Hn(I)}function am(){return is.apply(this,arguments)}function is(){return(is=(0,L.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch(I){return!1}})).apply(this,arguments)}const lm="@firebase/analytics";!function vi(){(0,le._registerComponent)(new we.wA(ro,(A,{options:M})=>pc(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,le._registerComponent)(new we.wA("analytics-internal",function I(A){try{const M=A.getProvider(ro).getImmediate();return{logEvent:(V,Q,oe)=>function au(I,A,M,V){I=(0,ue.m9)(I),function Zn(I,A,M,V,Q){return Ra.apply(this,arguments)}(tn,Kt[I.app.options.appId],A,M,V).catch(Q=>yn.error(Q))}(M,V,Q,oe)}}catch(M){throw tt.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,le.registerVersion)(lm,"0.8.0"),(0,le.registerVersion)(lm,"0.8.0","esm2017")}();var ss=F(4408),Zo=F(7565);const _c=new class Oa extends Zo.v{}(class Ud extends ss.o{constructor(A,M){super(A,M),this.scheduler=A,this.work=M}schedule(A,M=0){return M>0?super.schedule(A,M):(this.delay=M,this.state=A,this.scheduler.flush(this),this)}execute(A,M){return M>0||this.closed?super.execute(A,M):this._execute(A,M)}requestAsyncId(A,M,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(A,M,V):A.flush(this)}});var xf=F(4986),um=F(8505),vl=F(5363),Nt=F(9468);const ni=new u.GfV("7.4.1"),os="__angularfire_symbol__analyticsIsSupportedValue",Li="__angularfire_symbol__analyticsIsSupported",uu="__angularfire_symbol__remoteConfigIsSupportedValue",cu="__angularfire_symbol__remoteConfigIsSupported",yc="__angularfire_symbol__messagingIsSupportedValue",vc="__angularfire_symbol__messagingIsSupported";function jd(I,A,M){if(A){if(1===A.length)return A[0];const oe=A.filter(Se=>Se.app===M);if(1===oe.length)return oe[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[Li]||(globalThis[Li]=am().then(I=>globalThis[os]=I).catch(()=>globalThis[os]=!1)),globalThis[vc]||(globalThis[vc]=cl().then(I=>globalThis[yc]=I).catch(()=>globalThis[yc]=!1)),globalThis[cu]||(globalThis[cu]=Ka().then(I=>globalThis[uu]=I).catch(()=>globalThis[uu]=!1));const Mn=(I,A)=>{const M=A?[A]:(0,te.C6)(),V=[];return M.forEach(Q=>{Q.container.getProvider(I).instances.forEach(Se=>{V.includes(Se)||V.push(Se)})}),V};function Lr(){}class oo{constructor(A,M=_c){this.zone=A,this.delegate=M}now(){return this.delegate.now()}schedule(A,M,V){const Q=this.zone;return this.delegate.schedule(function(Se){Q.runGuarded(()=>{A.apply(this,[Se])})},M,V)}}class wc{constructor(A){this.zone=A,this.task=null}call(A,M){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Lr,{},Lr,Lr)),M.pipe((0,um.b)({next:V,complete:V,error:V})).subscribe(A).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ho=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new oo(Zone.current)),this.insideAngular=M.run(()=>new oo(Zone.current,xf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(u.LFG(u.R0b))},I.\u0275prov=u.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function ao(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function du(I){return I.pipe((0,vl.Q)(ao().outsideAngular))}function ks(I){return ao(),function Rs(I){return function(M){return(M=M.lift(new wc(I.ngZone))).pipe((0,Nt.R)(I.outsideAngular),(0,vl.Q)(I.insideAngular))}}(ao())(I)}},2090:(Je,ve,F)=>{F.d(ve,{$s:()=>zt,BH:()=>$e,DV:()=>ws,Dv:()=>Ki,G6:()=>Ke,GJ:()=>di,L:()=>ce,LL:()=>se,Mn:()=>Ne,Pz:()=>yt,Sg:()=>De,UG:()=>Le,UI:()=>zi,US:()=>we,Wj:()=>wn,Yr:()=>qe,ZB:()=>z,ZR:()=>xe,b$:()=>Ve,cI:()=>vn,d:()=>Pe,dS:()=>xn,eu:()=>Y,g5:()=>L,gK:()=>Qr,gQ:()=>Re,h$:()=>he,hl:()=>Ee,hu:()=>te,jU:()=>ne,lb:()=>qa,m9:()=>Gt,ne:()=>pr,p$:()=>$,pd:()=>fr,r3:()=>dn,ru:()=>be,tV:()=>pe,uI:()=>je,ug:()=>et,vZ:()=>Tr,w1:()=>ot,w9:()=>or,xO:()=>Do,xb:()=>Gn,z$:()=>Ze,zI:()=>X,zd:()=>Yr});const te=function(H,W){if(!H)throw L(W)},L=function(H){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+H)},le=function(H){const W=[];let B=0;for(let K=0;K<H.length;K++){let q=H.charCodeAt(K);q<128?W[B++]=q:q<2048?(W[B++]=q>>6|192,W[B++]=63&q|128):55296==(64512&q)&&K+1<H.length&&56320==(64512&H.charCodeAt(K+1))?(q=65536+((1023&q)<<10)+(1023&H.charCodeAt(++K)),W[B++]=q>>18|240,W[B++]=q>>12&63|128,W[B++]=q>>6&63|128,W[B++]=63&q|128):(W[B++]=q>>12|224,W[B++]=q>>6&63|128,W[B++]=63&q|128)}return W},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,W){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const B=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,K=[];for(let q=0;q<H.length;q+=3){const Te=H[q],Ge=q+1<H.length,mt=Ge?H[q+1]:0,Xt=q+2<H.length,hn=Xt?H[q+2]:0;let hi=(15&mt)<<2|hn>>6,Ks=63&hn;Xt||(Ks=64,Ge||(hi=64)),K.push(B[Te>>2],B[(3&Te)<<4|mt>>4],B[hi],B[Ks])}return K.join("")},encodeString(H,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa(H):this.encodeByteArray(le(H),W)},decodeString(H,W){return this.HAS_NATIVE_SUPPORT&&!W?atob(H):function(H){const W=[];let B=0,K=0;for(;B<H.length;){const q=H[B++];if(q<128)W[K++]=String.fromCharCode(q);else if(q>191&&q<224){const Te=H[B++];W[K++]=String.fromCharCode((31&q)<<6|63&Te)}else if(q>239&&q<365){const Xt=((7&q)<<18|(63&H[B++])<<12|(63&H[B++])<<6|63&H[B++])-65536;W[K++]=String.fromCharCode(55296+(Xt>>10)),W[K++]=String.fromCharCode(56320+(1023&Xt))}else{const Te=H[B++],Ge=H[B++];W[K++]=String.fromCharCode((15&q)<<12|(63&Te)<<6|63&Ge)}}return W.join("")}(this.decodeStringToByteArray(H,W))},decodeStringToByteArray(H,W){this.init_();const B=W?this.charToByteMapWebSafe_:this.charToByteMap_,K=[];for(let q=0;q<H.length;){const Te=B[H.charAt(q++)],mt=q<H.length?B[H.charAt(q)]:0;++q;const hn=q<H.length?B[H.charAt(q)]:64;++q;const Vt=q<H.length?B[H.charAt(q)]:64;if(++q,null==Te||null==mt||null==hn||null==Vt)throw Error();K.push(Te<<2|mt>>4),64!==hn&&(K.push(mt<<4&240|hn>>2),64!==Vt&&K.push(hn<<6&192|Vt))}return K},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}},he=function(H){const W=le(H);return we.encodeByteArray(W,!0)},ce=function(H){return he(H).replace(/\./g,"")},pe=function(H){try{return we.decodeString(H,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function $(H){return z(void 0,H)}function z(H,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return W}for(const B in W)!W.hasOwnProperty(B)||!re(B)||(H[B]=z(H[B],W[B]));return H}function re(H){return"__proto__"!==H}class $e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,B)=>{this.resolve=W,this.reject=B})}wrapCallback(W){return(B,K)=>{B?this.reject(B):this.resolve(K),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(B):W(B,K))}}}function De(H,W){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const K=W||"demo-project",q=H.iat||0,Te=H.sub||H.user_id;if(!Te)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ge=Object.assign({iss:`https://securetoken.google.com/${K}`,aud:K,iat:q,exp:q+3600,auth_time:q,sub:Te,user_id:Te,firebase:{sign_in_provider:"custom",identities:{}}},H);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(Ge)),""].join(".")}function Ze(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function je(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function Le(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(H){return!1}}function ne(){return"object"==typeof self&&self.self===self}function be(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function Ve(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Pe(){return Ze().indexOf("Electron/")>=0}function ot(){const H=Ze();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function Ne(){return Ze().indexOf("MSAppHost/")>=0}function qe(){return!1}function Ke(){return!Le()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ee(){return"object"==typeof indexedDB}function Y(){return new Promise((H,W)=>{try{let B=!0;const K="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(K);q.onsuccess=()=>{q.result.close(),B||self.indexedDB.deleteDatabase(K),H(!0)},q.onupgradeneeded=()=>{B=!1},q.onerror=()=>{var Te;W((null===(Te=q.error)||void 0===Te?void 0:Te.message)||"")}}catch(B){W(B)}})}function X(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class xe extends Error{constructor(W,B,K){super(B),this.code=W,this.customData=K,this.name="FirebaseError",Object.setPrototypeOf(this,xe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,se.prototype.create)}}class se{constructor(W,B,K){this.service=W,this.serviceName=B,this.errors=K}create(W,...B){const K=B[0]||{},q=`${this.service}/${W}`,Te=this.errors[W],Ge=Te?function _t(H,W){return H.replace(Ut,(B,K)=>{const q=W[K];return null!=q?String(q):`<${K}?>`})}(Te,K):"Error";return new xe(q,`${this.serviceName}: ${Ge} (${q}).`,K)}}const Ut=/\{\$([^}]+)}/g;function vn(H){return JSON.parse(H)}function yt(H){return JSON.stringify(H)}const qt=function(H){let W={},B={},K={},q="";try{const Te=H.split(".");W=vn(pe(Te[0])||""),B=vn(pe(Te[1])||""),q=Te[2],K=B.d||{},delete B.d}catch(Te){}return{header:W,claims:B,data:K,signature:q}},or=function(H){const B=qt(H).claims;return!!B&&"object"==typeof B&&B.hasOwnProperty("iat")},di=function(H){const W=qt(H).claims;return"object"==typeof W&&!0===W.admin};function dn(H,W){return Object.prototype.hasOwnProperty.call(H,W)}function ws(H,W){if(Object.prototype.hasOwnProperty.call(H,W))return H[W]}function Gn(H){for(const W in H)if(Object.prototype.hasOwnProperty.call(H,W))return!1;return!0}function zi(H,W,B){const K={};for(const q in H)Object.prototype.hasOwnProperty.call(H,q)&&(K[q]=W.call(B,H[q],q,H));return K}function Tr(H,W){if(H===W)return!0;const B=Object.keys(H),K=Object.keys(W);for(const q of B){if(!K.includes(q))return!1;const Te=H[q],Ge=W[q];if(Yt(Te)&&Yt(Ge)){if(!Tr(Te,Ge))return!1}else if(Te!==Ge)return!1}for(const q of K)if(!B.includes(q))return!1;return!0}function Yt(H){return null!==H&&"object"==typeof H}function Do(H){const W=[];for(const[B,K]of Object.entries(H))Array.isArray(K)?K.forEach(q=>{W.push(encodeURIComponent(B)+"="+encodeURIComponent(q))}):W.push(encodeURIComponent(B)+"="+encodeURIComponent(K));return W.length?"&"+W.join("&"):""}function Yr(H){const W={};return H.replace(/^\?/,"").split("&").forEach(K=>{if(K){const[q,Te]=K.split("=");W[decodeURIComponent(q)]=decodeURIComponent(Te)}}),W}function fr(H){const W=H.indexOf("?");if(!W)return"";const B=H.indexOf("#",W);return H.substring(W,B>0?B:void 0)}class Re{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let W=1;W<this.blockSize;++W)this.pad_[W]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(W,B){B||(B=0);const K=this.W_;if("string"==typeof W)for(let Vt=0;Vt<16;Vt++)K[Vt]=W.charCodeAt(B)<<24|W.charCodeAt(B+1)<<16|W.charCodeAt(B+2)<<8|W.charCodeAt(B+3),B+=4;else for(let Vt=0;Vt<16;Vt++)K[Vt]=W[B]<<24|W[B+1]<<16|W[B+2]<<8|W[B+3],B+=4;for(let Vt=16;Vt<80;Vt++){const hi=K[Vt-3]^K[Vt-8]^K[Vt-14]^K[Vt-16];K[Vt]=4294967295&(hi<<1|hi>>>31)}let hn,Xr,q=this.chain_[0],Te=this.chain_[1],Ge=this.chain_[2],mt=this.chain_[3],Xt=this.chain_[4];for(let Vt=0;Vt<80;Vt++){Vt<40?Vt<20?(hn=mt^Te&(Ge^mt),Xr=1518500249):(hn=Te^Ge^mt,Xr=1859775393):Vt<60?(hn=Te&Ge|mt&(Te|Ge),Xr=2400959708):(hn=Te^Ge^mt,Xr=3395469782);const hi=(q<<5|q>>>27)+hn+Xt+Xr+K[Vt]&4294967295;Xt=mt,mt=Ge,Ge=4294967295&(Te<<30|Te>>>2),Te=q,q=hi}this.chain_[0]=this.chain_[0]+q&4294967295,this.chain_[1]=this.chain_[1]+Te&4294967295,this.chain_[2]=this.chain_[2]+Ge&4294967295,this.chain_[3]=this.chain_[3]+mt&4294967295,this.chain_[4]=this.chain_[4]+Xt&4294967295}update(W,B){if(null==W)return;void 0===B&&(B=W.length);const K=B-this.blockSize;let q=0;const Te=this.buf_;let Ge=this.inbuf_;for(;q<B;){if(0===Ge)for(;q<=K;)this.compress_(W,q),q+=this.blockSize;if("string"==typeof W){for(;q<B;)if(Te[Ge]=W.charCodeAt(q),++Ge,++q,Ge===this.blockSize){this.compress_(Te),Ge=0;break}}else for(;q<B;)if(Te[Ge]=W[q],++Ge,++q,Ge===this.blockSize){this.compress_(Te),Ge=0;break}}this.inbuf_=Ge,this.total_+=B}digest(){const W=[];let B=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let q=this.blockSize-1;q>=56;q--)this.buf_[q]=255&B,B/=256;this.compress_(this.buf_);let K=0;for(let q=0;q<5;q++)for(let Te=24;Te>=0;Te-=8)W[K]=this.chain_[q]>>Te&255,++K;return W}}function pr(H,W){const B=new ct(H,W);return B.subscribe.bind(B)}class ct{constructor(W,B){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=B,this.task.then(()=>{W(this)}).catch(K=>{this.error(K)})}next(W){this.forEachObserver(B=>{B.next(W)})}error(W){this.forEachObserver(B=>{B.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,B,K){let q;if(void 0===W&&void 0===B&&void 0===K)throw new Error("Missing Observer.");q=function Fn(H,W){if("object"!=typeof H||null===H)return!1;for(const B of W)if(B in H&&"function"==typeof H[B])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:B,complete:K},void 0===q.next&&(q.next=gr),void 0===q.error&&(q.error=gr),void 0===q.complete&&(q.complete=gr);const Te=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch(Ge){}}),this.observers.push(q),Te}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let B=0;B<this.observers.length;B++)this.sendOne(B,W)}sendOne(W,B){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{B(this.observers[W])}catch(K){"undefined"!=typeof console&&console.error&&console.error(K)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gr(){}const Ki=function(H,W,B,K){let q;if(K<W?q="at least "+W:K>B&&(q=0===B?"none":"no more than "+B),q)throw new Error(H+" failed: Was called with "+K+(1===K?" argument.":" arguments.")+" Expects "+q+".")};function Qr(H,W){return`${H} failed: ${W} argument `}function wn(H,W,B,K){if((!K||B)&&"function"!=typeof B)throw new Error(Qr(H,W)+"must be a valid function.")}function qa(H,W,B,K){if((!K||B)&&("object"!=typeof B||null===B))throw new Error(Qr(H,W)+"must be a valid context object.")}const xn=function(H){const W=[];let B=0;for(let K=0;K<H.length;K++){let q=H.charCodeAt(K);if(q>=55296&&q<=56319){const Te=q-55296;K++,te(K<H.length,"Surrogate pair missing trail surrogate."),q=65536+(Te<<10)+(H.charCodeAt(K)-56320)}q<128?W[B++]=q:q<2048?(W[B++]=q>>6|192,W[B++]=63&q|128):q<65536?(W[B++]=q>>12|224,W[B++]=q>>6&63|128,W[B++]=63&q|128):(W[B++]=q>>18|240,W[B++]=q>>12&63|128,W[B++]=q>>6&63|128,W[B++]=63&q|128)}return W},et=function(H){let W=0;for(let B=0;B<H.length;B++){const K=H.charCodeAt(B);K<128?W++:K<2048?W+=2:K>=55296&&K<=56319?(W+=4,B++):W+=3}return W};function zt(H,W=1e3,B=2){const K=W*Math.pow(B,H),q=Math.round(.5*K*(Math.random()-.5)*2);return Math.min(144e5,K+q)}function Gt(H){return H&&H._delegate?H._delegate:H}},46:(Je,ve,F)=>{var u=F(5e3);let te=null;function L(){return te}const he=new u.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function pe(){return(0,u.LFG)(z)}()},providedIn:"platform"}),n})();const $=new u.OlP("Location Initialized");let z=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){re()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){re()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(he))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function $e(){return new z((0,u.LFG)(he))}()},providedIn:"platform"}),n})();function re(){return!!window.history.pushState}function De(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ze(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function je(n){return n&&"?"!==n[0]?"?"+n:n}let Le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function ne(n){const e=(0,u.LFG)(he).location;return new Ve((0,u.LFG)(ce),e&&e.origin||"")}()},providedIn:"root"}),n})();const be=new u.OlP("appBaseHref");let Ve=(()=>{class n extends Le{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return De(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+je(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+je(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+je(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ce),u.LFG(be,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Pe=(()=>{class n extends Le{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=De(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+je(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+je(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ce),u.LFG(be,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),ot=(()=>{class n{constructor(t,r){this._subject=new u.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ze(Ke(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+je(r))}normalize(t){return n.stripTrailingSlash(function qe(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ke(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=je,n.joinWithSlash=De,n.stripTrailingSlash=Ze,n.\u0275fac=function(t){return new(t||n)(u.LFG(Le),u.LFG(ce))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Ne(){return new ot((0,u.LFG)(Le),(0,u.LFG)(ce))}()},providedIn:"root"}),n})();function Ke(n){return n.replace(/\/index.html$/,"")}var X=(()=>((X=X||{})[X.Zero=0]="Zero",X[X.One=1]="One",X[X.Two=2]="Two",X[X.Few=3]="Few",X[X.Many=4]="Many",X[X.Other=5]="Other",X))(),de=(()=>((de=de||{})[de.Format=0]="Format",de[de.Standalone=1]="Standalone",de))(),ye=(()=>((ye=ye||{})[ye.Narrow=0]="Narrow",ye[ye.Abbreviated=1]="Abbreviated",ye[ye.Wide=2]="Wide",ye[ye.Short=3]="Short",ye))(),xe=(()=>((xe=xe||{})[xe.Short=0]="Short",xe[xe.Medium=1]="Medium",xe[xe.Long=2]="Long",xe[xe.Full=3]="Full",xe))(),se=(()=>((se=se||{})[se.Decimal=0]="Decimal",se[se.Group=1]="Group",se[se.List=2]="List",se[se.PercentSign=3]="PercentSign",se[se.PlusSign=4]="PlusSign",se[se.MinusSign=5]="MinusSign",se[se.Exponential=6]="Exponential",se[se.SuperscriptingExponent=7]="SuperscriptingExponent",se[se.PerMille=8]="PerMille",se[se.Infinity=9]="Infinity",se[se.NaN=10]="NaN",se[se.TimeSeparator=11]="TimeSeparator",se[se.CurrencyDecimal=12]="CurrencyDecimal",se[se.CurrencyGroup=13]="CurrencyGroup",se))();function di(n,e){return Cn((0,u.cg1)(n)[u.wAp.DateFormat],e)}function dn(n,e){return Cn((0,u.cg1)(n)[u.wAp.TimeFormat],e)}function ws(n,e){return Cn((0,u.cg1)(n)[u.wAp.DateTimeFormat],e)}function Gn(n,e){const t=(0,u.cg1)(n),r=t[u.wAp.NumberSymbols][e];if(void 0===r){if(e===se.CurrencyDecimal)return t[u.wAp.NumberSymbols][se.Decimal];if(e===se.CurrencyGroup)return t[u.wAp.NumberSymbols][se.Group]}return r}const Yr=u.kL8;function fr(n){if(!n[u.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[u.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Cn(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function Fn(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Wn=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,wn={},qa=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var xn=(()=>((xn=xn||{})[xn.Short=0]="Short",xn[xn.ShortGMT=1]="ShortGMT",xn[xn.Long=2]="Long",xn[xn.Extended=3]="Extended",xn))(),et=(()=>((et=et||{})[et.FullYear=0]="FullYear",et[et.Month=1]="Month",et[et.Date=2]="Date",et[et.Hours=3]="Hours",et[et.Minutes=4]="Minutes",et[et.Seconds=5]="Seconds",et[et.FractionalSeconds=6]="FractionalSeconds",et[et.Day=7]="Day",et))(),vt=(()=>((vt=vt||{})[vt.DayPeriods=0]="DayPeriods",vt[vt.Days=1]="Days",vt[vt.Months=2]="Months",vt[vt.Eras=3]="Eras",vt))();function zs(n,e,t,r){let i=function ga(n){if(_a(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,a=1,c=1]=n.split("-").map(f=>+f);return ki(i,a-1,c)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Wn))return function ma(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,a=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const c=Number(n[4]||0)-t,f=Number(n[5]||0)-r,_=Number(n[6]||0),E=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return a.call(e,c,f,_,E),e}(r)}const e=new Date(n);if(!_a(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Jr(t,e)||e;let f,c=[];for(;e;){if(f=qa.exec(e),!f){c.push(e);break}{c=c.concat(f.slice(1));const T=c.pop();if(!T)break;e=T}}let _=i.getTimezoneOffset();r&&(_=Vt(r,_),i=function Ks(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function hi(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(Vt(e,i)-i))}(i,r,!0));let E="";return c.forEach(T=>{const S=function Xr(n){if(hn[n])return hn[n];let e;switch(n){case"G":case"GG":case"GGG":e=H(vt.Eras,ye.Abbreviated);break;case"GGGG":e=H(vt.Eras,ye.Wide);break;case"GGGGG":e=H(vt.Eras,ye.Narrow);break;case"y":e=Wt(et.FullYear,1,0,!1,!0);break;case"yy":e=Wt(et.FullYear,2,0,!0,!0);break;case"yyy":e=Wt(et.FullYear,3,0,!1,!0);break;case"yyyy":e=Wt(et.FullYear,4,0,!1,!0);break;case"Y":e=Xt(1);break;case"YY":e=Xt(2,!0);break;case"YYY":e=Xt(3);break;case"YYYY":e=Xt(4);break;case"M":case"L":e=Wt(et.Month,1,1);break;case"MM":case"LL":e=Wt(et.Month,2,1);break;case"MMM":e=H(vt.Months,ye.Abbreviated);break;case"MMMM":e=H(vt.Months,ye.Wide);break;case"MMMMM":e=H(vt.Months,ye.Narrow);break;case"LLL":e=H(vt.Months,ye.Abbreviated,de.Standalone);break;case"LLLL":e=H(vt.Months,ye.Wide,de.Standalone);break;case"LLLLL":e=H(vt.Months,ye.Narrow,de.Standalone);break;case"w":e=mt(1);break;case"ww":e=mt(2);break;case"W":e=mt(1,!0);break;case"d":e=Wt(et.Date,1);break;case"dd":e=Wt(et.Date,2);break;case"c":case"cc":e=Wt(et.Day,1);break;case"ccc":e=H(vt.Days,ye.Abbreviated,de.Standalone);break;case"cccc":e=H(vt.Days,ye.Wide,de.Standalone);break;case"ccccc":e=H(vt.Days,ye.Narrow,de.Standalone);break;case"cccccc":e=H(vt.Days,ye.Short,de.Standalone);break;case"E":case"EE":case"EEE":e=H(vt.Days,ye.Abbreviated);break;case"EEEE":e=H(vt.Days,ye.Wide);break;case"EEEEE":e=H(vt.Days,ye.Narrow);break;case"EEEEEE":e=H(vt.Days,ye.Short);break;case"a":case"aa":case"aaa":e=H(vt.DayPeriods,ye.Abbreviated);break;case"aaaa":e=H(vt.DayPeriods,ye.Wide);break;case"aaaaa":e=H(vt.DayPeriods,ye.Narrow);break;case"b":case"bb":case"bbb":e=H(vt.DayPeriods,ye.Abbreviated,de.Standalone,!0);break;case"bbbb":e=H(vt.DayPeriods,ye.Wide,de.Standalone,!0);break;case"bbbbb":e=H(vt.DayPeriods,ye.Narrow,de.Standalone,!0);break;case"B":case"BB":case"BBB":e=H(vt.DayPeriods,ye.Abbreviated,de.Format,!0);break;case"BBBB":e=H(vt.DayPeriods,ye.Wide,de.Format,!0);break;case"BBBBB":e=H(vt.DayPeriods,ye.Narrow,de.Format,!0);break;case"h":e=Wt(et.Hours,1,-12);break;case"hh":e=Wt(et.Hours,2,-12);break;case"H":e=Wt(et.Hours,1);break;case"HH":e=Wt(et.Hours,2);break;case"m":e=Wt(et.Minutes,1);break;case"mm":e=Wt(et.Minutes,2);break;case"s":e=Wt(et.Seconds,1);break;case"ss":e=Wt(et.Seconds,2);break;case"S":e=Wt(et.FractionalSeconds,1);break;case"SS":e=Wt(et.FractionalSeconds,2);break;case"SSS":e=Wt(et.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=B(xn.Short);break;case"ZZZZZ":e=B(xn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=B(xn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=B(xn.Long);break;default:return null}return hn[n]=e,e}(T);E+=S?S(i,t,_):"''"===T?"'":T.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),E}function ki(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Jr(n,e){const t=function Ut(n){return(0,u.cg1)(n)[u.wAp.LocaleId]}(n);if(wn[t]=wn[t]||{},wn[t][e])return wn[t][e];let r="";switch(e){case"shortDate":r=di(n,xe.Short);break;case"mediumDate":r=di(n,xe.Medium);break;case"longDate":r=di(n,xe.Long);break;case"fullDate":r=di(n,xe.Full);break;case"shortTime":r=dn(n,xe.Short);break;case"mediumTime":r=dn(n,xe.Medium);break;case"longTime":r=dn(n,xe.Long);break;case"fullTime":r=dn(n,xe.Full);break;case"short":const i=Jr(n,"shortTime"),a=Jr(n,"shortDate");r=wt(ws(n,xe.Short),[i,a]);break;case"medium":const c=Jr(n,"mediumTime"),f=Jr(n,"mediumDate");r=wt(ws(n,xe.Medium),[c,f]);break;case"long":const _=Jr(n,"longTime"),E=Jr(n,"longDate");r=wt(ws(n,xe.Long),[_,E]);break;case"full":const T=Jr(n,"fullTime"),S=Jr(n,"fullDate");r=wt(ws(n,xe.Full),[T,S])}return r&&(wn[t][e]=r),r}function wt(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function zt(n,e,t="-",r,i){let a="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,a=t));let c=String(n);for(;c.length<e;)c="0"+c;return r&&(c=c.substr(c.length-e)),a+c}function Wt(n,e,t=0,r=!1,i=!1){return function(a,c){let f=function Gt(n,e){switch(n){case et.FullYear:return e.getFullYear();case et.Month:return e.getMonth();case et.Date:return e.getDate();case et.Hours:return e.getHours();case et.Minutes:return e.getMinutes();case et.Seconds:return e.getSeconds();case et.FractionalSeconds:return e.getMilliseconds();case et.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,a);if((t>0||f>-t)&&(f+=t),n===et.Hours)0===f&&-12===t&&(f=12);else if(n===et.FractionalSeconds)return function pa(n,e){return zt(n,3).substr(0,e)}(f,e);const _=Gn(c,se.MinusSign);return zt(f,e,_,r,i)}}function H(n,e,t=de.Format,r=!1){return function(i,a){return function W(n,e,t,r,i,a){switch(t){case vt.Months:return function qt(n,e,t){const r=(0,u.cg1)(n),a=Cn([r[u.wAp.MonthsFormat],r[u.wAp.MonthsStandalone]],e);return Cn(a,t)}(e,i,r)[n.getMonth()];case vt.Days:return function yt(n,e,t){const r=(0,u.cg1)(n),a=Cn([r[u.wAp.DaysFormat],r[u.wAp.DaysStandalone]],e);return Cn(a,t)}(e,i,r)[n.getDay()];case vt.DayPeriods:const c=n.getHours(),f=n.getMinutes();if(a){const E=function Re(n){const e=(0,u.cg1)(n);return fr(e),(e[u.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Fn(r):[Fn(r[0]),Fn(r[1])])}(e),T=function pr(n,e,t){const r=(0,u.cg1)(n);fr(r);const a=Cn([r[u.wAp.ExtraData][0],r[u.wAp.ExtraData][1]],e)||[];return Cn(a,t)||[]}(e,i,r),S=E.findIndex(N=>{if(Array.isArray(N)){const[O,j]=N,ie=c>=O.hours&&f>=O.minutes,_e=c<j.hours||c===j.hours&&f<j.minutes;if(O.hours<j.hours){if(ie&&_e)return!0}else if(ie||_e)return!0}else if(N.hours===c&&N.minutes===f)return!0;return!1});if(-1!==S)return T[S]}return function vn(n,e,t){const r=(0,u.cg1)(n),a=Cn([r[u.wAp.DayPeriodsFormat],r[u.wAp.DayPeriodsStandalone]],e);return Cn(a,t)}(e,i,r)[c<12?0:1];case vt.Eras:return function Ct(n,e){return Cn((0,u.cg1)(n)[u.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,a,n,e,t,r)}}function B(n){return function(e,t,r){const i=-1*r,a=Gn(t,se.MinusSign),c=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case xn.Short:return(i>=0?"+":"")+zt(c,2,a)+zt(Math.abs(i%60),2,a);case xn.ShortGMT:return"GMT"+(i>=0?"+":"")+zt(c,1,a);case xn.Long:return"GMT"+(i>=0?"+":"")+zt(c,2,a)+":"+zt(Math.abs(i%60),2,a);case xn.Extended:return 0===r?"Z":(i>=0?"+":"")+zt(c,2,a)+":"+zt(Math.abs(i%60),2,a);default:throw new Error(`Unknown zone width "${n}"`)}}}function Ge(n){return ki(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function mt(n,e=!1){return function(t,r){let i;if(e){const a=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,c=t.getDate();i=1+Math.floor((c+a)/7)}else{const a=Ge(t),c=function Te(n){const e=ki(n,0,1).getDay();return ki(n,0,1+(e<=4?4:11)-e)}(a.getFullYear()),f=a.getTime()-c.getTime();i=1+Math.round(f/6048e5)}return zt(i,n,Gn(r,se.MinusSign))}}function Xt(n,e=!1){return function(t,r){return zt(Ge(t).getFullYear(),n,Gn(r,se.MinusSign),e)}}const hn={};function Vt(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function _a(n){return n instanceof Date&&!isNaN(n.valueOf())}class _r{}let In=(()=>{class n extends _r{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Yr(r||this.locale)(t)){case X.Zero:return"zero";case X.One:return"one";case X.Two:return"two";case X.Few:return"few";case X.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.soG))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Dt(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}class ql{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Dr=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function ba(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((i,a,c)=>{if(null==i.previousIndex){const f=this._viewContainer.createEmbeddedView(this._template,new ql(null,this._ngForOf,-1,-1),null===c?void 0:c),_=new Ar(i,f);r.push(_)}else if(null==c)this._viewContainer.remove(null===a?void 0:a);else if(null!==a){const f=this._viewContainer.get(a);this._viewContainer.move(f,c);const _=new Ar(i,f);r.push(_)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,a=this._viewContainer.length;i<a;i++){const c=this._viewContainer.get(i);c.context.index=i,c.context.count=a,c.context.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Ar{constructor(e,t){this.record=e,this.view=t}}let Ln=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Ri,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){fn("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){fn("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Ri{constructor(){this.$implicit=null,this.ngIf=null}}function fn(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}function Ni(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,u.AaK)(n)}'`)}class yd{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Jg{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const Wa=new Jg,vf=new yd;let Ca=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,u.QGY)(t))return Wa;if((0,u.F4k)(t))return vf;throw Ni(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO,16))},n.\u0275pipe=u.Yjl({name:"async",type:n,pure:!1}),n})();const Xg=new u.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Ta=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",i,a){var c;if(null==t||""===t||t!=t)return null;try{return zs(t,r,a||this.locale,null!==(c=null!=i?i:this.defaultTimezone)&&void 0!==c?c:void 0)}catch(f){throw Ni(n,f.message)}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.soG,16),u.Y36(Xg,24))},n.\u0275pipe=u.Yjl({name:"date",type:n,pure:!0}),n})(),Ya=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[{provide:_r,useClass:In}]}),n})();function Sr(n){return"server"===n}let oc=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new ac((0,u.LFG)(he),window)}),n})();class ac{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Qt(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=bf(this.window.history)||bf(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function bf(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class zl{}class Ts extends class Un extends class we{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ue(n){te||(te=n)}(new Ts)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Xs(){return Qa=Qa||document.querySelector("base"),Qa?Qa.getAttribute("href"):null}();return null==t?null:function eo(n){Tn=Tn||document.createElement("a"),Tn.setAttribute("href",n);const e=Tn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Qa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Dt(document.cookie,e)}}let Tn,Qa=null;const Pi=new u.OlP("TRANSITION_ID"),Jt=[{provide:u.ip1,useFactory:function So(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const r=L(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Pi,he,u.zs3],multi:!0}];class Ja{static init(){(0,u.VLi)(new Ja)}addToWindow(e){u.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const i=u.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const f=function(_){c=c||_,a--,0==a&&r(c)};i.forEach(function(_){_.whenStable(f)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Xa=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Ds=new u.OlP("EventManagerPlugins");let ei=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const c=i[a];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ds),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class xo{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=L().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ko=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),ft=(()=>{class n extends ko{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const c=this._doc.createElement("style");c.textContent=a,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(el),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(el))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(he))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function el(n){L().remove(n)}const yr={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},tl=/%COMP%/g;function As(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?As(n,i,t):(i=i.replace(tl,n),t.push(i))}return t}function Dn(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Xi=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new vr(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case u.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Cf(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case u.ifc.ShadowDom:return new uc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=As(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ei),u.LFG(ft),u.LFG(u.AFp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class vr{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(yr[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=yr[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=yr[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,i&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Dn(r)):this.eventManager.addEventListener(e,t,Dn(r))}}class Cf extends vr{constructor(e,t,r,i){super(e),this.component=r;const a=As(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Ae(n){return"_ngcontent-%COMP%".replace(tl,n)}(i+"-"+r.id),this.hostAttr=function Zt(n){return"_nghost-%COMP%".replace(tl,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class uc extends vr{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=As(i.id,i.styles,[]);for(let c=0;c<a.length;c++){const f=document.createElement("style");f.textContent=a[c],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Mo=(()=>{class n extends xo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(he))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const No=["alt","control","meta","shift"],Oi={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Aa={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},to={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let es=(()=>{class n extends xo{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="";if(No.forEach(_=>{const E=r.indexOf(_);E>-1&&(r.splice(E,1),c+=_+".")}),c+=a,0!=r.length||0===a.length)return null;const f={};return f.domEventName=i,f.fullKey=c,f}static getEventFullKey(t){let r="",i=function il(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Aa.hasOwnProperty(e)&&(e=Aa[e]))}return Oi[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),No.forEach(a=>{a!=i&&to[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(he))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Oo=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:"browser"},{provide:u.g9A,useValue:function Ad(){Ts.makeCurrent(),Ja.init()},multi:!0},{provide:he,useFactory:function Yl(){return(0,u.RDi)(document),document},deps:[]}]),Ql=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function sl(){return new u.qLn},deps:[]},{provide:Ds,useClass:Mo,multi:!0,deps:[he,u.R0b,u.Lbi]},{provide:Ds,useClass:es,multi:!0,deps:[he]},{provide:Xi,useClass:Xi,deps:[ei,ft,u.AFp]},{provide:u.FYo,useExisting:Xi},{provide:ko,useExisting:ft},{provide:ft,useClass:ft,deps:[he]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b]},{provide:ei,useClass:ei,deps:[Ds,u.R0b]},{provide:zl,useClass:Xa,deps:[]}];let ol=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:Pi,useExisting:u.AFp},Jt]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(n,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:Ql,imports:[Ya,u.hGG]}),n})();"undefined"!=typeof window&&window;var en=F(8996),io=F(3269);function tt(...n){const e=(0,io.yG)(n);return(0,en.D)(n,e)}var mi=F(7579);class ti extends mi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var er=F(8306);const{isArray:Sa}=Array,{getPrototypeOf:om,prototype:gl,keys:ru}=Object;function iu(n){if(1===n.length){const e=n[0];if(Sa(e))return{args:e,keys:null};if(function Df(n){return n&&"object"==typeof n&&om(n)===gl}(e)){const t=ru(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Fo=F(4671),nt=F(4004);const{isArray:Lo}=Array;function xa(n){return(0,nt.U)(e=>function hc(n,e){return Lo(e)?n(...e):n(e)}(n,e))}function ka(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Zn=F(5403),Ra=F(9672);function fc(n,e,t){n?(0,Ra.f)(t,n,e):e()}const Na=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Vo=F(8189);function _l(...n){return function Af(){return(0,Vo.J)(1)}()((0,en.D)(n,(0,io.yG)(n)))}var Ss=F(8421);function ts(n){return new er.y(e=>{(0,Ss.Xf)(n()).subscribe(e)})}var Pa=F(515),ns=F(727),Kn=F(4482);function Bo(){return(0,Kn.e)((n,e)=>{let t=null;n._refCount++;const r=new Zn.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class so extends er.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Kn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ns.w0;const t=this.getSubject();e.add(this.source.subscribe(new Zn.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ns.w0.EMPTY)}return e}refCount(){return Bo()(this)}}function Hn(n,e){return(0,Kn.e)((t,r)=>{let i=null,a=0,c=!1;const f=()=>c&&!i&&r.complete();t.subscribe(new Zn.Q(r,_=>{null==i||i.unsubscribe();let E=0;const T=a++;(0,Ss.Xf)(n(_,T)).subscribe(i=new Zn.Q(r,S=>r.next(e?e(_,S,T,E++):S),()=>{i=null,f()}))},()=>{c=!0,f()}))})}var Kt=F(5698);function rs(...n){const e=(0,io.yG)(n);return(0,Kn.e)((t,r)=>{(e?_l(n,t,e):_l(n,t)).subscribe(r)})}function xs(n,e,t,r,i){return(a,c)=>{let f=t,_=e,E=0;a.subscribe(new Zn.Q(c,T=>{const S=E++;_=f?n(_,T,S):(f=!0,T),r&&c.next(_)},i&&(()=>{f&&c.next(_),c.complete()})))}}function xr(n,e){return(0,Kn.e)(xs(n,e,arguments.length>=2,!0))}function kr(n,e){return(0,Kn.e)((t,r)=>{let i=0;t.subscribe(new Zn.Q(r,a=>n.call(e,a,i++)&&r.next(a)))})}function Fi(n){return(0,Kn.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe(new Zn.Q(t,void 0,void 0,c=>{a=(0,Ss.Xf)(n(c,Fi(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var tn=F(5577),su=F(576);function yl(n,e){return(0,su.m)(e)?(0,tn.z)(n,e,1):(0,tn.z)(n,1)}function pn(n){return n<=0?()=>Pa.E:(0,Kn.e)((e,t)=>{let r=[];e.subscribe(new Zn.Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function pc(n=gc){return(0,Kn.e)((e,t)=>{let r=!1;e.subscribe(new Zn.Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function gc(){return new Na}function ou(n){return(0,Kn.e)((e,t)=>{let r=!1;e.subscribe(new Zn.Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function is(n,e){const t=arguments.length>=2;return r=>r.pipe(n?kr((i,a)=>n(i,a,r)):Fo.y,(0,Kt.q)(1),t?ou(e):pc(()=>new Na))}var _i=F(8505);function Ld(n){return(0,Kn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class yi{constructor(e,t){this.id=e,this.url=t}}class mc extends yi{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class bn extends yi{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class au extends yi{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class lu extends yi{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class lm extends yi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jo extends yi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vi extends yi{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ss extends yi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ud extends yi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zo{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Oa{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class _c{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sf{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xf{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class um{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Nt="primary";class ni{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function os(n){return new ni(n)}const Li="ngNavigationCancelingError";function uu(n){const e=Error("NavigationCancelingError: "+n);return e[Li]=!0,e}function yc(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],f=n[a];if(c.startsWith(":"))i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function wi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Vd(n[i],e[i]))return!1;return!0}function Vd(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function kf(n){return Array.prototype.concat.apply([],n)}function Bd(n){return n.length>0?n[n.length-1]:null}function Mn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Lr(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,en.D)(Promise.resolve(n)):tt(n)}const wc={exact:function Ui(n,e,t){if(!M(n.segments,e.segments)||!Rs(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Ui(n.children[r],e.children[r],t))return!1;return!0},subset:Rf},Ho={exact:function Ec(n,e){return wi(n,e)},subset:function du(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Vd(n[t],e[t]))},ignored:()=>!0};function ao(n,e,t){return wc[t.paths](n.root,e.root,t.matrixParams)&&Ho[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Rf(n,e,t){return ks(n,e,e.segments,t)}function ks(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!M(i,t)||e.hasChildren()||!Rs(i,t,r))}if(n.segments.length===t.length){if(!M(n.segments,t)||!Rs(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Rf(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(M(n.segments,i)&&Rs(n.segments,i,r)&&n.children[Nt])&&ks(n.children[Nt],e,a,r)}}function Rs(n,e,t){return e.every((r,i)=>Ho[t](n[i].parameters,r.parameters))}class ri{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=os(this.queryParams)),this._queryParamMap}toString(){return Se.serialize(this)}}class pt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Mn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ue(this)}}class I{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=os(this.parameters)),this._parameterMap}toString(){return $o(this)}}function M(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Q{}class oe{parse(e){const t=new ib(e);return new ri(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ut(e.root,!0)}`,r=function bc(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${It(t)}=${It(i)}`).join("&"):`${It(t)}=${It(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function gt(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Se=new oe;function Ue(n){return n.segments.map(e=>$o(e)).join("/")}function ut(n,e){if(!n.hasChildren())return Ue(n);if(e){const t=n.children[Nt]?ut(n.children[Nt],!1):"",r=[];return Mn(n.children,(i,a)=>{a!==Nt&&r.push(`${a}:${ut(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function V(n,e){let t=[];return Mn(n.children,(r,i)=>{i===Nt&&(t=t.concat(e(r,i)))}),Mn(n.children,(r,i)=>{i!==Nt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Nt?[ut(n.children[Nt],!1)]:[`${i}:${ut(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Nt]?`${Ue(n)}/${t[0]}`:`${Ue(n)}/(${t.join("//")})`}}function Tt(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function It(n){return Tt(n).replace(/%3B/gi,";")}function Vn(n){return Tt(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function tr(n){return decodeURIComponent(n)}function Ei(n){return tr(n.replace(/\+/g,"%20"))}function $o(n){return`${Vn(n.path)}${function Fa(n){return Object.keys(n).map(e=>`;${Vn(e)}=${Vn(n[e])}`).join("")}(n.parameters)}`}const as=/^[^\/()?;=#]+/;function Ur(n){const e=n.match(as);return e?e[0]:""}const qo=/^[^=?&#]+/,hu=/^[^&#]+/;class ib{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pt([],{}):new pt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Nt]=new pt(e,t)),r}parseSegment(){const e=Ur(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new I(tr(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ur(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Ur(this.remaining);i&&(r=i,this.capture(r))}e[tr(t)]=tr(r)}parseQueryParam(e){const t=function Go(n){const e=n.match(qo);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function cm(n){const e=n.match(hu);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Ei(t),a=Ei(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ur(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Nt);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[Nt]:new pt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class dm{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Cc(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Cc(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Mf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Mf(e,this._root).map(t=>t.value)}}function Cc(n,e){if(n===e.value)return e;for(const t of e.children){const r=Cc(n,t);if(r)return r}return null}function Mf(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Mf(n,t);if(r.length)return r.unshift(e),r}return[]}class ls{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function lo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class wl extends dm{constructor(e,t){super(e),this.snapshot=t,pu(this,e)}toString(){return this.snapshot.toString()}}function hm(n,e){const t=function Nf(n,e){const c=new bl([],{},{},"",{},Nt,e,null,n.root,-1,{});return new Zd("",new ls(c,[]))}(n,e),r=new ti([new I("",{})]),i=new ti({}),a=new ti({}),c=new ti({}),f=new ti(""),_=new Ic(r,i,c,f,a,Nt,e,t.root);return _.snapshot=t.root,new wl(new ls(_,[]),t)}class Ic{constructor(e,t,r,i,a,c,f,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=f,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,nt.U)(e=>os(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,nt.U)(e=>os(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function El(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function fu(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class bl{constructor(e,t,r,i,a,c,f,_,E,T,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=f,this.routeConfig=_,this._urlSegment=E,this._lastPathIndex=T,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=os(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=os(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Zd extends dm{constructor(e,t){super(t),this.url=e,pu(this,t)}toString(){return Pf(this._root)}}function pu(n,e){e.value._routerState=n,e.children.forEach(t=>pu(n,t))}function Pf(n){const e=n.children.length>0?` { ${n.children.map(Pf).join(", ")} } `:"";return`${n.value}${e}`}function Hd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,wi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),wi(e.params,t.params)||n.params.next(t.params),function vc(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!wi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),wi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function $d(n,e){const t=wi(n.params,e.params)&&function A(n,e){return M(n,e)&&n.every((t,r)=>wi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||$d(n.parent,e.parent))}function Tc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function pm(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Tc(n,r,i);return Tc(n,r)})}(n,e,t);return new ls(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(f=>Tc(n,f)),c}}const r=function uo(n){return new Ic(new ti(n.url),new ti(n.params),new ti(n.queryParams),new ti(n.fragment),new ti(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Tc(n,a));return new ls(r,i)}}function qd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Gd(n){return"object"==typeof n&&null!=n&&n.outlets}function Wd(n,e,t,r,i){let a={};return r&&Mn(r,(c,f)=>{a[f]=Array.isArray(c)?c.map(_=>`${_}`):`${c}`}),new ri(t.root===n?e:Fy(t.root,n,e),a,i)}function Fy(n,e,t){const r={};return Mn(n.children,(i,a)=>{r[a]=i===e?t:Fy(i,e,t)}),new pt(n.segments,r)}class Ly{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&qd(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Gd);if(i&&i!==Bd(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class zd{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function gm(n,e,t){if(n||(n=new pt([],{})),0===n.segments.length&&n.hasChildren())return Of(n,e,t);const r=function jy(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],f=t[r];if(Gd(f))break;const _=`${f}`,E=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&E&&"object"==typeof E&&void 0===E.outlets){if(!La(_,E,c))return a;r+=2}else{if(!La(_,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new pt(n.segments.slice(0,r.pathIndex),{});return a.children[Nt]=new pt(n.segments.slice(r.pathIndex),n.children),Of(a,0,i)}return r.match&&0===i.length?new pt(n.segments,{}):r.match&&!n.hasChildren()?gu(n,e,t):r.match?Of(n,0,i):gu(n,e,t)}function Of(n,e,t){if(0===t.length)return new pt(n.segments,{});{const r=function By(n){return Gd(n[0])?n[0].outlets:{[Nt]:n}}(t),i={};return Mn(r,(a,c)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[c]=gm(n.children[c],e,a))}),Mn(n.children,(a,c)=>{void 0===r[c]&&(i[c]=a)}),new pt(n.segments,i)}}function gu(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Gd(a)){const _=mm(a.outlets);return new pt(r,_)}if(0===i&&qd(t[0])){r.push(new I(n.segments[e].path,Ms(t[0]))),i++;continue}const c=Gd(a)?a.outlets[Nt]:`${a}`,f=i<t.length-1?t[i+1]:null;c&&f&&qd(f)?(r.push(new I(c,Ms(f))),i+=2):(r.push(new I(c,{})),i++)}return new pt(r,{})}function mm(n){const e={};return Mn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=gu(new pt([],{}),0,t))}),e}function Ms(n){const e={};return Mn(n,(t,r)=>e[r]=`${t}`),e}function La(n,e,t){return n==t.path&&wi(e,t.parameters)}class ym{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Hd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=lo(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),Mn(i,(a,c)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=lo(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=lo(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=lo(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new um(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Sf(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Hd(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),Hd(f.route.value),this.activateChildRoutes(e,null,c.children)}else{const f=function vm(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=f?f.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=_,c.outlet&&c.outlet.activateWith(i,_),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class wm{constructor(e,t){this.routes=e,this.module=t}}function Cl(n){return"function"==typeof n}function Wo(n){return n instanceof ri}const mu=Symbol("INITIAL_VALUE");function Il(){return Hn(n=>function Ma(...n){const e=(0,io.yG)(n),t=(0,io.jO)(n),{args:r,keys:i}=iu(n);if(0===r.length)return(0,en.D)([],e);const a=new er.y(function ml(n,e,t=Fo.y){return r=>{fc(e,()=>{const{length:i}=n,a=new Array(i);let c=i,f=i;for(let _=0;_<i;_++)fc(e,()=>{const E=(0,en.D)(n[_],e);let T=!1;E.subscribe(new Zn.Q(r,S=>{a[_]=S,T||(T=!0,f--),f||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>ka(i,c):Fo.y));return t?a.pipe(xa(t)):a}(n.map(e=>e.pipe((0,Kt.q)(1),rs(mu)))).pipe(xr((e,t)=>{let r=!1;return t.reduce((i,a,c)=>i!==mu?i:(a===mu&&(r=!0),r||!1!==a&&c!==t.length-1&&!Wo(a)?i:a),e)},mu),kr(e=>e!==mu),(0,nt.U)(e=>Wo(e)?e:!0===e),(0,Kt.q)(1)))}class Hy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new _u,this.attachRef=null}}class _u{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Hy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Uf=(()=>{class n{constructor(t,r,i,a,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.name=a||Nt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,_=new Yd(t,f,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(_u),u.Y36(u.s_b),u.Y36(u._Vd),u.$8M("name"),u.Y36(u.sBO))},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Yd{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ic?this.route:e===_u?this.childContexts:this.parent.get(e,t)}}let Ac=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"router-outlet")},directives:[Uf],encapsulation:2}),n})();function Vf(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Qd(r,$y(e,r))}}function Qd(n,e){n.children&&Vf(n.children,e)}function $y(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function $n(n){const e=n.children&&n.children.map($n),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Nt&&(t.component=Ac),t}function us(n){return n.outlet||Nt}function qy(n,e){const t=n.filter(r=>us(r)===e);return t.push(...n.filter(r=>us(r)!==e)),t}const co={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Sc(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},co):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(e.matcher||yc)(t,n,e);if(!a)return Object.assign({},co);const c={};Mn(a.posParams,(_,E)=>{c[E]=_.path});const f=a.consumed.length>0?Object.assign(Object.assign({},c),a.consumed[a.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:f,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function Jd(n,e,t,r,i="corrected"){if(t.length>0&&function jf(n,e,t){return t.some(r=>Zf(n,e,r)&&us(r)!==Nt)}(n,t,r)){const c=new pt(e,function Gy(n,e,t,r){const i={};i[Nt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&us(a)!==Nt){const c=new pt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[us(a)]=c}return i}(n,e,r,new pt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function Wy(n,e,t){return t.some(r=>Zf(n,e,r))}(n,t,r)){const c=new pt(n.segments,function Bf(n,e,t,r,i,a){const c={};for(const f of r)if(Zf(n,t,f)&&!i[us(f)]){const _=new pt([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,c[us(f)]=_}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const a=new pt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Zf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Hf(n,e,t,r){return!!(us(n)===r||r!==Nt&&Zf(e,t,n))&&("**"===n.path||Sc(e,n,t).matched)}function yu(n,e,t){return 0===e.length&&!n.children[t]}class ur{constructor(e){this.segmentGroup=e||null}}class vu{constructor(e){this.urlTree=e}}function xc(n){return new er.y(e=>e.error(new ur(n)))}function $f(n){return new er.y(e=>e.error(new vu(n)))}function Vr(n){return new er.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class bm{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(u.h0i)}apply(){const e=Jd(this.urlTree.root,[],[],this.config).segmentGroup,t=new pt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Nt).pipe((0,nt.U)(a=>this.createUrlTree(Xd(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Fi(a=>{if(a instanceof vu)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof ur?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Nt).pipe((0,nt.U)(i=>this.createUrlTree(Xd(i),e.queryParams,e.fragment))).pipe(Fi(i=>{throw i instanceof ur?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new pt([],{[Nt]:e}):e;return new ri(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,nt.U)(a=>new pt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,en.D)(i).pipe(yl(a=>{const c=r.children[a],f=qy(t,a);return this.expandSegmentGroup(e,f,c,a).pipe((0,nt.U)(_=>({segment:_,outlet:a})))}),xr((a,c)=>(a[c.outlet]=c.segment,a),{}),function am(n,e){const t=arguments.length>=2;return r=>r.pipe(n?kr((i,a)=>n(i,a,r)):Fo.y,pn(1),t?ou(e):pc(()=>new Na))}())}expandSegment(e,t,r,i,a,c){return(0,en.D)(r).pipe(yl(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,c).pipe(Fi(E=>{if(E instanceof ur)return tt(null);throw E}))),is(f=>!!f),Fi((f,_)=>{if(f instanceof Na||"EmptyError"===f.name){if(yu(t,i,a))return tt(new pt([],{}));throw new ur(t)}throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,c,f){return Hf(i,t,a,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,c):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c):xc(t):xc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?$f(a):this.lineralizeSegments(r,a).pipe((0,tn.z)(c=>{const f=new pt(c,{});return this.expandSegment(e,f,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:f,consumedSegments:_,lastChild:E,positionalParamSegments:T}=Sc(t,i,a);if(!f)return xc(t);const S=this.applyRedirectCommands(_,i.redirectTo,T);return i.redirectTo.startsWith("/")?$f(S):this.lineralizeSegments(i,S).pipe((0,tn.z)(N=>this.expandSegment(e,t,r,N.concat(a.slice(E)),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?tt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,nt.U)(N=>(r._loadedConfig=N,new pt(i,{})))):tt(new pt(i,{}));const{matched:c,consumedSegments:f,lastChild:_}=Sc(t,r,i);if(!c)return xc(t);const E=i.slice(_);return this.getChildConfig(e,r,i).pipe((0,tn.z)(S=>{const N=S.module,O=S.routes,{segmentGroup:j,slicedSegments:ie}=Jd(t,f,E,O),_e=new pt(j.segments,j.children);if(0===ie.length&&_e.hasChildren())return this.expandChildren(N,O,_e).pipe((0,nt.U)(Qe=>new pt(f,Qe)));if(0===O.length&&0===ie.length)return tt(new pt(f,{}));const Be=us(r)===a;return this.expandSegment(N,_e,O,ie,Be?Nt:a,!0).pipe((0,nt.U)(Xe=>new pt(f.concat(Xe.segments),Xe.children)))}))}getChildConfig(e,t,r){return t.children?tt(new wm(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?tt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,tn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,nt.U)(a=>(t._loadedConfig=a,a))):function kc(n){return new er.y(e=>e.error(uu(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):tt(new wm([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?tt(i.map(c=>{const f=e.get(c);let _;if(function Ff(n){return n&&Cl(n.canLoad)}(f))_=f.canLoad(t,r);else{if(!Cl(f))throw new Error("Invalid CanLoad guard");_=f(t,r)}return Lr(_)})).pipe(Il(),(0,_i.b)(c=>{if(!Wo(c))return;const f=uu(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw f.url=c,f}),(0,nt.U)(c=>!0===c)):tt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return tt(r);if(i.numberOfChildren>1||!i.children[Nt])return Vr(e.redirectTo);i=i.children[Nt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new ri(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Mn(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return Mn(t.children,(f,_)=>{c[_]=this.createSegmentGroup(e,f,r,i)}),new pt(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Xd(n){const e={};for(const r of Object.keys(n.children)){const a=Xd(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function Gf(n){if(1===n.numberOfChildren&&n.children[Nt]){const e=n.children[Nt];return new pt(n.segments.concat(e.segments),e.children)}return n}(new pt(n.segments,e))}class Rc{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class wu{constructor(e,t){this.component=e,this.route=t}}function Cm(n,e,t){const r=n._root;return Dl(r,e?e._root:null,t,[r.value])}function Tl(n,e,t){const r=function Yy(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Dl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=lo(e);return n.children.forEach(c=>{(function Qy(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const _=function Im(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!M(n.url,e.url);case"pathParamsOrQueryParamsChange":return!M(n.url,e.url)||!wi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$d(n,e)||!wi(n.queryParams,e.queryParams);default:return!$d(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new Rc(r)):(a.data=c.data,a._resolvedData=c._resolvedData),Dl(n,e,a.component?f?f.children:null:t,r,i),_&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new wu(f.outlet.component,c))}else c&&eh(e,f,i),i.canActivateChecks.push(new Rc(r)),Dl(n,null,a.component?f?f.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),Mn(a,(c,f)=>eh(c,t.getContext(f),i)),i}function eh(n,e,t){const r=lo(n),i=n.value;Mn(r,(a,c)=>{eh(a,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new wu(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class rv{}function zf(n){return new er.y(e=>e.error(n))}class Kf{constructor(e,t,r,i,a,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=c}recognize(){const e=Jd(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Nt);if(null===t)return null;const r=new bl([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Nt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ls(r,t),a=new Zd(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=El(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const c=t.children[a],f=qy(e,a),_=this.processSegmentGroup(f,c,a);if(null===_)return null;r.push(..._)}const i=th(r);return function Yf(n){n.sort((e,t)=>e.value.outlet===Nt?-1:t.value.outlet===Nt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const c=this.processSegmentAgainstRoute(a,t,r,i);if(null!==c)return c}return yu(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Hf(e,t,r,i))return null;let a,c=[],f=[];if("**"===e.path){const O=r.length>0?Bd(r).parameters:{};a=new bl(r,O,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,cs(e),us(e),e.component,e,bi(t),Ns(t)+r.length,iv(e))}else{const O=Sc(t,e,r);if(!O.matched)return null;c=O.consumedSegments,f=r.slice(O.lastChild),a=new bl(c,O.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,cs(e),us(e),e.component,e,bi(t),Ns(t)+c.length,iv(e))}const _=function Am(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:E,slicedSegments:T}=Jd(t,c,f,_.filter(O=>void 0===O.redirectTo),this.relativeLinkResolution);if(0===T.length&&E.hasChildren()){const O=this.processChildren(_,E);return null===O?null:[new ls(a,O)]}if(0===_.length&&0===T.length)return[new ls(a,[])];const S=us(e)===i,N=this.processSegment(_,E,T,S?Nt:i);return null===N?null:[new ls(a,N)]}}function Sm(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function th(n){const e=[],t=new Set;for(const r of n){if(!Sm(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=th(r.children);e.push(new ls(r.value,i))}return e.filter(r=>!t.has(r))}function bi(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ns(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function cs(n){return n.data||{}}function iv(n){return n.resolve||{}}function ds(n){return Hn(e=>{const t=n(e);return t?(0,en.D)(t).pipe((0,nt.U)(()=>e)):tt(e)})}class Mc extends class Rm{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const rh=new u.OlP("ROUTES");class ih{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,nt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=a.create(e);return new wm(kf(c.injector.get(rh,void 0,u.XFs.Self|u.XFs.Optional)).map($n),c)}),Fi(a=>{throw t._loader$=void 0,a}));return t._loader$=new so(i,()=>new mi.x).pipe(Bo()),t._loader$}loadModuleFactory(e){return Lr(e()).pipe((0,tn.z)(t=>t instanceof u.YKP?tt(t):(0,en.D)(this.compiler.compileModuleAsync(t))))}}class Nc{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function sh(n){throw n}function lb(n,e,t){return e.parse("/")}function ii(n,e){return tt(null)}const Al={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Jf={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let jr=(()=>{class n{constructor(t,r,i,a,c,f,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new mi.x,this.errorHandler=sh,this.malformedUriErrorHandler=lb,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ii,afterPreactivation:ii},this.urlHandlingStrategy=new Nc,this.routeReuseStrategy=new Mc,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(u.h0i),this.console=c.get(u.c2e);const S=c.get(u.R0b);this.isNgZoneEnabled=S instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function oo(){return new ri(new pt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ih(c,f,N=>this.triggerEvent(new Zo(N)),N=>this.triggerEvent(new Oa(N))),this.routerState=hm(this.currentUrlTree,this.rootComponentType),this.transitions=new ti({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(kr(i=>0!==i.id),(0,nt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Hn(i=>{let a=!1,c=!1;return tt(i).pipe((0,_i.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Hn(f=>{const _=this.browserUrlTree.toString(),E=!this.navigated||f.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||E)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return Eu(f.source)&&(this.browserUrlTree=f.extractedUrl),tt(f).pipe(Hn(S=>{const N=this.transitions.getValue();return r.next(new mc(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),N!==this.transitions.getValue()?Pa.E:Promise.resolve(S)}),function zy(n,e,t,r){return Hn(i=>function qf(n,e,t,r,i){return new bm(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,nt.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,_i.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function xm(n,e,t,r,i){return(0,tn.z)(a=>function Dm(n,e,t,r,i="emptyOnly",a="legacy"){try{const c=new Kf(n,e,t,r,i,a).recognize();return null===c?zf(new rv):tt(c)}catch(c){return zf(c)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,nt.U)(c=>Object.assign(Object.assign({},a),{targetSnapshot:c}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,_i.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const O=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(O,S)}this.browserUrlTree=S.urlAfterRedirects}const N=new lm(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(N)}));if(E&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:N,extractedUrl:O,source:j,restoredState:ie,extras:_e}=f,Be=new mc(N,this.serializeUrl(O),j,ie);r.next(Be);const lt=hm(O,this.rootComponentType).snapshot;return tt(Object.assign(Object.assign({},f),{targetSnapshot:lt,urlAfterRedirects:O,extras:Object.assign(Object.assign({},_e),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,f.resolve(null),Pa.E}),ds(f=>{const{targetSnapshot:_,id:E,extractedUrl:T,rawUrl:S,extras:{skipLocationChange:N,replaceUrl:O}}=f;return this.hooks.beforePreactivation(_,{navigationId:E,appliedUrlTree:T,rawUrlTree:S,skipLocationChange:!!N,replaceUrl:!!O})}),(0,_i.b)(f=>{const _=new jo(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(_)}),(0,nt.U)(f=>Object.assign(Object.assign({},f),{guards:Cm(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function Wf(n,e){return(0,tn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?tt(Object.assign(Object.assign({},t),{guardsResult:!0})):function Jy(n,e,t,r){return(0,en.D)(n).pipe((0,tn.z)(i=>function nv(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?tt(a.map(f=>{const _=Tl(f,e,i);let E;if(function Em(n){return n&&Cl(n.canDeactivate)}(_))E=Lr(_.canDeactivate(n,e,t,r));else{if(!Cl(_))throw new Error("Invalid CanDeactivate guard");E=Lr(_(n,e,t,r))}return E.pipe(is())})).pipe(Il()):tt(!0)}(i.component,i.route,t,e,r)),is(i=>!0!==i,!0))}(c,r,i,n).pipe((0,tn.z)(f=>f&&function Zy(n){return"boolean"==typeof n}(f)?function Xy(n,e,t,r){return(0,en.D)(e).pipe(yl(i=>_l(function ev(n,e){return null!==n&&e&&e(new _c(n)),tt(!0)}(i.route.parent,r),function zo(n,e){return null!==n&&e&&e(new xf(n)),tt(!0)}(i.route,r),function tv(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function Ky(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>ts(()=>tt(c.guards.map(_=>{const E=Tl(_,c.node,t);let T;if(function sb(n){return n&&Cl(n.canActivateChild)}(E))T=Lr(E.canActivateChild(r,n));else{if(!Cl(E))throw new Error("Invalid CanActivateChild guard");T=Lr(E(r,n))}return T.pipe(is())})).pipe(Il())));return tt(a).pipe(Il())}(n,i.path,t),function Tm(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return tt(!0);const i=r.map(a=>ts(()=>{const c=Tl(a,e,t);let f;if(function Lf(n){return n&&Cl(n.canActivate)}(c))f=Lr(c.canActivate(e,n));else{if(!Cl(c))throw new Error("Invalid CanActivate guard");f=Lr(c(e,n))}return f.pipe(is())}));return tt(i).pipe(Il())}(n,i.route,t))),is(i=>!0!==i,!0))}(r,a,n,e):tt(f)),(0,nt.U)(f=>Object.assign(Object.assign({},t),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,_i.b)(f=>{if(Wo(f.guardsResult)){const E=uu(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw E.url=f.guardsResult,E}const _=new vi(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(_)}),kr(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),ds(f=>{if(f.guards.canActivateChecks.length)return tt(f).pipe((0,_i.b)(_=>{const E=new ss(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(E)}),Hn(_=>{let E=!1;return tt(_).pipe(function nh(n,e){return(0,tn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return tt(t);let a=0;return(0,en.D)(i).pipe(yl(c=>function ab(n,e,t,r){return function Ps(n,e,t,r){const i=Object.keys(n);if(0===i.length)return tt({});const a={};return(0,en.D)(i).pipe((0,tn.z)(c=>function Qf(n,e,t,r){const i=Tl(n,e,r);return Lr(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,_i.b)(f=>{a[c]=f}))),pn(1),(0,tn.z)(()=>Object.keys(a).length===i.length?tt(a):Pa.E))}(n._resolve,n,e,r).pipe((0,nt.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),El(n,t).resolve),null)))}(c.route,r,n,e)),(0,_i.b)(()=>a++),pn(1),(0,tn.z)(c=>a===i.length?tt(t):Pa.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,_i.b)({next:()=>E=!0,complete:()=>{E||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,_i.b)(_=>{const E=new Ud(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(E)}))}),ds(f=>{const{targetSnapshot:_,id:E,extractedUrl:T,rawUrl:S,extras:{skipLocationChange:N,replaceUrl:O}}=f;return this.hooks.afterPreactivation(_,{navigationId:E,appliedUrlTree:T,rawUrlTree:S,skipLocationChange:!!N,replaceUrl:!!O})}),(0,nt.U)(f=>{const _=function fm(n,e,t){const r=Tc(n,e._root,t?t._root:void 0);return new wl(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:_})}),(0,_i.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,nt.U)(r=>(new ym(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,_i.b)({next(){a=!0},complete(){a=!0}}),Ld(()=>{var f;a||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),Fi(f=>{if(c=!0,function cu(n){return n&&n[Li]}(f)){const _=Wo(f.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const E=new au(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(E),_?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Eu(i.source)};this.scheduleNavigation(T,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new lu(i.id,this.serializeUrl(i.extractedUrl),f);r.next(_);try{i.resolve(this.errorHandler(f))}catch(E){i.reject(E)}}return Pa.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const _=Object.assign({},c);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const f=this.parseUrl(t.url);this.scheduleNavigation(f,r,c,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Vf(t),this.config=t.map($n),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:f,preserveFragment:_}=r,E=i||this.routerState.root,T=_?this.currentUrlTree.fragment:c;let S=null;switch(f){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),function Dc(n,e,t,r,i){if(0===t.length)return Wd(e.root,e.root,e,r,i);const a=function Uy(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Ly(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return Mn(a.outlets,(_,E)=>{f[E]="string"==typeof _?_.split("/"):_}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((f,_)=>{0==_&&"."===f||(0==_&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new Ly(t,e,r)}(t);if(a.toRoot())return Wd(e.root,new pt([],{}),e,r,i);const c=function Kd(n,e,t){if(n.isAbsolute)return new zd(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new zd(a,a===e.root,0)}const r=qd(n.commands[0])?0:1;return function Vy(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new zd(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),f=c.processChildren?Of(c.segmentGroup,c.index,a.commands):gm(c.segmentGroup,c.index,a.commands);return Wd(c.segmentGroup,f,e,r,i)}(E,this.currentUrlTree,t,S,null!=T?T:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Wo(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Xf(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},Al):!1===r?Object.assign({},Jf):r,Wo(t))return ao(this.currentUrlTree,t,i);const a=this.parseUrl(t);return ao(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new bn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,c){var f,_,E;if(this.disposed)return Promise.resolve(!1);const T=this.transitions.value,S=Eu(r)&&T&&!Eu(T.source),N=T.rawUrl.toString()===t.toString(),O=T.id===(null===(f=this.currentNavigation)||void 0===f?void 0:f.id);if(S&&N&&O)return Promise.resolve(!0);let ie,_e,Be;c?(ie=c.resolve,_e=c.reject,Be=c.promise):Be=new Promise((Qe,bt)=>{ie=Qe,_e=bt});const lt=++this.navigationId;let Xe;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),Xe=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(_=this.browserPageId)&&void 0!==_?_:0:(null!==(E=this.browserPageId)&&void 0!==E?E:0)+1):Xe=0,this.setTransition({id:lt,targetPageId:Xe,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:ie,reject:_e,promise:Be,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Be.catch(Qe=>Promise.reject(Qe))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new au(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Eu(n){return"imperative"!==n}let Sl=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=c,this.commands=null,this.onChanges=new mi.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:bu(this.skipLocationChange),replaceUrl:bu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:bu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(jr),u.Y36(Ic),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&u.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),n})(),ho=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new mi.x,this.subscription=t.events.subscribe(a=>{a instanceof bn&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,c){if(0!==t||r||i||a||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const f={skipLocationChange:bu(this.skipLocationChange),replaceUrl:bu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,f),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:bu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(jr),u.Y36(Ic),u.Y36(Le))},n.\u0275dir=u.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&u.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&u.uIk("target",r.target)("href",r.href,u.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),n})();function bu(n){return""===n||!!n}class p{}class w{preload(e,t){return tt(null)}}let D=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new ih(i,r,_=>t.triggerEvent(new Zo(_)),_=>t.triggerEvent(new Oa(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(kr(t=>t instanceof bn),yl(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(u.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const c=a._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,en.D)(i).pipe((0,Vo.J)(),(0,nt.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?tt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,tn.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(jr),u.LFG(u.Sil),u.LFG(u.zs3),u.LFG(p))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),k=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof mc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof bn&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof vl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new vl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const ee=new u.OlP("ROUTER_CONFIGURATION"),Me=new u.OlP("ROUTER_FORROOT_GUARD"),Ie=[ot,{provide:Q,useClass:oe},{provide:jr,useFactory:function oh(n,e,t,r,i,a,c={},f,_){const E=new jr(null,n,e,t,r,i,kf(a));return f&&(E.urlHandlingStrategy=f),_&&(E.routeReuseStrategy=_),function ep(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,E),c.enableTracing&&E.events.subscribe(T=>{var S,N;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${T.constructor.name}`),console.log(T.toString()),console.log(T),null===(N=console.groupEnd)||void 0===N||N.call(console)}),E},deps:[Q,_u,ot,u.zs3,u.Sil,rh,ee,[class Br{},new u.FiY],[class km{},new u.FiY]]},_u,{provide:Ic,useFactory:function ah(n){return n.routerState.root},deps:[jr]},D,w,class g{preload(e,t){return t().pipe(Fi(()=>tt(null)))}},{provide:ee,useValue:{enableTracing:!1}}];function rt(){return new u.PXZ("Router",jr)}let at=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Ie,Cu(t),{provide:Me,useFactory:Ua,deps:[[jr,new u.FiY,new u.tp0]]},{provide:ee,useValue:r||{}},{provide:Le,useFactory:Yn,deps:[ce,[new u.tBr(be),new u.FiY],ee]},{provide:k,useFactory:Ht,deps:[jr,oc,ee]},{provide:p,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:w},{provide:u.PXZ,multi:!0,useFactory:rt},[Iu,{provide:u.ip1,multi:!0,useFactory:Pc,deps:[Iu]},{provide:Fc,useFactory:Oc,deps:[Iu]},{provide:u.tb,multi:!0,useExisting:Fc}]]}}static forChild(t){return{ngModule:n,providers:[Cu(t)]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Me,8),u.LFG(jr,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function Ht(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new k(n,e,t)}function Yn(n,e,t={}){return t.useHash?new Pe(n,e):new Ve(n,e)}function Ua(n){return"guarded"}function Cu(n){return[{provide:u.deG,multi:!0,useValue:n},{provide:rh,multi:!0,useValue:n}]}let Iu=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new mi.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),a=this.injector.get(jr),c=this.injector.get(ee);return"disabled"===c.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?tt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(ee),i=this.injector.get(D),a=this.injector.get(k),c=this.injector.get(jr),f=this.injector.get(u.z2F);t===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),a.init(),c.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Pc(n){return n.appInitializer.bind(n)}function Oc(n){return n.bootstrapListener.bind(n)}const Fc=new u.OlP("Router Initializer");var Ko=F(4986),Lc=F(3532);function ND(n,e){if(1&n&&u._UZ(0,"img",6),2&n){const t=u.oxw().$implicit;u.Q6J("src",t.src,u.LSH)}}function cb(n,e){if(1&n&&(u.TgZ(0,"div",7),u._UZ(1,"img",8),u.qZA()),2&n){const t=u.oxw().$implicit;u.xp6(1),u.Q6J("src",t.src,u.LSH)}}function av(n,e){if(1&n&&(u.ynx(0),u.TgZ(1,"div",3),u.YNc(2,ND,1,1,"img",4),u.qZA(),u.YNc(3,cb,2,1,"ng-template",null,5,u.W1O),u.BQk()),2&n){const t=e.index,r=u.MAs(4);u.xp6(2),u.Q6J("ngIf",0==t)("ngIfElse",r)}}let db=(()=>{class n{constructor(){}ngOnInit(){this.observableCarousel$=function MD(n=0,e=Ko.z){return n<0&&(n=0),function ub(n=0,e,t=Ko.P){let r=-1;return null!=e&&((0,Lc.K)(e)?t=e:r=e),new er.y(i=>{let a=function RD(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let c=0;return t.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},a)})}(n,n,e)}(3e3),this.observableCarousel$.subscribe(t=>{this.slides.push(this.slides.shift())})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-carousel"]],inputs:{slides:"slides"},decls:3,vars:1,consts:[[1,"flex","flex-1","items-center","justify-center","py-6","px-4"],[1,"relative","h-40","w-96","overflow-hidden","border-1"],[4,"ngFor","ngForOf"],[1,"duration-1000","ease-in-out"],["class","absolute w-full h-full top-0 left-0 object-scale-down border-1 hover:scale-105",3,"src",4,"ngIf","ngIfElse"],["hidden",""],[1,"absolute","w-full","h-full","top-0","left-0","object-scale-down","border-1","hover:scale-105",3,"src"],[1,"duration-700","ease-in-out"],[1,"shadow-md","absolute","hidden","w-full","h-full","top-0","left-0","object-scale-down","border-1","hover:scale-105",3,"src"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.YNc(2,av,5,2,"ng-container",2),u.qZA(),u.qZA()),2&t&&(u.xp6(2),u.Q6J("ngForOf",r.slides))},directives:[Dr,Ln],encapsulation:2}),n})(),TR=(()=>{class n{constructor(){this.slides=[{src:"/assets/images/greenMag.jpeg"},{src:"/assets/images/guyaMag.png"},{src:"/assets/images/ewag.webp"},{src:"/assets/images/shopping-fr.png"},{src:"/assets/images/resto-avenue.png"}]}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-about-page"]],decls:110,vars:1,consts:[[1,"container","min-w-full"],[1,"md:inline-flex","block","min-w-full","min-h-screen"],[1,"bg-primary-700","md:w-3/5","w-full","md:px-12","px-6"],[1,"flex","flex-col","justify-between","items-start","md:py-12"],[1,"text-7xl","font-title","font-extrabold","text-primary-50","leading-snug","md:mt-0","mt-12"],["routerLink","/"],[1,"my-6","text-left","text-2xl","font-sans","font-light","text-primary-100","leading-snug"],["target","_blank","href","https://fr.wikipedia.org/wiki/Torreilles",1,"text-secondary-600","font-sans","font-medium"],[1,"flex","justify-start","items-center","mt-6"],[1,"mr-4","text-left","text-2xl","md:text-3xl","font-sans","font-semibold","text-primary-100","leading-snug"],["xmlns","http://www.w3.org/2000/svg","width","52","height","52","fill","#fafafa","viewBox","0 0 256 256",1,"flex-shrink-0","animate-pulse-slow"],["d","M128,216S28,160,28,92A52,52,0,0,1,128,72h0A52,52,0,0,1,228,92C228,160,128,216,128,216Z","opacity","0.2"],["points","32 128 72 128 88 104 120 152 136 128 160 128","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M28.1,96c-.1-1.3-.1-2.7-.1-4A52,52,0,0,1,128,72h0A52,52,0,0,1,228,92c0,68-100,124-100,124s-39.9-22.4-69.3-56","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"block"],[1,"list-disc","text-primary-50","list-inside","text-lg","text-sans","font-thin","md:px-4","py-2"],[1,"p-2"],[1,"bg-gradient-to-r","from-primary-700","to-primary-400","p-1","pr-4"],[1,"flex","justify-between","items-center","mt-8"],[1,"w-2/3","mr-4","text-xl","text-left","font-sans","font-light","text-primary-100","leading-snug","pr-2"],["xmlns","http://www.w3.org/2000/svg","width","52","height","52","fill","#fafafa","viewBox","0 0 256 256",1,"w-1/3"],["d","M132.5,181.2A64,64,0,1,0,194.7,69.9a8.6,8.6,0,0,1-4-4.2,68,68,0,0,0-125.4,0,8.6,8.6,0,0,1-4,4.2,64,64,0,1,0,62.2,111.3A8.2,8.2,0,0,1,132.5,181.2Z","opacity","0.2"],["x1","128","y1","232","x2","128","y2","88","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","128","y1","152","x2","80","y2","128","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","128","y1","128","x2","176","y2","104","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M132.5,181.2A64,64,0,1,0,194.7,69.9a8.6,8.6,0,0,1-4-4.2,68,68,0,0,0-125.4,0,8.6,8.6,0,0,1-4,4.2,64,64,0,1,0,62.2,111.3A8.2,8.2,0,0,1,132.5,181.2Z","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"flex","items-center","justify-center","mt-12"],["routerLink","/contact",1,"transition","ease-in-out","delay-150","hover:scale-105","hover:-translate-y-1","my-16","py-6","md:px-8","px-4","bg-secondary-600","hover:bg-secondary-500","rounded-lg","leading-none","flex","items-center","text","divide-x","divide-secondary-50","text-xl","shadow-md"],[1,"text-secondary-50","pr-6","font-sans","transition","duration-200"],[1,"flex","items-center","space-x-5","pl-6"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","#fafafa","viewBox","0 0 256 256"],["d","M192,120,136,64l26.3-26.3a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4Z","opacity","0.2"],["d","M96,216H48a8,8,0,0,1-8-8V163.3a7.9,7.9,0,0,1,2.3-5.6l120-120a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4Z","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","136","y1","64","x2","192","y2","120","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["points","216 216 96 216 40.5 160.5","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","164","y1","92","x2","68","y2","188","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"bg-primary-50","md:w-2/5","w-full","border-t-4","md:border-t-0","md:border-l-4","border-secondary-500","md:px-12","px-6","pb-12"],[1,"block","mt-12"],[1,"flex","justify-start","items-center","mb-4"],["xmlns","http://www.w3.org/2000/svg","width","52","height","52","fill","#911011","viewBox","0 0 256 256",1,"flex-shrink-0"],["d","M120,56,60.3,78.4a8.1,8.1,0,0,0-5.1,6.2L32,224l139.5-23.2a7.9,7.9,0,0,0,6.1-5.1L200,136Zm-4,104a20,20,0,1,1,20-20A20.1,20.1,0,0,1,116,160Z","opacity","0.2"],["cx","116","cy","140","r","20","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","32","y1","224","x2","101.9","y2","154.1","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M32,224l139.5-23.2a7.9,7.9,0,0,0,6.1-5.1L200,136,120,56,60.3,78.4a8.1,8.1,0,0,0-5.1,6.2Z","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M200,136l26.3-26.3a8,8,0,0,0,0-11.4L157.7,29.7a8,8,0,0,0-11.4,0L120,56","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"ml-4","text-3xl","text-left","font-sans","font-semibold","text-primary-400","leading-snug"],[1,"text-primary-700","text-left","text-lg","font-sans","font-light","leading-snug","bg-gradient-to-r","from-primary-50","to-primary-100","inline","px-2","decoration-clone"],[1,"flex","items-center","justify-center","w-full"],["href","/articles",1,"transition","ease-in-out","delay-150","hover:scale-105","hover:-translate-y-1","mt-8","inline-flex","justify-center","items-center","border-2","border-primary-700","border-dashed","px-8","py-4","rounded-full","hover:bg-primary-100","hover:border-solid"],[1,"w-64","text-2xl","text-center","font-sans","font-semibold","text-primary-700","leading-snug","md:pr-2"],["xmlns","http://www.w3.org/2000/svg","width","36","height","36","fill","#911011","viewBox","0 0 256 256",1,"hidden","md:block"],["cx","128","cy","128","r","96","opacity","0.2"],["cx","128","cy","128","r","96","fill","none","stroke","#911011","stroke-miterlimit","10","stroke-width","16"],["points","134.1 161.9 168 128 134.1 94.1","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","88","y1","128","x2","168","y2","128","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M78,201.3,45.1,228.9A8,8,0,0,1,32,222.8V64a8,8,0,0,1,8-8H216a8,8,0,0,1,8,8V192a8,8,0,0,1-8,8H81.7Z","opacity","0.2"],["d","M77.4,201.9l-32.3,27A8,8,0,0,1,32,222.8V64a8,8,0,0,1,8-8H216a8,8,0,0,1,8,8V192a8,8,0,0,1-8,8H82.5A7.8,7.8,0,0,0,77.4,201.9Z","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"text-primary-600","text-lg","text-left","font-sans","font-light","leading-snug","bg-gradient-to-r","from-primary-50","to-primary-100","inline","px-2","decoration-clone"],[1,"flex","flex-col","items-start","justify-start","mt-16"],[1,"flex","justify-between","items-center"],[1,"w-4/5","md:w-max","md:mr-6","text-3xl","text-left","font-sans","font-semibold","text-primary-400","leading-snug"],["xmlns","http://www.w3.org/2000/svg","width","52","height","52","fill","#911011","viewBox","0 0 256 256",1,"w-1/5","md:w-max","animate-tilt","flex-shrink-0"],["d","M200,152.9l-36.8,36.8a8.5,8.5,0,0,1-7.6,2.1l-58-14.5a8,8,0,0,1-2.9-1.5L40,133.1,72.6,71.8l51.3-15a8,8,0,0,1,5.5.4L164,72.9H143.3a7.9,7.9,0,0,0-5.6,2.3L98.5,114.3a8.1,8.1,0,0,0,.9,12.1l5.4,4.1a32.1,32.1,0,0,0,38.4,0l12.8-9.6Z","opacity","0.2"],["d","M240.7,121.8,216,134.1,184,72.9l25-12.5a7.9,7.9,0,0,1,10.6,3.4l24.6,47.1A8,8,0,0,1,240.7,121.8Z","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M40,133.1,15.3,120.7a7.9,7.9,0,0,1-3.5-10.8L36.4,62.8A8,8,0,0,1,47,59.3L72,71.8Z","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M216,134.1l-16,18.8-36.8,36.8a8.5,8.5,0,0,1-7.6,2.1l-58-14.5a8,8,0,0,1-2.9-1.5L40,133.1","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M200,152.9l-44-32-12.8,9.6a32.1,32.1,0,0,1-38.4,0l-5.4-4.1a8.1,8.1,0,0,1-.9-12.1l39.2-39.1a7.9,7.9,0,0,1,5.6-2.3H184","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M72.6,71.8l51.3-15a8,8,0,0,1,5.5.4L164,72.9","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M112,212.9l-30.1-7.6a7.4,7.4,0,0,1-3.3-1.7L56,184","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"container"],[3,"slides"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"div",3),u.TgZ(4,"h1",4),u.TgZ(5,"a",5),u._uU(6,"SaCh'M"),u.qZA(),u._UZ(7,"br"),u.qZA(),u.TgZ(8,"h2",6),u._uU(9," Forte de 10 ann\xe9es d'exp\xe9rience, implant\xe9e \xe0 "),u.TgZ(10,"a",7),u._uU(11,"Torreilles (66)"),u.qZA(),u._uU(12," au pied des Pyr\xe9n\xe9es, l'agence accompagne ses clients dans la r\xe9alisation de leurs outils de communication interne ou externe ainsi que dans la r\xe9daction de leurs contenus. "),u.qZA(),u.TgZ(13,"div",8),u.TgZ(14,"h2",9),u._uU(15," Notre coeur de m\xe9tier "),u._UZ(16,"br"),u.qZA(),u.O4$(),u.TgZ(17,"svg",10),u._UZ(18,"path",11),u._UZ(19,"polyline",12),u._UZ(20,"path",13),u.qZA(),u.qZA(),u.kcU(),u.TgZ(21,"div",14),u.TgZ(22,"ul",15),u.TgZ(23,"li",16),u.TgZ(24,"span",17),u._uU(25," R\xe9daction de documents "),u.qZA(),u.qZA(),u.TgZ(26,"li",16),u.TgZ(27,"span",17),u._uU(28," Conseil en communication "),u.qZA(),u.qZA(),u.TgZ(29,"li",16),u.TgZ(30,"span",17),u._uU(31," Cr\xe9ation de site internet "),u.qZA(),u.qZA(),u.TgZ(32,"li",16),u.TgZ(33,"span",17),u._uU(34," Cr\xe9ation d'identit\xe9 visuelle "),u.qZA(),u.qZA(),u.TgZ(35,"li",16),u.TgZ(36,"span",17),u._uU(37," Edition publicitaire "),u.qZA(),u.qZA(),u.TgZ(38,"li",16),u.TgZ(39,"span",17),u._uU(40," Relecture et correction "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(41,"div",18),u.TgZ(42,"h2",19),u._uU(43," Les valeurs environnementales et humaines sont au coeur de notre projet d'entreprise. "),u._UZ(44,"br"),u.qZA(),u.O4$(),u.TgZ(45,"svg",20),u._UZ(46,"path",21),u._UZ(47,"line",22),u._UZ(48,"line",23),u._UZ(49,"line",24),u._UZ(50,"path",25),u.qZA(),u.qZA(),u.kcU(),u.TgZ(51,"div",26),u.TgZ(52,"button",27),u.TgZ(53,"span",28),u._uU(54,"Contactez nous"),u.qZA(),u.TgZ(55,"span",29),u.O4$(),u.TgZ(56,"svg",30),u._UZ(57,"path",31),u._UZ(58,"path",32),u._UZ(59,"line",33),u._UZ(60,"polyline",34),u._UZ(61,"line",35),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(62,"div",36),u.TgZ(63,"div",37),u.TgZ(64,"div",38),u.O4$(),u.TgZ(65,"svg",39),u._UZ(66,"path",40),u._UZ(67,"circle",41),u._UZ(68,"line",42),u._UZ(69,"path",43),u._UZ(70,"path",44),u.qZA(),u.kcU(),u.TgZ(71,"h2",45),u._uU(72," R\xe9daction "),u._UZ(73,"br"),u.qZA(),u.qZA(),u.TgZ(74,"p",46),u._uU(75," L\u2019agence est experte dans la r\xe9daction de contenu pour le print et le web sur de nombreuses th\xe9matiques : environnement, consommation, architecture, formation, \xe9conomie... R\xe9daction de contenus corporate et commerciaux, d\u2019articles de presse , , articles de presse, communiqu\xe9 et dossier de presse, story telling, recherche de mots cl\xe9s, optimisation de vos contenus, r\xe9\xe9criture, vulgarisation scientifique, correction\u2026 notre agence adapte son style d\u2019\xe9criture \xe0 votre c\u0153ur de cible tout en respectant le ton \xe9ditorial. "),u.qZA(),u.TgZ(76,"div",47),u.TgZ(77,"a",48),u.TgZ(78,"h3",49),u._uU(79," D\xe9couvrez nos derniers articles "),u.qZA(),u.O4$(),u.TgZ(80,"svg",50),u._UZ(81,"circle",51),u._UZ(82,"circle",52),u._UZ(83,"polyline",53),u._UZ(84,"line",54),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(85,"div",37),u.TgZ(86,"div",38),u.O4$(),u.TgZ(87,"svg",39),u._UZ(88,"path",55),u._UZ(89,"path",56),u.qZA(),u.kcU(),u.TgZ(90,"h2",45),u._uU(91," Communication "),u._UZ(92,"br"),u.qZA(),u.qZA(),u.TgZ(93,"p",57),u._uU(94," Nous sommes \xe9galement sp\xe9cialis\xe9s dans la communication interne et externe. Nous vous accompagnons dans l\u2019\xe9laboration de votre strat\xe9gie et plan de communication, la cr\xe9ation d\u2019outils (identit\xe9 visuelle, flyer, plaquette, rapport d\u2019activit\xe9, fiche produit etc) tout en respectant votre charte graphique et vos valeurs. "),u.qZA(),u.qZA(),u.TgZ(95,"div",58),u.TgZ(96,"div",59),u.TgZ(97,"h2",60),u._uU(98," Ils nous ont fait confiance "),u._UZ(99,"br"),u.qZA(),u.O4$(),u.TgZ(100,"svg",61),u._UZ(101,"path",62),u._UZ(102,"path",63),u._UZ(103,"path",64),u._UZ(104,"path",65),u._UZ(105,"path",66),u._UZ(106,"path",67),u._UZ(107,"path",68),u.qZA(),u.qZA(),u.kcU(),u.TgZ(108,"div",69),u._UZ(109,"app-carousel",70),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(109),u.Q6J("slides",r.slides))},directives:[ho,Sl,db],encapsulation:2}),n})();var Mm=F(6451),hb=F(3099);function lv(n,e=Fo.y){return n=null!=n?n:PD,(0,Kn.e)((t,r)=>{let i,a=!0;t.subscribe(new Zn.Q(r,c=>{const f=e(c);(a||!n(i,f))&&(a=!1,i=f,r.next(c))}))})}function PD(n,e){return n===e}var OD=F(5032),nn=F(5813),Rr=F(2011),uv=(F(1121),F(3942)),Qo=F(4859),ge=F(5861),Vi=F(9681),P=F(2090),Jo=F(1877);const kt="@firebase/database";let Nm="";function dv(n){Nm=n}class Pm{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,P.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,P.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Xo{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,P.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const hv=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Pm(e)}}catch(e){}return new Xo},Uc=hv("localStorage"),tp=hv("sessionStorage"),hs=new Jo.Yd("@firebase/database"),Om=function(){let n=1;return function(){return n++}}(),fv=function(n){const e=(0,P.dS)(n),t=new P.gQ;t.update(e);const r=t.digest();return P.US.encodeByteArray(r)},Vc=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Vc.apply(null,r):e+="object"==typeof r?(0,P.Pz)(r):r,e+=" "}return e};let uh=null,pv=!0;const LD=function(n,e){(0,P.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(hs.logLevel=Jo.in.VERBOSE,uh=hs.log.bind(hs),e&&tp.set("logging_enabled",!0)):"function"==typeof n?uh=n:(uh=null,tp.remove("logging_enabled"))},cr=function(...n){if(!0===pv&&(pv=!1,null===uh&&!0===tp.get("logging_enabled")&&LD(!0)),uh){const e=Vc.apply(null,n);uh(e)}},Tu=function(n){return function(...e){cr(n,...e)}},np=function(...n){const e="FIREBASE INTERNAL ERROR: "+Vc(...n);hs.error(e)},fo=function(...n){const e=`FIREBASE FATAL ERROR: ${Vc(...n)}`;throw hs.error(e),new Error(e)},Zr=function(...n){const e="FIREBASE WARNING: "+Vc(...n);hs.warn(e)},Fm=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},xl="[MIN_NAME]",Va="[MAX_NAME]",Du=function(n,e){if(n===e)return 0;if(n===xl||e===Va)return-1;if(e===xl||n===Va)return 1;{const t=_v(n),r=_v(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},SR=function(n,e){return n===e?0:n<e?-1:1},rp=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,P.Pz)(e))},fb=function(n){if("object"!=typeof n||null===n)return(0,P.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,P.Pz)(e[r]),t+=":",t+=fb(n[e[r]]);return t+="}",t},gv=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Mr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const pb=function(n){(0,P.hu)(!Fm(n),"Invalid JSON number");const r=1023;let i,a,c,f,_;0===n?(a=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,c=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,c=Math.round(n/Math.pow(2,-1074))));const E=[];for(_=52;_;_-=1)E.push(c%2?1:0),c=Math.floor(c/2);for(_=11;_;_-=1)E.push(a%2?1:0),a=Math.floor(a/2);E.push(i?1:0),E.reverse();const T=E.join("");let S="";for(_=0;_<64;_+=8){let N=parseInt(T.substr(_,8),2).toString(16);1===N.length&&(N="0"+N),S+=N}return S.toLowerCase()},RR=new RegExp("^-?(0*)\\d{1,10}$"),VD=-2147483648,gb=2147483647,_v=function(n){if(RR.test(n)){const e=Number(n);if(e>=VD&&e<=gb)return e}return null},ip=function(n){try{n()}catch(e){setTimeout(()=>{throw Zr("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Lm=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class NR{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Zr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Au{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(cr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Zr(e)}}let Bc=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const mb=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,jm="websocket",_b="long_polling";class Zm{constructor(e,t,r,i,a=!1,c="",f=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Uc.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Uc.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function yb(n,e,t){let r;if((0,P.hu)("string"==typeof e,"typeof type must == string"),(0,P.hu)("object"==typeof t,"typeof params must == object"),e===jm)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==_b)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function BD(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Mr(t,(a,c)=>{i.push(a+"="+c)}),r+i.join("&")}class sp{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,P.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,P.p$)(this.counters_)}}const Su={},op={};function xu(n){const e=n.toString();return Su[e]||(Su[e]=new sp),Su[e]}class ch{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ip(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ku{constructor(e,t,r,i,a,c,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=c,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Tu(e),this.stats_=xu(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),yb(t,_b,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ch(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,P.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Tv((...a)=>{const[c,f,_,E,T]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=f,this.password=_;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[c,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&mb.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ku.forceAllow_=!0}static forceDisallow(){ku.forceDisallow_=!0}static isAvailable(){return!((0,P.Yr)()||!ku.forceAllow_&&(ku.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,P.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,P.h$)(t),i=gv(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,P.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,P.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Tv{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Om(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Tv.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(f){cr("frame writing exception"),f.stack&&cr(f.stack),cr(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||cr("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,P.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{cr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let up=null;"undefined"!=typeof MozWebSocket?up=MozWebSocket:"undefined"!=typeof WebSocket&&(up=WebSocket);let cp=(()=>{class n{constructor(t,r,i,a,c,f,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Tu(this.connId),this.stats_=xu(r),this.connURL=n.connectionURL_(r,f,_,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,c){const f={v:"5"};return!(0,P.Yr)()&&"undefined"!=typeof location&&location.hostname&&mb.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f.ac=a),c&&(f.p=c),yb(t,jm,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Uc.set("previous_websocket_failure",!0);try{let i;if((0,P.Yr)()){i={headers:{"User-Agent":`Firebase/5/${Nm}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,f=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new up(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==up&&!n.forceDisallow_}static previouslyFailed(){return Uc.isInMemoryStorage||!0===Uc.get("previous_websocket_failure")}markConnectionHealthy(){Uc.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,P.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,P.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=gv(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Db=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[ku,cp]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=cp&&cp.isAvailable();let i=r&&!cp.previouslyFailed();if(t.webSocketOnly&&(r||Zr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[cp];else{const a=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&a.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class $m{constructor(e,t,r,i,a,c,f,_,E,T){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=c,this.onReady_=f,this.onDisconnect_=_,this.onKill_=E,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Tu("c:"+this.id+":"),this.transportManager_=new Db(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Lm(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=rp("t",e),r=rp("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=rp("t",e),r=rp("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=rp("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?np("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):np("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Zr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Lm(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Lm(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Uc.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class kb{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Rb{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,P.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,P.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Mv extends Rb{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,P.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Mv}getInitialEvent(e){return(0,P.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class mn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function ln(){return new mn("")}function Lt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ru(n){return n.pieces_.length-n.pieceNum_}function An(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new mn(n.pieces_,e)}function dh(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function dp(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function qm(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new mn(e,0)}function Nn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof mn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new mn(t,0)}function Bt(n){return n.pieceNum_>=n.pieces_.length}function Bi(n,e){const t=Lt(n),r=Lt(e);if(null===t)return e;if(t===r)return Bi(An(n),An(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function zD(n,e){const t=dp(n,0),r=dp(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Du(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function hp(n,e){if(Ru(n)!==Ru(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ea(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ru(n)>Ru(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class KD{constructor(e,t){this.errorPrefix_=t,this.parts_=dp(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,P.ug)(this.parts_[r]);Ov(this)}}function Ov(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Mu(n))}function Mu(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Gm extends Rb{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Gm}getInitialEvent(e){return(0,P.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Fs=1e3;let hh,Rl=(()=>{class n extends kb{constructor(t,r,i,a,c,f,_,E){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=f,this.appCheckTokenProvider_=_,this.authOverride_=E,this.id=n.nextPersistentConnectionId_++,this.log_=Tu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Fs,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,E&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Gm.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Mv.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,c={r:a,a:t,b:r};this.log_((0,P.Pz)(c)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new P.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:f=>{const _=f.d;"ok"===f.s?r.resolve(_):r.reject(_)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const c=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+c),this.listens.has(f)||this.listens.set(f,new Map),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(f).has(c),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(c,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,_=>{const E=_.d,T=_.s;n.warnOnListenWarnings_(E,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==T&&this.removeListen_(i,a),t.onComplete&&t.onComplete(T,E))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,P.r3)(t,"w")){const i=(0,P.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();Zr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,P.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,P.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const c=a.s,f=a.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const c={p:t};a&&(c.q=i,c.t=a),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,c){this.initConnection_();const f={p:r,d:i};void 0!==c&&(f.h=c),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,P.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):np("Unrecognized action received from server: "+(0,P.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Fs,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Fs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Fs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ge.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let _=!1,E=null;const T=function(){E?E.close():(_=!0,a())};t.realtime_={close:T,sendRequest:function(O){(0,P.hu)(E,"sendRequest call when we're not connected not allowed."),E.sendRequest(O)}};const N=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[O,j]=yield Promise.all([t.authTokenProvider_.getToken(N),t.appCheckTokenProvider_.getToken(N)]);_?cr("getToken() completed but was canceled"):(cr("getToken() completed. Creating connection."),t.authToken_=O&&O.accessToken,t.appCheckToken_=j&&j.token,E=new $m(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ie=>{Zr(ie+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(O){t.log_("Failed to get token: "+O),_||(t.repoInfo_.nodeAdmin&&Zr(O),T())}}})()}interrupt(t){cr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){cr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Fs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>fb(c)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new mn(t).toString();let a;if(this.listens.has(i)){const c=this.listens.get(i);a=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){cr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){cr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,P.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Nm.replace(/\./g,"-")]=1,(0,P.uI)()?t["framework.cordova"]=1:(0,P.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Mv.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Ft{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ft(e,t)}}class zm{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Ft(xl,e),i=new Ft(xl,t);return 0!==this.compare(r,i)}minPost(){return Ft.MIN}}class Uv extends zm{static get __EMPTY_NODE(){return hh}static set __EMPTY_NODE(e){hh=e}compare(e,t){return Du(e.name,t.name)}isDefinedOn(e){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ft.MIN}maxPost(){return new Ft(Va,hh)}makePost(e,t){return(0,P.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Ft(e,hh)}toString(){return".key"}}const ta=new Uv;class fp{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Nu,na=(()=>{class n{constructor(t,r,i,a,c){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:fs.EMPTY_NODE,this.right=null!=c?c:fs.EMPTY_NODE}copy(t,r,i,a,c){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const c=i(t,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===c?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return fs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return fs.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class fs{constructor(e,t=fs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new fs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,na.BLACK,null,null))}remove(e){return new fs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,na.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new fp(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new fp(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new fp(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new fp(this.root_,null,this.comparator_,!0,e)}}function QD(n,e){return Du(n.name,e.name)}function Km(n,e){return Du(n,e)}fs.EMPTY_NODE=new class Vv{copy(e,t,r,i,a){return this}insert(e,t,r){return new na(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Lb=function(n){return"number"==typeof n?"number:"+pb(n):"string:"+n},Ub=function(n){if(n.isLeafNode()){const e=n.val();(0,P.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,P.r3)(e,".sv"),"Priority must be a string or number.")}else(0,P.hu)(n===Nu||n.isEmpty(),"priority of unexpected type.");(0,P.hu)(n===Nu||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let jc,Vb,Bb,fh=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Ub(this.priorityNode_)}static set __childrenNodeConstructor(t){jc=t}static get __childrenNodeConstructor(){return jc}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Bt(t)?this:".priority"===Lt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Lt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,P.hu)(".priority"!==i||1===Ru(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(An(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Lb(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?pb(this.value_):this.value_,this.lazyHash_=fv(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,P.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,P.hu)(a>=0,"Unknown leaf type: "+r),(0,P.hu)(c>=0,"Unknown leaf type: "+i),a===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Sn=new class Bv extends zm{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Du(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ft.MIN}maxPost(){return new Ft(Va,new fh("[PRIORITY-POST]",Bb))}makePost(e,t){const r=Vb(e);return new Ft(t,new fh("[PRIORITY-POST]",r))}toString(){return".priority"}},jb=Math.log(2);class Zb{constructor(e){this.count=parseInt(Math.log(e+1)/jb,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const pp=function(n,e,t,r){n.sort(e);const i=function(_,E){const T=E-_;let S,N;if(0===T)return null;if(1===T)return S=n[_],N=t?t(S):S,new na(N,S.node,na.BLACK,null,null);{const O=parseInt(T/2,10)+_,j=i(_,O),ie=i(O+1,E);return S=n[O],N=t?t(S):S,new na(N,S.node,na.BLACK,j,ie)}},f=function(_){let E=null,T=null,S=n.length;const N=function(j,ie){const _e=S-j,Be=S;S-=j;const lt=i(_e+1,Be),Xe=n[_e],Qe=t?t(Xe):Xe;O(new na(Qe,Xe.node,ie,null,lt))},O=function(j){E?(E.left=j,E=j):(T=j,E=j)};for(let j=0;j<_.count;++j){const ie=_.nextBitIsOne(),_e=Math.pow(2,_.count-(j+1));ie?N(_e,na.BLACK):(N(_e,na.BLACK),N(_e,na.RED))}return T}(new Zb(n.length));return new fs(r||e,f)};let jv;const ph={};class Ml{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,P.hu)(ph&&Sn,"ChildrenNode.ts has not been loaded"),jv=jv||new Ml({".priority":ph},{".priority":Sn}),jv}get(e){const t=(0,P.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof fs?t:null}hasIndex(e){return(0,P.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,P.hu)(e!==ta,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Ft.Wrap);let f,c=a.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=a.getNext();f=i?pp(r,e.getCompare()):ph;const _=e.toString(),E=Object.assign({},this.indexSet_);E[_]=e;const T=Object.assign({},this.indexes_);return T[_]=f,new Ml(T,E)}addToIndexes(e,t){const r=(0,P.UI)(this.indexes_,(i,a)=>{const c=(0,P.DV)(this.indexSet_,a);if((0,P.hu)(c,"Missing index implementation for "+a),i===ph){if(c.isDefinedOn(e.node)){const f=[],_=t.getIterator(Ft.Wrap);let E=_.getNext();for(;E;)E.name!==e.name&&f.push(E),E=_.getNext();return f.push(e),pp(f,c.getCompare())}return ph}{const f=t.get(e.name);let _=i;return f&&(_=_.remove(new Ft(e.name,f))),_.insert(e,e.node)}});return new Ml(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,P.UI)(this.indexes_,i=>{if(i===ph)return i;{const a=t.get(e.name);return a?i.remove(new Ft(e.name,a)):i}});return new Ml(r,this.indexSet_)}}let gp,Mt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Ub(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return gp||(gp=new n(new fs(Km),null,Ml.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||gp}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?gp:r}}getChild(t){const r=Lt(t);return null===r?this:this.getImmediateChild(r).getChild(An(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,P.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Ft(t,r);let a,c;r.isEmpty()?(a=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?gp:this.priorityNode_;return new n(a,f,c)}}updateChild(t,r){const i=Lt(t);if(null===i)return r;{(0,P.hu)(".priority"!==Lt(t)||1===Ru(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(An(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,c=!0;if(this.forEachChild(Sn,(f,_)=>{r[f]=_.val(t),i++,c&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):c=!1}),!t&&c&&a<2*i){const f=[];for(const _ in r)f[_]=r[_];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Lb(this.getPriority().val())+":"),this.forEachChild(Sn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":fv(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const c=a.getPredecessorKey(new Ft(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Ft(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Ft(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Ft.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Ft.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)>0;)a.getNext(),c=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===gh?-1:0}withIndex(t){if(t===ta||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===ta||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Sn),a=r.getIterator(Sn);let c=i.getNext(),f=a.getNext();for(;c&&f;){if(c.name!==f.name||!c.node.equals(f.node))return!1;c=i.getNext(),f=a.getNext()}return null===c&&null===f}return!1}return!1}}resolveIndex_(t){return t===ta?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const gh=new class UR extends Mt{constructor(){super(new fs(Km),Mt.EMPTY_NODE,Ml.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Mt.EMPTY_NODE}isEmpty(){return!1}};function Qn(n,e=null){if(null===n)return Mt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,P.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new fh(n,Qn(e));if(n instanceof Array){let t=Mt.EMPTY_NODE;return Mr(n,(r,i)=>{if((0,P.r3)(n,r)&&"."!==r.substring(0,1)){const a=Qn(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Qn(e))}{const t=[];let r=!1;if(Mr(n,(c,f)=>{if("."!==c.substring(0,1)){const _=Qn(f);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new Ft(c,_)))}}),0===t.length)return Mt.EMPTY_NODE;const a=pp(t,QD,c=>c.name,Km);if(r){const c=pp(t,Sn.getCompare());return new Mt(a,Qn(e),new Ml({".priority":c},{".priority":Sn}))}return new Mt(a,Qn(e),Ml.Default)}}Object.defineProperties(Ft,{MIN:{value:new Ft(xl,Mt.EMPTY_NODE)},MAX:{value:new Ft(Va,gh)}}),Uv.__EMPTY_NODE=Mt.EMPTY_NODE,fh.__childrenNodeConstructor=Mt,function Fb(n){Nu=n}(gh),function po(n){Bb=n}(gh),function JD(n){Vb=n}(Qn);class Hb extends zm{constructor(e){super(),this.indexPath_=e,(0,P.hu)(!Bt(e)&&".priority"!==Lt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Du(e.name,t.name):a}makePost(e,t){const r=Qn(e),i=Mt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ft(t,i)}maxPost(){const e=Mt.EMPTY_NODE.updateChild(this.indexPath_,gh);return new Ft(Va,e)}toString(){return dp(this.indexPath_,0).join("/")}}const mp=new class VR extends zm{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Du(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ft.MIN}maxPost(){return Ft.MAX}makePost(e,t){const r=Qn(e);return new Ft(t,r)}toString(){return".value"}},mh="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ra=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=mh.charAt(t%64),t=Math.floor(t/64);(0,P.hu)(0===t,"Cannot push at time == 0");let c=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=mh.charAt(e[i]);return(0,P.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),t1=function(n){if(n===""+gb)return"-";const e=_v(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Va;const a=mh.charAt(mh.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},n1=function(n){if(n===""+VD)return xl;const e=_v(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+gb:(delete t[t.length-1],t.join("")):(t[t.length-1]=mh.charAt(mh.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function Hv(n){return{type:"value",snapshotNode:n}}function Zc(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function _h(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function _p(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Qm{constructor(e){this.index_=e}updateChild(e,t,r,i,a,c){(0,P.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(_h(t,f)):(0,P.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?c.trackChildChange(Zc(t,r)):c.trackChildChange(_p(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Sn,(i,a)=>{t.hasChild(i)||r.trackChildChange(_h(i,a))}),t.isLeafNode()||t.forEachChild(Sn,(i,a)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(a)||r.trackChildChange(_p(i,a,c))}else r.trackChildChange(Zc(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Mt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Hc{constructor(e){this.indexedFilter_=new Qm(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Hc.getStartPost_(e),this.endPost_=Hc.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,c){return this.matches(new Ft(t,r))||(r=Mt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Mt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Mt.EMPTY_NODE);const a=this;return t.forEachChild(Sn,(c,f)=>{a.matches(new Ft(c,f))||(i=i.updateImmediateChild(c,Mt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class r1{constructor(e){this.rangedFilter_=new Hc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,c){return this.rangedFilter_.matches(new Ft(t,r))||(r=Mt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,c):this.fullLimitUpdateChild_(e,t,r,a,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Mt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Mt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const f=a.getNext();let _;if(_=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),f)<=0:this.index_.compare(f,this.rangedFilter_.getEndPost())<=0,!_)break;i=i.updateImmediateChild(f.name,f.node),c++}}else{let a,c,f,_;if(i=t.withIndex(this.index_),i=i.updatePriority(Mt.EMPTY_NODE),this.reverse_){_=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();f=(N,O)=>S(O,N)}else _=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),f=this.index_.getCompare();let E=0,T=!1;for(;_.hasNext();){const S=_.getNext();!T&&f(a,S)<=0&&(T=!0),T&&E<this.limit_&&f(S,c)<=0?E++:i=i.updateImmediateChild(S.name,Mt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let c;if(this.reverse_){const S=this.index_.getCompare();c=(N,O)=>S(O,N)}else c=this.index_.getCompare();const f=e;(0,P.hu)(f.numChildren()===this.limit_,"");const _=new Ft(t,r),E=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),T=this.rangedFilter_.matches(_);if(f.hasChild(t)){const S=f.getImmediateChild(t);let N=i.getChildAfterChild(this.index_,E,this.reverse_);for(;null!=N&&(N.name===t||f.hasChild(N.name));)N=i.getChildAfterChild(this.index_,N,this.reverse_);const O=null==N?1:c(N,_);if(T&&!r.isEmpty()&&O>=0)return null!=a&&a.trackChildChange(_p(t,r,S)),f.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(_h(t,S));const ie=f.updateImmediateChild(t,Mt.EMPTY_NODE);return null!=N&&this.rangedFilter_.matches(N)?(null!=a&&a.trackChildChange(Zc(N.name,N.node)),ie.updateImmediateChild(N.name,N.node)):ie}}return r.isEmpty()?e:T&&c(E,_)>=0?(null!=a&&(a.trackChildChange(_h(E.name,E.node)),a.trackChildChange(Zc(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(E.name,Mt.EMPTY_NODE)):e}}class yh{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Sn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:xl}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Va}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Sn}copy(){const e=new yh;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function $v(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function qv(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Nl(n,e){const t=n.copy();return t.index_=e,t}function $b(n){const e={};if(n.isDefault())return e;let t;return n.index_===Sn?t="$priority":n.index_===mp?t="$value":n.index_===ta?t="$key":((0,P.hu)(n.index_ instanceof Hb,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,P.Pz)(t),n.startSet_&&(e.startAt=(0,P.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,P.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,P.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,P.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function vh(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Sn&&(e.i=n.index_.toString()),e}class Xm extends kb{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Tu("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,P.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=Xm.getListenId_(e,r),f={};this.listens_[c]=f;const _=$b(e._queryParams);this.restRequest_(a+".json",_,(E,T)=>{let S=T;if(404===E&&(S=null,E=null),null===E&&this.onDataUpdate_(a,S,!1,r),(0,P.DV)(this.listens_,c)===f){let N;N=E?401===E?"permission_denied":"rest_error:"+E:"ok",i(N,null)}})}unlisten(e,t){const r=Xm.getListenId_(e,t);delete this.listens_[r]}get(e){const t=$b(e._queryParams),r=e._path.toString(),i=new P.BH;return this.restRequest_(r+".json",t,(a,c)=>{let f=c;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,P.xO)(t);this.log_("Sending REST request for "+c);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+c+" received. status:",f.status,"response:",f.responseText);let _=null;if(f.status>=200&&f.status<300){try{_=(0,P.cI)(f.responseText)}catch(E){Zr("Failed to parse JSON response for "+c+": "+f.responseText)}r(null,_)}else 401!==f.status&&404!==f.status&&Zr("Got unsuccessful REST response for "+c+" Status: "+f.status),r(f.status);r=null}},f.open("GET",c,!0),f.send()})}}class l1{constructor(){this.rootNode_=Mt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function wh(){return{value:null,children:new Map}}function ji(n,e,t){if(Bt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Lt(e);n.children.has(r)||n.children.set(r,wh()),ji(n.children.get(r),e=An(e),t)}}function $c(n,e){if(Bt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Sn,(r,i)=>{ji(n,new mn(r),i)}),$c(n,e)}}if(n.children.size>0){const t=Lt(e);return e=An(e),n.children.has(t)&&$c(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Hr(n,e,t){null!==n.value?t(e,n.value):function qc(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Hr(i,new mn(e.toString()+"/"+r),t)})}class e_{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Mr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class bh{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new e_(e);const r=1e4+2e4*Math.random();Lm(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Mr(e,(i,a)=>{a>0&&(0,P.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Lm(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var si=(()=>{return(n=si||(si={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",si;var n})();function Fu(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Pl{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=si.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Bt(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new mn(e));return new Pl(ln(),t,this.revert)}}return(0,P.hu)(Lt(this.path)===e,"operationForChild called for unrelated child."),new Pl(An(this.path),this.affectedTree,this.revert)}}class ja{constructor(e,t){this.source=e,this.path=t,this.type=si.LISTEN_COMPLETE}operationForChild(e){return Bt(this.path)?new ja(this.source,ln()):new ja(this.source,An(this.path))}}class go{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=si.OVERWRITE}operationForChild(e){return Bt(this.path)?new go(this.source,ln(),this.snap.getImmediateChild(e)):new go(this.source,An(this.path),this.snap)}}class Gc{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=si.MERGE}operationForChild(e){if(Bt(this.path)){const t=this.children.subtree(new mn(e));return t.isEmpty()?null:t.value?new go(this.source,ln(),t.value):new Gc(this.source,ln(),t)}return(0,P.hu)(Lt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Gc(this.source,An(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ol{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Bt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Lt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class qb{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Ch(n,e,t,r,i,a){const c=r.filter(f=>f.type===t);c.sort((f,_)=>function zb(n,e,t){if(null==e.childName||null==t.childName)throw(0,P.g5)("Should only compare child_ events.");const r=new Ft(e.childName,e.snapshotNode),i=new Ft(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,_)),c.forEach(f=>{const _=function Wb(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(E=>{E.respondsTo(f.type)&&e.push(E.createEvent(_,n.query_))})})}function yp(n,e){return{eventCache:n,serverCache:e}}function Ih(n,e,t,r){return yp(new Ol(e,t,r),n.serverCache)}function Kb(n,e,t,r){return yp(n.eventCache,new Ol(e,t,r))}function vp(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Wc(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let t_;class Pn{constructor(e,t=(()=>(t_||(t_=new fs(SR)),t_))()){this.value=e,this.children=t}static fromObject(e){let t=new Pn(null);return Mr(e,(r,i)=>{t=t.set(new mn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:ln(),value:this.value};if(Bt(e))return null;{const r=Lt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(An(e),t);return null!=a?{path:Nn(new mn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Bt(e))return this;{const t=Lt(e),r=this.children.get(t);return null!==r?r.subtree(An(e)):new Pn(null)}}set(e,t){if(Bt(e))return new Pn(t,this.children);{const r=Lt(e),a=(this.children.get(r)||new Pn(null)).set(An(e),t),c=this.children.insert(r,a);return new Pn(this.value,c)}}remove(e){if(Bt(e))return this.children.isEmpty()?new Pn(null):new Pn(null,this.children);{const t=Lt(e),r=this.children.get(t);if(r){const i=r.remove(An(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Pn(null):new Pn(this.value,a)}return this}}get(e){if(Bt(e))return this.value;{const t=Lt(e),r=this.children.get(t);return r?r.get(An(e)):null}}setTree(e,t){if(Bt(e))return t;{const r=Lt(e),a=(this.children.get(r)||new Pn(null)).setTree(An(e),t);let c;return c=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Pn(this.value,c)}}fold(e){return this.fold_(ln(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Nn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,ln(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Bt(e))return null;{const a=Lt(e),c=this.children.get(a);return c?c.findOnPath_(An(e),Nn(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ln(),t)}foreachOnPath_(e,t,r){if(Bt(e))return this;{this.value&&r(t,this.value);const i=Lt(e),a=this.children.get(i);return a?a.foreachOnPath_(An(e),Nn(t,i),r):new Pn(null)}}foreach(e){this.foreach_(ln(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Nn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ia{constructor(e){this.writeTree_=e}static empty(){return new ia(new Pn(null))}}function Th(n,e,t){if(Bt(e))return new ia(new Pn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const c=Bi(i,e);return a=a.updateChild(c,t),new ia(n.writeTree_.set(i,a))}{const i=new Pn(t),a=n.writeTree_.setTree(e,i);return new ia(a)}}}function Wv(n,e,t){let r=n;return Mr(t,(i,a)=>{r=Th(r,Nn(e,i),a)}),r}function zv(n,e){if(Bt(e))return ia.empty();{const t=n.writeTree_.setTree(e,new Pn(null));return new ia(t)}}function Kv(n,e){return null!=zc(n,e)}function zc(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Bi(t.path,e)):null}function u1(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Sn,(r,i)=>{e.push(new Ft(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Ft(r,i.value))}),e}function Lu(n,e){if(Bt(e))return n;{const t=zc(n,e);return new ia(null!=t?new Pn(t):n.writeTree_.subtree(e))}}function wp(n){return n.writeTree_.isEmpty()}function Uu(n,e){return Qb(ln(),n.writeTree_,e)}function Qb(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,P.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=Qb(Nn(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Nn(n,".priority"),r)),t}}function Yv(n,e){return t0(e,n)}function HR(n,e){if(n.snap)return ea(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ea(Nn(n.path,t),e))return!0;return!1}function Dh(n){return n.visible}function Xb(n,e,t){let r=ia.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const c=a.path;let f;if(a.snap)ea(t,c)?(f=Bi(t,c),r=Th(r,f,a.snap)):ea(c,t)&&(f=Bi(c,t),r=Th(r,ln(),a.snap.getChild(f)));else{if(!a.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(ea(t,c))f=Bi(t,c),r=Wv(r,f,a.children);else if(ea(c,t))if(f=Bi(c,t),Bt(f))r=Wv(r,ln(),a.children);else{const _=(0,P.DV)(a.children,Lt(f));if(_){const E=_.getChild(An(f));r=Th(r,ln(),E)}}}}}return r}function Qv(n,e,t,r,i){if(r||i){const a=Lu(n.visibleWrites,e);return!i&&wp(a)?t:i||null!=t||Kv(a,ln())?Uu(Xb(n.allWrites,function(E){return(E.visible||i)&&(!r||!~r.indexOf(E.writeId))&&(ea(E.path,e)||ea(e,E.path))},e),t||Mt.EMPTY_NODE):null}{const a=zc(n.visibleWrites,e);if(null!=a)return a;{const c=Lu(n.visibleWrites,e);return wp(c)?t:null!=t||Kv(c,ln())?Uu(c,t||Mt.EMPTY_NODE):null}}}function r_(n,e,t,r){return Qv(n.writeTree,n.treePath,e,t,r)}function Jv(n,e){return function h1(n,e,t){let r=Mt.EMPTY_NODE;const i=zc(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Sn,(a,c)=>{r=r.updateImmediateChild(a,c)}),r;if(t){const a=Lu(n.visibleWrites,e);return t.forEachChild(Sn,(c,f)=>{const _=Uu(Lu(a,new mn(c)),f);r=r.updateImmediateChild(c,_)}),u1(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return u1(Lu(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function nC(n,e,t,r){return function eC(n,e,t,r,i){(0,P.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Nn(e,t);if(Kv(n.visibleWrites,a))return null;{const c=Lu(n.visibleWrites,a);return wp(c)?i.getChild(t):Uu(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function i_(n,e){return function f1(n,e){return zc(n.visibleWrites,e)}(n.writeTree,Nn(n.treePath,e))}function Xv(n,e,t){return function n_(n,e,t,r){const i=Nn(e,t),a=zc(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Uu(Lu(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function e0(n,e){return t0(Nn(n.treePath,e),n.writeTree)}function t0(n,e){return{treePath:n,writeTree:e}}class n0{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,P.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,_p(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,_h(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Zc(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,P.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,_p(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const s_=new class $R{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class r0{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Ol(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Xv(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Wc(this.viewCache_),a=function rC(n,e,t,r,i,a){return function tC(n,e,t,r,i,a,c){let f;const _=Lu(n.visibleWrites,e),E=zc(_,ln());if(null!=E)f=E;else{if(null==t)return[];f=Uu(_,t)}if(f=f.withIndex(c),f.isEmpty()||f.isLeafNode())return[];{const T=[],S=c.getCompare(),N=a?f.getReverseIteratorFrom(r,c):f.getIteratorFrom(r,c);let O=N.getNext();for(;O&&T.length<i;)0!==S(O,r)&&T.push(O),O=N.getNext();return T}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function o_(n,e,t,r,i,a){const c=e.eventCache;if(null!=i_(r,t))return e;{let f,_;if(Bt(t))if((0,P.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const E=Wc(e),S=Jv(r,E instanceof Mt?E:Mt.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const E=r_(r,Wc(e));f=n.filter.updateFullNode(e.eventCache.getNode(),E,a)}else{const E=Lt(t);if(".priority"===E){(0,P.hu)(1===Ru(t),"Can't have a priority with additional path components");const T=c.getNode();_=e.serverCache.getNode();const S=nC(r,t,T,_);f=null!=S?n.filter.updatePriority(T,S):c.getNode()}else{const T=An(t);let S;if(c.isCompleteForChild(E)){_=e.serverCache.getNode();const N=nC(r,t,c.getNode(),_);S=null!=N?c.getNode().getImmediateChild(E).updateChild(T,N):c.getNode().getImmediateChild(E)}else S=Xv(r,E,e.serverCache);f=null!=S?n.filter.updateChild(c.getNode(),E,S,T,i,a):c.getNode()}}return Ih(e,f,c.isFullyInitialized()||Bt(t),n.filter.filtersNodes())}}function a_(n,e,t,r,i,a,c,f){const _=e.serverCache;let E;const T=c?n.filter:n.filter.getIndexedFilter();if(Bt(t))E=T.updateFullNode(_.getNode(),r,null);else if(T.filtersNodes()&&!_.isFiltered()){const O=_.getNode().updateChild(t,r);E=T.updateFullNode(_.getNode(),O,null)}else{const O=Lt(t);if(!_.isCompleteForPath(t)&&Ru(t)>1)return e;const j=An(t),_e=_.getNode().getImmediateChild(O).updateChild(j,r);E=".priority"===O?T.updatePriority(_.getNode(),_e):T.updateChild(_.getNode(),O,_e,j,s_,null)}const S=Kb(e,E,_.isFullyInitialized()||Bt(t),T.filtersNodes());return o_(n,S,t,i,new r0(i,S,a),f)}function bp(n,e,t,r,i,a,c){const f=e.eventCache;let _,E;const T=new r0(i,e,a);if(Bt(t))E=n.filter.updateFullNode(e.eventCache.getNode(),r,c),_=Ih(e,E,!0,n.filter.filtersNodes());else{const S=Lt(t);if(".priority"===S)E=n.filter.updatePriority(e.eventCache.getNode(),r),_=Ih(e,E,f.isFullyInitialized(),f.isFiltered());else{const N=An(t),O=f.getNode().getImmediateChild(S);let j;if(Bt(N))j=r;else{const ie=T.getCompleteChild(S);j=null!=ie?".priority"===dh(N)&&ie.getChild(qm(N)).isEmpty()?ie:ie.updateChild(N,r):Mt.EMPTY_NODE}_=O.equals(j)?e:Ih(e,n.filter.updateChild(f.getNode(),S,j,N,T,c),f.isFullyInitialized(),n.filter.filtersNodes())}}return _}function l_(n,e){return n.eventCache.isCompleteForChild(e)}function g1(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function o0(n,e,t,r,i,a,c,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let E,_=e;E=Bt(t)?r:new Pn(null).setTree(t,r);const T=e.serverCache.getNode();return E.children.inorderTraversal((S,N)=>{if(T.hasChild(S)){const j=g1(0,e.serverCache.getNode().getImmediateChild(S),N);_=a_(n,_,new mn(S),j,i,a,c,f)}}),E.children.inorderTraversal((S,N)=>{const O=!e.serverCache.isCompleteForChild(S)&&null===N.value;if(!T.hasChild(S)&&!O){const ie=g1(0,e.serverCache.getNode().getImmediateChild(S),N);_=a_(n,_,new mn(S),ie,i,a,c,f)}}),_}class oC{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Qm(r.getIndex()),a=function i1(n){return n.loadsAllData()?new Qm(n.getIndex()):n.hasLimit()?new r1(n):new Hc(n)}(r);this.processor_=function qR(n){return{filter:n}}(a);const c=t.serverCache,f=t.eventCache,_=i.updateFullNode(Mt.EMPTY_NODE,c.getNode(),null),E=a.updateFullNode(Mt.EMPTY_NODE,f.getNode(),null),T=new Ol(_,c.isFullyInitialized(),i.filtersNodes()),S=new Ol(E,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=yp(S,T),this.eventGenerator_=new qb(this.query_)}get query(){return this.query_}}function lC(n,e){const t=Wc(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Bt(e)&&!t.getImmediateChild(Lt(e)).isEmpty())?t.getChild(e):null}function u_(n){return 0===n.eventRegistrations_.length}function cC(n,e,t){const r=[];if(t){(0,P.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const c=n.eventRegistrations_[a];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function c0(n,e,t,r){e.type===si.MERGE&&null!==e.source.queryId&&((0,P.hu)(Wc(n.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(vp(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function iC(n,e,t,r,i){const a=new n0;let c,f;if(t.type===si.OVERWRITE){const E=t;E.source.fromUser?c=bp(n,e,E.path,E.snap,r,i,a):((0,P.hu)(E.source.fromServer,"Unknown source."),f=E.source.tagged||e.serverCache.isFiltered()&&!Bt(E.path),c=a_(n,e,E.path,E.snap,r,i,f,a))}else if(t.type===si.MERGE){const E=t;E.source.fromUser?c=function sC(n,e,t,r,i,a,c){let f=e;return r.foreach((_,E)=>{const T=Nn(t,_);l_(e,Lt(T))&&(f=bp(n,f,T,E,i,a,c))}),r.foreach((_,E)=>{const T=Nn(t,_);l_(e,Lt(T))||(f=bp(n,f,T,E,i,a,c))}),f}(n,e,E.path,E.children,r,i,a):((0,P.hu)(E.source.fromServer,"Unknown source."),f=E.source.tagged||e.serverCache.isFiltered(),c=o0(n,e,E.path,E.children,r,i,f,a))}else if(t.type===si.ACK_USER_WRITE){const E=t;c=E.revert?function m1(n,e,t,r,i,a){let c;if(null!=i_(r,t))return e;{const f=new r0(r,e,i),_=e.eventCache.getNode();let E;if(Bt(t)||".priority"===Lt(t)){let T;if(e.serverCache.isFullyInitialized())T=r_(r,Wc(e));else{const S=e.serverCache.getNode();(0,P.hu)(S instanceof Mt,"serverChildren would be complete if leaf node"),T=Jv(r,S)}E=n.filter.updateFullNode(_,T,a)}else{const T=Lt(t);let S=Xv(r,T,e.serverCache);null==S&&e.serverCache.isCompleteForChild(T)&&(S=_.getImmediateChild(T)),E=null!=S?n.filter.updateChild(_,T,S,An(t),f,a):e.eventCache.getNode().hasChild(T)?n.filter.updateChild(_,T,Mt.EMPTY_NODE,An(t),f,a):_,E.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=r_(r,Wc(e)),c.isLeafNode()&&(E=n.filter.updateFullNode(E,c,a)))}return c=e.serverCache.isFullyInitialized()||null!=i_(r,ln()),Ih(e,E,c,n.filter.filtersNodes())}}(n,e,E.path,r,i,a):function a0(n,e,t,r,i,a,c){if(null!=i_(i,t))return e;const f=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(Bt(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return a_(n,e,t,_.getNode().getChild(t),i,a,f,c);if(Bt(t)){let E=new Pn(null);return _.getNode().forEachChild(ta,(T,S)=>{E=E.set(new mn(T),S)}),o0(n,e,t,E,i,a,f,c)}return e}{let E=new Pn(null);return r.foreach((T,S)=>{const N=Nn(t,T);_.isCompleteForPath(N)&&(E=E.set(T,_.getNode().getChild(N)))}),o0(n,e,t,E,i,a,f,c)}}(n,e,E.path,E.affectedTree,r,i,a)}else{if(t.type!==si.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+t.type);c=function l0(n,e,t,r,i){const a=e.serverCache;return o_(n,Kb(e,a.getNode(),a.isFullyInitialized()||Bt(t),a.isFiltered()),t,r,s_,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function s0(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=vp(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(Hv(vp(e)))}}(e,c,_),{viewCache:c,changes:_}}(n.processor_,i,e,t,r);return function Ep(n,e){(0,P.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,P.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,c_(n,a.changes,a.viewCache.eventCache.getNode(),null)}function c_(n,e,t,r){return function Gb(n,e,t,r){const i=[],a=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(function BR(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),Ch(n,i,"child_removed",e,r,t),Ch(n,i,"child_added",e,r,t),Ch(n,i,"child_moved",a,r,t),Ch(n,i,"child_changed",e,r,t),Ch(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let Cp,d_;class hC{constructor(){this.views=new Map}}function Ip(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,P.hu)(null!=a,"SyncTree gave us an op for an invalid query."),c0(a,e,t,r)}{let a=[];for(const c of n.views.values())a=a.concat(c0(c,e,t,r));return a}}function h0(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let f=r_(t,i?r:null),_=!1;f?_=!0:r instanceof Mt?(f=Jv(t,r),_=!1):(f=Mt.EMPTY_NODE,_=!1);const E=yp(new Ol(f,_,!1),new Ol(r,i,!1));return new oC(e,E)}return c}function f0(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Fl(n,e){let t=null;for(const r of n.views.values())t=t||lC(r,e);return t}function p0(n,e){return e._queryParams.loadsAllData()?m0(n):n.views.get(e._queryIdentifier)}function g0(n,e){return null!=p0(n,e)}function Ll(n){return null!=m0(n)}function m0(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let w1=1;class wr{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Pn(null),this.pendingWriteTree_=function p1(){return{visibleWrites:ia.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function h_(n,e,t,r,i){return function jR(n,e,t,r,i){(0,P.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Th(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Tp(n,new go({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Vu(n,e,t=!1){const r=function c1(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Jb(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,P.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const f=n.allWrites[c];f.visible&&(c>=t&&HR(f,r.path)?i=!1:ea(r.path,f.path)&&(a=!0)),c--}return!!i&&(a?(function d1(n){n.visibleWrites=Xb(n.allWrites,Dh,ln()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=zv(n.visibleWrites,r.path):Mr(r.children,_=>{n.visibleWrites=zv(n.visibleWrites,Nn(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new Pn(null);return null!=r.snap?a=a.set(ln(),!0):Mr(r.children,c=>{a=a.set(new mn(c),!0)}),Tp(n,new Pl(r.path,a,t))}return[]}function Ah(n,e,t){return Tp(n,new go({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Ul(n,e,t,r,i=!1){const a=e._path,c=n.syncPointTree_.get(a);let f=[];if(c&&("default"===e._queryIdentifier||g0(c,e))){const _=function pC(n,e,t,r){const i=e._queryIdentifier,a=[];let c=[];const f=Ll(n);if("default"===i)for(const[_,E]of n.views.entries())c=c.concat(cC(E,t,r)),u_(E)&&(n.views.delete(_),E.query._queryParams.loadsAllData()||a.push(E.query));else{const _=n.views.get(i);_&&(c=c.concat(cC(_,t,r)),u_(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return f&&!Ll(n)&&a.push(new(function y1(){return(0,P.hu)(Cp,"Reference.ts has not been loaded"),Cp}())(e._repo,e._path)),{removed:a,events:c}}(c,e,t,r);(function d0(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const E=_.removed;if(f=_.events,!i){const T=-1!==E.findIndex(N=>N._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(a,(N,O)=>Ll(O));if(T&&!S){const N=n.syncPointTree_.subtree(a);if(!N.isEmpty()){const O=function wC(n){return n.fold((e,t,r)=>{if(t&&Ll(t))return[m0(t)];{let i=[];return t&&(i=f0(t)),Mr(r,(a,c)=>{i=i.concat(c)}),i}})}(N);for(let j=0;j<O.length;++j){const ie=O[j],_e=ie.query,Be=sa(n,ie);n.listenProvider_.startListening(Sh(_e),Dp(n,_e),Be.hashFn,Be.onComplete)}}}!S&&E.length>0&&!r&&(T?n.listenProvider_.stopListening(Sh(e),null):E.forEach(N=>{const O=n.queryToTagMap.get(m_(N));n.listenProvider_.stopListening(Sh(N),O)}))}!function I1(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=m_(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,E)}return f}function yC(n,e,t,r){const i=mo(n,r);if(null!=i){const a=Us(i),c=a.path,f=a.queryId,_=Bi(c,e);return Vs(n,c,new go(Fu(f),_,t))}return[]}function f_(n,e,t,r=!1){const i=e._path;let a=null,c=!1;n.syncPointTree_.foreachOnPath(i,(N,O)=>{const j=Bi(N,i);a=a||Fl(O,j),c=c||Ll(O)});let _,f=n.syncPointTree_.get(i);f?(c=c||Ll(f),a=a||Fl(f,ln())):(f=new hC,n.syncPointTree_=n.syncPointTree_.set(i,f)),null!=a?_=!0:(_=!1,a=Mt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((O,j)=>{const ie=Fl(j,ln());ie&&(a=a.updateImmediateChild(O,ie))}));const E=g0(f,e);if(!E&&!e._queryParams.loadsAllData()){const N=m_(e);(0,P.hu)(!n.queryToTagMap.has(N),"View does not exist, but we have a tag");const O=function T1(){return w1++}();n.queryToTagMap.set(N,O),n.tagToQueryMap.set(O,N)}let S=function fC(n,e,t,r,i,a){const c=h0(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function uC(n,e){n.eventRegistrations_.push(e)}(c,t),function dC(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Sn,(a,c)=>{r.push(Zc(a,c))}),t.isFullyInitialized()&&r.push(Hv(t.getNode())),c_(n,r,t.getNode(),e)}(c,t)}(f,e,t,Yv(n.pendingWriteTree_,i),a,_);if(!E&&!c&&!r){const N=p0(f,e);S=S.concat(function D1(n,e,t){const r=e._path,i=Dp(n,e),a=sa(n,t),c=n.listenProvider_.startListening(Sh(e),i,a.hashFn,a.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,P.hu)(!Ll(f.value),"If we're adding a query, it shouldn't be shadowed");else{const _=f.fold((E,T,S)=>{if(!Bt(E)&&T&&Ll(T))return[m0(T).query];{let N=[];return T&&(N=N.concat(f0(T).map(O=>O.query))),Mr(S,(O,j)=>{N=N.concat(j)}),N}});for(let E=0;E<_.length;++E){const T=_[E];n.listenProvider_.stopListening(Sh(T),Dp(n,T))}}return c}(n,e,N))}return S}function p_(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,f)=>{const E=Fl(f,Bi(c,e));if(E)return E});return Qv(i,e,a,t,!0)}function Tp(n,e){return _0(e,n.syncPointTree_,null,Yv(n.pendingWriteTree_,ln()))}function _0(n,e,t,r){if(Bt(n.path))return g_(n,e,t,r);{const i=e.get(ln());null==t&&null!=i&&(t=Fl(i,ln()));let a=[];const c=Lt(n.path),f=n.operationForChild(c),_=e.children.get(c);if(_&&f){const E=t?t.getImmediateChild(c):null,T=e0(r,c);a=a.concat(_0(f,_,E,T))}return i&&(a=a.concat(Ip(i,n,r,t))),a}}function g_(n,e,t,r){const i=e.get(ln());null==t&&null!=i&&(t=Fl(i,ln()));let a=[];return e.children.inorderTraversal((c,f)=>{const _=t?t.getImmediateChild(c):null,E=e0(r,c),T=n.operationForChild(c);T&&(a=a.concat(g_(T,f,_,E)))}),i&&(a=a.concat(Ip(i,n,r,t))),a}function sa(n,e){const t=e.query,r=Dp(n,t);return{hashFn:()=>(function u0(n){return n.viewCache_.serverCache.getNode()}(e)||Mt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function _C(n,e,t){const r=mo(n,t);if(r){const i=Us(r),a=i.path,c=i.queryId,f=Bi(a,e);return Vs(n,a,new ja(Fu(c),f))}return[]}(n,t._path,r):function mC(n,e){return Tp(n,new ja({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function kR(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return Ul(n,t,null,a)}}}}function Dp(n,e){const t=m_(e);return n.queryToTagMap.get(t)}function m_(n){return n._path.toString()+"$"+n._queryIdentifier}function mo(n,e){return n.tagToQueryMap.get(e)}function Us(n){const e=n.indexOf("$");return(0,P.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new mn(n.substr(0,e))}}function Vs(n,e,t){const r=n.syncPointTree_.get(e);return(0,P.hu)(r,"Missing sync point for query tag that we're tracking"),Ip(r,t,Yv(n.pendingWriteTree_,e),null)}function Sh(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function gC(){return(0,P.hu)(d_,"Reference.ts has not been loaded"),d_}())(n._repo,n._path):n}class y0{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new y0(t)}node(){return this.node_}}class Ap{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Nn(this.path_,e);return new Ap(this.syncTree_,t)}node(){return p_(this.syncTree_,this.path_)}}const EC=function(n,e,t){return n&&"object"==typeof n?((0,P.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?bC(n[".sv"],e,t):"object"==typeof n[".sv"]?A1(n[".sv"],e):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},bC=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,P.hu)(!1,"Unexpected server value: "+n)},A1=function(n,e,t){n.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,P.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,P.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},v0=function(n,e,t,r){return xh(e,new Ap(t,n),r)},__=function(n,e,t){return xh(n,new y0(e),t)};function xh(n,e,t){const r=n.getPriority().val(),i=EC(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,f=EC(c.getValue(),e,t);return f!==c.getValue()||i!==c.getPriority().val()?new fh(f,Qn(i)):n}{const c=n;return a=c,i!==c.getPriority().val()&&(a=a.updatePriority(new fh(i))),c.forEachChild(Sn,(f,_)=>{const E=xh(_,e.getImmediateChild(f),t);E!==_&&(a=a.updateImmediateChild(f,E))}),a}}class w0{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function xp(n,e){let t=e instanceof mn?e:new mn(e),r=n,i=Lt(t);for(;null!==i;){const a=(0,P.DV)(r.node.children,i)||{children:{},childCount:0};r=new w0(i,r,a),t=An(t),i=Lt(t)}return r}function Bu(n){return n.node.value}function kp(n,e){n.node.value=e,y_(n)}function Rp(n){return n.node.childCount>0}function Mp(n,e){Mr(n.node.children,(t,r)=>{e(new w0(t,n,r))})}function E0(n,e,t,r){t&&!r&&e(n),Mp(n,i=>{E0(i,e,!0,r)}),t&&r&&e(n)}function kh(n){return new mn(null===n.parent?n.name:kh(n.parent)+"/"+n.name)}function y_(n){null!==n.parent&&function TC(n,e,t){const r=function CC(n){return void 0===Bu(n)&&!Rp(n)}(t),i=(0,P.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,y_(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,y_(n))}(n.parent,n.name,n)}const DC=/[\[\].#$\/\u0000-\u001F\u007F]/,S1=/[\[\].#$\u0000-\u001F\u007F]/,b0=10485760,v_=function(n){return"string"==typeof n&&0!==n.length&&!DC.test(n)},AC=function(n){return"string"==typeof n&&0!==n.length&&!S1.test(n)},Np=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Fm(n)||n&&"object"==typeof n&&(0,P.r3)(n,".sv")},Za=function(n,e,t,r){r&&void 0===e||Pp((0,P.gK)(n,"value"),e,t)},Pp=function(n,e,t){const r=t instanceof mn?new KD(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Mu(r));if("function"==typeof e)throw new Error(n+"contains a function "+Mu(r)+" with contents = "+e.toString());if(Fm(e))throw new Error(n+"contains "+e.toString()+" "+Mu(r));if("string"==typeof e&&e.length>b0/3&&(0,P.ug)(e)>b0)throw new Error(n+"contains a string greater than "+b0+" utf8 bytes "+Mu(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Mr(e,(c,f)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(a=!0,!v_(c)))throw new Error(n+" contains an invalid key ("+c+") "+Mu(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Nb(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,P.ug)(e),Ov(n)})(r,c),Pp(n,f,r),function Pb(n){const e=n.parts_.pop();n.byteLength_-=(0,P.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Mu(r)+" in addition to actual children.")}},SC=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,P.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Mr(e,(c,f)=>{const _=new mn(c);if(Pp(i,f,Nn(t,_)),".priority"===dh(_)&&!Np(f))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=dp(r);for(let c=0;c<a.length;c++)if((".priority"!==a[c]||c!==a.length-1)&&!v_(a[c]))throw new Error(n+"contains an invalid key ("+a[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(zD);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&ea(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},C0=function(n,e,t){if(!t||void 0!==e){if(Fm(e))throw new Error((0,P.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Np(e))throw new Error((0,P.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Op=function(n,e,t,r){if(!(r&&void 0===t||v_(t)))throw new Error((0,P.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Fp=function(n,e,t,r){if(!(r&&void 0===t||AC(t)))throw new Error((0,P.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},_o=function(n,e){if(".info"===Lt(e))throw new Error(n+" failed = Can't modify data under /.info/")},xC=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!v_(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),AC(n)}(t))throw new Error((0,P.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class M1{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function w_(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!hp(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function I0(n,e,t){w_(n,t),T0(n,r=>hp(r,e))}function ps(n,e,t){w_(n,t),T0(n,r=>ea(r,e)||ea(e,r))}function T0(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(kC(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function kC(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();uh&&cr("event: "+t.toString()),ip(r)}}}const D0="repo_interrupt";class MC{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new M1,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=wh(),this.transactionQueueTree_=new w0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function A0(n){const t=n.infoData_.getNode(new mn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Rh(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:A0(n)})}function S0(n,e,t,r,i){n.dataUpdateCount++;const a=new mn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const _=(0,P.UI)(t,E=>Qn(E));c=function C1(n,e,t,r){const i=mo(n,r);if(i){const a=Us(i),c=a.path,f=a.queryId,_=Bi(c,e),E=Pn.fromObject(t);return Vs(n,c,new Gc(Fu(f),_,E))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=Qn(t);c=yC(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,P.UI)(t,E=>Qn(E));c=function b1(n,e,t){const r=Pn.fromObject(t);return Tp(n,new Gc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=Qn(t);c=Ah(n.serverSyncTree_,a,_)}let f=a;c.length>0&&(f=Mh(n,a)),ps(n.eventQueue_,f,c)}function ju(n,e){x0(n,"connected",e),!1===e&&function PC(n){Bl(n,"onDisconnectEvents");const e=Rh(n),t=wh();Hr(n.onDisconnect_,ln(),(i,a)=>{const c=v0(i,a,n.serverSyncTree_,e);ji(t,i,c)});let r=[];Hr(t,ln(),(i,a)=>{r=r.concat(Ah(n.serverSyncTree_,i,a));const c=P0(n,i);Mh(n,c)}),n.onDisconnect_=wh(),ps(n.eventQueue_,ln(),r)}(n)}function x0(n,e,t){const r=new mn("/.info/"+e),i=Qn(t);n.infoData_.updateSnapshot(r,i);const a=Ah(n.infoSyncTree_,r,i);ps(n.eventQueue_,r,a)}function Vl(n){return n.nextWriteId_++}function Lp(n,e,t,r,i){Bl(n,"set",{path:e.toString(),value:t,priority:r});const a=Rh(n),c=Qn(t,r),f=p_(n.serverSyncTree_,e),_=__(c,f,a),E=Vl(n),T=h_(n.serverSyncTree_,e,_,E,!0);w_(n.eventQueue_,T),n.server_.put(e.toString(),c.val(!0),(N,O)=>{const j="ok"===N;j||Zr("set at "+e+" failed: "+N);const ie=Vu(n.serverSyncTree_,E,!j);ps(n.eventQueue_,e,ie),oa(0,i,N,O)});const S=P0(n,e);Mh(n,S),ps(n.eventQueue_,S,[])}function OC(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&$c(n.onDisconnect_,e),oa(0,t,r,i)})}function P1(n,e,t,r){const i=Qn(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,c)=>{"ok"===a&&ji(n.onDisconnect_,e,i),oa(0,r,a,c)})}function k0(n,e,t){let r;r=".info"===Lt(e._path)?Ul(n.infoSyncTree_,e,t):Ul(n.serverSyncTree_,e,t),I0(n.eventQueue_,e._path,r)}function Up(n){n.persistentConnection_&&n.persistentConnection_.interrupt(D0)}function Bl(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),cr(t,...e)}function oa(n,e,t,r){e&&ip(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const c=new Error(a);c.code=i,e(c)}})}function FC(n,e,t){return p_(n.serverSyncTree_,e,t)||Mt.EMPTY_NODE}function Vp(n,e=n.transactionQueueTree_){if(e||E_(n,e),Bu(e)){const t=M0(n,e);(0,P.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function U1(n,e,t){const r=t.map(E=>E.currentWriteId),i=FC(n,e,r);let a=i;const c=i.hash();for(let E=0;E<t.length;E++){const T=t[E];(0,P.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const S=Bi(e,T.path);a=a.updateChild(S,T.currentOutputSnapshotRaw)}const f=a.val(!0),_=e;n.server_.put(_.toString(),f,E=>{Bl(n,"transaction put response",{path:_.toString(),status:E});let T=[];if("ok"===E){const S=[];for(let N=0;N<t.length;N++)t[N].status=2,T=T.concat(Vu(n.serverSyncTree_,t[N].currentWriteId)),t[N].onComplete&&S.push(()=>t[N].onComplete(null,!0,t[N].currentOutputSnapshotResolved)),t[N].unwatcher();E_(n,xp(n.transactionQueueTree_,e)),Vp(n,n.transactionQueueTree_),ps(n.eventQueue_,e,T);for(let N=0;N<S.length;N++)ip(S[N])}else{if("datastale"===E)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{Zr("transaction at "+_.toString()+" failed: "+E);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=E}Mh(n,e)}},c)}(n,kh(e),t)}else Rp(e)&&Mp(e,t=>{Vp(n,t)})}function Mh(n,e){const t=R0(n,e),r=kh(t);return function LC(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const _=e[f],E=Bi(t,_.path);let S,T=!1;if((0,P.hu)(null!==E,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)T=!0,S=_.abortReason,i=i.concat(Vu(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)T=!0,S="maxretry",i=i.concat(Vu(n.serverSyncTree_,_.currentWriteId,!0));else{const N=FC(n,_.path,c);_.currentInputSnapshot=N;const O=e[f].update(N.val());if(void 0!==O){Pp("transaction failed: Data returned ",O,_.path);let j=Qn(O);"object"==typeof O&&null!=O&&(0,P.r3)(O,".priority")||(j=j.updatePriority(N.getPriority()));const _e=_.currentWriteId,Be=Rh(n),lt=__(j,N,Be);_.currentOutputSnapshotRaw=j,_.currentOutputSnapshotResolved=lt,_.currentWriteId=Vl(n),c.splice(c.indexOf(_e),1),i=i.concat(h_(n.serverSyncTree_,_.path,lt,_.currentWriteId,_.applyLocally)),i=i.concat(Vu(n.serverSyncTree_,_e,!0))}else T=!0,S="nodata",i=i.concat(Vu(n.serverSyncTree_,_.currentWriteId,!0))}ps(n.eventQueue_,t,i),i=[],T&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===S?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(S),!1,null)))}E_(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)ip(r[f]);Vp(n,n.transactionQueueTree_)}(n,M0(n,t),r),r}function R0(n,e){let t,r=n.transactionQueueTree_;for(t=Lt(e);null!==t&&void 0===Bu(r);)r=xp(r,t),t=Lt(e=An(e));return r}function M0(n,e){const t=[];return N0(n,e,t),t.sort((r,i)=>r.order-i.order),t}function N0(n,e,t){const r=Bu(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Mp(e,i=>{N0(n,i,t)})}function E_(n,e){const t=Bu(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,kp(e,t.length>0?t:void 0)}Mp(e,r=>{E_(n,r)})}function P0(n,e){const t=kh(R0(n,e)),r=xp(n.transactionQueueTree_,e);return function IC(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{O0(n,i)}),O0(n,r),E0(r,i=>{O0(n,i)}),t}function O0(n,e){const t=Bu(e);if(t){const r=[];let i=[],a=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,P.hu)(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):((0,P.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(Vu(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===a?kp(e,void 0):t.length=a+1,ps(n.eventQueue_,kh(e),i);for(let c=0;c<r.length;c++)ip(r[c])}}const F0=function(n,e){const t=B1(n),r=t.namespace;return"firebase.com"===t.domain&&fo(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&fo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Zr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Zm(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new mn(t.pathString)}},B1=function(n){let e="",t="",r="",i="",a="",c=!0,f="https",_=443;if("string"==typeof n){let E=n.indexOf("//");E>=0&&(f=n.substring(0,E-1),n=n.substring(E+2));let T=n.indexOf("/");-1===T&&(T=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(T,S)),T<S&&(i=function Bp(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(T,S)));const N=function V1(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Zr(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));E=e.indexOf(":"),E>=0?(c="https"===f||"wss"===f,_=parseInt(e.substring(E+1),10)):E=e.length;const O=e.slice(0,E);if("localhost"===O.toLowerCase())t="localhost";else if(O.split(".").length<=2)t=O;else{const j=e.indexOf(".");r=e.substring(0,j).toLowerCase(),t=e.substring(j+1),a=r}"ns"in N&&(a=N.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:c,scheme:f,pathString:i,namespace:a}};class jp{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,P.Pz)(this.snapshot.exportVal())}}class L0{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class b_{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,P.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class U0{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new P.BH;return OC(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){_o("OnDisconnect.remove",this._path);const e=new P.BH;return P1(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){_o("OnDisconnect.set",this._path),Za("OnDisconnect.set",e,this._path,!1);const t=new P.BH;return P1(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){_o("OnDisconnect.setWithPriority",this._path),Za("OnDisconnect.setWithPriority",e,this._path,!1),C0("OnDisconnect.setWithPriority",t,!1);const r=new P.BH;return function Et(n,e,t,r,i){const a=Qn(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(c,f)=>{"ok"===c&&ji(n.onDisconnect_,e,a),oa(0,i,c,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){_o("OnDisconnect.update",this._path),SC("OnDisconnect.update",e,this._path,!1);const t=new P.BH;return function O1(n,e,t,r){if((0,P.xb)(t))return cr("onDisconnect().update() called with empty data.  Don't do anything."),void oa(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Mr(t,(c,f)=>{const _=Qn(f);ji(n.onDisconnect_,Nn(e,c),_)}),oa(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class gs{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Bt(this._path)?null:dh(this._path)}get ref(){return new vo(this._repo,this._path)}get _queryIdentifier(){const e=vh(this._queryParams),t=fb(e);return"{}"===t?"default":t}get _queryObject(){return vh(this._queryParams)}isEqual(e){if(!((e=(0,P.m9)(e))instanceof gs))return!1;const t=this._repo===e._repo,r=hp(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Pv(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Zu(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function yo(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===ta){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==xl)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Va)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Sn){if(null!=e&&!Np(e)||null!=t&&!Np(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,P.hu)(n.getIndex()instanceof Hb||n.getIndex()===mp,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function C_(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class vo extends gs{constructor(e,t){super(e,t,new yh,!1)}get parent(){const e=qm(this._path);return null===e?null:new vo(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Kc{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new mn(e),r=Hu(this.ref,e);return new Kc(this._node.getChild(t),r,Sn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Kc(i,Hu(this.ref,r),Sn)))}hasChild(e){const t=new mn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function V0(n,e){return(n=(0,P.m9)(n))._checkNotDeleted("ref"),void 0!==e?Hu(n._root,e):n._root}function B0(n,e){(n=(0,P.m9)(n))._checkNotDeleted("refFromURL");const t=F0(e,n._repo.repoInfo_.nodeAdmin);xC("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&fo("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),V0(n,t.path.toString())}function Hu(n,e){return null===Lt((n=(0,P.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Fp("child","path",t,!1)):Fp("child","path",e,!1),new vo(n._repo,Nn(n._path,e));var t}function j0(n,e){n=(0,P.m9)(n),_o("set",n._path),Za("set",e,n._path,!1);const t=new P.BH;return Lp(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function QR(n,e){SC("update",e,n._path,!1);const t=new P.BH;return function WR(n,e,t,r){Bl(n,"update",{path:e.toString(),value:t});let i=!0;const a=Rh(n),c={};if(Mr(t,(f,_)=>{i=!1,c[f]=v0(Nn(e,f),Qn(_),n.serverSyncTree_,a)}),i)cr("update() called with empty data.  Don't do anything."),oa(0,r,"ok",void 0);else{const f=Vl(n),_=function E1(n,e,t,r){!function ZR(n,e,t,r){(0,P.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Wv(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Pn.fromObject(t);return Tp(n,new Gc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,f);w_(n.eventQueue_,_),n.server_.merge(e.toString(),t,(E,T)=>{const S="ok"===E;S||Zr("update at "+e+" failed: "+E);const N=Vu(n.serverSyncTree_,f,!S),O=N.length>0?Mh(n,e):e;ps(n.eventQueue_,O,N),oa(0,r,E,T)}),Mr(t,E=>{const T=P0(n,Nn(e,E));Mh(n,T)}),ps(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function JR(n){n=(0,P.m9)(n);const e=new b_(()=>{}),t=new Nh(e);return function GR(n,e,t){const r=function vC(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(E,T)=>{const S=Bi(E,t);r=r||Fl(T,S)});let i=n.syncPointTree_.get(t);i?r=r||Fl(i,ln()):(i=new hC,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,c=a?new Ol(r,!0,!1):null;return function aC(n){return vp(n.viewCache_)}(h0(i,e,Yv(n.pendingWriteTree_,e._path),a?c.getNode():Mt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Qn(i).withIndex(e._queryParams.getIndex());let c;if(f_(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())c=Ah(n.serverSyncTree_,e._path,a);else{const f=Dp(n.serverSyncTree_,e);c=yC(n.serverSyncTree_,e._path,a,f)}return ps(n.eventQueue_,e._path,c),Ul(n.serverSyncTree_,e,t,null,!0),a},i=>(Bl(n,"get for query "+(0,P.Pz)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Kc(r,new vo(n._repo,n._path),n._queryParams.getIndex()))}class Nh{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new jp("value",this,new Kc(e.snapshotNode,new vo(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new L0(this,e,t):null}matches(e){return e instanceof Nh&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Yc{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new L0(this,e,t):null}createEvent(e,t){(0,P.hu)(null!=e.childName,"Child events should have a childName.");const r=Hu(new vo(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new jp(e.type,this,new Kc(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Yc&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Zp(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,E=(T,S)=>{k0(n._repo,n,f),_(T,S)};E.userCallback=t.userCallback,E.context=t.context,t=E}const c=new b_(t,a||void 0),f="value"===e?new Nh(c):new Yc(e,c);return function F1(n,e,t){let r;r=".info"===Lt(e._path)?f_(n.infoSyncTree_,e,t):f_(n.serverSyncTree_,e,t),I0(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>k0(n._repo,n,f)}function Z0(n,e,t,r){return Zp(n,"value",e,t,r)}function H0(n,e,t,r){return Zp(n,"child_added",e,t,r)}function Ph(n,e,t,r){return Zp(n,"child_changed",e,t,r)}function VC(n,e,t,r){return Zp(n,"child_moved",e,t,r)}function BC(n,e,t,r){return Zp(n,"child_removed",e,t,r)}function jC(n,e,t){let r=null;const i=t?new b_(t):null;"value"===e?r=new Nh(i):e&&(r=new Yc(e,i)),k0(n._repo,n,r)}class aa{}class ZC extends aa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Za("endAt",this._value,e._path,!0);const t=qv(e._queryParams,this._value,this._key);if(C_(t),yo(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new gs(e._repo,e._path,t,e._orderByCalled)}}class Z1 extends aa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Za("endBefore",this._value,e._path,!1);const t=function Jm(n,e,t){let r,i;return n.index_===ta?("string"==typeof e&&(e=n1(e)),i=qv(n,e,t)):(r=null==t?xl:n1(t),i=qv(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(C_(t),yo(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new gs(e._repo,e._path,t,e._orderByCalled)}}class Qc extends aa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Za("startAt",this._value,e._path,!0);const t=$v(e._queryParams,this._value,this._key);if(C_(t),yo(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new gs(e._repo,e._path,t,e._orderByCalled)}}class $C extends aa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Za("startAfter",this._value,e._path,!1);const t=function a1(n,e,t){let r;if(n.index_===ta)"string"==typeof e&&(e=t1(e)),r=$v(n,e,t);else{let i;i=null==t?Va:t1(t),r=$v(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(C_(t),yo(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new gs(e._repo,e._path,t,e._orderByCalled)}}class qC extends aa{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new gs(e._repo,e._path,function s1(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class GC extends aa{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new gs(e._repo,e._path,function o1(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class $0 extends aa{constructor(e){super(),this._path=e}_apply(e){Zu(e,"orderByChild");const t=new mn(this._path);if(Bt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Hb(t),i=Nl(e._queryParams,r);return yo(i),new gs(e._repo,e._path,i,!0)}}class WC extends aa{_apply(e){Zu(e,"orderByKey");const t=Nl(e._queryParams,ta);return yo(t),new gs(e._repo,e._path,t,!0)}}class K1 extends aa{_apply(e){Zu(e,"orderByPriority");const t=Nl(e._queryParams,Sn);return yo(t),new gs(e._repo,e._path,t,!0)}}class Q1 extends aa{_apply(e){Zu(e,"orderByValue");const t=Nl(e._queryParams,mp);return yo(t),new gs(e._repo,e._path,t,!0)}}class J1 extends aa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Za("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ZC(this._value,this._key)._apply(new Qc(this._value,this._key)._apply(e))}}function la(n,...e){let t=(0,P.m9)(n);for(const r of e)t=r._apply(t);return t}(function _1(n){(0,P.hu)(!Cp,"__referenceConstructor has already been defined"),Cp=n})(vo),function v1(n){(0,P.hu)(!d_,"__referenceConstructor has already been defined"),d_=n}(vo);const G0={};function QC(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||fo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),cr("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,E,c=F0(a,i),f=c.repoInfo;"undefined"!=typeof process&&process.env&&(E=process.env.FIREBASE_DATABASE_EMULATOR_HOST),E?(_=!0,a=`http://${E}?ns=${f.namespace}`,c=F0(a,i),f=c.repoInfo):_=!c.repoInfo.secure;const T=i&&_?new Bc(Bc.OWNER):new Au(n.name,n.options,e);xC("Invalid Firebase Database URL",c),Bt(c.path)||fo("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function nA(n,e,t,r){let i=G0[e.name];i||(i={},G0[e.name]=i);let a=i[n.toURLString()];return a&&fo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new MC(n,false,t,r),i[n.toURLString()]=a,a}(f,n,T,new NR(n.name,t));return new XC(S,n)}class XC{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function NC(n,e,t){if(n.stats_=xu(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Xm(n.repoInfo_,(r,i,a,c)=>{S0(n,r,i,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>ju(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Rl(n.repoInfo_,e,(r,i,a,c)=>{S0(n,r,i,a,c)},r=>{ju(n,r)},r=>{!function N1(n,e){Mr(e,(t,r)=>{x0(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function ap(n,e){const t=n.toString();return op[t]||(op[t]=e()),op[t]}(n.repoInfo_,()=>new bh(n.stats_,n.server_)),n.infoData_=new l1,n.infoSyncTree_=new wr({startListening:(r,i,a,c)=>{let f=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(f=Ah(n.infoSyncTree_,r._path,_),setTimeout(()=>{c("ok")},0)),f},stopListening:()=>{}}),x0(n,"connected",!1),n.serverSyncTree_=new wr({startListening:(r,i,a,c)=>(n.server_.listen(r,a,i,(f,_)=>{const E=c(f,_);ps(n.eventQueue_,r._path,E)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new vo(this._repo,ln())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function tA(n,e){const t=G0[e];(!t||t[n.key]!==n)&&fo(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Up(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&fo("Cannot call "+e+" on a deleted database.")}}function eI(){Db.IS_TRANSPORT_INITIALIZED&&Zr("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function rA(){eI(),ku.forceDisallow()}function tI(){eI(),cp.forceDisallow(),ku.forceAllow()}function z0(n,e){LD(n,e)}const K0={".sv":"timestamp"};class Y0{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Rl.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Rl.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function nI(n){dv(Vi.SDK_VERSION),(0,Vi._registerComponent)(new Qo.wA("database",(e,{instanceIdentifier:t})=>QC(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Vi.registerVersion)(kt,"0.13.5",n),(0,Vi.registerVersion)(kt,"0.13.5","esm2017")}();const iI=new Jo.Yd("@firebase/database-compat"),dA=function(n){iI.warn("FIREBASE WARNING: "+n)};class fA{constructor(e){this._delegate=e}cancel(e){(0,P.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,P.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,P.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,P.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,P.Dv)("OnDisconnect.set",1,2,arguments.length),(0,P.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,P.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,P.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,dA("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,P.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class Oh{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,P.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class wo{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,P.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,P.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,P.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,P.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,P.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Fp("DataSnapshot.child","path",e,!1),new wo(this._database,this._delegate.child(e))}hasChild(e){return(0,P.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Fp("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,P.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,P.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,P.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new wo(this._database,t)))}hasChildren(){return(0,P.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,P.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,P.Dv)("DataSnapshot.ref",0,0,arguments.length),new Eo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class oi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,P.Dv)("Query.on",2,4,arguments.length),(0,P.Wj)("Query.on","callback",t,!1);const c=oi.getCancelAndContextArgs_("Query.on",r,i),f=(E,T)=>{t.call(c.context,new wo(this.database,E),T)};f.userCallback=t,f.context=c.context;const _=null===(a=c.cancel)||void 0===a?void 0:a.bind(c.context);switch(e){case"value":return Z0(this._delegate,f,_),t;case"child_added":return H0(this._delegate,f,_),t;case"child_removed":return BC(this._delegate,f,_),t;case"child_changed":return Ph(this._delegate,f,_),t;case"child_moved":return VC(this._delegate,f,_),t;default:throw new Error((0,P.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,P.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,P.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,P.Wj)("Query.off","callback",t,!0),(0,P.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,jC(this._delegate,e,i)}else jC(this._delegate,e)}get(){return JR(this._delegate).then(e=>new wo(this.database,e))}once(e,t,r,i){(0,P.Dv)("Query.once",1,4,arguments.length),(0,P.Wj)("Query.once","callback",t,!0);const a=oi.getCancelAndContextArgs_("Query.once",r,i),c=new P.BH,f=(E,T)=>{const S=new wo(this.database,E);t&&t.call(a.context,S,T),c.resolve(S)};f.userCallback=t,f.context=a.context;const _=E=>{a.cancel&&a.cancel.call(a.context,E),c.reject(E)};switch(e){case"value":Z0(this._delegate,f,_,{onlyOnce:!0});break;case"child_added":H0(this._delegate,f,_,{onlyOnce:!0});break;case"child_removed":BC(this._delegate,f,_,{onlyOnce:!0});break;case"child_changed":Ph(this._delegate,f,_,{onlyOnce:!0});break;case"child_moved":VC(this._delegate,f,_,{onlyOnce:!0});break;default:throw new Error((0,P.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,P.Dv)("Query.limitToFirst",1,1,arguments.length),new oi(this.database,la(this._delegate,function G1(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new qC(n)}(e)))}limitToLast(e){return(0,P.Dv)("Query.limitToLast",1,1,arguments.length),new oi(this.database,la(this._delegate,function W1(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new GC(n)}(e)))}orderByChild(e){return(0,P.Dv)("Query.orderByChild",1,1,arguments.length),new oi(this.database,la(this._delegate,function z1(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Fp("orderByChild","path",n,!1),new $0(n)}(e)))}orderByKey(){return(0,P.Dv)("Query.orderByKey",0,0,arguments.length),new oi(this.database,la(this._delegate,function zC(){return new WC}()))}orderByPriority(){return(0,P.Dv)("Query.orderByPriority",0,0,arguments.length),new oi(this.database,la(this._delegate,function Y1(){return new K1}()))}orderByValue(){return(0,P.Dv)("Query.orderByValue",0,0,arguments.length),new oi(this.database,la(this._delegate,function q0(){return new Q1}()))}startAt(e=null,t){return(0,P.Dv)("Query.startAt",0,2,arguments.length),new oi(this.database,la(this._delegate,function $1(n=null,e){return Op("startAt","key",e,!0),new Qc(n,e)}(e,t)))}startAfter(e=null,t){return(0,P.Dv)("Query.startAfter",0,2,arguments.length),new oi(this.database,la(this._delegate,function q1(n,e){return Op("startAfter","key",e,!0),new $C(n,e)}(e,t)))}endAt(e=null,t){return(0,P.Dv)("Query.endAt",0,2,arguments.length),new oi(this.database,la(this._delegate,function HC(n,e){return Op("endAt","key",e,!0),new ZC(n,e)}(e,t)))}endBefore(e=null,t){return(0,P.Dv)("Query.endBefore",0,2,arguments.length),new oi(this.database,la(this._delegate,function H1(n,e){return Op("endBefore","key",e,!0),new Z1(n,e)}(e,t)))}equalTo(e,t){return(0,P.Dv)("Query.equalTo",1,2,arguments.length),new oi(this.database,la(this._delegate,function KC(n,e){return Op("equalTo","key",e,!0),new J1(n,e)}(e,t)))}toString(){return(0,P.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,P.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,P.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof oi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,P.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,P.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,P.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Eo(this.database,new vo(this._delegate._repo,this._delegate._path))}}class Eo extends oi{constructor(e,t){super(e,new gs(t._repo,t._path,new yh,!1)),this.database=e,this._delegate=t}getKey(){return(0,P.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,P.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Eo(this.database,Hu(this._delegate,e))}getParent(){(0,P.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Eo(this.database,e):null}getRoot(){return(0,P.Dv)("Reference.root",0,0,arguments.length),new Eo(this.database,this._delegate.root)}set(e,t){(0,P.Dv)("Reference.set",1,2,arguments.length),(0,P.Wj)("Reference.set","onComplete",t,!0);const r=j0(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,P.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,dA("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}_o("Reference.update",this._delegate._path),(0,P.Wj)("Reference.update","onComplete",t,!0);const r=QR(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,P.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function YR(n,e,t){if(_o("setWithPriority",n._path),Za("setWithPriority",e,n._path,!1),C0("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new P.BH;return Lp(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,P.Dv)("Reference.remove",0,1,arguments.length),(0,P.Wj)("Reference.remove","onComplete",e,!0);const t=function j1(n){return _o("remove",n._path),j0(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,P.Dv)("Reference.transaction",1,3,arguments.length),(0,P.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,P.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,P.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function lA(n,e,t){var r;if(n=(0,P.m9)(n),_o("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new P.BH,f=Z0(n,()=>{});return function nr(n,e,t,r,i,a){Bl(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:Om(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=FC(n,e,void 0);c.currentInputSnapshot=f;const _=c.update(f.val());if(void 0===_)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Pp("transaction failed: Data returned ",_,c.path),c.status=0;const E=xp(n.transactionQueueTree_,e),T=Bu(E)||[];let S;T.push(c),kp(E,T),"object"==typeof _&&null!==_&&(0,P.r3)(_,".priority")?(S=(0,P.DV)(_,".priority"),(0,P.hu)(Np(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(p_(n.serverSyncTree_,e)||Mt.EMPTY_NODE).getPriority().val();const N=Rh(n),O=Qn(_,S),j=__(O,f,N);c.currentOutputSnapshotRaw=O,c.currentOutputSnapshotResolved=j,c.currentWriteId=Vl(n);const ie=h_(n.serverSyncTree_,e,j,c.currentWriteId,c.applyLocally);ps(n.eventQueue_,e,ie),Vp(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,E,T)=>{let S=null;_?a.reject(_):(S=new Kc(T,new vo(n._repo,n._path),Sn),a.resolve(new Y0(E,S)))},f,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new Oh(a.committed,new wo(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,P.Dv)("Reference.setPriority",1,2,arguments.length),(0,P.Wj)("Reference.setPriority","onComplete",t,!0);const r=function KR(n,e){n=(0,P.m9)(n),_o("setPriority",n._path),C0("setPriority",e,!1);const t=new P.BH;return Lp(n._repo,Nn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,P.Dv)("Reference.push",0,2,arguments.length),(0,P.Wj)("Reference.push","onComplete",t,!0);const r=function UC(n,e){n=(0,P.m9)(n),_o("push",n._path),Za("push",e,n._path,!0);const t=A0(n._repo),r=ra(t),i=Hu(n,r),a=Hu(n,r);let c;return c=null!=e?j0(a,e).then(()=>a):Promise.resolve(a),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new Eo(this.database,c));t&&i.then(()=>t(null),c=>t(c));const a=new Eo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return _o("Reference.onDisconnect",this._delegate._path),new fA(new U0(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Fh{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:rA,forceLongPolling:tI}}useEmulator(e,t,r={}){!function iA(n,e,t,r={}){(n=(0,P.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&fo("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&fo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Bc(Bc.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,P.Sg)(r.mockUserToken,n.app.options.projectId);a=new Bc(c)}!function eA(n,e,t,r){n.repoInfo_=new Zm(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,P.Dv)("database.ref",0,1,arguments.length),e instanceof Eo){const t=B0(this._delegate,e.toString());return new Eo(this,t)}{const t=V0(this._delegate,e);return new Eo(this,t)}}refFromURL(e){(0,P.Dv)("database.refFromURL",1,1,arguments.length);const r=B0(this._delegate,e);return new Eo(this,r)}goOffline(){return(0,P.Dv)("database.goOffline",0,0,arguments.length),function sA(n){(n=(0,P.m9)(n))._checkNotDeleted("goOffline"),Up(n._repo)}(this._delegate)}goOnline(){return(0,P.Dv)("database.goOnline",0,0,arguments.length),function W0(n){(n=(0,P.m9)(n))._checkNotDeleted("goOnline"),function L1(n){n.persistentConnection_&&n.persistentConnection_.resume(D0)}(n._repo)}(this._delegate)}}Fh.ServerValue={TIMESTAMP:function oA(){return K0}(),increment:n=>function aA(n){return{".sv":{increment:n}}}(n)};var gA=Object.freeze({__proto__:null,initStandalone:function pA({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){dv(t);const c=new Qo.zt("auth-internal",new Qo.H0("database-standalone"));return c.setComponent(new Qo.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Fh(QC(n,c,void 0,e,a),n),namespace:i}}});const mA=Fh.ServerValue;!function _A(n){n.INTERNAL.registerComponent(new Qo.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Fh(i,r)},"PUBLIC").setServiceProps({Reference:Eo,Query:oi,Database:Fh,DataSnapshot:wo,enableLogging:z0,INTERNAL:gA,ServerValue:mA}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.5")}(uv.Z);var $p=F(5363),sI=F(6063);class Q0 extends mi.x{constructor(e=1/0,t=1/0,r=sI.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let f=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)f=_;f&&r.splice(0,f+1)}}}function qp(n,e,t){var r,i;let a,c=!1;return n&&"object"==typeof n?(a=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,c=!!n.refCount,t=n.scheduler):a=null!=n?n:1/0,(0,hb.B)({connector:()=>new Q0(a,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}function Lh(n,e){return(0,su.m)(e)?Hn(()=>n,e):Hn(()=>n)}var J0=F(9468);F(5867);const TA=new Map,oI={activated:!1,tokenObservers:[]},ew={initialized:!1,enabled:!1};function $r(n){return TA.get(n)||oI}function ua(n,e){TA.set(n,e)}function I_(){return ew}class kA{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ge.Z)(function*(){t.stop();try{t.pending=new P.BH,yield function Yp(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new P.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ci=new P.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function nw(n){if(!$r(n).activated)throw Ci.create("use-before-activation",{appName:n.name})}function rw(n,e){return D_.apply(this,arguments)}function D_(){return(D_=(0,ge.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const O=yield c.getHeartbeatsHeader();O&&(a["X-Firebase-Client"]=O)}const f={method:"POST",body:JSON.stringify(e),headers:a};let _,E;try{_=yield fetch(n,f)}catch(O){throw Ci.create("fetch-network-error",{originalErrorMessage:null===(r=O)||void 0===r?void 0:r.message})}if(200!==_.status)throw Ci.create("fetch-status-error",{httpStatus:_.status});try{E=yield _.json()}catch(O){throw Ci.create("fetch-parse-error",{originalErrorMessage:null===(i=O)||void 0===i?void 0:i.message})}const T=E.ttl.match(/^([\d.]+)(s)$/);if(!T||!T[2]||isNaN(Number(T[1])))throw Ci.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${E.ttl}`});const S=1e3*Number(T[1]),N=Date.now();return{token:E.token,expireTimeMillis:N+S,issuedAtTimeMillis:N}})).apply(this,arguments)}function MA(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const eg="firebase-app-check-store";let Bs=null;function cI(){return Bs||(Bs=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(Ci.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(eg,{keyPath:"compositeKey"})}}catch(r){e(Ci.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Bs)}function Uh(){return(Uh=(0,ge.Z)(function*(n,e){const r=(yield cI()).transaction(eg,"readwrite"),a=r.objectStore(eg).put({compositeKey:n,value:e});return new Promise((c,f)=>{a.onsuccess=_=>{c()},r.onerror=_=>{var E;f(Ci.create("storage-set",{originalErrorMessage:null===(E=_.target.error)||void 0===E?void 0:E.message}))}})})).apply(this,arguments)}const Vh=new Jo.Yd("@firebase/app-check");function ow(n,e){return(0,P.hl)()?function tg(n,e){return function dI(n,e){return Uh.apply(this,arguments)}(function hI(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Vh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function LA(){return I_().enabled}function S_(){return ig.apply(this,arguments)}function ig(){return(ig=(0,ge.Z)(function*(){const n=I_();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const lw={error:"UNKNOWN_ERROR"};function uw(n){return P.US.encodeString(JSON.stringify(n),!1)}function x_(n){return cw.apply(this,arguments)}function cw(){return(cw=(0,ge.Z)(function*(n,e=!1){const t=n.app;nw(t);const r=$r(t);let a,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&k_(_)&&(i=_)}if(!e&&i&&k_(i))return{token:i.token};let f,c=!1;if(LA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=rw(MA(t,yield S_()),n.heartbeatServiceProvider).then(E=>(r.exchangeTokenPromise=void 0,E)),c=!0);const _=yield r.exchangeTokenPromise;return yield ow(t,_),ua(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),c=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Vh.warn(_.message):Vh.error(_),a=_}return i?(f={token:i.token},ua(t,Object.assign(Object.assign({},r),{token:i})),yield ow(t,i)):f=gI(a),c&&gw(t,f),f})).apply(this,arguments)}function hw(n,e){const t=$r(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ua(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function fw(n){const{app:e}=n,t=$r(e);let r=t.tokenRefresher;r||(r=function pw(n){const{app:e}=n;return new kA((0,ge.Z)(function*(){let r;if(r=$r(e).token?yield x_(n,!0):yield x_(n),r.error)throw r.error}),()=>!0,()=>{const t=$r(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ua(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function gw(n,e){const t=$r(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function k_(n){return n.expireTimeMillis-Date.now()>0}function gI(n){return{token:uw(lw),error:n}}class mI{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=$r(this.app);for(const t of e)hw(this.app,t.next);return Promise.resolve()}}const sg="app-check-internal";!function DI(){(0,Vi._registerComponent)(new Qo.wA("app-check",n=>function UA(n,e){return new mI(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(sg).initialize()})),(0,Vi._registerComponent)(new Qo.wA(sg,n=>function _I(n){return{getToken:e=>x_(n,e),addTokenListener:e=>function dw(n,e,t,r){const{app:i}=n,a=$r(i),c={next:t,error:r,type:e};if(ua(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,c]})),a.token&&k_(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),fw(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>fw(n))}(n,"INTERNAL",e),removeTokenListener:e=>hw(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Vi.registerVersion)("@firebase/app-check","0.5.12")}();class Xc{constructor(){return(0,nn.vb)("app-check")}}"undefined"!=typeof window&&window;var ag=F(127);const ww=new u.OlP("angularfire2.auth.use-emulator"),kI=new u.OlP("angularfire2.auth.settings"),O_=new u.OlP("angularfire2.auth.tenant-id"),RI=new u.OlP("angularfire2.auth.langugage-code"),MI=new u.OlP("angularfire2.auth.use-device-language"),NI=new u.OlP("angularfire.auth.persistence"),PI=(n,e,t,r,i,a,c,f)=>(0,Rr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),c)for(const[E,T]of Object.entries(c))_.settings[E]=T;return f&&_.setPersistence(f),_},[t,r,i,a,c,f]);let F_=(()=>{class n{constructor(t,r,i,a,c,f,_,E,T,S,N,O){const j=new mi.x,ie=tt(void 0).pipe((0,$p.Q)(c.outsideAngular),Hn(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,1121)))),(0,nt.U)(()=>(0,Rr.on)(t,a,r)),(0,nt.U)(_e=>PI(_e,a,f,E,T,S,_,N)),qp({bufferSize:1,refCount:!1}));if(Sr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=tt(null);else{ie.pipe(is()).subscribe();const Be=ie.pipe(Hn(Qe=>Qe.getRedirectResult().then(bt=>bt,()=>null)),nn.iC,qp({bufferSize:1,refCount:!1})),lt=ie.pipe(Hn(Qe=>new er.y(bt=>({unsubscribe:a.runOutsideAngular(()=>Qe.onAuthStateChanged(Ot=>bt.next(Ot),Ot=>bt.error(Ot),()=>bt.complete()))})))),Xe=ie.pipe(Hn(Qe=>new er.y(bt=>({unsubscribe:a.runOutsideAngular(()=>Qe.onIdTokenChanged(Ot=>bt.next(Ot),Ot=>bt.error(Ot),()=>bt.complete()))}))));this.authState=Be.pipe(Lh(lt),(0,J0.R)(c.outsideAngular),(0,$p.Q)(c.insideAngular)),this.user=Be.pipe(Lh(Xe),(0,J0.R)(c.outsideAngular),(0,$p.Q)(c.insideAngular)),this.idToken=this.user.pipe(Hn(Qe=>Qe?(0,en.D)(Qe.getIdToken()):tt(null))),this.idTokenResult=this.user.pipe(Hn(Qe=>Qe?(0,en.D)(Qe.getIdTokenResult()):tt(null))),this.credential=(0,Mm.T)(Be,j,this.authState.pipe(kr(Qe=>!Qe))).pipe((0,nt.U)(Qe=>(null==Qe?void 0:Qe.user)?Qe:null),(0,J0.R)(c.outsideAngular),(0,$p.Q)(c.insideAngular))}return(0,Rr.pX)(this,ie,a,{spy:{apply:(_e,Be,lt)=>{(_e.startsWith("signIn")||_e.startsWith("createUser"))&&lt.then(Xe=>j.next(Xe))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Rr.Dh),u.LFG(Rr.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(nn.HU),u.LFG(ww,8),u.LFG(kI,8),u.LFG(O_,8),u.LFG(RI,8),u.LFG(MI,8),u.LFG(NI,8),u.LFG(Xc,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),lM=(()=>{class n{constructor(){ag.Z.registerVersion("angularfire",nn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[F_]}),n})();function lg(n){return null==n}function XA(n){return"function"==typeof n.set}function L_(n,e){return XA(e)?e:n.ref(e)}function ed(n,e){if(function uM(n){return"string"==typeof n}(n))return e.stringCase();if(XA(n))return e.firebaseCase();if(function cM(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function jh(n,e,t="on",r=Ko.z){return new er.y(i=>{let a=null;return a=n[t](e,(c,f)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:f})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,nt.U)(i=>{const{snapshot:a,prevKey:c}=i;let f=null;return a.exists()&&(f=a.key),{type:e,payload:a,prevKey:c,key:f}}),(0,hb.B)())}function OI(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function FI(n,e){const{payload:t,prevKey:r,key:i}=e,a=OI(n,i),c=function Ew(n,e){if(lg(e))return 0;{const t=OI(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(_=>{const E={payload:_,type:"value",prevKey:f,key:_.key};return f=_.key,n=[...n,E],!1})}return n;case"child_added":if(a>-1){const f=n[a-1];(f&&f.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===i?e:f);case"child_moved":if(a>-1){const f=n.splice(a,1)[0];return(n=n.slice()).splice(c,0,f),n}return n;default:return n}}function bw(n){return(lg(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Cw(n,e,t){return function eS(n,e,t){return jh(n,"value","once",t).pipe(Hn(r=>{const i=[tt(r)];return e.forEach(a=>i.push(jh(n,a,"on",t))),(0,Mm.T)(...i).pipe(xr(FI,[]))}),lv())}(n,e=bw(e),t)}function tS(n,e,t){const r=(e=bw(e)).map(i=>jh(n,i,"on",t));return(0,Mm.T)(...r)}function nS(n,e){return function(r,i){return ed(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function dM(n){return function(t){return t?ed(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function VI(n,e){return function(){return jh(n,"value","on",e)}}const rS=new u.OlP("angularfire2.realtimeDatabaseURL"),fM=new u.OlP("angularfire2.database.use-emulator");let Tw=(()=>{class n{constructor(t,r,i,a,c,f,_,E,T,S,N,O,j,ie,_e){this.schedulers=f;const Be=_,lt=(0,Rr.on)(t,c,r);E&&PI(lt,c,T,N,O,j,S,ie),this.database=(0,Rr.cc)(`${lt.name}.database.${i}`,"AngularFireDatabase",lt.name,()=>{const Xe=c.runOutsideAngular(()=>lt.database(i||void 0));return Be&&Xe.useEmulator(...Be),Xe},[Be])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>L_(this.database,t));let a=i;return r&&(a=r(i)),function hM(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:nS(r,"update"),set:nS(r,"set"),push:i=>r.push(i),remove:dM(r),snapshotChanges:i=>Cw(n,i,t).pipe(nn.iC),stateChanges:i=>tS(n,i,t).pipe(nn.iC),auditTrail:i=>function LI(n,e,t){return function UI(n,e,t){return function U_(n,e){return jh(n,"value","on",e).pipe((0,nt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function Yo(...n){const e=(0,io.jO)(n);return(0,Kn.e)((t,r)=>{const i=n.length,a=new Array(i);let c=n.map(()=>!1),f=!1;for(let _=0;_<i;_++)(0,Ss.Xf)(n[_]).subscribe(new Zn.Q(r,E=>{a[_]=E,!f&&!c[_]&&(c[_]=!0,(f=c.every(Fo.y))&&(c=null))},OD.Z));t.subscribe(new Zn.Q(r,_=>{if(f){const E=[_,...a];r.next(e?e(...E):E)}}))})}(e),(0,nt.U)(([i,a])=>{const c=i.lastKeyToLoad,f=a.map(_=>_.key);return{actions:a,lastKeyToLoad:c,loadedKeys:f}}),function FD(n){return(0,Kn.e)((e,t)=>{let r=!1,i=0;e.subscribe(new Zn.Q(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,nt.U)(i=>i.actions))}(n,tS(n,e).pipe(xr((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(nn.iC),valueChanges:(i,a)=>Cw(n,i,t).pipe((0,nt.U)(f=>f.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),nn.iC)}}(a,this)}object(t){return function Iw(n,e){return{query:n,snapshotChanges:()=>VI(n,e.schedulers.outsideAngular)().pipe(nn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>VI(n,e.schedulers.outsideAngular)().pipe(nn.iC,(0,nt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>L_(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Rr.Dh),u.LFG(Rr.xv,8),u.LFG(rS,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(nn.HU),u.LFG(fM,8),u.LFG(F_,8),u.LFG(ww,8),u.LFG(kI,8),u.LFG(O_,8),u.LFG(RI,8),u.LFG(MI,8),u.LFG(NI,8),u.LFG(Xc,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Dw=(()=>{class n{constructor(){ag.Z.registerVersion("angularfire",nn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Tw]}),n})();function Aw(){return(0,Kn.e)((n,e)=>{let t,r=!1;n.subscribe(new Zn.Q(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var it,js="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},jl={},Sw=Sw||{},Rt=js||self;function Zh(){}function V_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Hh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var B_="closure_uid_"+(1e9*Math.random()>>>0),BI=0;function sS(n,e,t){return n.call.apply(n.bind,arguments)}function oS(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Nr(n,e,t){return(Nr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?sS:oS).apply(null,arguments)}function ms(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ai(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[i].apply(r,c)}}function td(){this.s=this.s,this.o=this.o}var jI={};td.prototype.s=!1,td.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function iS(n){return Object.prototype.hasOwnProperty.call(n,B_)&&n[B_]||(n[B_]=++BI)}(this);delete jI[n]}},td.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ZI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},HI=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function qI(n){return Array.prototype.concat.apply([],arguments)}function GI(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function ug(n){return/^[\s\xa0]*$/.test(n)}var Ii,xw=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Hi(n,e){return-1!=n.indexOf(e)}function kw(n,e){return n<e?-1:n>e?1:0}e:{var $h=Rt.navigator;if($h){var j_=$h.userAgent;if(j_){Ii=j_;break e}}Ii=""}function Z_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function WI(n){const e={};for(const t in n)e[t]=n[t];return e}var Rw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Mw(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<Rw.length;a++)t=Rw[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Nw(n){return Nw[" "](n),n}Nw[" "]=Zh;var Fw,n,pM=Hi(Ii,"Opera"),cg=Hi(Ii,"Trident")||Hi(Ii,"MSIE"),Pw=Hi(Ii,"Edge"),Ow=Pw||cg,zI=Hi(Ii,"Gecko")&&!(Hi(Ii.toLowerCase(),"webkit")&&!Hi(Ii,"Edge"))&&!(Hi(Ii,"Trident")||Hi(Ii,"MSIE"))&&!Hi(Ii,"Edge"),uS=Hi(Ii.toLowerCase(),"webkit")&&!Hi(Ii,"Edge");function cS(){var n=Rt.document;return n?n.documentMode:void 0}e:{var KI="",YI=(n=Ii,zI?/rv:([^\);]+)(\)|;)/.exec(n):Pw?/Edge\/([\d\.]+)/.exec(n):cg?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):uS?/WebKit\/(\S+)/.exec(n):pM?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(YI&&(KI=YI?YI[1]:""),cg){var QI=cS();if(null!=QI&&QI>parseFloat(KI)){Fw=String(QI);break e}}Fw=KI}var dS={};var XI=Rt.document&&cg&&(cS()||parseInt(Fw,10))||void 0,nd=function(){if(!Rt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Rt.addEventListener("test",Zh,e),Rt.removeEventListener("test",Zh,e)}catch(t){}return n}();function li(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function rd(n,e){if(li.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(zI){e:{try{Nw(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Uw[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&rd.Z.h.call(this)}}li.prototype.h=function(){this.defaultPrevented=!0},ai(rd,li);var Uw={2:"touch",3:"pen",4:"mouse"};rd.prototype.h=function(){rd.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var dg="closure_listenable_"+(1e6*Math.random()|0),Vw=0;function Bw(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++Vw,this.ca=this.fa=!1}function hg(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function fg(n){this.src=n,this.g={},this.h=0}function eT(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=ZI(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(hg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function tT(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}fg.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=tT(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new Bw(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var nT="closure_lm_"+(1e6*Math.random()|0),rT={};function hS(n,e,t,r,i){if(r&&r.once)return jw(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)hS(n,e[a],t,r,i);return null}return t=G_(t),n&&n[dg]?n.N(e,t,Hh(r)?!!r.capture:!!r,i):fS(n,e,t,!1,r,i)}function fS(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=Hh(i)?!!i.capture:!!i,f=$_(n);if(f||(n[nT]=f=new fg(n)),(t=f.add(e,t,r,c,a)).proxy)return t;if(r=function gM(){var e=pS;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)nd||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(sT(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function jw(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)jw(n,e[a],t,r,i);return null}return t=G_(t),n&&n[dg]?n.O(e,t,Hh(r)?!!r.capture:!!r,i):fS(n,e,t,!0,r,i)}function iT(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)iT(n,e[a],t,r,i);else r=Hh(r)?!!r.capture:!!r,t=G_(t),n&&n[dg]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=tT(a=n.g[e],t,r,i))&&(hg(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=$_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=tT(e,t,r,i)),(t=-1<n?e[n]:null)&&Zw(t))}function Zw(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[dg])eT(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(sT(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=$_(e))?(eT(t,n),0==t.h&&(t.src=null,e[nT]=null)):hg(n)}}}function sT(n){return n in rT?rT[n]:rT[n]="on"+n}function pS(n,e){if(n.ca)n=!0;else{e=new rd(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Zw(n),n=t.call(r,e)}return n}function $_(n){return(n=n[nT])instanceof fg?n:null}var q_="__closure_events_fn_"+(1e9*Math.random()>>>0);function G_(n){return"function"==typeof n?n:(n[q_]||(n[q_]=function(e){return n.handleEvent(e)}),n[q_])}function qr(){td.call(this),this.i=new fg(this),this.P=this,this.I=null}function ui(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new li(e,n);else if(e instanceof li)e.target=e.target||n;else{var i=e;Mw(e=new li(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=pg(c,r,!0,e)&&i}if(i=pg(c=e.g=n,r,!0,e)&&i,i=pg(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=pg(c=e.g=t[a],r,!1,e)&&i}function pg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.ca&&c.capture==t){var f=c.listener,_=c.ia||c.src;c.fa&&eT(n.i,c),i=!1!==f.call(_,r)&&i}}return i&&!r.defaultPrevented}ai(qr,td),qr.prototype[dg]=!0,qr.prototype.removeEventListener=function(n,e,t,r){iT(this,n,e,t,r)},qr.prototype.M=function(){if(qr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)hg(t[r]);delete n.g[e],n.h--}}this.I=null},qr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},qr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var qh=Rt.JSON.stringify;function gS(){var n=aT;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var $w,gg=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new mS,n=>n.reset());class mS{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function _S(n){Rt.setTimeout(()=>{throw n},0)}function Hw(n,e){$w||function mM(){var n=Rt.Promise.resolve(void 0);$w=function(){n.then(yS)}}(),qw||($w(),qw=!0),aT.add(n,e)}var qw=!1,aT=new class oT{constructor(){this.h=this.g=null}add(e,t){const r=gg.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function yS(){for(var n;n=gS();){try{n.h.call(n.g)}catch(t){_S(t)}var e=gg;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}qw=!1}function W_(n,e){qr.call(this),this.h=n||1,this.g=e||Rt,this.j=Nr(this.kb,this),this.l=Date.now()}function Gw(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Ww(n,e,t){if("function"==typeof n)t&&(n=Nr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Nr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Rt.setTimeout(n,e||0)}function lT(n){n.g=Ww(()=>{n.g=null,n.i&&(n.i=!1,lT(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ai(W_,qr),(it=W_.prototype).da=!1,it.S=null,it.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ui(this,"tick"),this.da&&(Gw(this),this.start()))}},it.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},it.M=function(){W_.Z.M.call(this),Gw(this),delete this.g};class vS extends td{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:lT(this)}M(){super.M(),this.g&&(Rt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function z_(n){td.call(this),this.h=n,this.g={}}ai(z_,td);var wS=[];function ES(n,e,t,r){Array.isArray(t)||(t&&(wS[0]=t.toString()),t=wS);for(var i=0;i<t.length;i++){var a=hS(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function bS(n){Z_(n.g,function(e,t){this.g.hasOwnProperty(t)&&Zw(e)},n),n.g={}}function zw(){this.g=!0}function mg(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function vM(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return qh(t)}catch(f){return e}}(n,t)+(r?" "+r:"")})}z_.prototype.M=function(){z_.Z.M.call(this),bS(this)},z_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zw.prototype.Aa=function(){this.g=!1},zw.prototype.info=function(){};var s={},o=null;function l(){return o=o||new qr}function d(n){li.call(this,s.Ma,n)}function h(n){const e=l();ui(e,new d(e,n))}function m(n,e){li.call(this,s.STAT_EVENT,n),this.stat=e}function v(n){const e=l();ui(e,new m(e,n))}function b(n,e){li.call(this,s.Na,n),this.size=e}function C(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Rt.setTimeout(function(){n()},e)}s.Ma="serverreachability",ai(d,li),s.STAT_EVENT="statevent",ai(m,li),s.Na="timingevent",ai(b,li);var x={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},R={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function U(){}function J(){}U.prototype.h=null;var st,me={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Fe(){li.call(this,"d")}function He(){li.call(this,"c")}function Ce(){}function ht(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new z_(this),this.P=_n,this.W=new W_(n=Ow?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new $t}function $t(){this.i=null,this.g="",this.h=!1}ai(Fe,li),ai(He,li),ai(Ce,U),Ce.prototype.g=function(){return new XMLHttpRequest},Ce.prototype.i=function(){return{}},st=new Ce;var _n=45e3,$i={},Ha={};function _g(n,e,t){n.K=1,n.v=hT(od(e)),n.s=t,n.U=!0,K_(n,null)}function K_(n,e){n.F=Date.now(),id(n),n.A=od(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),TM(t.h,"t",r),n.C=0,t=n.l.H,n.h=new $t,n.g=zM(n.l,t?e:null,!n.s),0<n.O&&(n.L=new vS(Nr(n.Ia,n,n.g),n.O)),ES(n.V,n.g,"readystatechange",n.gb),e=n.H?WI(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),h(1),function CS(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",f=a.split("&"),_=0;_<f.length;_++){var E=f[_].split("=");if(1<E.length){var T=E[0];E=E[1];var S=T.split("_");c=2<=S.length&&"type"==S[1]?c+(T+"=")+E+"&":c+(T+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Y_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Q_(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Kw(n,t),i==Ha){4==e&&(n.o=4,v(14),r=!1),mg(n.j,n.m,null,"[Incomplete Response]");break}if(i==$i){n.o=4,v(15),mg(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}mg(n.j,n.m,i,null),IS(n,i)}Y_(n)&&i!=Ha&&i!=$i&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,v(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),OS(e),e.L=!0,v(11))):(mg(n.j,n.m,t,"[Invalid Chunked Response]"),yg(n),sd(n))}function Kw(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ha:(t=Number(e.substring(t,r)),isNaN(t)?$i:(r+=1)+t>e.length?Ha:(e=e.substr(r,t),n.C=r+t,e))}function id(n){n.Y=Date.now()+n.P,J_(n,n.P)}function J_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=C(Nr(n.eb,n),e)}function Gh(n){n.B&&(Rt.clearTimeout(n.B),n.B=null)}function sd(n){0==n.l.G||n.I||$M(n.l,n)}function yg(n){Gh(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Gw(n.W),bS(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function IS(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||AS(t.i,n)))if(t.I=n.N,!n.J&&AS(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(E){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=C(Nr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;yT(t),mT(t)}PS(t),v(18)}if(1>=SM(t.i)&&t.ka){try{t.ka()}catch(E){}t.ka=void 0}}else Eg(t,11)}else if((n.J||t.g==n)&&yT(t),!ug(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let E=i[e];if(t.U=E[0],E=E[1],2==t.G)if("c"==E[0]){t.J=E[1],t.la=E[2];const T=E[3];null!=T&&(t.ma=T,t.h.info("VER="+t.ma));const S=E[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const N=E[5];null!=N&&"number"==typeof N&&0<N&&(t.K=r=1.5*N,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const O=n.g;if(O){const j=O.g?O.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(j){var a=r.i;!a.g&&(Hi(j,"spdy")||Hi(j,"quic")||Hi(j,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(SS(a,a.h),a.h=null))}if(r.D){const ie=O.g?O.g.getResponseHeader("X-HTTP-Session-Id"):null;ie&&(r.sa=ie,rr(r.F,r.D,ie))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=WM(r,r.H?r.la:null,r.W),c.J){xM(r.i,c);var f=c,_=r.K;_&&f.setTimeout(_),f.B&&(Gh(f),id(f)),r.g=c}else ZM(r);0<t.l.length&&_T(t)}else"stop"!=E[0]&&"close"!=E[0]||Eg(t,7);else 3==t.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?Eg(t,7):MS(t):"noop"!=E[0]&&t.j&&t.j.wa(E),t.A=0)}h(4)}catch(E){}}function TS(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(V_(n)||"string"==typeof n)HI(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(V_(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function SL(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(V_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function X_(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof X_)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function DS(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];vg(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)vg(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function vg(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(it=ht.prototype).setTimeout=function(n){this.P=n},it.gb=function(n){n=n.target;const e=this.L;e&&3==ad(n)?e.l():this.Ia(n)},it.Ia=function(n){try{if(n==this.g)e:{const T=ad(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>T)&&(3!=T||Ow||this.g&&(this.h.h||this.g.ga()||LM(this.g)))){this.I||4!=T||7==e||h(8==e||0>=S?3:2),Gh(this);var t=this.g.ba();this.N=t;t:if(Y_(this)){var r=LM(this.g);n="";var i=r.length,a=4==ad(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){yg(this),sd(this);var c="";break t}this.h.i=new Rt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function _M(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.X,T,t),this.i){if(this.$&&!this.J){t:{if(this.g){var f,_=this.g;if((f=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ug(f)){var E=f;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,v(12),yg(this),sd(this);break e}mg(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,IS(this,t)}this.U?(Q_(this,T,c),Ow&&this.i&&3==T&&(ES(this.V,this.W,"tick",this.fb),this.W.start())):(mg(this.j,this.m,c,null),IS(this,c)),4==T&&yg(this),this.i&&!this.I&&(4==T?$M(this.l,this):(this.i=!1,id(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,v(12)):(this.o=0,v(13)),yg(this),sd(this)}}}catch(T){}},it.fb=function(){if(this.g){var n=ad(this.g),e=this.g.ga();this.C<e.length&&(Gh(this),Q_(this,n,e),this.i&&4!=n&&id(this))}},it.cancel=function(){this.I=!0,yg(this)},it.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function yM(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(h(3),v(17)),yg(this),this.o=2,sd(this)):J_(this,this.Y-n)},(it=X_.prototype).R=function(){DS(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},it.T=function(){return DS(this),this.g.concat()},it.get=function(n,e){return vg(this.h,n)?this.h[n]:e},it.set=function(n,e){vg(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},it.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var wM=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function wg(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof wg){this.g=void 0!==e?e:n.g,uT(this,n.j),this.s=n.s,cT(this,n.i),dT(this,n.m),this.l=n.l,e=n.h;var t=new Jw;t.i=e.i,e.g&&(t.g=new X_(e.g),t.h=e.h),EM(this,t),this.o=n.o}else n&&(t=String(n).match(wM))?(this.g=!!e,uT(this,t[1]||"",!0),this.s=Yw(t[2]||""),cT(this,t[3]||"",!0),dT(this,t[4]),this.l=Yw(t[5]||"",!0),EM(this,t[6]||"",!0),this.o=Yw(t[7]||"")):(this.g=!!e,this.h=new Jw(null,this.g))}function od(n){return new wg(n)}function uT(n,e,t){n.j=t?Yw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function cT(n,e,t){n.i=t?Yw(e,!0):e}function dT(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function EM(n,e,t){e instanceof Jw?(n.h=e,function LL(n,e){e&&!n.j&&(Wh(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(CM(this,r),TM(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Qw(e,OL)),n.h=new Jw(e,n.g))}function rr(n,e,t){n.h.set(e,t)}function hT(n){return rr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Yw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Qw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,ML),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ML(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}wg.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Qw(e,bM,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Qw(e,bM,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Qw(t,"/"==t.charAt(0)?PL:NL,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Qw(t,FL)),n.join("")};var bM=/[#\/\?@]/g,NL=/[#\?:]/g,PL=/[#\?]/g,OL=/[#\?@]/g,FL=/#/g;function Jw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Wh(n){n.g||(n.g=new X_,n.h=0,n.i&&function xL(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function CM(n,e){Wh(n),e=ey(n,e),vg(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,vg((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&DS(n)))}function IM(n,e){return Wh(n),e=ey(n,e),vg(n.g.h,e)}function TM(n,e,t){CM(n,e),0<t.length&&(n.i=null,n.g.set(ey(n,e),GI(t)),n.h+=t.length)}function ey(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function DM(n){this.l=n||VL,n=Rt.PerformanceNavigationTiming?0<(n=Rt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Rt.g&&Rt.g.Ea&&Rt.g.Ea()&&Rt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(it=Jw.prototype).add=function(n,e){Wh(this),this.i=null,n=ey(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},it.forEach=function(n,e){Wh(this),this.g.forEach(function(t,r){HI(t,function(i){n.call(e,i,r,this)},this)},this)},it.T=function(){Wh(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},it.R=function(n){Wh(this);var e=[];if("string"==typeof n)IM(this,n)&&(e=qI(e,this.g.get(ey(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=qI(e,n[t])}return e},it.set=function(n,e){return Wh(this),this.i=null,IM(this,n=ey(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},it.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},it.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var c=i;""!==r[a]&&(c+="="+encodeURIComponent(String(r[a]))),n.push(c)}}return this.i=n.join("&")};var VL=10;function AM(n){return!!n.h||!!n.g&&n.g.size>=n.j}function SM(n){return n.h?1:n.g?n.g.size:0}function AS(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function SS(n,e){n.g?n.g.add(e):n.h=e}function xM(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function kM(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return GI(n.i)}function xS(){}function BL(){this.g=new xS}function jL(n,e,t){const r=t||"";try{TS(n,function(i,a){let c=i;Hh(i)&&(c=qh(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function fT(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function Xw(n){this.l=n.$b||null,this.j=n.ib||!1}function pT(n,e){qr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=kS,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}DM.prototype.cancel=function(){if(this.i=kM(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},xS.prototype.stringify=function(n){return Rt.JSON.stringify(n,void 0)},xS.prototype.parse=function(n){return Rt.JSON.parse(n,void 0)},ai(Xw,U),Xw.prototype.g=function(){return new pT(this.l,this.j)},Xw.prototype.i=function(n){return function(){return n}}({}),ai(pT,qr);var kS=0;function RM(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function eE(n){n.readyState=4,n.l=null,n.j=null,n.A=null,tE(n)}function tE(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(it=pT.prototype).open=function(n,e){if(this.readyState!=kS)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,tE(this)},it.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Rt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},it.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,eE(this)),this.readyState=kS},it.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,tE(this)),this.g&&(this.readyState=3,tE(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Rt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;RM(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},it.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?eE(this):tE(this),3==this.readyState&&RM(this)}},it.Ua=function(n){this.g&&(this.response=this.responseText=n,eE(this))},it.Ta=function(n){this.g&&(this.response=n,eE(this))},it.ha=function(){this.g&&eE(this)},it.setRequestHeader=function(n,e){this.v.append(n,e)},it.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},it.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(pT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var HL=Rt.JSON.parse;function Gr(n){qr.call(this),this.headers=new X_,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=MM,this.K=this.L=!1}ai(Gr,qr);var MM="",$L=/^https?$/i,qL=["POST","PUT"];function WL(n){return"content-type"==n.toLowerCase()}function NM(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,PM(n),gT(n)}function PM(n){n.D||(n.D=!0,ui(n,"complete"),ui(n,"error"))}function OM(n){if(n.h&&void 0!==Sw&&(!n.C[1]||4!=ad(n)||2!=n.ba()))if(n.v&&4==ad(n))Ww(n.Fa,0,n);else if(ui(n,"readystatechange"),4==ad(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(wM)[1]||null;if(!i&&Rt.self&&Rt.self.location){var a=Rt.self.location.protocol;i=a.substr(0,a.length-1)}r=!$L.test(i?i.toLowerCase():"")}t=r}if(t)ui(n,"complete"),ui(n,"success");else{n.m=6;try{var c=2<ad(n)?n.g.statusText:""}catch(_){c=""}n.j=c+" ["+n.ba()+"]",PM(n)}}finally{gT(n)}}}function gT(n,e){if(n.g){FM(n);const t=n.g,r=n.C[0]?Zh:null;n.g=null,n.C=null,e||ui(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function FM(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Rt.clearTimeout(n.A),n.A=null)}function ad(n){return n.g?n.g.readyState:0}function LM(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case MM:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function RS(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function zL(n){let e="";return Z_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):rr(n,e,t))}function nE(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function UM(n){this.za=0,this.l=[],this.h=new zw,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=nE("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=nE("baseRetryDelayMs",5e3,n),this.$a=nE("retryDelaySeedMs",1e4,n),this.Ya=nE("forwardChannelMaxRetries",2,n),this.ra=nE("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new DM(n&&n.concurrentRequestLimit),this.Ca=new BL,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function MS(n){if(VM(n),3==n.G){var e=n.V++,t=od(n.F);rr(t,"SID",n.J),rr(t,"RID",e),rr(t,"TYPE","terminate"),rE(n,t),(e=new ht(n,n.h,e,void 0)).K=2,e.v=hT(od(t)),t=!1,Rt.navigator&&Rt.navigator.sendBeacon&&(t=Rt.navigator.sendBeacon(e.v.toString(),"")),!t&&Rt.Image&&((new Image).src=e.v,t=!0),t||(e.g=zM(e.l,null),e.g.ea(e.v)),e.F=Date.now(),id(e)}GM(n)}function mT(n){n.g&&(OS(n),n.g.cancel(),n.g=null)}function VM(n){mT(n),n.u&&(Rt.clearTimeout(n.u),n.u=null),yT(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Rt.clearTimeout(n.m),n.m=null)}function NS(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&_T(n)}function _T(n){AM(n.i)||n.m||(n.m=!0,Hw(n.Ha,n),n.C=0)}function BM(n,e){var t;t=e?e.m:n.V++;const r=od(n.F);rr(r,"SID",n.J),rr(r,"RID",t),rr(r,"AID",n.U),rE(n,r),n.o&&n.s&&RS(r,n.o,n.s),t=new ht(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=jM(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),SS(n.i,t),_g(t,r,e)}function rE(n,e){n.j&&TS({},function(t,r){rr(e,r,t)})}function jM(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Nr(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].h,c.push("ofs="+a)):a=0:c.push("ofs="+a);let f=!0;for(let _=0;_<t;_++){let E=i[_].h;const T=i[_].g;if(E-=a,0>E)a=Math.max(0,i[_].h-100),f=!1;else try{jL(T,c,"req"+E+"_")}catch(S){r&&r(T)}}if(f){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function ZM(n){n.g||n.u||(n.Y=1,Hw(n.Ga,n),n.A=0)}function PS(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=C(Nr(n.Ga,n),qM(n,n.A)),n.A++,0))}function OS(n){null!=n.B&&(Rt.clearTimeout(n.B),n.B=null)}function HM(n){n.g=new ht(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=od(n.oa);rr(e,"RID","rpc"),rr(e,"SID",n.J),rr(e,"CI",n.N?"0":"1"),rr(e,"AID",n.U),rE(n,e),rr(e,"TYPE","xmlhttp"),n.o&&n.s&&RS(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=hT(od(e)),t.s=null,t.U=!0,K_(t,n)}function yT(n){null!=n.v&&(Rt.clearTimeout(n.v),n.v=null)}function $M(n,e){var t=null;if(n.g==e){yT(n),OS(n),n.g=null;var r=2}else{if(!AS(n.i,e))return;t=e.D,xM(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ui(r=l(),new b(r,t,e,i)),_T(n)}else ZM(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function KL(n,e){return!(SM(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=C(Nr(n.Ha,n,e),qM(n,n.C)),n.C++,0)))}(n,e)||2==r&&PS(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Eg(n,5);break;case 4:Eg(n,10);break;case 3:Eg(n,6);break;default:Eg(n,2)}}function qM(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Eg(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Nr(n.jb,n);t||(t=new wg("//www.google.com/images/cleardot.gif"),Rt.location&&"http"==Rt.location.protocol||uT(t,"https"),hT(t)),function ZL(n,e){const t=new zw;if(Rt.Image){const r=new Image;r.onload=ms(fT,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ms(fT,t,r,"TestLoadImage: error",!1,e),r.onabort=ms(fT,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ms(fT,t,r,"TestLoadImage: timeout",!1,e),Rt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else v(2);n.G=0,n.j&&n.j.va(e),GM(n),VM(n)}function GM(n){n.G=0,n.I=-1,n.j&&((0!=kM(n.i).length||0!=n.l.length)&&(n.i.i.length=0,GI(n.l),n.l.length=0),n.j.ua())}function WM(n,e,t){let r=function kL(n){return n instanceof wg?od(n):new wg(n,void 0)}(t);if(""!=r.i)e&&cT(r,e+"."+r.i),dT(r,r.m);else{const i=Rt.location;r=function RL(n,e,t,r){var i=new wg(null,void 0);return n&&uT(i,n),e&&cT(i,e),t&&dT(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Z_(n.aa,function(i,a){rr(r,a,i)}),t=n.sa,(e=n.D)&&t&&rr(r,e,t),rr(r,"VER",n.ma),rE(n,r),r}function zM(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Gr(t&&n.Ba&&!n.qa?new Xw({ib:!0}):n.qa)).L=n.H,e}function KM(){}function vT(){if(cg&&!(10<=Number(XI)))throw Error("Environmental error: no available transport.")}function ca(n,e){qr.call(this),this.g=new UM(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!ug(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ug(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ty(this)}function YM(n){Fe.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function QM(){He.call(this),this.status=1}function ty(n){this.g=n}(it=Gr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():st.g(),this.C=function G(n){return n.h||(n.h=n.i())}(this.u?this.u:st),this.g.onreadystatechange=Nr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void NM(this,a)}n=t||"";const i=new X_(this.headers);r&&TS(r,function(a,c){i.set(c,a)}),r=function $I(n){e:{var e=WL;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Rt.FormData&&n instanceof Rt.FormData,!(0<=ZI(qL,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,c){this.g.setRequestHeader(c,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{FM(this),0<this.B&&((this.K=function GL(n){return cg&&function H_(){return function lS(n){var e=dS;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=xw(String(Fw)).split("."),t=xw("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",a=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=kw(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||kw(0==i[2].length,0==a[2].length)||kw(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Nr(this.pa,this)):this.A=Ww(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){NM(this,a)}},it.pa=function(){void 0!==Sw&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ui(this,"timeout"),this.abort(8))},it.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ui(this,"complete"),ui(this,"abort"),gT(this))},it.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gT(this,!0)),Gr.Z.M.call(this)},it.Fa=function(){this.s||(this.F||this.v||this.l?OM(this):this.cb())},it.cb=function(){OM(this)},it.ba=function(){try{return 2<ad(this)?this.g.status:-1}catch(n){return-1}},it.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},it.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),HL(e)}},it.Da=function(){return this.m},it.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(it=UM.prototype).ma=8,it.G=1,it.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},it.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new ht(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=WI(a),Mw(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=jM(this,i,e),rr(t=od(this.F),"RID",n),rr(t,"CVER",22),this.D&&rr(t,"X-HTTP-Session-Id",this.D),rE(this,t),this.o&&a&&RS(t,this.o,a),SS(this.i,i),this.Ra&&rr(t,"TYPE","init"),this.ja?(rr(t,"$req",e),rr(t,"SID","null"),i.$=!0,_g(i,t,null)):_g(i,t,e),this.G=2}}else 3==this.G&&(n?BM(this,n):0==this.l.length||AM(this.i)||BM(this))},it.Ga=function(){if(this.u=null,HM(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=C(Nr(this.bb,this),n)}},it.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,v(10),mT(this),HM(this))},it.ab=function(){null!=this.v&&(this.v=null,mT(this),PS(this),v(19))},it.jb=function(n){n?(this.h.info("Successfully pinged google.com"),v(2)):(this.h.info("Failed to ping google.com"),v(1))},(it=KM.prototype).xa=function(){},it.wa=function(){},it.va=function(){},it.ua=function(){},it.Oa=function(){},vT.prototype.g=function(n,e){return new ca(n,e)},ai(ca,qr),ca.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Hw(Nr(n.hb,n,e))),v(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=WM(n,null,n.W),_T(n)},ca.prototype.close=function(){MS(this.g)},ca.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,NS(this.g,e)}else this.v?((e={}).__data__=qh(n),NS(this.g,e)):NS(this.g,n)},ca.prototype.M=function(){this.g.j=null,delete this.j,MS(this.g),delete this.g,ca.Z.M.call(this)},ai(YM,Fe),ai(QM,He),ai(ty,KM),ty.prototype.xa=function(){ui(this.g,"a")},ty.prototype.wa=function(n){ui(this.g,new YM(n))},ty.prototype.va=function(n){ui(this.g,new QM(n))},ty.prototype.ua=function(){ui(this.g,"b")},vT.prototype.createWebChannel=vT.prototype.g,ca.prototype.send=ca.prototype.u,ca.prototype.open=ca.prototype.m,ca.prototype.close=ca.prototype.close,x.NO_ERROR=0,x.TIMEOUT=8,x.HTTP_ERROR=6,R.COMPLETE="complete",J.EventType=me,me.OPEN="a",me.CLOSE="b",me.ERROR="c",me.MESSAGE="d",qr.prototype.listen=qr.prototype.N,Gr.prototype.listenOnce=Gr.prototype.O,Gr.prototype.getLastError=Gr.prototype.La,Gr.prototype.getLastErrorCode=Gr.prototype.Da,Gr.prototype.getStatus=Gr.prototype.ba,Gr.prototype.getResponseJson=Gr.prototype.Qa,Gr.prototype.getResponseText=Gr.prototype.ga,Gr.prototype.send=Gr.prototype.ea;var YL=jl.createWebChannelTransport=function(){return new vT},QL=jl.getStatEventTarget=function(){return l()},FS=jl.ErrorCode=x,JL=jl.EventType=R,XL=jl.Event=s,JM=jl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},eU=jl.FetchXmlHttpFactory=Xw,wT=jl.WebChannel=J,tU=jl.XhrIo=Gr;const XM="@firebase/firestore";class Ti{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ti.UNAUTHENTICATED=new Ti(null),Ti.GOOGLE_CREDENTIALS=new Ti("google-credentials-uid"),Ti.FIRST_PARTY=new Ti("first-party-uid"),Ti.MOCK_USER=new Ti("mock-user");let ny="9.9.2";const zh=new Jo.Yd("@firebase/firestore");function LS(){return zh.logLevel}function Oe(n,...e){if(zh.logLevel<=Jo.in.DEBUG){const t=e.map(US);zh.debug(`Firestore (${ny}): ${n}`,...t)}}function Pr(n,...e){if(zh.logLevel<=Jo.in.ERROR){const t=e.map(US);zh.error(`Firestore (${ny}): ${n}`,...t)}}function bg(n,...e){if(zh.logLevel<=Jo.in.WARN){const t=e.map(US);zh.warn(`Firestore (${ny}): ${n}`,...t)}}function US(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function dt(n="Unexpected state"){const e=`FIRESTORE (${ny}) INTERNAL ASSERTION FAILED: `+n;throw Pr(e),new Error(e)}function xt(n,e){n||dt()}function Ye(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends P.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Di{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class eN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ti.UNAUTHENTICATED))}shutdown(){}}class sU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class oU{constructor(e){this.t=e,this.currentUser=Ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=E=>this.i!==i?(i=this.i,t(E)):Promise.resolve();let c=new Di;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Di,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const E=c;e.enqueueRetryable((0,ge.Z)(function*(){yield E.promise,yield a(r.currentUser)}))},_=E=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(E=>_(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?_(E):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Di)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xt("string"==typeof r.accessToken),new eN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return xt(null===e||"string"==typeof e),new Ti(e)}}class aU{constructor(e,t,r){this.type="FirstParty",this.user=Ti.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class lU{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new aU(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ti.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uU{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.p;return this.p=a.token,Oe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xt("string"==typeof t.token),this.p=t.token,new tN(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function cU(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class nN{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=cU(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Pt(n,e){return n<e?-1:n>e?1:0}function ry(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function rN(n){return n+"\0"}class ir{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ir.fromMillis(Date.now())}static fromDate(e){return ir.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ir(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pt(this.nanoseconds,e.nanoseconds):Pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(e){this.timestamp=e}static fromTimestamp(e){return new At(e)}static min(){return new At(new ir(0,0))}static max(){return new At(new ir(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class iE{constructor(e,t,r){void 0===t?t=0:t>e.length&&dt(),void 0===r?r=e.length-t:r>e.length-t&&dt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===iE.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof iE?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class un extends iE{construct(e,t,r){return new un(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new un(t)}static emptyPath(){return new un([])}}const dU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Er extends iE{construct(e,t,r){return new Er(e,t,r)}static isValidIdentifier(e){return dU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Er.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Er(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new ke(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new ke(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new ke(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===f?(c=!c,i++):"."!==f||c?(r+=f,i++):(a(),i++)}if(a(),c)throw new ke(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Er(t)}static emptyPath(){return new Er([])}}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(un.fromString(e))}static fromName(e){return new ze(un.fromString(e).popFirst(5))}static empty(){return new ze(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===un.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return un.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new un(e.slice()))}}class ET{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function VS(n){return n.fields.find(e=>2===e.kind)}function Cg(n){return n.fields.filter(e=>2!==e.kind)}ET.UNKNOWN_ID=-1;class bT{constructor(e,t){this.fieldPath=e,this.kind=t}}class sE{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new sE(0,da.min())}}function iN(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=At.fromTimestamp(1e9===r?new ir(t+1,0):new ir(t,r));return new da(i,ze.empty(),e)}function sN(n){return new da(n.readTime,n.key,-1)}class da{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new da(At.min(),ze.empty(),-1)}static max(){return new da(At.max(),ze.empty(),-1)}}function BS(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ze.comparator(n.documentKey,e.documentKey),0!==t?t:Pt(n.largestBatchId,e.largestBatchId))}const oN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Kh(n){return jS.apply(this,arguments)}function jS(){return jS=(0,ge.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==oN)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),jS.apply(this,arguments)}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,r)=>{t(e)})}static reject(e){return new ae((t,r)=>{r(e)})}static waitFor(e){return new ae((t,r)=>{let i=0,a=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++a,c&&a===i&&t()},_=>r(_))}),c=!0,a===i&&t()})}static or(e){let t=ae.resolve(!1);for(const r of e)t=t.next(i=>i?ae.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ae((r,i)=>{const a=e.length,c=new Array(a);let f=0;for(let _=0;_<a;_++){const E=_;t(e[E]).next(T=>{c[E]=T,++f,f===a&&r(c)},T=>i(T))}})}static doWhile(e,t){return new ae((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class CT{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Di,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new oE(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=ZS(r.target.error);this.T.reject(new oE(e,i))}}static open(e,t,r,i){try{return new CT(t,e.transaction(i,r))}catch(a){throw new oE(t,a)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new gU(t)}}class Zl{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===Zl.v((0,P.z$)())&&Pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),Ig(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,P.hl)())return!1;if(Zl.S())return!0;const e=(0,P.z$)(),t=Zl.v(e),r=0<t&&t<10,i=Zl.D(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,ge.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new oE(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const f=c.target.error;i("VersionError"===f.name?new ke(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new ke(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new oE(e,f))},a.onupgradeneeded=c=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.P.M(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.O&&(t.db.onversionchange=r=>t.O(r)),t.db})()}F(e){this.O=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ge.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.k(e);const _=CT.open(a.db,e,c?"readonly":"readwrite",r),E=i(_).next(T=>(_.R(),T)).catch(T=>(_.abort(T),ae.reject(T))).toPromise();return E.catch(()=>{}),yield _.A,E}catch(_){const E=_,T="FirebaseError"!==E.name&&f<3;if(Oe("SimpleDb","Transaction failed with error:",E.message,"Retrying:",T),a.close(),!T)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class pU{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Ig(this.$.delete())}}class oE extends ke{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Yh(n){return"IndexedDbTransactionError"===n.name}class gU{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ig(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),Ig(this.store.add(e))}get(e){return Ig(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),Ig(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),Ig(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.G(i,(c,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ae((a,c)=>{i.onerror=f=>{c(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ae((i,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}W(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.G(i,(a,c,f)=>f.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Y(e){const t=this.cursor({});return new ae((r,i)=>{t.onerror=a=>{const c=ZS(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}G(e,t){const r=[];return new ae((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void i();const _=new pU(f),E=t(f.primaryKey,f.value,_);if(E instanceof ae){const T=E.catch(S=>(_.done(),ae.reject(S)));r.push(T)}_.isDone?i():null===_.U?f.continue():f.continue(_.U)}}).next(()=>ae.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ig(n){return new ae((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=ZS(r.target.error);t(i)}})}let lN=!1;function ZS(n){const e=Zl.v((0,P.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return lN||(lN=!0,setTimeout(()=>{throw r},0)),r}}return n}class mU{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.Z(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Oe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ge.Z)(function*(){t.task=null;try{Oe("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){Yh(r)?Oe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Kh(r)}yield t.Z(1)}))}}class _U{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,ge.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let i=t,a=!0;return ae.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Oe("IndexBackiller",`Processing collection: ${c}`),this.nt(e,c,i).next(f=>{i-=f,r.add(c)});a=!1})).next(()=>t-i)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const c=a.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.st(i,a)).next(f=>(Oe("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>c.size)}))}st(e,t){let r=e;return t.changes.forEach((i,a)=>{const c=sN(a);BS(c,r)>0&&(r=c)}),new da(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class bo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function uN(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Tg(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}bo.ot=-1;class br{constructor(e,t){this.comparator=e,this.root=t||qi.EMPTY}insert(e,t){return new br(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qi.BLACK,null,null))}remove(e){return new br(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new IT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new IT(this.root,e,this.comparator,!1)}getReverseIterator(){return new IT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new IT(this.root,e,this.comparator,!0)}}class IT{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:qi.RED,this.left=null!=i?i:qi.EMPTY,this.right=null!=a?a:qi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new qi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return qi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return qi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();const e=this.left.check();if(e!==this.right.check())throw dt();return e+(this.isRed()?0:1)}}qi.EMPTY=null,qi.RED=!0,qi.BLACK=!1,qi.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new qi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class On{constructor(e){this.comparator=e,this.data=new br(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dN(this.data.getIterator())}getIteratorFrom(e){return new dN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof On)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new On(this.comparator);return t.data=e,t}}class dN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function iy(n){return n.hasNext()?n.getNext():void 0}class ha{constructor(e){this.fields=e,e.sort(Er.comparator)}static empty(){return new ha([])}unionWith(e){let t=new On(Er.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ha(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ry(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ci{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ci(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new ci(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ci.EMPTY_BYTE_STRING=new ci("");const vU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qh(n){if(xt(!!n),"string"==typeof n){let e=0;const t=vU.exec(n);if(xt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Cr(n.seconds),nanos:Cr(n.nanos)}}function Cr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Dg(n){return"string"==typeof n?ci.fromBase64String(n):ci.fromUint8Array(n)}function HS(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function hN(n){const e=n.mapValue.fields.__previous_value__;return HS(e)?hN(e):e}function aE(n){const e=Qh(n.mapValue.fields.__local_write_time__.timestampValue);return new ir(e.seconds,e.nanos)}class wU{constructor(e,t,r,i,a,c,f,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.useFetchStreams=_}}class ld{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ld("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ld&&e.projectId===this.projectId&&e.database===this.database}}function lE(n){return null==n}function uE(n){return 0===n&&1/n==-1/0}function fN(n){return"number"==typeof n&&Number.isInteger(n)&&!uE(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Jh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},TT={nullValue:"NULL_VALUE"};function Ag(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?HS(n)?4:_N(n)?9007199254740991:10:dt()}function $u(n,e){if(n===e)return!0;const t=Ag(n);if(t!==Ag(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return aE(n).isEqual(aE(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Qh(r.timestampValue),c=Qh(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Dg(n.bytesValue).isEqual(Dg(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Cr(r.geoPointValue.latitude)===Cr(i.geoPointValue.latitude)&&Cr(r.geoPointValue.longitude)===Cr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Cr(r.integerValue)===Cr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Cr(r.doubleValue),c=Cr(i.doubleValue);return a===c?uE(a)===uE(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return ry(n.arrayValue.values||[],e.arrayValue.values||[],$u);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(uN(a)!==uN(c))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===c[f]||!$u(a[f],c[f])))return!1;return!0}(n,e);default:return dt()}var i}function cE(n,e){return void 0!==(n.values||[]).find(t=>$u(t,e))}function Xh(n,e){if(n===e)return 0;const t=Ag(n),r=Ag(e);if(t!==r)return Pt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=Cr(i.integerValue||i.doubleValue),f=Cr(a.integerValue||a.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return pN(n.timestampValue,e.timestampValue);case 4:return pN(aE(n),aE(e));case 5:return Pt(n.stringValue,e.stringValue);case 6:return function(i,a){const c=Dg(i),f=Dg(a);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),f=a.split("/");for(let _=0;_<c.length&&_<f.length;_++){const E=Pt(c[_],f[_]);if(0!==E)return E}return Pt(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=Pt(Cr(i.latitude),Cr(a.latitude));return 0!==c?c:Pt(Cr(i.longitude),Cr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],f=a.values||[];for(let _=0;_<c.length&&_<f.length;++_){const E=Xh(c[_],f[_]);if(E)return E}return Pt(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Jh.mapValue&&a===Jh.mapValue)return 0;if(i===Jh.mapValue)return 1;if(a===Jh.mapValue)return-1;const c=i.fields||{},f=Object.keys(c),_=a.fields||{},E=Object.keys(_);f.sort(),E.sort();for(let T=0;T<f.length&&T<E.length;++T){const S=Pt(f[T],E[T]);if(0!==S)return S;const N=Xh(c[f[T]],_[E[T]]);if(0!==N)return N}return Pt(f.length,E.length)}(n.mapValue,e.mapValue);default:throw dt()}}function pN(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Pt(n,e);const t=Qh(n),r=Qh(e),i=Pt(t.seconds,r.seconds);return 0!==i?i:Pt(t.nanos,r.nanos)}function sy(n){return $S(n)}function $S(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Qh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Dg(n.bytesValue).toBase64():"referenceValue"in n?ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=$S(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const f of i)c?c=!1:a+=",",a+=`${f}:${$S(r.fields[f])}`;return a+"}"}(n.mapValue):dt();var e}function Sg(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function qS(n){return!!n&&"integerValue"in n}function dE(n){return!!n&&"arrayValue"in n}function gN(n){return!!n&&"nullValue"in n}function mN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function DT(n){return!!n&&"mapValue"in n}function hE(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Tg(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=hE(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hE(n.arrayValue.values[t]);return e}return Object.assign({},n)}function _N(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function EU(n){return"nullValue"in n?TT:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Sg(ld.empty(),ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:dt()}function bU(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Sg(ld.empty(),ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Jh:dt()}function yN(n,e){const t=Xh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function vN(n,e){const t=Xh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Gi{constructor(e){this.value=e}static empty(){return new Gi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!DT(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hE(t)}setAll(e){let t=Er.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=f.popLast()}c?r[f.lastSegment()]=hE(c):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());DT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $u(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];DT(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Tg(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Gi(hE(this.value))}}function wN(n){const e=[];return Tg(n.fields,(t,r)=>{const i=new Er([t]);if(DT(r)){const a=wN(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new ha(e)}class qn{constructor(e,t,r,i,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new qn(e,0,At.min(),At.min(),Gi.empty(),0)}static newFoundDocument(e,t,r){return new qn(e,1,t,At.min(),r,0)}static newNoDocument(e,t){return new qn(e,2,t,At.min(),Gi.empty(),0)}static newUnknownDocument(e,t){return new qn(e,3,t,At.min(),Gi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class CU{constructor(e,t=null,r=[],i=[],a=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=f,this.ut=null}}function EN(n,e=null,t=[],r=[],i=null,a=null,c=null){return new CU(n,e,t,r,i,a,c)}function xg(n){const e=Ye(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+sy(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),lE(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>sy(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>sy(r)).join(",")),e.ut=t}return e.ut}function fE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!MU(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!$u(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!DN(n.startAt,e.startAt)&&DN(n.endAt,e.endAt)}function AT(n){return ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ST(n,e){return n.filters.filter(t=>t instanceof Wi&&t.field.isEqual(e))}function bN(n,e,t){let r=TT,i=!0;for(const a of ST(n,e)){let c=TT,f=!0;switch(a.op){case"<":case"<=":c=EU(a.value);break;case"==":case"in":case">=":c=a.value;break;case">":c=a.value,f=!1;break;case"!=":case"not-in":c=TT}yN({value:r,inclusive:i},{value:c,inclusive:f})<0&&(r=c,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];yN({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function CN(n,e,t){let r=Jh,i=!0;for(const a of ST(n,e)){let c=Jh,f=!0;switch(a.op){case">=":case">":c=bU(a.value),f=!1;break;case"==":case"in":case"<=":c=a.value;break;case"<":c=a.value,f=!1;break;case"!=":case"not-in":c=Jh}vN({value:r,inclusive:i},{value:c,inclusive:f})>0&&(r=c,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];vN({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Wi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new TU(e,t,r):"array-contains"===t?new SU(e,r):"in"===t?new xU(e,r):"not-in"===t?new kU(e,r):"array-contains-any"===t?new RU(e,r):new Wi(e,t,r)}static ct(e,t,r){return"in"===t?new DU(e,r):new AU(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Xh(t,this.value)):null!==t&&Ag(this.value)===Ag(t)&&this.at(Xh(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class TU extends Wi{constructor(e,t,r){super(e,t,r),this.key=ze.fromName(r.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.at(t)}}class DU extends Wi{constructor(e,t){super(e,"in",t),this.keys=IN(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class AU extends Wi{constructor(e,t){super(e,"not-in",t),this.keys=IN(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function IN(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ze.fromName(r.referenceValue))}class SU extends Wi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dE(t)&&cE(t.arrayValue,this.value)}}class xU extends Wi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&cE(this.value.arrayValue,t)}}class kU extends Wi{constructor(e,t){super(e,"not-in",t)}matches(e){if(cE(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!cE(this.value.arrayValue,t)}}class RU extends Wi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>cE(this.value.arrayValue,r))}}class ef{constructor(e,t){this.position=e,this.inclusive=t}}class oy{constructor(e,t="asc"){this.field=e,this.dir=t}}function MU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function TN(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?ze.comparator(ze.fromName(c.referenceValue),t.key):Xh(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function DN(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$u(n.position[t],e.position[t]))return!1;return!0}class ud{constructor(e,t=null,r=[],i=[],a=null,c="F",f=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=f,this.endAt=_,this.lt=null,this.ft=null}}function AN(n,e,t,r,i,a,c,f){return new ud(n,e,t,r,i,a,c,f)}function ay(n){return new ud(n)}function SN(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function GS(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function WS(n){for(const e of n.filters)if(e.ht())return e.field;return null}function zS(n){return null!==n.collectionGroup}function ly(n){const e=Ye(n);if(null===e.lt){e.lt=[];const t=WS(e),r=GS(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new oy(t)),e.lt.push(new oy(Er.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.lt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new oy(Er.keyField(),a))}}}return e.lt}function Co(n){const e=Ye(n);if(!e.ft)if("F"===e.limitType)e.ft=EN(e.path,e.collectionGroup,ly(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of ly(e))t.push(new oy(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new ef(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ef(e.startAt.position,e.startAt.inclusive):null;e.ft=EN(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.ft}function xT(n,e,t){return new ud(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pE(n,e){return fE(Co(n),Co(e))&&n.limitType===e.limitType}function xN(n){return`${xg(Co(n))}|lt:${n.limitType}`}function KS(n){return`Query(target=${function IU(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${sy(r.value)}`;var r}).join(", ")}]`),lE(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>sy(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>sy(t)).join(",")),`Target(${e})`}(Co(n))}; limitType=${n.limitType})`}function YS(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ze.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const f=TN(i,a,c);return i.inclusive?f<=0:f<0}(t.startAt,ly(t),r)||t.endAt&&!function(i,a,c){const f=TN(i,a,c);return i.inclusive?f>=0:f>0}(t.endAt,ly(t),r)));var t,r}function kN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function RN(n){return(e,t)=>{let r=!1;for(const i of ly(n)){const a=NU(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function NU(n,e,t){const r=n.field.isKeyField()?ze.comparator(e.key,t.key):function(i,a,c){const f=a.data.field(i),_=c.data.field(i);return null!==f&&null!==_?Xh(f,_):dt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dt()}}function MN(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uE(e)?"-0":e}}function NN(n){return{integerValue:""+n}}function PN(n,e){return fN(e)?NN(e):MN(n,e)}class kT{constructor(){this._=void 0}}function PU(n,e,t){return n instanceof uy?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof kg?FN(n,e):n instanceof Rg?LN(n,e):function(r,i){const a=ON(r,i),c=UN(a)+UN(r._t);return qS(a)&&qS(r._t)?NN(c):MN(r.wt,c)}(n,e)}function OU(n,e,t){return n instanceof kg?FN(n,e):n instanceof Rg?LN(n,e):t}function ON(n,e){return n instanceof cy?qS(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class uy extends kT{}class kg extends kT{constructor(e){super(),this.elements=e}}function FN(n,e){const t=VN(e);for(const r of n.elements)t.some(i=>$u(i,r))||t.push(r);return{arrayValue:{values:t}}}class Rg extends kT{constructor(e){super(),this.elements=e}}function LN(n,e){let t=VN(e);for(const r of n.elements)t=t.filter(i=>!$u(i,r));return{arrayValue:{values:t}}}class cy extends kT{constructor(e,t){super(),this.wt=e,this._t=t}}function UN(n){return Cr(n.integerValue||n.doubleValue)}function VN(n){return dE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class gE{constructor(e,t){this.field=e,this.transform=t}}class LU{constructor(e,t){this.version=e,this.transformResults=t}}class dr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new dr}static exists(e){return new dr(void 0,e)}static updateTime(e){return new dr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function RT(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class MT{}function BN(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new hy(n.key,dr.none()):new dy(n.key,n.data,dr.none());{const t=n.data,r=Gi.empty();let i=new On(Er.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);null===c&&a.length>1&&(a=a.popLast(),c=t.field(a)),null===c?r.delete(a):r.set(a,c),i=i.add(a)}return new cd(n.key,r,new ha(i.toArray()),dr.none())}}function UU(n,e,t){n instanceof dy?function(r,i,a){const c=r.value.clone(),f=HN(r.fieldTransforms,i,a.transformResults);c.setAll(f),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof cd?function(r,i,a){if(!RT(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=HN(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(ZN(r)),f.setAll(c),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function mE(n,e,t,r){return n instanceof dy?function(i,a,c,f){if(!RT(i.precondition,a))return c;const _=i.value.clone(),E=$N(i.fieldTransforms,f,a);return _.setAll(E),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof cd?function(i,a,c,f){if(!RT(i.precondition,a))return c;const _=$N(i.fieldTransforms,f,a),E=a.data;return E.setAll(ZN(i)),E.setAll(_),a.convertToFoundDocument(a.version,E).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(c=t,RT(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c);var a,c}function VU(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=ON(r.transform,i||null);null!=a&&(null===t&&(t=Gi.empty()),t.set(r.field,a))}return t||null}function jN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ry(t,r,(i,a)=>function FU(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof kg&&r instanceof kg||t instanceof Rg&&r instanceof Rg?ry(t.elements,r.elements,$u):t instanceof cy&&r instanceof cy?$u(t._t,r._t):t instanceof uy&&r instanceof uy);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class dy extends MT{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class cd extends MT{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function ZN(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function HN(n,e,t){const r=new Map;xt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,f=e.data.field(a.field);r.set(a.field,OU(c,f,t[i]))}return r}function $N(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,PU(a,c,e))}return r}class hy extends MT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QS extends MT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class BU{constructor(e){this.count=e}}var Wr,cn;function qN(n){switch(n){default:return dt();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function GN(n){if(void 0===n)return Pr("GRPC error has no .code"),fe.UNKNOWN;switch(n){case Wr.OK:return fe.OK;case Wr.CANCELLED:return fe.CANCELLED;case Wr.UNKNOWN:return fe.UNKNOWN;case Wr.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case Wr.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case Wr.INTERNAL:return fe.INTERNAL;case Wr.UNAVAILABLE:return fe.UNAVAILABLE;case Wr.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case Wr.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case Wr.NOT_FOUND:return fe.NOT_FOUND;case Wr.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case Wr.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case Wr.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case Wr.ABORTED:return fe.ABORTED;case Wr.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case Wr.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case Wr.DATA_LOSS:return fe.DATA_LOSS;default:return dt()}}(cn=Wr||(Wr={}))[cn.OK=0]="OK",cn[cn.CANCELLED=1]="CANCELLED",cn[cn.UNKNOWN=2]="UNKNOWN",cn[cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cn[cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cn[cn.NOT_FOUND=5]="NOT_FOUND",cn[cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",cn[cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",cn[cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",cn[cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cn[cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cn[cn.ABORTED=10]="ABORTED",cn[cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",cn[cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",cn[cn.INTERNAL=13]="INTERNAL",cn[cn.UNAVAILABLE=14]="UNAVAILABLE",cn[cn.DATA_LOSS=15]="DATA_LOSS";class tf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Tg(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return cN(this.inner)}size(){return this.innerSize}}const jU=new br(ze.comparator);function Io(){return jU}const WN=new br(ze.comparator);function _E(...n){let e=WN;for(const t of n)e=e.insert(t.key,t);return e}function zN(n){let e=WN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function qu(){return yE()}function KN(){return yE()}function yE(){return new tf(n=>n.toString(),(n,e)=>n.isEqual(e))}const ZU=new br(ze.comparator),HU=new On(ze.comparator);function jt(...n){let e=HU;for(const t of n)e=e.add(t);return e}const $U=new On(Pt);function NT(){return $U}class vE{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,wE.createSynthesizedTargetChangeForCurrentChange(e,t)),new vE(At.min(),r,NT(),Io(),jt())}}class wE{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new wE(ci.EMPTY_BYTE_STRING,t,jt(),jt(),jt())}}class PT{constructor(e,t,r,i){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=i}}class YN{constructor(e,t){this.targetId=e,this.It=t}}class QN{constructor(e,t,r=ci.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class JN{constructor(){this.Tt=0,this.Et=eP(),this.At=ci.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=jt(),t=jt(),r=jt();return this.Et.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:dt()}}),new wE(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=eP()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class qU{constructor(e){this.Ot=e,this.Ft=new Map,this.$t=Io(),this.Bt=XN(),this.Lt=new On(Pt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,i)=>{this.jt(i)&&t(i)})}zt(e){const t=e.targetId,r=e.It.count,i=this.Ht(t);if(i){const a=i.target;if(AT(a))if(0===r){const c=new ze(a.path);this.Kt(t,c,qn.newNoDocument(c,At.min()))}else xt(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((a,c)=>{const f=this.Ht(c);if(f){if(a.current&&AT(f.target)){const _=new ze(f.target.path);null!==this.$t.get(_)||this.Xt(c,_)||this.Kt(c,_,qn.newNoDocument(_,e))}a.vt&&(t.set(c,a.St()),a.Dt())}});let r=jt();this.Bt.forEach((a,c)=>{let f=!0;c.forEachWhile(_=>{const E=this.Ht(_);return!E||2===E.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.$t.forEach((a,c)=>c.setReadTime(e));const i=new vE(e,t,this.Lt,this.$t,r);return this.$t=Io(),this.Bt=XN(),this.Lt=new On(Pt),i}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,t)?i.Ct(t,1):i.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new JN,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new On(Pt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Ot.te(e)}Wt(e){this.Ft.set(e,new JN),this.Ot.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Ot.getRemoteKeysForTarget(e).has(t)}}function XN(){return new br(ze.comparator)}function eP(){return new br(ze.comparator)}const GU={asc:"ASCENDING",desc:"DESCENDING"},WU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class zU{constructor(e,t){this.databaseId=e,this.dt=t}}function EE(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tP(n,e){return n.dt?e.toBase64():e.toUint8Array()}function KU(n,e){return EE(n,e.toTimestamp())}function Ai(n){return xt(!!n),At.fromTimestamp(function(e){const t=Qh(e);return new ir(t.seconds,t.nanos)}(n))}function JS(n,e){return(t=n,new un(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function nP(n){const e=un.fromString(n);return xt(dP(e)),e}function bE(n,e){return JS(n.databaseId,e.path)}function Gu(n,e){const t=nP(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ze(iP(t))}function XS(n,e){return JS(n.databaseId,e)}function rP(n){const e=nP(n);return 4===e.length?un.emptyPath():iP(e)}function CE(n){return new un(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function iP(n){return xt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function sP(n,e,t){return{name:bE(n,e),fields:t.value.mapValue.fields}}function oP(n,e,t){const r=Gu(n,e.name),i=Ai(e.updateTime),a=new Gi({mapValue:{fields:e.fields}}),c=qn.newFoundDocument(r,i,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function IE(n,e){let t;if(e instanceof dy)t={update:sP(n,e.key,e.value)};else if(e instanceof hy)t={delete:bE(n,e.key)};else if(e instanceof cd)t={update:sP(n,e.key,e.data),updateMask:iV(e.fieldMask)};else{if(!(e instanceof QS))return dt();t={verify:bE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof uy)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof kg)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Rg)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof cy)return{fieldPath:a.field.canonicalString(),increment:c._t};throw dt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:KU(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:dt()),t;var i}function ex(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?dr.updateTime(Ai(i.updateTime)):void 0!==i.exists?dr.exists(i.exists):dr.none():dr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let f=null;"setToServerValue"in c?(xt("REQUEST_TIME"===c.setToServerValue),f=new uy):"appendMissingElements"in c?f=new kg(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new Rg(c.removeAllFromArray.values||[]):"increment"in c?f=new cy(a,c.increment):dt();const _=Er.fromServerFormat(c.fieldPath);return new gE(_,f)}(n,i)):[];var i;if(e.update){const i=Gu(n,e.update.name),a=new Gi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new ha((e.updateMask.fieldPaths||[]).map(E=>Er.fromServerFormat(E)));return new cd(i,a,c,t,r)}return new dy(i,a,t,r)}if(e.delete){const i=Gu(n,e.delete);return new hy(i,t)}if(e.verify){const i=Gu(n,e.verify);return new QS(i,t)}return dt()}function aP(n,e){return{documents:[XS(n,e.path)]}}function lP(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=XS(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=XS(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const E=_.map(T=>function(S){if("=="===S.op){if(mN(S.value))return{unaryFilter:{field:fy(S.field),op:"IS_NAN"}};if(gN(S.value))return{unaryFilter:{field:fy(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(mN(S.value))return{unaryFilter:{field:fy(S.field),op:"IS_NOT_NAN"}};if(gN(S.value))return{unaryFilter:{field:fy(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fy(S.field),op:tV(S.op),value:S.value}}}(T));return 1===E.length?E[0]:{compositeFilter:{op:"AND",filters:E}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(E=>{return{field:fy((T=E).field),direction:eV(T.dir)};var T})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=(E=e.limit,n.dt||lE(E)?E:{value:E});var E,f,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function uP(n){let e=rP(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){xt(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let a=[];t.where&&(a=cP(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(T=>{return new oy(py((S=T).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let f=null;t.limit&&(f=function(T){let S;return S="object"==typeof T?T.value:T,lE(S)?null:S}(t.limit));let _=null;var T;t.startAt&&(_=new ef((T=t.startAt).values||[],!!T.before));let E=null;return t.endAt&&(E=function(T){return new ef(T.values||[],!T.before)}(t.endAt)),AN(e,i,c,a,f,"F",_,E)}function cP(n){return n?void 0!==n.unaryFilter?[rV(n)]:void 0!==n.fieldFilter?[nV(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>cP(e)).reduce((e,t)=>e.concat(t)):dt():[]}function eV(n){return GU[n]}function tV(n){return WU[n]}function fy(n){return{fieldPath:n.canonicalString()}}function py(n){return Er.fromServerFormat(n.fieldPath)}function nV(n){return Wi.create(py(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}}(n.fieldFilter.op),n.fieldFilter.value)}function rV(n){switch(n.unaryFilter.op){case"IS_NAN":const e=py(n.unaryFilter.field);return Wi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=py(n.unaryFilter.field);return Wi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=py(n.unaryFilter.field);return Wi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=py(n.unaryFilter.field);return Wi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return dt()}}function iV(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function dP(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Zs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=hP(e)),e=sV(n.get(t),e);return hP(e)}function sV(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function hP(n){return n+"\x01\x01"}function Wu(n){const e=n.length;if(xt(e>=2),2===e)return xt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),un.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&dt(),n.charAt(c+1)){case"\x01":const f=n.substring(a,c);let _;0===i.length?_=f:(i+=f,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:dt()}a=c+2}return new un(r)}const fP=["userId","batchId"];function OT(n,e){return[n,Zs(e)]}function pP(n,e,t){return[n,Zs(e),t]}const oV={},aV=["prefixPath","collectionGroup","readTime","documentId"],lV=["prefixPath","collectionGroup","documentId"],uV=["collectionGroup","readTime","prefixPath","documentId"],cV=["canonicalId","targetId"],dV=["targetId","path"],hV=["path","targetId"],fV=["collectionId","parent"],pV=["indexId","uid"],gV=["uid","sequenceNumber"],mV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],_V=["indexId","uid","orderedDocumentKey"],yV=["userId","collectionPath","documentId"],vV=["userId","collectionPath","largestBatchId"],wV=["userId","collectionGroup","largestBatchId"],gP=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],EV=[...gP,"documentOverlays"],mP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_P=mP,bV=[..._P,"indexConfiguration","indexState","indexEntries"];class tx extends aN{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Si(n,e){const t=Ye(n);return Zl.N(t.ee,e)}class nx{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&UU(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=mE(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=mE(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=KN();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let f=this.applyToLocalView(c,a.mutatedFields);f=t.has(i.key)?null:f;const _=BN(c,f);null!==_&&r.set(i.key,_),c.isValidDocument()||c.convertToNoDocument(At.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jt())}isEqual(e){return this.batchId===e.batchId&&ry(this.mutations,e.mutations,(t,r)=>jN(t,r))&&ry(this.baseMutations,e.baseMutations,(t,r)=>jN(t,r))}}class rx{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){xt(e.mutations.length===r.length);let i=ZU;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new rx(e,t,r,i)}}class ix{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class nf{constructor(e,t,r,i,a=At.min(),c=At.min(),f=ci.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f}withSequenceNumber(e){return new nf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new nf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new nf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class yP{constructor(e){this.ne=e}}function vP(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:FT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:bE(i=n.ne,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:EE(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Mg(e.version)};else{if(!e.isUnknownDocument())return dt();r.unknownDocument={path:t.path.toArray(),version:Mg(e.version)}}var i,a;return r}function FT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Mg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ng(n){const e=new ir(n.seconds,n.nanoseconds);return At.fromTimestamp(e)}function Pg(n,e){const t=(e.baseMutations||[]).map(a=>ex(n.ne,a));for(let a=0;a<e.mutations.length-1;++a){const c=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(c.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>ex(n.ne,a)),i=ir.fromMillis(e.localWriteTimeMs);return new nx(e.batchId,i,t,r)}function TE(n){const e=Ng(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ng(n.lastLimboFreeSnapshotVersion):At.min();let r;var i;return void 0!==n.query.documents?(xt(1===(i=n.query).documents.length),r=Co(ay(rP(i.documents[0])))):r=Co(uP(n.query)),new nf(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ci.fromBase64String(n.resumeToken))}function wP(n,e){const t=Mg(e.snapshotVersion),r=Mg(e.lastLimboFreeSnapshotVersion);let i;i=AT(e.target)?aP(n.ne,e.target):lP(n.ne,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xg(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function sx(n){const e=uP({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?xT(e,e.limit,"L"):e}function ox(n,e){return new ix(e.largestBatchId,ex(n.ne,e.overlayMutation))}function EP(n,e){const t=e.path.lastSegment();return[n,Zs(e.path.popLast()),t]}function bP(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Mg(r.readTime),documentKey:Zs(r.documentKey.path),largestBatchId:r.largestBatchId}}class IV{getBundleMetadata(e,t){return CP(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Ng(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return CP(e).put({bundleId:(r=t).id,createTime:Mg(Ai(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return IP(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:sx(i.bundledQuery),readTime:Ng(i.readTime)};var i})}saveNamedQuery(e,t){return IP(e).put({name:(r=t).name,readTime:Mg(Ai(r.readTime)),bundledQuery:r.bundledQuery});var r}}function CP(n){return Si(n,"bundles")}function IP(n){return Si(n,"namedQueries")}class LT{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new LT(e,t.uid||"")}getOverlay(e,t){return DE(e).get(EP(this.userId,t)).next(r=>r?ox(this.wt,r):null)}getOverlays(e,t){const r=qu();return ae.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,c)=>{const f=new ix(t,c);i.push(this.ie(e,f))}),ae.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Zs(c.getCollectionPath())));const a=[];return i.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(DE(e).W("collectionPathOverlayIndex",f))}),ae.waitFor(a)}getOverlaysForCollection(e,t,r){const i=qu(),a=Zs(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return DE(e).K("collectionPathOverlayIndex",c).next(f=>{for(const _ of f){const E=ox(this.wt,_);i.set(E.getKey(),E)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=qu();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return DE(e).J({index:"collectionGroupOverlayIndex",range:f},(_,E,T)=>{const S=ox(this.wt,E);a.size()<i||S.largestBatchId===c?(a.set(S.getKey(),S),c=S.largestBatchId):T.done()}).next(()=>a)}ie(e,t){return DE(e).put(function(r,i,a){const[c,f,_]=EP(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:IE(r.ne,a.mutation)}}(this.wt,this.userId,t))}}function DE(n){return Si(n,"documentOverlays")}class Og{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Cr(e.integerValue));else if("doubleValue"in e){const r=Cr(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),uE(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Dg(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?_N(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):dt()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const i of Object.keys(r))this.le(i,t),this.oe(r[i],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const i of r)this.oe(i,t)}_e(e,t){this.ce(t,37),ze.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function TV(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function TP(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=TV(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Og.ye=new Og;class DV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=t.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(e){const t=this.Ve(e),r=TP(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}De(e){const t=this.Ve(e),r=TP(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Me(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class AV{constructor(e){this.Oe=e}de(e){this.Oe.pe(e)}he(e){this.Oe.be(e)}ae(e){this.Oe.ve(e)}ue(){this.Oe.Ce()}}class SV{constructor(e){this.Oe=e}de(e){this.Oe.Ee(e)}he(e){this.Oe.Pe(e)}ae(e){this.Oe.De(e)}ue(){this.Oe.Ne()}}class AE{constructor(){this.Oe=new DV,this.Fe=new AV(this.Oe),this.$e=new SV(this.Oe)}seed(e){this.Oe.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Me(){return this.Oe.Me()}reset(){this.Oe.reset()}}class Fg{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Fg(this.indexId,this.documentKey,this.arrayValue,r)}}function Lg(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=DP(n.arrayValue,e.arrayValue),0!==t?t:(t=DP(n.directionalValue,e.directionalValue),0!==t?t:ze.comparator(n.documentKey,e.documentKey)))}function DP(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class xV{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=VS(e);if(void 0!==t&&!this.Qe(t))return!1;const r=Cg(e);let i=0,a=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ke){const c=r[i];if(!this.je(this.Ke,c)||!this.We(this.Ue[a++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(a>=this.Ue.length||!this.We(this.Ue[a++],c))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class kV{constructor(){this.ze=new ax}addToCollectionParentIndex(e,t){return this.ze.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(da.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(da.min())}updateCollectionGroup(e,t,r){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class ax{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new On(un.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new On(un.comparator)).toArray()}}const UT=new Uint8Array(0);class RV{constructor(e,t){this.user=e,this.databaseId=t,this.He=new ax,this.Je=new tf(r=>xg(r),(r,i)=>fE(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const a={collectionId:r,parent:Zs(i)};return AP(e).put(a)}return ae.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[rN(t),""],!1,!0);return AP(e).K(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(Wu(c.parent))}return r})}addFieldIndex(e,t){const r=VT(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var c;delete i.indexId;const a=r.add(i);if(t.indexState){const c=xE(e);return a.next(f=>{c.put(bP(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=VT(e),i=xE(e),a=SE(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=SE(e);let i=!0;const a=new Map;return ae.forEach(this.Ye(t),c=>this.Xe(e,c).next(f=>{i&&(i=!!f),a.set(c,f)})).next(()=>{if(i){let c=jt();const f=[];return ae.forEach(a,(_,E)=>{var T;Oe("IndexedDbIndexManager",`Using index ${T=_,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(Xe=>`${Xe.fieldPath}:${Xe.kind}`).join(",")}`} to execute ${xg(t)}`);const S=function(Xe,Qe){const bt=VS(Qe);if(void 0===bt)return null;for(const Ot of ST(Xe,bt.fieldPath))switch(Ot.op){case"array-contains-any":return Ot.value.arrayValue.values||[];case"array-contains":return[Ot.value]}return null}(E,_),N=function(Xe,Qe){const bt=new Map;for(const Ot of Cg(Qe))for(const hr of ST(Xe,Ot.fieldPath))switch(hr.op){case"==":case"in":bt.set(Ot.fieldPath.canonicalString(),hr.value);break;case"not-in":case"!=":return bt.set(Ot.fieldPath.canonicalString(),hr.value),Array.from(bt.values())}return null}(E,_),O=function(Xe,Qe){const bt=[];let Ot=!0;for(const hr of Cg(Qe)){const $l=0===hr.kind?bN(Xe,hr.fieldPath,Xe.startAt):CN(Xe,hr.fieldPath,Xe.startAt);bt.push($l.value),Ot&&(Ot=$l.inclusive)}return new ef(bt,Ot)}(E,_),j=function(Xe,Qe){const bt=[];let Ot=!0;for(const hr of Cg(Qe)){const $l=0===hr.kind?CN(Xe,hr.fieldPath,Xe.endAt):bN(Xe,hr.fieldPath,Xe.endAt);bt.push($l.value),Ot&&(Ot=$l.inclusive)}return new ef(bt,Ot)}(E,_),ie=this.Ze(_,E,O),_e=this.Ze(_,E,j),Be=this.tn(_,E,N),lt=this.en(_.indexId,S,ie,O.inclusive,_e,j.inclusive,Be);return ae.forEach(lt,Xe=>r.j(Xe,t.limit).next(Qe=>{Qe.forEach(bt=>{const Ot=ze.fromSegments(bt.documentKey);c.has(Ot)||(c=c.add(Ot),f.push(Ot))})}))}).next(()=>f)}return ae.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,i,a,c,f){const _=(null!=t?t.length:1)*Math.max(r.length,a.length),E=_/(null!=t?t.length:1),T=[];for(let S=0;S<_;++S){const N=t?this.nn(t[S/E]):UT,O=this.sn(e,N,r[S%E],i),j=this.rn(e,N,a[S%E],c),ie=f.map(_e=>this.sn(e,N,_e,!0));T.push(...this.createRange(O,j,ie))}return T}sn(e,t,r,i){const a=new Fg(e,ze.empty(),t,r);return i?a:a.Le()}rn(e,t,r,i){const a=new Fg(e,ze.empty(),t,r);return i?a.Le():a}Xe(e,t){const r=new xV(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let c=null;for(const f of a)r.Ge(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c})}getIndexType(e,t){let r=2;return ae.forEach(this.Ye(t),i=>this.Xe(e,i).next(a=>{a?0!==r&&a.fields.length<function(c){let f=new On(Er.comparator),_=!1;for(const E of c.filters){const T=E;T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?_=!0:f=f.add(T.field))}for(const E of c.orderBy)E.field.isKeyField()||(f=f.add(E.field));return f.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new AE;for(const i of Cg(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.Be(i.kind);Og.ye.re(a,c)}return r.Me()}nn(e){const t=new AE;return Og.ye.re(e,t.Be(0)),t.Me()}un(e,t){const r=new AE;return Og.ye.re(Sg(this.databaseId,t),r.Be(function(i){const a=Cg(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Me()}tn(e,t,r){if(null===r)return[];let i=[];i.push(new AE);let a=0;for(const c of Cg(e)){const f=r[a++];for(const _ of i)if(this.cn(t,c.fieldPath)&&dE(f))i=this.an(i,c,f);else{const E=_.Be(c.kind);Og.ye.re(f,E)}}return this.hn(i)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Me();return t}an(e,t,r){const i=[...e],a=[];for(const c of r.arrayValue.values||[])for(const f of i){const _=new AE;_.seed(f.Me()),Og.ye.re(c,_.Be(t.kind)),a.push(_)}return a}cn(e,t){return!!e.filters.find(r=>r instanceof Wi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=VT(e),i=xE(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(a=>{const c=[];return ae.forEach(a,f=>i.get([f.indexId,this.uid]).next(_=>{c.push(function(E,T){const S=T?new sE(T.sequenceNumber,new da(Ng(T.readTime),new ze(Wu(T.documentKey)),T.largestBatchId)):sE.empty(),N=E.fields.map(([O,j])=>new bT(Er.fromServerFormat(O),j));return new ET(E.indexId,E.collectionGroup,N,S)}(f,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Pt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=VT(e),a=xE(e);return this.ln(e).next(c=>i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>ae.forEach(f,_=>a.put(bP(_.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ae.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?ae.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),ae.forEach(f,_=>this.fn(e,i,_).next(E=>{const T=this.dn(a,_);return E.isEqual(T)?ae.resolve():this._n(e,a,_,E,T)}))))})}wn(e,t,r,i){return SE(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,i){return SE(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const i=SE(e);let a=new On(Lg);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(c,f)=>{a=a.add(new Fg(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}dn(e,t){let r=new On(Lg);const i=this.on(t,e);if(null==i)return r;const a=VS(t);if(null!=a){const c=e.data.field(a.fieldPath);if(dE(c))for(const f of c.arrayValue.values||[])r=r.add(new Fg(t.indexId,e.key,this.nn(f),i))}else r=r.add(new Fg(t.indexId,e.key,UT,i));return r}_n(e,t,r,i,a){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(f,_,E,T,S){const N=f.getIterator(),O=_.getIterator();let j=iy(N),ie=iy(O);for(;j||ie;){let _e=!1,Be=!1;if(j&&ie){const lt=E(j,ie);lt<0?Be=!0:lt>0&&(_e=!0)}else null!=j?Be=!0:_e=!0;_e?(T(ie),ie=iy(O)):Be?(S(j),j=iy(N)):(j=iy(N),ie=iy(O))}}(i,a,Lg,f=>{c.push(this.wn(e,t,r,f))},f=>{c.push(this.mn(e,t,r,f))}),ae.waitFor(c)}ln(e){let t=1;return xE(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,f)=>Lg(c,f)).filter((c,f,_)=>!f||0!==Lg(c,_[f-1]));const i=[];i.push(e);for(const c of r){const f=Lg(c,e),_=Lg(c,t);if(0===f)i[0]=e.Le();else if(f>0&&_<0)i.push(c),i.push(c.Le());else if(_>0)break}i.push(t);const a=[];for(let c=0;c<i.length;c+=2)a.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,UT,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,UT,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(SP)}getMinOffset(e,t){return ae.mapArray(this.Ye(t),r=>this.Xe(e,r).next(i=>i||dt())).next(SP)}}function AP(n){return Si(n,"collectionParents")}function SE(n){return Si(n,"indexEntries")}function VT(n){return Si(n,"indexConfiguration")}function xE(n){return Si(n,"indexState")}function SP(n){xt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;BS(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new da(e.readTime,e.documentKey,t)}const xP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class To{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new To(e,To.DEFAULT_COLLECTION_PERCENTILE,To.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function kP(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let f=0;const _=r.J({range:c},(T,S,N)=>(f++,N.delete()));a.push(_.next(()=>{xt(1===f)}));const E=[];for(const T of t.mutations){const S=pP(e,T.key.path,t.batchId);a.push(i.delete(S)),E.push(T.key)}return ae.waitFor(a).next(()=>E)}function BT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw dt();e=n.noDocument}return JSON.stringify(e).length}To.DEFAULT_COLLECTION_PERCENTILE=10,To.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,To.DEFAULT=new To(41943040,To.DEFAULT_COLLECTION_PERCENTILE,To.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),To.DISABLED=new To(-1,0,0);class jT{constructor(e,t,r,i){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(e,t,r,i){xt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new jT(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rf(e).J({index:"userMutationsIndex",range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=gy(e),c=rf(e);return c.add({}).next(f=>{xt("number"==typeof f);const _=new nx(f,t,r,i),E=function(N,O,j){const ie=j.baseMutations.map(Be=>IE(N.ne,Be)),_e=j.mutations.map(Be=>IE(N.ne,Be));return{userId:O,batchId:j.batchId,localWriteTimeMs:j.localWriteTime.toMillis(),baseMutations:ie,mutations:_e}}(this.wt,this.userId,_),T=[];let S=new On((N,O)=>Pt(N.canonicalString(),O.canonicalString()));for(const N of i){const O=pP(this.userId,N.key.path,f);S=S.add(N.key.path.popLast()),T.push(c.put(E)),T.push(a.put(O,oV))}return S.forEach(N=>{T.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.gn[f]=_.keys()}),ae.waitFor(T).next(()=>_)})}lookupMutationBatch(e,t){return rf(e).get(t).next(r=>r?(xt(r.userId===this.userId),Pg(this.wt,r)):null)}yn(e,t){return this.gn[t]?ae.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.gn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return rf(e).J({index:"userMutationsIndex",range:i},(c,f,_)=>{f.userId===this.userId&&(xt(f.batchId>=r),a=Pg(this.wt,f)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return rf(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return rf(e).K("userMutationsIndex",t).next(r=>r.map(i=>Pg(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=OT(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return gy(e).J({range:i},(c,f,_)=>{const[E,T,S]=c,N=Wu(T);if(E===this.userId&&t.path.isEqual(N))return rf(e).get(S).next(O=>{if(!O)throw dt();xt(O.userId===this.userId),a.push(Pg(this.wt,O))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new On(Pt);const i=[];return t.forEach(a=>{const c=OT(this.userId,a.path),f=IDBKeyRange.lowerBound(c),_=gy(e).J({range:f},(E,T,S)=>{const[N,O,j]=E,ie=Wu(O);N===this.userId&&a.path.isEqual(ie)?r=r.add(j):S.done()});i.push(_)}),ae.waitFor(i).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=OT(this.userId,r),c=IDBKeyRange.lowerBound(a);let f=new On(Pt);return gy(e).J({range:c},(_,E,T)=>{const[S,N,O]=_,j=Wu(N);S===this.userId&&r.isPrefixOf(j)?j.length===i&&(f=f.add(O)):T.done()}).next(()=>this.pn(e,f))}pn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(rf(e).get(a).next(c=>{if(null===c)throw dt();xt(c.userId===this.userId),r.push(Pg(this.wt,c))}))}),ae.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return kP(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),ae.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ae.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return gy(e).J({range:r},(a,c,f)=>{if(a[0]===this.userId){const _=Wu(a[1]);i.push(_)}else f.done()}).next(()=>{xt(0===i.length)})})}containsKey(e,t){return RP(e,this.userId,t)}Tn(e){return MP(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function RP(n,e,t){const r=OT(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return gy(n).J({range:a,H:!0},(f,_,E)=>{const[T,S,N]=f;T===e&&S===i&&(c=!0),E.done()}).next(()=>c)}function rf(n){return Si(n,"mutations")}function gy(n){return Si(n,"documentMutations")}function MP(n){return Si(n,"mutationQueues")}class Ug{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Ug(0)}static Rn(){return new Ug(-1)}}class MV{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new Ug(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>At.fromTimestamp(new ir(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Pn(e,i)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>my(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(xt(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return my(e).J((c,f)=>{const _=TE(f);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>ae.waitFor(a)).next(()=>i)}forEachTarget(e,t){return my(e).J((r,i)=>{const a=TE(i);t(a)})}bn(e){return NP(e).get("targetGlobalKey").next(t=>(xt(null!==t),t))}Pn(e,t){return NP(e).put("targetGlobalKey",t)}vn(e,t){return my(e).put(wP(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=xg(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return my(e).J({range:i,index:"queryTargetsIndex"},(c,f,_)=>{const E=TE(f);fE(t,E.target)&&(a=E,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=sf(e);return t.forEach(c=>{const f=Zs(c.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,c))}),ae.waitFor(i)}removeMatchingKeys(e,t,r){const i=sf(e);return ae.forEach(t,a=>{const c=Zs(a.path);return ae.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=sf(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=sf(e);let a=jt();return i.J({range:r,H:!0},(c,f,_)=>{const E=Wu(c[1]),T=new ze(E);a=a.add(T)}).next(()=>a)}containsKey(e,t){const r=Zs(t.path),i=IDBKeyRange.bound([r],[rN(r)],!1,!0);let a=0;return sf(e).J({index:"documentTargetsIndex",H:!0,range:i},([c,f],_,E)=>{0!==c&&(a++,E.done())}).next(()=>a>0)}te(e,t){return my(e).get(t).next(r=>r?TE(r):null)}}function my(n){return Si(n,"targets")}function NP(n){return Si(n,"targetGlobal")}function sf(n){return Si(n,"targetDocuments")}function PP([n,e],[t,r]){const i=Pt(n,t);return 0===i?Pt(e,r):i}class NV{constructor(e){this.Sn=e,this.buffer=new On(PP),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();PP(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class PV{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ge.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Yh(r)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Kh(r)}yield t.kn(3e5)}))}}class OV{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.On(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ae.resolve(bo.ot);const r=new NV(t);return this.Mn.forEachTarget(e,i=>r.xn(i.sequenceNumber)).next(()=>this.Mn.Fn(e,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Mn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(xP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xP):this.$n(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}$n(e,t){let r,i,a,c,f,_,E;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,c=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,f=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(E=Date.now(),LS()<=Jo.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-T}ms\n\tDetermined least recently used ${i} in `+(f-c)+`ms\n\tRemoved ${a} targets in `+(_-f)+`ms\n\tRemoved ${S} documents in `+(E-_)+`ms\nTotal Duration: ${E-T}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class FV{constructor(e,t){this.db=e,this.garbageCollector=new OV(this,t)}On(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,i)=>t(i))}addReference(e,t,r){return ZT(e,r)}removeReference(e,t,r){return ZT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ZT(e,t)}Un(e,t){return function(r,i){let a=!1;return MP(r).Y(c=>RP(r,c,i).next(f=>(f&&(a=!0),ae.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Ln(e,(c,f)=>{if(f<=t){const _=this.Un(e,c).next(E=>{if(!E)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,At.min()),sf(e).delete([0,Zs(c.path)])))});i.push(_)}}).next(()=>ae.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ZT(e,t)}Ln(e,t){const r=sf(e);let i,a=bo.ot;return r.J({index:"documentTargetsIndex"},([c,f],{path:_,sequenceNumber:E})=>{0===c?(a!==bo.ot&&t(new ze(Wu(i)),a),a=E,i=_):a=bo.ot}).next(()=>{a!==bo.ot&&t(new ze(Wu(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ZT(n,e){return sf(n).put((r=n.currentSequenceNumber,{targetId:0,path:Zs(e.path),sequenceNumber:r}));var r}class OP{constructor(){this.changes=new tf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ae.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class LV{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Vg(e).put(r)}removeEntry(e,t,r){return Vg(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],FT(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=qn.newInvalidDocument(t);return Vg(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(kE(t))},(i,a)=>{r=this.Kn(t,a)}).next(()=>r)}Gn(e,t){let r={size:0,document:qn.newInvalidDocument(t)};return Vg(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(kE(t))},(i,a)=>{r={document:this.Kn(t,a),size:BT(a)}}).next(()=>r)}getEntries(e,t){let r=Io();return this.Qn(e,t,(i,a)=>{const c=this.Kn(i,a);r=r.insert(i,c)}).next(()=>r)}jn(e,t){let r=Io(),i=new br(ze.comparator);return this.Qn(e,t,(a,c)=>{const f=this.Kn(a,c);r=r.insert(a,f),i=i.insert(a,BT(c))}).next(()=>({documents:r,Wn:i}))}Qn(e,t,r){if(t.isEmpty())return ae.resolve();let i=new On(VP);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(kE(i.first()),kE(i.last())),c=i.getIterator();let f=c.getNext();return Vg(e).J({index:"documentKeyIndex",range:a},(_,E,T)=>{const S=ze.fromSegments([...E.prefixPath,E.collectionGroup,E.documentId]);for(;f&&VP(f,S)<0;)r(f,null),f=c.getNext();f&&f.isEqual(S)&&(r(f,E),f=c.hasNext()?c.getNext():null),f?T.q(kE(f)):T.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),FT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Vg(e).K(IDBKeyRange.bound(i,a,!0)).next(c=>{let f=Io();for(const _ of c){const E=this.Kn(ze.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);f=f.insert(E.key,E)}return f})}getAllFromCollectionGroup(e,t,r,i){let a=Io();const c=UP(t,r),f=UP(t,da.max());return Vg(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,f,!0)},(_,E,T)=>{const S=this.Kn(ze.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);a=a.insert(S.key,S),a.size===i&&T.done()}).next(()=>a)}newChangeBuffer(e){return new UV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return LP(e).get("remoteDocumentGlobalKey").next(t=>(xt(!!t),t))}qn(e,t){return LP(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function CV(n,e){let t;if(e.document)t=oP(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ze.fromSegments(e.noDocument.path),i=Ng(e.noDocument.readTime);t=qn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dt();{const r=ze.fromSegments(e.unknownDocument.path),i=Ng(e.unknownDocument.version);t=qn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new ir(r[0],r[1]);return At.fromTimestamp(i)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(At.min()))return r}return qn.newInvalidDocument(e)}}function FP(n){return new LV(n)}class UV extends OP{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new tf(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new On((a,c)=>Pt(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const f=this.Hn.get(a);if(t.push(this.zn.removeEntry(e,a,f.readTime)),c.isValidDocument()){const _=vP(this.zn.wt,c);i=i.add(a.path.popLast()),r+=BT(_)-f.size,t.push(this.zn.addEntry(e,a,_))}else if(r-=f.size,this.trackRemovals){const _=vP(this.zn.wt,c.convertToNoDocument(At.min()));t.push(this.zn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.zn.updateMetadata(e,r)),ae.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:i})=>(i.forEach((a,c)=>{this.Hn.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function LP(n){return Si(n,"remoteDocumentGlobal")}function Vg(n){return Si(n,"remoteDocumentsV14")}function kE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function UP(n,e){const t=e.documentKey.path.toArray();return[n,FT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function VP(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Pt(t[a],r[a]),i)return i;return i=Pt(t.length,r.length),i||(i=Pt(t[t.length-2],r[r.length-2]),i||Pt(t[t.length-1],r[r.length-1]))}class VV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class BP{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&mE(r.mutation,i,ha.empty(),ir.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,jt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=jt()){const i=qu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let c=_E();return a.forEach((f,_)=>{c=c.insert(f,_.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=qu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,jt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,r,i){let a=Io();const c=yE(),f=yE();return t.forEach((_,E)=>{const T=r.get(E.key);i.has(E.key)&&(void 0===T||T.mutation instanceof cd)?a=a.insert(E.key,E):void 0!==T&&(c.set(E.key,T.mutation.getFieldMask()),mE(T.mutation,E,T.mutation.getFieldMask(),ir.now()))}),this.recalculateAndSaveOverlays(e,a).next(_=>(_.forEach((E,T)=>c.set(E,T)),t.forEach((E,T)=>{var S;return f.set(E,new VV(T,null!==(S=c.get(E))&&void 0!==S?S:null))}),f))}recalculateAndSaveOverlays(e,t){const r=yE();let i=new br((c,f)=>c-f),a=jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(_=>{const E=t.get(_);if(null===E)return;let T=r.get(_)||ha.empty();T=f.applyToLocalView(E,T),r.set(_,T);const S=(i.get(f.batchId)||jt()).add(_);i=i.insert(f.batchId,S)})}).next(()=>{const c=[],f=i.getReverseIterator();for(;f.hasNext();){const _=f.getNext(),E=_.key,T=_.value,S=KN();T.forEach(N=>{if(!a.has(N)){const O=BN(t.get(N),r.get(N));null!==O&&S.set(N,O),a=a.add(N)}}),c.push(this.documentOverlayCache.saveOverlays(e,E,S))}return ae.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ze.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):zS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ae.resolve(qu());let f=-1,_=a;return c.next(E=>ae.forEach(E,(T,S)=>(f<S.largestBatchId&&(f=S.largestBatchId),a.get(T)?ae.resolve():this.getBaseDocument(e,T,S).next(N=>{_=_.insert(T,N)}))).next(()=>this.populateOverlays(e,E,a)).next(()=>this.computeViews(e,_,E,jt())).next(T=>({batchId:f,changes:zN(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ze(t)).next(r=>{let i=_E();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=_E();return this.indexManager.getCollectionParents(e,i).next(c=>ae.forEach(c,f=>{const _=(E=t,T=f.child(i),new ud(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,T;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(E=>{E.forEach((T,S)=>{a=a.insert(T,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((f,_)=>{const E=_.getKey();null===i.get(E)&&(i=i.insert(E,qn.newInvalidDocument(E)))});let c=_E();return i.forEach((f,_)=>{const E=a.get(f);void 0!==E&&mE(E.mutation,_,ha.empty(),ir.now()),YS(t,_)&&(c=c.insert(f,_))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ae.resolve(qn.newInvalidDocument(t))}}class BV{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return ae.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:Ai(r.createTime)}),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:sx(r.bundledQuery),readTime:Ai(r.readTime)}),ae.resolve();var r}}class jV{constructor(){this.overlays=new br(ze.comparator),this.Xn=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const r=qu();return ae.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ie(e,t,a)}),ae.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Xn.delete(r)),ae.resolve()}getOverlaysForCollection(e,t,r){const i=qu(),a=t.length+1,c=new ze(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const _=f.getNext().value,E=_.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return ae.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new br((E,T)=>E-T);const c=this.overlays.getIterator();for(;c.hasNext();){const E=c.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>r){let T=a.get(E.largestBatchId);null===T&&(T=qu(),a=a.insert(E.largestBatchId,T)),T.set(E.getKey(),E)}}const f=qu(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((E,T)=>f.set(E,T)),!(f.size()>=i)););return ae.resolve(f)}ie(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new ix(t,r));let a=this.Xn.get(t);void 0===a&&(a=jt(),this.Xn.set(t,a)),this.Xn.set(t,a.add(r.key))}}class lx{constructor(){this.Zn=new On(xi.ts),this.es=new On(xi.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new xi(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new xi(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new ze(new un([])),r=new xi(t,e),i=new xi(t,e+1),a=[];return this.es.forEachInRange([r,i],c=>{this.rs(c),a.push(c.key)}),a}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new ze(new un([])),r=new xi(t,e),i=new xi(t,e+1);let a=jt();return this.es.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new xi(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class xi{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return ze.comparator(e.key,t.key)||Pt(e.ls,t.ls)}static ns(e,t){return Pt(e.ls,t.ls)||ze.comparator(e.key,t.key)}}class ZV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new On(xi.ts)}checkEmpty(e){return ae.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.fs;this.fs++;const c=new nx(a,t,r,i);this.mutationQueue.push(c);for(const f of i)this.ds=this.ds.add(new xi(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ae.resolve(c)}lookupMutationBatch(e,t){return ae.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ws(t+1),a=i<0?0:i;return ae.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new xi(t,0),i=new xi(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],c=>{const f=this._s(c.ls);a.push(f)}),ae.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new On(Pt);return t.forEach(i=>{const a=new xi(i,0),c=new xi(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([a,c],f=>{r=r.add(f.ls)})}),ae.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;ze.isDocumentKey(a)||(a=a.child(""));const c=new xi(new ze(a),0);let f=new On(Pt);return this.ds.forEachWhile(_=>{const E=_.key.path;return!!r.isPrefixOf(E)&&(E.length===i&&(f=f.add(_.ls)),!0)},c),ae.resolve(this.gs(f))}gs(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){xt(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return ae.forEach(t.mutations,i=>{const a=new xi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new xi(t,0),i=this.ds.firstAfterOrEqual(r);return ae.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ae.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class HV{constructor(e){this.ps=e,this.docs=new br(ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ae.resolve(r?r.document.mutableCopy():qn.newInvalidDocument(t))}getEntries(e,t){let r=Io();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():qn.newInvalidDocument(i))}),ae.resolve(r)}getAllFromCollection(e,t,r){let i=Io();const a=new ze(t.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:f,value:{document:_}}=c.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||BS(sN(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return ae.resolve(i)}getAllFromCollectionGroup(e,t,r,i){dt()}Is(e,t){return ae.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new $V(this)}getSize(e){return ae.resolve(this.size)}}class $V extends OP{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),ae.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class qV{constructor(e){this.persistence=e,this.Ts=new tf(t=>xg(t),fE),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.Es=0,this.As=new lx,this.targetCount=0,this.Rs=Ug.An()}forEachTarget(e,t){return this.Ts.forEach((r,i)=>t(i)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),ae.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Ug(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.vn(t),ae.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Ts.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Ts.delete(c),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),ae.waitFor(a).next(()=>i)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return ae.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),ae.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),ae.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return ae.resolve(r)}containsKey(e,t){return ae.resolve(this.As.containsKey(t))}}class jP{constructor(e,t){this.bs={},this.overlays={},this.Ps=new bo(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new qV(this),this.indexManager=new kV,this.remoteDocumentCache=new HV(r=>this.referenceDelegate.Ss(r)),this.wt=new yP(t),this.Ds=new BV(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new ZV(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const i=new GV(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(a=>this.referenceDelegate.xs(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ns(e,t){return ae.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class GV extends aN{constructor(e){super(),this.currentSequenceNumber=e}}class HT{constructor(e){this.persistence=e,this.ks=new lx,this.Ms=null}static Os(e){return new HT(e)}get Fs(){if(this.Ms)return this.Ms;throw dt()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),ae.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),ae.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Fs.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Ms=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Fs,r=>{const i=ze.fromPath(r);return this.$s(e,i).next(a=>{a||t.removeEntry(i,At.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return ae.or([()=>ae.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class WV{constructor(e){this.wt=e}M(e,t,r,i){const a=new CT("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fP,{unique:!0}),f.createObjectStore("documentMutations"),ZP(e),function(f){f.createObjectStore("remoteDocuments")}(e));let c=ae.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),ZP(e)),c=c.next(()=>function(f){const _=f.store("targetGlobal"),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:At.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",E)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(f,_){return _.store("mutations").K().next(E=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fP,{unique:!0});const T=_.store("mutations"),S=E.map(N=>T.put(N));return ae.waitFor(S)})}(e,a))),c=c.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Bs(a))),r<6&&i>=6&&(c=c.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(a)))),r<7&&i>=7&&(c=c.next(()=>this.Us(a))),r<8&&i>=8&&(c=c.next(()=>this.qs(e,a))),r<9&&i>=9&&(c=c.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Ks(a))),r<11&&i>=11&&(c=c.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(f){const _=f.createObjectStore("documentOverlays",{keyPath:yV});_.createIndex("collectionPathOverlayIndex",vV,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",wV,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(f){const _=f.createObjectStore("remoteDocumentsV14",{keyPath:aV});_.createIndex("documentKeyIndex",lV),_.createIndex("collectionGroupIndex",uV)}(e)).next(()=>this.Gs(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.Qs(e,a))),r<15&&i>=15&&(c=c.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:pV}).createIndex("sequenceNumberIndex",gV,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:mV}).createIndex("documentKeyIndex",_V,{unique:!1})}(e))),c}Ls(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=BT(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(i=>ae.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",c).next(f=>ae.forEach(f,_=>{xt(_.userId===a.userId);const E=Pg(this.wt,_);return kP(e,a.userId,E).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.J((c,f)=>{const _=new un(c),E=[0,Zs(_)];a.push(t.get(E).next(T=>T?ae.resolve():t.put({targetId:0,path:Zs(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ae.waitFor(a))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:fV});const r=t.store("collectionParents"),i=new ax,a=c=>{if(i.add(c)){const f=c.lastSegment(),_=c.popLast();return r.put({collectionId:f,parent:Zs(_)})}};return t.store("remoteDocuments").J({H:!0},(c,f)=>{const _=new un(c);return a(_.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([c,f,_],E)=>{const T=Wu(f);return a(T.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,i)=>{const a=TE(i),c=wP(this.wt,a);return t.put(c)})}Gs(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((a,c)=>{const f=t.store("remoteDocumentsV14"),_=(E=c,E.document?new ze(un.fromString(E.document.name).popFirst(5)):E.noDocument?ze.fromSegments(E.noDocument.path):E.unknownDocument?ze.fromSegments(E.unknownDocument.path):dt()).path.toArray();var E;const T={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(f.put(T))}).next(()=>ae.waitFor(i))}Qs(e,t){const r=t.store("mutations"),i=FP(this.wt),a=new jP(HT.Os,this.wt.ne);return r.K().next(c=>{const f=new Map;return c.forEach(_=>{var E;let T=null!==(E=f.get(_.userId))&&void 0!==E?E:jt();Pg(this.wt,_).keys().forEach(S=>T=T.add(S)),f.set(_.userId,T)}),ae.forEach(f,(_,E)=>{const T=new Ti(E),S=LT.se(this.wt,T),N=a.getIndexManager(T),O=jT.se(T,this.wt,N,a.referenceDelegate);return new BP(i,O,S,N).recalculateAndSaveOverlaysForDocumentKeys(new tx(t,bo.ot),_).next()})})}}function ZP(n){n.createObjectStore("targetDocuments",{keyPath:dV}).createIndex("documentTargetsIndex",hV,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",cV,{unique:!0}),n.createObjectStore("targetGlobal")}const ux="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class cx{constructor(e,t,r,i,a,c,f,_,E,T,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=a,this.window=c,this.document=f,this.Ws=E,this.zs=T,this.Hs=S,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=N=>Promise.resolve(),!cx.V())throw new ke(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new FV(this,i),this.ei=t+"main",this.wt=new yP(_),this.ni=new Zl(this.ei,this.Hs,new WV(this.wt)),this.Vs=new MV(this.referenceDelegate,this.wt),this.remoteDocumentCache=FP(this.wt),this.Ds=new IV,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===T&&Pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ke(fe.FAILED_PRECONDITION,ux);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new bo(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,ge.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,ge.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,ge.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>$T(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(Yh(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return RE(e).get("owner").next(t=>ae.resolve(this.di(t)))}_i(e){return $T(e).delete(this.clientId)}wi(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Si(r,"clientMetadata");return i.K().next(a=>{const c=e.gi(a,18e5),f=a.filter(_=>-1===c.indexOf(_));return ae.forEach(f,_=>i.delete(_.clientId)).next(()=>f)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?ae.resolve(!0):RE(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new ke(fe.FAILED_PRECONDITION,ux);return!1}}return!(!this.networkEnabled||!this.inForeground)||$T(e).K().next(r=>void 0===this.gi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new tx(t,bo.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>$T(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return jT.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new RV(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return LT.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(c=this.Hs)?bV:14===c?_P:13===c?mP:12===c?EV:11===c?gP:void dt();var c;let f;return this.ni.runTransaction(e,i,a,_=>(f=new tx(_,this.Ps?this.Ps.next():bo.ot),"readwrite-primary"===t?this.ai(f).next(E=>!!E||this.hi(f)).next(E=>{if(!E)throw Pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new ke(fe.FAILED_PRECONDITION,oN);return r(f)}).next(E=>this.fi(f).next(()=>E)):this.bi(f).next(()=>r(f)))).then(_=>(f.raiseOnCommittedEvent(),_))}bi(e){return RE(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ke(fe.FAILED_PRECONDITION,ux)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return RE(e).put("owner",t)}static V(){return Zl.V()}li(e){const t=RE(e);return t.get("owner").next(r=>this.di(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ae.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Pr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,P.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Pr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Pr("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(e){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function RE(n){return Si(n,"owner")}function $T(n){return Si(n,"clientMetadata")}function dx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class hx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=i}static Vi(e,t){let r=jt(),i=jt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new hx(e,t.fromCache,r,i)}}class HP{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ci(e,t).next(a=>a||this.xi(e,t,i,r)).next(a=>a||this.Ni(e,t))}Ci(e,t){if(SN(t))return ae.resolve(null);let r=Co(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=xT(t,null,"F"),r=Co(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=jt(...a);return this.Di.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,r).next(_=>{const E=this.ki(t,f);return this.Mi(t,E,c,_.readTime)?this.Ci(e,xT(t,null,"F")):this.Oi(e,E,t,_)}))})))}xi(e,t,r,i){return SN(t)||i.isEqual(At.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(a=>{const c=this.ki(t,a);return this.Mi(t,c,r,i)?this.Ni(e,t):(LS()<=Jo.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),KS(t)),this.Oi(e,c,t,iN(i,-1)))})}ki(e,t){let r=new On(RN(e));return t.forEach((i,a)=>{YS(e,a)&&(r=r.add(a))}),r}Mi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ni(e,t){return LS()<=Jo.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",KS(t)),this.Di.getDocumentsMatchingQuery(e,t,da.min())}Oi(e,t,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}class zV{constructor(e,t,r,i){this.persistence=e,this.Fi=t,this.wt=i,this.$i=new br(Pt),this.Bi=new tf(a=>xg(a),fE),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BP(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function $P(n,e,t,r){return new zV(n,e,t,r)}function qP(n,e){return fx.apply(this,arguments)}function fx(){return fx=(0,ge.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],f=[];let _=jt();for(const E of i){c.push(E.batchId);for(const T of E.mutations)_=_.add(T.key)}for(const E of a){f.push(E.batchId);for(const T of E.mutations)_=_.add(T.key)}return t.localDocuments.getDocuments(r,_).next(E=>({Ki:E,removedBatchIds:c,addedBatchIds:f}))})})}),fx.apply(this,arguments)}function KV(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Ui.newChangeBuffer({trackRemovals:!0});return function(c,f,_,E){const T=_.batch,S=T.keys();let N=ae.resolve();return S.forEach(O=>{N=N.next(()=>E.getEntry(f,O)).next(j=>{const ie=_.docVersions.get(O);xt(null!==ie),j.version.compareTo(ie)<0&&(T.applyToRemoteDocument(j,_),j.isValidDocument()&&(j.setReadTime(_.commitVersion),E.addEntry(j)))})}),N.next(()=>c.mutationQueue.removeMutationBatch(f,T))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let f=jt();for(let _=0;_<c.mutationResults.length;++_)c.mutationResults[_].transformResults.length>0&&(f=f.add(c.batch.mutations[_].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function GP(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function YV(n,e){const t=Ye(n),r=e.snapshotVersion;let i=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Ui.newChangeBuffer({trackRemovals:!0});i=t.$i;const f=[];e.targetChanges.forEach((T,S)=>{const N=i.get(S);if(!N)return;f.push(t.Vs.removeMatchingKeys(a,T.removedDocuments,S).next(()=>t.Vs.addMatchingKeys(a,T.addedDocuments,S)));let O=N.withSequenceNumber(a.currentSequenceNumber);var j,ie,_e;e.targetMismatches.has(S)?O=O.withResumeToken(ci.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):T.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(T.resumeToken,r)),i=i.insert(S,O),ie=O,_e=T,(0===(j=N).resumeToken.approximateByteSize()||ie.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8||_e.addedDocuments.size+_e.modifiedDocuments.size+_e.removedDocuments.size>0)&&f.push(t.Vs.updateTargetData(a,O))});let _=Io(),E=jt();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,T))}),f.push(WP(a,c,e.documentUpdates).next(T=>{_=T.Gi,E=T.Qi})),!r.isEqual(At.min())){const T=t.Vs.getLastRemoteSnapshotVersion(a).next(S=>t.Vs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(T)}return ae.waitFor(f).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,_,E)).next(()=>_)}).then(a=>(t.$i=i,a))}function WP(n,e,t){let r=jt(),i=jt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=Io();return t.forEach((f,_)=>{const E=a.get(f);_.isFoundDocument()!==E.isFoundDocument()&&(i=i.add(f)),_.isNoDocument()&&_.version.isEqual(At.min())?(e.removeEntry(f,_.readTime),c=c.insert(f,_)):!E.isValidDocument()||_.version.compareTo(E.version)>0||0===_.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(_),c=c.insert(f,_)):Oe("LocalStore","Ignoring outdated watch update for ",f,". Current version:",E.version," Watch version:",_.version)}),{Gi:c,Qi:i}})}function QV(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _y(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Vs.getTargetData(r,e).next(a=>a?(i=a,ae.resolve(i)):t.Vs.allocateTargetId(r).next(c=>(i=new nf(e,c,0,r.currentSequenceNumber),t.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function yy(n,e,t){return px.apply(this,arguments)}function px(){return px=(0,ge.Z)(function*(n,e,t){const r=Ye(n),i=r.$i.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Yh(c))throw c;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}),px.apply(this,arguments)}function qT(n,e,t){const r=Ye(n);let i=At.min(),a=jt();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,_,E){const T=Ye(f),S=T.Bi.get(E);return void 0!==S?ae.resolve(T.$i.get(S)):T.Vs.getTargetData(_,E)}(r,c,Co(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(c,f.targetId).next(_=>{a=_})}).next(()=>r.Fi.getDocumentsMatchingQuery(c,e,t?i:At.min(),t?a:jt())).next(f=>(YP(r,kN(e),f),{documents:f,ji:a})))}function zP(n,e){const t=Ye(n),r=Ye(t.Vs),i=t.$i.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.te(a,e).next(c=>c?c.target:null))}function KP(n,e){const t=Ye(n),r=t.Li.get(e)||At.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ui.getAllFromCollectionGroup(i,e,iN(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(YP(t,e,i),i))}function YP(n,e,t){let r=At.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Li.set(e,r)}function gx(){return gx=(0,ge.Z)(function*(n,e,t,r){const i=Ye(n);let a=jt(),c=Io();for(const E of t){const T=e.Wi(E.metadata.name);E.document&&(a=a.add(T));const S=e.zi(E);S.setReadTime(e.Hi(E.metadata.readTime)),c=c.insert(T,S)}const f=i.Ui.newChangeBuffer({trackRemovals:!0}),_=yield _y(i,(E=r,Co(ay(un.fromString(`__bundle__/docs/${E}`)))));var E;return i.persistence.runTransaction("Apply bundle documents","readwrite",E=>WP(E,f,c).next(T=>(f.apply(E),T)).next(T=>i.Vs.removeMatchingKeysForTargetId(E,_.targetId).next(()=>i.Vs.addMatchingKeys(E,a,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(E,T.Gi,T.Qi)).next(()=>T.Gi)))}),gx.apply(this,arguments)}function XV(n,e){return mx.apply(this,arguments)}function mx(){return mx=(0,ge.Z)(function*(n,e,t=jt()){const r=yield _y(n,Co(sx(e.bundledQuery))),i=Ye(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=Ai(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ds.saveNamedQuery(a,e);const f=r.withResumeToken(ci.EMPTY_BYTE_STRING,c);return i.$i=i.$i.insert(f.targetId,f),i.Vs.updateTargetData(a,f).next(()=>i.Vs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Vs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ds.saveNamedQuery(a,e))})}),mx.apply(this,arguments)}function QP(n,e){return`firestore_clients_${n}_${e}`}function JP(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function _x(n,e){return`firestore_targets_${n}_${e}`}class GT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new ke(i.error.code,i.error.message))),c?new GT(e,t,i.state,a):(Pr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ME{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new ke(r.error.code,r.error.message))),a?new ME(e,r.state,i):(Pr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class WT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=NT();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=fN(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new WT(e,a):(Pr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class yx{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new yx(t.clientId,t.onlineState):(Pr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class vx{constructor(){this.activeTargetIds=NT()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wx{constructor(e,t,r,i,a){this.window=e,this.js=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new br(Pt),this.started=!1,this.ir=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=QP(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new vx),this.cr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const t=yield e.syncEngine.Ri();for(const i of t){if(i===e.tr)continue;const a=e.getItem(QP(e.persistenceKey,i));if(a){const c=WT.Ji(i,a);c&&(e.sr=e.sr.insert(c.clientId,c))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(_x(this.persistenceKey,e));if(r){const i=ME.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_x(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,ge.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(a){let c=bo.ot;if(null!=a)try{const f=JSON.parse(a);xt("number"==typeof f),c=f}catch(f){Pr("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);i!==bo.ot&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Nr(a)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new GT(this.currentUser,e,t,r),a=JP(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Yi())}pr(e){const t=JP(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=_x(this.persistenceKey,e),a=new ME(e,t,r);this.setItem(i,a.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return WT.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),i=Number(r[1]);return GT.Ji(new Ti(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return ME.Ji(i,t)}wr(e){return yx.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),c=[],f=[];return a.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{a.has(_)||f.push(_)}),this.syncEngine.Or(c,f).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=NT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class XP{constructor(){this.Fr=new vx,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new vx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class eB{Br(e){}shutdown(){}}class eO{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const tB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class nB{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class rB extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,a){const c=this.oo(e,t);Oe("RestConnection","Sending: ",c,r);const f={};return this.uo(f,i,a),this.co(e,c,f,r).then(_=>(Oe("RestConnection","Received: ",_),_),_=>{throw bg("RestConnection",`${e} failed with error: `,_,"url: ",c,"request:",r),_})}ao(e,t,r,i,a,c){return this.ro(e,t,r,i,a)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ny,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}oo(e,t){return`${this.so}/v1/${t}:${tB[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((a,c)=>{const f=new tU;f.listenOnce(JL.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case FS.NO_ERROR:const E=f.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(E)),a(E);break;case FS.TIMEOUT:Oe("Connection",'RPC "'+e+'" timed out'),c(new ke(fe.DEADLINE_EXCEEDED,"Request time out"));break;case FS.HTTP_ERROR:const T=f.getStatus();if(Oe("Connection",'RPC "'+e+'" failed with status:',T,"response text:",f.getResponseText()),T>0){const S=f.getResponseJson().error;if(S&&S.status&&S.message){const N=function(O){const j=O.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(j)>=0?j:fe.UNKNOWN}(S.status);c(new ke(N,S.message))}else c(new ke(fe.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new ke(fe.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{Oe("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);f.send(t,"POST",_,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=YL(),c=QL(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new eU({})),this.uo(f.initMessageHeaders,t,r),(0,P.uI)()||(0,P.b$)()||(0,P.d)()||(0,P.w1)()||(0,P.Mn)()||(0,P.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");Oe("Connection","Creating WebChannel: "+_,f);const E=a.createWebChannel(_,f);let T=!1,S=!1;const N=new nB({jr:j=>{S?Oe("Connection","Not sending because WebChannel is closed:",j):(T||(Oe("Connection","Opening WebChannel transport."),E.open(),T=!0),Oe("Connection","WebChannel sending:",j),E.send(j))},Wr:()=>E.close()}),O=(j,ie,_e)=>{j.listen(ie,Be=>{try{_e(Be)}catch(lt){setTimeout(()=>{throw lt},0)}})};return O(E,wT.EventType.OPEN,()=>{S||Oe("Connection","WebChannel transport opened.")}),O(E,wT.EventType.CLOSE,()=>{S||(S=!0,Oe("Connection","WebChannel transport closed"),N.eo())}),O(E,wT.EventType.ERROR,j=>{S||(S=!0,bg("Connection","WebChannel transport errored:",j),N.eo(new ke(fe.UNAVAILABLE,"The operation could not be completed")))}),O(E,wT.EventType.MESSAGE,j=>{var ie;if(!S){const _e=j.data[0];xt(!!_e);const Be=_e,lt=Be.error||(null===(ie=Be[0])||void 0===ie?void 0:ie.error);if(lt){Oe("Connection","WebChannel received error:",lt);const Xe=lt.status;let Qe=function(Ot){const hr=Wr[Ot];if(void 0!==hr)return GN(hr)}(Xe),bt=lt.message;void 0===Qe&&(Qe=fe.INTERNAL,bt="Unknown error status: "+Xe+" with message "+lt.message),S=!0,N.eo(new ke(Qe,bt)),E.close()}else Oe("Connection","WebChannel received:",_e),N.no(_e)}}),O(c,XL.STAT_EVENT,j=>{j.stat===JM.PROXY?Oe("Connection","Detected buffering proxy"):j.stat===JM.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.Zr()},0),N}}function tO(){return"undefined"!=typeof window?window:null}function zT(){return"undefined"!=typeof document?document:null}function NE(n){return new zU(n,!0)}class Ex{constructor(e,t,r=1e3,i=1.5,a=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class nO{constructor(e,t,r,i,a,c,f,_){this.js=e,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=_,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Ex(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ge.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,ge.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,ge.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(Pr(t.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new ke(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,ge.Z)(function*(){e.state=0,e.start()}))}qo(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iB extends nO{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.wt=a}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function QU(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:dt(),i=e.targetChange.targetIds||[],a=function(_,E){return _.dt?(xt(void 0===E||"string"==typeof E),ci.fromBase64String(E||"")):(xt(void 0===E||E instanceof Uint8Array),ci.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(_){const E=void 0===_.code?fe.UNKNOWN:GN(_.code);return new ke(E,_.message||"")}(c);t=new QN(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Gu(n,r.document.name),a=Ai(r.document.updateTime),c=new Gi({mapValue:{fields:r.document.fields}}),f=qn.newFoundDocument(i,a,c);t=new PT(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=Gu(n,r.document),a=r.readTime?Ai(r.readTime):At.min(),c=qn.newNoDocument(i,a);t=new PT([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Gu(n,r.document);t=new PT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return dt();{const r=e.filter,a=new BU(r.count||0);t=new YN(r.targetId,a)}}var _;return t}(this.wt,e),r=function(i){if(!("targetChange"in i))return At.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?At.min():a.readTime?Ai(a.readTime):At.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=CE(this.wt),t.addTarget=function(i,a){let c;const f=a.target;return c=AT(f)?{documents:aP(i,f)}:{query:lP(i,f)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=tP(i,a.resumeToken):a.snapshotVersion.compareTo(At.min())>0&&(c.readTime=EE(i,a.snapshotVersion.toTimestamp())),c}(this.wt,e);const r=function XU(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=CE(this.wt),t.removeTarget=e,this.Oo(t)}}class sB extends nO{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.wt=a,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(xt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function JU(n,e){return n&&n.length>0?(xt(void 0!==e),n.map(t=>function(r,i){let a=Ai(r.updateTime?r.updateTime:i);return a.isEqual(At.min())&&(a=Ai(i)),new LU(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ai(e.commitTime);return this.listener.Jo(r,t)}return xt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=CE(this.wt),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>IE(this.wt,r))};this.Oo(t)}}class oB extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new ke(fe.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ro(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ke(fe.UNKNOWN,i.toString())})}ao(e,t,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.bo.ao(e,t,r,a,c,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ke(fe.UNKNOWN,a.toString())})}terminate(){this.Zo=!0}}class aB{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Pr(t),this.su=!1):Oe("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class lB{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br(f=>{r.enqueueAndForget((0,ge.Z)(function*(){var _;af(c)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,ge.Z)(function*(E){const T=Ye(E);T.lu.add(4),yield vy(T),T._u.set("Unknown"),T.lu.delete(4),yield PE(T)}),function(E){return _.apply(this,arguments)})(c))}))}),this._u=new aB(r,i)}}function PE(n){return bx.apply(this,arguments)}function bx(){return bx=(0,ge.Z)(function*(n){if(af(n))for(const e of n.fu)yield e(!0)}),bx.apply(this,arguments)}function vy(n){return Cx.apply(this,arguments)}function Cx(){return Cx=(0,ge.Z)(function*(n){for(const e of n.fu)yield e(!1)}),Cx.apply(this,arguments)}function KT(n,e){const t=Ye(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),Dx(t)?Tx(t):Ey(t).Co()&&Ix(t,e))}function OE(n,e){const t=Ye(n),r=Ey(t);t.hu.delete(e),r.Co()&&rO(t,e),0===t.hu.size&&(r.Co()?r.ko():af(t)&&t._u.set("Unknown"))}function Ix(n,e){n.wu.Nt(e.targetId),Ey(n).Qo(e)}function rO(n,e){n.wu.Nt(e),Ey(n).jo(e)}function Tx(n){n.wu=new qU({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),Ey(n).start(),n._u.iu()}function Dx(n){return af(n)&&!Ey(n).Do()&&n.hu.size>0}function af(n){return 0===Ye(n).lu.size}function iO(n){n.wu=void 0}function uB(n){return Ax.apply(this,arguments)}function Ax(){return Ax=(0,ge.Z)(function*(n){n.hu.forEach((e,t)=>{Ix(n,e)})}),Ax.apply(this,arguments)}function cB(n,e){return Sx.apply(this,arguments)}function Sx(){return Sx=(0,ge.Z)(function*(n,e){iO(n),Dx(n)?(n._u.uu(e),Tx(n)):n._u.set("Unknown")}),Sx.apply(this,arguments)}function dB(n,e,t){return xx.apply(this,arguments)}function xx(){return xx=(0,ge.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof QN&&2===e.state&&e.cause)try{yield(r=(0,ge.Z)(function*(i,a){const c=a.cause;for(const f of a.targetIds)i.hu.has(f)&&(yield i.remoteSyncer.rejectListen(f,c),i.hu.delete(f),i.wu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield YT(n,r)}else if(e instanceof PT?n.wu.Ut(e):e instanceof YN?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(At.min()))try{const r=yield GP(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.wu.Yt(a);return c.targetChanges.forEach((f,_)=>{if(f.resumeToken.approximateByteSize()>0){const E=i.hu.get(_);E&&i.hu.set(_,E.withResumeToken(f.resumeToken,a))}}),c.targetMismatches.forEach(f=>{const _=i.hu.get(f);if(!_)return;i.hu.set(f,_.withResumeToken(ci.EMPTY_BYTE_STRING,_.snapshotVersion)),rO(i,f);const E=new nf(_.target,f,1,_.sequenceNumber);Ix(i,E)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield YT(n,r)}var r}),xx.apply(this,arguments)}function YT(n,e,t){return kx.apply(this,arguments)}function kx(){return kx=(0,ge.Z)(function*(n,e,t){if(!Yh(e))throw e;n.lu.add(1),yield vy(n),n._u.set("Offline"),t||(t=()=>GP(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield PE(n)}))}),kx.apply(this,arguments)}function sO(n,e){return e().catch(t=>YT(n,t,e))}function wy(n){return Rx.apply(this,arguments)}function Rx(){return Rx=(0,ge.Z)(function*(n){const e=Ye(n),t=lf(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;hB(e);)try{const i=yield QV(e.localStore,r);if(null===i){0===e.au.length&&t.ko();break}r=i.batchId,fB(e,i)}catch(i){yield YT(e,i)}oO(e)&&aO(e)}),Rx.apply(this,arguments)}function hB(n){return af(n)&&n.au.length<10}function fB(n,e){n.au.push(e);const t=lf(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function oO(n){return af(n)&&!lf(n).Do()&&n.au.length>0}function aO(n){lf(n).start()}function pB(n){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,ge.Z)(function*(n){lf(n).Xo()}),Mx.apply(this,arguments)}function gB(n){return Nx.apply(this,arguments)}function Nx(){return Nx=(0,ge.Z)(function*(n){const e=lf(n);for(const t of n.au)e.Ho(t.mutations)}),Nx.apply(this,arguments)}function mB(n,e,t){return Px.apply(this,arguments)}function Px(){return Px=(0,ge.Z)(function*(n,e,t){const r=n.au.shift(),i=rx.from(r,e,t);yield sO(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield wy(n)}),Px.apply(this,arguments)}function _B(n,e){return Ox.apply(this,arguments)}function Ox(){return Ox=(0,ge.Z)(function*(n,e){var t;e&&lf(n).zo&&(yield(t=(0,ge.Z)(function*(r,i){if(qN(a=i.code)&&a!==fe.ABORTED){const c=r.au.shift();lf(r).No(),yield sO(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield wy(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),oO(n)&&aO(n)}),Ox.apply(this,arguments)}function lO(n,e){return Fx.apply(this,arguments)}function Fx(){return Fx=(0,ge.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=af(t);t.lu.add(3),yield vy(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield PE(t)}),Fx.apply(this,arguments)}function Lx(n,e){return Ux.apply(this,arguments)}function Ux(){return Ux=(0,ge.Z)(function*(n,e){const t=Ye(n);e?(t.lu.delete(2),yield PE(t)):e||(t.lu.add(2),yield vy(t),t._u.set("Unknown"))}),Ux.apply(this,arguments)}function Ey(n){return n.mu||(n.mu=function(e,t,r){const i=Ye(e);return i.tu(),new iB(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:uB.bind(null,n),Jr:cB.bind(null,n),Go:dB.bind(null,n)}),n.fu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.mu.No(),Dx(n)?Tx(n):n._u.set("Unknown")):(yield n.mu.stop(),iO(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function lf(n){return n.gu||(n.gu=function(e,t,r){const i=Ye(e);return i.tu(),new sB(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:pB.bind(null,n),Jr:_B.bind(null,n),Yo:gB.bind(null,n),Jo:mB.bind(null,n)}),n.fu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.gu.No(),yield wy(n)):(yield n.gu.stop(),n.au.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class Vx{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,f=new Vx(e,t,c,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ke(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function by(n,e){if(Pr("AsyncQueue",`${e}: ${n}`),Yh(n))return new ke(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class Cy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ze.comparator(t.key,r.key):(t,r)=>ze.comparator(t.key,r.key),this.keyedMap=_E(),this.sortedSet=new br(this.comparator)}static emptySet(e){return new Cy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Cy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Cy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class uO{constructor(){this.yu=new br(ze.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):dt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Iy{constructor(e,t,r,i,a,c,f,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new Iy(e,t,Cy.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class yB{constructor(){this.Iu=void 0,this.listeners=[]}}class vB{constructor(){this.queries=new tf(e=>xN(e),pE),this.onlineState="Unknown",this.Tu=new Set}}function Bx(n,e){return jx.apply(this,arguments)}function jx(){return jx=(0,ge.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new yB),i)try{a.Iu=yield t.onListen(r)}catch(c){const f=by(c,`Initialization of query '${KS(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.Eu(t.onlineState),a.Iu&&e.Au(a.Iu)&&$x(t)}),jx.apply(this,arguments)}function Zx(n,e){return Hx.apply(this,arguments)}function Hx(){return Hx=(0,ge.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Hx.apply(this,arguments)}function wB(n,e){const t=Ye(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const f of c.listeners)f.Au(i)&&(r=!0);c.Iu=i}}r&&$x(t)}function EB(n,e,t){const r=Ye(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function $x(n){n.Tu.forEach(e=>{e.next()})}class qx{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Iy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Iy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class bB{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class cO{constructor(e){this.wt=e}Wi(e){return Gu(this.wt,e)}zi(e){return e.metadata.exists?oP(this.wt,e.document,!1):qn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Ai(e)}}class CB{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=dO(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=un.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new cO(this.wt);for(const i of e)if(i.metadata.queries){const a=r.Wi(i.metadata.name);for(const c of i.metadata.queries){const f=(t.get(c)||jt()).add(a);t.set(c,f)}}return t}complete(){var e=this;return(0,ge.Z)(function*(){const t=yield function JV(n,e,t,r){return gx.apply(this,arguments)}(e.localStore,new cO(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield XV(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function dO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class hO{constructor(e){this.key=e}}class fO{constructor(e){this.key=e}}class pO{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=jt(),this.mutatedKeys=jt(),this.Lu=RN(e),this.Uu=new Cy(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new uO,i=t?t.Uu:this.Uu;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,E="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,S)=>{const N=i.get(T),O=YS(this.query,S)?S:null,j=!!N&&this.mutatedKeys.has(N.key),ie=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let _e=!1;N&&O?N.data.isEqual(O.data)?j!==ie&&(r.track({type:3,doc:O}),_e=!0):this.Qu(N,O)||(r.track({type:2,doc:O}),_e=!0,(_&&this.Lu(O,_)>0||E&&this.Lu(O,E)<0)&&(f=!0)):!N&&O?(r.track({type:0,doc:O}),_e=!0):N&&!O&&(r.track({type:1,doc:N}),_e=!0,(_||E)&&(f=!0)),_e&&(O?(c=c.add(O),a=ie?a.add(T):a.delete(T)):(c=c.delete(T),a=a.delete(T)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const T="F"===this.query.limitType?c.last():c.first();c=c.delete(T.key),a=a.delete(T.key),r.track({type:1,doc:T})}return{Uu:c,Gu:r,Mi:f,mutatedKeys:a}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const a=e.Gu.pu();a.sort((E,T)=>function(S,N){const O=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return O(S)-O(N)}(E.type,T.type)||this.Lu(E.doc,T.doc)),this.ju(r);const c=t?this.Wu():[],f=0===this.Bu.size&&this.current?1:0,_=f!==this.$u;return this.$u=f,0!==a.length||_?{snapshot:new Iy(this.query,e.Uu,i,a,e.mutatedKeys,0===f,_,!1),zu:c}:{zu:c}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new uO,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=jt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new fO(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new hO(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=jt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Iy.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class IB{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class TB{constructor(e){this.key=e,this.Xu=!1}}class DB{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Zu={},this.tc=new tf(f=>xN(f),pE),this.ec=new Map,this.nc=new Set,this.sc=new br(ze.comparator),this.ic=new Map,this.rc=new lx,this.oc={},this.uc=new Map,this.cc=Ug.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function AB(n,e){return Gx.apply(this,arguments)}function Gx(){return Gx=(0,ge.Z)(function*(n,e){const t=gk(n);let r,i;const a=t.tc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Yu();else{const c=yield _y(t.localStore,Co(e));t.isPrimaryClient&&KT(t.remoteStore,c);const f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield Wx(t,e,r,"current"===f)}return i}),Gx.apply(this,arguments)}function Wx(n,e,t,r){return zx.apply(this,arguments)}function zx(){return zx=(0,ge.Z)(function*(n,e,t,r){n.hc=(T,S,N)=>{return(O=(0,ge.Z)(function*(j,ie,_e,Be){let lt=ie.view.Ku(_e);lt.Mi&&(lt=yield qT(j.localStore,ie.query,!1).then(({documents:bt})=>ie.view.Ku(bt,lt)));const Xe=Be&&Be.targetChanges.get(ie.targetId),Qe=ie.view.applyChanges(lt,j.isPrimaryClient,Xe);return ik(j,ie.targetId,Qe.zu),Qe.snapshot}),function(j,ie,_e,Be){return O.apply(this,arguments)})(n,T,S,N);var O};const i=yield qT(n.localStore,e,!0),a=new pO(e,i.ji),c=a.Ku(i.documents),f=wE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=a.applyChanges(c,n.isPrimaryClient,f);ik(n,t,_.zu);const E=new IB(e,t,a);return n.tc.set(e,E),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),_.snapshot}),zx.apply(this,arguments)}function SB(n,e){return Kx.apply(this,arguments)}function Kx(){return Kx=(0,ge.Z)(function*(n,e){const t=Ye(n),r=t.tc.get(e),i=t.ec.get(r.targetId);if(i.length>1)return t.ec.set(r.targetId,i.filter(a=>!pE(a,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield yy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),OE(t.remoteStore,r.targetId),Ty(t,r.targetId)}).catch(Kh))):(Ty(t,r.targetId),yield yy(t.localStore,r.targetId,!0))}),Kx.apply(this,arguments)}function Yx(){return Yx=(0,ge.Z)(function*(n,e,t){const r=mk(n);try{const i=yield function(a,c){const f=Ye(a),_=ir.now(),E=c.reduce((N,O)=>N.add(O.key),jt());let T,S;return f.persistence.runTransaction("Locally write mutations","readwrite",N=>{let O=Io(),j=jt();return f.Ui.getEntries(N,E).next(ie=>{O=ie,O.forEach((_e,Be)=>{Be.isValidDocument()||(j=j.add(_e))})}).next(()=>f.localDocuments.getOverlayedDocuments(N,O)).next(ie=>{T=ie;const _e=[];for(const Be of c){const lt=VU(Be,T.get(Be.key).overlayedDocument);null!=lt&&_e.push(new cd(Be.key,lt,wN(lt.value.mapValue),dr.exists(!0)))}return f.mutationQueue.addMutationBatch(N,_,_e,c)}).next(ie=>{S=ie;const _e=ie.applyToLocalDocumentSet(T,j);return f.documentOverlayCache.saveOverlays(N,ie.batchId,_e)})}).then(()=>({batchId:S.batchId,changes:zN(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,f){let _=a.oc[a.currentUser.toKey()];_||(_=new br(Pt)),_=_.insert(c,f),a.oc[a.currentUser.toKey()]=_}(r,i.batchId,t),yield dd(r,i.changes),yield wy(r.remoteStore)}catch(i){const a=by(i,"Failed to persist write");t.reject(a)}}),Yx.apply(this,arguments)}function gO(n,e){return Qx.apply(this,arguments)}function Qx(){return Qx=(0,ge.Z)(function*(n,e){const t=Ye(n);try{const r=yield YV(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.ic.get(a);c&&(xt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Xu=!0:i.modifiedDocuments.size>0?xt(c.Xu):i.removedDocuments.size>0&&(xt(c.Xu),c.Xu=!1))}),yield dd(t,r,e)}catch(r){yield Kh(r)}}),Qx.apply(this,arguments)}function mO(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.tc.forEach((a,c)=>{const f=c.view.Eu(e);f.snapshot&&i.push(f.snapshot)}),function(a,c){const f=Ye(a);f.onlineState=c;let _=!1;f.queries.forEach((E,T)=>{for(const S of T.listeners)S.Eu(c)&&(_=!0)}),_&&$x(f)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function kB(n,e,t){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,ge.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ic.get(e),a=i&&i.key;if(a){let c=new br(ze.comparator);c=c.insert(a,qn.newNoDocument(a,At.min()));const f=jt().add(a),_=new vE(At.min(),new Map,new On(Pt),c,f);yield gO(r,_),r.sc=r.sc.remove(a),r.ic.delete(e),sk(r)}else yield yy(r.localStore,e,!1).then(()=>Ty(r,e,t)).catch(Kh)}),Jx.apply(this,arguments)}function RB(n,e){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,ge.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const i=yield KV(t.localStore,e);rk(t,r,null),nk(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield dd(t,i)}catch(i){yield Kh(i)}}),Xx.apply(this,arguments)}function MB(n,e,t){return ek.apply(this,arguments)}function ek(){return ek=(0,ge.Z)(function*(n,e,t){const r=Ye(n);try{const i=yield function(a,c){const f=Ye(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let E;return f.mutationQueue.lookupMutationBatch(_,c).next(T=>(xt(null!==T),E=T.keys(),f.mutationQueue.removeMutationBatch(_,T))).next(()=>f.mutationQueue.performConsistencyCheck(_)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(_,E,c)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E)).next(()=>f.localDocuments.getDocuments(_,E))})}(r.localStore,e);rk(r,e,t),nk(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield dd(r,i)}catch(i){yield Kh(i)}}),ek.apply(this,arguments)}function tk(){return tk=(0,ge.Z)(function*(n,e){const t=Ye(n);af(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=Ye(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.uc.get(r)||[];i.push(e),t.uc.set(r,i)}catch(r){const i=by(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),tk.apply(this,arguments)}function nk(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function rk(n,e,t){const r=Ye(n);let i=r.oc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function Ty(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||_O(n,r)})}function _O(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(OE(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),sk(n))}function ik(n,e,t){for(const r of t)r instanceof hO?(n.rc.addReference(r.key,e),PB(n,r)):r instanceof fO?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||_O(n,r.key)):dt()}function PB(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.nc.add(r),sk(n))}function sk(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new ze(un.fromString(e)),r=n.cc.next();n.ic.set(r,new TB(t)),n.sc=n.sc.insert(t,r),KT(n.remoteStore,new nf(Co(ay(t.path)),r,2,bo.ot))}}function dd(n,e,t){return ok.apply(this,arguments)}function ok(){return ok=(0,ge.Z)(function*(n,e,t){const r=Ye(n),i=[],a=[],c=[];var f;r.tc.isEmpty()||(r.tc.forEach((f,_)=>{c.push(r.hc(_,e,t).then(E=>{if(E){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,E.fromCache?"not-current":"current"),i.push(E);const T=hx.Vi(_.targetId,E);a.push(T)}}))}),yield Promise.all(c),r.Zu.Go(i),yield(f=(0,ge.Z)(function*(_,E){const T=Ye(_);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ae.forEach(E,N=>ae.forEach(N.Pi,O=>T.persistence.referenceDelegate.addReference(S,N.targetId,O)).next(()=>ae.forEach(N.vi,O=>T.persistence.referenceDelegate.removeReference(S,N.targetId,O)))))}catch(S){if(!Yh(S))throw S;Oe("LocalStore","Failed to update sequence numbers: "+S)}for(const S of E){const N=S.targetId;if(!S.fromCache){const O=T.$i.get(N),ie=O.withLastLimboFreeSnapshotVersion(O.snapshotVersion);T.$i=T.$i.insert(N,ie)}}}),function(_,E){return f.apply(this,arguments)})(r.localStore,a))}),ok.apply(this,arguments)}function OB(n,e){return ak.apply(this,arguments)}function ak(){return ak=(0,ge.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield qP(t.localStore,e);t.currentUser=e,(i=t).uc.forEach(c=>{c.forEach(f=>{f.reject(new ke(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield dd(t,r.Ki)}var i}),ak.apply(this,arguments)}function FB(n,e){const t=Ye(n),r=t.ic.get(e);if(r&&r.Xu)return jt().add(r.key);{let i=jt();const a=t.ec.get(e);if(!a)return i;for(const c of a){const f=t.tc.get(c);i=i.unionWith(f.view.qu)}return i}}function LB(n,e){return lk.apply(this,arguments)}function lk(){return lk=(0,ge.Z)(function*(n,e){const t=Ye(n),r=yield qT(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&ik(t,e.targetId,i.zu),i}),lk.apply(this,arguments)}function UB(n,e){return uk.apply(this,arguments)}function uk(){return uk=(0,ge.Z)(function*(n,e){const t=Ye(n);return KP(t.localStore,e).then(r=>dd(t,r))}),uk.apply(this,arguments)}function VB(n,e,t,r){return ck.apply(this,arguments)}function ck(){return ck=(0,ge.Z)(function*(n,e,t,r){const i=Ye(n),a=yield function(c,f){const _=Ye(c),E=Ye(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",T=>E.yn(T,f).next(S=>S?_.localDocuments.getDocuments(T,S):ae.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield wy(i.remoteStore):"acknowledged"===t||"rejected"===t?(rk(i,e,r||null),nk(i,e),f=e,Ye(Ye(i.localStore).mutationQueue).In(f)):dt(),yield dd(i,a)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),ck.apply(this,arguments)}function dk(){return dk=(0,ge.Z)(function*(n,e){const t=Ye(n);if(gk(t),mk(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield yO(t,r.toArray());t.ac=!0,yield Lx(t.remoteStore,!0);for(const a of i)KT(t.remoteStore,a)}else if(!1===e&&!1!==t.ac){const r=[];let i=Promise.resolve();t.ec.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Ty(t,c),yy(t.localStore,c,!0))),OE(t.remoteStore,c)}),yield i,yield yO(t,r),function(a){const c=Ye(a);c.ic.forEach((f,_)=>{OE(c.remoteStore,_)}),c.rc.cs(),c.ic=new Map,c.sc=new br(ze.comparator)}(t),t.ac=!1,yield Lx(t.remoteStore,!1)}}),dk.apply(this,arguments)}function yO(n,e,t){return hk.apply(this,arguments)}function hk(){return hk=(0,ge.Z)(function*(n,e,t){const r=Ye(n),i=[],a=[];for(const c of e){let f;const _=r.ec.get(c);if(_&&0!==_.length){f=yield _y(r.localStore,Co(_[0]));for(const E of _){const T=r.tc.get(E),S=yield LB(r,T);S.snapshot&&a.push(S.snapshot)}}else{const E=yield zP(r.localStore,c);f=yield _y(r.localStore,E),yield Wx(r,vO(E),c,!1)}i.push(f)}return r.Zu.Go(a),i}),hk.apply(this,arguments)}function vO(n){return AN(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function jB(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).Ri()}function ZB(n,e,t,r){return fk.apply(this,arguments)}function fk(){return fk=(0,ge.Z)(function*(n,e,t,r){const i=Ye(n);if(i.ac)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const a=i.ec.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=yield KP(i.localStore,kN(a[0])),f=vE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield dd(i,c,f);break}case"rejected":yield yy(i.localStore,e,!0),Ty(i,e,r);break;default:dt()}}),fk.apply(this,arguments)}function HB(n,e,t){return pk.apply(this,arguments)}function pk(){return pk=(0,ge.Z)(function*(n,e,t){const r=gk(n);if(r.ac){for(const i of e){if(r.ec.has(i)){Oe("SyncEngine","Adding an already active target "+i);continue}const a=yield zP(r.localStore,i),c=yield _y(r.localStore,a);yield Wx(r,vO(a),c.targetId,!1),KT(r.remoteStore,c)}for(const i of t)r.ec.has(i)&&(yield yy(r.localStore,i,!1).then(()=>{OE(r.remoteStore,i),Ty(r,i)}).catch(Kh))}}),pk.apply(this,arguments)}function gk(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=gO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kB.bind(null,e),e.Zu.Go=wB.bind(null,e.eventManager),e.Zu.lc=EB.bind(null,e.eventManager),e}function mk(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MB.bind(null,e),e}class wO{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.wt=NE(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return $P(this.persistence,new HP,e.initialUser,this.wt)}_c(e){return new jP(HT.Os,this.wt)}dc(e){return new XP}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class EO extends wO{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield mk(r.yc.syncEngine),yield wy(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return $P(this.persistence,new HP,e.initialUser,this.wt)}mc(e,t){return new PV(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new _U(t,this.persistence);return new mU(e.asyncQueue,r)}_c(e){const t=dx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?To.withCacheSize(this.cacheSizeBytes):To.DEFAULT;return new cx(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,tO(),zT(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new XP}}class qB extends EO{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e);const i=r.yc.syncEngine;r.sharedClientState instanceof wx&&(r.sharedClientState.syncEngine={kr:VB.bind(null,i),Mr:ZB.bind(null,i),Or:HB.bind(null,i),Ri:jB.bind(null,i),Nr:UB.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var a=(0,ge.Z)(function*(c){yield function BB(n,e){return dk.apply(this,arguments)}(r.yc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}dc(e){const t=tO();if(!wx.V(t))throw new ke(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=dx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wx(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class _k{initialize(e,t){var r=this;return(0,ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>mO(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=OB.bind(null,r.syncEngine),yield Lx(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new vB}createDatastore(e){const t=NE(e.databaseInfo.databaseId),r=new rB(e.databaseInfo);return new oB(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>mO(this.syncEngine,f,0),c=eO.V()?new eO:new eB,new lB(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,f,_,E){const T=new DB(r,i,a,c,f,_);return E&&(T.ac=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const r=Ye(t);Oe("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield vy(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function bO(n,e=10240){let t=0;return{read:()=>(0,ge.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class QT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):Pr("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class GB{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Di,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),i=Number(r);isNaN(i)&&e.Pc(`length string (${r}) is not valid number`);const a=yield e.vc(i);return new bB(JSON.parse(a),t.length+i)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,ge.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class WB{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ke(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ge.Z)(function*(a,c){const f=Ye(a),_=CE(f.wt)+"/documents",E={documents:c.map(O=>bE(f.wt,O))},T=yield f.ao("BatchGetDocuments",_,E,c.length),S=new Map;T.forEach(O=>{const j=function YU(n,e){return"found"in e?function(t,r){xt(!!r.found);const i=Gu(t,r.found.name),a=Ai(r.found.updateTime),c=new Gi({mapValue:{fields:r.found.fields}});return qn.newFoundDocument(i,a,c)}(n,e):"missing"in e?function(t,r){xt(!!r.missing),xt(!!r.readTime);const i=Gu(t,r.missing),a=Ai(r.readTime);return qn.newNoDocument(i,a)}(n,e):dt()}(f.wt,O);S.set(j.key.toString(),j)});const N=[];return c.forEach(O=>{const j=S.get(O.toString());xt(!!j),N.push(j)}),N}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new hy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=ze.fromPath(i);e.mutations.push(new QS(a,e.precondition(a)))}),yield(r=(0,ge.Z)(function*(i,a){const c=Ye(i),f=CE(c.wt)+"/documents",_={writes:a.map(E=>IE(c.wt,E))};yield c.ro("Commit",f,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dt();t=At.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ke(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?dr.updateTime(t):dr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(At.min()))throw new ke(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dr.updateTime(t)}return dr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class zB{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new Ex(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,ge.Z)(function*(){const t=new WB(e.datastore),r=e.xc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Nc(a)}))}).catch(i=>{e.Nc(i)})}))}xc(e){try{const t=this.updateFunction(e);return!lE(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!qN(t)}return!1}}class KB{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ti.UNAUTHENTICATED,this.clientId=nN.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ge.Z)(function*(f){Oe("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Oe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ke(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=by(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function CO(n,e){return yk.apply(this,arguments)}function yk(){return yk=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ge.Z)(function*(a){r.isEqual(a)||(yield qP(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),yk.apply(this,arguments)}function IO(n,e){return vk.apply(this,arguments)}function vk(){return vk=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield wk(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>lO(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>lO(e.remoteStore,a)),n.onlineComponents=e}),vk.apply(this,arguments)}function wk(n){return Ek.apply(this,arguments)}function Ek(){return Ek=(0,ge.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield CO(n,new wO)),n.offlineComponents}),Ek.apply(this,arguments)}function JT(n){return bk.apply(this,arguments)}function bk(){return bk=(0,ge.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield IO(n,new _k)),n.onlineComponents}),bk.apply(this,arguments)}function TO(n){return wk(n).then(e=>e.persistence)}function XT(n){return wk(n).then(e=>e.localStore)}function DO(n){return JT(n).then(e=>e.remoteStore)}function Ck(n){return JT(n).then(e=>e.syncEngine)}function Dy(n){return Ik.apply(this,arguments)}function Ik(){return Ik=(0,ge.Z)(function*(n){const e=yield JT(n),t=e.eventManager;return t.onListen=AB.bind(null,e.syncEngine),t.onUnlisten=SB.bind(null,e.syncEngine),t}),Ik.apply(this,arguments)}function AO(n,e,t={}){const r=new Di;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(i,a,c,f,_){const E=new QT({next:S=>{a.enqueueAndForget(()=>Zx(i,T));const N=S.docs.has(c);!N&&S.fromCache?_.reject(new ke(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&f&&"server"===f.source?_.reject(new ke(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),T=new qx(ay(c.path),E,{includeMetadataChanges:!0,Du:!0});return Bx(i,T)}(yield Dy(n),n.asyncQueue,e,t,r)})),r.promise}function SO(n,e,t={}){const r=new Di;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(i,a,c,f,_){const E=new QT({next:S=>{a.enqueueAndForget(()=>Zx(i,T)),S.fromCache&&"server"===f.source?_.reject(new ke(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),T=new qx(c,E,{includeMetadataChanges:!0,Du:!0});return Bx(i,T)}(yield Dy(n),n.asyncQueue,e,t,r)})),r.promise}const xO=new Map;function Tk(n,e,t){if(!t)throw new ke(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function kO(n,e,t,r){if(!0===e&&!0===r)throw new ke(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function RO(n){if(!ze.isDocumentKey(n))throw new ke(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function MO(n){if(ze.isDocumentKey(n))throw new ke(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function eD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":dt()}function rn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=eD(n);throw new ke(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function NO(n,e){if(e<=0)throw new ke(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class PO{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ke(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ke(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,kO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class FE{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new PO({}),this._settingsFrozen=!1,e instanceof ld?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new ke(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ld(i.options.projectId)}(e))}get app(){if(!this._app)throw new ke(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ke(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new PO(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new iU;switch(t.type){case"gapi":const r=t.client;return xt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new lU(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ke(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=xO.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),xO.delete(e),t.terminate())}(this),Promise.resolve()}}class Jn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jn(this.firestore,e,this._key)}}class _s{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _s(this.firestore,e,this._query)}}class zu extends _s{constructor(e,t,r){super(e,t,ay(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jn(this.firestore,null,new ze(e))}withConverter(e){return new zu(this.firestore,e,this._path)}}function OO(n,e,...t){if(n=(0,P.m9)(n),Tk("collection","path",e),n instanceof FE){const r=un.fromString(e,...t);return MO(r),new zu(n,null,r)}{if(!(n instanceof Jn||n instanceof zu))throw new ke(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return MO(r),new zu(n.firestore,null,r)}}function tD(n,e,...t){if(n=(0,P.m9)(n),1===arguments.length&&(e=nN.I()),Tk("doc","path",e),n instanceof FE){const r=un.fromString(e,...t);return RO(r),new Jn(n,null,new ze(r))}{if(!(n instanceof Jn||n instanceof zu))throw new ke(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return RO(r),new Jn(n.firestore,n instanceof zu?n.converter:null,new ze(r))}}function FO(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),(n instanceof Jn||n instanceof zu)&&(e instanceof Jn||e instanceof zu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function LO(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),n instanceof _s&&e instanceof _s&&n.firestore===e.firestore&&pE(n._query,e._query)&&n.converter===e.converter}class o6{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Ex(this,"async_queue_retry"),this.Kc=()=>{const t=zT();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=zT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=zT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Di;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Oc.push(e),this.jc()))}jc(){var e=this;return(0,ge.Z)(function*(){if(0!==e.Oc.length){try{yield e.Oc[0](),e.Oc.shift(),e.So.reset()}catch(t){if(!Yh(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.Oc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Mc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,Pr("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Mc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const i=Vx.createAndSchedule(this,e,t,r,a=>this.Wc(a));return this.$c.push(i),i}Gc(){this.Bc&&dt()}verifyOperationInProgress(){}zc(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e.Mc,yield t}while(t!==e.Mc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function Dk(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class a6{constructor(){this._progressObserver={},this._taskCompletionResolver=new Di,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class sr extends FE{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new o6,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||UO(this),this._firestoreClient.terminate()}}function zr(n){return n._firestoreClient||UO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function UO(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new wU(n._databaseId,a,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var a,f;n._firestoreClient=new KB(n._authCredentials,n._appCheckCredentials,n._queue,r)}function VO(n,e,t){const r=new Di;return n.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield CO(n,t),yield IO(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(c=a).name?c.code===fe.FAILED_PRECONDITION||c.code===fe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw a;bg("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var c})).then(()=>r.promise)}function BO(n){if(n._initialized||n._terminated)throw new ke(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class hd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ke(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ku{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ku(ci.fromBase64String(e))}catch(t){throw new ke(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ku(ci.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Bg{constructor(e){this._methodName=e}}class nD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pt(this._lat,e._lat)||Pt(this._long,e._long)}}const _6=/^__.*__$/;class y6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new cd(e,this.data,this.fieldMask,t,this.fieldTransforms):new dy(e,this.data,t,this.fieldTransforms)}}class jO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new cd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ZO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt()}}class rD{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new rD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return oD(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(ZO(this.Zc)&&_6.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class v6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||NE(e)}aa(e,t,r,i=!1){return new rD({Zc:e,methodName:t,ca:r,path:Er.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function jg(n){const e=n._freezeSettings(),t=NE(n._databaseId);return new v6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function iD(n,e,t,r,i,a={}){const c=n.aa(a.merge||a.mergeFields?2:0,e,t,i);kk("Data must be an object, but it was:",c,r);const f=qO(r,c);let _,E;if(a.merge)_=new ha(c.fieldMask),E=c.fieldTransforms;else if(a.mergeFields){const T=[];for(const S of a.mergeFields){const N=Rk(e,S,t);if(!c.contains(N))throw new ke(fe.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);WO(T,N)||T.push(N)}_=new ha(T),E=c.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,E=c.fieldTransforms;return new y6(new Gi(f),_,E)}class LE extends Bg{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof LE}}function HO(n,e,t){return new rD({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class Ak extends Bg{_toFieldTransform(e){return new gE(e.path,new uy)}isEqual(e){return e instanceof Ak}}class w6 extends Bg{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=HO(this,e,!0),r=this.ha.map(a=>Zg(a,t)),i=new kg(r);return new gE(e.path,i)}isEqual(e){return this===e}}class E6 extends Bg{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=HO(this,e,!0),r=this.ha.map(a=>Zg(a,t)),i=new Rg(r);return new gE(e.path,i)}isEqual(e){return this===e}}class b6 extends Bg{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new cy(e.wt,PN(e.wt,this.la));return new gE(e.path,t)}isEqual(e){return this===e}}function Sk(n,e,t,r){const i=n.aa(1,e,t);kk("Data must be an object, but it was:",i,r);const a=[],c=Gi.empty();Tg(r,(_,E)=>{const T=sD(e,_,t);E=(0,P.m9)(E);const S=i.ia(T);if(E instanceof LE)a.push(T);else{const N=Zg(E,S);null!=N&&(a.push(T),c.set(T,N))}});const f=new ha(a);return new jO(c,f,i.fieldTransforms)}function xk(n,e,t,r,i,a){const c=n.aa(1,e,t),f=[Rk(e,r,t)],_=[i];if(a.length%2!=0)throw new ke(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<a.length;N+=2)f.push(Rk(e,a[N])),_.push(a[N+1]);const E=[],T=Gi.empty();for(let N=f.length-1;N>=0;--N)if(!WO(E,f[N])){const O=f[N];let j=_[N];j=(0,P.m9)(j);const ie=c.ia(O);if(j instanceof LE)E.push(O);else{const _e=Zg(j,ie);null!=_e&&(E.push(O),T.set(O,_e))}}const S=new ha(E);return new jO(T,S,c.fieldTransforms)}function $O(n,e,t,r=!1){return Zg(t,n.aa(r?4:3,e))}function Zg(n,e){if(GO(n=(0,P.m9)(n)))return kk("Unsupported field value:",e,n),qO(n,e);if(n instanceof Bg)return function(t,r){if(!ZO(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let f=Zg(c,r.ra(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,P.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return PN(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=ir.fromDate(t);return{timestampValue:EE(r.wt,i)}}if(t instanceof ir){const i=new ir(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:EE(r.wt,i)}}if(t instanceof nD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ku)return{bytesValue:tP(r.wt,t._byteString)};if(t instanceof Jn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.oa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:JS(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${eD(t)}`)}(n,e)}function qO(n,e){const t={};return cN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Tg(n,(r,i)=>{const a=Zg(i,e.ea(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function GO(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ir||n instanceof nD||n instanceof Ku||n instanceof Jn||n instanceof Bg)}function kk(n,e,t){if(!GO(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=eD(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function Rk(n,e,t){if((e=(0,P.m9)(e))instanceof hd)return e._internalPath;if("string"==typeof e)return sD(n,e);throw oD("Field path arguments must be of type string or ",n,!1,void 0,t)}const C6=new RegExp("[~\\*/\\[\\]]");function sD(n,e,t){if(e.search(C6)>=0)throw oD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new hd(...e.split("."))._internalPath}catch(r){throw oD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function oD(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let _="";return(a||c)&&(_+=" (found",a&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new ke(fe.INVALID_ARGUMENT,f+n+_)}function WO(n,e){return n.some(t=>t.isEqual(e))}class UE{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Jn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new I6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(aD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class I6 extends UE{data(){return super.data()}}function aD(n,e){return"string"==typeof e?sD(n,e):e instanceof hd?e._internalPath:e._delegate._internalPath}class Hg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fd extends UE{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new VE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(aD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class VE extends fd{data(e={}){return super.data(e)}}class uf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Hg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new VE(this._firestore,this._userDataWriter,r.key,r,new Hg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new VE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Hg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const f=new VE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Hg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,E=-1;return 0!==c.type&&(_=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),E=a.indexOf(c.doc.key)),{type:T6(c.type),doc:f,oldIndex:_,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function T6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}function zO(n,e){return n instanceof fd&&e instanceof fd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof uf&&e instanceof uf&&n._firestore===e._firestore&&LO(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function KO(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ke(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class BE{}function cf(n,...e){for(const t of e)n=t._apply(n);return n}class D6 extends BE{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=jg(e.firestore),r=function(i,a,c,f,_,E,T){let S;if(_.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new ke(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){tF(T,E);const O=[];for(const j of T)O.push(eF(f,i,j));S={arrayValue:{values:O}}}else S=eF(f,i,T)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||tF(T,E),S=$O(c,"where",T,"in"===E||"not-in"===E);const N=Wi.create(_,E,S);return function(O,j){if(j.ht()){const _e=WS(O);if(null!==_e&&!_e.isEqual(j.field))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${_e.toString()}' and '${j.field.toString()}'`);const Be=GS(O);null!==Be&&nF(0,j.field,Be)}const ie=function(_e,Be){for(const lt of _e.filters)if(Be.indexOf(lt.op)>=0)return lt.op;return null}(O,function(_e){switch(_e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(j.op));if(null!==ie)throw new ke(fe.INVALID_ARGUMENT,ie===j.op?`Invalid query. You cannot use more than one '${j.op.toString()}' filter.`:`Invalid query. You cannot use '${j.op.toString()}' filters with '${ie.toString()}' filters.`)}(i,N),N}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new _s(e.firestore,e.converter,function(i,a){const c=i.filters.concat([a]);return new ud(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class S6 extends BE{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new ke(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ke(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new oy(i,a);return function(f,_){if(null===GS(f)){const E=WS(f);null!==E&&nF(0,E,_.field)}}(r,c),c}(e._query,this.fa,this.wa);return new _s(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new ud(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class YO extends BE{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new _s(e.firestore,e.converter,xT(e._query,this.ma,this.ga))}}class QO extends BE{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=XO(e,this.type,this.ya,this.pa);return new _s(e.firestore,e.converter,(i=t,new ud((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class JO extends BE{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=XO(e,this.type,this.ya,this.pa);return new _s(e.firestore,e.converter,(i=t,new ud((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function XO(n,e,t,r){if(t[0]=(0,P.m9)(t[0]),t[0]instanceof UE)return function(i,a,c,f,_){if(!f)throw new ke(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const E=[];for(const T of ly(i))if(T.field.isKeyField())E.push(Sg(a,f.key));else{const S=f.data.field(T.field);if(HS(S))throw new ke(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const N=T.field.canonicalString();throw new ke(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}E.push(S)}return new ef(E,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=jg(n.firestore);return function(a,c,f,_,E,T){const S=a.explicitOrderBy;if(E.length>S.length)throw new ke(fe.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let O=0;O<E.length;O++){const j=E[O];if(S[O].field.isKeyField()){if("string"!=typeof j)throw new ke(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof j}`);if(!zS(a)&&-1!==j.indexOf("/"))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${j}' contains a slash.`);const ie=a.path.child(un.fromString(j));if(!ze.isDocumentKey(ie))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ie}' is not because it contains an odd number of segments.`);const _e=new ze(ie);N.push(Sg(c,_e))}else{const ie=$O(f,_,j);N.push(ie)}}return new ef(N,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function eF(n,e,t){if("string"==typeof(t=(0,P.m9)(t))){if(""===t)throw new ke(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zS(e)&&-1!==t.indexOf("/"))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(un.fromString(t));if(!ze.isDocumentKey(r))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Sg(n,new ze(r))}if(t instanceof Jn)return Sg(n,t._key);throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${eD(t)}.`)}function tF(n,e){if(!Array.isArray(n)||0===n.length)throw new ke(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new ke(fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function nF(n,e,t){if(!t.isEqual(e))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const F6={maxAttempts:5};class Mk{convertValue(e,t="none"){switch(Ag(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Dg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dt()}}convertObject(e,t){const r={};return Tg(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new nD(Cr(e.latitude),Cr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=hN(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(aE(e));default:return null}}convertTimestamp(e){const t=Qh(e);return new ir(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=un.fromString(e);xt(dP(r));const i=new ld(r.get(1),r.get(3)),a=new ze(r.popFirst(5));return i.isEqual(t)||Pr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function lD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class L6 extends Mk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ku(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,t)}}class rF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=jg(e)}set(e,t,r){this._verifyNotCommitted();const i=df(e,this._firestore),a=lD(i.converter,t,r),c=iD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,dr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=df(e,this._firestore);let c;return c="string"==typeof(t=(0,P.m9)(t))||t instanceof hd?xk(this._dataReader,"WriteBatch.update",a._key,t,r,i):Sk(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,dr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=df(e,this._firestore);return this._mutations=this._mutations.concat(new hy(t._key,dr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function df(n,e){if((n=(0,P.m9)(n)).firestore!==e)throw new ke(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class $g extends Mk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ku(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,t)}}function iF(n,e,t){n=rn(n,Jn);const r=rn(n.firestore,sr),i=lD(n.converter,e,t);return Ay(r,[iD(jg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,dr.none())])}function sF(n,e,t,...r){n=rn(n,Jn);const i=rn(n.firestore,sr),a=jg(i);let c;return c="string"==typeof(e=(0,P.m9)(e))||e instanceof hd?xk(a,"updateDoc",n._key,e,t,r):Sk(a,"updateDoc",n._key,e),Ay(i,[c.toMutation(n._key,dr.exists(!0))])}function oF(n,...e){var t,r,i;n=(0,P.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||Dk(e[c])||(a=e[c],c++);const f={includeMetadataChanges:a.includeMetadataChanges};if(Dk(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[c+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let _,E,T;if(n instanceof Jn)E=rn(n.firestore,sr),T=ay(n._key.path),_={next:S=>{e[c]&&e[c](Nk(E,n,S))},error:e[c+1],complete:e[c+2]};else{const S=rn(n,_s);E=rn(S.firestore,sr),T=S._query;const N=new $g(E);_={next:O=>{e[c]&&e[c](new uf(E,N,S,O))},error:e[c+1],complete:e[c+2]},KO(n._query)}return function(S,N,O,j){const ie=new QT(j),_e=new qx(N,ie,O);return S.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return Bx(yield Dy(S),_e)})),()=>{ie.Tc(),S.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return Zx(yield Dy(S),_e)}))}}(zr(E),T,f,_)}function Ay(n,e){return function(t,r){const i=new Di;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function xB(n,e,t){return Yx.apply(this,arguments)}(yield Ck(t),r,i)})),i.promise}(zr(n),e)}function Nk(n,e,t){const r=t.docs.get(e._key),i=new $g(n);return new fd(n,i,e._key,r,new Hg(t.hasPendingWrites,t.fromCache),e.converter)}class W6 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=jg(e)}get(e){const t=df(e,this._firestore),r=new L6(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return dt();const a=i[0];if(a.isFoundDocument())return new UE(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new UE(this._firestore,r,t._key,null,t.converter);throw dt()})}set(e,t,r){const i=df(e,this._firestore),a=lD(i.converter,t,r),c=iD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=df(e,this._firestore);let c;return c="string"==typeof(t=(0,P.m9)(t))||t instanceof hd?xk(this._dataReader,"Transaction.update",a._key,t,r,i):Sk(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=df(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=df(e,this._firestore),r=new $g(this._firestore);return super.get(e).then(i=>new fd(this._firestore,r,t._key,i._document,new Hg(!1,!1),t.converter))}}function Pk(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ke("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function lF(){if("undefined"==typeof Uint8Array)throw new ke("unimplemented","Uint8Arrays are not available in this environment.")}function uF(){if(!function yU(){return"undefined"!=typeof atob}())throw new ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ny=Vi.SDK_VERSION,(0,Vi._registerComponent)(new Qo.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new sr(i,new oU(t.getProvider("auth-internal")),new uU(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,Vi.registerVersion)(XM,"3.4.14",n),(0,Vi.registerVersion)(XM,"3.4.14","esm2017")}();class jE{constructor(e){this._delegate=e}static fromBase64String(e){return uF(),new jE(Ku.fromBase64String(e))}static fromUint8Array(e){return lF(),new jE(Ku.fromUint8Array(e))}toBase64(){return uF(),this._delegate.toBase64()}toUint8Array(){return lF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ok(n){return function nj(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class rj{enableIndexedDbPersistence(e,t){return function u6(n,e){BO(n=rn(n,sr));const t=zr(n),r=n._freezeSettings(),i=new _k;return VO(t,i,new EO(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function c6(n){BO(n=rn(n,sr));const e=zr(n),t=n._freezeSettings(),r=new _k;return VO(e,r,new qB(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function d6(n){if(n._initialized&&!n._terminated)throw new ke(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Di;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(t=(0,ge.Z)(function*(r){if(!Zl.V())return Promise.resolve();const i=r+"main";yield Zl.delete(i)}),function(r){return t.apply(this,arguments)})(dx(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class cF{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ld||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&bg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function i6(n,e,t,r={}){var i;const a=(n=rn(n,FE))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&bg("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,f;if("string"==typeof r.mockUserToken)c=r.mockUserToken,f=Ti.MOCK_USER;else{c=(0,P.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new ke(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ti(_)}n._authCredentials=new sU(new eN(c,f))}}(this._delegate,e,t,r)}enableNetwork(){return function f6(n){return function YB(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield TO(n),t=yield DO(n);return e.setNetworkEnabled(!0),function(r){const i=Ye(r);return i.lu.delete(0),PE(i)}(t)}))}(zr(n=rn(n,sr)))}(this._delegate)}disableNetwork(){return function p6(n){return function QB(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield TO(n),t=yield DO(n);return e.setNetworkEnabled(!1),(r=(0,ge.Z)(function*(i){const a=Ye(i);a.lu.add(0),yield vy(a),a._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(zr(n=rn(n,sr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,kO("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function h6(n){return function(e){const t=new Di;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function NB(n,e){return tk.apply(this,arguments)}(yield Ck(e),t)})),t.promise}(zr(n=rn(n,sr)))}(this._delegate)}onSnapshotsInSync(e){return function G6(n,e){return function e6(n,e){const t=new QT(e);return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield Dy(n),i=t,Ye(r).Tu.add(i),void i.next();var r,i})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield Dy(n),i=t,void Ye(r).Tu.delete(i);var r,i}))}}(zr(n=rn(n,sr)),Dk(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Sy(this,OO(this._delegate,e))}catch(t){throw Hs(t,"collection()","Firestore.collection()")}}doc(e){try{return new $a(this,tD(this._delegate,e))}catch(t){throw Hs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new $s(this,function s6(n,e){if(n=rn(n,FE),Tk("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ke(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new _s(n,null,(t=e,new ud(un.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Hs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function z6(n,e,t){n=rn(n,sr);const r=Object.assign(Object.assign({},F6),t);return function(i){if(i.maxAttempts<1)throw new ke(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function t6(n,e,t){const r=new Di;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const i=yield(a=n,JT(a).then(c=>c.datastore));var a;new zB(n.asyncQueue,i,t,e,r).run()})),r.promise}(zr(n),i=>e(new W6(n,i)),r)}(this._delegate,t=>e(new dF(this,t)))}batch(){return zr(this._delegate),new hF(new rF(this._delegate,e=>Ay(this._delegate,e)))}loadBundle(e){return function g6(n,e){const t=zr(n=rn(n,sr)),r=new a6;return function n6(n,e,t,r){const i=function(a,c){let f;return f="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,E){if(_ instanceof Uint8Array)return bO(_,E);if(_ instanceof ArrayBuffer)return bO(new Uint8Array(_),E);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new GB(_,c);var _}(t,NE(e));n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function $B(n,e,t){const r=Ye(n);var i;(i=(0,ge.Z)(function*(a,c,f){try{const _=yield c.getMetadata();if(yield function(N,O){const j=Ye(N),ie=Ai(O.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",_e=>j.Ds.getBundleMetadata(_e,O.id)).then(_e=>!!_e&&_e.createTime.compareTo(ie)>=0)}(a.localStore,_))return yield c.close(),f._completeWith({taskState:"Success",documentsLoaded:(N=_).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);f._updateProgress(dO(_));const E=new CB(_,a.localStore,c.wt);let T=yield c.fc();for(;T;){const N=yield E.Nu(T);N&&f._updateProgress(N),T=yield c.fc()}const S=yield E.complete();return yield dd(a,S.Ou,void 0),yield function(N,O){const j=Ye(N);return j.persistence.runTransaction("Save bundle","readwrite",ie=>j.Ds.saveBundleMetadata(ie,O))}(a.localStore,_),f._completeWith(S.progress),Promise.resolve(S.Mu)}catch(_){return bg("SyncEngine",`Loading bundle failed with ${_}`),f._failWith(_),Promise.resolve(new Set)}var N}),function(a,c,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Ck(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function m6(n,e){return function r6(n,e){return n.asyncQueue.enqueue((0,ge.Z)(function*(){return function(t,r){const i=Ye(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ds.getNamedQuery(a,r))}(yield XT(n),e)}))}(zr(n=rn(n,sr)),e).then(t=>t?new _s(n,null,t.query):null)}(this._delegate,e).then(t=>t?new $s(this,t):null)}}class uD extends Mk{constructor(e){super(),this.firestore=e}convertBytes(e){return new jE(new Ku(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return $a.forKey(t,this.firestore,null)}}class dF{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new uD(e)}get(e){const t=Gg(e);return this._delegate.get(t).then(r=>new ZE(this._firestore,new fd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Gg(e);return r?(Pk("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Gg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Gg(e);return this._delegate.delete(t),this}}class hF{constructor(e){this._delegate=e}set(e,t,r){const i=Gg(e);return r?(Pk("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Gg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Gg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class qg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new VE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new HE(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=qg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new qg(e,new uD(e),t),i.set(t,a)),a}}qg.INSTANCES=new WeakMap;class $a{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new $a(t,new Jn(t._delegate,r,new ze(e)))}static forKey(e,t,r){return new $a(t,new Jn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Sy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Sy(this.firestore,OO(this._delegate,e))}catch(t){throw Hs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,P.m9)(e))instanceof Jn&&FO(this._delegate,e)}set(e,t){t=Pk("DocumentReference.set",t);try{return t?iF(this._delegate,e,t):iF(this._delegate,e)}catch(r){throw Hs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?sF(this._delegate,e):sF(this._delegate,e,t,...r)}catch(i){throw Hs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function $6(n){return Ay(rn(n.firestore,sr),[new hy(n._key,dr.none())])}(this._delegate)}onSnapshot(...e){const t=fF(e),r=pF(e,i=>new ZE(this.firestore,new fd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return oF(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function V6(n){n=rn(n,Jn);const e=rn(n.firestore,sr),t=zr(e),r=new $g(e);return function JB(n,e){const t=new Di;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(i,a,c){try{const f=yield function(_,E){const T=Ye(_);return T.persistence.runTransaction("read document","readonly",S=>T.localDocuments.getDocument(S,E))}(i,a);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new ke(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const _=by(f,`Failed to get document '${a} from cache`);c.reject(_)}}),function(i,a,c){return r.apply(this,arguments)})(yield XT(n),e,t);var r})),t.promise}(t,n._key).then(i=>new fd(e,r,n._key,i,new Hg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function B6(n){n=rn(n,Jn);const e=rn(n.firestore,sr);return AO(zr(e),n._key,{source:"server"}).then(t=>Nk(e,n,t))}(this._delegate):function U6(n){n=rn(n,Jn);const e=rn(n.firestore,sr);return AO(zr(e),n._key).then(t=>Nk(e,n,t))}(this._delegate),t.then(r=>new ZE(this.firestore,new fd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new $a(this.firestore,this._delegate.withConverter(e?qg.getInstance(this.firestore,e):null))}}function Hs(n,e,t){return n.message=n.message.replace(e,t),n}function fF(n){for(const e of n)if("object"==typeof e&&!Ok(e))return e;return{}}function pF(n,e){var t,r;let i;return i=Ok(n[0])?n[0]:Ok(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class ZE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new $a(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return zO(this._delegate,e._delegate)}}class HE extends ZE{data(e){const t=this._delegate.data(e);return function rU(n,e){n||dt()}(void 0!==t),t}}class $s{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uD(e)}where(e,t,r){try{return new $s(this.firestore,cf(this._delegate,function A6(n,e,t){const r=e,i=aD("where",n);return new D6(i,r,t)}(e,t,r)))}catch(i){throw Hs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new $s(this.firestore,cf(this._delegate,function x6(n,e="asc"){const t=e,r=aD("orderBy",n);return new S6(r,t)}(e,t)))}catch(r){throw Hs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new $s(this.firestore,cf(this._delegate,function k6(n){return NO("limit",n),new YO("limit",n,"F")}(e)))}catch(t){throw Hs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new $s(this.firestore,cf(this._delegate,function R6(n){return NO("limitToLast",n),new YO("limitToLast",n,"L")}(e)))}catch(t){throw Hs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new $s(this.firestore,cf(this._delegate,function M6(...n){return new QO("startAt",n,!0)}(...e)))}catch(t){throw Hs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new $s(this.firestore,cf(this._delegate,function N6(...n){return new QO("startAfter",n,!1)}(...e)))}catch(t){throw Hs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new $s(this.firestore,cf(this._delegate,function P6(...n){return new JO("endBefore",n,!1)}(...e)))}catch(t){throw Hs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new $s(this.firestore,cf(this._delegate,function O6(...n){return new JO("endAt",n,!0)}(...e)))}catch(t){throw Hs(t,"endAt()","Query.endAt()")}}isEqual(e){return LO(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Z6(n){n=rn(n,_s);const e=rn(n.firestore,sr),t=zr(e),r=new $g(e);return function XB(n,e){const t=new Di;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(i,a,c){try{const f=yield qT(i,a,!0),_=new pO(a,f.ji),E=_.Ku(f.documents),T=_.applyChanges(E,!1);c.resolve(T.snapshot)}catch(f){const _=by(f,`Failed to execute query '${a} against cache`);c.reject(_)}}),function(i,a,c){return r.apply(this,arguments)})(yield XT(n),e,t);var r})),t.promise}(t,n._query).then(i=>new uf(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function H6(n){n=rn(n,_s);const e=rn(n.firestore,sr),t=zr(e),r=new $g(e);return SO(t,n._query,{source:"server"}).then(i=>new uf(e,r,n,i))}(this._delegate):function j6(n){n=rn(n,_s);const e=rn(n.firestore,sr),t=zr(e),r=new $g(e);return KO(n._query),SO(t,n._query).then(i=>new uf(e,r,n,i))}(this._delegate),t.then(r=>new Fk(this.firestore,new uf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=fF(e),r=pF(e,i=>new Fk(this.firestore,new uf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return oF(this._delegate,t,r)}withConverter(e){return new $s(this.firestore,this._delegate.withConverter(e?qg.getInstance(this.firestore,e):null))}}class sj{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new HE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Fk{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new $s(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new HE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new sj(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new HE(this._firestore,r))})}isEqual(e){return zO(this._delegate,e._delegate)}}class Sy extends $s{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new $a(this.firestore,e):null}doc(e){try{return new $a(this.firestore,void 0===e?tD(this._delegate):tD(this._delegate,e))}catch(t){throw Hs(t,"doc()","CollectionReference.doc()")}}add(e){return function q6(n,e){const t=rn(n.firestore,sr),r=tD(n),i=lD(n.converter,e);return Ay(t,[iD(jg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,dr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new $a(this.firestore,t))}isEqual(e){return FO(this._delegate,e._delegate)}withConverter(e){return new Sy(this.firestore,this._delegate.withConverter(e?qg.getInstance(this.firestore,e):null))}}function Gg(n){return rn(n,Jn)}class Lk{constructor(...e){this._delegate=new hd(...e)}static documentId(){return new Lk(Er.keyField().canonicalString())}isEqual(e){return(e=(0,P.m9)(e))instanceof hd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Wg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Y6(){return new Ak("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Wg(e)}static delete(){const e=function K6(){return new LE("deleteField")}();return e._methodName="FieldValue.delete",new Wg(e)}static arrayUnion(...e){const t=function Q6(...n){return new w6("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Wg(t)}static arrayRemove(...e){const t=function J6(...n){return new E6("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Wg(t)}static increment(e){const t=function X6(n){return new b6("increment",n)}(e);return t._methodName="FieldValue.increment",new Wg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const oj={Firestore:cF,GeoPoint:nD,Timestamp:ir,Blob:jE,Transaction:dF,WriteBatch:hF,DocumentReference:$a,DocumentSnapshot:ZE,Query:$s,QueryDocumentSnapshot:HE,QuerySnapshot:Fk,CollectionReference:Sy,FieldPath:Lk,FieldValue:Wg,setLogLevel:function ij(n){!function nU(n){zh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function gF(n,e){return function uj(n,e=Ko.z){return new er.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function Uk(n,e){return gF(n,e).pipe((0,nt.U)(t=>({payload:t,type:"query"})))}function cD(n,e){return Uk(n,e).pipe(rs(void 0),Aw(),(0,nt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const _=i.find(T=>T.doc.ref.isEqual(c.ref)),E=null==t?void 0:t.payload.docs.find(T=>T.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&E&&JSON.stringify(E.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),a}))}function mF(n,e,t){return cD(n,t).pipe(xr((r,i)=>function dj(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function hj(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Vk(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Vk(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Vk(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),lv(),(0,nt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Vk(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function _F(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function lj(n){(function aj(n,e){n.INTERNAL.registerComponent(new Qo.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},oj)))})(n,(e,t)=>new cF(e,t,new rj)),n.registerVersion("@firebase/firestore-compat","0.1.23")}(uv.Z);class yF{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=cD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,nt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(rs(void 0),Aw(),kr(([r,i])=>i.length>0||!r),(0,nt.U)(([r,i])=>i),nn.iC)}auditTrail(e){return this.stateChanges(e).pipe(xr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=_F(e);return mF(this.query,t,this.afs.schedulers.outsideAngular).pipe(nn.iC)}valueChanges(e={}){return Uk(this.query,this.afs.schedulers.outsideAngular).pipe((0,nt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),nn.iC)}get(e){return(0,en.D)(this.query.get(e)).pipe(nn.iC)}add(e){return this.ref.add(e)}doc(e){return new vF(this.ref.doc(e),this.afs)}}class vF{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=bF(r,t);return new yF(i,a,this.afs)}snapshotChanges(){return function cj(n,e){return gF(n,e).pipe(rs(void 0),Aw(),(0,nt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(nn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,nt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,en.D)(this.ref.get(e)).pipe(nn.iC)}}class fj{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?cD(this.query,this.afs.schedulers.outsideAngular).pipe((0,nt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),kr(t=>t.length>0),nn.iC):cD(this.query,this.afs.schedulers.outsideAngular).pipe(nn.iC)}auditTrail(e){return this.stateChanges(e).pipe(xr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=_F(e);return mF(this.query,t,this.afs.schedulers.outsideAngular).pipe(nn.iC)}valueChanges(e={}){return Uk(this.query,this.afs.schedulers.outsideAngular).pipe((0,nt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),nn.iC)}get(e){return(0,en.D)(this.query.get(e)).pipe(nn.iC)}}const wF=new u.OlP("angularfire2.enableFirestorePersistence"),EF=new u.OlP("angularfire2.firestore.persistenceSettings"),pj=new u.OlP("angularfire2.firestore.settings"),gj=new u.OlP("angularfire2.firestore.use-emulator");function bF(n,e=(t=>t)){return{query:e(n),ref:n}}let CF=(()=>{class n{constructor(t,r,i,a,c,f,_,E,T,S,N,O,j,ie,_e,Be,lt){this.schedulers=_;const Xe=(0,Rr.on)(t,f,r),Qe=T;S&&PI(Xe,f,N,j,ie,_e,O,Be),[this.firestore,this.persistenceEnabled$]=(0,Rr.cc)(`${Xe.name}.firestore`,"AngularFirestore",Xe.name,()=>{const bt=f.runOutsideAngular(()=>Xe.firestore());if(a&&bt.settings(a),Qe&&bt.useEmulator(...Qe),i&&!Sr(c)){const Ot=()=>{try{return(0,en.D)(bt.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(hr){return"undefined"!=typeof console&&console.warn(hr),tt(!1)}};return[bt,f.runOutsideAngular(Ot)]}return[bt,tt(!1)]},[a,Qe,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=bF(i,r),f=this.schedulers.ngZone.run(()=>a);return new yF(f,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new fj(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new vF(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Rr.Dh),u.LFG(Rr.xv,8),u.LFG(wF,8),u.LFG(pj,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(nn.HU),u.LFG(EF,8),u.LFG(gj,8),u.LFG(F_,8),u.LFG(ww,8),u.LFG(kI,8),u.LFG(O_,8),u.LFG(RI,8),u.LFG(MI,8),u.LFG(NI,8),u.LFG(Xc,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),mj=(()=>{class n{constructor(){ag.Z.registerVersion("angularfire",nn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:wF,useValue:!0},{provide:EF,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[CF]}),n})(),xy=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.user={email:null,idToken:null},this.subject=new ti(null),this.user$=this.subject.asObservable(),this.afAuth.authState.subscribe(c=>{c?(this.user.email=c.email,c.getIdToken().then(f=>{this.user.idToken=f,this.subject.next(this.user)})):this.subject.next(null)}),this.isLogIn$=this.user$.pipe((0,nt.U)(c=>!!c)),this.isLogOut$=this.isLogIn$.pipe((0,nt.U)(c=>!c))}signIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{var a;return(null===(a=i.user)||void 0===a?void 0:a.email)&&(this.user.email=i.user.email,i.user.getIdToken().then(c=>{this.user.idToken=c,this.subject.next(this.user)})),i}).catch(i=>{window.alert(i.message)})}signOut(){this.afAuth.signOut(),this.subject.next(null)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(CF),u.LFG(F_),u.LFG(jr),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ky=(()=>{class n{constructor(t,r){this.auth=t,this.db=r,this.sendCurrentNumberPage=new mi.x,this.auth.user$.subscribe(i=>{this.idToken=null==i?void 0:i.idToken})}currentPage(t){return this.sendCurrentNumberPage.next(t)}getArticles(){return this.db.list("articles").valueChanges().pipe((0,nt.U)(t=>t.sort((r,i)=>new Date(i.creationDate).getTime()-new Date(r.creationDate).getTime())))}getArticle(t){return this.db.object(`articles/${t}`).valueChanges().pipe((0,nt.U)(r=>r))}getCountArticles(){return this.db.list("articles").valueChanges().pipe((0,nt.U)(t=>t.length))}getLastArticle(){return this.db.list("articles").valueChanges().pipe((0,nt.U)(t=>t.sort((r,i)=>new Date(i.creationDate).getTime()-new Date(r.creationDate).getTime())[0]))}search(t){return this.db.list("articles").valueChanges().pipe((0,nt.U)(r=>r.filter(i=>!(t.length>0)||i.title.toLowerCase().includes(t.toLowerCase())).sort((i,a)=>new Date(a.creationDate).getTime()-new Date(i.creationDate).getTime())))}paginate(t,r,i){return t.slice((r-1)*i,r*i)}deleteArticle(t){this.db.list("articles").remove(t.title)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(xy),u.LFG(Tw))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),IF=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),zg=(()=>{class n extends IF{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const Yu=new u.OlP("NgValueAccessor"),vj={provide:Yu,useExisting:(0,u.Gpc)(()=>Ry),multi:!0},Ej=new u.OlP("CompositionEventMode");let Ry=(()=>{class n extends IF{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function wj(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(Ej,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[u._Bn([vj]),u.qOj]}),n})();function hf(n){return null==n||0===n.length}function DF(n){return null!=n&&"number"==typeof n.length}const ys=new u.OlP("NgValidators"),ff=new u.OlP("NgAsyncValidators"),bj=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function $E(n){return null}function OF(n){return null!=n}function FF(n){const e=(0,u.QGY)(n)?(0,en.D)(n):n;return(0,u.CqO)(e),e}function LF(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function UF(n,e){return e.map(t=>t(n))}function VF(n){return n.map(e=>function Cj(n){return!n.validate}(e)?e:t=>e.validate(t))}function Bk(n){return null!=n?function BF(n){if(!n)return null;const e=n.filter(OF);return 0==e.length?null:function(t){return LF(UF(t,e))}}(VF(n)):null}function jk(n){return null!=n?function jF(n){if(!n)return null;const e=n.filter(OF);return 0==e.length?null:function(t){return function _j(...n){const e=(0,io.jO)(n),{args:t,keys:r}=iu(n),i=new er.y(a=>{const{length:c}=t;if(!c)return void a.complete();const f=new Array(c);let _=c,E=c;for(let T=0;T<c;T++){let S=!1;(0,Ss.Xf)(t[T]).subscribe(new Zn.Q(a,N=>{S||(S=!0,E--),f[T]=N},()=>_--,void 0,()=>{(!_||!S)&&(E||a.next(r?ka(r,f):f),a.complete())}))}});return e?i.pipe(xa(e)):i}(UF(t,e).map(FF)).pipe((0,nt.U)(LF))}}(VF(n)):null}function ZF(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Zk(n){return n?Array.isArray(n)?n:[n]:[]}function dD(n,e){return Array.isArray(n)?n.includes(e):n===e}function qF(n,e){const t=Zk(e);return Zk(n).forEach(i=>{dD(t,i)||t.push(i)}),t}function GF(n,e){return Zk(e).filter(t=>!dD(n,t))}class WF{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Bk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=jk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class pf extends WF{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class qs extends WF{get formDirective(){return null}get path(){return null}}class zF{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let hD=(()=>{class n extends zF{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(pf,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[u.qOj]}),n})(),qE=(()=>{class n extends zF{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(qs,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[u.qOj]}),n})();function GE(n,e){qk(n,e),e.valueAccessor.writeValue(n.value),function Sj(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&KF(n,e)})}(n,e),function kj(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function xj(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&KF(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Aj(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function mD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function qk(n,e){const t=function HF(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(ZF(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function $F(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(ZF(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();mD(e._rawValidators,i),mD(e._rawAsyncValidators,i)}function KF(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function yD(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const WE="VALID",vD="INVALID",My="PENDING",zE="DISABLED";function zk(n){return(Yk(n)?n.validators:n)||null}function JF(n){return Array.isArray(n)?Bk(n):n||null}function Kk(n,e){return(Yk(e)?e.asyncValidators:n)||null}function XF(n){return Array.isArray(n)?jk(n):n||null}function Yk(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Qk{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=JF(this._rawValidators),this._composedAsyncValidatorFn=XF(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===WE}get invalid(){return this.status===vD}get pending(){return this.status==My}get disabled(){return this.status===zE}get enabled(){return this.status!==zE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=JF(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=XF(e)}addValidators(e){this.setValidators(qF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(qF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(GF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(GF(e,this._rawAsyncValidators))}hasValidator(e){return dD(this._rawValidators,e)}hasAsyncValidator(e){return dD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=My,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=zE,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=WE,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===WE||this.status===My)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zE:WE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=My,this._hasOwnPendingAsyncValidator=!0;const t=FF(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function Pj(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=r instanceof Jk?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof Oj&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?zE:this.errors?vD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(My)?My:this._anyControlsHaveStatus(vD)?vD:WE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Yk(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class wD extends Qk{constructor(e=null,t,r){super(zk(t),Kk(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){yD(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){yD(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Jk extends Qk{constructor(e,t,r){super(zk(t),Kk(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof wD?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class Oj extends Qk{constructor(e,t,r){super(zk(t),Kk(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof wD?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Fj={provide:qs,useExisting:(0,u.Gpc)(()=>Kg)},KE=(()=>Promise.resolve(null))();let Kg=(()=>{class n extends qs{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new u.vpe,this.form=new Jk({},Bk(t),jk(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){KE.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),GE(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){KE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),yD(this._directives,t)})}addFormGroup(t){KE.then(()=>{const r=this._findContainer(t.path),i=new Jk({});(function YF(n,e){qk(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){KE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){KE.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function QF(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ys,10),u.Y36(ff,10))},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([Fj]),u.qOj]}),n})();const Uj={provide:pf,useExisting:(0,u.Gpc)(()=>YE)},n2=(()=>Promise.resolve(null))();let YE=(()=>{class n extends pf{constructor(t,r,i,a){super(),this.control=new wD,this._registered=!1,this.update=new u.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Wk(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===Ry?t=a:function Nj(n){return Object.getPrototypeOf(n.constructor)===zg}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function Gk(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function pD(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){GE(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){n2.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;n2.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(qs,9),u.Y36(ys,10),u.Y36(ff,10),u.Y36(Yu,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([Uj]),u.qOj,u.TTD]}),n})(),QE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),i2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function f2(n){return"number"==typeof n?n:parseInt(n,10)}let ED=(()=>{class n{constructor(){this._validator=$E}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._validator=this.enabled()?this.createValidator(r):$E,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(){return null!=this[this.inputName]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,features:[u.TTD]}),n})();const n3={provide:ys,useExisting:(0,u.Gpc)(()=>JE),multi:!0};let JE=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?function xF(n){return hf(n.value)?{required:!0}:null}(t):null}registerOnValidatorChange(t){this._onChange=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("required",r.required?"":null)},inputs:{required:"required"},features:[u._Bn([n3])]}),n})();const i3={provide:ys,useExisting:(0,u.Gpc)(()=>iR),multi:!0};let iR=(()=>{class n{constructor(){this._enabled=!1}set email(t){this._enabled=""===t||!0===t||"true"===t,this._onChange&&this._onChange()}validate(t){return this._enabled?function RF(n){return hf(n.value)||bj.test(n.value)?null:{email:!0}}(t):null}registerOnValidatorChange(t){this._onChange=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[u._Bn([i3])]}),n})();const s3={provide:ys,useExisting:(0,u.Gpc)(()=>sR),multi:!0};let sR=(()=>{class n extends ED{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=t=>f2(t),this.createValidator=t=>function MF(n){return e=>hf(e.value)||!DF(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("minlength",r.enabled()?r.minlength:null)},inputs:{minlength:"minlength"},features:[u._Bn([s3]),u.qOj]}),n})();const o3={provide:ys,useExisting:(0,u.Gpc)(()=>bD),multi:!0};let bD=(()=>{class n extends ED{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>f2(t),this.createValidator=t=>function NF(n){return e=>DF(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("maxlength",r.enabled()?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[u._Bn([o3]),u.qOj]}),n})(),l3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[i2]]}),n})(),u3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[l3]}),n})();const v2="firebasestorage.googleapis.com",w2="storageBucket";class Ir extends P.ZR{constructor(e,t){super(oR(e),`Firebase Storage: ${t} (${oR(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ir.prototype)}_codeEquals(e){return oR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function oR(n){return"storage/"+n}function aR(){return new Ir("unknown","An unknown error occurred, please check the error payload for server response.")}function E2(){return new Ir("canceled","User canceled the upload/download.")}function b2(){return new Ir("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Ny(n){return new Ir("invalid-argument",n)}function C2(){return new Ir("app-deleted","The Firebase app was deleted.")}function I2(n){return new Ir("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function XE(n,e){return new Ir("invalid-format","String does not match format '"+n+"': "+e)}function eb(n){throw new Ir("internal-error","Internal error: "+n)}class vs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=vs.makeFromUrl(e,t)}catch(i){return new vs(e,"")}if(""===r.path)return r;throw function w3(n){return new Ir("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function E(Qe){Qe.path_=decodeURIComponent(Qe.path)}const S=t.replace(/[.]/g,"\\."),Xe=[{regex:f,indices:{bucket:1,path:3},postModify:function a(Qe){"/"===Qe.path.charAt(Qe.path.length-1)&&(Qe.path_=Qe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:E},{regex:new RegExp(`^https?://${t===v2?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:E}];for(let Qe=0;Qe<Xe.length;Qe++){const bt=Xe[Qe],Ot=bt.regex.exec(e);if(Ot){let $l=Ot[bt.indices.path];$l||($l=""),r=new vs(Ot[bt.indices.bucket],$l),bt.postModify(r);break}}if(null==r)throw function v3(n){return new Ir("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class I3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function CD(n){return"string"==typeof n||n instanceof String}function T2(n){return lR()&&n instanceof Blob}function lR(){return"undefined"!=typeof Blob}function uR(n,e,t,r){if(r<e)throw Ny(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Ny(`Invalid value for '${n}'. Expected ${t} or less.`)}function pd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function D2(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var gf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(gf||(gf={})),gf))();class k3{constructor(e,t,r,i,a,c,f,_,E,T,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=_,this.timeout_=E,this.progressCallback_=T,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,O)=>{this.resolve_=N,this.reject_=O,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,c=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(f,f.getResponse());!function A3(n){return void 0!==n}(_)?a():a(_)}catch(_){c(_)}else if(null!==f){const _=aR();_.serverResponse=f.getErrorText(),c(this.errorCallback_?this.errorCallback_(f,_):_)}else c(i.canceled?this.appDelete_?C2():E2():function y3(){return new Ir("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new ID(!1,null,!0)):this.backoffId_=function T3(n,e,t){let r=1,i=null,a=null,c=!1,f=0;function _(){return 2===f}let E=!1;function T(..._e){E||(E=!0,e.apply(null,_e))}function S(_e){i=setTimeout(()=>{i=null,n(O,_())},_e)}function N(){a&&clearTimeout(a)}function O(_e,...Be){if(E)return void N();if(_e)return N(),void T.call(null,_e,...Be);if(_()||c)return N(),void T.call(null,_e,...Be);let Xe;r<64&&(r*=2),1===f?(f=2,Xe=0):Xe=1e3*(r+Math.random()),S(Xe)}let j=!1;function ie(_e){j||(j=!0,N(),!E&&(null!==i?(_e||(f=2),clearTimeout(i),S(0)):_e||(f=1)))}return S(0),a=setTimeout(()=>{c=!0,ie(!0)},t),ie}((r,i)=>{if(i)return void r(!1,new ID(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const c=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const f=a.getErrorCode()===gf.NO_ERROR,_=a.getStatus();if(!f||this.isRetryStatusCode_(_)){const T=a.getErrorCode()===gf.ABORT;return void r(!1,new ID(!1,null,T))}const E=-1!==this.successCodes_.indexOf(_);r(!0,new ID(E,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function D3(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class ID{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function L3(...n){const e=function F3(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(lR())return new Blob(n);throw new Ir("unsupported-environment","This browser doesn't seem to support creating Blobs")}const fa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class cR{constructor(e,t){this.data=e,this.contentType=t||null}}function dR(n,e){switch(n){case fa.RAW:return new cR(A2(e));case fa.BASE64:case fa.BASE64URL:return new cR(S2(n,e));case fa.DATA_URL:return new cR(function j3(n){const e=new x2(n);return e.base64?S2(fa.BASE64,e.rest):function B3(n){let e;try{e=decodeURIComponent(n)}catch(t){throw XE(fa.DATA_URL,"Malformed data URL.")}return A2(e)}(e.rest)}(e),function Z3(n){return new x2(n).contentType}(e))}throw aR()}function A2(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function S2(n,e){switch(n){case fa.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw XE(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case fa.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw XE(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function V3(n){return atob(n)}(e)}catch(i){throw XE(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class x2{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw XE(fa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function H3(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Qu{constructor(e,t){let r=0,i="";T2(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(T2(this.data_)){const i=function U3(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Qu(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Qu(r,!0)}}static getBlob(...e){if(lR()){const t=e.map(r=>r instanceof Qu?r.data_:r);return new Qu(L3.apply(null,t))}{const t=e.map(c=>CD(c)?dR(fa.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(c=>{for(let f=0;f<c.length;f++)i[a++]=c[f]}),new Qu(i,!0)}}uploadData(){return this.data_}}function hR(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function x3(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function k2(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function G3(n,e){return e}class Gs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||G3}}let TD=null;function tb(){if(TD)return TD;const n=[];n.push(new Gs("bucket")),n.push(new Gs("generation")),n.push(new Gs("metageneration")),n.push(new Gs("name","fullPath",!0));const t=new Gs("name");t.xform=function e(a,c){return function W3(n){return!CD(n)||n.length<2?n:k2(n)}(c)},n.push(t);const i=new Gs("size");return i.xform=function r(a,c){return void 0!==c?Number(c):c},n.push(i),n.push(new Gs("timeCreated")),n.push(new Gs("updated")),n.push(new Gs("md5Hash",null,!0)),n.push(new Gs("cacheControl",null,!0)),n.push(new Gs("contentDisposition",null,!0)),n.push(new Gs("contentEncoding",null,!0)),n.push(new Gs("contentLanguage",null,!0)),n.push(new Gs("contentType",null,!0)),n.push(new Gs("metadata","customMetadata",!0)),TD=n,TD}function R2(n,e,t){const r=hR(e);return null===r?null:function K3(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const c=t[a];r[c.local]=c.xform(r,e[c.server])}return function z3(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new vs(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function fR(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const M2="prefixes";class Ju{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Xu(n){if(!n)throw aR()}function DD(n,e){return function t(r,i){const a=R2(n,i,e);return Xu(null!==a),a}}function Py(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function m3(){return new Ir("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function g3(){return new Ir("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function p3(n){return new Ir("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function _3(n){return new Ir("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function nb(n){const e=Py(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function f3(n){return new Ir("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function P2(n,e,t){const i=pd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new Ju(i,"GET",DD(n,t),c);return f.errorHandler=nb(e),f}function t8(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const f=pd(e.bucketOnlyServerUrl(),n.host,n._protocol),E=n.maxOperationRetryTime,T=new Ju(f,"GET",function X3(n,e){return function t(r,i){const a=function J3(n,e,t){const r=hR(t);return null===r?null:function Q3(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[M2])for(const i of t[M2]){const a=i.replace(/\/$/,""),c=n._makeStorageReference(new vs(e,a));r.prefixes.push(c)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new vs(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Xu(null!==a),a}}(n,e.bucket),E);return T.urlParams=a,T.errorHandler=Py(e),T}function F2(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function s8(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class AD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function pR(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Xu(!1)}return Xu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const u8={STATE_CHANGED:"state_changed"},Ws={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function gR(n){switch(n){case"running":case"pausing":case"canceling":return Ws.RUNNING;case"paused":return Ws.PAUSED;case"success":return Ws.SUCCESS;case"canceled":return Ws.CANCELED;default:return Ws.ERROR}}class c8{constructor(e,t,r){if(function S3(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Oy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class h8 extends class d8{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=gf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=gf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=gf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw eb("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw eb("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw eb("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw eb("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw eb("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Hl(){return new h8}class B2{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=tb(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function o8(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c=F2(e,r,i),f={name:c.fullPath},_=pd(a,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},S=fR(c,t),j=new Ju(_,"POST",function O(ie){let _e;pR(ie);try{_e=ie.getResponseHeader("X-Goog-Upload-URL")}catch(Be){Xu(!1)}return Xu(CD(_e)),_e},n.maxUploadRetryTime);return j.urlParams=f,j.headers=T,j.body=S,j.errorHandler=Py(e),j}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Hl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function a8(n,e,t,r){const _=new Ju(t,"POST",function a(E){const T=pR(E,["active","final"]);let S=null;try{S=E.getResponseHeader("X-Goog-Upload-Size-Received")}catch(O){Xu(!1)}S||Xu(!1);const N=Number(S);return Xu(!isNaN(N)),new AD(N,r.size(),"final"===T)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=Py(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Hl,t,r);this._request=a,a.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new AD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let c;try{c=function l8(n,e,t,r,i,a,c,f){const _=new AD(0,0);if(c?(_.current=c.current,_.total=c.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function b3(){return new Ir("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const E=_.total-_.current;let T=E;i>0&&(T=Math.min(T,i));const S=_.current,j={"X-Goog-Upload-Command":T===E?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},ie=r.slice(S,S+T);if(null===ie)throw b2();const Xe=new Ju(t,"POST",function _e(Qe,bt){const Ot=pR(Qe,["active","final"]),hr=_.current+T,$l=r.size();let IR;return IR="final"===Ot?DD(e,a)(Qe,bt):null,new AD(hr,$l,"final"===Ot,IR)},e.maxUploadRetryTime);return Xe.headers=j,Xe.body=ie.uploadData(),Xe.progressCallback=f||null,Xe.errorHandler=Py(n),Xe}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const f=this._ref.storage._makeRequest(c,Hl,i,a);this._request=f,f.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=P2(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Hl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function L2(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},_=function f(){let Xe="";for(let Qe=0;Qe<2;Qe++)Xe+=Math.random().toString().slice(2);return Xe}();c["Content-Type"]="multipart/related; boundary="+_;const E=F2(e,r,i),T=fR(E,t),O=Qu.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+_+"\r\nContent-Type: "+E.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===O)throw b2();const j={name:E.fullPath},ie=pd(a,n.host,n._protocol),Be=n.maxUploadRetryTime,lt=new Ju(ie,"POST",DD(n,t),Be);return lt.urlParams=j,lt.headers=c,lt.body=O.uploadData(),lt.errorHandler=Py(e),lt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Hl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=E2(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=gR(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new c8(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(gR(this._state)){case Ws.SUCCESS:Oy(this._resolve.bind(null,this.snapshot))();break;case Ws.CANCELED:case Ws.ERROR:Oy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(gR(this._state)){case Ws.RUNNING:case Ws.PAUSED:e.next&&Oy(e.next.bind(e,this.snapshot))();break;case Ws.SUCCESS:e.complete&&Oy(e.complete.bind(e))();break;default:e.error&&Oy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Yg{constructor(e,t){this._service=e,this._location=t instanceof vs?t:vs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Yg(e,t)}get root(){const e=new vs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return k2(this._location.path)}get storage(){return this._service}get parent(){const e=function $3(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new vs(this._location.bucket,e);return new Yg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw I2(e)}}function Z2(n,e,t){return mR.apply(this,arguments)}function mR(){return mR=(0,ge.Z)(function*(n,e,t){const i=yield H2(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Z2(n,e,i.nextPageToken))}),mR.apply(this,arguments)}function H2(n,e){null!=e&&"number"==typeof e.maxResults&&uR("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=t8(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Hl)}function I8(n){n._throwIfRoot("getDownloadURL");const e=function n8(n,e,t){const i=pd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new Ju(i,"GET",function e8(n,e){return function t(r,i){const a=R2(n,i,e);return Xu(null!==a),function Y3(n,e,t,r){const i=hR(e);if(null===i||!CD(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const c=encodeURIComponent;return a.split(",").map(E=>{const S=n.fullPath;return pd("/b/"+c(n.bucket)+"/o/"+c(S),t,r)+D2({alt:"media",token:E})})[0]}(a,i,n.host,n._protocol)}}(n,t),c);return f.errorHandler=nb(e),f}(n.storage,n._location,tb());return n.storage.makeRequestWithTokens(e,Hl).then(t=>{if(null===t)throw function C3(){return new Ir("no-download-url","The given file does not have any download URLs.")}();return t})}function $2(n,e){const t=function q3(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new vs(n._location.bucket,t);return new Yg(n.storage,r)}function q2(n,e){if(n instanceof _R){const t=n;if(null==t._bucket)throw function E3(){return new Ir("no-default-bucket","No default bucket found. Did you set the '"+w2+"' property when initializing the app?")}();const r=new Yg(t,t._bucket);return null!=e?q2(r,e):r}return void 0!==e?$2(n,e):n}function S8(n,e){if(e&&function D8(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof _R)return function A8(n,e){return new Yg(n,e)}(n,e);throw Ny("To use ref(service, url), the first argument must be a Storage instance.")}return q2(n,e)}function G2(n,e){const t=null==e?void 0:e[w2];return null==t?null:vs.makeFromBucketSpec(t,n)}class _R{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=v2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?vs.makeFromBucketSpec(i,this._host):G2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?vs.makeFromBucketSpec(this._url,e):G2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){uR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){uR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ge.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ge.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Yg(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new I3(C2());{const a=function O3(n,e,t,r,i,a){const c=D2(n.urlParams),f=n.url+c,_=Object.assign({},n.headers);return function N3(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function R3(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function M3(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(_,a),function P3(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new k3(f,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,ge.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const W2="@firebase/storage";function Y2(n,e){return S8(n=(0,P.m9)(n),e)}function V8(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new _R(t,r,i,e,Vi.SDK_VERSION)}!function B8(){(0,Vi._registerComponent)(new Qo.wA("storage",V8,"PUBLIC").setMultipleInstances(!0)),(0,Vi.registerVersion)(W2,"0.9.9",""),(0,Vi.registerVersion)(W2,"0.9.9","esm2017")}();class SD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Q2{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new SD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new SD(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?c=>t(new SD(c,this,this._ref)):{next:t.next?c=>t.next(new SD(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class J2{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new gd(e,this._service))}get items(){return this._delegate.items.map(e=>new gd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class gd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function L8(n,e){return $2(n,e)}(this._delegate,e);return new gd(t,this.storage)}get root(){return new gd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new gd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Q2(function k8(n,e,t){return function v8(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new B2(n,new Qu(e),t)}(n=(0,P.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=fa.RAW,r){this._throwIfRoot("putString");const i=dR(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new Q2(new B2(this._delegate,new Qu(i.data,!0),a),this)}listAll(){return function P8(n){return function E8(n){const e={prefixes:[],items:[]};return Z2(n,e).then(()=>e)}(n=(0,P.m9)(n))}(this._delegate).then(e=>new J2(e,this.storage))}list(e){return function N8(n,e){return H2(n=(0,P.m9)(n),e)}(this._delegate,e||void 0).then(t=>new J2(t,this.storage))}getMetadata(){return function R8(n){return function b8(n){n._throwIfRoot("getMetadata");const e=P2(n.storage,n._location,tb());return n.storage.makeRequestWithTokens(e,Hl)}(n=(0,P.m9)(n))}(this._delegate)}updateMetadata(e){return function M8(n,e){return function C8(n,e){n._throwIfRoot("updateMetadata");const t=function r8(n,e,t,r){const a=pd(e.fullServerUrl(),n.host,n._protocol),f=fR(t,r),E=n.maxOperationRetryTime,T=new Ju(a,"PATCH",DD(n,r),E);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=f,T.errorHandler=nb(e),T}(n.storage,n._location,e,tb());return n.storage.makeRequestWithTokens(t,Hl)}(n=(0,P.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function O8(n){return I8(n=(0,P.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function F8(n){return function T8(n){n._throwIfRoot("deleteObject");const e=function i8(n,e){const r=pd(e.fullServerUrl(),n.host,n._protocol),f=new Ju(r,"DELETE",function c(_,E){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=nb(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Hl)}(n=(0,P.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw I2(e)}}class X2{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(eL(e))throw Ny("ref() expected a child path but got a URL, use refFromURL instead.");return new gd(Y2(this._delegate,e),this)}refFromURL(e){if(!eL(e))throw Ny("refFromURL() expected a full URL but got a child path, use ref() instead.");try{vs.makeFromUrl(e,this._delegate.host)}catch(t){throw Ny("refFromUrl() expected a valid full URL but got an invalid one.")}return new gd(Y2(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function U8(n,e,t,r={}){!function x8(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,P.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function eL(n){return/^[A-Za-z]+:\/\//.test(n)}function $8(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new X2(t,r)}function tL(n){const e=function G8(n){return new er.y(e=>{const t=c=>e.next(c);t(n.snapshot);const a=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){a()}}).pipe(function c3(n,e=Ko.z){return(0,Kn.e)((t,r)=>{let i=null,a=null,c=null;const f=()=>{if(i){i.unsubscribe(),i=null;const E=a;a=null,r.next(E)}};function _(){const E=c+n,T=e.now();if(T<E)return i=this.schedule(void 0,E-T),void r.add(i);f()}t.subscribe(new Zn.Q(r,E=>{a=E,c=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,nt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function xD(n){return{getDownloadURL:()=>tt(void 0).pipe(nn.fc,Hn(()=>n.getDownloadURL()),nn.iC),getMetadata:()=>tt(void 0).pipe(nn.fc,Hn(()=>n.getMetadata()),nn.iC),delete:()=>(0,en.D)(n.delete()),child:e=>xD(n.child(e)),updateMetadata:e=>(0,en.D)(n.updateMetadata(e)),put:(e,t)=>tL(n.put(e,t)),putString:(e,t,r)=>tL(n.putString(e,t,r)),list:e=>(0,en.D)(n.list(e)),listAll:()=>(0,en.D)(n.listAll())}}!function q8(n){const e={TaskState:Ws,TaskEvent:u8,StringFormat:fa,Storage:X2,Reference:gd};n.INTERNAL.registerComponent(new Qo.wA("storage-compat",$8,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(uv.Z);const W8=new u.OlP("angularfire2.storageBucket"),z8=new u.OlP("angularfire2.storage.maxUploadRetryTime"),K8=new u.OlP("angularfire2.storage.maxOperationRetryTime"),Y8=new u.OlP("angularfire2.storage.use-emulator");let nL=(()=>{class n{constructor(t,r,i,a,c,f,_,E,T,S){const N=(0,Rr.on)(t,c,r);this.storage=(0,Rr.cc)(`${N.name}.storage.${i}`,"AngularFireStorage",N.name,()=>{const O=c.runOutsideAngular(()=>N.storage(i||void 0)),j=T;return j&&O.useEmulator(...j),_&&O.setMaxUploadRetryTime(_),E&&O.setMaxOperationRetryTime(E),O},[_,E])}ref(t){return xD(this.storage.ref(t))}refFromURL(t){return xD(this.storage.refFromURL(t))}upload(t,r,i){return xD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Rr.Dh),u.LFG(Rr.xv,8),u.LFG(W8,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(nn.HU),u.LFG(z8,8),u.LFG(K8,8),u.LFG(Y8,8),u.LFG(Xc,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Q8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),J8=(()=>{class n{constructor(){ag.Z.registerVersion("angularfire",nn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[nL],imports:[Q8]}),n})();function X8(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"label",3),u.TgZ(2,"div",4),u.O4$(),u.TgZ(3,"svg",5),u._UZ(4,"path",6),u.qZA(),u.qZA(),u.kcU(),u.TgZ(5,"span",7),u._uU(6),u.qZA(),u.TgZ(7,"input",8),u.NdJ("change",function(i){return u.CHM(t),u.oxw().upload(i)}),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=u.oxw();u.xp6(6),u.hij("Ajouter ",t.displayName,"")}}function e4(n,e){if(1&n&&(u.TgZ(0,"div",9),u.TgZ(1,"div",4),u.O4$(),u.TgZ(2,"svg",10),u._UZ(3,"circle",11),u._UZ(4,"polyline",12),u._UZ(5,"circle",13),u.qZA(),u.qZA(),u.kcU(),u.TgZ(6,"span",7),u._uU(7),u.qZA(),u.qZA()),2&n){const t=u.oxw();u.xp6(7),u.Oqu(t.name)}}let t4=(()=>{class n{constructor(t){this.afStorage=t,this.uploadFileName=new u.vpe,this.progress=new u.vpe}ngOnInit(){"image"===this.type?this.displayName="une image":"file"===this.type&&(this.displayName="un fichier")}upload(t){this.name=t.target.files[0].name,"image"===this.type?this.ref=this.afStorage.ref(`images/${this.name}`):"file"===this.type&&(this.ref=this.afStorage.ref("/files/"+this.name)),this.task=this.ref.put(t.target.files[0]),this.progress.emit(this.uploadProgress=this.task.snapshotChanges().pipe((0,nt.U)(r=>r.bytesTransferred/r.totalBytes*100))),this.task.snapshotChanges().pipe(Ld(()=>{this.ref.getDownloadURL().pipe((0,nt.U)(r=>{this.uploadFileName.emit(r)})).subscribe()})).subscribe()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(nL))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-upload-file"]],inputs:{type:"type"},outputs:{uploadFileName:"uploadFileName",progress:"progress"},decls:5,vars:4,consts:[[1,"flex","justify-between","py-2"],[4,"ngIf","ngIfElse"],["uploadSucess",""],[1,"block","md:w-56","w-36","px-4","py-6","bg-primary-50","text-primary-700","rounded-lg","shadow-lg","tracking-wide","uppercase","border","border-primary-800","cursor-pointer","hover:bg-primary-100","hover:text-primary-600"],[1,"flex","items-center","justify-center","mb-2"],["fill","currentColor","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20",1,"w-8","h-8"],["d","M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z"],[1,"mt-2","text-base","leading-normal"],["type","file",1,"hidden",3,"change"],[1,"block","truncate","md:w-56","w-36","items-center","px-4","py-6","bg-primary-50","text-primary-700","rounded-lg","shadow-lg","tracking-wide","uppercase","border","border-primary-800"],["xmlns","http://www.w3.org/2000/svg","width","36","height","36","fill","#911011","viewBox","0 0 256 256"],["cx","128","cy","128","r","96","opacity","0.2"],["points","172 104 113.3 160 84 132","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["cx","128","cy","128","r","96","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"]],template:function(t,r){if(1&t&&(u.TgZ(0,"div",0),u.YNc(1,X8,8,1,"div",1),u.ALo(2,"async"),u.YNc(3,e4,8,1,"ng-template",null,2,u.W1O),u.qZA()),2&t){const i=u.MAs(4);u.xp6(1),u.Q6J("ngIf",100!==u.lcZ(2,2,r.uploadProgress))("ngIfElse",i)}},directives:[Ln],pipes:[Ca],styles:[""]}),n})(),n4=(()=>{class n{constructor(t,r,i){this.db=t,this.articleService=r,this.datePipe=i,this.id="",this.status="",this.title="",this.description="",this.journal="",this.link="",this.creationDate=new Date,this.fileName="",this.imageName="",this.progressUploadImage=new er.y,this.progressUploadFile=new er.y,this.articleAdded=new u.vpe}ngOnInit(){this.datePipe.transform(this.creationDate,"dd/MM/yyyy")}onSubmit(t){const r={title:t.value.title,description:t.value.description,journal:t.value.journal,link:t.value.link,creationDate:t.value.creationDate,imageName:this.imageName,fileName:this.fileName};this.db.object(`articles/${this.title}`).set(r).finally(()=>{this.articleAdded.emit(!0)})}onUploadImage(t){this.imageName=t}onUploadFile(t){this.fileName=t}onProgressUploadImage(t){this.progressUploadImage=t}onProgressUploadFile(t){this.progressUploadFile=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Tw),u.Y36(ky),u.Y36(Ta))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-add-article"]],outputs:{articleAdded:"articleAdded"},decls:52,vars:13,consts:[[1,"flex","items-center","justify-center","mb-4"],[1,"text-primary-700","text-3xl","font-bold"],[1,"flex","justify-center","items-center","ml-8"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","#911011","viewBox","0 0 256 256"],["cx","128","cy","128","r","96","opacity","0.2"],["cx","128","cy","128","r","96","fill","none","stroke","#911011","stroke-miterlimit","10","stroke-width","16"],["x1","88","y1","128","x2","168","y2","128","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","128","y1","88","x2","128","y2","168","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[3,"ngSubmit"],["formSearch","ngForm"],[1,"mb-4"],["for","username",1,"block","text-primary-700","text-sm","font-bold","mb-2"],["name","title","id","title","type","text","maxlength","100","placeholder","Titre","aria-label","Tilte","required","",1,"w-full","focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","bg-white","rounded","placeholder-primary-100",3,"ngModel","ngModelChange"],["for","description",1,"block","text-primary-700","text-sm","font-bold","mb-2"],["name","description","required","","id","description","type","description","maxlength","350","placeholder","Entrer une description de votre article","aria-label","Description",1,"justify-start","w-full","focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","bg-white","rounded","placeholder-primary-100","h-56","overflow-y-scroll",3,"ngModel","ngModelChange"],["for","journal",1,"block","text-primary-700","text-sm","font-bold","mb-2"],["name","journal","id","journal","type","text","maxlength","100","placeholder","Journal","aria-label","Journal","required","",1,"w-full","focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","bg-white","rounded","placeholder-primary-100",3,"ngModel","ngModelChange"],["name","link","id","link","type","text","maxlength","100","placeholder","Lien","aria-label","Lien","required","",1,"w-full","focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","bg-white","rounded","placeholder-primary-100",3,"ngModel","ngModelChange"],["for","password",1,"block","text-primary-700","text-sm","font-bold","mb-2"],["name","creationDate","required","","id","creationDate","min","2018-01-01","max","2030-12-31","type","date","aria-label","CreationDate",1,"w-full","focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","bg-white","rounded","placeholder-primary-100",3,"ngModel","ngModelChange"],[1,"mb-4","flex","justify-between","items-center"],[3,"type","uploadFileName","progress"],[1,"flex","items-center","justify-center","my-8"],["type","submit",1,"relative","py-4","px-6","disabled:bg-primary-100","disabled:hover:bg-primary-100","bg-secondary-600","hover:bg-secondary-500","rounded-lg","leading-none","flex","items-center","text","divide-x","divide-secondary-50",3,"disabled"],[1,"text-secondary-50","pr-6","font-sans","transition","duration-200"],[1,"flex","items-center","space-x-5","pl-6"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","#fafafa","viewBox","0 0 256 256"],["width","256","height","256","fill","none"],["points","172 104 113.3 160 84 132","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["cx","128","cy","128","r","96","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["routerLink","/login",1,"underline","text-primary-500","hover:text-primary-600","inline-flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","fill","#ba2525","viewBox","0 0 256 256",1,"mr-1"],["x1","216","y1","128","x2","40","y2","128","fill","none","stroke","#ba2525","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["points","112 56 40 128 112 200","fill","none","stroke","#ba2525","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"]],template:function(t,r){if(1&t){const i=u.EpF();u.TgZ(0,"div",0),u.TgZ(1,"h1",1),u._uU(2,"Ajouter un article"),u.qZA(),u.TgZ(3,"div",2),u.O4$(),u.TgZ(4,"svg",3),u._UZ(5,"circle",4),u._UZ(6,"circle",5),u._UZ(7,"line",6),u._UZ(8,"line",7),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(9,"form",8,9),u.NdJ("ngSubmit",function(){u.CHM(i);const c=u.MAs(10);return r.onSubmit(c)}),u.TgZ(11,"div",10),u.TgZ(12,"label",11),u._uU(13," Titre * "),u.qZA(),u.TgZ(14,"input",12),u.NdJ("ngModelChange",function(c){return r.title=c}),u.qZA(),u.qZA(),u.TgZ(15,"div",10),u.TgZ(16,"label",13),u._uU(17," Description * "),u.qZA(),u.TgZ(18,"textarea",14),u.NdJ("ngModelChange",function(c){return r.description=c}),u.qZA(),u.qZA(),u.TgZ(19,"div",10),u.TgZ(20,"label",15),u._uU(21," Journal * "),u.qZA(),u.TgZ(22,"input",16),u.NdJ("ngModelChange",function(c){return r.journal=c}),u.qZA(),u.qZA(),u.TgZ(23,"div",10),u.TgZ(24,"label",15),u._uU(25," Lien * "),u.qZA(),u.TgZ(26,"input",17),u.NdJ("ngModelChange",function(c){return r.link=c}),u.qZA(),u.qZA(),u.TgZ(27,"div",10),u.TgZ(28,"label",18),u._uU(29," Date de creation * "),u.qZA(),u.TgZ(30,"input",19),u.NdJ("ngModelChange",function(c){return r.creationDate=c}),u.ALo(31,"date"),u.qZA(),u.qZA(),u.TgZ(32,"div",20),u.TgZ(33,"app-upload-file",21),u.NdJ("uploadFileName",function(c){return r.onUploadImage(c)})("progress",function(c){return r.onProgressUploadImage(c)}),u.qZA(),u.TgZ(34,"app-upload-file",21),u.NdJ("uploadFileName",function(c){return r.onUploadFile(c)})("progress",function(c){return r.onProgressUploadFile(c)}),u.qZA(),u.qZA(),u.TgZ(35,"div",22),u.TgZ(36,"button",23),u.ALo(37,"async"),u.TgZ(38,"span",24),u._uU(39," Ajouter"),u.qZA(),u.TgZ(40,"span",25),u.O4$(),u.TgZ(41,"svg",26),u._UZ(42,"rect",27),u._UZ(43,"circle",4),u._UZ(44,"polyline",28),u._UZ(45,"circle",29),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(46,"a",30),u.O4$(),u.TgZ(47,"svg",31),u._UZ(48,"rect",27),u._UZ(49,"line",32),u._UZ(50,"polyline",33),u.qZA(),u._uU(51," Back "),u.qZA()}if(2&t){const i=u.MAs(10);u.xp6(14),u.Q6J("ngModel",r.title),u.xp6(4),u.Q6J("ngModel",r.description),u.xp6(4),u.Q6J("ngModel",r.journal),u.xp6(4),u.Q6J("ngModel",r.link),u.xp6(4),u.Q6J("ngModel",u.xi3(31,8,r.creationDate,"yyyy-MM-dd")),u.xp6(3),u.Q6J("type","image"),u.xp6(1),u.Q6J("type","file"),u.xp6(2),u.Q6J("disabled",i.invalid||u.lcZ(37,11,r.progressUploadImage)<100&&""!==r.imageName)}},directives:[QE,qE,Kg,Ry,bD,JE,hD,YE,t4,ho],pipes:[Ta,Ca],encapsulation:2}),n})(),r4=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-success-add-article-page"]],decls:14,vars:0,consts:[[1,"container","w-full"],[1,"flex","flex-col","justify-center","items-center"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","#911011","viewBox","0 0 256 256"],["cx","128","cy","128","r","96","opacity","0.2"],["points","172 104 113.3 160 84 132","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["cx","128","cy","128","r","96","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"text-primary-700","text-3xl","font-bold","mt-4"],["routerLink","/login",1,"underline","text-primary-500","hover:text-primary-600","inline-flex","items-center","justify-center","mt-4"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","fill","#ba2525","viewBox","0 0 256 256",1,"mr-1"],["width","256","height","256","fill","none"],["x1","216","y1","128","x2","40","y2","128","fill","none","stroke","#ba2525","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["points","112 56 40 128 112 200","fill","none","stroke","#ba2525","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.O4$(),u.TgZ(2,"svg",2),u._UZ(3,"circle",3),u._UZ(4,"polyline",4),u._UZ(5,"circle",5),u.qZA(),u.kcU(),u.TgZ(6,"h1",6),u._uU(7," Article ajout\xe9e avec succ\xe8s "),u.qZA(),u.TgZ(8,"a",7),u.O4$(),u.TgZ(9,"svg",8),u._UZ(10,"rect",9),u._UZ(11,"line",10),u._UZ(12,"polyline",11),u.qZA(),u._uU(13," Back "),u.qZA(),u.qZA(),u.qZA())},directives:[ho],encapsulation:2}),n})();function i4(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",5),u.TgZ(1,"app-add-article",6),u.NdJ("articleAdded",function(i){return u.CHM(t),u.oxw().onArticleAdded(i)}),u.qZA(),u.qZA()}}function s4(n,e){1&n&&u._UZ(0,"app-success-add-article-page")}let o4=(()=>{class n{constructor(){this.articleAdded=!1}onArticleAdded(t){this.articleAdded=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-add-article-page"]],decls:6,vars:2,consts:[[1,"container","max-w-full","max-h-full","bg-primary-300"],[1,"bg-primary-50","py-8","px-4","flex","flex-col","items-center","justify-center","min-h-screen"],[1,"bg-primary-50","border-dashed","border-primary-700","border-2","rounded-xl","py-12","lg:px-28","px-8","shadow-xl","md:w-246"],["class","container w-full",4,"ngIf","ngIfElse"],["articleAddedSuccess",""],[1,"container","w-full"],[3,"articleAdded"]],template:function(t,r){if(1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.YNc(3,i4,2,0,"div",3),u.YNc(4,s4,1,0,"ng-template",null,4,u.W1O),u.qZA(),u.qZA(),u.qZA()),2&t){const i=u.MAs(5);u.xp6(3),u.Q6J("ngIf",!r.articleAdded)("ngIfElse",i)}},directives:[Ln,n4,r4],encapsulation:2}),n})();function a4(n,e){if(1&n&&(u.O4$(),u.kcU(),u.TgZ(0,"div"),u.TgZ(1,"div",13),u.TgZ(2,"h2",14),u._uU(3),u.qZA(),u.qZA(),u.qZA()),2&n){const t=u.oxw();u.xp6(3),u.hij(" ",t.searchFound," articles trouv\xe9s ")}}function l4(n,e){1&n&&(u.O4$(),u.kcU(),u.TgZ(0,"div",13),u.TgZ(1,"h2",14),u._uU(2," Aucun article trouv\xe9s "),u.qZA(),u.qZA())}let u4=(()=>{class n{constructor(t){this.articleService=t,this.articles=new u.vpe,this.updateCurrentPage=new u.vpe,this.actualPage=1,this.searchFound=0,this.searchWord=""}ngOnInit(){this.articleService.getArticles().subscribe(t=>{this.articles.emit(t),this.searchFound=t.length})}onTyping(t){this.searchWord=t.target.value,this.actualPage=1,this.updateCurrentPage.emit(this.actualPage),this.articleService.search(this.searchWord).subscribe(r=>{this.articles.emit(r),this.searchFound=r.length})}onSubmit(t){this.searchWord=t.value.word,this.searchWord.length>0?this.articleService.search(this.searchWord).subscribe(r=>{this.articles.emit(r),this.searchFound=r.length}):this.articleService.getArticles().subscribe(r=>{this.articles.emit(r),this.searchFound=r.length})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ky))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-search-articles"]],outputs:{articles:"articles",updateCurrentPage:"updateCurrentPage"},decls:14,vars:3,consts:[[1,"flex","flex-col","items-center","justify-center","pt-2","px-4"],[1,"inline-flex",3,"ngSubmit"],["formSearch","ngForm"],["name","word","type","text","placeholder","Search","aria-label","Search",1,"font-thin","text-secondary-600","px-2","py-2","outline-none","focus:ring-primary-200","focus:ring-1","rounded-l-md","placeholder-primary-200","bg-white",3,"keyup"],["type","submit",1,"relative","py-2","px-4","bg-secondary-600","hover:bg-secondary-500","rounded-r-md","ring-1","ring-secondary-500","leading-none","flex","items-center",3,"disabled"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","#fafafa","viewBox","0 0 256 256"],["width","256","height","256","fill","none"],["cx","116","cy","116","r","84","opacity","0.2"],["cx","116","cy","116","r","84","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","175.4","y1","175.4","x2","224","y2","224","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[4,"ngIf","ngIfElse"],["nothingFound",""],[1,"flex","items-center","justify-center","py-4","px-4"],[1,"font-sans","font-bold","text-center","text-primary-700"]],template:function(t,r){if(1&t){const i=u.EpF();u.TgZ(0,"div",0),u.TgZ(1,"form",1,2),u.NdJ("ngSubmit",function(){u.CHM(i);const c=u.MAs(2);return r.onSubmit(c)}),u.TgZ(3,"input",3),u.NdJ("keyup",function(c){return r.onTyping(c)}),u.qZA(),u.TgZ(4,"button",4),u.TgZ(5,"span",5),u.O4$(),u.TgZ(6,"svg",6),u._UZ(7,"rect",7),u._UZ(8,"circle",8),u._UZ(9,"circle",9),u._UZ(10,"line",10),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(11,a4,4,1,"div",11),u.YNc(12,l4,3,0,"ng-template",null,12,u.W1O),u.qZA()}if(2&t){const i=u.MAs(2),a=u.MAs(13);u.xp6(4),u.Q6J("disabled",i.invalid),u.xp6(7),u.Q6J("ngIf",r.searchFound>0)("ngIfElse",a)}},directives:[QE,qE,Kg,Ln],encapsulation:2}),n})();function c4(n,e){if(1&n&&(u.O4$(),u.kcU(),u.TgZ(0,"a",36),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.s9C("href",t.article.fileName,u.LSH),u.xp6(1),u.hij(" ",t.article.title," ")}}function d4(n,e){1&n&&(u.O4$(),u.kcU(),u.TgZ(0,"span",16),u._uU(1,"Pas de fichier associ\xe9"),u.qZA())}function h4(n,e){if(1&n&&(u.TgZ(0,"div",28),u.O4$(),u.TgZ(1,"svg",7),u._UZ(2,"rect",8),u._UZ(3,"path",29),u._UZ(4,"path",30),u._UZ(5,"polyline",31),u._UZ(6,"line",32),u._UZ(7,"line",33),u.qZA(),u.YNc(8,c4,2,2,"a",34),u.YNc(9,d4,2,0,"ng-template",null,35,u.W1O),u.qZA()),2&n){const t=u.MAs(10),r=u.oxw();u.xp6(8),u.Q6J("ngIf",r.hasFile)("ngIfElse",t)}}let f4=(()=>{class n{constructor(t){this.auth=t,this.hasFile=!0,this.loggedIn=!1,this.auth.isLogIn$.subscribe(r=>{this.loggedIn=r})}set inputArticle(t){t.fileName||(this.hasFile=!1),t.imageName||(t.imageName="assets/images/default-image.png"),this.article=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(xy))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-article-card"]],inputs:{inputArticle:"inputArticle"},decls:42,vars:11,consts:[[1,"container","md:w-138","bg-primary-50","rounded-lg","shadow-xl"],["alt","Syncing",1,"md:object-cover","object-center","md:w-138","md:h-[288px]","rounded-t-lg","bg-primary-50",3,"src"],[1,"block","md:w-138","md:h-92","bg-primary-800","opacity-40","text-left","rounded-b-lg","px-4","py-4"],[1,"md:h-12","px-1","py-2","font-bold","font-title","leading-12","text-xl","line-clamp-1","text-primary-50"],[1,"md:h-36","line-clamp-5","px-1","py-2","font-medium","leading-6","text-md","text-white"],[1,"inline-flex","items-center","justify-between","w-full"],[1,"px-1","py-2","inline-flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","width","26","height","26","fill","#ffffff","viewBox","0 0 256 256"],["width","256","height","256","fill","none"],["d","M40,88H216V48a8,8,0,0,0-8-8H48a8,8,0,0,0-8,8Z","opacity","0.2"],["x","40","y","40","width","176","height","176","rx","8","fill","none","stroke","#ffffff","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","176","y1","24","x2","176","y2","56","fill","none","stroke","#ffffff","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","80","y1","24","x2","80","y2","56","fill","none","stroke","#ffffff","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","40","y1","88","x2","216","y2","88","fill","none","stroke","#ffffff","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M92,128h28l-16,20a16,16,0,1,1-11.3,27.3","fill","none","stroke","#ffffff","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["points","144 140 160 128 160 180","fill","none","stroke","#ffffff","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"ml-2","font-thin","text-white","text-left"],[1,"md:h-12","px-1","py-2","inline-flex","items-center","justify-center"],["d","M32,200a16,16,0,0,0,16-16V64a8,8,0,0,1,8-8H216a8,8,0,0,1,8,8V184a16,16,0,0,1-16,16Z","opacity","0.2"],["x1","96","y1","112","x2","176","y2","112","fill","none","stroke","#ffffff","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","96","y1","144","x2","176","y2","144","fill","none","stroke","#ffffff","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M32,200a16,16,0,0,0,16-16V64a8,8,0,0,1,8-8H216a8,8,0,0,1,8,8V184a16,16,0,0,1-16,16Z","fill","none","stroke","#ffffff","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M32,200a16,16,0,0,1-16-16h0V88","fill","none","stroke","#ffffff","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"block"],["d","M122.3,71.4l19.8-19.8a44.1,44.1,0,0,1,62.3,62.3l-28.3,28.2a43.9,43.9,0,0,1-62.2,0","fill","none","stroke","#ffffff","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M133.7,184.6l-19.8,19.8a44.1,44.1,0,0,1-62.3-62.3l28.3-28.2a43.9,43.9,0,0,1,62.2,0","fill","none","stroke","#ffffff","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["target","_blank",1,"ml-2","font-thin","text-white","underline",3,"href"],["class","md:h-14 px-1 py-2 inline-flex items-center justify-center",4,"ngIf"],[1,"md:h-14","px-1","py-2","inline-flex","items-center","justify-center"],["d","M216,72V208a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V72Z","opacity","0.2"],["d","M208,216H48a8,8,0,0,1-8-8V72L56,40H200l16,32V208A8,8,0,0,1,208,216Z","fill","none","stroke","#ffffff","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["points","94.1 150.1 128 184 161.9 150.1","fill","none","stroke","#ffffff","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","128","y1","104","x2","128","y2","184","fill","none","stroke","#ffffff","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","40","y1","72","x2","216","y2","72","fill","none","stroke","#ffffff","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["class"," ml-4 font-thin text-primary-100 underline","target","_blank","download","",3,"href",4,"ngIf","ngIfElse"],["hasNoFile",""],["target","_blank","download","",1,"ml-4","font-thin","text-primary-100","underline",3,"href"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u._UZ(1,"img",1),u.TgZ(2,"div",2),u.TgZ(3,"h2",3),u._uU(4),u.qZA(),u.TgZ(5,"h2",4),u._uU(6),u.qZA(),u.TgZ(7,"div",5),u.TgZ(8,"div",6),u.O4$(),u.TgZ(9,"svg",7),u._UZ(10,"rect",8),u._UZ(11,"path",9),u._UZ(12,"rect",10),u._UZ(13,"line",11),u._UZ(14,"line",12),u._UZ(15,"line",13),u._UZ(16,"path",14),u._UZ(17,"polyline",15),u.qZA(),u.kcU(),u.TgZ(18,"span",16),u._uU(19),u.ALo(20,"date"),u.qZA(),u.qZA(),u.TgZ(21,"div",17),u.O4$(),u.TgZ(22,"svg",7),u._UZ(23,"rect",8),u._UZ(24,"path",18),u._UZ(25,"line",19),u._UZ(26,"line",20),u._UZ(27,"path",21),u._UZ(28,"path",22),u.qZA(),u.kcU(),u.TgZ(29,"span",16),u._uU(30),u.qZA(),u.qZA(),u.qZA(),u._UZ(31,"div",23),u.TgZ(32,"div",23),u.TgZ(33,"div",17),u.O4$(),u.TgZ(34,"svg",7),u._UZ(35,"rect",8),u._UZ(36,"path",24),u._UZ(37,"path",25),u.qZA(),u.kcU(),u.TgZ(38,"a",26),u._uU(39),u.qZA(),u.qZA(),u.qZA(),u.TgZ(40,"div",23),u.YNc(41,h4,11,2,"div",27),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(1),u.s9C("src",r.article.imageName,u.LSH),u.xp6(3),u.hij(" ",r.article.title," "),u.xp6(2),u.hij(" ",r.article.description," "),u.xp6(13),u.Oqu(u.xi3(20,8,r.article.creationDate,"dd/MM/YYYY")),u.xp6(11),u.Oqu(r.article.journal),u.xp6(8),u.s9C("href",r.article.link,u.LSH),u.xp6(1),u.hij(" ",r.article.link," "),u.xp6(2),u.Q6J("ngIf",r.loggedIn))},directives:[Ln],pipes:[Ta],encapsulation:2}),n})();function p4(n,e){if(1&n&&(u.TgZ(0,"li",4),u._UZ(1,"app-article-card",5),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.Q6J("inputArticle",t)}}let g4=(()=>{class n{constructor(t){this.articleService=t,this.perPage=2,this.currentPage=1,this.articlesOnPage=[],this.articles=[]}set inputCurrentPage(t){this.currentPage=t,this.articlesOnPage=this.articleService.paginate(this.articles,this.currentPage,this.perPage)}set inputArticles(t){this.articles=t,this.articlesOnPage=this.articleService.paginate(this.articles,this.currentPage,this.perPage)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ky))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-articles"]],inputs:{inputCurrentPage:"inputCurrentPage",inputArticles:"inputArticles"},decls:4,vars:1,consts:[[1,"container","max-w-screen-2xl","mx-auto"],[1,"flex","items-center","justify-center"],[1,"grid","md:grid-cols-2","grid-cols-1","grid-rows-1","gap-20","place-content-evenly","max-w-screen-xl"],["class","col-span-1 row-span-1 bg-transparent px-4",4,"ngFor","ngForOf"],[1,"col-span-1","row-span-1","bg-transparent","px-4"],[3,"inputArticle"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"ul",2),u.YNc(3,p4,2,1,"li",3),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(3),u.Q6J("ngForOf",r.articlesOnPage))},directives:[Dr,f4],encapsulation:2}),n})(),m4=(()=>{class n{constructor(t){this.articleService=t,this.perPage=2,this.page=1,this.max_page=0,this.currentPage=new u.vpe,t.sendCurrentNumberPage.subscribe(r=>{})}set inputCurrentPage(t){this.page=t}set currentMaxPage(t){this.max_page=Math.ceil(t/this.perPage)}ngOnInit(){this.articleService.getCountArticles().subscribe(t=>this.max_page=Math.ceil(t/this.perPage))}next(){this.page=this.page<this.max_page?this.page+1:1,this.currentPage.emit(this.page)}previous(){this.page=this.page>1?this.page-1:this.max_page,this.currentPage.emit(this.page)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ky))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-paginate"]],inputs:{inputCurrentPage:"inputCurrentPage",currentMaxPage:"currentMaxPage"},outputs:{currentPage:"currentPage"},decls:12,vars:0,consts:[[1,"flex","items-center","justify-center","px-4","py-2"],["aria-label","Pagination",1,"relative","z-0","inline-flex","rounded-md","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-primary-100","bg-white","text-sm","font-medium","text-primary-800","hover:bg-primary-50",3,"click"],[1,"sr-only"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"h-5","w-5"],["fill-rule","evenodd","d","M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule","evenodd"],[1,"outline-none","relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-primary-100","bg-white","text-sm","font-medium","text-primary-800","hover:bg-primary-50",3,"click"],["fill-rule","evenodd","d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule","evenodd"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"nav",1),u.TgZ(2,"button",2),u.NdJ("click",function(){return r.previous()}),u.TgZ(3,"span",3),u._uU(4,"Previous"),u.qZA(),u.O4$(),u.TgZ(5,"svg",4),u._UZ(6,"path",5),u.qZA(),u.qZA(),u.kcU(),u.TgZ(7,"button",6),u.NdJ("click",function(){return r.next()}),u.TgZ(8,"span",3),u._uU(9,"Next"),u.qZA(),u.O4$(),u.TgZ(10,"svg",4),u._UZ(11,"path",7),u.qZA(),u.qZA(),u.qZA(),u.qZA())},encapsulation:2}),n})(),_4=(()=>{class n{constructor(){this.currentArticlePage=1,this.articles=[]}setCurrentArticlePage(t){this.currentArticlePage=t}onSearchArticles(t){this.articles=t,this.currentCountArticles=t.length}onUpdateCurrentPage(t){this.currentArticlePage=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-articles-page"]],decls:5,vars:4,consts:[[1,"bg-primary-50","min-w-full","min-h-screen"],[1,"flex","flex-col","items-center","justify-center","min-h-screen"],[3,"articles","updateCurrentPage"],[1,"mb-4",3,"inputCurrentPage","inputArticles"],[3,"inputCurrentPage","currentMaxPage","currentPage"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"app-search-articles",2),u.NdJ("articles",function(a){return r.onSearchArticles(a)})("updateCurrentPage",function(a){return r.onUpdateCurrentPage(a)}),u.qZA(),u._UZ(3,"app-articles",3),u.TgZ(4,"app-paginate",4),u.NdJ("currentPage",function(a){return r.setCurrentArticlePage(a)}),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(3),u.Q6J("inputCurrentPage",r.currentArticlePage)("inputArticles",r.articles),u.xp6(1),u.Q6J("inputCurrentPage",r.currentArticlePage)("currentMaxPage",r.currentCountArticles))},directives:[u4,g4,m4],encapsulation:2}),n})();class rL{}class iL{}class md{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(c):this.headers.set(a,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof md?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new md;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof md?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let c=this.headers.get(t);if(!c)return;c=c.filter(f=>-1===a.indexOf(f)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class y4{encodeKey(e){return sL(e)}encodeValue(e){return sL(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const w4=/%(\d[a-f0-9])/gi,E4={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function sL(n){return encodeURIComponent(n).replace(w4,(e,t)=>{var r;return null!==(r=E4[t])&&void 0!==r?r:e})}function oL(n){return`${n}`}class mf{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new y4,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function v4(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[c,f]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],_=t.get(c)||[];_.push(f),t.set(c,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new mf({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(oL(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(oL(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class b4{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function aL(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function lL(n){return"undefined"!=typeof Blob&&n instanceof Blob}function uL(n){return"undefined"!=typeof FormData&&n instanceof FormData}class rb{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function C4(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new md),this.context||(this.context=new b4),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+c}}else this.params=new mf,this.urlWithParams=t}serializeBody(){return null===this.body?null:aL(this.body)||lL(this.body)||uL(this.body)||function I4(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof mf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||uL(this.body)?null:lL(this.body)?this.body.type||null:aL(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof mf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,a=e.responseType||this.responseType,c=void 0!==e.body?e.body:this.body,f=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,_=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let E=e.headers||this.headers,T=e.params||this.params;const S=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(E=Object.keys(e.setHeaders).reduce((N,O)=>N.set(O,e.setHeaders[O]),E)),e.setParams&&(T=Object.keys(e.setParams).reduce((N,O)=>N.set(O,e.setParams[O]),T)),new rb(r,i,c,{params:T,headers:E,context:S,reportProgress:_,responseType:a,withCredentials:f})}}var Kr=(()=>((Kr=Kr||{})[Kr.Sent=0]="Sent",Kr[Kr.UploadProgress=1]="UploadProgress",Kr[Kr.ResponseHeader=2]="ResponseHeader",Kr[Kr.DownloadProgress=3]="DownloadProgress",Kr[Kr.Response=4]="Response",Kr[Kr.User=5]="User",Kr))();class yR{constructor(e,t=200,r="OK"){this.headers=e.headers||new md,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class vR extends yR{constructor(e={}){super(e),this.type=Kr.ResponseHeader}clone(e={}){return new vR({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class kD extends yR{constructor(e={}){super(e),this.type=Kr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new kD({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class cL extends yR{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function wR(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let dL=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof rb)a=t;else{let _,E;_=i.headers instanceof md?i.headers:new md(i.headers),i.params&&(E=i.params instanceof mf?i.params:new mf({fromObject:i.params})),a=new rb(t,r,void 0!==i.body?i.body:null,{headers:_,context:i.context,params:E,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=tt(a).pipe(yl(_=>this.handler.handle(_)));if(t instanceof rb||"events"===i.observe)return c;const f=c.pipe(kr(_=>_ instanceof kD));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return f.pipe((0,nt.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return f.pipe((0,nt.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return f.pipe((0,nt.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return f.pipe((0,nt.U)(_=>_.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new mf).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,wR(i,r))}post(t,r,i={}){return this.request("POST",t,wR(i,r))}put(t,r,i={}){return this.request("PUT",t,wR(i,r))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(rL))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class hL{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const fL=new u.OlP("HTTP_INTERCEPTORS");let T4=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const D4=/^\)\]\}',?\n/;let pL=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new er.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((O,j)=>i.setRequestHeader(O,j.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const O=t.detectContentTypeHeader();null!==O&&i.setRequestHeader("Content-Type",O)}if(t.responseType){const O=t.responseType.toLowerCase();i.responseType="json"!==O?O:"text"}const a=t.serializeBody();let c=null;const f=()=>{if(null!==c)return c;const O=1223===i.status?204:i.status,j=i.statusText||"OK",ie=new md(i.getAllResponseHeaders()),_e=function A4(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return c=new vR({headers:ie,status:O,statusText:j,url:_e}),c},_=()=>{let{headers:O,status:j,statusText:ie,url:_e}=f(),Be=null;204!==j&&(Be=void 0===i.response?i.responseText:i.response),0===j&&(j=Be?200:0);let lt=j>=200&&j<300;if("json"===t.responseType&&"string"==typeof Be){const Xe=Be;Be=Be.replace(D4,"");try{Be=""!==Be?JSON.parse(Be):null}catch(Qe){Be=Xe,lt&&(lt=!1,Be={error:Qe,text:Be})}}lt?(r.next(new kD({body:Be,headers:O,status:j,statusText:ie,url:_e||void 0})),r.complete()):r.error(new cL({error:Be,headers:O,status:j,statusText:ie,url:_e||void 0}))},E=O=>{const{url:j}=f(),ie=new cL({error:O,status:i.status||0,statusText:i.statusText||"Unknown Error",url:j||void 0});r.error(ie)};let T=!1;const S=O=>{T||(r.next(f()),T=!0);let j={type:Kr.DownloadProgress,loaded:O.loaded};O.lengthComputable&&(j.total=O.total),"text"===t.responseType&&!!i.responseText&&(j.partialText=i.responseText),r.next(j)},N=O=>{let j={type:Kr.UploadProgress,loaded:O.loaded};O.lengthComputable&&(j.total=O.total),r.next(j)};return i.addEventListener("load",_),i.addEventListener("error",E),i.addEventListener("timeout",E),i.addEventListener("abort",E),t.reportProgress&&(i.addEventListener("progress",S),null!==a&&i.upload&&i.upload.addEventListener("progress",N)),i.send(a),r.next({type:Kr.Sent}),()=>{i.removeEventListener("error",E),i.removeEventListener("abort",E),i.removeEventListener("load",_),i.removeEventListener("timeout",E),t.reportProgress&&(i.removeEventListener("progress",S),null!==a&&i.upload&&i.upload.removeEventListener("progress",N)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(zl))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const ER=new u.OlP("XSRF_COOKIE_NAME"),bR=new u.OlP("XSRF_HEADER_NAME");class gL{}let S4=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Dt(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(he),u.LFG(u.Lbi),u.LFG(ER))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),CR=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(gL),u.LFG(bR))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),x4=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(fL,[]);this.chain=r.reduceRight((i,a)=>new hL(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(iL),u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),k4=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:CR,useClass:T4}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:ER,useValue:t.cookieName}:[],t.headerName?{provide:bR,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[CR,{provide:fL,useExisting:CR,multi:!0},{provide:gL,useClass:S4},{provide:ER,useValue:"XSRF-TOKEN"},{provide:bR,useValue:"X-XSRF-TOKEN"}]}),n})(),R4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[dL,{provide:rL,useClass:x4},pL,{provide:iL,useExisting:pL}],imports:[[k4.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),mL=(()=>{class n{constructor(t){this.httpCLient=t,this.aliasMailThis="https://mailthis.to/lchop"}postMessageContact(t){return this.httpCLient.post(this.aliasMailThis,t,{responseType:"text"}).pipe((0,nt.U)(r=>r,r=>r))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(dL))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function M4(n,e){1&n&&(u.TgZ(0,"label",38),u._uU(1," Nom *"),u.qZA())}function N4(n,e){1&n&&(u.TgZ(0,"label",39),u._uU(1," Nom *"),u.qZA())}function P4(n,e){1&n&&(u.TgZ(0,"label",40),u._uU(1," Mail *"),u.qZA())}function O4(n,e){1&n&&(u.TgZ(0,"label",41),u._uU(1," Mail *"),u.qZA())}function F4(n,e){1&n&&(u.TgZ(0,"label",42),u._uU(1," Entreprise *"),u.qZA())}function L4(n,e){1&n&&(u.TgZ(0,"label",43),u._uU(1," Entreprise *"),u.qZA())}function U4(n,e){1&n&&(u.TgZ(0,"label",44),u._uU(1," Message *"),u.qZA())}function V4(n,e){1&n&&(u.TgZ(0,"label",45),u._uU(1," Message *"),u.qZA())}function B4(n,e){if(1&n&&(u.TgZ(0,"button",46),u.TgZ(1,"span",47),u._uU(2," Envoyez"),u.qZA(),u.TgZ(3,"span",48),u.O4$(),u.TgZ(4,"svg",49),u._UZ(5,"rect",5),u._UZ(6,"path",50),u._UZ(7,"path",51),u._UZ(8,"path",52),u._UZ(9,"line",53),u._UZ(10,"path",54),u.qZA(),u.qZA(),u.qZA()),2&n){const t=u.oxw(),r=u.MAs(13);u.Q6J("disabled",r.invalid||t.waitResponse||t.isDisabled)}}function j4(n,e){1&n&&(u.TgZ(0,"div",55),u.O4$(),u.TgZ(1,"svg",56),u._UZ(2,"path",57),u._UZ(3,"path",58),u.qZA(),u.qZA())}function Z4(n,e){1&n&&(u.TgZ(0,"div",59),u._uU(1," * Veuillez compl\xe8ter votre nom "),u.qZA())}function H4(n,e){1&n&&(u.TgZ(0,"div",59),u._uU(1," * Veuillez utiliser un email valide "),u.qZA())}function $4(n,e){1&n&&(u.TgZ(0,"div",59),u._uU(1," * Veuillez compl\xe8ter votre message "),u.qZA())}function q4(n,e){1&n&&(u.TgZ(0,"div",59),u._uU(1," * Veuillez compl\xe8ter votre entreprise "),u.qZA())}let G4=(()=>{class n{constructor(t){this.contact=t,this.company="",this.email="",this.name="",this.message="",this.waitResponse=!1,this.isDisabled=!0,this.correctMail=!0,this.correctName=!0,this.correctCompany=!0,this.correctMessage=!0}ngOnInit(){}onKeyUp(t){this.checkInput(t)}checkInput(t){switch(t){case"name":this.correctName=!!/^[a-zA-Z_ -]{2,}$/.test(this.name);break;case"email":this.correctMail=!!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email);break;case"company":this.correctCompany=!!/^[\w_ -]{2,}$/.test(this.company);break;case"message":this.correctMessage=this.message.length>=2}return this.correctMessage&&this.correctCompany&&this.correctName&&this.correctMail?(this.isDisabled=!1,!0):(this.isDisabled=!0,!1)}onSubmit(t){this.checkInput("email")&&this.checkInput("name")&&this.checkInput("company")&&this.checkInput("message")&&(this.waitResponse=!0,this.contact.postMessageContact(t.value).subscribe(r=>{location.href="https://mailthis.to/confirm",this.waitResponse=!1},r=>{console.log({error:r})}))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(mL))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-contact-page"]],decls:48,vars:18,consts:[[1,"container","min-h-screen","max-w-full","bg-primary-50"],[1,"flex","items-center","justify-center","min-h-screen"],[1,"bg-primary-50","border-dashed","border-primary-700","border-2","rounded-xl","py-8","px-12","shadow-xl","md:m-4","m-6"],[1,"md:text-3xl","mb-6","text-xl","font-bold","leading-snug","text-center","text-primary-700","inline-flex","justify-center","items-center"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","#911011","viewBox","0 0 256 256",1,"ml-8"],["width","256","height","256","fill","none"],["points","224 96 145.5 152 110.5 152 32 96 128 32 224 96","opacity","0.2"],["d","M32,96V200a8,8,0,0,0,8,8H216a8,8,0,0,0,8-8V96L128,32Z","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","110.5","y1","152","x2","34.5","y2","205.7","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","221.5","y1","205.7","x2","145.5","y2","152","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["points","224 96 145.5 152 110.5 152 32 96","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[3,"ngSubmit"],["formContact","ngForm"],[1,"md:flex","items-center"],[1,"md:w-72","flex","flex-col"],["for","name","class","text-base font-semibold leading-none text-primary-800",4,"ngIf","ngIfElse"],["wrongName",""],["name","name","id","name","type","text","maxlength","25","minlength","2","placeholder","Compl\xe9ter votre nom","arial-label","name","required","",1,"focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","mt-4","bg-white","rounded","placeholder-primary-100",3,"ngModel","keyup","ngModelChange"],["prmName","ngModel"],[1,"md:w-72","flex","flex-col","md:ml-6","md:mt-0","mt-4"],["for","mail","class","text-base font-semibold leading-none text-primary-800",4,"ngIf","ngIfElse"],["wrongMail",""],["name","email","id","email","type","email","minlength","5","maxlength","100","placeholder","Compl\xe9ter votre email","arial-label","email","required","","email","",1,"focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","mt-4","bg-white","rounded","placeholder-primary-100",3,"ngModel","keyup","ngModelChange"],["prmEmail","ngModel"],[1,"md:flex","items-center","mt-8"],["for","company","class","text-base font-semibold leading-none text-primary-800",4,"ngIf","ngIfElse"],["wrongCompany",""],["name","company","id","company","type","text","minlength","2","maxlength","100","placeholder","Nom de votre entreprise","arial-label","company","required","",1,"focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","mt-4","bg-white","rounded","placeholder-primary-100",3,"ngModel","keyup","ngModelChange"],["prmCompany","ngModel"],[1,"w-full","flex","flex-col","mt-8"],["for","prmMessage","class","text-base font-semibold leading-none text-primary-800",4,"ngIf","ngIfElse"],["wrongMessage",""],["name","message","required","","id","message","type","text","minlength","2","maxlength","500","placeholder","Entrer votre message","aria-label","Message",1,"outline-none","h-36","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","mt-4","rounded","focus:ring-2","focus:ring-primary-700","border-primary-200","placeholder-primary-100","resize-none","bg-white",3,"ngModel","keyup","ngModelChange"],["prmMessage","ngModel"],[1,"flex","items-center","justify-center","w-full","mt-12"],["type","submit","class","relative py-4 px-6 disabled:bg-primary-100 disabled:hover:bg-primary-100 bg-secondary-600 hover:bg-secondary-500 rounded-lg leading-none flex items-center text divide-x divide-secondary-50",3,"disabled",4,"ngIf"],["class","mr-4",4,"ngIf"],["class","text-base font-thin text-primary-800 leading-none mt-8",4,"ngIf"],["for","name",1,"text-base","font-semibold","leading-none","text-primary-800"],["for","name",1,"text-base","leading-none","text-red-500","font-extrabold","italic"],["for","mail",1,"text-base","font-semibold","leading-none","text-primary-800"],["for","mail",1,"text-base","leading-none","text-red-500","font-extrabold"],["for","company",1,"text-base","font-semibold","leading-none","text-primary-800"],["for","company",1,"text-base","leading-none","text-red-500","font-extrabold","italic"],["for","prmMessage",1,"text-base","font-semibold","leading-none","text-primary-800"],["for","message",1,"text-base","leading-none","text-red-500","font-extrabold","italic"],["type","submit",1,"relative","py-4","px-6","disabled:bg-primary-100","disabled:hover:bg-primary-100","bg-secondary-600","hover:bg-secondary-500","rounded-lg","leading-none","flex","items-center","text","divide-x","divide-secondary-50",3,"disabled"],[1,"text-secondary-50","pr-6","font-sans","transition","duration-200"],[1,"flex","items-center","space-x-5","pl-6"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","#fafafa","viewBox","0 0 256 256"],["d","M88,134.9,224.1,36.6h0a7.8,7.8,0,0,0-6.2-.2L33.3,108.9c-7.4,2.9-6.4,13.7,1.4,15.3Z","opacity","0.2"],["d","M132.9,174.4l-31.2,31.2A8,8,0,0,1,88,200V134.9Z","opacity","0.2"],["d","M88,134.9,177.9,214a8,8,0,0,0,13.1-4.2L228.6,45.6a8,8,0,0,0-10.7-9.2L33.3,108.9c-7.4,2.9-6.4,13.7,1.4,15.3Z","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","88","y1","134.9","x2","224.1","y2","36.6","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M132.9,174.4l-31.2,31.2A8,8,0,0,1,88,200V134.9","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"mr-4"],["role","status","viewBox","0 0 100 101","fill","none","xmlns","http://www.w3.org/2000/svg",1,"w-8","h-8","mr-2","text-primary-100","animate-spin","fill-primary-800"],["d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z","fill","currentColor"],["d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z","fill","currentFill"],[1,"text-base","font-thin","text-primary-800","leading-none","mt-8"]],template:function(t,r){if(1&t){const i=u.EpF();u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"p",3),u._uU(4," Envie de travailler avec nous "),u.O4$(),u.TgZ(5,"svg",4),u._UZ(6,"rect",5),u._UZ(7,"polygon",6),u._UZ(8,"path",7),u._UZ(9,"line",8),u._UZ(10,"line",9),u._UZ(11,"polyline",10),u.qZA(),u.qZA(),u.kcU(),u.TgZ(12,"form",11,12),u.NdJ("ngSubmit",function(){u.CHM(i);const c=u.MAs(13);return r.onSubmit(c)}),u.TgZ(14,"div",13),u.TgZ(15,"div",14),u.YNc(16,M4,2,0,"label",15),u.YNc(17,N4,2,0,"ng-template",null,16,u.W1O),u.TgZ(19,"input",17,18),u.NdJ("keyup",function(){return r.onKeyUp("name")})("ngModelChange",function(c){return r.name=c}),u.qZA(),u.qZA(),u.TgZ(21,"div",19),u.YNc(22,P4,2,0,"label",20),u.YNc(23,O4,2,0,"ng-template",null,21,u.W1O),u.TgZ(25,"input",22,23),u.NdJ("keyup",function(){return r.onKeyUp("email")})("ngModelChange",function(c){return r.email=c}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(27,"div",24),u.TgZ(28,"div",14),u.YNc(29,F4,2,0,"label",25),u.YNc(30,L4,2,0,"ng-template",null,26,u.W1O),u.TgZ(32,"input",27,28),u.NdJ("keyup",function(){return r.onKeyUp("company")})("ngModelChange",function(c){return r.company=c}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(34,"div"),u.TgZ(35,"div",29),u.YNc(36,U4,2,0,"label",30),u.YNc(37,V4,2,0,"ng-template",null,31,u.W1O),u.TgZ(39,"textarea",32,33),u.NdJ("keyup",function(){return r.onKeyUp("message")})("ngModelChange",function(c){return r.message=c}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(41,"div",34),u.YNc(42,B4,11,1,"button",35),u.YNc(43,j4,4,0,"div",36),u.qZA(),u.YNc(44,Z4,2,0,"div",37),u.YNc(45,H4,2,0,"div",37),u.YNc(46,$4,2,0,"div",37),u.YNc(47,q4,2,0,"div",37),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&t){const i=u.MAs(18),a=u.MAs(20),c=u.MAs(24),f=u.MAs(26),_=u.MAs(31),E=u.MAs(33),T=u.MAs(38),S=u.MAs(40);u.xp6(16),u.Q6J("ngIf",r.correctName)("ngIfElse",i),u.xp6(3),u.Q6J("ngModel",r.name),u.xp6(3),u.Q6J("ngIf",r.correctMail)("ngIfElse",c),u.xp6(3),u.Q6J("ngModel",r.email),u.xp6(4),u.Q6J("ngIf",r.correctCompany)("ngIfElse",_),u.xp6(3),u.Q6J("ngModel",r.company),u.xp6(4),u.Q6J("ngIf",r.correctMessage)("ngIfElse",T),u.xp6(3),u.Q6J("ngModel",r.message),u.xp6(3),u.Q6J("ngIf",!r.waitResponse),u.xp6(1),u.Q6J("ngIf",r.waitResponse),u.xp6(1),u.Q6J("ngIf",(null==a.errors?null:a.errors.minlength)&&a.touched),u.xp6(1),u.Q6J("ngIf",(null==f.errors?null:f.errors.email)&&f.touched),u.xp6(1),u.Q6J("ngIf",(null==S.errors?null:S.errors.minlength)&&S.touched),u.xp6(1),u.Q6J("ngIf",(null==E.errors?null:E.errors.minlength)&&E.touched)}},directives:[QE,qE,Kg,Ln,Ry,bD,sR,JE,hD,YE,iR],encapsulation:2}),n})();function W4(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",12),u.TgZ(1,"div",13),u._UZ(2,"input",14),u.TgZ(3,"header",15),u.TgZ(4,"span",16),u._uU(5),u.qZA(),u.TgZ(6,"div",17),u.O4$(),u.TgZ(7,"svg",18),u._UZ(8,"polyline",19),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(9,"div",20),u.TgZ(10,"div",21),u.TgZ(11,"p"),u._uU(12),u.qZA(),u.TgZ(13,"button",22),u.NdJ("click",function(){const a=u.CHM(t).$implicit;return u.oxw().onDeleteArticleClick(a)}),u._uU(14," Supprimer "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=e.$implicit;u.xp6(5),u.hij(" ",t.title," "),u.xp6(7),u.Oqu(t.description)}}let z4=(()=>{class n{constructor(t){this.articleService=t,this.articles$=this.articleService.getArticles()}ngOnInit(){}onDeleteArticleClick(t){this.articleService.deleteArticle(t),this.articles$=this.articleService.getArticles()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ky))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-delete-article"]],decls:15,vars:3,consts:[[1,"container","max-w-full","max-h-full","bg-primary-300"],[1,"bg-primary-50","py-8","px-4","flex","flex-col","min-w-screen","min-h-screen","items-center","justify-center"],[1,"container","max-w-xl","place-content-center"],[1,"text-primary-700","text-2xl","font-bold","mb-8"],[1,"shadow","row"],[1,"tabs"],["class","border-b tab",4,"ngFor","ngForOf"],["routerLink","/login",1,"underline","text-primary-500","hover:text-primary-600","inline-flex","items-center","justify-center","mt-4"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","fill","#ba2525","viewBox","0 0 256 256",1,"mr-1"],["width","256","height","256","fill","none"],["x1","216","y1","128","x2","40","y2","128","fill","none","stroke","#ba2525","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["points","112 56 40 128 112 200","fill","none","stroke","#ba2525","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"border-b","tab"],[1,"border-l-2","border-transparent","relative"],["type","checkbox","id","chck1",1,"w-full","absolute","z-10","cursor-pointer","opacity-0","h-5","top-6"],["for","chck1",1,"flex","justify-between","items-center","p-5","pl-8","pr-8","cursor-pointer","select-none","tab-label"],[1,"text-neutral-800","font-thin","text-xl"],[1,"rounded-full","border","border-neutral-300","w-7","h-7","flex","items-center","justify-center","test"],["aria-hidden","true","data-reactid","266","fill","none","height","24","stroke","#606F7B","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewbox","0 0 24 24","width","24","xmlns","http://www.w3.org/2000/svg",1,""],["points","6 9 12 15 18 9"],[1,"tab-content"],[1,"flex","justify-between","items-center","pl-8","pr-8","pb-5","text-neutral-800"],[1,"bg-primary-500","hover:bg-primary-600","text-white","font-thin","py-2","px-4","rounded-xl","ml-4",3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"h1",3),u._uU(4," Veuillez selectionner l'article \xe0 supprimer. "),u.qZA(),u.TgZ(5,"section",4),u.TgZ(6,"div",5),u.YNc(7,W4,15,2,"div",6),u.ALo(8,"async"),u.qZA(),u.qZA(),u.TgZ(9,"a",7),u.O4$(),u.TgZ(10,"svg",8),u._UZ(11,"rect",9),u._UZ(12,"line",10),u._UZ(13,"polyline",11),u.qZA(),u._uU(14," Back "),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(7),u.Q6J("ngForOf",u.lcZ(8,1,r.articles$)))},directives:[Dr,ho],pipes:[Ca],styles:[".tab[_ngcontent-%COMP%]{overflow:hidden}.tab-content[_ngcontent-%COMP%]{max-height:0;transition:all .5s}input[_ngcontent-%COMP%]:checked + .tab-label[_ngcontent-%COMP%]   .test[_ngcontent-%COMP%]{background-color:#000}input[_ngcontent-%COMP%]:checked + .tab-label[_ngcontent-%COMP%]   .test[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:rotate(180deg);stroke:#fff}input[_ngcontent-%COMP%]:checked + .tab-label[_ngcontent-%COMP%]:after{transform:rotate(90deg)}input[_ngcontent-%COMP%]:checked ~ .tab-content[_ngcontent-%COMP%]{max-height:100vh}"]}),n})();function K4(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",5),u.TgZ(1,"p",6),u._uU(2," Login "),u.O4$(),u.TgZ(3,"svg",7),u._UZ(4,"rect",8),u._UZ(5,"polyline",9),u._UZ(6,"line",10),u._UZ(7,"path",11),u.qZA(),u.qZA(),u.kcU(),u.TgZ(8,"form",12,13),u.NdJ("ngSubmit",function(){u.CHM(t);const i=u.MAs(9);return u.oxw().onSubmit(i)}),u.TgZ(10,"div",14),u.TgZ(11,"label",15),u._uU(12," Username "),u.qZA(),u.TgZ(13,"input",16),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().username=i}),u.qZA(),u.qZA(),u.TgZ(14,"div",17),u.TgZ(15,"label",18),u._uU(16," Password "),u.qZA(),u.TgZ(17,"input",19),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().password=i}),u.qZA(),u.qZA(),u.TgZ(18,"div",20),u.TgZ(19,"button",21),u._uU(20," Log In "),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=u.MAs(9),r=u.oxw();u.xp6(13),u.Q6J("ngModel",r.username),u.xp6(4),u.Q6J("ngModel",r.password),u.xp6(2),u.Q6J("disabled",t.invalid)}}function Y4(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",22),u.TgZ(1,"p",6),u._uU(2),u.ALo(3,"async"),u.O4$(),u.TgZ(4,"svg",7),u._UZ(5,"rect",8),u._UZ(6,"circle",23),u._UZ(7,"circle",24),u._UZ(8,"path",25),u.qZA(),u.qZA(),u.kcU(),u.TgZ(9,"div",26),u.TgZ(10,"button",27),u.TgZ(11,"span",28),u._uU(12," Ajouter un article"),u.qZA(),u.TgZ(13,"span",29),u.O4$(),u.TgZ(14,"svg",30),u._UZ(15,"rect",8),u._UZ(16,"polygon",31),u._UZ(17,"path",32),u._UZ(18,"polyline",33),u._UZ(19,"line",34),u._UZ(20,"line",35),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(21,"button",36),u.TgZ(22,"span",28),u._uU(23," Supprimer un article"),u.qZA(),u.TgZ(24,"span",29),u.O4$(),u.TgZ(25,"svg",30),u._UZ(26,"rect",8),u._UZ(27,"path",37),u._UZ(28,"line",38),u._UZ(29,"line",39),u._UZ(30,"line",40),u._UZ(31,"path",41),u._UZ(32,"path",42),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(33,"a",43),u.NdJ("click",function(){return u.CHM(t),u.oxw().onLogout()}),u.TgZ(34,"p",44),u._uU(35," Log Out "),u.qZA(),u.qZA()}if(2&n){const t=u.oxw();let r;u.xp6(2),u.hij(" ",null==(r=u.lcZ(3,1,t.user$))?null:r.email.split("@")[0]," ")}}let Q4=(()=>{class n{constructor(t){this.auth=t,this.username="",this.password="",this.loginSucess$=this.auth.isLogIn$,this.user$=this.auth.user$}onSubmit(t){this.auth.signIn(t.value.username,t.value.password),this.username="",this.password=""}onLogout(){this.auth.signOut()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(xy))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-login-page"]],decls:7,vars:4,consts:[[1,"container","max-w-full","max-h-full","bg-primary-50"],[1,"bg-primary-50","flex","flex-col","min-w-screen","min-h-screen","items-center","justify-center"],[1,"flex","flex-col","items-center","justify-center","px-4"],["class","bg-primary-50 border-dashed border-primary-700 border-2 rounded-xl py-12 lg:px-28 px-20 shadow-xl",4,"ngIf","ngIfElse"],["logIn",""],[1,"bg-primary-50","border-dashed","border-primary-700","border-2","rounded-xl","py-12","lg:px-28","px-20","shadow-xl"],[1,"md:text-3xl","text-xl","font-bold","leading-7","text-center","text-primary-700","inline-flex","justify-center","items-center"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","#911011","viewBox","0 0 256 256",1,"ml-8"],["width","256","height","256","fill","none"],["points","94 170 136 128 94 86","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","24","y1","128","x2","136","y2","128","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M136,40h56a8,8,0,0,1,8,8V208a8,8,0,0,1-8,8H136","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[3,"ngSubmit"],["formSearch","ngForm"],[1,"mb-8","mt-12"],["for","username",1,"w-24","text-primary-700","text-sm","font-bold","mb-4"],["name","username","id","username","type","text","placeholder","Username","aria-label","Username",1,"w-full","focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","bg-white","rounded","placeholder-primary-100",3,"ngModel","ngModelChange"],[1,"mb-4"],["for","password",1,"text-primary-700","text-sm","font-bold","mb-2"],["name","password","id","password","type","password","placeholder","******************","aria-label","Password",1,"w-full","focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","bg-white","rounded","placeholder-primary-100",3,"ngModel","ngModelChange"],[1,"flex","items-center","justify-center","mt-8"],["type","submit",1,"bg-primary-500","hover:bg-primary-600","text-white","font-thin","py-2","px-4","rounded-xl",3,"disabled"],[1,"bg-primary-50","border-dashed","border-primary-700","border-2","rounded-xl","py-12","lg:px-28","px-8","shadow-xl"],["cx","128","cy","96","r","64","opacity","0.2"],["cx","128","cy","96","r","64","fill","none","stroke","#911011","stroke-miterlimit","10","stroke-width","16"],["d","M31,216a112,112,0,0,1,194,0","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"md:flex","block","items-center","justify-between","mt-12"],["routerLink","/add-article",1,"w-52","md:mb-0","mb-4","mr-8","relative","py-4","px-6","bg-secondary-600","hover:bg-secondary-500","rounded-lg","leading-none","flex","items-center","text","divide-x","divide-secondary-50"],[1,"text-secondary-50","pr-6","font-sans","transition","duration-200"],[1,"flex","items-center","space-x-5","pl-6"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","#fafafa","viewBox","0 0 256 256"],["points","152 32 152 88 208 88 152 32","opacity","0.2"],["d","M200,224H56a8,8,0,0,1-8-8V40a8,8,0,0,1,8-8h96l56,56V216A8,8,0,0,1,200,224Z","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["points","152 32 152 88 208 88","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","104","y1","152","x2","152","y2","152","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","128","y1","128","x2","128","y2","176","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["routerLink","/delete-article",1,"w-52","relative","py-4","px-6","bg-secondary-600","hover:bg-secondary-500","rounded-lg","leading-none","flex","items-center","text","divide-x","divide-secondary-50"],["d","M200,56V208a8,8,0,0,1-8,8H64a8,8,0,0,1-8-8V56Z","opacity","0.2"],["x1","216","y1","56","x2","40","y2","56","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","104","y1","104","x2","104","y2","168","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","152","y1","104","x2","152","y2","168","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M200,56V208a8,8,0,0,1-8,8H64a8,8,0,0,1-8-8V56","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M168,56V40a16,16,0,0,0-16-16H104A16,16,0,0,0,88,40V56","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"text-primary-500","hover:text-primary-400","font-thin","underline","cursor-pointer",3,"click"],[1,"text-center","mt-4"]],template:function(t,r){if(1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.YNc(3,K4,21,3,"div",3),u.ALo(4,"async"),u.YNc(5,Y4,36,3,"ng-template",null,4,u.W1O),u.qZA(),u.qZA(),u.qZA()),2&t){const i=u.MAs(6);u.xp6(3),u.Q6J("ngIf",!u.lcZ(4,2,r.loginSucess$))("ngIfElse",i)}},directives:[Ln,QE,qE,Kg,Ry,hD,YE,Sl],pipes:[Ca],encapsulation:2}),n})();class J4{}let _L=(()=>{class n{constructor(t){this.articleService=t,this.lastArticle=new J4,this.slides=[{src:"/assets/images/greenMag.jpeg"},{src:"/assets/images/guyaMag.png"},{src:"/assets/images/Elle.png"},{src:"/assets/images/ewag.webp"},{src:"/assets/images/resto-avenue.png"},{src:"/assets/images/shopping-fr.png"}]}ngOnInit(){this.articleService.getLastArticle().subscribe(t=>{this.lastArticle=t})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ky))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-main-page"]],decls:105,vars:0,consts:[[1,"container","min-w-full"],[1,"md:inline-flex","block","min-w-full","min-h-screen","bg-primary-50"],[1,"bg-primary-50","md:w-3/5","w-full","md:px-12","px-6"],[1,"flex","flex-col","justify-between","items-start","md:py-12"],[1,"text-7xl","font-title","font-extrabold","text-primary-700","leading-snug","md:mt-0","mt-12"],["routerLink","/sachem"],[1,"flex","justify-start","md:justify-center","md:items-baseline","items-center"],[1,"w-2/3","md:w-max","mr-6","md:text-center","text-4xl","font-sans","font-semibold","text-primary-400","leading-snug"],[1,"flex","items-center","md:items-baseline","justify-center","md:my-2","my-8"],[1,"block","mr-2"],[1,"w-2/3","md:w-max","bg-gradient-to-r","from-primary-50","to-primary-100","inline","decoration-clone","text-2xl","text-left","font-sans","font-semibold","text-primary-400","leading-snug","pr-4"],["xmlns","http://www.w3.org/2000/svg","width","52","height","52","fill","#911011","viewBox","0 0 256 256",1,"w-1/3","md:w-max","animate-tilt"],["d","M120,56,60.3,78.4a8.1,8.1,0,0,0-5.1,6.2L32,224l139.5-23.2a7.9,7.9,0,0,0,6.1-5.1L200,136Zm-4,104a20,20,0,1,1,20-20A20.1,20.1,0,0,1,116,160Z","opacity","0.2"],["cx","116","cy","140","r","20","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","32","y1","224","x2","101.9","y2","154.1","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M32,224l139.5-23.2a7.9,7.9,0,0,0,6.1-5.1L200,136,120,56,60.3,78.4a8.1,8.1,0,0,0-5.1,6.2Z","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M200,136l26.3-26.3a8,8,0,0,0,0-11.4L157.7,29.7a8,8,0,0,0-11.4,0L120,56","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"md:w-164","text-2xl","text-left","font-sans","font-light","text-primary-300","leading-snug"],["target","_blank","href","https://fr.wikipedia.org/wiki/Torreilles",1,"text-secondary-600","font-sans","font-medium"],[1,"flex","items-center","justify-center"],["routerLink","/contact",1,"transition","ease-in-out","delay-150","hover:scale-105","hover:-translate-y-1","my-16","py-6","md:px-8","px-4","bg-secondary-600","hover:bg-secondary-500","rounded-lg","leading-none","flex","items-center","text","divide-x","divide-secondary-50","text-xl","shadow-md"],[1,"text-secondary-50","pr-6","font-sans","transition","duration-200"],[1,"flex","items-center","space-x-5","pl-6"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","#fafafa","viewBox","0 0 256 256"],["d","M192,120,136,64l26.3-26.3a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4Z","opacity","0.2"],["d","M96,216H48a8,8,0,0,1-8-8V163.3a7.9,7.9,0,0,1,2.3-5.6l120-120a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4Z","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","136","y1","64","x2","192","y2","120","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["points","216 216 96 216 40.5 160.5","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","164","y1","92","x2","68","y2","188","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"block","mb-4","md:mb-0"],[1,"inline-flex"],["href","https://www.facebook.com/Sachem.pro/?pnref=lhc","target","_blank",1,"mr-6"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","#911011","viewBox","0 0 256 256"],["cx","128","cy","128","r","96","opacity","0.2"],["cx","128","cy","128","r","96","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M168,88H152a23.9,23.9,0,0,0-24,24V224","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","96","y1","144","x2","160","y2","144","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["href","https://www.linkedin.com/in/sandrine-chopot-90831b162/","target","_blank",1,"mr-6"],["x","36","y","36","width","184","height","184","rx","8","opacity","0.2"],["x","36","y","36","width","184","height","184","rx","8","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","120","y1","112","x2","120","y2","176","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","88","y1","112","x2","88","y2","176","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M120,140a28,28,0,0,1,56,0v36","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["cx","88","cy","80","r","12"],[1,"bg-primary-700","md:w-2/5","w-full","border-t-4","md:border-t-0","md:border-l-4","border-secondary-50","px-6","md:px-12","pb-12"],[1,"flex","flex-col","items-center","justify-center","mt-12"],["src","assets/images/portrait.jpeg","alt","greenmag",1,"mt-4","md:mt-0","w-36","rounded-full","shadow-md"],[1,"flex","py-4"],[1,"flex","items-start","justify-start","mr-4"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","fill","#fafafa","viewBox","0 0 256 256"],["d","M108,144H40a8,8,0,0,1-8-8V72a8,8,0,0,1,8-8h60a8,8,0,0,1,8,8Z","opacity","0.2"],["d","M224,144H156a8,8,0,0,1-8-8V72a8,8,0,0,1,8-8h60a8,8,0,0,1,8,8Z","opacity","0.2"],["d","M108,144H40a8,8,0,0,1-8-8V72a8,8,0,0,1,8-8h60a8,8,0,0,1,8,8v88a40,40,0,0,1-40,40","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M224,144H156a8,8,0,0,1-8-8V72a8,8,0,0,1,8-8h60a8,8,0,0,1,8,8v88a40,40,0,0,1-40,40","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"text-left","text-lg","font-sans","font-light","text-primary-100","leading-snug"],[1,"flex","items-end","justify-end","ml-4"],[1,"mr-4","text-2xl","font-sans","font-semibold","text-primary-50","leading-snug"],["href","https://www.linkedin.com/in/sandrine-chopot-90831b162/","target","_blank",1,"inline-flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","width","36","height","36","fill","#fafafa","viewBox","0 0 256 256",1,"mr-2"],["x","36","y","36","width","184","height","184","rx","8","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","120","y1","112","x2","120","y2","176","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","88","y1","112","x2","88","y2","176","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M120,140a28,28,0,0,1,56,0v36","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"text-lg","font-sans","font-light","text-primary-100","leading-snug","text-center"],[1,"mt-12","flex","items-center","justify-center"],["href","/sachem",1,"transition","ease-in-out","delay-150","hover:scale-105","hover:-translate-y-1","inline-flex","justify-center","items-center","border-2","border-primary-50","border-dashed","px-8","py-4","rounded-full","hover:bg-primary-600","hover:border-solid"],[1,"w-64","text-2xl","text-center","font-sans","font-semibold","text-primary-50","leading-snug","md:pr-2"],["xmlns","http://www.w3.org/2000/svg","width","36","height","36","fill","#fafafa","viewBox","0 0 256 256",1,"hidden","md:block"],["cx","128","cy","128","r","96","fill","none","stroke","#fafafa","stroke-miterlimit","10","stroke-width","16"],["points","134.1 161.9 168 128 134.1 94.1","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","88","y1","128","x2","168","y2","128","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["href","/articles",1,"transition","ease-in-out","delay-150","hover:scale-105","hover:-translate-y-1","inline-flex","justify-center","items-center","border-2","border-primary-50","border-dashed","px-8","py-4","rounded-full","hover:bg-primary-600","hover:border-solid"],[1,"w-64","text-2xl","text-center","font-sans","font-semibold","text-primary-50","leading-snug","md:mr-2"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"div",3),u.TgZ(4,"h1",4),u.TgZ(5,"a",5),u._uU(6,"SaCh'M"),u.qZA(),u._UZ(7,"br"),u.qZA(),u.TgZ(8,"div",6),u.TgZ(9,"h2",7),u._uU(10," Agence Conseils et Communication "),u._UZ(11,"br"),u.qZA(),u.qZA(),u.TgZ(12,"div",8),u.TgZ(13,"div",9),u.TgZ(14,"h2",10),u._uU(15," Sp\xe9cialis\xe9e dans la r\xe9daction de contenus "),u._UZ(16,"br"),u.qZA(),u.qZA(),u.O4$(),u.TgZ(17,"svg",11),u._UZ(18,"path",12),u._UZ(19,"circle",13),u._UZ(20,"line",14),u._UZ(21,"path",15),u._UZ(22,"path",16),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(23,"h3",17),u._uU(24," Implant\xe9e \xe0 "),u.TgZ(25,"a",18),u._uU(26,"Torreilles (66) "),u.qZA(),u._uU(27,", forte de plus de 10 ann\xe9es d\u2019exp\xe9rience en m\xe9tropole et dans les territoires d\u2019Outre-Mer, notre agence vous accompagne dans toutes vos d\xe9marches de communication print et web. "),u.qZA(),u.TgZ(28,"div",19),u.TgZ(29,"button",20),u.TgZ(30,"span",21),u._uU(31,"Contactez nous"),u.qZA(),u.TgZ(32,"span",22),u.O4$(),u.TgZ(33,"svg",23),u._UZ(34,"path",24),u._UZ(35,"path",25),u._UZ(36,"line",26),u._UZ(37,"polyline",27),u._UZ(38,"line",28),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(39,"div",29),u.TgZ(40,"div",30),u.TgZ(41,"a",31),u.O4$(),u.TgZ(42,"svg",32),u._UZ(43,"circle",33),u._UZ(44,"circle",34),u._UZ(45,"path",35),u._UZ(46,"line",36),u.qZA(),u.qZA(),u.kcU(),u.TgZ(47,"a",37),u.O4$(),u.TgZ(48,"svg",32),u._UZ(49,"rect",38),u._UZ(50,"rect",39),u._UZ(51,"line",40),u._UZ(52,"line",41),u._UZ(53,"path",42),u._UZ(54,"circle",43),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(55,"div",44),u.TgZ(56,"div",45),u._UZ(57,"img",46),u.TgZ(58,"div",47),u.TgZ(59,"div",48),u.O4$(),u.TgZ(60,"svg",49),u._UZ(61,"path",50),u._UZ(62,"path",51),u._UZ(63,"path",52),u._UZ(64,"path",53),u.qZA(),u.qZA(),u.kcU(),u.TgZ(65,"p",54),u._uU(66," Vous souhaitez mettre en place votre strat\xe9gie de communication, d\xe9cliner des outils percutants, produire un contenu \xe9ditorial de qualit\xe9, organiser un \xe9v\xe9nement ? Quels que soient votre taille, votre secteur d\u2019activit\xe9, votre budget, nous mettons tout en \u0153uvre pour promouvoir votre visibilit\xe9 dans une relation de confiance et de partage. "),u.qZA(),u.TgZ(67,"div",55),u.O4$(),u.TgZ(68,"svg",49),u._UZ(69,"path",50),u._UZ(70,"path",51),u._UZ(71,"path",52),u._UZ(72,"path",53),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(73,"div"),u.TgZ(74,"h1",56),u.TgZ(75,"a",57),u.O4$(),u.TgZ(76,"svg",58),u._UZ(77,"rect",38),u._UZ(78,"rect",59),u._UZ(79,"line",60),u._UZ(80,"line",61),u._UZ(81,"path",62),u._UZ(82,"circle",43),u.qZA(),u._uU(83," Sandrine CHOPOT "),u.kcU(),u._UZ(84,"br"),u.qZA(),u.qZA(),u.TgZ(85,"h2",63),u._uU(86," Directrice de SaCh'M. "),u.qZA(),u.qZA(),u.qZA(),u.TgZ(87,"div",64),u.TgZ(88,"a",65),u.TgZ(89,"h3",66),u._uU(90," A propos de SaCh'M "),u.qZA(),u.O4$(),u.TgZ(91,"svg",67),u._UZ(92,"circle",33),u._UZ(93,"circle",68),u._UZ(94,"polyline",69),u._UZ(95,"line",70),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(96,"div",64),u.TgZ(97,"a",71),u.TgZ(98,"h3",72),u._uU(99," D\xe9couvrez nos derniers articles "),u.qZA(),u.O4$(),u.TgZ(100,"svg",67),u._UZ(101,"circle",33),u._UZ(102,"circle",68),u._UZ(103,"polyline",69),u._UZ(104,"line",70),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA())},directives:[ho,Sl],encapsulation:2}),n})();const X4=[{path:"",component:_L},{path:"login",component:Q4},{path:"sachem",component:TR},{path:"articles",component:_4},{path:"contact",component:G4},{path:"add-article",component:o4},{path:"delete-article",component:z4},{path:"**",component:_L}];let eZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[at.forRoot(X4)],at]}),n})();function tZ(n,e){1&n&&(u.TgZ(0,"li",22),u.TgZ(1,"a",23),u._uU(2,"Accueil"),u.qZA(),u.qZA())}function nZ(n,e){1&n&&(u.TgZ(0,"li",22),u.TgZ(1,"a",24),u._uU(2,"Accueil"),u.qZA(),u.qZA())}function rZ(n,e){1&n&&(u.TgZ(0,"li",22),u.TgZ(1,"a",25),u._uU(2,"SaCh'm"),u.qZA(),u.qZA())}function iZ(n,e){1&n&&(u.TgZ(0,"li",22),u.TgZ(1,"a",26),u._uU(2,"SaCh'm"),u.qZA(),u.qZA())}function sZ(n,e){1&n&&(u.TgZ(0,"li",22),u.TgZ(1,"a",27),u._uU(2,"Articles"),u.qZA(),u.qZA())}function oZ(n,e){1&n&&(u.TgZ(0,"li",22),u.TgZ(1,"a",28),u._uU(2,"Articles"),u.qZA(),u.qZA())}function aZ(n,e){1&n&&(u.TgZ(0,"li"),u.TgZ(1,"a",29),u._uU(2,"Contact"),u.qZA(),u.qZA())}function lZ(n,e){1&n&&(u.TgZ(0,"li",22),u.TgZ(1,"a",30),u._uU(2,"Contact"),u.qZA(),u.qZA())}function uZ(n,e){1&n&&(u.O4$(),u.kcU(),u.TgZ(0,"li"),u.TgZ(1,"a",31),u.O4$(),u.TgZ(2,"svg",32),u._UZ(3,"rect",16),u._UZ(4,"circle",33),u._UZ(5,"circle",34),u._UZ(6,"path",35),u.qZA(),u.qZA(),u.qZA())}function cZ(n,e){1&n&&(u.O4$(),u.kcU(),u.TgZ(0,"li"),u.TgZ(1,"a",37),u.O4$(),u.TgZ(2,"svg",32),u._UZ(3,"rect",16),u._UZ(4,"circle",33),u._UZ(5,"circle",34),u._UZ(6,"path",35),u.qZA(),u.qZA(),u.qZA())}function dZ(n,e){if(1&n&&(u.O4$(),u.YNc(0,cZ,7,0,"li",36)),2&n){const t=u.oxw();u.Q6J("ngIf",t.loggedIn&&t.loginClicked)}}let hZ=(()=>{class n{constructor(t,r){this.auth=t,this.router=r,this.loggedIn=!1,this.mainClicked=!1,this.aboutClicked=!1,this.articlesClicked=!1,this.contactClicked=!1,this.loginClicked=!1,this.auth.isLogIn$.subscribe(i=>{this.loggedIn=i})}ngOnInit(){this.router.events.pipe(kr(t=>t instanceof bn)).subscribe(t=>{switch(t.url){case"/":case"":this.mainClicked=!0,this.aboutClicked=!1,this.articlesClicked=!1,this.loginClicked=!1,this.contactClicked=!1;break;case"/sachem":this.articlesClicked=!1,this.mainClicked=!1,this.aboutClicked=!0,this.loginClicked=!1,this.contactClicked=!1;break;case"/articles":this.articlesClicked=!0,this.mainClicked=!1,this.aboutClicked=!1,this.loginClicked=!1,this.contactClicked=!1;break;case"/login":this.loginClicked=!0,this.mainClicked=!1,this.aboutClicked=!1,this.articlesClicked=!1,this.contactClicked=!1;break;case"/contact":this.contactClicked=!0,this.loginClicked=!1,this.mainClicked=!1,this.aboutClicked=!1,this.articlesClicked=!1;break;default:this.contactClicked=!1,this.mainClicked=!1,this.aboutClicked=!1,this.articlesClicked=!1,this.loginClicked=!1}})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(xy),u.Y36(jr))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-nav-bar"]],decls:31,vars:10,consts:[[1,"bg-secondary-600","px-8","py-2","min-w-full"],[1,"flex","items-center","justify-between","mt-0","text-sm","font-medium"],[1,"flex","justify-center","items-center"],["class","mr-2",4,"ngIf","ngIfElse"],["mainClickedElse",""],["aboutClickedElse",""],["articlesClickedElse",""],[1,"inline-flex","items-center","justify-center","md:ml-2"],[1,"md:hidden","block"],[4,"ngIf","ngIfElse"],["contactClickedElse",""],[1,"hidden","md:block","mr-4"],["routerLink","/contact",1,"transition","ease-in-out","delay-150","hover:scale-105","py-2","px-4","text-md","bg-primary-600","hover:bg-primary-500","rounded-lg","leading-none","flex","items-center","text","divide-x","divide-secondary-50","shadow-md"],[1,"text-secondary-50","md:pr-6","text-sm","font-sans","transition","duration-200"],[1,"hidden","md:flex","items-center","space-x-5","pl-6"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","#fafafa","viewBox","0 0 256 256",1,"hidden","md:block","w-8"],["width","256","height","256","fill","none"],["cx","128","cy","128","r","96","opacity","0.2"],["cx","128","cy","128","r","96","fill","none","stroke","#fafafa","stroke-miterlimit","10","stroke-width","16"],["points","134.1 161.9 168 128 134.1 94.1","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","88","y1","128","x2","168","y2","128","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["loginClickedElse",""],[1,"mr-2"],["routerLink","/",1,"block","text-md","py-2","md:px-4","px-2","font-sans","border-transparent","text-primary-50","hover:text-primary-600","border-2","border-dashed","hover:border-b-primary-600","bg-transparent"],["routerLink","/",1,"block","text-md","py-2","md:px-4","px-2","font-sans","text-primary-600","border-2","rounded-lg","border-dashed","border-primary-600","bg-transparent"],["routerLink","/sachem",1,"block","text-md","py-2","md:px-4","px-2","font-sans","border-transparent","text-primary-50","hover:text-primary-600","border-2","border-dashed","hover:border-b-primary-600","bg-transparent"],["routerLink","/sachem",1,"block","text-md","py-2","md:px-4","px-2","font-sans","text-primary-600","border-2","rounded-lg","border-dashed","border-primary-600","bg-transparent"],["routerLink","/articles",1,"block","text-md","py-2","md:px-4","px-2","font-sans","border-transparent","text-primary-50","hover:text-primary-600","border-2","border-dashed","hover:border-b-primary-600","bg-transparent"],["routerLink","/articles",1,"block","text-md","py-2","md:px-4","px-2","font-sans","text-primary-600","border-2","rounded-lg","border-dashed","border-primary-600","bg-transparent"],["routerLink","/contact",1,"block","text-md","py-2","md:px-4","px-2","font-sans","border-transparent","text-primary-50","hover:text-primary-600","border-2","border-dashed","hover:border-b-primary-600","bg-transparent"],["routerLink","/contact",1,"block","text-md","py-2","md:px-4","px-2","font-sans","text-primary-600","border-2","rounded-lg","border-dashed","border-primary-600","bg-transparent"],["routerLink","/login",1,"block","text-md","py-2","px-2","font-sans","border-transparent","text-primary-50","hover:text-primary-600","border-2","border-dashed","hover:border-b-primary-600","bg-transparent"],["xmlns","http://www.w3.org/2000/svg","width","26","height","26","fill","#911011","viewBox","0 0 256 256",1,"hidden","md:block"],["cx","128","cy","96","r","64","opacity","0.2"],["cx","128","cy","96","r","64","fill","none","stroke","#911011","stroke-miterlimit","10","stroke-width","16"],["d","M31,216a112,112,0,0,1,194,0","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[4,"ngIf"],["routerLink","/login",1,"hidden","md:block","text-md","py-2","px-2","font-sans","text-primary-600","border-2","rounded-lg","border-dashed","border-primary-600","bg-transparent"]],template:function(t,r){if(1&t&&(u.TgZ(0,"nav",0),u.TgZ(1,"ul",1),u.TgZ(2,"div",2),u.YNc(3,tZ,3,0,"li",3),u.YNc(4,nZ,3,0,"ng-template",null,4,u.W1O),u.YNc(6,rZ,3,0,"li",3),u.YNc(7,iZ,3,0,"ng-template",null,5,u.W1O),u.YNc(9,sZ,3,0,"li",3),u.YNc(10,oZ,3,0,"ng-template",null,6,u.W1O),u.qZA(),u.TgZ(12,"div",7),u.TgZ(13,"div",8),u.YNc(14,aZ,3,0,"li",9),u.YNc(15,lZ,3,0,"ng-template",null,10,u.W1O),u.qZA(),u.TgZ(17,"li",11),u.TgZ(18,"button",12),u.TgZ(19,"span",13),u._uU(20,"Contactez nous"),u.qZA(),u.TgZ(21,"span",14),u.O4$(),u.TgZ(22,"svg",15),u._UZ(23,"rect",16),u._UZ(24,"circle",17),u._UZ(25,"circle",18),u._UZ(26,"polyline",19),u._UZ(27,"line",20),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(28,uZ,7,0,"li",9),u.YNc(29,dZ,1,1,"ng-template",null,21,u.W1O),u.qZA(),u.qZA(),u.qZA()),2&t){const i=u.MAs(5),a=u.MAs(8),c=u.MAs(11),f=u.MAs(16),_=u.MAs(30);u.xp6(3),u.Q6J("ngIf",!r.mainClicked)("ngIfElse",i),u.xp6(3),u.Q6J("ngIf",!r.aboutClicked)("ngIfElse",a),u.xp6(3),u.Q6J("ngIf",!r.articlesClicked)("ngIfElse",c),u.xp6(5),u.Q6J("ngIf",!r.contactClicked)("ngIfElse",f),u.xp6(14),u.Q6J("ngIf",r.loggedIn&&!r.loginClicked)("ngIfElse",_)}},directives:[Ln,Sl,ho],encapsulation:2}),n})(),fZ=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-footer"]],decls:25,vars:0,consts:[[1,"bg-secondary-600","px-8","py-2","min-w-full"],[1,"flex","items-center","justify-between"],[1,"text-sm","text-primary-50","text-center"],["routerLink","/main",1,"hover:underline"],[1,"block","px-12"],[1,"inline-flex","mt-2"],["href","https://www.facebook.com/Sachem.pro/?pnref=lhc","target","_blank",1,"mr-4"],["xmlns","http://www.w3.org/2000/svg","width","26","height","26","fill","#fafafa","viewBox","0 0 256 256"],["width","256","height","256","fill","none"],["cx","128","cy","128","r","96","opacity","0.2"],["cx","128","cy","128","r","96","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M168,88H152a23.9,23.9,0,0,0-24,24V224","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","96","y1","144","x2","160","y2","144","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["href","https://www.linkedin.com/in/sandrine-chopot-90831b162/","target","_blank",1,"mr-4"],["x","36","y","36","width","184","height","184","rx","8","opacity","0.2"],["x","36","y","36","width","184","height","184","rx","8","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","120","y1","112","x2","120","y2","176","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","88","y1","112","x2","88","y2","176","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M120,140a28,28,0,0,1,56,0v36","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["cx","88","cy","80","r","12"]],template:function(t,r){1&t&&(u.TgZ(0,"footer",0),u.TgZ(1,"div",1),u.TgZ(2,"span",2),u._uU(3,"\xa9 2022 "),u.TgZ(4,"a",3),u._uU(5,"Sandrine CHOPOT"),u.qZA(),u._uU(6,". All Rights Reserved. "),u.qZA(),u.TgZ(7,"div",4),u.TgZ(8,"div",5),u.TgZ(9,"a",6),u.O4$(),u.TgZ(10,"svg",7),u._UZ(11,"rect",8),u._UZ(12,"circle",9),u._UZ(13,"circle",10),u._UZ(14,"path",11),u._UZ(15,"line",12),u.qZA(),u.qZA(),u.kcU(),u.TgZ(16,"a",13),u.O4$(),u.TgZ(17,"svg",7),u._UZ(18,"rect",8),u._UZ(19,"rect",14),u._UZ(20,"rect",15),u._UZ(21,"line",16),u._UZ(22,"line",17),u._UZ(23,"path",18),u._UZ(24,"circle",19),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA())},directives:[ho],encapsulation:2}),n})(),pZ=(()=>{class n{constructor(t){this.auth=t,this.title="app-articles"}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(xy))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"min-w-full","min-h-full"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u._UZ(1,"app-nav-bar"),u._UZ(2,"router-outlet"),u._UZ(3,"app-footer"),u.qZA())},directives:[hZ,Uf,fZ],styles:[""]}),n})();const yL_firebaseConfig={apiKey:"AIzaSyA_qMTzXvNHhR4FQlPuazr5NC9Cmo4gwlw",authDomain:"sachem-fcd12.firebaseapp.com",databaseURL:"https://sachem-fcd12-default-rtdb.europe-west1.firebasedatabase.app",projectId:"sachem-fcd12",storageBucket:"sachem-fcd12.appspot.com",messagingSenderId:"44609888106",appId:"1:44609888106:web:390916816d50e3e5cd0f13",measurementId:"G-QVNQXHPHDS"};let gZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[pZ]}),n.\u0275inj=u.cJS({providers:[xy,Ta,mL],imports:[[ol,eZ,u3,R4,Rr.hO.initializeApp(yL_firebaseConfig),lM,mj,J8,Dw]]}),n})();(0,u.G48)(),Oo().bootstrapModule(gZ).catch(n=>console.error(n))},5867:(Je,ve,F)=>{F.d(ve,{C6:()=>u.getApps,Mq:()=>u.getApp});var u=F(9681);(0,u.registerVersion)("firebase","9.9.3","app")},127:(Je,ve,F)=>{F.d(ve,{Z:()=>u.Z});var u=F(3942);u.Z.registerVersion("firebase","9.9.3","app-compat")},1121:(Je,ve,F)=>{F.r(ve);var u=F(5861),te=F(3942),L=F(2090),le=F(9681);function ce(y,p){var g={};for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&p.indexOf(w)<0&&(g[w]=y[w]);if(null!=y&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(w=Object.getOwnPropertySymbols(y);D<w.length;D++)p.indexOf(w[D])<0&&Object.prototype.propertyIsEnumerable.call(y,w[D])&&(g[w[D]]=y[w[D]])}return g}var se=F(1877),_t=F(4859);const di=function sn(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},dn=function or(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ws=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),zi=new se.Yd("@firebase/auth");function Tr(y,...p){zi.logLevel<=se.in.ERROR&&zi.error(`Auth (${le.SDK_VERSION}): ${y}`,...p)}function Yt(y,...p){throw fr(y,...p)}function Bn(y,...p){return fr(y,...p)}function Do(y,p,g){const w=Object.assign(Object.assign({},dn()),{[p]:g});return new L.LL("auth","Firebase",w).create(p,{appName:y.name})}function Yr(y,p,g){if(!(p instanceof g))throw g.name!==p.constructor.name&&Yt(y,"argument-error"),Do(y,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function fr(y,...p){if("string"!=typeof y){const g=p[0],w=[...p.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(g,...w)}return ws.create(y,...p)}function Re(y,p,...g){if(!y)throw fr(p,...g)}function pr(y){const p="INTERNAL ASSERTION FAILED: "+y;throw Tr(p),new Error(p)}function ct(y,p){y||pr(p)}const Cn=new Map;function Fn(y){ct(y instanceof Function,"Expected a class definition");let p=Cn.get(y);return p?(ct(p instanceof y,"Instance stored in cache mismatched with class"),p):(p=new y,Cn.set(y,p),p)}function Qr(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Wn(){return"http:"===wn()||"https:"===wn()}function wn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class et{constructor(p,g){this.shortDelay=p,this.longDelay=g,ct(g>p,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function qa(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Wn()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function vt(y,p){ct(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return p?`${g}${p.startsWith("/")?p.slice(1):p}`:g}class zs{static initialize(p,g,w){this.fetchImpl=p,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ki={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Jr=new et(3e4,6e4);function wt(y,p){return y.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:y.tenantId}):p}function zt(y,p,g,w){return pa.apply(this,arguments)}function pa(){return(pa=(0,u.Z)(function*(y,p,g,w,D={}){return Wt(y,D,(0,u.Z)(function*(){let k={},Z={};w&&("GET"===p?Z=w:k={body:JSON.stringify(w)});const ee=(0,L.xO)(Object.assign({key:y.config.apiKey},Z)).slice(1),Me=yield y._getAdditionalHeaders();return Me["Content-Type"]="application/json",y.languageCode&&(Me["X-Firebase-Locale"]=y.languageCode),zs.fetch()(B(y,y.config.apiHost,g,ee),Object.assign({method:p,headers:Me,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function Wt(y,p,g){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,u.Z)(function*(y,p,g){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},ki),p);try{const D=new K(y),k=yield Promise.race([g(),D.promise]);D.clearNetworkTimeout();const Z=yield k.json();if("needConfirmation"in Z)throw q(y,"account-exists-with-different-credential",Z);if(k.ok&&!("errorMessage"in Z))return Z;{const ee=k.ok?Z.errorMessage:Z.error.message,[Me,Ie]=ee.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Me)throw q(y,"credential-already-in-use",Z);if("EMAIL_EXISTS"===Me)throw q(y,"email-already-in-use",Z);if("USER_DISABLED"===Me)throw q(y,"user-disabled",Z);const rt=w[Me]||Me.toLowerCase().replace(/[_\s]+/g,"-");if(Ie)throw Do(y,rt,Ie);Yt(y,rt)}}catch(D){if(D instanceof L.ZR)throw D;Yt(y,"network-request-failed")}})).apply(this,arguments)}function H(y,p,g,w){return W.apply(this,arguments)}function W(){return(W=(0,u.Z)(function*(y,p,g,w,D={}){const k=yield zt(y,p,g,w,D);return"mfaPendingCredential"in k&&Yt(y,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function B(y,p,g,w){const D=`${p}${g}?${w}`;return y.config.emulator?vt(y.config,D):`${y.config.apiScheme}://${D}`}class K{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(Bn(this.auth,"network-request-failed")),Jr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function q(y,p,g){const w={appName:y.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const D=Bn(y,p,w);return D.customData._tokenResponse=g,D}function Ge(){return(Ge=(0,u.Z)(function*(y,p){return zt(y,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function mt(y,p){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,u.Z)(function*(y,p){return zt(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function hn(y,p){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,u.Z)(function*(y,p){return zt(y,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Vt(y){if(y)try{const p=new Date(Number(y));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function ga(){return(ga=(0,u.Z)(function*(y,p=!1){const g=(0,L.m9)(y),w=yield g.getIdToken(p),D=_a(w);Re(D&&D.exp&&D.auth_time&&D.iat,g.auth,"internal-error");const k="object"==typeof D.firebase?D.firebase:void 0,Z=null==k?void 0:k.sign_in_provider;return{claims:D,token:w,authTime:Vt(ma(D.auth_time)),issuedAtTime:Vt(ma(D.iat)),expirationTime:Vt(ma(D.exp)),signInProvider:Z||null,signInSecondFactor:(null==k?void 0:k.sign_in_second_factor)||null}})).apply(this,arguments)}function ma(y){return 1e3*Number(y)}function _a(y){var p;const[g,w,D]=y.split(".");if(void 0===g||void 0===w||void 0===D)return Tr("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,L.tV)(w);return k?JSON.parse(k):(Tr("Failed to decode base64 JWT payload"),null)}catch(k){return Tr("Caught error parsing JWT payload as JSON",null===(p=k)||void 0===p?void 0:p.toString()),null}}function ar(y,p){return Or.apply(this,arguments)}function Or(){return(Or=(0,u.Z)(function*(y,p,g=!1){if(g)return p;try{return yield p}catch(w){throw w instanceof L.ZR&&mr(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function mr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class ec{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var g;if(p){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const D=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,D)}}schedule(p=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(p);this.timerId=setTimeout((0,u.Z)(function*(){yield g.iteration()}),w)}iteration(){var p=this;return(0,u.Z)(function*(){var g;try{yield p.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(g=w)||void 0===g?void 0:g.code)&&p.schedule(!0))}p.schedule()})()}}class ya{constructor(p,g){this.createdAt=p,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vt(this.lastLoginAt),this.creationTime=Vt(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Yi(y){return va.apply(this,arguments)}function va(){return(va=(0,u.Z)(function*(y){var p;const g=y.auth,w=yield y.getIdToken(),D=yield ar(y,hn(g,{idToken:w}));Re(null==D?void 0:D.users.length,g,"internal-error");const k=D.users[0];y._notifyReloadListener(k);const Z=(null===(p=k.providerUserInfo)||void 0===p?void 0:p.length)?fi(k.providerUserInfo):[],ee=_d(y.providerData,Z),rt=!!y.isAnonymous&&!(y.email&&k.passwordHash||(null==ee?void 0:ee.length)),at={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:ee,metadata:new ya(k.createdAt,k.lastLoginAt),isAnonymous:rt};Object.assign(y,at)})).apply(this,arguments)}function kn(){return(kn=(0,u.Z)(function*(y){const p=(0,L.m9)(y);yield Yi(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function _d(y,p){return[...y.filter(w=>!p.some(D=>D.providerId===w.providerId)),...p]}function fi(y){return y.map(p=>{var{providerId:g}=p,w=ce(p,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function St(){return(St=(0,u.Z)(function*(y,p){const g=yield Wt(y,{},(0,u.Z)(function*(){const w=(0,L.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:D,apiKey:k}=y.config,Z=B(y,D,"/v1/token",`key=${k}`),ee=yield y._getAdditionalHeaders();return ee["Content-Type"]="application/x-www-form-urlencoded",zs.fetch()(Z,{method:"POST",headers:ee,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class on{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){Re(p.idToken,"internal-error"),Re(void 0!==p.idToken,"internal-error"),Re(void 0!==p.refreshToken,"internal-error");const g="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function Xn(y){const p=_a(y);return Re(p,"internal-error"),Re(void 0!==p.exp,"internal-error"),Re(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,g)}getToken(p,g=!1){var w=this;return(0,u.Z)(function*(){return Re(!w.accessToken||w.refreshToken,p,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(p,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,g){var w=this;return(0,u.Z)(function*(){const{accessToken:D,refreshToken:k,expiresIn:Z}=yield function We(y,p){return St.apply(this,arguments)}(p,g);w.updateTokensAndExpiration(D,k,Number(Z))})()}updateTokensAndExpiration(p,g,w){this.refreshToken=g||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(p,g){const{refreshToken:w,accessToken:D,expirationTime:k}=g,Z=new on;return w&&(Re("string"==typeof w,"internal-error",{appName:p}),Z.refreshToken=w),D&&(Re("string"==typeof D,"internal-error",{appName:p}),Z.accessToken=D),k&&(Re("number"==typeof k,"internal-error",{appName:p}),Z.expirationTime=k),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new on,this.toJSON())}_performRefresh(){return pr("not implemented")}}function Rn(y,p){Re("string"==typeof y||void 0===y,"internal-error",{appName:p})}class Fr{constructor(p){var{uid:g,auth:w,stsTokenManager:D}=p,k=ce(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ec(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=D,this.accessToken=D.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new ya(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(p){var g=this;return(0,u.Z)(function*(){const w=yield ar(g,g.stsTokenManager.getToken(g.auth,p));return Re(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(p){return function Ks(y){return ga.apply(this,arguments)}(this,p)}reload(){return function Ao(y){return kn.apply(this,arguments)}(this)}_assign(p){this!==p&&(Re(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(g=>Object.assign({},g)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Fr(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,g=!1){var w=this;return(0,u.Z)(function*(){let D=!1;p.idToken&&p.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(p),D=!0),g&&(yield Yi(w)),yield w.auth._persistUserIfCurrent(w),D&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var p=this;return(0,u.Z)(function*(){const g=yield p.getIdToken();return yield ar(p,function Te(y,p){return Ge.apply(this,arguments)}(p.auth,{idToken:g})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,g){var w,D,k,Z,ee,Me,Ie,rt;const at=null!==(w=g.displayName)&&void 0!==w?w:void 0,Ht=null!==(D=g.email)&&void 0!==D?D:void 0,Yn=null!==(k=g.phoneNumber)&&void 0!==k?k:void 0,Ua=null!==(Z=g.photoURL)&&void 0!==Z?Z:void 0,Cu=null!==(ee=g.tenantId)&&void 0!==ee?ee:void 0,oh=null!==(Me=g._redirectEventId)&&void 0!==Me?Me:void 0,ep=null!==(Ie=g.createdAt)&&void 0!==Ie?Ie:void 0,ah=null!==(rt=g.lastLoginAt)&&void 0!==rt?rt:void 0,{uid:Iu,emailVerified:Pc,isAnonymous:Oc,providerData:Fc,stsTokenManager:lh}=g;Re(Iu&&lh,p,"internal-error");const ov=on.fromJSON(this.name,lh);Re("string"==typeof Iu,p,"internal-error"),Rn(at,p.name),Rn(Ht,p.name),Re("boolean"==typeof Pc,p,"internal-error"),Re("boolean"==typeof Oc,p,"internal-error"),Rn(Yn,p.name),Rn(Ua,p.name),Rn(Cu,p.name),Rn(oh,p.name),Rn(ep,p.name),Rn(ah,p.name);const Ko=new Fr({uid:Iu,auth:p,email:Ht,emailVerified:Pc,displayName:at,isAnonymous:Oc,photoURL:Ua,phoneNumber:Yn,tenantId:Cu,stsTokenManager:ov,createdAt:ep,lastLoginAt:ah});return Fc&&Array.isArray(Fc)&&(Ko.providerData=Fc.map(Lc=>Object.assign({},Lc))),oh&&(Ko._redirectEventId=oh),Ko}static _fromIdTokenResponse(p,g,w=!1){return(0,u.Z)(function*(){const D=new on;D.updateFromServerResponse(g);const k=new Fr({uid:g.localId,auth:p,stsTokenManager:D,isAnonymous:w});return yield Yi(k),k})()}}const _r=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(g,w){var D=this;return(0,u.Z)(function*(){D.storage[g]=w})()}_get(g){var w=this;return(0,u.Z)(function*(){const D=w.storage[g];return void 0===D?null:D})()}_remove(g){var w=this;return(0,u.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return y.type="NONE",y})();function an(y,p,g){return`firebase:${y}:${p}:${g}`}class In{constructor(p,g,w){this.persistence=p,this.auth=g,this.userKey=w;const{config:D,name:k}=this.auth;this.fullUserKey=an(this.userKey,D.apiKey,k),this.fullPersistenceKey=an("persistence",D.apiKey,k),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,u.Z)(function*(){const g=yield p.persistence._get(p.fullUserKey);return g?Fr._fromJSON(p.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var g=this;return(0,u.Z)(function*(){if(g.persistence===p)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=p,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,g,w="authUser"){return(0,u.Z)(function*(){if(!g.length)return new In(Fn(_r),p,w);const D=(yield Promise.all(g.map(function(){var Ie=(0,u.Z)(function*(rt){if(yield rt._isAvailable())return rt});return function(rt){return Ie.apply(this,arguments)}}()))).filter(Ie=>Ie);let k=D[0]||Fn(_r);const Z=an(w,p.config.apiKey,p.name);let ee=null;for(const Ie of g)try{const rt=yield Ie._get(Z);if(rt){const at=Fr._fromJSON(p,rt);Ie!==k&&(ee=at),k=Ie;break}}catch(rt){}const Me=D.filter(Ie=>Ie._shouldAllowMigration);return k._shouldAllowMigration&&Me.length?(k=Me[0],ee&&(yield k._set(Z,ee.toJSON())),yield Promise.all(g.map(function(){var Ie=(0,u.Z)(function*(rt){if(rt!==k)try{yield rt._remove(Z)}catch(at){}});return function(rt){return Ie.apply(this,arguments)}}())),new In(k,p,w)):new In(k,p,w)})()}}function wa(y){const p=y.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(ql(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Dt(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Ar(p))return"Blackberry";if(ba(p))return"Webos";if(Ea(p))return"Safari";if((p.includes("chrome/")||Ys(p))&&!p.includes("edge/"))return"Chrome";if(Dr(p))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function Dt(y=(0,L.z$)()){return/firefox\//i.test(y)}function Ea(y=(0,L.z$)()){const p=y.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Ys(y=(0,L.z$)()){return/crios\//i.test(y)}function ql(y=(0,L.z$)()){return/iemobile/i.test(y)}function Dr(y=(0,L.z$)()){return/android/i.test(y)}function Ar(y=(0,L.z$)()){return/blackberry/i.test(y)}function ba(y=(0,L.z$)()){return/webos/i.test(y)}function Ln(y=(0,L.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function tc(y=(0,L.z$)()){return Ln(y)||Dr(y)||ba(y)||Ar(y)||/windows phone/i.test(y)||ql(y)}function Mi(y,p=[]){let g;switch(y){case"Browser":g=wa((0,L.z$)());break;case"Worker":g=`${wa((0,L.z$)())}-${y}`;break;default:g=y}const w=p.length?p.join(","):"FirebaseCore-web";return`${g}/JsCore/${le.SDK_VERSION}/${w}`}class _f{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,g){const w=k=>new Promise((Z,ee)=>{try{Z(p(k))}catch(Me){ee(Me)}});w.onAbort=g,this.queue.push(w);const D=this.queue.length-1;return()=>{this.queue[D]=()=>Promise.resolve()}}runMiddleware(p){var g=this;return(0,u.Z)(function*(){var w;if(g.auth.currentUser===p)return;const D=[];try{for(const k of g.queue)yield k(p),k.onAbort&&D.push(k.onAbort)}catch(k){D.reverse();for(const Z of D)try{Z()}catch(ee){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=k)||void 0===w?void 0:w.message})}})()}}class Qs{constructor(p,g,w){this.app=p,this.heartbeatServiceProvider=g,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pi(this),this.idTokenSubscription=new pi(this),this.beforeStateQueue=new _f(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ws,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(p,g){var w=this;return g&&(this._popupRedirectResolver=Fn(g)),this._initializationPromise=this.queue((0,u.Z)(function*(){var D,k;if(!w._deleted&&(w.persistenceManager=yield In.create(w,p),!w._deleted)){if(null===(D=w._popupRedirectResolver)||void 0===D?void 0:D._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(Z){}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(k=w.currentUser)||void 0===k?void 0:k.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,u.Z)(function*(){if(p._deleted)return;const g=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||g){if(p.currentUser&&g&&p.currentUser.uid===g.uid)return p._currentUser._assign(g),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(g,!0)}})()}initializeCurrentUser(p){var g=this;return(0,u.Z)(function*(){var w;const D=yield g.assertedPersistence.getCurrentUser();let k=D,Z=!1;if(p&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const ee=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,Me=null==k?void 0:k._redirectEventId,Ie=yield g.tryRedirectSignIn(p);(!ee||ee===Me)&&(null==Ie?void 0:Ie.user)&&(k=Ie.user,Z=!0)}if(!k)return g.directlySetCurrentUser(null);if(!k._redirectEventId){if(Z)try{yield g.beforeStateQueue.runMiddleware(k)}catch(ee){k=D,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(ee))}return k?g.reloadAndSetCurrentUserOrClear(k):g.directlySetCurrentUser(null)}return Re(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===k._redirectEventId?g.directlySetCurrentUser(k):g.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(p){var g=this;return(0,u.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,p,!0)}catch(D){yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(p){var g=this;return(0,u.Z)(function*(){var w;try{yield Yi(p)}catch(D){if("auth/network-request-failed"!==(null===(w=D)||void 0===w?void 0:w.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function xn(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var p=this;return(0,u.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var g=this;return(0,u.Z)(function*(){const w=p?(0,L.m9)(p):null;return w&&Re(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(p,g=!1){var w=this;return(0,u.Z)(function*(){if(!w._deleted)return p&&Re(w.tenantId===p.tenantId,w,"tenant-id-mismatch"),g||(yield w.beforeStateQueue.runMiddleware(p)),w.queue((0,u.Z)(function*(){yield w.directlySetCurrentUser(p),w.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,u.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var g=this;return this.queue((0,u.Z)(function*(){yield g.assertedPersistence.setPersistence(Fn(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new L.LL("auth","Firebase",p())}onAuthStateChanged(p,g,w){return this.registerStateListener(this.authStateSubscription,p,g,w)}beforeAuthStateChanged(p,g){return this.beforeStateQueue.pushCallback(p,g)}onIdTokenChanged(p,g,w){return this.registerStateListener(this.idTokenSubscription,p,g,w)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,g){var w=this;return(0,u.Z)(function*(){const D=yield w.getOrInitRedirectPersistenceManager(g);return null===p?D.removeCurrentUser():D.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var g=this;return(0,u.Z)(function*(){if(!g.redirectPersistenceManager){const w=p&&Fn(p)||g._popupRedirectResolver;Re(w,g,"argument-error"),g.redirectPersistenceManager=yield In.create(g,[Fn(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(p){var g=this;return(0,u.Z)(function*(){var w,D;return g._isInitialized&&(yield g.queue((0,u.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===p?g._currentUser:(null===(D=g.redirectUser)||void 0===D?void 0:D._redirectEventId)===p?g.redirectUser:null})()}_persistUserIfCurrent(p){var g=this;return(0,u.Z)(function*(){if(p===g.currentUser)return g.queue((0,u.Z)(function*(){return g.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,g,w,D){if(this._deleted)return()=>{};const k="function"==typeof g?g:g.next.bind(g),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return Re(Z,this,"internal-error"),Z.then(()=>k(this.currentUser)),"function"==typeof g?p.addObserver(g,w,D):p.addObserver(g)}directlySetCurrentUser(p){var g=this;return(0,u.Z)(function*(){g.currentUser&&g.currentUser!==p&&(g._currentUser._stopProactiveRefresh(),p&&g.isProactiveRefreshEnabled&&p._startProactiveRefresh()),g.currentUser=p,p?yield g.assertedPersistence.setCurrentUser(p):yield g.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Mi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,u.Z)(function*(){var g;const w={"X-Client-Version":p.clientVersion};p.app.options.appId&&(w["X-Firebase-gmpid"]=p.app.options.appId);const D=yield null===(g=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return D&&(w["X-Firebase-Client"]=D),w})()}}function jn(y){return(0,L.m9)(y)}class pi{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,L.ne)(g=>this.observer=g)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Qg(y){const p=y.indexOf(":");return p<0?"":y.substr(0,p+1)}function yd(y){if(!y)return null;const p=Number(y);return isNaN(p)?null:p}class Wa{constructor(p,g){this.providerId=p,this.signInMethod=g}toJSON(){return pr("not implemented")}_getIdTokenResponse(p){return pr("not implemented")}_linkToIdToken(p,g){return pr("not implemented")}_getReauthenticationResolver(p){return pr("not implemented")}}function vf(y,p){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,u.Z)(function*(y,p){return zt(y,"POST","/v1/accounts:resetPassword",wt(y,p))})).apply(this,arguments)}function wf(y,p){return za.apply(this,arguments)}function za(){return(za=(0,u.Z)(function*(y,p){return zt(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ia(y,p){return vd.apply(this,arguments)}function vd(){return(vd=(0,u.Z)(function*(y,p){return zt(y,"POST","/v1/accounts:update",wt(y,p))})).apply(this,arguments)}function Ta(){return(Ta=(0,u.Z)(function*(y,p){return H(y,"POST","/v1/accounts:signInWithPassword",wt(y,p))})).apply(this,arguments)}function nc(y,p){return wd.apply(this,arguments)}function wd(){return(wd=(0,u.Z)(function*(y,p){return zt(y,"POST","/v1/accounts:sendOobCode",wt(y,p))})).apply(this,arguments)}function em(y,p){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,u.Z)(function*(y,p){return nc(y,p)})).apply(this,arguments)}function Gl(y,p){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,u.Z)(function*(y,p){return nc(y,p)})).apply(this,arguments)}function rc(y,p){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,u.Z)(function*(y,p){return nc(y,p)})).apply(this,arguments)}function tm(y,p){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,u.Z)(function*(y,p){return nc(y,p)})).apply(this,arguments)}function Js(){return(Js=(0,u.Z)(function*(y,p){return H(y,"POST","/v1/accounts:signInWithEmailLink",wt(y,p))})).apply(this,arguments)}function Cd(){return(Cd=(0,u.Z)(function*(y,p){return H(y,"POST","/v1/accounts:signInWithEmailLink",wt(y,p))})).apply(this,arguments)}class Ya extends Wa{constructor(p,g,w,D=null){super("password",w),this._email=p,this._password=g,this._tenantId=D}static _fromEmailAndPassword(p,g){return new Ya(p,g,"password")}static _fromEmailAndCode(p,g,w=null){return new Ya(p,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(p){var g=this;return(0,u.Z)(function*(){switch(g.signInMethod){case"password":return function Xg(y,p){return Ta.apply(this,arguments)}(p,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function ic(y,p){return Js.apply(this,arguments)}(p,{email:g._email,oobCode:g._password});default:Yt(p,"internal-error")}})()}_linkToIdToken(p,g){var w=this;return(0,u.Z)(function*(){switch(w.signInMethod){case"password":return wf(p,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function bd(y,p){return Cd.apply(this,arguments)}(p,{idToken:g,email:w._email,oobCode:w._password});default:Yt(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Ji(y,p){return bs.apply(this,arguments)}function bs(){return(bs=(0,u.Z)(function*(y,p){return H(y,"POST","/v1/accounts:signInWithIdp",wt(y,p))})).apply(this,arguments)}class gi extends Wa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const g=new gi(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(g.idToken=p.idToken),p.accessToken&&(g.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(g.nonce=p.nonce),p.pendingToken&&(g.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(g.accessToken=p.oauthToken,g.secret=p.oauthTokenSecret):Yt("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:D}=g,k=ce(g,["providerId","signInMethod"]);if(!w||!D)return null;const Z=new gi(w,D);return Z.idToken=k.idToken||void 0,Z.accessToken=k.accessToken||void 0,Z.secret=k.secret,Z.nonce=k.nonce,Z.pendingToken=k.pendingToken||null,Z}_getIdTokenResponse(p){return Ji(p,this.buildRequest())}_linkToIdToken(p,g){const w=this.buildRequest();return w.idToken=g,Ji(p,w)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,Ji(p,g)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),p.postBody=(0,L.xO)(g)}return p}}function Id(y,p){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,u.Z)(function*(y,p){return zt(y,"POST","/v1/accounts:sendVerificationCode",wt(y,p))})).apply(this,arguments)}function sc(){return(sc=(0,u.Z)(function*(y,p){return H(y,"POST","/v1/accounts:signInWithPhoneNumber",wt(y,p))})).apply(this,arguments)}function oc(){return(oc=(0,u.Z)(function*(y,p){const g=yield H(y,"POST","/v1/accounts:signInWithPhoneNumber",wt(y,p));if(g.temporaryProof)throw q(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const ac={USER_NOT_FOUND:"user-not-found"};function Qt(){return(Qt=(0,u.Z)(function*(y,p){return H(y,"POST","/v1/accounts:signInWithPhoneNumber",wt(y,Object.assign(Object.assign({},p),{operation:"REAUTH"})),ac)})).apply(this,arguments)}class Is extends Wa{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,g){return new Is({verificationId:p,verificationCode:g})}static _fromTokenResponse(p,g){return new Is({phoneNumber:p,temporaryProof:g})}_getIdTokenResponse(p){return function Td(y,p){return sc.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,g){return function Wl(y,p){return oc.apply(this,arguments)}(p,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function bf(y,p){return Qt.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:g,verificationId:w,verificationCode:D}=this.params;return p&&g?{temporaryProof:p,phoneNumber:g}:{sessionInfo:w,code:D}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:g,verificationCode:w,phoneNumber:D,temporaryProof:k}=p;return w||g||D||k?new Is({verificationId:g,verificationCode:w,phoneNumber:D,temporaryProof:k}):null}}class Ts{constructor(p){var g,w,D,k,Z,ee;const Me=(0,L.zd)((0,L.pd)(p)),Ie=null!==(g=Me.apiKey)&&void 0!==g?g:null,rt=null!==(w=Me.oobCode)&&void 0!==w?w:null,at=function zl(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(D=Me.mode)&&void 0!==D?D:null);Re(Ie&&rt&&at,"argument-error"),this.apiKey=Ie,this.operation=at,this.code=rt,this.continueUrl=null!==(k=Me.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(Z=Me.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(ee=Me.tenantId)&&void 0!==ee?ee:null}static parseLink(p){const g=function Un(y){const p=(0,L.zd)((0,L.pd)(y)).link,g=p?(0,L.zd)((0,L.pd)(p)).deep_link_id:null,w=(0,L.zd)((0,L.pd)(y)).deep_link_id;return(w?(0,L.zd)((0,L.pd)(w)).link:null)||w||g||p||y}(p);try{return new Ts(g)}catch(w){return null}}}let Xs=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,w){return Ya._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const D=Ts.parseLink(w);return Re(D,"argument-error"),Ya._fromEmailAndCode(g,D.code,D.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Tn{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class eo extends Tn{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Pi extends eo{static credentialFromJSON(p){const g="string"==typeof p?JSON.parse(p):p;return Re("providerId"in g&&"signInMethod"in g,"argument-error"),gi._fromParams(g)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return Re(p.idToken||p.accessToken,"argument-error"),gi._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Pi.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Pi.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:D,pendingToken:k,nonce:Z,providerId:ee}=p;if(!w&&!D&&!g&&!k||!ee)return null;try{return new Pi(ee)._credential({idToken:g,accessToken:w,nonce:Z,pendingToken:k})}catch(Me){return null}}}let So=(()=>{class y extends eo{constructor(){super("facebook.com")}static credential(g){return gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(w){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Jt=(()=>{class y extends eo{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:D}=g;if(!w&&!D)return null;try{return y.credential(w,D)}catch(k){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Ja=(()=>{class y extends eo{constructor(){super("github.com")}static credential(g){return gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(w){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Ds extends Wa{constructor(p,g){super(p,p),this.pendingToken=g}_getIdTokenResponse(p){return Ji(p,this.buildRequest())}_linkToIdToken(p,g){const w=this.buildRequest();return w.idToken=g,Ji(p,w)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,Ji(p,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:D,pendingToken:k}=g;return w&&D&&k&&w===D?new Ds(w,k):null}static _create(p,g){return new Ds(p,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class xo extends Tn{constructor(p){Re(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return xo.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return xo.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const g=Ds.fromJSON(p);return Re(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:g,providerId:w}=p;if(!g||!w)return null;try{return Ds._create(w,g)}catch(D){return null}}}let ko=(()=>{class y extends eo{constructor(){super("twitter.com")}static credential(g,w){return gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:D}=g;if(!w||!D)return null;try{return y.credential(w,D)}catch(k){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function ft(y,p){return el.apply(this,arguments)}function el(){return(el=(0,u.Z)(function*(y,p){return H(y,"POST","/v1/accounts:signUp",wt(y,p))})).apply(this,arguments)}class yr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,g,w,D=!1){return(0,u.Z)(function*(){const k=yield Fr._fromIdTokenResponse(p,w,D),Z=tl(w);return new yr({user:k,providerId:Z,_tokenResponse:w,operationType:g})})()}static _forOperation(p,g,w){return(0,u.Z)(function*(){yield p._updateTokensIfNecessary(w,!0);const D=tl(w);return new yr({user:p,providerId:D,_tokenResponse:w,operationType:g})})()}}function tl(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function nl(){return(nl=(0,u.Z)(function*(y){var p;const g=jn(y);if(yield g._initializationPromise,null===(p=g.currentUser)||void 0===p?void 0:p.isAnonymous)return new yr({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield ft(g,{returnSecureToken:!0}),D=yield yr._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(D.user),D})).apply(this,arguments)}class Da extends L.ZR{constructor(p,g,w,D){var k;super(g.code,g.message),this.operationType=w,this.user=D,Object.setPrototypeOf(this,Da.prototype),this.customData={appName:p.name,tenantId:null!==(k=p.tenantId)&&void 0!==k?k:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(p,g,w,D){return new Da(p,g,w,D)}}function lc(y,p,g,w){return("reauthenticate"===p?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?Da._fromErrorAndOperation(y,k,p,w):k})}function Ae(y){return new Set(y.map(({providerId:p})=>p).filter(p=>!!p))}function As(){return(As=(0,u.Z)(function*(y,p){const g=(0,L.m9)(y);yield Xi(!0,g,p);const{providerUserInfo:w}=yield mt(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[p]}),D=Ae(w||[]);return g.providerData=g.providerData.filter(k=>D.has(k.providerId)),D.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Dn(y,p){return rl.apply(this,arguments)}function rl(){return(rl=(0,u.Z)(function*(y,p,g=!1){const w=yield ar(y,p._linkToIdToken(y.auth,yield y.getIdToken()),g);return yr._forOperation(y,"link",w)})).apply(this,arguments)}function Xi(y,p,g){return vr.apply(this,arguments)}function vr(){return(vr=(0,u.Z)(function*(y,p,g){yield Yi(p);const D=!1===y?"provider-already-linked":"no-such-provider";Re(Ae(p.providerData).has(g)===y,p.auth,D)})).apply(this,arguments)}function Kl(y,p){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,u.Z)(function*(y,p,g=!1){var w;const{auth:D}=y,k="reauthenticate";try{const Z=yield ar(y,lc(D,k,p,y),g);Re(Z.idToken,D,"internal-error");const ee=_a(Z.idToken);Re(ee,D,"internal-error");const{sub:Me}=ee;return Re(y.uid===Me,D,"user-mismatch"),yr._forOperation(y,k,Z)}catch(Z){throw"auth/user-not-found"===(null===(w=Z)||void 0===w?void 0:w.code)&&Yt(D,"user-mismatch"),Z}})).apply(this,arguments)}function Cf(y,p){return uc.apply(this,arguments)}function uc(){return(uc=(0,u.Z)(function*(y,p,g=!1){const w="signIn",D=yield lc(y,w,p),k=yield yr._fromIdTokenResponse(y,w,D);return g||(yield y._updateCurrentUser(k.user)),k})).apply(this,arguments)}function Mo(y,p){return No.apply(this,arguments)}function No(){return(No=(0,u.Z)(function*(y,p){return Cf(jn(y),p)})).apply(this,arguments)}function lr(y,p){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,u.Z)(function*(y,p){const g=(0,L.m9)(y);return yield Xi(!1,g,p.providerId),Dn(g,p)})).apply(this,arguments)}function Aa(y,p){return to.apply(this,arguments)}function to(){return(to=(0,u.Z)(function*(y,p){return Kl((0,L.m9)(y),p)})).apply(this,arguments)}function es(y,p){return il.apply(this,arguments)}function il(){return(il=(0,u.Z)(function*(y,p){return H(y,"POST","/v1/accounts:signInWithCustomToken",wt(y,p))})).apply(this,arguments)}function sl(){return(sl=(0,u.Z)(function*(y,p){const g=jn(y),w=yield es(g,{token:p,returnSecureToken:!0}),D=yield yr._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(D.user),D})).apply(this,arguments)}class Yl{constructor(p,g){this.factorId=p,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(p,g){return"phoneInfo"in g?Po._fromServerResponse(p,g):Yt(p,"internal-error")}}class Po extends Yl{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,g){return new Po(g)}}function Oo(y,p,g){var w;Re((null===(w=g.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),Re(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),p.continueUrl=g.url,p.dynamicLinkDomain=g.dynamicLinkDomain,p.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Re(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),p.iOSBundleId=g.iOS.bundleId),g.android&&(Re(g.android.packageName.length>0,y,"missing-android-pkg-name"),p.androidInstallApp=g.android.installApp,p.androidMinimumVersionCode=g.android.minimumVersion,p.androidPackageName=g.android.packageName)}function ol(){return(ol=(0,u.Z)(function*(y,p,g){const w=(0,L.m9)(y),D={requestType:"PASSWORD_RESET",email:p};g&&Oo(w,D,g),yield Gl(w,D)})).apply(this,arguments)}function Jl(){return(Jl=(0,u.Z)(function*(y,p,g){yield vf((0,L.m9)(y),{oobCode:p,newPassword:g})})).apply(this,arguments)}function al(){return(al=(0,u.Z)(function*(y,p){yield Ia((0,L.m9)(y),{oobCode:p})})).apply(this,arguments)}function Xl(y,p){return ll.apply(this,arguments)}function ll(){return(ll=(0,u.Z)(function*(y,p){const g=(0,L.m9)(y),w=yield vf(g,{oobCode:p}),D=w.requestType;switch(Re(D,g,"internal-error"),D){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Re(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Re(w.mfaInfo,g,"internal-error");default:Re(w.email,g,"internal-error")}let k=null;return w.mfaInfo&&(k=Yl._fromServerResponse(jn(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:k},operation:D}})).apply(this,arguments)}function ul(){return(ul=(0,u.Z)(function*(y,p){const{data:g}=yield Xl((0,L.m9)(y),p);return g.email})).apply(this,arguments)}function cl(){return(cl=(0,u.Z)(function*(y,p,g){const w=jn(y),D=yield ft(w,{returnSecureToken:!0,email:p,password:g}),k=yield yr._fromIdTokenResponse(w,"signIn",D);return yield w._updateCurrentUser(k.user),k})).apply(this,arguments)}function gn(){return(gn=(0,u.Z)(function*(y,p,g){const w=(0,L.m9)(y),D={requestType:"EMAIL_SIGNIN",email:p};Re(g.handleCodeInApp,w,"argument-error"),g&&Oo(w,D,g),yield rc(w,D)})).apply(this,arguments)}function kd(){return(kd=(0,u.Z)(function*(y,p,g){const w=(0,L.m9)(y),D=Xs.credentialWithLink(p,g||Qr());return Re(D._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Mo(w,D)})).apply(this,arguments)}function Rd(y,p){return Tf.apply(this,arguments)}function Tf(){return(Tf=(0,u.Z)(function*(y,p){return zt(y,"POST","/v1/accounts:createAuthUri",wt(y,p))})).apply(this,arguments)}function ro(){return(ro=(0,u.Z)(function*(y,p){const w={identifier:p,continueUri:Wn()?Qr():"http://localhost"},{signinMethods:D}=yield Rd((0,L.m9)(y),w);return D||[]})).apply(this,arguments)}function dl(){return(dl=(0,u.Z)(function*(y,p){const g=(0,L.m9)(y),D={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};p&&Oo(g.auth,D,p);const{email:k}=yield em(g.auth,D);k!==y.email&&(yield y.reload())})).apply(this,arguments)}function dc(){return(dc=(0,u.Z)(function*(y,p,g){const w=(0,L.m9)(y),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:p};g&&Oo(w.auth,k,g);const{email:Z}=yield tm(w.auth,k);Z!==y.email&&(yield y.reload())})).apply(this,arguments)}function Nd(y,p){return yn.apply(this,arguments)}function yn(){return(yn=(0,u.Z)(function*(y,p){return zt(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Pd(){return(Pd=(0,u.Z)(function*(y,{displayName:p,photoURL:g}){if(void 0===p&&void 0===g)return;const w=(0,L.m9)(y),k={idToken:yield w.getIdToken(),displayName:p,photoUrl:g,returnSecureToken:!0},Z=yield ar(w,Nd(w.auth,k));w.displayName=Z.displayName||null,w.photoURL=Z.photoUrl||null;const ee=w.providerData.find(({providerId:Me})=>"password"===Me);ee&&(ee.displayName=w.displayName,ee.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Z)})).apply(this,arguments)}function fl(y,p,g){return Od.apply(this,arguments)}function Od(){return(Od=(0,u.Z)(function*(y,p,g){const{auth:w}=y,k={idToken:yield y.getIdToken(),returnSecureToken:!0};p&&(k.email=p),g&&(k.password=g);const Z=yield ar(y,wf(w,k));yield y._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class pl{constructor(p,g,w={}){this.isNewUser=p,this.providerId=g,this.profile=w}}class sm extends pl{constructor(p,g,w,D){super(p,g,w),this.username=D}}class en extends pl{constructor(p,g){super(p,"facebook.com",g)}}class io extends sm{constructor(p,g){super(p,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class tt extends pl{constructor(p,g){super(p,"google.com",g)}}class mi extends sm{constructor(p,g,w){super(p,"twitter.com",g,w)}}function ti(y){const{user:p,_tokenResponse:g}=y;return p.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Fd(y){var p,g;if(!y)return null;const{providerId:w}=y,D=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},k=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&(null==y?void 0:y.idToken)){const Z=null===(g=null===(p=_a(y.idToken))||void 0===p?void 0:p.firebase)||void 0===g?void 0:g.sign_in_provider;if(Z)return new pl(k,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!w)return null;switch(w){case"facebook.com":return new en(k,D);case"github.com":return new io(k,D);case"google.com":return new tt(k,D);case"twitter.com":return new mi(k,D,y.screenName||null);case"custom":case"anonymous":return new pl(k,null);default:return new pl(k,w,D)}}(g)}class Lo{constructor(p,g){this.type=p,this.credential=g}static _fromIdtoken(p){return new Lo("enroll",p)}static _fromMfaPendingCredential(p){return new Lo("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var g,w;if(null==p?void 0:p.multiFactorSession){if(null===(g=p.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return Lo._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(w=p.multiFactorSession)||void 0===w?void 0:w.idToken)return Lo._fromIdtoken(p.multiFactorSession.idToken)}return null}}class hc{constructor(p,g,w){this.session=p,this.hints=g,this.signInResolver=w}static _fromError(p,g){const w=jn(p),D=g.customData._serverResponse,k=(D.mfaInfo||[]).map(ee=>Yl._fromServerResponse(w,ee));Re(D.mfaPendingCredential,w,"internal-error");const Z=Lo._fromMfaPendingCredential(D.mfaPendingCredential);return new hc(Z,k,function(){var ee=(0,u.Z)(function*(Me){const Ie=yield Me._process(w,Z);delete D.mfaInfo,delete D.mfaPendingCredential;const rt=Object.assign(Object.assign({},D),{idToken:Ie.idToken,refreshToken:Ie.refreshToken});switch(g.operationType){case"signIn":const at=yield yr._fromIdTokenResponse(w,g.operationType,rt);return yield w._updateCurrentUser(at.user),at;case"reauthenticate":return Re(g.user,w,"internal-error"),yr._forOperation(g.user,g.operationType,rt);default:Yt(w,"internal-error")}});return function(Me){return ee.apply(this,arguments)}}())}resolveSignIn(p){var g=this;return(0,u.Z)(function*(){return g.signInResolver(p)})()}}function ka(y,p){return zt(y,"POST","/v2/accounts/mfaEnrollment:start",wt(y,p))}class Ma{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>Yl._fromServerResponse(p.auth,w)))})}static _fromUser(p){return new Ma(p)}getSession(){var p=this;return(0,u.Z)(function*(){return Lo._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,g){var w=this;return(0,u.Z)(function*(){const D=p,k=yield w.getSession(),Z=yield ar(w.user,D._process(w.user.auth,k,g));return yield w.user._updateTokensIfNecessary(Z),w.user.reload()})()}unenroll(p){var g=this;return(0,u.Z)(function*(){var w;const D="string"==typeof p?p:p.uid,k=yield g.user.getIdToken(),Z=yield ar(g.user,function Ra(y,p){return zt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",wt(y,p))}(g.user.auth,{idToken:k,mfaEnrollmentId:D}));g.enrolledFactors=g.enrolledFactors.filter(({uid:ee})=>ee!==D),yield g.user._updateTokensIfNecessary(Z);try{yield g.user.reload()}catch(ee){if("auth/user-token-expired"!==(null===(w=ee)||void 0===w?void 0:w.code))throw ee}})()}}const ml=new WeakMap,Uo="__sak";class Na{constructor(p,g){this.storageRetriever=p,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Uo,"1"),this.storage.removeItem(Uo),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,g){return this.storage.setItem(p,JSON.stringify(g)),Promise.resolve()}_get(p){const g=this.storage.getItem(p);return Promise.resolve(g?JSON.parse(g):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const ts=(()=>{class y extends Na{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Vo(){const y=(0,L.z$)();return Ea(y)||Ln(y)}()&&function Es(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=tc(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const D=this.storage.getItem(w),k=this.localCache[w];D!==k&&g(w,k,D)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((ee,Me,Ie)=>{this.notifyListeners(ee,Ie)});const D=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ee=this.storage.getItem(D);if(g.newValue!==ee)null!==g.newValue?this.storage.setItem(D,g.newValue):this.storage.removeItem(D);else if(this.localCache[D]===g.newValue&&!w)return}const k=()=>{const ee=this.storage.getItem(D);!w&&this.localCache[D]===ee||this.notifyListeners(D,ee)},Z=this.storage.getItem(D);!function Ga(){return(0,L.w1)()&&10===document.documentMode}()||Z===g.newValue||g.newValue===g.oldValue?k():setTimeout(k,10)}notifyListeners(g,w){this.localCache[g]=w;const D=this.listeners[g];if(D)for(const k of Array.from(D))k(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,D)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:D}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var D=()=>super._set,k=this;return(0,u.Z)(function*(){yield D().call(k,g,w),k.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,D=this;return(0,u.Z)(function*(){const k=yield w().call(D,g);return D.localCache[g]=JSON.stringify(k),k})()}_remove(g){var w=()=>super._remove,D=this;return(0,u.Z)(function*(){yield w().call(D,g),delete D.localCache[g]})()}}return y.type="LOCAL",y})(),ns=(()=>{class y extends Na{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return y.type="SESSION",y})();let Bo=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(k=>k.isListeningto(g));if(w)return w;const D=new y(g);return this.receivers.push(D),D}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,u.Z)(function*(){const D=g,{eventId:k,eventType:Z,data:ee}=D.data,Me=w.handlersMap[Z];if(!(null==Me?void 0:Me.size))return;D.ports[0].postMessage({status:"ack",eventId:k,eventType:Z});const Ie=Array.from(Me).map(function(){var at=(0,u.Z)(function*(Ht){return Ht(D.origin,ee)});return function(Ht){return at.apply(this,arguments)}}()),rt=yield function Kn(y){return Promise.all(y.map(function(){var p=(0,u.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return p.apply(this,arguments)}}()))}(Ie);D.ports[0].postMessage({status:"done",eventId:k,eventType:Z,response:rt})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function so(y="",p=10){let g="";for(let w=0;w<p;w++)g+=Math.floor(10*Math.random());return y+g}class Hn{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,g,w=50){var D=this;return(0,u.Z)(function*(){const k="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let Z,ee;return new Promise((Me,Ie)=>{const rt=so("",20);k.port1.start();const at=setTimeout(()=>{Ie(new Error("unsupported_event"))},w);ee={messageChannel:k,onMessage(Ht){const Yn=Ht;if(Yn.data.eventId===rt)switch(Yn.data.status){case"ack":clearTimeout(at),Z=setTimeout(()=>{Ie(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),Me(Yn.data.response);break;default:clearTimeout(at),clearTimeout(Z),Ie(new Error("invalid_response"))}}},D.handlers.add(ee),k.port1.addEventListener("message",ee.onMessage),D.target.postMessage({eventType:p,eventId:rt,data:g},[k.port2])}).finally(()=>{ee&&D.removeMessageHandler(ee)})})()}}function Kt(){return window}function xs(){return void 0!==Kt().WorkerGlobalScope&&"function"==typeof Kt().importScripts}function kr(){return(kr=(0,u.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const su="firebaseLocalStorageDb",pn="firebaseLocalStorage",pc="fbase_key";class gc{constructor(p){this.request=p}toPromise(){return new Promise((p,g)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function ou(y,p){return y.transaction([pn],p?"readwrite":"readonly").objectStore(pn)}function is(){const y=indexedDB.open(su,1);return new Promise((p,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(pn,{keyPath:pc})}catch(D){g(D)}}),y.addEventListener("success",(0,u.Z)(function*(){const w=y.result;w.objectStoreNames.contains(pn)?p(w):(w.close(),yield function am(){const y=indexedDB.deleteDatabase(su);return new gc(y).toPromise()}(),p(yield is()))}))})}function _i(y,p,g){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,u.Z)(function*(y,p,g){const w=ou(y,!0).put({[pc]:p,value:g});return new gc(w).toPromise()})).apply(this,arguments)}function mc(){return(mc=(0,u.Z)(function*(y,p){const g=ou(y,!1).get(p),w=yield new gc(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function bn(y,p){const g=ou(y,!0).delete(p);return new gc(g).toPromise()}const jo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,u.Z)(function*(){return g.db||(g.db=yield is()),g.db})()}_withRetries(g){var w=this;return(0,u.Z)(function*(){let D=0;for(;;)try{const k=yield w._openDb();return yield g(k)}catch(k){if(D++>3)throw k;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,u.Z)(function*(){return xs()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,u.Z)(function*(){g.receiver=Bo._getInstance(function tn(){return xs()?self:null}()),g.receiver._subscribe("keyChanged",function(){var w=(0,u.Z)(function*(D,k){return{keyProcessed:(yield g._poll()).includes(k.key)}});return function(D,k){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,u.Z)(function*(D,k){return["keyChanged"]});return function(D,k){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,u.Z)(function*(){var w,D;if(g.activeServiceWorker=yield function xr(){return kr.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Hn(g.activeServiceWorker);const k=yield g.sender._send("ping",{},800);!k||(null===(w=k[0])||void 0===w?void 0:w.fulfilled)&&(null===(D=k[0])||void 0===D?void 0:D.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,u.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Fi(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch(D){}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const g=yield is();return yield _i(g,Uo,"1"),yield bn(g,Uo),!0}catch(g){}return!1})()}_withPendingWrite(g){var w=this;return(0,u.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var D=this;return(0,u.Z)(function*(){return D._withPendingWrite((0,u.Z)(function*(){return yield D._withRetries(k=>_i(k,g,w)),D.localCache[g]=w,D.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,u.Z)(function*(){const D=yield w._withRetries(k=>function yi(y,p){return mc.apply(this,arguments)}(k,g));return w.localCache[g]=D,D})()}_remove(g){var w=this;return(0,u.Z)(function*(){return w._withPendingWrite((0,u.Z)(function*(){return yield w._withRetries(D=>bn(D,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,u.Z)(function*(){const w=yield g._withRetries(Z=>{const ee=ou(Z,!1).getAll();return new gc(ee).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const D=[],k=new Set;for(const{fbase_key:Z,value:ee}of w)k.add(Z),JSON.stringify(g.localCache[Z])!==JSON.stringify(ee)&&(g.notifyListeners(Z,ee),D.push(Z));for(const Z of Object.keys(g.localCache))g.localCache[Z]&&!k.has(Z)&&(g.notifyListeners(Z,null),D.push(Z));return D})()}notifyListeners(g,w){this.localCache[g]=w;const D=this.listeners[g];if(D)for(const k of Array.from(D))k(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function vi(y,p){return zt(y,"POST","/v2/accounts/mfaSignIn:start",wt(y,p))}function Zo(){return(Zo=(0,u.Z)(function*(y){return(yield zt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function _c(y){return new Promise((p,g)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=p,w.onerror=D=>{const k=Bn("internal-error");k.customData=D,g(k)},w.type="text/javascript",w.charset="UTF-8",function Oa(){var y,p;return null!==(p=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==p?p:document}().appendChild(w)})}function Sf(y){return`__${y}${Math.floor(1e6*Math.random())}`}const vl=1e12;class Nt{constructor(p){this.auth=p,this.counter=vl,this._widgets=new Map}render(p,g){const w=this.counter;return this._widgets.set(w,new ni(p,this.auth.name,g||{})),this.counter++,w}reset(p){var g;const w=p||vl;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(p){var g;return(null===(g=this._widgets.get(p||vl))||void 0===g?void 0:g.getResponse())||""}execute(p){var g=this;return(0,u.Z)(function*(){var w;return null===(w=g._widgets.get(p||vl))||void 0===w||w.execute(),""})()}}class ni{constructor(p,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const D="string"==typeof p?document.getElementById(p):p;Re(D,"argument-error",{appName:g}),this.container=D,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function os(y){const p=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)p.push(g.charAt(Math.floor(Math.random()*g.length)));return p.join("")}(50);const{callback:p,"expired-callback":g}=this.params;if(p)try{p(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Li=Sf("rcb"),uu=new et(3e4,6e4);class yc{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(p=Kt().grecaptcha)||void 0===p?void 0:p.render)}load(p,g=""){return Re(function vc(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),p,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Kt().grecaptcha):new Promise((w,D)=>{const k=Kt().setTimeout(()=>{D(Bn(p,"network-request-failed"))},uu.get());Kt()[Li]=()=>{Kt().clearTimeout(k),delete Kt()[Li];const ee=Kt().grecaptcha;if(!ee)return void D(Bn(p,"internal-error"));const Me=ee.render;ee.render=(Ie,rt)=>{const at=Me(Ie,rt);return this.counter++,at},this.hostLanguage=g,w(ee)},_c(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:Li,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(k),D(Bn(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var g;return!!(null===(g=Kt().grecaptcha)||void 0===g?void 0:g.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class wi{load(p){return(0,u.Z)(function*(){return new Nt(p)})()}clearedOneInstance(){}}const Vd="recaptcha",kf={theme:"light",type:"image"};class Bd{constructor(p,g=Object.assign({},kf),w){this.parameters=g,this.type=Vd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=jn(w),this.isInvisible="invisible"===this.parameters.size,Re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const D="string"==typeof p?document.getElementById(p):p;Re(D,this.auth,"argument-error"),this.container=D,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new wi:new yc,this.validateStartingState()}verify(){var p=this;return(0,u.Z)(function*(){p.assertNotDestroyed();const g=yield p.render(),w=p.getAssertedRecaptcha();return w.getResponse(g)||new Promise(k=>{const Z=ee=>{!ee||(p.tokenChangeListeners.delete(Z),k(ee))};p.tokenChangeListeners.add(Z),p.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){Re(!this.parameters.sitekey,this.auth,"argument-error"),Re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof p)p(g);else if("string"==typeof p){const w=Kt()[p];"function"==typeof w&&w(g)}}}assertNotDestroyed(){Re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,u.Z)(function*(){if(yield p.init(),!p.widgetId){let g=p.container;if(!p.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}p.widgetId=p.getAssertedRecaptcha().render(g,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,u.Z)(function*(){Re(Wn()&&!xs(),p.auth,"internal-error"),yield function jd(){let y=null;return new Promise(p=>{"complete"!==document.readyState?(y=()=>p(),window.addEventListener("load",y)):p()}).catch(p=>{throw y&&window.removeEventListener("load",y),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const g=yield function Ud(y){return Zo.apply(this,arguments)}(p.auth);Re(g,p.auth,"internal-error"),p.parameters.sitekey=g})()}getAssertedRecaptcha(){return Re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Mn{constructor(p,g){this.verificationId=p,this.onConfirmation=g}confirm(p){const g=Is._fromVerification(this.verificationId,p);return this.onConfirmation(g)}}function oo(){return(oo=(0,u.Z)(function*(y,p,g){const w=jn(y),D=yield Ui(w,p,(0,L.m9)(g));return new Mn(D,k=>Mo(w,k))})).apply(this,arguments)}function Ho(){return(Ho=(0,u.Z)(function*(y,p,g){const w=(0,L.m9)(y);yield Xi(!1,w,"phone");const D=yield Ui(w.auth,p,(0,L.m9)(g));return new Mn(D,k=>lr(w,k))})).apply(this,arguments)}function Ec(){return(Ec=(0,u.Z)(function*(y,p,g){const w=(0,L.m9)(y),D=yield Ui(w.auth,p,(0,L.m9)(g));return new Mn(D,k=>Aa(w,k))})).apply(this,arguments)}function Ui(y,p,g){return du.apply(this,arguments)}function du(){return(du=(0,u.Z)(function*(y,p,g){var w;const D=yield g.verify();try{let k;if(Re("string"==typeof D,y,"argument-error"),Re(g.type===Vd,y,"argument-error"),k="string"==typeof p?{phoneNumber:p}:p,"session"in k){const Z=k.session;if("phoneNumber"in k)return Re("enroll"===Z.type,y,"internal-error"),(yield ka(y,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:D}})).phoneSessionInfo.sessionInfo;{Re("signin"===Z.type,y,"internal-error");const ee=(null===(w=k.multiFactorHint)||void 0===w?void 0:w.uid)||k.multiFactorUid;return Re(ee,y,"missing-multi-factor-info"),(yield vi(y,{mfaPendingCredential:Z.credential,mfaEnrollmentId:ee,phoneSignInInfo:{recaptchaToken:D}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield Id(y,{phoneNumber:k.phoneNumber,recaptchaToken:D});return Z}}finally{g._reset()}})).apply(this,arguments)}function ks(){return(ks=(0,u.Z)(function*(y,p){yield Dn((0,L.m9)(y),p)})).apply(this,arguments)}let Rs=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=jn(g)}verifyPhoneNumber(g,w){return Ui(this.auth,g,(0,L.m9)(w))}static credential(g,w){return Is._fromVerification(g,w)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:D}=g;return w&&D?Is._fromTokenResponse(w,D):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function ri(y,p){return p?Fn(p):(Re(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class pt extends Wa{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Ji(p,this._buildIdpRequest())}_linkToIdToken(p,g){return Ji(p,this._buildIdpRequest(g))}_getReauthenticationResolver(p){return Ji(p,this._buildIdpRequest())}_buildIdpRequest(p){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(g.idToken=p),g}}function I(y){return Cf(y.auth,new pt(y),y.bypassAuthState)}function A(y){const{auth:p,user:g}=y;return Re(g,p,"internal-error"),Kl(g,new pt(y),y.bypassAuthState)}function M(y){return V.apply(this,arguments)}function V(){return(V=(0,u.Z)(function*(y){const{auth:p,user:g}=y;return Re(g,p,"internal-error"),Dn(g,new pt(y),y.bypassAuthState)})).apply(this,arguments)}class Q{constructor(p,g,w,D,k=!1){this.auth=p,this.resolver=w,this.user=D,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var p=this;return new Promise(function(){var g=(0,u.Z)(function*(w,D){p.pendingPromise={resolve:w,reject:D};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(k){p.reject(k)}});return function(w,D){return g.apply(this,arguments)}}())}onAuthEvent(p){var g=this;return(0,u.Z)(function*(){const{urlResponse:w,sessionId:D,postBody:k,tenantId:Z,error:ee,type:Me}=p;if(ee)return void g.reject(ee);const Ie={auth:g.auth,requestUri:w,sessionId:D,tenantId:Z||void 0,postBody:k||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Me)(Ie))}catch(rt){g.reject(rt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return I;case"linkViaPopup":case"linkViaRedirect":return M;case"reauthViaPopup":case"reauthViaRedirect":return A;default:Yt(this.auth,"internal-error")}}resolve(p){ct(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){ct(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const oe=new et(2e3,1e4);function Ue(){return(Ue=(0,u.Z)(function*(y,p,g){const w=jn(y);Yr(y,p,Tn);const D=ri(w,g);return new Vn(w,"signInViaPopup",p,D).executeNotNull()})).apply(this,arguments)}function Tt(){return(Tt=(0,u.Z)(function*(y,p,g){const w=(0,L.m9)(y);Yr(w.auth,p,Tn);const D=ri(w.auth,g);return new Vn(w.auth,"reauthViaPopup",p,D,w).executeNotNull()})).apply(this,arguments)}function gt(){return(gt=(0,u.Z)(function*(y,p,g){const w=(0,L.m9)(y);Yr(w.auth,p,Tn);const D=ri(w.auth,g);return new Vn(w.auth,"linkViaPopup",p,D,w).executeNotNull()})).apply(this,arguments)}let Vn=(()=>{class y extends Q{constructor(g,w,D,k,Z){super(g,w,k,Z),this.provider=D,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,u.Z)(function*(){const w=yield g.execute();return Re(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,u.Z)(function*(){ct(1===g.filter.length,"Popup operations only handle one event");const w=so();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(D=>{g.reject(D)}),g.resolver._isIframeWebStorageSupported(g.auth,D=>{D||g.reject(Bn(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,D;this.pollId=(null===(D=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===D?void 0:D.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Bn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,oe.get())};g()}}return y.currentPopupAction=null,y})();const Ei=new Map;class $o extends Q{constructor(p,g,w=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var p=()=>super.execute,g=this;return(0,u.Z)(function*(){let w=Ei.get(g.auth._key());if(!w){try{const k=(yield function Fa(y,p){return bc.apply(this,arguments)}(g.resolver,g.auth))?yield p().call(g):null;w=()=>Promise.resolve(k)}catch(D){w=()=>Promise.reject(D)}Ei.set(g.auth._key(),w)}return g.bypassAuthState||Ei.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(p){var g=()=>super.onAuthEvent,w=this;return(0,u.Z)(function*(){if("signInViaRedirect"===p.type)return g().call(w,p);if("unknown"!==p.type){if(p.eventId){const D=yield w.auth._redirectUserForId(p.eventId);if(D)return w.user=D,g().call(w,p);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function bc(){return(bc=(0,u.Z)(function*(y,p){const g=cm(p),w=hu(y);if(!(yield w._isAvailable()))return!1;const D="true"===(yield w._get(g));return yield w._remove(g),D})).apply(this,arguments)}function as(y,p){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,u.Z)(function*(y,p){return hu(y)._set(cm(p),"true")})).apply(this,arguments)}function Go(y,p){Ei.set(y._key(),p)}function hu(y){return Fn(y._redirectPersistence)}function cm(y){return an("pendingRedirect",y.config.apiKey,y.name)}function Cc(){return(Cc=(0,u.Z)(function*(y,p,g){const w=jn(y);Yr(y,p,Tn);const D=ri(w,g);return yield as(D,w),D._openRedirect(w,p,"signInViaRedirect")})).apply(this,arguments)}function lo(){return(lo=(0,u.Z)(function*(y,p,g){const w=(0,L.m9)(y);Yr(w.auth,p,Tn);const D=ri(w.auth,g);yield as(D,w.auth);const k=yield Zd(w);return D._openRedirect(w.auth,p,"reauthViaRedirect",k)})).apply(this,arguments)}function Nf(){return(Nf=(0,u.Z)(function*(y,p,g){const w=(0,L.m9)(y);Yr(w.auth,p,Tn);const D=ri(w.auth,g);yield Xi(!1,w,p.providerId),yield as(D,w.auth);const k=yield Zd(w);return D._openRedirect(w.auth,p,"linkViaRedirect",k)})).apply(this,arguments)}function El(){return(El=(0,u.Z)(function*(y,p){return yield jn(y)._initializationPromise,fu(y,p,!1)})).apply(this,arguments)}function fu(y,p){return bl.apply(this,arguments)}function bl(){return(bl=(0,u.Z)(function*(y,p,g=!1){const w=jn(y),D=ri(w,p),Z=yield new $o(w,D,g).execute();return Z&&!g&&(delete Z.user._redirectEventId,yield w._persistUserIfCurrent(Z.user),yield w._setRedirectUser(null,p)),Z})).apply(this,arguments)}function Zd(y){return pu.apply(this,arguments)}function pu(){return(pu=(0,u.Z)(function*(y){const p=so(`${y.uid}:::`);return y._redirectEventId=p,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),p})).apply(this,arguments)}class Hd{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(p,w)&&(g=!0,this.sendToConsumer(p,w),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Tc(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fm(y);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=p,g=!0)),g}sendToConsumer(p,g){var w;if(p.error&&!fm(p)){const D=(null===(w=p.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(Bn(this.auth,D))}else g.onAuthEvent(p)}isEventForConsumer(p,g){const w=null===g.eventId||!!p.eventId&&p.eventId===g.eventId;return g.filter.includes(p.type)&&w}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has($d(p))}saveEventToCache(p){this.cachedEventUids.add($d(p)),this.lastProcessedEventTime=Date.now()}}function $d(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(p=>p).join("-")}function fm({type:y,error:p}){return"unknown"===y&&"auth/no-auth-event"===(null==p?void 0:p.code)}function pm(y){return uo.apply(this,arguments)}function uo(){return(uo=(0,u.Z)(function*(y,p={}){return zt(y,"GET","/v1/projects",p)})).apply(this,arguments)}const Dc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qd=/^https?/;function Wd(){return(Wd=(0,u.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:p}=yield pm(y);for(const g of p)try{if(Fy(g))return}catch(w){}Yt(y,"unauthorized-domain")})).apply(this,arguments)}function Fy(y){const p=Qr(),{protocol:g,hostname:w}=new URL(p);if(y.startsWith("chrome-extension://")){const Z=new URL(y);return""===Z.hostname&&""===w?"chrome-extension:"===g&&y.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===g&&Z.hostname===w}if(!qd.test(g))return!1;if(Dc.test(y))return w===y;const D=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+D+"|"+D+")$","i").test(w)}const Ly=new et(3e4,6e4);function Uy(){const y=Kt().___jsl;if(null==y?void 0:y.H)for(const p of Object.keys(y.H))if(y.H[p].r=y.H[p].r||[],y.H[p].L=y.H[p].L||[],y.H[p].r=[...y.H[p].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Kd=null;function Vy(y){return Kd=Kd||function zd(y){return new Promise((p,g)=>{var w,D,k;function Z(){Uy(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Uy(),g(Bn(y,"network-request-failed"))},timeout:Ly.get()})}if(null===(D=null===(w=Kt().gapi)||void 0===w?void 0:w.iframes)||void 0===D?void 0:D.Iframe)p(gapi.iframes.getContext());else{if(!(null===(k=Kt().gapi)||void 0===k?void 0:k.load)){const ee=Sf("iframefcb");return Kt()[ee]=()=>{gapi.load?Z():g(Bn(y,"network-request-failed"))},_c(`https://apis.google.com/js/api.js?onload=${ee}`).catch(Me=>g(Me))}Z()}}).catch(p=>{throw Kd=null,p})}(y),Kd}const By=new et(5e3,15e3),jy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mm(y){const p=y.config;Re(p.authDomain,y,"auth-domain-config-required");const g=p.emulator?vt(p,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:p.apiKey,appName:y.name,v:le.SDK_VERSION},D=gu.get(y.config.apiHost);D&&(w.eid=D);const k=y._getFrameworks();return k.length&&(w.fw=k.join(",")),`${g}?${(0,L.xO)(w).slice(1)}`}function La(){return La=(0,u.Z)(function*(y){const p=yield Vy(y),g=Kt().gapi;return Re(g,y,"internal-error"),p.open({where:document.body,url:mm(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jy,dontclear:!0},w=>new Promise(function(){var D=(0,u.Z)(function*(k,Z){yield w.restyle({setHideOnLeave:!1});const ee=Bn(y,"network-request-failed"),Me=Kt().setTimeout(()=>{Z(ee)},By.get());function Ie(){Kt().clearTimeout(Me),k(w)}w.ping(Ie).then(Ie,()=>{Z(ee)})});return function(k,Z){return D.apply(this,arguments)}}()))}),La.apply(this,arguments)}const _m={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Zy{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function Em(y,p,g,w,D,k){Re(y.config.authDomain,y,"auth-domain-config-required"),Re(y.config.apiKey,y,"invalid-api-key");const Z={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:w,v:le.SDK_VERSION,eventId:D};if(p instanceof Tn){p.setDefaultLanguage(y.languageCode),Z.providerId=p.providerId||"",(0,L.xb)(p.getCustomParameters())||(Z.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Me,Ie]of Object.entries(k||{}))Z[Me]=Ie}if(p instanceof eo){const Me=p.getScopes().filter(Ie=>""!==Ie);Me.length>0&&(Z.scopes=Me.join(","))}y.tenantId&&(Z.tid=y.tenantId);const ee=Z;for(const Me of Object.keys(ee))void 0===ee[Me]&&delete ee[Me];return`${function mu({config:y}){return y.emulator?vt(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,L.xO)(ee).slice(1)}`}const Il="webStorageSupport";class Yd extends class Uf{constructor(p){this.factorId=p}_process(p,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(p,g.credential,w);case"signin":return this._finalizeSignIn(p,g.credential);default:return pr("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Yd(p)}_finalizeEnroll(p,g,w){return function Zn(y,p){return zt(y,"POST","/v2/accounts/mfaEnrollment:finalize",wt(y,p))}(p,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,g){return function ss(y,p){return zt(y,"POST","/v2/accounts/mfaSignIn:finalize",wt(y,p))}(p,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ac=(()=>{class y{constructor(){}static assertion(g){return Yd._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var Vf="@firebase/auth";class $y{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var g=this;return(0,u.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const g=this.auth.onIdTokenChanged(w=>{var D;p((null===(D=w)||void 0===D?void 0:D.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,g),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const g=this.internalListeners.get(p);!g||(this.internalListeners.delete(p),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function co(){return window}function Bf(){return(Bf=(0,u.Z)(function*(y,p,g){var w;const{BuildInfo:D}=co();ct(p.sessionId,"AuthEvent did not contain a session ID");const k=yield ur(p.sessionId),Z={};return Ln()?Z.ibi=D.packageName:Dr()?Z.apn=D.packageName:Yt(y,"operation-not-supported-in-this-environment"),D.displayName&&(Z.appDisplayName=D.displayName),Z.sessionId=k,Em(y,g,p.type,void 0,null!==(w=p.eventId)&&void 0!==w?w:void 0,Z)})).apply(this,arguments)}function jf(){return(jf=(0,u.Z)(function*(y){const{BuildInfo:p}=co(),g={};Ln()?g.iosBundleId=p.packageName:Dr()?g.androidPackageName=p.packageName:Yt(y,"operation-not-supported-in-this-environment"),yield pm(y,g)})).apply(this,arguments)}function Hf(){return(Hf=(0,u.Z)(function*(y,p,g){const{cordova:w}=co();let D=()=>{};try{yield new Promise((k,Z)=>{let ee=null;function Me(){var at;k();const Ht=null===(at=w.plugins.browsertab)||void 0===at?void 0:at.close;"function"==typeof Ht&&Ht(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Ie(){ee||(ee=window.setTimeout(()=>{Z(Bn(y,"redirect-cancelled-by-user"))},2e3))}function rt(){"visible"===(null==document?void 0:document.visibilityState)&&Ie()}p.addPassiveListener(Me),document.addEventListener("resume",Ie,!1),Dr()&&document.addEventListener("visibilitychange",rt,!1),D=()=>{p.removePassiveListener(Me),document.removeEventListener("resume",Ie,!1),document.removeEventListener("visibilitychange",rt,!1),ee&&window.clearTimeout(ee)}})}finally{D()}})).apply(this,arguments)}function ur(y){return vu.apply(this,arguments)}function vu(){return(vu=(0,u.Z)(function*(y){const p=xc(y),g=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(g)).map(D=>D.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function xc(y){if(ct(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const p=new ArrayBuffer(y.length),g=new Uint8Array(p);for(let w=0;w<y.length;w++)g[w]=y.charCodeAt(w);return g}!function us(y){(0,le._registerComponent)(new _t.wA("auth",(p,{options:g})=>{const w=p.getProvider("app").getImmediate(),D=p.getProvider("heartbeat"),{apiKey:k,authDomain:Z}=w.options;return((ee,Me)=>{Re(k&&!k.includes(":"),"invalid-api-key",{appName:ee.name}),Re(!(null==Z?void 0:Z.includes(":")),"argument-error",{appName:ee.name});const Ie={apiKey:k,authDomain:Z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mi(y)},rt=new Qs(ee,Me,Ie);return function Ki(y,p){const g=(null==p?void 0:p.persistence)||[],w=(Array.isArray(g)?g:[g]).map(Fn);(null==p?void 0:p.errorMap)&&y._updateErrorMap(p.errorMap),y._initializeWithPersistence(w,null==p?void 0:p.popupRedirectResolver)}(rt,g),rt})(w,D)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,g,w)=>{p.getProvider("auth-internal").initialize()})),(0,le._registerComponent)(new _t.wA("auth-internal",p=>{const g=jn(p.getProvider("auth").getImmediate());return new $y(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,le.registerVersion)(Vf,"0.20.5",function $n(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,le.registerVersion)(Vf,"0.20.5","esm2017")}("Browser");class Vr extends Hd{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(p)),super.onEvent(p)}initialized(){var p=this;return(0,u.Z)(function*(){yield p.initPromise})()}}function bm(y){return Gf.apply(this,arguments)}function Gf(){return(Gf=(0,u.Z)(function*(y){const p=yield Rc()._get(wu(y));return p&&(yield Rc()._remove(wu(y))),p})).apply(this,arguments)}function zy(){const y=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*p.length);y.push(p.charAt(w))}return y.join("")}function Rc(){return Fn(ts)}function wu(y){return an("authEvent",y.config.apiKey,y.name)}function Tl(y){if(!(null==y?void 0:y.includes("?")))return{};const[p,...g]=y.split("?");return(0,L.zd)(g.join("?"))}function Im(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Bn("no-auth-event")}}function zo(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Tm(y=(0,L.z$)()){return!("file:"!==zo()&&"ionic:"!==zo()&&"capacitor:"!==zo()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Dm(){try{const y=self.localStorage,p=so();if(y)return y.setItem(p,"1"),y.removeItem(p),!function zf(y=(0,L.z$)()){return function nv(){return(0,L.w1)()&&11===(null==document?void 0:document.documentMode)}()||function rv(y=(0,L.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,L.hl)()}catch(y){return Kf()&&(0,L.hl)()}return!1}function Kf(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Yf(){return(function ev(){return"http:"===zo()||"https:"===zo()}()||(0,L.ru)()||Tm())&&!function tv(){return(0,L.b$)()||(0,L.UG)()}()&&Dm()&&!Kf()}function Am(){return Tm()&&"undefined"!=typeof document}function th(){return(th=(0,u.Z)(function*(){return!!Am()&&new Promise(y=>{const p=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),y(!0)})})})).apply(this,arguments)}const bi={LOCAL:"local",NONE:"none",SESSION:"session"},Ns=Re,cs="persistence";function xm(y){return nh.apply(this,arguments)}function nh(){return(nh=(0,u.Z)(function*(y){yield y._initializationPromise;const p=Ps(),g=an(cs,y.config.apiKey,y.name);p&&p.setItem(g,y._getPersistence())})).apply(this,arguments)}function Ps(){var y;try{return(null===(y=function ob(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(p){return null}}const Qf=Re;class ds{constructor(){this.browserResolver=Fn(class Hy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ns,this._completeRedirectFn=fu,this._overrideRedirectResult=Go}_openPopup(p,g,w,D){var k=this;return(0,u.Z)(function*(){var Z;ct(null===(Z=k.eventManagers[p._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const ee=Em(p,g,w,Qr(),D);return function Wo(y,p,g,w=500,D=600){const k=Math.max((window.screen.availHeight-D)/2,0).toString(),Z=Math.max((window.screen.availWidth-w)/2,0).toString();let ee="";const Me=Object.assign(Object.assign({},_m),{width:w.toString(),height:D.toString(),top:k,left:Z}),Ie=(0,L.z$)().toLowerCase();g&&(ee=Ys(Ie)?"_blank":g),Dt(Ie)&&(p=p||"http://localhost",Me.scrollbars="yes");const rt=Object.entries(Me).reduce((Ht,[Yn,Ua])=>`${Ht}${Yn}=${Ua},`,"");if(function fn(y=(0,L.z$)()){var p;return Ln(y)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Ie)&&"_self"!==ee)return function Ff(y,p){const g=document.createElement("a");g.href=y,g.target=p;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(p||"",ee),new Zy(null);const at=window.open(p||"",ee,rt);Re(at,y,"popup-blocked");try{at.focus()}catch(Ht){}return new Zy(at)}(p,ee,so())})()}_openRedirect(p,g,w,D){var k=this;return(0,u.Z)(function*(){return yield k._originValidation(p),function rs(y){Kt().location.href=y}(Em(p,g,w,Qr(),D)),new Promise(()=>{})})()}_initialize(p){const g=p._key();if(this.eventManagers[g]){const{manager:D,promise:k}=this.eventManagers[g];return D?Promise.resolve(D):(ct(k,"If manager is not set, promise should be"),k)}const w=this.initAndGetManager(p);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(p){var g=this;return(0,u.Z)(function*(){const w=yield function Ms(y){return La.apply(this,arguments)}(p),D=new Hd(p);return w.register("authEvent",k=>(Re(null==k?void 0:k.authEvent,p,"invalid-auth-event"),{status:D.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[p._key()]={manager:D},g.iframes[p._key()]=w,D})()}_isIframeWebStorageSupported(p,g){this.iframes[p._key()].send(Il,{type:Il},D=>{var k;const Z=null===(k=null==D?void 0:D[0])||void 0===k?void 0:k[Il];void 0!==Z&&g(!!Z),Yt(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Gd(y){return Wd.apply(this,arguments)}(p)),this.originValidationPromises[g]}get _shouldInitProactively(){return tc()||Ea()||Ln()}}),this.cordovaResolver=Fn(class Dl{constructor(){this._redirectPersistence=ns,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=fu,this._overrideRedirectResult=Go}_initialize(p){var g=this;return(0,u.Z)(function*(){const w=p._key();let D=g.eventManagers.get(w);return D||(D=new Vr(p),g.eventManagers.set(w,D),g.attachCallbackListeners(p,D)),D})()}_openPopup(p){Yt(p,"operation-not-supported-in-this-environment")}_openRedirect(p,g,w,D){var k=this;return(0,u.Z)(function*(){!function yu(y){var p,g,w,D,k,Z,ee,Me,Ie,rt;const at=co();Re("function"==typeof(null===(p=null==at?void 0:at.universalLinks)||void 0===p?void 0:p.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Re(void 0!==(null===(g=null==at?void 0:at.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Re("function"==typeof(null===(k=null===(D=null===(w=null==at?void 0:at.cordova)||void 0===w?void 0:w.plugins)||void 0===D?void 0:D.browsertab)||void 0===k?void 0:k.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Re("function"==typeof(null===(Me=null===(ee=null===(Z=null==at?void 0:at.cordova)||void 0===Z?void 0:Z.plugins)||void 0===ee?void 0:ee.browsertab)||void 0===Me?void 0:Me.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Re("function"==typeof(null===(rt=null===(Ie=null==at?void 0:at.cordova)||void 0===Ie?void 0:Ie.InAppBrowser)||void 0===rt?void 0:rt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const Z=yield k._initialize(p);yield Z.initialized(),Z.resetRedirect(),function qo(){Ei.clear()}(),yield k._originValidation(p);const ee=function kc(y,p,g=null){return{type:p,eventId:g,urlResponse:null,sessionId:zy(),postBody:null,tenantId:y.tenantId,error:Bn(y,"no-auth-event")}}(p,w,D);yield function qf(y,p){return Rc()._set(wu(y),p)}(p,ee);const Me=yield function Jd(y,p,g){return Bf.apply(this,arguments)}(p,ee,g),Ie=yield function Wy(y){const{cordova:p}=co();return new Promise(g=>{p.plugins.browsertab.isAvailable(w=>{let D=null;w?p.plugins.browsertab.openUrl(y):D=p.InAppBrowser.open(y,function Ri(y=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(D)})})}(Me);return function Zf(y,p,g){return Hf.apply(this,arguments)}(p,Z,Ie)})()}_isIframeWebStorageSupported(p,g){throw new Error("Method not implemented.")}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Gy(y){return jf.apply(this,arguments)}(p)),this.originValidationPromises[g]}attachCallbackListeners(p,g){const{universalLinks:w,handleOpenURL:D,BuildInfo:k}=co(),Z=setTimeout((0,u.Z)(function*(){yield bm(p),g.onEvent(Im())}),500),ee=function(){var rt=(0,u.Z)(function*(at){clearTimeout(Z);const Ht=yield bm(p);let Yn=null;Ht&&(null==at?void 0:at.url)&&(Yn=function Xd(y,p){var g,w;const D=function Ky(y){const p=Tl(y),g=p.link?decodeURIComponent(p.link):void 0,w=Tl(g).link,D=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Tl(D).link||D||w||g||y}(p);if(D.includes("/__/auth/callback")){const k=Tl(D),Z=k.firebaseError?function Cm(y){try{return JSON.parse(y)}catch(p){return null}}(decodeURIComponent(k.firebaseError)):null,ee=null===(w=null===(g=null==Z?void 0:Z.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],Me=ee?Bn(ee):null;return Me?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Me,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:D,postBody:null}}return null}(Ht,at.url)),g.onEvent(Yn||Im())});return function(Ht){return rt.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,ee);const Me=D,Ie=`${k.packageName.toLowerCase()}://`;co().handleOpenURL=function(){var rt=(0,u.Z)(function*(at){if(at.toLowerCase().startsWith(Ie)&&ee({url:at}),"function"==typeof Me)try{Me(at)}catch(Ht){console.error(Ht)}});return function(at){return rt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ns,this._completeRedirectFn=fu,this._overrideRedirectResult=Go}_initialize(p){var g=this;return(0,u.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,g,w,D){var k=this;return(0,u.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openPopup(p,g,w,D)})()}_openRedirect(p,g,w,D){var k=this;return(0,u.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openRedirect(p,g,w,D)})()}_isIframeWebStorageSupported(p,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,g)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Am()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Qf(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,u.Z)(function*(){if(p.underlyingResolver)return;const g=yield function Sm(){return th.apply(this,arguments)}();p.underlyingResolver=g?p.cordovaResolver:p.browserResolver})()}}function km(y){return y.unwrap()}function Mc(y){return ih(y)}function ih(y){const{_tokenResponse:p}=y instanceof L.ZR?y.customData:y;if(!p)return null;if(!(y instanceof L.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return Rs.credentialFromResult(y);const g=p.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=Jt;break;case"facebook.com":w=So;break;case"github.com":w=Ja;break;case"twitter.com":w=ko;break;default:const{oauthIdToken:D,oauthAccessToken:k,oauthTokenSecret:Z,pendingToken:ee,nonce:Me}=p;return k||Z||D||ee?ee?g.startsWith("saml.")?Ds._create(g,ee):gi._fromParams({providerId:g,signInMethod:g,pendingToken:ee,idToken:D,accessToken:k}):new Pi(g).credential({idToken:D,accessToken:k,rawNonce:Me}):null}return y instanceof L.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function Br(y,p){return p.catch(g=>{throw g instanceof L.ZR&&function rh(y,p){var g,w;const D=null===(g=p.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=p)||void 0===w?void 0:w.code))p.resolver=new lb(y,function xa(y,p){var g;const w=(0,L.m9)(y),D=p;return Re(p.customData.operationType,w,"argument-error"),Re(null===(g=D.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),hc._fromError(w,D)}(y,p));else if(D){const k=ih(p),Z=p;k&&(Z.credential=k,Z.tenantId=D.tenantId||void 0,Z.email=D.email||void 0,Z.phoneNumber=D.phoneNumber||void 0)}}(y,g),g}).then(g=>{const D=g.user;return{operationType:g.operationType,credential:Mc(g),additionalUserInfo:ti(g),user:ii.getOrCreate(D)}})}function Nc(y,p){return sh.apply(this,arguments)}function sh(){return(sh=(0,u.Z)(function*(y,p){const g=yield p;return{verificationId:g.verificationId,confirm:w=>Br(y,g.confirm(w))}})).apply(this,arguments)}class lb{constructor(p,g){this.resolver=g,this.auth=function Rm(y){return y.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Br(km(this.auth),this.resolver.resolveSignIn(p))}}class ii{constructor(p){this._delegate=p,this.multiFactor=function fc(y){const p=(0,L.m9)(y);return ml.has(p)||ml.set(p,Ma._fromUser(p)),ml.get(p)}(p)}static getOrCreate(p){return ii.USER_MAP.has(p)||ii.USER_MAP.set(p,new ii(p)),ii.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var g=this;return(0,u.Z)(function*(){return Br(g.auth,lr(g._delegate,p))})()}linkWithPhoneNumber(p,g){var w=this;return(0,u.Z)(function*(){return Nc(w.auth,function wc(y,p,g){return Ho.apply(this,arguments)}(w._delegate,p,g))})()}linkWithPopup(p){var g=this;return(0,u.Z)(function*(){return Br(g.auth,function It(y,p,g){return gt.apply(this,arguments)}(g._delegate,p,ds))})()}linkWithRedirect(p){var g=this;return(0,u.Z)(function*(){return yield xm(jn(g.auth)),function wl(y,p,g){return function hm(y,p,g){return Nf.apply(this,arguments)}(y,p,g)}(g._delegate,p,ds)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var g=this;return(0,u.Z)(function*(){return Br(g.auth,Aa(g._delegate,p))})()}reauthenticateWithPhoneNumber(p,g){return Nc(this.auth,function ao(y,p,g){return Ec.apply(this,arguments)}(this._delegate,p,g))}reauthenticateWithPopup(p){return Br(this.auth,function ut(y,p,g){return Tt.apply(this,arguments)}(this._delegate,p,ds))}reauthenticateWithRedirect(p){var g=this;return(0,u.Z)(function*(){return yield xm(jn(g.auth)),function Mf(y,p,g){return function ls(y,p,g){return lo.apply(this,arguments)}(y,p,g)}(g._delegate,p,ds)})()}sendEmailVerification(p){return function tu(y,p){return dl.apply(this,arguments)}(this._delegate,p)}unlink(p){var g=this;return(0,u.Z)(function*(){return yield function Zt(y,p){return As.apply(this,arguments)}(g._delegate,p),g})()}updateEmail(p){return function im(y,p){return fl((0,L.m9)(y),p,null)}(this._delegate,p)}updatePassword(p){return function nu(y,p){return fl((0,L.m9)(y),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function Rf(y,p){return ks.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function hl(y,p){return Pd.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,g){return function Md(y,p,g){return dc.apply(this,arguments)}(this._delegate,p,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ii.USER_MAP=new WeakMap;const Al=Re;let Jf=(()=>{class y{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:D}=g.options;Al(D,"invalid-api-key",{appName:g.name}),Al(D,"invalid-api-key",{appName:g.name});const k="undefined"!=typeof window?ds:void 0;this._delegate=w.initialize({options:{persistence:Xf(D,g.name),popupRedirectResolver:k}}),this._delegate._updateErrorMap(di),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ii.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function yf(y,p,g){const w=jn(y);Re(w._canInitEmulator,w,"emulator-config-failed"),Re(/^https?:\/\//.test(p),w,"invalid-emulator-scheme");const D=!!(null==g?void 0:g.disableWarnings),k=Qg(p),{host:Z,port:ee}=function Ni(y){const p=Qg(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(p.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",D=/^(\[[^\]]+\])(:|$)/.exec(w);if(D){const k=D[1];return{host:k,port:yd(w.substr(k.length+1))}}{const[k,Z]=w.split(":");return{host:k,port:yd(Z)}}}(p);w.config.emulator={url:`${k}//${Z}${null===ee?"":`:${ee}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Z,port:ee,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:D})}),D||function Jg(){function y(){const p=document.createElement("p"),g=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,w)}applyActionCode(g){return function cc(y,p){return al.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Xl(this._delegate,g)}confirmPasswordReset(g,w){return function Sd(y,p,g){return Jl.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var D=this;return(0,u.Z)(function*(){return Br(D._delegate,function nm(y,p,g){return cl.apply(this,arguments)}(D._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function rm(y,p){return ro.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function eu(y,p){const g=Ts.parseLink(p);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,u.Z)(function*(){Al(Yf(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function Ic(y,p){return El.apply(this,arguments)}(g._delegate,ds);return w?Br(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function eh(y,p){jn(y)._logFramework(p)}(this._delegate,g)}onAuthStateChanged(g,w,D){const{next:k,error:Z,complete:ee}=jr(g,w,D);return this._delegate.onAuthStateChanged(k,Z,ee)}onIdTokenChanged(g,w,D){const{next:k,error:Z,complete:ee}=jr(g,w,D);return this._delegate.onIdTokenChanged(k,Z,ee)}sendSignInLinkToEmail(g,w){return function no(y,p,g){return gn.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function Ql(y,p,g){return ol.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,u.Z)(function*(){let D;switch(function iv(y,p){Ns(Object.values(bi).includes(p),y,"invalid-persistence-type"),(0,L.b$)()?Ns(p!==bi.SESSION,y,"unsupported-persistence-type"):(0,L.UG)()?Ns(p===bi.NONE,y,"unsupported-persistence-type"):Kf()?Ns(p===bi.NONE||p===bi.LOCAL&&(0,L.hl)(),y,"unsupported-persistence-type"):Ns(p===bi.NONE||Dm(),y,"unsupported-persistence-type")}(w._delegate,g),g){case bi.SESSION:D=ns;break;case bi.LOCAL:D=(yield Fn(jo)._isAvailable())?jo:ts;break;case bi.NONE:D=_r;break;default:return Yt("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(D)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Br(this._delegate,function Dd(y){return nl.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Br(this._delegate,Mo(this._delegate,g))}signInWithCustomToken(g){return Br(this._delegate,function Ad(y,p){return sl.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return Br(this._delegate,function En(y,p,g){return Mo((0,L.m9)(y),Xs.credential(p,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return Br(this._delegate,function If(y,p,g){return kd.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return Nc(this._delegate,function Lr(y,p,g){return oo.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,u.Z)(function*(){return Al(Yf(),w._delegate,"operation-not-supported-in-this-environment"),Br(w._delegate,function Se(y,p,g){return Ue.apply(this,arguments)}(w._delegate,g,ds))})()}signInWithRedirect(g){var w=this;return(0,u.Z)(function*(){return Al(Yf(),w._delegate,"operation-not-supported-in-this-environment"),yield xm(w._delegate),function ib(y,p,g){return function dm(y,p,g){return Cc.apply(this,arguments)}(y,p,g)}(w._delegate,g,ds)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function xd(y,p){return ul.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=bi,y})();function jr(y,p,g){let w=y;"function"!=typeof y&&({next:w,error:p,complete:g}=y);const D=w;return{next:Z=>D(Z&&ii.getOrCreate(Z)),error:p,complete:g}}function Xf(y,p){const g=function ab(y,p){const g=Ps();if(!g)return[];const w=an(cs,y,p);switch(g.getItem(w)){case bi.NONE:return[_r];case bi.LOCAL:return[jo,ns];case bi.SESSION:return[ns];default:return[]}}(y,p);if("undefined"!=typeof self&&!g.includes(jo)&&g.push(jo),"undefined"!=typeof window)for(const w of[ts,ns])g.includes(w)||g.push(w);return g.includes(_r)||g.push(_r),g}class Eu{constructor(){this.providerId="phone",this._delegate=new Rs(km(te.Z.auth()))}static credential(p,g){return Rs.credential(p,g)}verifyPhoneNumber(p,g){return this._delegate.verifyPhoneNumber(p,g)}unwrap(){return this._delegate}}Eu.PHONE_SIGN_IN_METHOD=Rs.PHONE_SIGN_IN_METHOD,Eu.PROVIDER_ID=Rs.PROVIDER_ID;const Sl=Re;class ho{constructor(p,g,w=te.Z.app()){var D;Sl(null===(D=w.options)||void 0===D?void 0:D.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Bd(p,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function sv(y){y.INTERNAL.registerComponent(new _t.wA("auth-compat",p=>{const g=p.getProvider("app-compat").getImmediate(),w=p.getProvider("auth");return new Jf(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Xs,FacebookAuthProvider:So,GithubAuthProvider:Ja,GoogleAuthProvider:Jt,OAuthProvider:Pi,SAMLAuthProvider:xo,PhoneAuthProvider:Eu,PhoneMultiFactorGenerator:Ac,RecaptchaVerifier:ho,TwitterAuthProvider:ko,Auth:Jf,AuthCredential:Wa,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.18")}(te.Z)},8306:(Je,ve,F)=>{F.d(ve,{y:()=>$});var u=F(930),te=F(727),L=F(8822),le=F(4671);var he=F(2416),ce=F(576),pe=F(2806);let $=(()=>{class De{constructor(je){je&&(this._subscribe=je)}lift(je){const Le=new De;return Le.source=this,Le.operator=je,Le}subscribe(je,Le,ne){const be=function $e(De){return De&&De instanceof u.Lv||function re(De){return De&&(0,ce.m)(De.next)&&(0,ce.m)(De.error)&&(0,ce.m)(De.complete)}(De)&&(0,te.Nn)(De)}(je)?je:new u.Hp(je,Le,ne);return(0,pe.x)(()=>{const{operator:Ve,source:Pe}=this;be.add(Ve?Ve.call(be,Pe):Pe?this._subscribe(be):this._trySubscribe(be))}),be}_trySubscribe(je){try{return this._subscribe(je)}catch(Le){je.error(Le)}}forEach(je,Le){return new(Le=z(Le))((ne,be)=>{let Ve;Ve=this.subscribe(Pe=>{try{je(Pe)}catch(ot){be(ot),null==Ve||Ve.unsubscribe()}},be,ne)})}_subscribe(je){var Le;return null===(Le=this.source)||void 0===Le?void 0:Le.subscribe(je)}[L.L](){return this}pipe(...je){return function we(De){return 0===De.length?le.y:1===De.length?De[0]:function(je){return De.reduce((Le,ne)=>ne(Le),je)}}(je)(this)}toPromise(je){return new(je=z(je))((Le,ne)=>{let be;this.subscribe(Ve=>be=Ve,Ve=>ne(Ve),()=>Le(be))})}}return De.create=Ze=>new De(Ze),De})();function z(De){var Ze;return null!==(Ze=null!=De?De:he.v.Promise)&&void 0!==Ze?Ze:Promise}},7579:(Je,ve,F)=>{F.d(ve,{x:()=>he});var u=F(8306),te=F(727);const le=(0,F(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=F(8737),we=F(2806);let he=(()=>{class pe extends u.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const re=new ce(this,this);return re.operator=z,re}_throwIfClosed(){if(this.closed)throw new le}next(z){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const re=this.observers.slice();for(const $e of re)$e.next(z)}})}error(z){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:re}=this;for(;re.length;)re.shift().error(z)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:re,isStopped:$e,observers:De}=this;return re||$e?te.Lc:(De.push(z),new te.w0(()=>(0,ue.P)(De,z)))}_checkFinalizedStatuses(z){const{hasError:re,thrownError:$e,isStopped:De}=this;re?z.error($e):De&&z.complete()}asObservable(){const z=new u.y;return z.source=this,z}}return pe.create=($,z)=>new ce($,z),pe})();class ce extends he{constructor($,z){super(),this.destination=$,this.source=z}next($){var z,re;null===(re=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===re||re.call(z,$)}error($){var z,re;null===(re=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===re||re.call(z,$)}complete(){var $,z;null===(z=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===z||z.call($)}_subscribe($){var z,re;return null!==(re=null===(z=this.source)||void 0===z?void 0:z.subscribe($))&&void 0!==re?re:te.Lc}}},930:(Je,ve,F)=>{F.d(ve,{Hp:()=>$e,Lv:()=>re});var u=F(576),te=F(727),L=F(2416),le=F(7849),ue=F(5032);const we=pe("C",void 0,void 0);function pe(ne,be,Ve){return{kind:ne,value:be,error:Ve}}var $=F(3410),z=F(2806);class re extends te.w0{constructor(be){super(),this.isStopped=!1,be?(this.destination=be,(0,te.Nn)(be)&&be.add(this)):this.destination=Le}static create(be,Ve,Pe){return new $e(be,Ve,Pe)}next(be){this.isStopped?je(function ce(ne){return pe("N",ne,void 0)}(be),this):this._next(be)}error(be){this.isStopped?je(function he(ne){return pe("E",void 0,ne)}(be),this):(this.isStopped=!0,this._error(be))}complete(){this.isStopped?je(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(be){this.destination.next(be)}_error(be){try{this.destination.error(be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class $e extends re{constructor(be,Ve,Pe){let ot;if(super(),(0,u.m)(be))ot=be;else if(be){let Ne;({next:ot,error:Ve,complete:Pe}=be),this&&L.v.useDeprecatedNextContext?(Ne=Object.create(be),Ne.unsubscribe=()=>this.unsubscribe()):Ne=be,ot=null==ot?void 0:ot.bind(Ne),Ve=null==Ve?void 0:Ve.bind(Ne),Pe=null==Pe?void 0:Pe.bind(Ne)}this.destination={next:ot?De(ot):ue.Z,error:De(null!=Ve?Ve:Ze),complete:Pe?De(Pe):ue.Z}}}function De(ne,be){return(...Ve)=>{try{ne(...Ve)}catch(Pe){L.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(Pe):(0,le.h)(Pe)}}}function Ze(ne){throw ne}function je(ne,be){const{onStoppedNotification:Ve}=L.v;Ve&&$.z.setTimeout(()=>Ve(ne,be))}const Le={closed:!0,next:ue.Z,error:Ze,complete:ue.Z}},727:(Je,ve,F)=>{F.d(ve,{Lc:()=>we,w0:()=>ue,Nn:()=>he});var u=F(576);const L=(0,F(3888).d)(pe=>function(z){pe(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((re,$e)=>`${$e+1}) ${re.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var le=F(8737);class ue{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const De of z)De.remove(this);else z.remove(this);const{initialTeardown:re}=this;if((0,u.m)(re))try{re()}catch(De){$=De instanceof L?De.errors:[De]}const{_teardowns:$e}=this;if($e){this._teardowns=null;for(const De of $e)try{ce(De)}catch(Ze){$=null!=$?$:[],Ze instanceof L?$=[...$,...Ze.errors]:$.push(Ze)}}if($)throw new L($)}}add($){var z;if($&&$!==this)if(this.closed)ce($);else{if($ instanceof ue){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._teardowns=null!==(z=this._teardowns)&&void 0!==z?z:[]).push($)}}_hasParent($){const{_parentage:z}=this;return z===$||Array.isArray(z)&&z.includes($)}_addParent($){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push($),z):z?[z,$]:$}_removeParent($){const{_parentage:z}=this;z===$?this._parentage=null:Array.isArray(z)&&(0,le.P)(z,$)}remove($){const{_teardowns:z}=this;z&&(0,le.P)(z,$),$ instanceof ue&&$._removeParent(this)}}ue.EMPTY=(()=>{const pe=new ue;return pe.closed=!0,pe})();const we=ue.EMPTY;function he(pe){return pe instanceof ue||pe&&"closed"in pe&&(0,u.m)(pe.remove)&&(0,u.m)(pe.add)&&(0,u.m)(pe.unsubscribe)}function ce(pe){(0,u.m)(pe)?pe():pe.unsubscribe()}},2416:(Je,ve,F)=>{F.d(ve,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Je,ve,F)=>{F.d(ve,{E:()=>te});const te=new(F(8306).y)(ue=>ue.complete())},8996:(Je,ve,F)=>{F.d(ve,{D:()=>ot});var u=F(8421),te=F(5363),L=F(9468),we=F(8306),ce=F(2202),pe=F(576),$=F(9672);function re(Ne,qe){if(!Ne)throw new Error("Iterable cannot be null");return new we.y(Ke=>{(0,$.f)(Ke,qe,()=>{const Ee=Ne[Symbol.asyncIterator]();(0,$.f)(Ke,qe,()=>{Ee.next().then(Y=>{Y.done?Ke.complete():Ke.next(Y.value)})},0,!0)})})}var $e=F(3670),De=F(8239),Ze=F(1144),je=F(6495),Le=F(2206),ne=F(4532),be=F(3260);function ot(Ne,qe){return qe?function Pe(Ne,qe){if(null!=Ne){if((0,$e.c)(Ne))return function le(Ne,qe){return(0,u.Xf)(Ne).pipe((0,L.R)(qe),(0,te.Q)(qe))}(Ne,qe);if((0,Ze.z)(Ne))return function he(Ne,qe){return new we.y(Ke=>{let Ee=0;return qe.schedule(function(){Ee===Ne.length?Ke.complete():(Ke.next(Ne[Ee++]),Ke.closed||this.schedule())})})}(Ne,qe);if((0,De.t)(Ne))return function ue(Ne,qe){return(0,u.Xf)(Ne).pipe((0,L.R)(qe),(0,te.Q)(qe))}(Ne,qe);if((0,Le.D)(Ne))return re(Ne,qe);if((0,je.T)(Ne))return function z(Ne,qe){return new we.y(Ke=>{let Ee;return(0,$.f)(Ke,qe,()=>{Ee=Ne[ce.h](),(0,$.f)(Ke,qe,()=>{let Y,X;try{({value:Y,done:X}=Ee.next())}catch(de){return void Ke.error(de)}X?Ke.complete():Ke.next(Y)},0,!0)}),()=>(0,pe.m)(null==Ee?void 0:Ee.return)&&Ee.return()})}(Ne,qe);if((0,be.L)(Ne))return function Ve(Ne,qe){return re((0,be.Q)(Ne),qe)}(Ne,qe)}throw(0,ne.z)(Ne)}(Ne,qe):(0,u.Xf)(Ne)}},8421:(Je,ve,F)=>{F.d(ve,{Xf:()=>$e});var u=F(5987),te=F(1144),L=F(8239),le=F(8306),ue=F(3670),we=F(2206),he=F(4532),ce=F(6495),pe=F(3260),$=F(576),z=F(7849),re=F(8822);function $e(Pe){if(Pe instanceof le.y)return Pe;if(null!=Pe){if((0,ue.c)(Pe))return function De(Pe){return new le.y(ot=>{const Ne=Pe[re.L]();if((0,$.m)(Ne.subscribe))return Ne.subscribe(ot);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Pe);if((0,te.z)(Pe))return function Ze(Pe){return new le.y(ot=>{for(let Ne=0;Ne<Pe.length&&!ot.closed;Ne++)ot.next(Pe[Ne]);ot.complete()})}(Pe);if((0,L.t)(Pe))return function je(Pe){return new le.y(ot=>{Pe.then(Ne=>{ot.closed||(ot.next(Ne),ot.complete())},Ne=>ot.error(Ne)).then(null,z.h)})}(Pe);if((0,we.D)(Pe))return ne(Pe);if((0,ce.T)(Pe))return function Le(Pe){return new le.y(ot=>{for(const Ne of Pe)if(ot.next(Ne),ot.closed)return;ot.complete()})}(Pe);if((0,pe.L)(Pe))return function be(Pe){return ne((0,pe.Q)(Pe))}(Pe)}throw(0,he.z)(Pe)}function ne(Pe){return new le.y(ot=>{(function Ve(Pe,ot){var Ne,qe,Ke,Ee;return(0,u.mG)(this,void 0,void 0,function*(){try{for(Ne=(0,u.KL)(Pe);!(qe=yield Ne.next()).done;)if(ot.next(qe.value),ot.closed)return}catch(Y){Ke={error:Y}}finally{try{qe&&!qe.done&&(Ee=Ne.return)&&(yield Ee.call(Ne))}finally{if(Ke)throw Ke.error}}ot.complete()})})(Pe,ot).catch(Ne=>ot.error(Ne))})}},6451:(Je,ve,F)=>{F.d(ve,{T:()=>we});var u=F(8189),te=F(8421),L=F(515),le=F(3269),ue=F(8996);function we(...he){const ce=(0,le.yG)(he),pe=(0,le._6)(he,1/0),$=he;return $.length?1===$.length?(0,te.Xf)($[0]):(0,u.J)(pe)((0,ue.D)($,ce)):L.E}},5403:(Je,ve,F)=>{F.d(ve,{Q:()=>te});var u=F(930);class te extends u.Lv{constructor(le,ue,we,he,ce){super(le),this.onFinalize=ce,this._next=ue?function(pe){try{ue(pe)}catch($){le.error($)}}:super._next,this._error=he?function(pe){try{he(pe)}catch($){le.error($)}finally{this.unsubscribe()}}:super._error,this._complete=we?function(){try{we()}catch(pe){le.error(pe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;const{closed:ue}=this;super.unsubscribe(),!ue&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}},4004:(Je,ve,F)=>{F.d(ve,{U:()=>L});var u=F(4482),te=F(5403);function L(le,ue){return(0,u.e)((we,he)=>{let ce=0;we.subscribe(new te.Q(he,pe=>{he.next(le.call(ue,pe,ce++))}))})}},8189:(Je,ve,F)=>{F.d(ve,{J:()=>L});var u=F(5577),te=F(4671);function L(le=1/0){return(0,u.z)(te.y,le)}},5577:(Je,ve,F)=>{F.d(ve,{z:()=>ce});var u=F(4004),te=F(8421),L=F(4482),le=F(9672),ue=F(5403),he=F(576);function ce(pe,$,z=1/0){return(0,he.m)($)?ce((re,$e)=>(0,u.U)((De,Ze)=>$(re,De,$e,Ze))((0,te.Xf)(pe(re,$e))),z):("number"==typeof $&&(z=$),(0,L.e)((re,$e)=>function we(pe,$,z,re,$e,De,Ze,je){const Le=[];let ne=0,be=0,Ve=!1;const Pe=()=>{Ve&&!Le.length&&!ne&&$.complete()},ot=qe=>ne<re?Ne(qe):Le.push(qe),Ne=qe=>{De&&$.next(qe),ne++;let Ke=!1;(0,te.Xf)(z(qe,be++)).subscribe(new ue.Q($,Ee=>{null==$e||$e(Ee),De?ot(Ee):$.next(Ee)},()=>{Ke=!0},void 0,()=>{if(Ke)try{for(ne--;Le.length&&ne<re;){const Ee=Le.shift();Ze?(0,le.f)($,Ze,()=>Ne(Ee)):Ne(Ee)}Pe()}catch(Ee){$.error(Ee)}}))};return pe.subscribe(new ue.Q($,ot,()=>{Ve=!0,Pe()})),()=>{null==je||je()}}(re,$e,pe,z)))}},5363:(Je,ve,F)=>{F.d(ve,{Q:()=>le});var u=F(9672),te=F(4482),L=F(5403);function le(ue,we=0){return(0,te.e)((he,ce)=>{he.subscribe(new L.Q(ce,pe=>(0,u.f)(ce,ue,()=>ce.next(pe),we),()=>(0,u.f)(ce,ue,()=>ce.complete(),we),pe=>(0,u.f)(ce,ue,()=>ce.error(pe),we)))})}},3099:(Je,ve,F)=>{F.d(ve,{B:()=>we});var u=F(8996),te=F(5698),L=F(7579),le=F(930),ue=F(4482);function we(ce={}){const{connector:pe=(()=>new L.x),resetOnError:$=!0,resetOnComplete:z=!0,resetOnRefCountZero:re=!0}=ce;return $e=>{let De=null,Ze=null,je=null,Le=0,ne=!1,be=!1;const Ve=()=>{null==Ze||Ze.unsubscribe(),Ze=null},Pe=()=>{Ve(),De=je=null,ne=be=!1},ot=()=>{const Ne=De;Pe(),null==Ne||Ne.unsubscribe()};return(0,ue.e)((Ne,qe)=>{Le++,!be&&!ne&&Ve();const Ke=je=null!=je?je:pe();qe.add(()=>{Le--,0===Le&&!be&&!ne&&(Ze=he(ot,re))}),Ke.subscribe(qe),De||(De=new le.Hp({next:Ee=>Ke.next(Ee),error:Ee=>{be=!0,Ve(),Ze=he(Pe,$,Ee),Ke.error(Ee)},complete:()=>{ne=!0,Ve(),Ze=he(Pe,z),Ke.complete()}}),(0,u.D)(Ne).subscribe(De))})($e)}}function he(ce,pe,...$){return!0===pe?(ce(),null):!1===pe?null:pe(...$).pipe((0,te.q)(1)).subscribe(()=>ce())}},9468:(Je,ve,F)=>{F.d(ve,{R:()=>te});var u=F(4482);function te(L,le=0){return(0,u.e)((ue,we)=>{we.add(L.schedule(()=>ue.subscribe(we),le))})}},5698:(Je,ve,F)=>{F.d(ve,{q:()=>le});var u=F(515),te=F(4482),L=F(5403);function le(ue){return ue<=0?()=>u.E:(0,te.e)((we,he)=>{let ce=0;we.subscribe(new L.Q(he,pe=>{++ce<=ue&&(he.next(pe),ue<=ce&&he.complete())}))})}},8505:(Je,ve,F)=>{F.d(ve,{b:()=>ue});var u=F(576),te=F(4482),L=F(5403),le=F(4671);function ue(we,he,ce){const pe=(0,u.m)(we)||he||ce?{next:we,error:he,complete:ce}:we;return pe?(0,te.e)(($,z)=>{var re;null===(re=pe.subscribe)||void 0===re||re.call(pe);let $e=!0;$.subscribe(new L.Q(z,De=>{var Ze;null===(Ze=pe.next)||void 0===Ze||Ze.call(pe,De),z.next(De)},()=>{var De;$e=!1,null===(De=pe.complete)||void 0===De||De.call(pe),z.complete()},De=>{var Ze;$e=!1,null===(Ze=pe.error)||void 0===Ze||Ze.call(pe,De),z.error(De)},()=>{var De,Ze;$e&&(null===(De=pe.unsubscribe)||void 0===De||De.call(pe)),null===(Ze=pe.finalize)||void 0===Ze||Ze.call(pe)}))}):le.y}},4408:(Je,ve,F)=>{F.d(ve,{o:()=>ue});var u=F(727);class te extends u.w0{constructor(he,ce){super()}schedule(he,ce=0){return this}}const L={setInterval(...we){const{delegate:he}=L;return((null==he?void 0:he.setInterval)||setInterval)(...we)},clearInterval(we){const{delegate:he}=L;return((null==he?void 0:he.clearInterval)||clearInterval)(we)},delegate:void 0};var le=F(8737);class ue extends te{constructor(he,ce){super(he,ce),this.scheduler=he,this.work=ce,this.pending=!1}schedule(he,ce=0){if(this.closed)return this;this.state=he;const pe=this.id,$=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId($,pe,ce)),this.pending=!0,this.delay=ce,this.id=this.id||this.requestAsyncId($,this.id,ce),this}requestAsyncId(he,ce,pe=0){return L.setInterval(he.flush.bind(he,this),pe)}recycleAsyncId(he,ce,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return ce;L.clearInterval(ce)}execute(he,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(he,ce);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,ce){let $,pe=!1;try{this.work(he)}catch(z){pe=!0,$=z||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:he,scheduler:ce}=this,{actions:pe}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(pe,this),null!=he&&(this.id=this.recycleAsyncId(ce,he,null)),this.delay=null,super.unsubscribe()}}}},7565:(Je,ve,F)=>{F.d(ve,{v:()=>L});var u=F(6063);class te{constructor(ue,we=te.now){this.schedulerActionCtor=ue,this.now=we}schedule(ue,we=0,he){return new this.schedulerActionCtor(this,ue).schedule(he,we)}}te.now=u.l.now;class L extends te{constructor(ue,we=te.now){super(ue,we),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ue){const{actions:we}=this;if(this._active)return void we.push(ue);let he;this._active=!0;do{if(he=ue.execute(ue.state,ue.delay))break}while(ue=we.shift());if(this._active=!1,he){for(;ue=we.shift();)ue.unsubscribe();throw he}}}},4986:(Je,ve,F)=>{F.d(ve,{P:()=>le,z:()=>L});var u=F(4408);const L=new(F(7565).v)(u.o),le=L},6063:(Je,ve,F)=>{F.d(ve,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},3410:(Je,ve,F)=>{F.d(ve,{z:()=>u});const u={setTimeout(...te){const{delegate:L}=u;return((null==L?void 0:L.setTimeout)||setTimeout)(...te)},clearTimeout(te){const{delegate:L}=u;return((null==L?void 0:L.clearTimeout)||clearTimeout)(te)},delegate:void 0}},2202:(Je,ve,F)=>{F.d(ve,{h:()=>te});const te=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Je,ve,F)=>{F.d(ve,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(Je,ve,F)=>{F.d(ve,{_6:()=>we,jO:()=>le,yG:()=>ue});var u=F(576),te=F(3532);function L(he){return he[he.length-1]}function le(he){return(0,u.m)(L(he))?he.pop():void 0}function ue(he){return(0,te.K)(L(he))?he.pop():void 0}function we(he,ce){return"number"==typeof L(he)?he.pop():ce}},8737:(Je,ve,F)=>{function u(te,L){if(te){const le=te.indexOf(L);0<=le&&te.splice(le,1)}}F.d(ve,{P:()=>u})},3888:(Je,ve,F)=>{function u(te){const le=te(ue=>{Error.call(ue),ue.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}F.d(ve,{d:()=>u})},2806:(Je,ve,F)=>{F.d(ve,{O:()=>le,x:()=>L});var u=F(2416);let te=null;function L(ue){if(u.v.useDeprecatedSynchronousErrorHandling){const we=!te;if(we&&(te={errorThrown:!1,error:null}),ue(),we){const{errorThrown:he,error:ce}=te;if(te=null,he)throw ce}}else ue()}function le(ue){u.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=ue)}},9672:(Je,ve,F)=>{function u(te,L,le,ue=0,we=!1){const he=L.schedule(function(){le(),we?te.add(this.schedule(null,ue)):this.unsubscribe()},ue);if(te.add(he),!we)return he}F.d(ve,{f:()=>u})},4671:(Je,ve,F)=>{function u(te){return te}F.d(ve,{y:()=>u})},1144:(Je,ve,F)=>{F.d(ve,{z:()=>u});const u=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(Je,ve,F)=>{F.d(ve,{D:()=>te});var u=F(576);function te(L){return Symbol.asyncIterator&&(0,u.m)(null==L?void 0:L[Symbol.asyncIterator])}},576:(Je,ve,F)=>{function u(te){return"function"==typeof te}F.d(ve,{m:()=>u})},3670:(Je,ve,F)=>{F.d(ve,{c:()=>L});var u=F(8822),te=F(576);function L(le){return(0,te.m)(le[u.L])}},6495:(Je,ve,F)=>{F.d(ve,{T:()=>L});var u=F(2202),te=F(576);function L(le){return(0,te.m)(null==le?void 0:le[u.h])}},8239:(Je,ve,F)=>{F.d(ve,{t:()=>te});var u=F(576);function te(L){return(0,u.m)(null==L?void 0:L.then)}},3260:(Je,ve,F)=>{F.d(ve,{L:()=>le,Q:()=>L});var u=F(5987),te=F(576);function L(ue){return(0,u.FC)(this,arguments,function*(){const he=ue.getReader();try{for(;;){const{value:ce,done:pe}=yield(0,u.qq)(he.read());if(pe)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(ce)}}finally{he.releaseLock()}})}function le(ue){return(0,te.m)(null==ue?void 0:ue.getReader)}},3532:(Je,ve,F)=>{F.d(ve,{K:()=>te});var u=F(576);function te(L){return L&&(0,u.m)(L.schedule)}},4482:(Je,ve,F)=>{F.d(ve,{A:()=>te,e:()=>L});var u=F(576);function te(le){return(0,u.m)(null==le?void 0:le.lift)}function L(le){return ue=>{if(te(ue))return ue.lift(function(we){try{return le(we,this)}catch(he){this.error(he)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Je,ve,F)=>{function u(){}F.d(ve,{Z:()=>u})},7849:(Je,ve,F)=>{F.d(ve,{h:()=>L});var u=F(2416),te=F(3410);function L(le){te.z.setTimeout(()=>{const{onUnhandledError:ue}=u.v;if(!ue)throw le;ue(le)})}},4532:(Je,ve,F)=>{function u(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(ve,{z:()=>u})},5987:(Je,ve,F)=>{function ce(Y,X,de,ye){return new(de||(de=Promise))(function(se,_t){function Ut(qt){try{yt(ye.next(qt))}catch(Ct){_t(Ct)}}function vn(qt){try{yt(ye.throw(qt))}catch(Ct){_t(Ct)}}function yt(qt){qt.done?se(qt.value):function xe(se){return se instanceof de?se:new de(function(_t){_t(se)})}(qt.value).then(Ut,vn)}yt((ye=ye.apply(Y,X||[])).next())})}function Le(Y){return this instanceof Le?(this.v=Y,this):new Le(Y)}function ne(Y,X,de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xe,ye=de.apply(Y,X||[]),se=[];return xe={},_t("next"),_t("throw"),_t("return"),xe[Symbol.asyncIterator]=function(){return this},xe;function _t(sn){ye[sn]&&(xe[sn]=function(or){return new Promise(function(di,dn){se.push([sn,or,di,dn])>1||Ut(sn,or)})})}function Ut(sn,or){try{!function vn(sn){sn.value instanceof Le?Promise.resolve(sn.value.v).then(yt,qt):Ct(se[0][2],sn)}(ye[sn](or))}catch(di){Ct(se[0][3],di)}}function yt(sn){Ut("next",sn)}function qt(sn){Ut("throw",sn)}function Ct(sn,or){sn(or),se.shift(),se.length&&Ut(se[0][0],se[0][1])}}function Ve(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,X=Y[Symbol.asyncIterator];return X?X.call(Y):(Y=function re(Y){var X="function"==typeof Symbol&&Symbol.iterator,de=X&&Y[X],ye=0;if(de)return de.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&ye>=Y.length&&(Y=void 0),{value:Y&&Y[ye++],done:!Y}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),de={},ye("next"),ye("throw"),ye("return"),de[Symbol.asyncIterator]=function(){return this},de);function ye(se){de[se]=Y[se]&&function(_t){return new Promise(function(Ut,vn){!function xe(se,_t,Ut,vn){Promise.resolve(vn).then(function(yt){se({value:yt,done:Ut})},_t)}(Ut,vn,(_t=Y[se](_t)).done,_t.value)})}}}F.d(ve,{FC:()=>ne,KL:()=>Ve,mG:()=>ce,qq:()=>Le})},5e3:(Je,ve,F)=>{F.d(ve,{$8M:()=>Kt,$Z:()=>iC,AFp:()=>jh,ALo:()=>Jp,AaK:()=>ce,BQk:()=>l0,CHM:()=>As,CRH:()=>mI,CZH:()=>ed,CqO:()=>lC,EJc:()=>UI,EpF:()=>oC,F4k:()=>aC,FYo:()=>Fh,FiY:()=>ut,G48:()=>lS,GfV:()=>$p,Gpc:()=>z,JOm:()=>Ps,LFG:()=>pt,LSH:()=>co,Lbi:()=>bw,MAs:()=>t_,NdJ:()=>u_,O4$:()=>eu,OlP:()=>pn,Oqu:()=>kp,PXZ:()=>ZI,Q6J:()=>s0,QGY:()=>u0,Qsj:()=>pA,R0b:()=>js,RDi:()=>oc,Rgc:()=>tg,SBq:()=>wo,Sil:()=>Iw,Suo:()=>gI,TTD:()=>Js,TgZ:()=>bp,VLi:()=>oS,W1O:()=>wI,X6Q:()=>Nw,XFs:()=>ct,Xpm:()=>mt,Y36:()=>Ep,YKP:()=>bA,YNc:()=>vp,Yjl:()=>_a,Yz7:()=>dn,ZZ4:()=>qh,_Bn:()=>uA,_UZ:()=>sC,_Vd:()=>Hp,_c5:()=>qw,_uU:()=>Bu,aQg:()=>gg,c2e:()=>LI,cJS:()=>Gn,cg1:()=>Lp,dDg:()=>B_,deG:()=>pc,dqk:()=>wt,eFA:()=>$I,ekj:()=>g_,g9A:()=>FI,h0i:()=>zp,hGG:()=>vS,hij:()=>Rp,iGM:()=>gw,ifc:()=>et,ip1:()=>L_,kL8:()=>PC,kcU:()=>kd,lG2:()=>ma,lcZ:()=>D_,n5z:()=>so,oAB:()=>hi,oxw:()=>Cp,q4F:()=>sI,qLn:()=>zo,qOj:()=>Hc,qZA:()=>l_,s9C:()=>d0,sBO:()=>Ow,sIi:()=>vh,s_b:()=>ng,soG:()=>U_,tBr:()=>Ue,tb:()=>Cw,tp0:()=>It,uIk:()=>Gv,vHH:()=>Ze,vpe:()=>Bs,wAp:()=>Et,xi3:()=>uI,xp6:()=>cv,ynx:()=>a0,z2F:()=>$h,zSh:()=>Rl,zs3:()=>po});var u=F(7579),te=F(727),L=F(8306),le=F(6451),ue=F(3099);function we(s){for(let o in s)if(s[o]===we)return o;throw Error("Could not find renamed property on target object.")}function he(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function ce(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ce).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function pe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const $=we({__forward_ref__:we});function z(s){return s.__forward_ref__=z,s.toString=function(){return ce(this())},s}function re(s){return $e(s)?s():s}function $e(s){return"function"==typeof s&&s.hasOwnProperty($)&&s.__forward_ref__===z}class Ze extends Error{constructor(o,l){super(function Le(s,o){return`${s?`NG0${s}: `:""}${o}`}(o,l)),this.code=o}}function ne(s){return"string"==typeof s?s:null==s?"":String(s)}function be(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ne(s)}function Ne(s,o){const l=o?` in ${o}`:"";throw new Ze("201",`No provider for ${be(s)} found${l}`)}function qt(s,o){null==s&&function Ct(s,o,l,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${l} ${d} ${o} <=Actual]`))}(o,s,null,"!=")}function dn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Gn(s){return{providers:s.providers||[],imports:s.imports||[]}}function zi(s){return Tr(s,Yr)||Tr(s,Re)}function Tr(s,o){return s.hasOwnProperty(o)?s[o]:null}function Do(s){return s&&(s.hasOwnProperty(fr)||s.hasOwnProperty(pr))?s[fr]:null}const Yr=we({\u0275prov:we}),fr=we({\u0275inj:we}),Re=we({ngInjectableDef:we}),pr=we({ngInjectorDef:we});var ct=(()=>((ct=ct||{})[ct.Default=0]="Default",ct[ct.Host=1]="Host",ct[ct.Self=2]="Self",ct[ct.SkipSelf=4]="SkipSelf",ct[ct.Optional=8]="Optional",ct))();let Cn;function gr(s){const o=Cn;return Cn=s,o}function Ki(s,o,l){const d=zi(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&ct.Optional?null:void 0!==o?o:void Ne(ce(s),"Injector")}function Wn(s){return{toString:s}.toString()}var wn=(()=>((wn=wn||{})[wn.OnPush=0]="OnPush",wn[wn.Default=1]="Default",wn))(),et=(()=>{return(s=et||(et={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",et;var s})();const vt="undefined"!=typeof globalThis&&globalThis,zs="undefined"!=typeof window&&window,ki="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,wt=vt||"undefined"!=typeof global&&global||zs||ki,Wt={},Gt=[],H=we({\u0275cmp:we}),W=we({\u0275dir:we}),B=we({\u0275pipe:we}),K=we({\u0275mod:we}),q=we({\u0275fac:we}),Te=we({__NG_ELEMENT_ID__:we});let Ge=0;function mt(s){return Wn(()=>{const l={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===wn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||Gt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||et.Emulated,id:"c",styles:s.styles||Gt,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,m=s.features,v=s.pipes;return d.id+=Ge++,d.inputs=ga(s.inputs,l),d.outputs=ga(s.outputs),m&&m.forEach(b=>b(d)),d.directiveDefs=h?()=>("function"==typeof h?h():h).map(hn):null,d.pipeDefs=v?()=>("function"==typeof v?v():v).map(Xr):null,d})}function hn(s){return Xn(s)||function ar(s){return s[W]||null}(s)}function Xr(s){return function Or(s){return s[B]||null}(s)}const Vt={};function hi(s){return Wn(()=>{const o={type:s.type,bootstrap:s.bootstrap||Gt,declarations:s.declarations||Gt,imports:s.imports||Gt,exports:s.exports||Gt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Vt[s.id]=s.type),o})}function ga(s,o){if(null==s)return Wt;const l={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),l[h]=d,o&&(o[h]=m)}return l}const ma=mt;function _a(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Xn(s){return s[H]||null}function mr(s,o){const l=s[K]||null;if(!l&&!0===o)throw new Error(`Type ${ce(s)} does not have '\u0275mod' property.`);return l}function Es(s){return Array.isArray(s)&&"object"==typeof s[1]}function Mi(s){return Array.isArray(s)&&!0===s[1]}function _f(s){return 0!=(8&s.flags)}function Qs(s){return 2==(2&s.flags)}function jn(s){return 1==(1&s.flags)}function pi(s){return null!==s.template}function yf(s){return 0!=(512&s[2])}function Qi(s,o){return s.hasOwnProperty(q)?s[q]:null}class ic{constructor(o,l,d){this.previousValue=o,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function Js(){return bd}function bd(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ya),Cd}function Cd(){const s=bs(this),o=null==s?void 0:s.current;if(o){const l=s.previous;if(l===Wt)s.previous=o;else for(let d in o)l[d]=o[d];s.current=null,this.ngOnChanges(o)}}function Ya(s,o,l,d){const h=bs(s)||function Cs(s,o){return s[Ji]=o}(s,{previous:Wt,current:null}),m=h.current||(h.current={}),v=h.previous,b=this.declaredInputs[l],C=v[b];m[b]=new ic(C&&C.currentValue,o,v===Wt),s[d]=o}Js.ngInherit=!0;const Ji="__ngSimpleChanges__";function bs(s){return s[Ji]||null}const Td="http://www.w3.org/2000/svg";let Wl;function oc(s){Wl=s}function Qt(s){return!!s.listen}const Is={createRenderer:(s,o)=>function ac(){return void 0!==Wl?Wl:"undefined"!=typeof document?document:void 0}()};function Un(s){for(;Array.isArray(s);)s=s[0];return s}function Xs(s,o){return Un(o[s])}function Tn(s,o){return Un(o[s.index])}function Pi(s,o){return s.data[o]}function So(s,o){return s[o]}function Jt(s,o){const l=o[s];return Es(l)?l:l[0]}function Ja(s){return 4==(4&s[2])}function Xa(s){return 128==(128&s[2])}function ei(s,o){return null==o?null:s[o]}function xo(s){s[18]=0}function ko(s,o){s[5]+=o;let l=s,d=s[3];for(;null!==d&&(1===o&&1===l[5]||-1===o&&0===l[5]);)d[5]+=o,l=d,d=d[3]}const ft={lFrame:Xl(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function nl(){return ft.bindingsEnabled}function Ae(){return ft.lFrame.lView}function Zt(){return ft.lFrame.tView}function As(s){return ft.lFrame.contextLView=s,s[8]}function Dn(){let s=rl();for(;null!==s&&64===s.type;)s=s.parent;return s}function rl(){return ft.lFrame.currentTNode}function vr(s,o){const l=ft.lFrame;l.currentTNode=s,l.isParent=o}function Kl(){return ft.lFrame.isParent}function Ro(){ft.lFrame.isParent=!1}function Mo(){return ft.isInCheckNoChangesMode}function No(s){ft.isInCheckNoChangesMode=s}function lr(){const s=ft.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function to(){return ft.lFrame.bindingIndex++}function sl(s,o){const l=ft.lFrame;l.bindingIndex=l.bindingRootIndex=s,Po(o)}function Po(s){ft.lFrame.currentDirectiveIndex=s}function Ql(){return ft.lFrame.currentQueryIndex}function ol(s){ft.lFrame.currentQueryIndex=s}function Sd(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Jl(s,o,l){if(l&ct.SkipSelf){let h=o,m=s;for(;!(h=h.parent,null!==h||l&ct.Host||(h=Sd(m),null===h||(m=m[15],10&h.type))););if(null===h)return!1;o=h,s=m}const d=ft.lFrame=al();return d.currentTNode=o,d.lView=s,!0}function cc(s){const o=al(),l=s[1];ft.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function al(){const s=ft.lFrame,o=null===s?null:s.child;return null===o?Xl(s):o}function Xl(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function ll(){const s=ft.lFrame;return ft.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const xd=ll;function ul(){const s=ll();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function En(){return ft.lFrame.selectedIndex}function no(s){ft.lFrame.selectedIndex=s}function gn(){const s=ft.lFrame;return Pi(s.tView,s.selectedIndex)}function eu(){ft.lFrame.currentNamespace=Td}function kd(){!function Rd(){ft.lFrame.currentNamespace=null}()}function ro(s,o){for(let l=o.directiveStart,d=o.directiveEnd;l<d;l++){const m=s.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:b,ngAfterViewInit:C,ngAfterViewChecked:x,ngOnDestroy:R}=m;v&&(s.contentHooks||(s.contentHooks=[])).push(-l,v),b&&((s.contentHooks||(s.contentHooks=[])).push(l,b),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,b)),C&&(s.viewHooks||(s.viewHooks=[])).push(-l,C),x&&((s.viewHooks||(s.viewHooks=[])).push(l,x),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,x)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(l,R)}}function tu(s,o,l){dc(s,o,3,l)}function dl(s,o,l,d){(3&s[2])===l&&dc(s,o,l,d)}function Md(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function dc(s,o,l,d){const m=null!=d?d:-1,v=o.length-1;let b=0;for(let C=void 0!==d?65535&s[18]:0;C<v;C++)if("number"==typeof o[C+1]){if(b=o[C],null!=d&&b>=d)break}else o[C]<0&&(s[18]+=65536),(b<m||-1==m)&&(Nd(s,l,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Nd(s,o,l,d){const h=l[d]<0,m=l[d+1],b=s[h?-l[d]:l[d]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{m.call(b)}finally{}}}else try{m.call(b)}finally{}}class hl{constructor(o,l,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function en(s,o,l){const d=Qt(s);let h=0;for(;h<l.length;){const m=l[h];if("number"==typeof m){if(0!==m)break;h++;const v=l[h++],b=l[h++],C=l[h++];d?s.setAttribute(o,b,C,v):o.setAttributeNS(v,b,C)}else{const v=m,b=l[++h];tt(v)?d&&s.setProperty(o,v,b):d?s.setAttribute(o,v,b):o.setAttribute(v,b),h++}}return h}function io(s){return 3===s||4===s||6===s}function tt(s){return 64===s.charCodeAt(0)}function mi(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let d=0;d<o.length;d++){const h=o[d];"number"==typeof h?l=h:0===l||ti(s,l,h,null,-1===l||2===l?o[++d]:null)}}return s}function ti(s,o,l,d,h){let m=0,v=s.length;if(-1===o)v=-1;else for(;m<s.length;){const b=s[m++];if("number"==typeof b){if(b===o){v=-1;break}if(b>o){v=m-1;break}}}for(;m<s.length;){const b=s[m];if("number"==typeof b)break;if(b===l){if(null===d)return void(null!==h&&(s[m+1]=h));if(d===s[m+1])return void(s[m+2]=h)}m++,null!==d&&m++,null!==h&&m++}-1!==v&&(s.splice(v,0,o),m=v+1),s.splice(m++,0,l),null!==d&&s.splice(m++,0,d),null!==h&&s.splice(m++,0,h)}function er(s){return-1!==s}function Sa(s){return 32767&s}function gl(s,o){let l=function om(s){return s>>16}(s),d=o;for(;l>0;)d=d[15],l--;return d}let ru=!0;function iu(s){const o=ru;return ru=s,o}let Lo=0;function xa(s,o){const l=Zn(s,o);if(-1!==l)return l;const d=o[1];d.firstCreatePass&&(s.injectorIndex=o.length,ka(d.data,s),ka(o,null),ka(d.blueprint,null));const h=Ra(s,o),m=s.injectorIndex;if(er(h)){const v=Sa(h),b=gl(h,o),C=b[1].data;for(let x=0;x<8;x++)o[m+x]=b[v+x]|C[v+x]}return o[m+8]=h,m}function ka(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Zn(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Ra(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,d=null,h=o;for(;null!==h;){const m=h[1],v=m.type;if(d=2===v?m.declTNode:1===v?h[6]:null,null===d)return-1;if(l++,h=h[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function Ma(s,o,l){!function hc(s,o,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(Te)&&(d=l[Te]),null==d&&(d=l[Te]=Lo++);const h=255&d;o.data[s+(h>>5)]|=1<<h}(s,o,l)}function fc(s,o,l){if(l&ct.Optional)return s;Ne(o,"NodeInjector")}function Uo(s,o,l,d){if(l&ct.Optional&&void 0===d&&(d=null),0==(l&(ct.Self|ct.Host))){const h=s[9],m=gr(void 0);try{return h?h.get(o,d,l&ct.Optional):Ki(o,d,l&ct.Optional)}finally{gr(m)}}return fc(d,o,l)}function Na(s,o,l,d=ct.Default,h){if(null!==s){const m=function Pa(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Te)?s[Te]:void 0;return"number"==typeof o?o>=0?255&o:Af:o}(l);if("function"==typeof m){if(!Jl(o,s,d))return d&ct.Host?fc(h,l,d):Uo(o,l,d,h);try{const v=m(d);if(null!=v||d&ct.Optional)return v;Ne(l)}finally{xd()}}else if("number"==typeof m){let v=null,b=Zn(s,o),C=-1,x=d&ct.Host?o[16][6]:null;for((-1===b||d&ct.SkipSelf)&&(C=-1===b?Ra(s,o):o[b+8],-1!==C&&Kn(d,!1)?(v=o[1],b=Sa(C),o=gl(C,o)):b=-1);-1!==b;){const R=o[1];if(ns(m,b,R.data)){const U=_l(b,o,l,v,d,x);if(U!==Vo)return U}C=o[b+8],-1!==C&&Kn(d,o[1].data[b+8]===x)&&ns(m,b,o)?(v=R,b=Sa(C),o=gl(C,o)):b=-1}}}return Uo(o,l,d,h)}const Vo={};function Af(){return new Bo(Dn(),Ae())}function _l(s,o,l,d,h,m){const v=o[1],b=v.data[s+8],R=Ss(b,v,l,null==d?Qs(b)&&ru:d!=v&&0!=(3&b.type),h&ct.Host&&m===b);return null!==R?ts(o,v,R,b):Vo}function Ss(s,o,l,d,h){const m=s.providerIndexes,v=o.data,b=1048575&m,C=s.directiveStart,R=m>>20,G=h?b+R:s.directiveEnd;for(let J=d?b:b+R;J<G;J++){const me=v[J];if(J<C&&l===me||J>=C&&me.type===l)return J}if(h){const J=v[C];if(J&&pi(J)&&J.type===l)return C}return null}function ts(s,o,l,d){let h=s[l];const m=o.data;if(function Pd(s){return s instanceof hl}(h)){const v=h;v.resolving&&function Ve(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ze("200",`Circular dependency in DI detected for ${s}${l}`)}(be(m[l]));const b=iu(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?gr(v.injectImpl):null;Jl(s,d,ct.Default);try{h=s[l]=v.factory(void 0,m,s,d),o.firstCreatePass&&l>=d.directiveStart&&function rm(s,o,l){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:m}=o.type.prototype;if(d){const v=bd(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,v)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),m&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,m),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,m))}(l,m[l],o)}finally{null!==C&&gr(C),iu(b),v.resolving=!1,xd()}}return h}function ns(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function Kn(s,o){return!(s&ct.Self||s&ct.Host&&o)}class Bo{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,d){return Na(this._tNode,this._lView,o,d,l)}}function so(s){return Wn(()=>{const o=s.prototype.constructor,l=o[q]||Hn(o),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const m=h[q]||Hn(h);if(m&&m!==l)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function Hn(s){return $e(s)?()=>{const o=Hn(re(s));return o&&o()}:Qi(s)}function Kt(s){return function ml(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const d=l.length;let h=0;for(;h<d;){const m=l[h];if(io(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<d&&"string"==typeof l[h];)h++;else{if(m===o)return l[h+1];h+=2}}}return null}(Dn(),s)}const xs="__parameters__";function tn(s,o,l){return Wn(()=>{const d=function Fi(s){return function(...l){if(s){const d=s(...l);for(const h in d)this[h]=d[h]}}}(o);function h(...m){if(this instanceof h)return d.apply(this,m),this;const v=new h(...m);return b.annotation=v,b;function b(C,x,R){const U=C.hasOwnProperty(xs)?C[xs]:Object.defineProperty(C,xs,{value:[]})[xs];for(;U.length<=R;)U.push(null);return(U[R]=U[R]||[]).push(v),C}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class pn{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=dn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const pc=new pn("AnalyzeForEntryComponents");function vi(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let d=s[l];Array.isArray(d)?(o===s&&(o=s.slice(0,l)),vi(d,o)):o!==s&&o.push(d)}return o}function ss(s,o){s.forEach(l=>Array.isArray(l)?ss(l,o):o(l))}function Ud(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function Zo(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function ni(s,o,l){let d=Li(s,o);return d>=0?s[1|d]=l:(d=~d,function xf(s,o,l,d){let h=s.length;if(h==o)s.push(l,d);else if(1===h)s.push(d,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=d}}(s,d,o,l)),d}function os(s,o){const l=Li(s,o);if(l>=0)return s[1|l]}function Li(s,o){return function cu(s,o,l){let d=0,h=s.length>>l;for(;h!==d;){const m=d+(h-d>>1),v=s[m<<l];if(o===v)return m<<l;v>o?h=m:d=m+1}return~(h<<l)}(s,o,1)}const oo={},wc="__NG_DI_FLAG__",Ho="ngTempTokenPath",Ec=/\n/gm,du="__source",Rf=we({provide:String,useValue:we});let ks;function Rs(s){const o=ks;return ks=s,o}function ri(s,o=ct.Default){if(void 0===ks)throw new Error("inject() must be called from an injection context");return null===ks?Ki(s,void 0,o):ks.get(s,o&ct.Optional?null:void 0,o)}function pt(s,o=ct.Default){return(function Fn(){return Cn}()||ri)(re(s),o)}function M(s){const o=[];for(let l=0;l<s.length;l++){const d=re(s[l]);if(Array.isArray(d)){if(0===d.length)throw new Error("Arguments array must have arguments.");let h,m=ct.Default;for(let v=0;v<d.length;v++){const b=d[v],C=Q(b);"number"==typeof C?-1===C?h=b.token:m|=C:h=b}o.push(pt(h,m))}else o.push(pt(d))}return o}function V(s,o){return s[wc]=o,s.prototype[wc]=o,s}function Q(s){return s[wc]}const Ue=V(tn("Inject",s=>({token:s})),-1),ut=V(tn("Optional"),8),It=V(tn("SkipSelf"),4);class Pf{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function uo(s){return s instanceof Pf?s.changingThisBreaksApplicationSecurity:s}const gm=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,jy=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var $n=(()=>(($n=$n||{})[$n.NONE=0]="NONE",$n[$n.HTML=1]="HTML",$n[$n.STYLE=2]="STYLE",$n[$n.SCRIPT=3]="SCRIPT",$n[$n.URL=4]="URL",$n[$n.RESOURCE_URL=5]="RESOURCE_URL",$n))();function co(s){const o=function yu(){const s=Ae();return s&&s[12]}();return o?o.sanitize($n.URL,s)||"":function Dc(s,o){const l=function qd(s){return s instanceof Pf&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}(s,"URL")?uo(s):function gu(s){return(s=String(s)).match(gm)||s.match(jy)?s:"unsafe:"+s}(ne(s))}const $f="__ngContext__";function Vr(s,o){s[$f]=o}function qf(s){const o=function kc(s){return s[$f]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Wf(s){return s.ngOriginalError}function Xy(s,...o){s.error(...o)}class zo{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o),d=function Jy(s){return s&&s.ngErrorLogger||Xy}(o);d(this._console,"ERROR",o),l&&d(this._console,"ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&Wf(o);for(;l&&Wf(l);)l=Wf(l);return l||null}}const Sm=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(wt))();function cs(s){return s instanceof Function?s():s}var Ps=(()=>((Ps=Ps||{})[Ps.Important=1]="Important",Ps[Ps.DashCase=2]="DashCase",Ps))();function ds(s,o){return undefined(s,o)}function Mc(s){const o=s[3];return Mi(o)?o[3]:o}function Br(s){return sh(s[13])}function Nc(s){return sh(s[4])}function sh(s){for(;null!==s&&!Mi(s);)s=s[4];return s}function ii(s,o,l,d,h){if(null!=d){let m,v=!1;Mi(d)?m=d:Es(d)&&(v=!0,d=d[0]);const b=Un(d);0===s&&null!==l?null==h?rt(o,l,b):Ie(o,l,b,h||null,!0):1===s&&null!==l?Ie(o,l,b,h||null,!0):2===s?function ov(s,o,l){const d=Yn(s,o);d&&function Ht(s,o,l,d){Qt(s)?s.removeChild(o,l,d):o.removeChild(l)}(s,d,o,l)}(o,b,v):3===s&&o.destroyNode(b),null!=m&&function MD(s,o,l,d,h){const m=l[7];m!==Un(l)&&ii(o,s,d,m,h);for(let b=10;b<l.length;b++){const C=l[b];Lc(C[1],C,s,o,d,m)}}(o,s,m,l,h)}}function Xf(s,o,l){return Qt(s)?s.createElement(o,l):null===l?s.createElement(o):s.createElementNS(l,o)}function p(s,o){const l=s[9],d=l.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,ko(h,-1)),l.splice(d,1)}function g(s,o){if(s.length<=10)return;const l=10+o,d=s[l];if(d){const h=d[17];null!==h&&h!==s&&p(h,d),o>0&&(s[l-1][4]=d[4]);const m=Zo(s,10+o);!function Eu(s,o){Lc(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(d[1],d);const v=m[19];null!==v&&v.detachView(m[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function w(s,o){if(!(256&o[2])){const l=o[11];Qt(l)&&l.destroyNode&&Lc(s,o,l,3,null,null),function bu(s){let o=s[13];if(!o)return D(s[1],s);for(;o;){let l=null;if(Es(o))l=o[13];else{const d=o[10];d&&(l=d)}if(!l){for(;o&&!o[4]&&o!==s;)Es(o)&&D(o[1],o),o=o[3];null===o&&(o=s),Es(o)&&D(o[1],o),l=o&&o[4]}o=l}}(o)}}function D(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function Z(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let d=0;d<l.length;d+=2){const h=o[l[d]];if(!(h instanceof hl)){const m=l[d+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const b=h[m[v]],C=m[v+1];try{C.call(b)}finally{}}else try{m.call(h)}finally{}}}}(s,o),function k(s,o){const l=s.cleanup,d=o[7];let h=-1;if(null!==l)for(let m=0;m<l.length-1;m+=2)if("string"==typeof l[m]){const v=l[m+1],b="function"==typeof v?v(o):Un(o[v]),C=d[h=l[m+2]],x=l[m+3];"boolean"==typeof x?b.removeEventListener(l[m],C,x):x>=0?d[h=x]():d[h=-x].unsubscribe(),m+=2}else{const v=d[h=l[m+1]];l[m].call(v)}if(null!==d){for(let m=h+1;m<d.length;m++)d[m]();o[7]=null}}(s,o),1===o[1].type&&Qt(o[11])&&o[11].destroy();const l=o[17];if(null!==l&&Mi(o[3])){l!==o[3]&&p(l,o);const d=o[19];null!==d&&d.detachView(s)}}}function ee(s,o,l){return function Me(s,o,l){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return l[0];if(2&d.flags){const h=s.data[d.directiveStart].encapsulation;if(h===et.None||h===et.Emulated)return null}return Tn(d,l)}(s,o.parent,l)}function Ie(s,o,l,d,h){Qt(s)?s.insertBefore(o,l,d,h):o.insertBefore(l,d,h)}function rt(s,o,l){Qt(s)?s.appendChild(o,l):o.appendChild(l)}function at(s,o,l,d,h){null!==d?Ie(s,o,l,d,h):rt(s,o,l)}function Yn(s,o){return Qt(s)?s.parentNode(o):o.parentNode}let ep=function oh(s,o,l){return 40&s.type?Tn(s,l):null};function Pc(s,o,l,d){const h=ee(s,d,o),m=o[11],b=function Cu(s,o,l){return ep(s,o,l)}(d.parent||o[6],d,o);if(null!=h)if(Array.isArray(l))for(let C=0;C<l.length;C++)at(m,h,l[C],b,!1);else at(m,h,l,b,!1)}function Oc(s,o){if(null!==o){const l=o.type;if(3&l)return Tn(o,s);if(4&l)return lh(-1,s[o.index]);if(8&l){const d=o.child;if(null!==d)return Oc(s,d);{const h=s[o.index];return Mi(h)?lh(-1,h):Un(h)}}if(32&l)return ds(o,s)()||Un(s[o.index]);{const d=Fc(s,o);return null!==d?Array.isArray(d)?d[0]:Oc(Mc(s[16]),d):Oc(s,o.next)}}return null}function Fc(s,o){return null!==o?s[16][6].projection[o.projection]:null}function lh(s,o){const l=10+s+1;if(l<o.length){const d=o[l],h=d[1].firstChild;if(null!==h)return Oc(d,h)}return o[7]}function Ko(s,o,l,d,h,m,v){for(;null!=l;){const b=d[l.index],C=l.type;if(v&&0===o&&(b&&Vr(Un(b),d),l.flags|=4),64!=(64&l.flags))if(8&C)Ko(s,o,l.child,d,h,m,!1),ii(o,s,h,b,m);else if(32&C){const x=ds(l,d);let R;for(;R=x();)ii(o,s,h,R,m);ii(o,s,h,b,m)}else 16&C?ub(s,o,d,l,h,m):ii(o,s,h,b,m);l=v?l.projectionNext:l.next}}function Lc(s,o,l,d,h,m){Ko(l,d,s.firstChild,o,h,m,!1)}function ub(s,o,l,d,h,m){const v=l[16],C=v[6].projection[d.projection];if(Array.isArray(C))for(let x=0;x<C.length;x++)ii(o,s,h,C[x],m);else Ko(s,o,C,v[3],h,m,!0)}function cb(s,o,l){Qt(s)?s.setAttribute(o,"style",l):o.style.cssText=l}function av(s,o,l){Qt(s)?""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l):o.className=l}function db(s,o,l){let d=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const m=o.length;if(h+m===d||s.charCodeAt(h+m)<=32)return h}l=h+1}}const Mm="ng-template";function hb(s,o,l){let d=0;for(;d<s.length;){let h=s[d++];if(l&&"class"===h){if(h=s[d],-1!==db(h.toLowerCase(),o,0))return!0}else if(1===h){for(;d<s.length&&"string"==typeof(h=s[d++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function lv(s){return 4===s.type&&s.value!==Mm}function PD(s,o,l){return o===(4!==s.type||l?s.value:Mm)}function OD(s,o,l){let d=4;const h=s.attrs||[],m=function DR(s){for(let o=0;o<s.length;o++)if(io(s[o]))return o;return s.length}(h);let v=!1;for(let b=0;b<o.length;b++){const C=o[b];if("number"!=typeof C){if(!v)if(4&d){if(d=2|1&d,""!==C&&!PD(s,C,l)||""===C&&1===o.length){if(Yo(d))return!1;v=!0}}else{const x=8&d?C:o[++b];if(8&d&&null!==s.attrs){if(!hb(s.attrs,x,l)){if(Yo(d))return!1;v=!0}continue}const U=FD(8&d?"class":C,h,lv(s),l);if(-1===U){if(Yo(d))return!1;v=!0;continue}if(""!==x){let G;G=U>m?"":h[U+1].toLowerCase();const J=8&d?G:null;if(J&&-1!==db(J,x,0)||2&d&&x!==G){if(Yo(d))return!1;v=!0}}}}else{if(!v&&!Yo(d)&&!Yo(C))return!1;if(v&&Yo(C))continue;v=!1,d=C|1&d}}return Yo(d)||v}function Yo(s){return 0==(1&s)}function FD(s,o,l,d){if(null===o)return-1;let h=0;if(d||!l){let m=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)m=!0;else{if(1===v||2===v){let b=o[++h];for(;"string"==typeof b;)b=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=m?1:2}return-1}return function uv(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const d=s[l];if("number"==typeof d)return-1;if(d===o)return l;l++}return-1}(o,s)}function nn(s,o,l=!1){for(let d=0;d<o.length;d++)if(OD(s,o[d],l))return!0;return!1}function ge(s,o){return s?":not("+o.trim()+")":o}function Vi(s){let o=s[0],l=1,d=2,h="",m=!1;for(;l<s.length;){let v=s[l];if("string"==typeof v)if(2&d){const b=s[++l];h+="["+v+(b.length>0?'="'+b+'"':"")+"]"}else 8&d?h+="."+v:4&d&&(h+=" "+v);else""!==h&&!Yo(v)&&(o+=ge(m,h),h=""),d=v,m=m||!Yo(d);l++}return""!==h&&(o+=ge(m,h)),o}const kt={};function cv(s){Nm(Zt(),Ae(),En()+s,Mo())}function Nm(s,o,l,d){if(!d)if(3==(3&o[2])){const m=s.preOrderCheckHooks;null!==m&&tu(o,m,l)}else{const m=s.preOrderHooks;null!==m&&dl(o,m,0,l)}no(l)}function Pm(s,o){return s<<17|o<<2}function Xo(s){return s>>17&32767}function tp(s){return 2|s}function hs(s){return(131068&s)>>2}function Om(s,o){return-131069&s|o<<2}function Vc(s){return 1|s}function Zm(s,o){const l=s.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const h=l[d],m=l[d+1];if(-1!==m){const v=s.data[m];ol(h),v.contentQueries(2,o[m],m)}}}function sp(s,o,l,d,h,m,v,b,C,x){const R=o.blueprint.slice();return R[0]=h,R[2]=140|d,xo(R),R[3]=R[15]=s,R[8]=l,R[10]=v||s&&s[10],R[11]=b||s&&s[11],R[12]=C||s&&s[12]||null,R[9]=x||s&&s[9]||null,R[6]=m,R[16]=2==o.type?s[16]:R,R}function Su(s,o,l,d,h){let m=s.data[o];if(null===m)m=function op(s,o,l,d,h){const m=rl(),v=Kl(),C=s.data[o]=function Tb(s,o,l,d,h,m){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,l,o,d,h);return null===s.firstChild&&(s.firstChild=C),null!==m&&(v?null==m.child&&null!==C.parent&&(m.child=C):null===m.next&&(m.next=C)),C}(s,o,l,d,h),function il(){return ft.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=l,m.value=d,m.attrs=h;const v=function Xi(){const s=ft.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return vr(m,!0),m}function xu(s,o,l,d){if(0===l)return-1;const h=o.length;for(let m=0;m<l;m++)o.push(d),s.blueprint.push(d),s.data.push(null);return h}function ap(s,o,l){cc(o);try{const d=s.viewQuery;null!==d&&hp(1,d,l);const h=s.template;null!==h&&wb(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Zm(s,o),s.staticViewQueries&&hp(2,s.viewQuery,l);const m=s.components;null!==m&&function yb(s,o){for(let l=0;l<o.length;l++)Ru(s,o[l])}(o,m)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[2]&=-5,ul()}}function ch(s,o,l,d){const h=o[2];if(256==(256&h))return;cc(o);const m=Mo();try{xo(o),function Aa(s){return ft.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&wb(s,o,l,2,d);const v=3==(3&h);if(!m)if(v){const x=s.preOrderCheckHooks;null!==x&&tu(o,x,null)}else{const x=s.preOrderHooks;null!==x&&dl(o,x,0,null),Md(o,0)}if(function mn(s){for(let o=Br(s);null!==o;o=Nc(o)){if(!o[2])continue;const l=o[9];for(let d=0;d<l.length;d++){const h=l[d],m=h[3];0==(1024&h[2])&&ko(m,1),h[2]|=1024}}}(o),function Mb(s){for(let o=Br(s);null!==o;o=Nc(o))for(let l=10;l<o.length;l++){const d=o[l],h=d[1];Xa(d)&&ch(h,d,h.template,d[8])}}(o),null!==s.contentQueries&&Zm(s,o),!m)if(v){const x=s.contentCheckHooks;null!==x&&tu(o,x)}else{const x=s.contentHooks;null!==x&&dl(o,x,1),Md(o,1)}!function _b(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const h=l[d];if(h<0)no(~h);else{const m=h,v=l[++d],b=l[++d];sl(v,m),b(2,o[m])}}}finally{no(-1)}}(s,o);const b=s.components;null!==b&&function BD(s,o){for(let l=0;l<o.length;l++)ln(s,o[l])}(o,b);const C=s.viewQuery;if(null!==C&&hp(2,C,d),!m)if(v){const x=s.viewCheckHooks;null!==x&&tu(o,x)}else{const x=s.viewHooks;null!==x&&dl(o,x,2),Md(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),m||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,ko(o[3],-1))}finally{ul()}}function vb(s,o,l,d){const h=o[10],m=!Mo(),v=Ja(o);try{m&&!v&&h.begin&&h.begin(),v&&ap(s,o,d),ch(s,o,l,d)}finally{m&&!v&&h.end&&h.end()}}function wb(s,o,l,d,h){const m=En(),v=2&d;try{no(-1),v&&o.length>20&&Nm(s,o,20,Mo()),l(d,h)}finally{no(m)}}function Eb(s,o,l){if(_f(o)){const h=o.directiveEnd;for(let m=o.directiveStart;m<h;m++){const v=s.data[m];v.contentQueries&&v.contentQueries(1,l[m],m)}}}function bv(s,o,l){!nl()||(function qD(s,o,l,d){const h=l.directiveStart,m=l.directiveEnd;s.firstCreatePass||xa(l,o),Vr(d,o);const v=l.initialInputs;for(let b=h;b<m;b++){const C=s.data[b],x=pi(C);x&&xb(o,l,C);const R=ts(o,s,b,l);Vr(R,o),null!==v&&kb(0,b-h,R,C,0,v),x&&(Jt(l.index,o)[8]=R)}}(s,o,l,Tn(l,o)),128==(128&l.flags)&&function Av(s,o,l){const d=l.directiveStart,h=l.directiveEnd,v=l.index,b=function Yl(){return ft.lFrame.currentDirectiveIndex}();try{no(v);for(let C=d;C<h;C++){const x=s.data[C],R=o[C];Po(C),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&Sv(x,R)}}finally{no(-1),Po(b)}}(s,o,l))}function Hm(s,o,l=Tn){const d=o.localNames;if(null!==d){let h=o.index+1;for(let m=0;m<d.length;m+=2){const v=d[m+1],b=-1===v?l(o,s):s[v];s[h++]=b}}}function Cv(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=lp(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function lp(s,o,l,d,h,m,v,b,C,x){const R=20+d,U=R+h,G=function jD(s,o){const l=[];for(let d=0;d<o;d++)l.push(d<s?null:kt);return l}(R,U),J="function"==typeof x?x():x;return G[1]={type:s,blueprint:G,template:l,queries:null,viewQuery:b,declTNode:o,data:G.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:J,incompleteFirstPass:!1}}function Ib(s,o,l,d){const h=Nb(o);null===l?h.push(d):(h.push(l),s.firstCreatePass&&Pb(s).push(d,h.length-1))}function Iv(s,o,l){for(let d in s)if(s.hasOwnProperty(d)){const h=s[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(o,h):l[d]=[o,h]}return l}function Os(s,o,l,d,h,m,v,b){const C=Tn(o,l);let R,x=o.inputs;!b&&null!=x&&(R=x[d])?(Gm(s,l,R,d,h),Qs(o)&&function ku(s,o){const l=Jt(o,s);16&l[2]||(l[2]|=64)}(l,o.index)):3&o.type&&(d=function HD(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=v?v(h,o.value||"",d):h,Qt(m)?m.setProperty(C,d,h):tt(d)||(C.setProperty?C.setProperty(d,h):C[d]=h))}function Dv(s,o,l,d){let h=!1;if(nl()){const m=function GD(s,o,l){const d=s.directiveRegistry;let h=null;if(d)for(let m=0;m<d.length;m++){const v=d[m];nn(l,v.selectors,!1)&&(h||(h=[]),Ma(xa(l,o),s,v.type),pi(v)?(xv(s,l),h.unshift(v)):h.push(v))}return h}(s,o,l),v=null===d?null:{"":-1};if(null!==m){h=!0,kv(l,s.data.length,m.length);for(let R=0;R<m.length;R++){const U=m[R];U.providersResolver&&U.providersResolver(U)}let b=!1,C=!1,x=xu(s,o,m.length,null);for(let R=0;R<m.length;R++){const U=m[R];l.mergedAttrs=mi(l.mergedAttrs,U.hostAttrs),Rv(s,l,o,x,U),Sb(x,U,v),null!==U.contentQueries&&(l.flags|=8),(null!==U.hostBindings||null!==U.hostAttrs||0!==U.hostVars)&&(l.flags|=128);const G=U.type.prototype;!b&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),b=!0),!C&&(G.ngOnChanges||G.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),C=!0),x++}!function ZD(s,o){const d=o.directiveEnd,h=s.data,m=o.attrs,v=[];let b=null,C=null;for(let x=o.directiveStart;x<d;x++){const R=h[x],U=R.inputs,G=null===m||lv(o)?null:Rb(U,m);v.push(G),b=Iv(U,x,b),C=Iv(R.outputs,x,C)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=16),b.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=b,o.outputs=C}(s,l)}v&&function WD(s,o,l){if(o){const d=s.localNames=[];for(let h=0;h<o.length;h+=2){const m=l[o[h+1]];if(null==m)throw new Ze("301",`Export of name '${o[h+1]}' not found!`);d.push(o[h],m)}}}(l,d,v)}return l.mergedAttrs=mi(l.mergedAttrs,l.attrs),h}function Ab(s,o,l,d,h,m){const v=m.hostBindings;if(v){let b=s.hostBindingOpCodes;null===b&&(b=s.hostBindingOpCodes=[]);const C=~o.index;(function $D(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(b)!=C&&b.push(C),b.push(d,h,v)}}function Sv(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function xv(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function Sb(s,o,l){if(l){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)l[o.exportAs[d]]=s;pi(o)&&(l[""]=s)}}function kv(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function Rv(s,o,l,d,h){s.data[d]=h;const m=h.factory||(h.factory=Qi(h.type)),v=new hl(m,pi(h),null);s.blueprint[d]=v,l[d]=v,Ab(s,o,0,d,xu(s,l,h.hostVars,kt),h)}function xb(s,o,l){const d=Tn(o,s),h=Cv(l),m=s[10],v=dh(s,sp(s,h,null,l.onPush?64:16,d,o,m,m.createRenderer(d,l),null,null));s[o.index]=v}function Ba(s,o,l,d,h,m){const v=Tn(s,o);!function $m(s,o,l,d,h,m,v){if(null==m)Qt(s)?s.removeAttribute(o,h,l):o.removeAttribute(h);else{const b=null==v?ne(m):v(m,d||"",h);Qt(s)?s.setAttribute(o,h,b,l):l?o.setAttributeNS(l,h,b):o.setAttribute(h,b)}}(o[11],v,m,s.value,l,d,h)}function kb(s,o,l,d,h,m){const v=m[o];if(null!==v){const b=d.setInput;for(let C=0;C<v.length;){const x=v[C++],R=v[C++],U=v[C++];null!==b?d.setInput(l,U,x,R):l[R]=U}}}function Rb(s,o){let l=null,d=0;for(;d<o.length;){const h=o[d];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],o[d+1])),d+=2}else d+=2;else d+=4}return l}function Nv(s,o,l,d){return new Array(s,!0,!1,o,null,0,d,l,null,null)}function ln(s,o){const l=Jt(o,s);if(Xa(l)){const d=l[1];80&l[2]?ch(d,l,d.template,l[8]):l[5]>0&&Lt(l)}}function Lt(s){for(let d=Br(s);null!==d;d=Nc(d))for(let h=10;h<d.length;h++){const m=d[h];if(1024&m[2]){const v=m[1];ch(v,m,v.template,m[8])}else m[5]>0&&Lt(m)}const l=s[1].components;if(null!==l)for(let d=0;d<l.length;d++){const h=Jt(l[d],s);Xa(h)&&h[5]>0&&Lt(h)}}function Ru(s,o){const l=Jt(o,s),d=l[1];(function An(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(d,l),ap(d,l,l[8])}function dh(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Pv(s){for(;s;){s[2]|=64;const o=Mc(s);if(yf(s)&&!o)return s;s=o}return null}function Nn(s,o,l){const d=o[10];d.begin&&d.begin();try{ch(s,o,s.template,l)}catch(h){throw Mu(o,h),h}finally{d.end&&d.end()}}function Bt(s){!function qm(s){for(let o=0;o<s.components.length;o++){const l=s.components[o],d=qf(l),h=d[1];vb(h,d,h.template,l)}}(s[8])}function hp(s,o,l){ol(0),o(s,l)}const KD=(()=>Promise.resolve(null))();function Nb(s){return s[7]||(s[7]=[])}function Pb(s){return s.cleanup||(s.cleanup=[])}function Mu(s,o){const l=s[9],d=l?l.get(zo,null):null;d&&d.handleError(o)}function Gm(s,o,l,d,h){for(let m=0;m<l.length;){const v=l[m++],b=l[m++],C=o[v],x=s.data[v];null!==x.setInput?x.setInput(C,h,d,b):C[b]=h}}function Fs(s,o,l){const d=Xs(o,s);!function Jf(s,o,l){Qt(s)?s.setValue(o,l):o.textContent=l}(s[11],d,l)}function Wm(s,o,l){let d=l?s.styles:null,h=l?s.classes:null,m=0;if(null!==o)for(let v=0;v<o.length;v++){const b=o[v];"number"==typeof b?m=b:1==m?h=pe(h,b):2==m&&(d=pe(d,b+": "+o[++v]+";"))}l?s.styles=d:s.stylesWithoutHost=d,l?s.classes=h:s.classesWithoutHost=h}const Fv=new pn("INJECTOR",-1);class Lv{get(o,l=oo){if(l===oo){const d=new Error(`NullInjectorError: No provider for ${ce(o)}!`);throw d.name="NullInjectorError",d}return l}}const Rl=new pn("Set Injector scope."),Ft={},zm={};let hh;function Uv(){return void 0===hh&&(hh=new Lv),hh}function ta(s,o=null,l=null,d){const h=fp(s,o,l,d);return h._resolveInjectorDefTypes(),h}function fp(s,o=null,l=null,d){return new na(s,l,o||Uv(),d)}class na{constructor(o,l,d,h=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];l&&ss(l,b=>this.processProvider(b,o,l)),ss([o],b=>this.processInjectorType(b,[],m)),this.records.set(Fv,Nu(void 0,this));const v=this.records.get(Rl);this.scope=null!=v?v.value:null,this.source=h||("object"==typeof o?null:ce(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,l=oo,d=ct.Default){this.assertNotDestroyed();const h=Rs(this),m=gr(void 0);try{if(!(d&ct.SkipSelf)){let b=this.records.get(o);if(void 0===b){const C=function JD(s){return"function"==typeof s||"object"==typeof s&&s instanceof pn}(o)&&zi(o);b=C&&this.injectableDefInScope(C)?Nu(Vv(o),Ft):null,this.records.set(o,b)}if(null!=b)return this.hydrate(o,b)}return(d&ct.Self?Uv():this.parent).get(o,l=d&ct.Optional&&l===oo?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[Ho]=v[Ho]||[]).unshift(ce(o)),h)throw v;return function oe(s,o,l,d){const h=s[Ho];throw o[du]&&h.unshift(o[du]),s.message=function Se(s,o,l,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=ce(o);if(Array.isArray(o))h=o.map(ce).join(" -> ");else if("object"==typeof o){let m=[];for(let v in o)if(o.hasOwnProperty(v)){let b=o[v];m.push(v+":"+("string"==typeof b?JSON.stringify(b):ce(b)))}h=`{${m.join(", ")}}`}return`${l}${d?"("+d+")":""}[${h}]: ${s.replace(Ec,"\n  ")}`}("\n"+s.message,h,l,d),s.ngTokenPath=h,s[Ho]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{gr(m),Rs(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((d,h)=>o.push(ce(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(o,l,d){if(!(o=re(o)))return!1;let h=Do(o);const m=null==h&&o.ngModule||void 0,v=void 0===m?o:m,b=-1!==d.indexOf(v);if(void 0!==m&&(h=Do(m)),null==h)return!1;if(null!=h.imports&&!b){let R;d.push(v);try{ss(h.imports,U=>{this.processInjectorType(U,l,d)&&(void 0===R&&(R=[]),R.push(U))})}finally{}if(void 0!==R)for(let U=0;U<R.length;U++){const{ngModule:G,providers:J}=R[U];ss(J,me=>this.processProvider(me,G,J||Gt))}}this.injectorDefTypes.add(v);const C=Qi(v)||(()=>new v);this.records.set(v,Nu(C,Ft));const x=h.providers;if(null!=x&&!b){const R=o;ss(x,U=>this.processProvider(U,R,x))}return void 0!==m&&void 0!==o.providers}processProvider(o,l,d){let h=jc(o=re(o))?o:re(o&&o.provide);const m=function QD(s,o,l){return Fb(s)?Nu(void 0,s.useValue):Nu(Km(s),Ft)}(o);if(jc(o)||!0!==o.multi)this.records.get(h);else{let v=this.records.get(h);v||(v=Nu(void 0,Ft,!0),v.factory=()=>M(v.multi),this.records.set(h,v)),h=o,v.multi.push(o)}this.records.set(h,m)}hydrate(o,l){return l.value===Ft&&(l.value=zm,l.value=l.factory()),"object"==typeof l.value&&l.value&&function Bb(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this.onDestroy.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=re(o.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function Vv(s){const o=zi(s),l=null!==o?o.factory:Qi(s);if(null!==l)return l;if(s instanceof pn)throw new Error(`Token ${ce(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function fs(s){const o=s.length;if(o>0){const d=function Oa(s,o){const l=[];for(let d=0;d<s;d++)l.push(o);return l}(o,"?");throw new Error(`Can't resolve all parameters for ${ce(s)}: (${d.join(", ")}).`)}const l=function Yt(s){const o=s&&(s[Yr]||s[Re]);if(o){const l=function Bn(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Error("unreachable")}function Km(s,o,l){let d;if(jc(s)){const h=re(s);return Qi(h)||Vv(h)}if(Fb(s))d=()=>re(s.useValue);else if(function Ub(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...M(s.deps||[]));else if(function Lb(s){return!(!s||!s.useExisting)}(s))d=()=>pt(re(s.useExisting));else{const h=re(s&&(s.useClass||s.provide));if(!function Vb(s){return!!s.deps}(s))return Qi(h)||Vv(h);d=()=>new h(...M(s.deps))}return d}function Nu(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function Fb(s){return null!==s&&"object"==typeof s&&Rf in s}function jc(s){return"function"==typeof s}let po=(()=>{class s{static create(l,d){var h;if(Array.isArray(l))return ta({name:""},d,l,"");{const m=null!==(h=l.name)&&void 0!==h?h:"";return ta({name:m},l.parent,l.providers,m)}}}return s.THROW_IF_NOT_FOUND=oo,s.NULL=new Lv,s.\u0275prov=dn({token:s,providedIn:"any",factory:()=>pt(Fv)}),s.__NG_ELEMENT_ID__=-1,s})();function _p(s,o){ro(qf(s)[1],Dn())}function Hc(s){let o=function Qm(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const d=[s];for(;o;){let h;if(pi(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Error("Directives cannot inherit Components");h=o.\u0275dir}if(h){if(l){d.push(h);const v=s;v.inputs=yh(s.inputs),v.declaredInputs=yh(s.declaredInputs),v.outputs=yh(s.outputs);const b=h.hostBindings;b&&o1(s,b);const C=h.viewQuery,x=h.contentQueries;if(C&&i1(s,C),x&&s1(s,x),he(s.inputs,h.inputs),he(s.declaredInputs,h.declaredInputs),he(s.outputs,h.outputs),pi(h)&&h.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let v=0;v<m.length;v++){const b=m[v];b&&b.ngInherit&&b(s),b===Hc&&(l=!1)}}o=Object.getPrototypeOf(o)}!function r1(s){let o=0,l=null;for(let d=s.length-1;d>=0;d--){const h=s[d];h.hostVars=o+=h.hostVars,h.hostAttrs=mi(h.hostAttrs,l=mi(l,h.hostAttrs))}}(d)}function yh(s){return s===Wt?{}:s===Gt?[]:s}function i1(s,o){const l=s.viewQuery;s.viewQuery=l?(d,h)=>{o(d,h),l(d,h)}:o}function s1(s,o){const l=s.contentQueries;s.contentQueries=l?(d,h,m)=>{o(d,h,m),l(d,h,m)}:o}function o1(s,o){const l=s.hostBindings;s.hostBindings=l?(d,h)=>{o(d,h),l(d,h)}:o}let Jm=null;function Nl(){if(!Jm){const s=wt.Symbol;if(s&&s.iterator)Jm=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const d=o[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(Jm=d)}}}return Jm}function vh(s){return!!wh(s)&&(Array.isArray(s)||!(s instanceof Map)&&Nl()in s)}function wh(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ji(s,o,l){return s[o]=l}function Hr(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function Gv(s,o,l,d){const h=Ae();return Hr(h,to(),o)&&(Zt(),Ba(gn(),h,s,o,l,d)),Gv}function bh(s,o,l,d){return Hr(s,to(),l)?o+ne(l)+d:kt}function vp(s,o,l,d,h,m,v,b){const C=Ae(),x=Zt(),R=s+20,U=x.firstCreatePass?function Kb(s,o,l,d,h,m,v,b,C){const x=o.consts,R=Su(o,s,4,v||null,ei(x,b));Dv(o,l,R,ei(x,C)),ro(o,R);const U=R.tViews=lp(2,R,d,h,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,R),U.queries=o.queries.embeddedTView(R)),R}(R,x,C,o,l,d,h,m,v):x.data[R];vr(U,!1);const G=C[11].createComment("");Pc(x,C,G,U),Vr(G,C),dh(C,C[R]=Nv(G,C,G,U)),jn(U)&&bv(x,C,U),null!=v&&Hm(C,U,b)}function t_(s){return So(function uc(){return ft.lFrame.contextLView}(),20+s)}function Ep(s,o=ct.Default){const l=Ae();return null===l?pt(s,o):Na(Dn(),l,re(s),o)}function iC(){throw new Error("invalid")}function s0(s,o,l){const d=Ae();return Hr(d,to(),o)&&Os(Zt(),gn(),d,s,o,d[11],l,!1),s0}function o_(s,o,l,d,h){const v=h?"class":"style";Gm(s,l,o.inputs[v],v,d)}function bp(s,o,l,d){const h=Ae(),m=Zt(),v=20+s,b=h[11],C=h[v]=Xf(b,o,function Tf(){return ft.lFrame.currentNamespace}()),x=m.firstCreatePass?function a_(s,o,l,d,h,m,v){const b=o.consts,x=Su(o,s,2,h,ei(b,m));return Dv(o,l,x,ei(b,v)),null!==x.attrs&&Wm(x,x.attrs,!1),null!==x.mergedAttrs&&Wm(x,x.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,x),x}(v,m,h,0,o,l,d):m.data[v];vr(x,!0);const R=x.mergedAttrs;null!==R&&en(b,C,R);const U=x.classes;null!==U&&av(b,C,U);const G=x.styles;null!==G&&cb(b,C,G),64!=(64&x.flags)&&Pc(m,h,C,x),0===function yr(){return ft.lFrame.elementDepthCount}()&&Vr(C,h),function tl(){ft.lFrame.elementDepthCount++}(),jn(x)&&(bv(m,h,x),Eb(m,x,h)),null!==d&&Hm(h,x)}function l_(){let s=Dn();Kl()?Ro():(s=s.parent,vr(s,!1));const o=s;!function Dd(){ft.lFrame.elementDepthCount--}();const l=Zt();l.firstCreatePass&&(ro(l,s),_f(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Od(s){return 0!=(16&s.flags)}(o)&&o_(l,o,Ae(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Fd(s){return 0!=(32&s.flags)}(o)&&o_(l,o,Ae(),o.stylesWithoutHost,!1)}function sC(s,o,l,d){bp(s,o,l,d),l_()}function a0(s,o,l){const d=Ae(),h=Zt(),m=s+20,v=h.firstCreatePass?function o0(s,o,l,d,h){const m=o.consts,v=ei(m,d),b=Su(o,s,8,"ng-container",v);return null!==v&&Wm(b,v,!0),Dv(o,l,b,ei(m,h)),null!==o.queries&&o.queries.elementStart(o,b),b}(m,h,d,o,l):h.data[m];vr(v,!0);const b=d[m]=d[11].createComment("");Pc(h,d,b,v),Vr(b,d),jn(v)&&(bv(h,d,v),Eb(h,v,d)),null!=l&&Hm(d,v)}function l0(){let s=Dn();const o=Zt();Kl()?Ro():(s=s.parent,vr(s,!1)),o.firstCreatePass&&(ro(o,s),_f(s)&&o.queries.elementEnd(s))}function oC(){return Ae()}function u0(s){return!!s&&"function"==typeof s.then}function aC(s){return!!s&&"function"==typeof s.subscribe}const lC=aC;function u_(s,o,l,d){const h=Ae(),m=Zt(),v=Dn();return function c0(s,o,l,d,h,m,v,b){const C=jn(d),R=s.firstCreatePass&&Pb(s),U=o[8],G=Nb(o);let J=!0;if(3&d.type||b){const He=Tn(d,o),st=b?b(He):He,Ce=G.length,ht=b?$t=>b(Un($t[d.index])):d.index;if(Qt(l)){let $t=null;if(!b&&C&&($t=function cC(s,o,l,d){const h=s.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const v=h[m];if(v===l&&h[m+1]===d){const b=o[7],C=h[m+2];return b.length>C?b[C]:null}"string"==typeof v&&(m+=2)}return null}(s,o,h,d.index)),null!==$t)($t.__ngLastListenerFn__||$t).__ngNextListenerFn__=m,$t.__ngLastListenerFn__=m,J=!1;else{m=c_(d,o,U,m,!1);const _n=l.listen(st,h,m);G.push(m,_n),R&&R.push(h,ht,Ce,Ce+1)}}else m=c_(d,o,U,m,!0),st.addEventListener(h,m,v),G.push(m),R&&R.push(h,ht,Ce,v)}else m=c_(d,o,U,m,!1);const me=d.outputs;let Fe;if(J&&null!==me&&(Fe=me[h])){const He=Fe.length;if(He)for(let st=0;st<He;st+=2){const $i=o[Fe[st]][Fe[st+1]].subscribe(m),Ha=G.length;G.push(m,$i),R&&R.push(h,d.index,Ha,-(Ha+1))}}}(m,h,h[11],v,s,o,!!l,d),u_}function dC(s,o,l,d){try{return!1!==l(d)}catch(h){return Mu(s,h),!1}}function c_(s,o,l,d,h){return function m(v){if(v===Function)return d;const b=2&s.flags?Jt(s.index,o):o;0==(32&o[2])&&Pv(b);let C=dC(o,0,d,v),x=m.__ngNextListenerFn__;for(;x;)C=dC(o,0,x,v)&&C,x=x.__ngNextListenerFn__;return h&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function Cp(s=1){return function nm(s){return(ft.lFrame.contextLView=function cl(s,o){for(;s>0;)o=o[15],s--;return o}(s,ft.lFrame.contextLView))[8]}(s)}function d0(s,o,l){return Ip(s,"",o,"",l),d0}function Ip(s,o,l,d,h){const m=Ae(),v=bh(m,o,l,d);return v!==kt&&Os(Zt(),gn(),m,s,v,m[11],h,!1),Ip}function gC(s,o,l,d,h){const m=s[l+1],v=null===o;let b=d?Xo(m):hs(m),C=!1;for(;0!==b&&(!1===C||v);){const R=s[b+1];w1(s[b],o)&&(C=!0,s[b+1]=d?Vc(R):tp(R)),b=d?Xo(R):hs(R)}C&&(s[l+1]=d?tp(m):Vc(m))}function w1(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Li(s,o)>=0}function g_(s,o){return function Us(s,o,l,d){const h=Ae(),m=Zt(),v=function es(s){const o=ft.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}(2);m.firstUpdatePass&&function Sh(s,o,l,d){const h=s.data;if(null===h[l+1]){const m=h[En()],v=function wC(s,o){return o>=s.expandoStartIndex}(s,l);(function xp(s,o){return 0!=(s.flags&(o?16:32))})(m,d)&&null===o&&!v&&(o=!1),o=function I1(s,o,l,d){const h=function Oo(s){const o=ft.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let m=d?o.residualClasses:o.residualStyles;if(null===h)0===(d?o.classBindings:o.styleBindings)&&(l=Sp(l=Ap(null,s,o,l,d),o.attrs,d),m=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(l=Ap(h,s,o,l,d),null===m){let C=function T1(s,o,l){const d=l?o.classBindings:o.styleBindings;if(0!==hs(d))return s[Xo(d)]}(s,o,d);void 0!==C&&Array.isArray(C)&&(C=Ap(null,s,o,C[1],d),C=Sp(C,o.attrs,d),function D1(s,o,l,d){s[Xo(l?o.classBindings:o.styleBindings)]=d}(s,o,d,C))}else m=function y0(s,o,l){let d;const h=o.directiveEnd;for(let m=1+o.directiveStylingLast;m<h;m++)d=Sp(d,s[m].hostAttrs,l);return Sp(d,o.attrs,l)}(s,o,d)}return void 0!==m&&(d?o.residualClasses=m:o.residualStyles=m),l}(h,m,o,d),function d_(s,o,l,d,h,m){let v=m?o.classBindings:o.styleBindings,b=Xo(v),C=hs(v);s[d]=l;let R,x=!1;if(Array.isArray(l)){const U=l;R=U[1],(null===R||Li(U,R)>0)&&(x=!0)}else R=l;if(h)if(0!==C){const G=Xo(s[b+1]);s[d+1]=Pm(G,b),0!==G&&(s[G+1]=Om(s[G+1],d)),s[b+1]=function Uc(s,o){return 131071&s|o<<17}(s[b+1],d)}else s[d+1]=Pm(b,0),0!==b&&(s[b+1]=Om(s[b+1],d)),b=d;else s[d+1]=Pm(C,0),0===b?b=d:s[C+1]=Om(s[C+1],d),C=d;x&&(s[d+1]=tp(s[d+1])),gC(s,R,d,!0),gC(s,R,d,!1),function v1(s,o,l,d,h){const m=h?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof o&&Li(m,o)>=0&&(l[d+1]=Vc(l[d+1]))}(o,R,s,d,m),v=Pm(b,C),m?o.classBindings=v:o.styleBindings=v}(h,m,o,l,v,d)}}(m,s,v,d),o!==kt&&Hr(h,v,o)&&function v0(s,o,l,d,h,m,v,b){if(!(3&o.type))return;const C=s.data,x=C[b+1];xh(function fv(s){return 1==(1&s)}(x)?__(C,o,l,h,hs(x),v):void 0)||(xh(m)||function hv(s){return 2==(2&s)}(x)&&(m=__(C,null,l,h,b,v)),function ND(s,o,l,d,h){const m=Qt(s);if(o)h?m?s.addClass(l,d):l.classList.add(d):m?s.removeClass(l,d):l.classList.remove(d);else{let v=-1===d.indexOf("-")?void 0:Ps.DashCase;if(null==h)m?s.removeStyle(l,d,v):l.style.removeProperty(d);else{const b="string"==typeof h&&h.endsWith("!important");b&&(h=h.slice(0,-10),v|=Ps.Important),m?s.setStyle(l,d,h,v):l.style.setProperty(d,h,b?"important":"")}}}(d,v,Xs(En(),l),h,m))}(m,m.data[En()],h,h[11],s,h[v+1]=function w0(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ce(uo(s)))),s}(o,l),d,v)}(s,o,null,!0),g_}function Ap(s,o,l,d,h){let m=null;const v=l.directiveEnd;let b=l.directiveStylingLast;for(-1===b?b=l.directiveStart:b++;b<v&&(m=o[b],d=Sp(d,m.hostAttrs,h),m!==s);)b++;return null!==s&&(l.directiveStylingLast=b),d}function Sp(s,o,l){const d=l?1:2;let h=-1;if(null!==o)for(let m=0;m<o.length;m++){const v=o[m];"number"==typeof v?h=v:h===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),ni(s,v,!!l||o[++m]))}return void 0===s?null:s}function __(s,o,l,d,h,m){const v=null===o;let b;for(;h>0;){const C=s[h],x=Array.isArray(C),R=x?C[1]:C,U=null===R;let G=l[h+1];G===kt&&(G=U?Gt:void 0);let J=U?os(G,d):R===d?G:void 0;if(x&&!xh(J)&&(J=os(C,d)),xh(J)&&(b=J,v))return b;const me=s[h+1];h=v?Xo(me):hs(me)}if(null!==o){let C=m?o.residualClasses:o.residualStyles;null!=C&&(b=os(C,d))}return b}function xh(s){return void 0!==s}function Bu(s,o=""){const l=Ae(),d=Zt(),h=s+20,m=d.firstCreatePass?Su(d,h,1,o,null):d.data[h],v=l[h]=function Al(s,o){return Qt(s)?s.createText(o):s.createTextNode(o)}(l[11],o);Pc(d,l,v,m),vr(m,!1)}function kp(s){return Rp("",s,""),kp}function Rp(s,o,l){const d=Ae(),h=bh(d,s,o,l);return h!==kt&&Fs(d,En(),h),Rp}const ju=void 0;var x0=["en",[["a","p"],["AM","PM"],ju],[["AM","PM"],ju,ju],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ju,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ju,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ju,"{1} 'at' {0}",ju],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function N1(s){const l=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let Vl={};function Lp(s){const o=function O1(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=OC(o);if(l)return l;const d=o.split("-")[0];if(l=OC(d),l)return l;if("en"===d)return x0;throw new Error(`Missing locale data for the locale "${s}".`)}function PC(s){return Lp(s)[Et.PluralCase]}function OC(s){return s in Vl||(Vl[s]=wt.ng&&wt.ng.common&&wt.ng.common.locales&&wt.ng.common.locales[s]),Vl[s]}var Et=(()=>((Et=Et||{})[Et.LocaleId=0]="LocaleId",Et[Et.DayPeriodsFormat=1]="DayPeriodsFormat",Et[Et.DayPeriodsStandalone=2]="DayPeriodsStandalone",Et[Et.DaysFormat=3]="DaysFormat",Et[Et.DaysStandalone=4]="DaysStandalone",Et[Et.MonthsFormat=5]="MonthsFormat",Et[Et.MonthsStandalone=6]="MonthsStandalone",Et[Et.Eras=7]="Eras",Et[Et.FirstDayOfWeek=8]="FirstDayOfWeek",Et[Et.WeekendRange=9]="WeekendRange",Et[Et.DateFormat=10]="DateFormat",Et[Et.TimeFormat=11]="TimeFormat",Et[Et.DateTimeFormat=12]="DateTimeFormat",Et[Et.NumberSymbols=13]="NumberSymbols",Et[Et.NumberFormats=14]="NumberFormats",Et[Et.CurrencyCode=15]="CurrencyCode",Et[Et.CurrencySymbol=16]="CurrencySymbol",Et[Et.CurrencyName=17]="CurrencyName",Et[Et.Currencies=18]="Currencies",Et[Et.Directionality=19]="Directionality",Et[Et.PluralCase=20]="PluralCase",Et[Et.ExtraData=21]="ExtraData",Et))();const Up="en-US";let Vp=Up;function W0(s,o,l,d,h){if(s=re(s),Array.isArray(s))for(let m=0;m<s.length;m++)W0(s[m],o,l,d,h);else{const m=Zt(),v=Ae();let b=jc(s)?s:re(s.provide),C=Km(s);const x=Dn(),R=1048575&x.providerIndexes,U=x.directiveStart,G=x.providerIndexes>>20;if(jc(s)||!s.multi){const J=new hl(C,h,Ep),me=K0(b,o,h?R:R+G,U);-1===me?(Ma(xa(x,v),m,b),z0(m,s,o.length),o.push(b),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),l.push(J),v.push(J)):(l[me]=J,v[me]=J)}else{const J=K0(b,o,R+G,U),me=K0(b,o,R,R+G),Fe=J>=0&&l[J],He=me>=0&&l[me];if(h&&!He||!h&&!Fe){Ma(xa(x,v),m,b);const st=function lA(s,o,l,d,h){const m=new hl(s,l,Ep);return m.multi=[],m.index=o,m.componentProviders=0,nI(m,h,d&&!l),m}(h?aA:oA,l.length,h,d,C);!h&&He&&(l[me].providerFactory=st),z0(m,s,o.length,0),o.push(b),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),l.push(st),v.push(st)}else z0(m,s,J>-1?J:me,nI(l[h?me:J],C,!h&&d));!h&&d&&He&&l[me].componentProviders++}}}function z0(s,o,l,d){const h=jc(o),m=function fh(s){return!!s.useClass}(o);if(h||m){const C=(m?re(o.useClass):o).prototype.ngOnDestroy;if(C){const x=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const R=x.indexOf(l);-1===R?x.push(l,[d,C]):x[R+1].push(d,C)}else x.push(l,C)}}}function nI(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function K0(s,o,l,d){for(let h=l;h<d;h++)if(o[h]===s)return h;return-1}function oA(s,o,l,d){return Y0(this.multi,[])}function aA(s,o,l,d){const h=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,b=ts(l,l[1],this.providerFactory.index,d);m=b.slice(0,v),Y0(h,m);for(let C=v;C<b.length;C++)m.push(b[C])}else m=[],Y0(h,m);return m}function Y0(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function uA(s,o=[]){return l=>{l.providersResolver=(d,h)=>function sA(s,o,l){const d=Zt();if(d.firstCreatePass){const h=pi(s);W0(l,d.data,d.blueprint,h,!0),W0(o,d.data,d.blueprint,h,!1)}}(d,h?h(s):s,o)}}class rI{}class hA{resolveComponentFactory(o){throw function cA(s){const o=Error(`No component factory found for ${ce(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Hp=(()=>{class s{}return s.NULL=new hA,s})();function fA(){return Oh(Dn(),Ae())}function Oh(s,o){return new wo(Tn(s,o))}let wo=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=fA,s})();function oi(s){return s instanceof wo?s.nativeElement:s}class Fh{}let pA=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function mA(){const s=Ae(),l=Jt(Dn().index,s);return function gA(s){return s[11]}(Es(l)?l:s)}(),s})(),_A=(()=>{class s{}return s.\u0275prov=dn({token:s,providedIn:"root",factory:()=>null}),s})();class $p{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const sI=new $p("13.0.3"),Q0={};function qp(s,o,l,d,h=!1){for(;null!==l;){const m=o[l.index];if(null!==m&&d.push(Un(m)),Mi(m))for(let b=10;b<m.length;b++){const C=m[b],x=C[1].firstChild;null!==x&&qp(C[1],C,x,d)}const v=l.type;if(8&v)qp(s,o,l.child,d);else if(32&v){const b=ds(l,o);let C;for(;C=b();)d.push(C)}else if(16&v){const b=Fc(o,l);if(Array.isArray(b))d.push(...b);else{const C=Mc(o[16]);qp(C[1],C,b,d,!0)}}l=h?l.projectionNext:l.next}return d}class Lh{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return qp(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Mi(o)){const l=o[8],d=l?l.indexOf(this):-1;d>-1&&(g(o,d),Zo(l,d))}this._attachedToViewContainer=!1}w(this._lView[1],this._lView)}onDestroy(o){Ib(this._lView[1],this._lView,null,o)}markForCheck(){Pv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Nn(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Bi(s,o,l){No(!0);try{Nn(s,o,l)}finally{No(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ho(s,o){Lc(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=o}}class J0 extends Lh{constructor(o){super(o),this._view=o}detectChanges(){Bt(this._view)}checkNoChanges(){!function zD(s){No(!0);try{Bt(s)}finally{No(!1)}}(this._view)}get context(){return null}}class X0 extends Hp{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=Xn(o);return new Wp(l,this.ngModule)}}function Gp(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}const tM=new pn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Sm});class Wp extends rI{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function P(s){return s.map(Vi).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return Gp(this.componentDef.inputs)}get outputs(){return Gp(this.componentDef.outputs)}create(o,l,d,h){const m=(h=h||this.ngModule)?function vA(s,o){return{get:(l,d,h)=>{const m=s.get(l,Q0,h);return m!==Q0||d===Q0?m:o.get(l,d,h)}}}(o,h.injector):o,v=m.get(Fh,Is),b=m.get(_A,null),C=v.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",R=d?function Cb(s,o,l){if(Qt(s))return s.selectRootElement(o,l===et.ShadowDom);let d="string"==typeof o?s.querySelector(o):o;return d.textContent="",d}(C,d,this.componentDef.encapsulation):Xf(v.createRenderer(null,this.componentDef),x,function yA(s){const o=s.toLowerCase();return"svg"===o?Td:"math"===o?"http://www.w3.org/1998/MathML/":null}(x)),U=this.componentDef.onPush?576:528,G=function _h(s,o){return{components:[],scheduler:s||Sm,clean:KD,playerHandler:o||null,flags:0}}(),J=lp(0,null,null,1,0,null,null,null,null,null),me=sp(null,J,G,U,null,null,v,C,b,m);let Fe,He;cc(me);try{const st=function Hv(s,o,l,d,h,m){const v=l[1];l[20]=s;const C=Su(v,20,2,"#host",null),x=C.mergedAttrs=o.hostAttrs;null!==x&&(Wm(C,x,!0),null!==s&&(en(h,s,x),null!==C.classes&&av(h,s,C.classes),null!==C.styles&&cb(h,s,C.styles)));const R=d.createRenderer(s,o),U=sp(l,Cv(o),null,o.onPush?64:16,l[20],C,d,R,m||null,null);return v.firstCreatePass&&(Ma(xa(C,l),v,o.type),xv(v,C),kv(C,l.length,1)),dh(l,U),l[20]=U}(R,this.componentDef,me,v,C);if(R)if(d)en(C,R,["ng-version",sI.full]);else{const{attrs:Ce,classes:ht}=function Jo(s){const o=[],l=[];let d=1,h=2;for(;d<s.length;){let m=s[d];if("string"==typeof m)2===h?""!==m&&o.push(m,s[++d]):8===h&&l.push(m);else{if(!Yo(h))break;h=m}d++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);Ce&&en(C,R,Ce),ht&&ht.length>0&&av(C,R,ht.join(" "))}if(He=Pi(J,20),void 0!==l){const Ce=He.projection=[];for(let ht=0;ht<this.ngContentSelectors.length;ht++){const $t=l[ht];Ce.push(null!=$t?Array.from($t):null)}}Fe=function Zc(s,o,l,d,h){const m=l[1],v=function Db(s,o,l){const d=Dn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),Rv(s,d,o,xu(s,o,1,null),l));const h=ts(o,s,d.directiveStart,d);Vr(h,o);const m=Tn(d,o);return m&&Vr(m,o),h}(m,l,o);if(d.components.push(v),s[8]=v,h&&h.forEach(C=>C(v,o)),o.contentQueries){const C=Dn();o.contentQueries(1,v,C.directiveStart)}const b=Dn();return!m.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(no(b.index),Ab(l[1],b,0,b.directiveStart,b.directiveEnd,o),Sv(o,v)),v}(st,this.componentDef,me,G,[_p]),ap(J,me,null)}finally{ul()}return new wA(this.componentType,Fe,Oh(He,me),me,He)}}class wA extends class eM{}{constructor(o,l,d,h,m){super(),this.location=d,this._rootLView=h,this._tNode=m,this.instance=l,this.hostView=this.changeDetectorRef=new J0(h),this.componentType=o}get injector(){return new Bo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class zp{}class bA{}const Kp=new Map;class oI extends zp{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new X0(this);const d=mr(o);this._bootstrapComponents=cs(d.bootstrap),this._r3Injector=fp(o,l,[{provide:zp,useValue:this},{provide:Hp,useValue:this.componentFactoryResolver}],ce(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,l=po.THROW_IF_NOT_FOUND,d=ct.Default){return o===po||o===zp||o===Fv?this:this._r3Injector.get(o,l,d)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class ew extends bA{constructor(o){super(),this.moduleType=o,null!==mr(o)&&function rM(s){const o=new Set;!function l(d){const h=mr(d,!0),m=h.id;null!==m&&(function CA(s,o,l){if(o&&o!==l)throw new Error(`Duplicate module registered for ${s} - ${ce(o)} vs ${ce(o.name)}`)}(m,Kp.get(m),d),Kp.set(m,d));const v=cs(h.imports);for(const b of v)o.has(b)||(o.add(b),l(b))}(s)}(o)}create(o){return new oI(this.moduleType,o)}}function Yp(s,o){const l=s[o];return l===kt?void 0:l}function Ci(s,o,l,d,h,m,v){const b=o+l;return function qc(s,o,l,d){const h=Hr(s,o,l);return Hr(s,o+1,d)||h}(s,b,h,m)?ji(s,b+2,v?d.call(v,h,m):d(h,m)):Yp(s,b+2)}function Jp(s,o){const l=Zt();let d;const h=s+20;l.firstCreatePass?(d=function rw(s,o){if(o)for(let l=o.length-1;l>=0;l--){const d=o[l];if(s===d.name)return d}}(o,l.pipeRegistry),l.data[h]=d,d.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(h,d.onDestroy)):d=l.data[h];const m=d.factory||(d.factory=Qi(d.type)),v=gr(Ep);try{const b=iu(!1),C=m();return iu(b),function Wc(s,o,l,d){l>=s.data.length&&(s.data[l]=null,s.blueprint[l]=null),o[l]=d}(l,Ae(),h,C),C}finally{gr(v)}}function D_(s,o,l){const d=s+20,h=Ae(),m=So(h,d);return Xp(h,d)?function lI(s,o,l,d,h,m){const v=o+l;return Hr(s,v,h)?ji(s,v+1,m?d.call(m,h):d(h)):Yp(s,v+1)}(h,lr(),o,m.transform,l,m):m.transform(l)}function uI(s,o,l,d){const h=s+20,m=Ae(),v=So(m,h);return Xp(m,h)?Ci(m,lr(),o,v.transform,l,d,v):v.transform(l,d)}function Xp(s,o){return s[1].data[o].pure}function A_(s){return o=>{setTimeout(s,void 0,o)}}const Bs=class eg extends u.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,d){var h,m,v;let b=o,C=l||(()=>null),x=d;if(o&&"object"==typeof o){const U=o;b=null===(h=U.next)||void 0===h?void 0:h.bind(U),C=null===(m=U.error)||void 0===m?void 0:m.bind(U),x=null===(v=U.complete)||void 0===v?void 0:v.bind(U)}this.__isAsync&&(C=A_(C),b&&(b=A_(b)),x&&(x=A_(x)));const R=super.subscribe({next:b,error:C,complete:x});return o instanceof te.w0&&o.add(R),R}};function cI(){return this._results[Nl()]()}class iw{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Nl(),d=iw.prototype;d[l]||(d[l]=cI)}get changes(){return this._changes||(this._changes=new Bs)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const d=this;d.dirty=!1;const h=vi(o);(this._changesDetected=!function jo(s,o,l){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],m=o[d];if(l&&(h=l(h),m=l(m)),m!==h)return!1}return!0}(d._results,h,l))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let tg=(()=>{class s{}return s.__NG_ELEMENT_ID__=dI,s})();const PA=tg,OA=class extends PA{constructor(o,l,d){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(o){const l=this._declarationTContainer.tViews,d=sp(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(d[19]=m.createEmbeddedView(l)),ap(l,d,o),new Lh(d)}};function dI(){return Uh(Dn(),Ae())}function Uh(s,o){return 4&s.type?new OA(o,s,Oh(s,o)):null}let ng=(()=>{class s{}return s.__NG_ELEMENT_ID__=sw,s})();function sw(){return ow(Dn(),Ae())}const hI=ng,Vh=class extends hI{constructor(o,l,d){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=d}get element(){return Oh(this._hostTNode,this._hostLView)}get injector(){return new Bo(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ra(this._hostTNode,this._hostLView);if(er(o)){const l=gl(o,this._hostLView),d=Sa(o);return new Bo(l[1].data[d+8],l)}return new Bo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=fI(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,d){const h=o.createEmbeddedView(l||{});return this.insert(h,d),h}createComponent(o,l,d,h,m){const v=o&&!function lu(s){return"function"==typeof s}(o);let b;if(v)b=l;else{const U=l||{};b=U.index,d=U.injector,h=U.projectableNodes,m=U.ngModuleRef}const C=v?o:new Wp(Xn(o)),x=d||this.parentInjector;if(!m&&null==C.ngModule&&x){const U=x.get(zp,null);U&&(m=U)}const R=C.create(x,h,void 0,m);return this.insert(R.hostView,b),R}insert(o,l){const d=o._lView,h=d[1];if(function Ds(s){return Mi(s[3])}(d)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const U=d[3],G=new Vh(U,U[6],U[3]);G.detach(G.indexOf(o))}}const m=this._adjustIndex(l),v=this._lContainer;!function sv(s,o,l,d){const h=10+d,m=l.length;d>0&&(l[h-1][4]=o),d<m-10?(o[4]=l[h],Ud(l,10+d,o)):(l.push(o),o[4]=null),o[3]=l;const v=o[17];null!==v&&l!==v&&function y(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(v,o);const b=o[19];null!==b&&b.insertView(s),o[2]|=128}(h,d,v,m);const b=lh(m,v),C=d[11],x=Yn(C,v[7]);return null!==x&&function Sl(s,o,l,d,h,m){d[0]=h,d[6]=o,Lc(s,d,l,1,h,m)}(h,v[6],C,d,x,b),o.attachToViewContainerRef(),Ud(rg(v),m,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=fI(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),d=g(this._lContainer,l);d&&(Zo(rg(this._lContainer),l),w(d[1],d))}detach(o){const l=this._adjustIndex(o,-1),d=g(this._lContainer,l);return d&&null!=Zo(rg(this._lContainer),l)?new Lh(d):null}_adjustIndex(o,l=0){return null==o?this.length+l:o}};function fI(s){return s[8]}function rg(s){return s[8]||(s[8]=[])}function ow(s,o){let l;const d=o[s.index];if(Mi(d))l=d;else{let h;if(8&s.type)h=Un(d);else{const m=o[11];h=m.createComment("");const v=Tn(s,o);Ie(m,Yn(m,v),h,function Ua(s,o){return Qt(s)?s.nextSibling(o):o.nextSibling}(m,v),!1)}o[s.index]=l=Nv(d,o,h,s),dh(o,l)}return new Vh(l,s,o)}class S_{constructor(o){this.queryList=o,this.matches=null}clone(){return new S_(this.queryList)}setDirty(){this.queryList.setDirty()}}class ig{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const d=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let m=0;m<d;m++){const v=l.getByIndex(m);h.push(this.queries[v.indexInDeclarationView].clone())}return new ig(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==vI(o,l).matches&&this.queries[l].setDirty()}}class pI{constructor(o,l,d=null){this.predicate=o,this.flags=l,this.read=d}}class lw{constructor(o=[]){this.queries=o}elementStart(o,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let d=0;d<this.length;d++){const h=null!==l?l.length:0,m=this.getByIndex(d).embeddedTView(o,h);m&&(m.indexInDeclarationView=d,null!==l?l.push(m):l=[m])}return null!==l?new lw(l):null}template(o,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class uw{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new uw(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const m=d[h];this.matchTNodeWithReadOption(o,l,x_(l,m)),this.matchTNodeWithReadOption(o,l,Ss(l,o,m,!1,!1))}else d===tg?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,Ss(l,o,d,!1,!1))}matchTNodeWithReadOption(o,l,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===wo||h===ng||h===tg&&4&l.type)this.addMatch(l.index,-2);else{const m=Ss(l,o,h,!1,!1);null!==m&&this.addMatch(l.index,m)}else this.addMatch(l.index,d)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function x_(s,o){const l=s.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===o)return l[d+1];return null}function dw(s,o,l,d){return-1===l?function cw(s,o){return 11&s.type?Oh(s,o):4&s.type?Uh(s,o):null}(o,s):-2===l?function hw(s,o,l){return l===wo?Oh(o,s):l===tg?Uh(o,s):l===ng?ow(o,s):void 0}(s,o,d):ts(s,s[1],l,o)}function fw(s,o,l,d){const h=o[19].queries[d];if(null===h.matches){const m=s.data,v=l.matches,b=[];for(let C=0;C<v.length;C+=2){const x=v[C];b.push(x<0?null:dw(o,m[x],v[C+1],l.metadata.read))}h.matches=b}return h.matches}function pw(s,o,l,d){const h=s.queries.getByIndex(l),m=h.matches;if(null!==m){const v=fw(s,o,h,l);for(let b=0;b<m.length;b+=2){const C=m[b];if(C>0)d.push(v[b/2]);else{const x=m[b+1],R=o[-C];for(let U=10;U<R.length;U++){const G=R[U];G[17]===G[3]&&pw(G[1],G,x,d)}if(null!==R[9]){const U=R[9];for(let G=0;G<U.length;G++){const J=U[G];pw(J[1],J,x,d)}}}}}return d}function gw(s){const o=Ae(),l=Zt(),d=Ql();ol(d+1);const h=vI(l,d);if(s.dirty&&Ja(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const m=h.crossesNgTemplate?pw(l,o,d,[]):fw(l,o,h,d);s.reset(m,oi),s.notifyOnChanges()}return!0}return!1}function gI(s,o,l,d){const h=Zt();if(h.firstCreatePass){const m=Dn();(function yI(s,o,l){null===s.queries&&(s.queries=new lw),s.queries.track(new uw(o,l))})(h,new pI(o,l,d),m.index),function VA(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}!function _I(s,o,l){const d=new iw(4==(4&l));Ib(s,o,d,d.destroy),null===o[19]&&(o[19]=new ig),o[19].queries.push(new S_(d))}(h,Ae(),l)}function mI(){return function UA(s,o){return s[19].queries[o].queryList}(Ae(),Ql())}function vI(s,o){return s.queries.getByIndex(o)}function wI(s,o){return Uh(s,o)}function lg(...s){}const L_=new pn("Application Initializer");let ed=(()=>{class s{constructor(l){this.appInits=l,this.resolve=lg,this.reject=lg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,h)=>{this.resolve=d,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(u0(m))l.push(m);else if(lC(m)){const v=new Promise((b,C)=>{m.subscribe({complete:b,error:C})});l.push(v)}}Promise.all(l).then(()=>{d()}).catch(h=>{this.reject(h)}),0===l.length&&d(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(pt(L_,8))},s.\u0275prov=dn({token:s,factory:s.\u0275fac}),s})();const jh=new pn("AppId"),OI={provide:jh,useFactory:function eS(){return`${Ew()}${Ew()}${Ew()}`},deps:[]};function Ew(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const FI=new pn("Platform Initializer"),bw=new pn("Platform ID"),Cw=new pn("appBootstrapListener");let LI=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=dn({token:s,factory:s.\u0275fac}),s})();const U_=new pn("LocaleId"),UI=new pn("DefaultCurrencyCode");class VI{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let Iw=(()=>{class s{compileModuleSync(l){return new ew(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),m=cs(mr(l).declarations).reduce((v,b)=>{const C=Xn(b);return C&&v.push(new Wp(C)),v},[]);return new VI(d,m)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=dn({token:s,factory:s.\u0275fac}),s})();const Tw=(()=>Promise.resolve(0))();function Dw(s){"undefined"==typeof Zone?Tw.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class js{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bs(!1),this.onMicrotaskEmpty=new Bs(!1),this.onStable=new Bs(!1),this.onError=new Bs(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&l,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Aw(){let s=wt.requestAnimationFrame,o=wt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Rt(s){const o=()=>{!function Sw(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(wt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Zh(s),s.isCheckStableRunning=!0,it(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Zh(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,h,m,v,b)=>{try{return V_(s),l.invokeTask(h,m,v,b)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),Hh(s)}},onInvoke:(l,d,h,m,v,b,C)=>{try{return V_(s),l.invoke(h,m,v,b,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),Hh(s)}},onHasTask:(l,d,h,m)=>{l.hasTask(h,m),d===h&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,Zh(s),it(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(l,d,h,m)=>(l.handleError(h,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!js.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(js.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,l,d){return this._inner.run(o,l,d)}runTask(o,l,d,h){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+h,o,jl,lg,lg);try{return m.runTask(v,l,d)}finally{m.cancelTask(v)}}runGuarded(o,l,d){return this._inner.runGuarded(o,l,d)}runOutsideAngular(o){return this._outer.run(o)}}const jl={};function it(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Zh(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function V_(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Hh(s){s._nesting--,it(s)}class iS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bs,this.onMicrotaskEmpty=new Bs,this.onStable=new Bs,this.onError=new Bs}run(o,l,d){return o.apply(l,d)}runGuarded(o,l,d){return o.apply(l,d)}runOutsideAngular(o){return o()}runTask(o,l,d,h){return o.apply(l,d)}}let B_=(()=>{class s{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{js.assertNotInAngularZone(),Dw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Dw(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,h){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:m,updateCb:h})}whenStable(l,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,d,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(pt(js))},s.\u0275prov=dn({token:s,factory:s.\u0275fac}),s})(),BI=(()=>{class s{constructor(){this._applications=new Map,Nr.addToWindow(this)}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return Nr.findTestabilityInTree(this,l,d)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=dn({token:s,factory:s.\u0275fac}),s})();class sS{addToWindow(o){}findTestabilityInTree(o,l,d){return null}}function oS(s){Nr=s}let ms,Nr=new sS;const jI=new pn("AllowMultipleToken");class ZI{constructor(o,l){this.name=o,this.token=l}}function $I(s,o,l=[]){const d=`Platform: ${o}`,h=new pn(d);return(m=[])=>{let v=ug();if(!v||v.injector.get(jI,!1))if(s)s(l.concat(m).concat({provide:h,useValue:!0}));else{const b=l.concat(m).concat({provide:h,useValue:!0},{provide:Rl,useValue:"platform"});!function HI(s){if(ms&&!ms.destroyed&&!ms.injector.get(jI,!1))throw new Ze("400","");ms=s.get(xw);const o=s.get(FI,null);o&&o.forEach(l=>l())}(po.create({providers:b,name:d}))}return function qI(s){const o=ug();if(!o)throw new Ze("401","");return o}()}}function ug(){return ms&&!ms.destroyed?ms:null}let xw=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const b=function Hi(s,o){let l;return l="noop"===s?new iS:("zone.js"===s?void 0:s)||new js({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),l}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),C=[{provide:js,useValue:b}];return b.run(()=>{const x=po.create({providers:C,parent:this.injector,name:l.moduleType.name}),R=l.create(x),U=R.injector.get(zo,null);if(!U)throw new Ze("402","");return b.runOutsideAngular(()=>{const G=b.onError.subscribe({next:J=>{U.handleError(J)}});R.onDestroy(()=>{j_(this._modules,R),G.unsubscribe()})}),function kw(s,o,l){try{const d=l();return u0(d)?d.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}(U,b,()=>{const G=R.injector.get(ed);return G.runInitializers(),G.donePromise.then(()=>(function U1(s){qt(s,"Expected localeId to be defined"),"string"==typeof s&&(Vp=s.toLowerCase().replace(/_/g,"-"))}(R.injector.get(U_,Up)||Up),this._moduleDoBootstrap(R),R))})})}bootstrapModule(l,d=[]){const h=Ii({},d);return function ai(s,o,l){const d=new ew(l);return Promise.resolve(d)}(0,0,l).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(l){const d=l.injector.get($h);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new Ze("403","");l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ze("404","");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(pt(po))},s.\u0275prov=dn({token:s,factory:s.\u0275fac}),s})();function Ii(s,o){return Array.isArray(o)?o.reduce(Ii,s):Object.assign(Object.assign({},s),o)}let $h=(()=>{class s{constructor(l,d,h,m,v){this._zone=l,this._injector=d,this._exceptionHandler=h,this._componentFactoryResolver=m,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const b=new L.y(x=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{x.next(this._stable),x.complete()})}),C=new L.y(x=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{js.assertNotInAngularZone(),Dw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,x.next(!0))})})});const U=this._zone.onUnstable.subscribe(()=>{js.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{x.next(!1)}))});return()=>{R.unsubscribe(),U.unsubscribe()}});this.isStable=(0,le.T)(b,C.pipe((0,ue.B)()))}bootstrap(l,d){if(!this._initStatus.done)throw new Ze("405","");let h;h=l instanceof rI?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(h.componentType);const m=function aS(s){return s.isBoundToModule}(h)?void 0:this._injector.get(zp),b=h.create(po.NULL,[],d||h.selector,m),C=b.location.nativeElement,x=b.injector.get(B_,null),R=x&&b.injector.get(BI);return x&&R&&R.registerApplication(C,x),b.onDestroy(()=>{this.detachView(b.hostView),j_(this.components,b),R&&R.unregisterApplication(C)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new Ze("101","");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;j_(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(Cw,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(l){return new(l||s)(pt(js),pt(po),pt(zo),pt(Hp),pt(ed))},s.\u0275prov=dn({token:s,factory:s.\u0275fac}),s})();function j_(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let Rw=!0,Mw=!1;function Nw(){return Mw=!0,Rw}function lS(){if(Mw)throw new Error("Cannot enable prod mode after platform setup.");Rw=!1}let Ow=(()=>{class s{}return s.__NG_ELEMENT_ID__=zI,s})();function zI(s){return function uS(s,o,l){if(Qs(s)&&!l){const d=Jt(s.index,o);return new Lh(d,d)}return 47&s.type?new Lh(o[16],o):null}(Dn(),Ae(),16==(16&s))}class jw{constructor(){}supports(o){return vh(o)}create(o){return new Zw(o)}}const iT=(s,o)=>o;class Zw{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||iT}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,d=this._removalsHead,h=0,m=null;for(;l||d;){const v=!d||l&&l.currentIndex<q_(d,h,m)?l:d,b=q_(v,h,m),C=v.currentIndex;if(v===d)h--,d=d._nextRemoved;else if(l=l._next,null==v.previousIndex)h++;else{m||(m=[]);const x=b-h,R=C-h;if(x!=R){for(let G=0;G<x;G++){const J=G<m.length?m[G]:m[G]=0,me=J+G;R<=me&&me<x&&(m[G]=J+1)}m[v.previousIndex]=R-x}}b!==C&&o(v,b,C)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!vh(o))throw new Error(`Error trying to diff '${ce(o)}'. Only arrays and iterables are allowed`);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,m,v,l=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let b=0;b<this.length;b++)m=o[b],v=this._trackByFn(b,m),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,m,v,b)),Object.is(l.item,m)||this._addIdentityChange(l,m)):(l=this._mismatch(l,m,v,b),d=!0),l=l._next}else h=0,function l1(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[Nl()]();let d;for(;!(d=l.next()).done;)o(d.value)}}(o,b=>{v=this._trackByFn(h,b),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,b,v,h)),Object.is(l.item,b)||this._addIdentityChange(l,b)):(l=this._mismatch(l,b,v,h),d=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,d,h){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,m,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,m,h)):o=this._addAfter(new sT(l,d),m,h),o}_verifyReinsertion(o,l,d,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?o=this._reinsertAfter(m,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,m=o._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(o,l,d),this._addToMoves(o,d),o}_moveAfter(o,l,d){return this._unlink(o),this._insertAfter(o,l,d),this._addToMoves(o,d),o}_addAfter(o,l,d){return this._insertAfter(o,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,d){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new $_),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,d=o._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $_),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class sT{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class pS{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const l=o._prevDup,d=o._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class $_{constructor(){this.map=new Map}put(o){const l=o.trackById;let d=this.map.get(l);d||(d=new pS,this.map.set(l,d)),d.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function q_(s,o,l){const d=s.previousIndex;if(null===d)return d;let h=0;return l&&d<l.length&&(h=l[d]),d+o+h}class G_{constructor(){}supports(o){return o instanceof Map||wh(o)}create(){return new qr}}class qr{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||wh(o)))throw new Error(`Error trying to diff '${ce(o)}'. Only maps and objects are allowed`)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const m=this._getOrCreateRecordForKey(h,d);l=this._insertBeforeOrAppend(l,m)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const d=o._prev;return l._next=o,l._prev=d,o._prev=l,d&&(d._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const m=h._prev,v=h._next;return m&&(m._next=v),v&&(v._prev=m),h._next=null,h._prev=null,h}const d=new ui(o);return this._records.set(o,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(d=>l(o[d],d))}}class ui{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function pg(){return new qh([new jw])}let qh=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(null!=d){const h=d.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||pg()),deps:[[s,new It,new ut]]}}find(l){const d=this.factories.find(h=>h.supports(l));if(null!=d)return d;throw new Error(`Cannot find a differ supporting object '${l}' of type '${function gS(s){return s.name||typeof s}(l)}'`)}}return s.\u0275prov=dn({token:s,providedIn:"root",factory:pg}),s})();function oT(){return new gg([new G_])}let gg=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(d){const h=d.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||oT()),deps:[[s,new It,new ut]]}}find(l){const d=this.factories.find(h=>h.supports(l));if(d)return d;throw new Error(`Cannot find a differ supporting object '${l}'`)}}return s.\u0275prov=dn({token:s,providedIn:"root",factory:oT}),s})();const mS=[new G_],Hw=new qh([new jw]),$w=new gg(mS),qw=$I(null,"core",[{provide:bw,useValue:"unknown"},{provide:xw,deps:[po]},{provide:BI,deps:[]},{provide:LI,deps:[]}]),Ww=[{provide:$h,useClass:$h,deps:[js,po,zo,Hp,ed]},{provide:tM,deps:[js],useFactory:function lT(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(l){o.push(l)}}},{provide:ed,useClass:ed,deps:[[new ut,L_]]},{provide:Iw,useClass:Iw,deps:[]},OI,{provide:qh,useFactory:function aT(){return Hw},deps:[]},{provide:gg,useFactory:function yS(){return $w},deps:[]},{provide:U_,useFactory:function W_(s){return s||function Gw(){return"undefined"!=typeof $localize&&$localize.locale||Up}()},deps:[[new Ue(U_),new ut,new It]]},{provide:UI,useValue:"USD"}];let vS=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(pt($h))},s.\u0275mod=hi({type:s}),s.\u0275inj=Gn({providers:Ww}),s})()},3942:(Je,ve,F)=>{F.d(ve,{Z:()=>Ze});var u=F(2090),te=F(4859),L=F(9681),le=F(1877);class ue{constructor(Le,ne){this._delegate=Le,this.firebase=ne,(0,L._addComponent)(Le,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=Le.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Le){this._delegate.automaticDataCollectionEnabled=Le}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Le=>{this._delegate.checkDestroyed(),Le()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(Le,ne=L._DEFAULT_ENTRY_NAME){var be;this._delegate.checkDestroyed();const Ve=this._delegate.container.getProvider(Le);return!Ve.isInitialized()&&"EXPLICIT"===(null===(be=Ve.getComponent())||void 0===be?void 0:be.instantiationMode)&&Ve.initialize(),Ve.getImmediate({identifier:ne})}_removeServiceInstance(Le,ne=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Le).clearInstance(ne)}_addComponent(Le){(0,L._addComponent)(this._delegate,Le)}_addOrOverwriteComponent(Le){(0,L._addOrOverwriteComponent)(this._delegate,Le)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function pe(){const je=function ce(je){const Le={},ne={__esModule:!0,initializeApp:function Pe(Ke,Ee={}){const Y=L.initializeApp(Ke,Ee);if((0,u.r3)(Le,Y.name))return Le[Y.name];const X=new je(Y,ne);return Le[Y.name]=X,X},app:Ve,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function Ne(Ke){const Ee=Ke.name,Y=Ee.replace("-compat","");if(L._registerComponent(Ke)&&"PUBLIC"===Ke.type){const X=(de=Ve())=>{if("function"!=typeof de[Y])throw he.create("invalid-app-argument",{appName:Ee});return de[Y]()};void 0!==Ke.serviceProps&&(0,u.ZB)(X,Ke.serviceProps),ne[Y]=X,je.prototype[Y]=function(...de){return this._getService.bind(this,Ee).apply(this,Ke.multipleInstances?de:[])}}return"PUBLIC"===Ke.type?ne[Y]:null},removeApp:function be(Ke){delete Le[Ke]},useAsService:function qe(Ke,Ee){return"serverAuth"===Ee?null:Ee},modularAPIs:L}};function Ve(Ke){if(!(0,u.r3)(Le,Ke=Ke||L._DEFAULT_ENTRY_NAME))throw he.create("no-app",{appName:Ke});return Le[Ke]}return ne.default=ne,Object.defineProperty(ne,"apps",{get:function ot(){return Object.keys(Le).map(Ke=>Le[Ke])}}),Ve.App=je,ne}(ue);return je.INTERNAL=Object.assign(Object.assign({},je.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function Le(ne){(0,u.ZB)(je,ne)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),je}(),z=new le.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const je=self.firebase.SDK_VERSION;je&&je.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ze=$;!function De(je){(0,L.registerVersion)("@firebase/app-compat","0.1.32",je)}()},9681:(Je,ve,F)=>{F.r(ve),F.d(ve,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>Do,_DEFAULT_ENTRY_NAME:()=>yt,_addComponent:()=>or,_addOrOverwriteComponent:()=>di,_apps:()=>Ct,_clearComponents:()=>zi,_components:()=>sn,_getProvider:()=>ws,_registerComponent:()=>dn,_removeServiceInstance:()=>Gn,deleteApp:()=>pr,getApp:()=>fr,getApps:()=>Re,initializeApp:()=>Yr,onLog:()=>Fn,registerVersion:()=>Cn,setLogLevel:()=>gr});var u=F(5861),te=F(4859),L=F(1877),le=F(2090),ue=F(8766);class we{constructor(K){this.container=K}getPlatformInfoString(){return this.container.getProviders().map(q=>{if(function he(B){const K=B.getComponent();return"VERSION"===(null==K?void 0:K.type)}(q)){const Te=q.getImmediate();return`${Te.library}/${Te.version}`}return null}).filter(q=>q).join(" ")}}const ce="@firebase/app",$=new L.Yd("@firebase/app"),yt="[DEFAULT]",qt={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ct=new Map,sn=new Map;function or(B,K){try{B.container.addComponent(K)}catch(q){$.debug(`Component ${K.name} failed to register with FirebaseApp ${B.name}`,q)}}function di(B,K){B.container.addOrOverwriteComponent(K)}function dn(B){const K=B.name;if(sn.has(K))return $.debug(`There were multiple attempts to register component ${K}.`),!1;sn.set(K,B);for(const q of Ct.values())or(q,B);return!0}function ws(B,K){const q=B.container.getProvider("heartbeat").getImmediate({optional:!0});return q&&q.triggerHeartbeat(),B.container.getProvider(K)}function Gn(B,K,q=yt){ws(B,K).clearInstance(q)}function zi(){sn.clear()}const Yt=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Bn{constructor(K,q,Te){this._isDeleted=!1,this._options=Object.assign({},K),this._config=Object.assign({},q),this._name=q.name,this._automaticDataCollectionEnabled=q.automaticDataCollectionEnabled,this._container=Te,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(K){this.checkDestroyed(),this._automaticDataCollectionEnabled=K}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(K){this._isDeleted=K}checkDestroyed(){if(this.isDeleted)throw Yt.create("app-deleted",{appName:this._name})}}const Do="9.9.3";function Yr(B,K={}){"object"!=typeof K&&(K={name:K});const q=Object.assign({name:yt,automaticDataCollectionEnabled:!1},K),Te=q.name;if("string"!=typeof Te||!Te)throw Yt.create("bad-app-name",{appName:String(Te)});const Ge=Ct.get(Te);if(Ge){if((0,le.vZ)(B,Ge.options)&&(0,le.vZ)(q,Ge.config))return Ge;throw Yt.create("duplicate-app",{appName:Te})}const mt=new te.H0(Te);for(const hn of sn.values())mt.addComponent(hn);const Xt=new Bn(B,q,mt);return Ct.set(Te,Xt),Xt}function fr(B=yt){const K=Ct.get(B);if(!K)throw Yt.create("no-app",{appName:B});return K}function Re(){return Array.from(Ct.values())}function pr(B){return ct.apply(this,arguments)}function ct(){return(ct=(0,u.Z)(function*(B){const K=B.name;Ct.has(K)&&(Ct.delete(K),yield Promise.all(B.container.getProviders().map(q=>q.delete())),B.isDeleted=!0)})).apply(this,arguments)}function Cn(B,K,q){var Te;let Ge=null!==(Te=qt[B])&&void 0!==Te?Te:B;q&&(Ge+=`-${q}`);const mt=Ge.match(/\s|\//),Xt=K.match(/\s|\//);if(mt||Xt){const hn=[`Unable to register library "${Ge}" with version "${K}":`];return mt&&hn.push(`library name "${Ge}" contains illegal characters (whitespace or "/")`),mt&&Xt&&hn.push("and"),Xt&&hn.push(`version name "${K}" contains illegal characters (whitespace or "/")`),void $.warn(hn.join(" "))}dn(new te.wA(`${Ge}-version`,()=>({library:Ge,version:K}),"VERSION"))}function Fn(B,K){if(null!==B&&"function"!=typeof B)throw Yt.create("invalid-log-argument");(0,L.Am)(B,K)}function gr(B){(0,L.Ub)(B)}const Wn="firebase-heartbeat-store";let wn=null;function qa(){return wn||(wn=(0,ue.X3)("firebase-heartbeat-database",1,{upgrade:(B,K)=>{0===K&&B.createObjectStore(Wn)}}).catch(B=>{throw Yt.create("idb-open",{originalErrorMessage:B.message})})),wn}function et(){return(et=(0,u.Z)(function*(B){var K;try{return(yield qa()).transaction(Wn).objectStore(Wn).get(ki(B))}catch(q){if(q instanceof le.ZR)$.warn(q.message);else{const Te=Yt.create("idb-get",{originalErrorMessage:null===(K=q)||void 0===K?void 0:K.message});$.warn(Te.message)}}})).apply(this,arguments)}function vt(B,K){return zs.apply(this,arguments)}function zs(){return(zs=(0,u.Z)(function*(B,K){var q;try{const Ge=(yield qa()).transaction(Wn,"readwrite");return yield Ge.objectStore(Wn).put(K,ki(B)),Ge.done}catch(Te){if(Te instanceof le.ZR)$.warn(Te.message);else{const Ge=Yt.create("idb-set",{originalErrorMessage:null===(q=Te)||void 0===q?void 0:q.message});$.warn(Ge.message)}}})).apply(this,arguments)}function ki(B){return`${B.name}!${B.options.appId}`}class zt{constructor(K){this.container=K,this._heartbeatsCache=null;const q=this.container.getProvider("app").getImmediate();this._storage=new Gt(q),this._heartbeatsCachePromise=this._storage.read().then(Te=>(this._heartbeatsCache=Te,Te))}triggerHeartbeat(){var K=this;return(0,u.Z)(function*(){const Te=K.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ge=pa();if(null===K._heartbeatsCache&&(K._heartbeatsCache=yield K._heartbeatsCachePromise),K._heartbeatsCache.lastSentHeartbeatDate!==Ge&&!K._heartbeatsCache.heartbeats.some(mt=>mt.date===Ge))return K._heartbeatsCache.heartbeats.push({date:Ge,agent:Te}),K._heartbeatsCache.heartbeats=K._heartbeatsCache.heartbeats.filter(mt=>{const Xt=new Date(mt.date).valueOf();return Date.now()-Xt<=2592e6}),K._storage.overwrite(K._heartbeatsCache)})()}getHeartbeatsHeader(){var K=this;return(0,u.Z)(function*(){if(null===K._heartbeatsCache&&(yield K._heartbeatsCachePromise),null===K._heartbeatsCache||0===K._heartbeatsCache.heartbeats.length)return"";const q=pa(),{heartbeatsToSend:Te,unsentEntries:Ge}=function Wt(B,K=1024){const q=[];let Te=B.slice();for(const Ge of B){const mt=q.find(Xt=>Xt.agent===Ge.agent);if(mt){if(mt.dates.push(Ge.date),H(q)>K){mt.dates.pop();break}}else if(q.push({agent:Ge.agent,dates:[Ge.date]}),H(q)>K){q.pop();break}Te=Te.slice(1)}return{heartbeatsToSend:q,unsentEntries:Te}}(K._heartbeatsCache.heartbeats),mt=(0,le.L)(JSON.stringify({version:2,heartbeats:Te}));return K._heartbeatsCache.lastSentHeartbeatDate=q,Ge.length>0?(K._heartbeatsCache.heartbeats=Ge,yield K._storage.overwrite(K._heartbeatsCache)):(K._heartbeatsCache.heartbeats=[],K._storage.overwrite(K._heartbeatsCache)),mt})()}}function pa(){return(new Date).toISOString().substring(0,10)}class Gt{constructor(K){this.app=K,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var K=this;return(0,u.Z)(function*(){return(yield K._canUseIndexedDBPromise)&&(yield function xn(B){return et.apply(this,arguments)}(K.app))||{heartbeats:[]}})()}overwrite(K){var q=this;return(0,u.Z)(function*(){var Te;if(yield q._canUseIndexedDBPromise){const mt=yield q.read();return vt(q.app,{lastSentHeartbeatDate:null!==(Te=K.lastSentHeartbeatDate)&&void 0!==Te?Te:mt.lastSentHeartbeatDate,heartbeats:K.heartbeats})}})()}add(K){var q=this;return(0,u.Z)(function*(){var Te;if(yield q._canUseIndexedDBPromise){const mt=yield q.read();return vt(q.app,{lastSentHeartbeatDate:null!==(Te=K.lastSentHeartbeatDate)&&void 0!==Te?Te:mt.lastSentHeartbeatDate,heartbeats:[...mt.heartbeats,...K.heartbeats]})}})()}}function H(B){return(0,le.L)(JSON.stringify({version:2,heartbeats:B})).length}!function W(B){dn(new te.wA("platform-logger",K=>new we(K),"PRIVATE")),dn(new te.wA("heartbeat",K=>new zt(K),"PRIVATE")),Cn(ce,"0.7.31",B),Cn(ce,"0.7.31","esm2017"),Cn("fire-js","")}("")},4859:(Je,ve,F)=>{F.d(ve,{H0:()=>ce,wA:()=>L,zt:()=>ue});var u=F(5861),te=F(2090);class L{constructor($,z,re){this.name=$,this.instanceFactory=z,this.type=re,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const le="[DEFAULT]";class ue{constructor($,z){this.name=$,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const z=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(z)){const re=new te.BH;if(this.instancesDeferred.set(z,re),this.isInitialized(z)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:z});$e&&re.resolve($e)}catch($e){}}return this.instancesDeferred.get(z).promise}getImmediate($){var z;const re=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),$e=null!==(z=null==$?void 0:$.optional)&&void 0!==z&&z;if(!this.isInitialized(re)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:re})}catch(De){if($e)return null;throw De}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function he(pe){return"EAGER"===pe.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:le})}catch(z){}for(const[z,re]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(z);try{const De=this.getOrInitializeService({instanceIdentifier:$e});re.resolve(De)}catch(De){}}}}clearInstance($=le){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,u.Z)(function*(){const z=Array.from($.instances.values());yield Promise.all([...z.filter(re=>"INTERNAL"in re).map(re=>re.INTERNAL.delete()),...z.filter(re=>"_delete"in re).map(re=>re._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=le){return this.instances.has($)}getOptions($=le){return this.instancesOptions.get($)||{}}initialize($={}){const{options:z={}}=$,re=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(re))throw Error(`${this.name}(${re}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:re,options:z});for(const[De,Ze]of this.instancesDeferred.entries())re===this.normalizeInstanceIdentifier(De)&&Ze.resolve($e);return $e}onInit($,z){var re;const $e=this.normalizeInstanceIdentifier(z),De=null!==(re=this.onInitCallbacks.get($e))&&void 0!==re?re:new Set;De.add($),this.onInitCallbacks.set($e,De);const Ze=this.instances.get($e);return Ze&&$(Ze,$e),()=>{De.delete($)}}invokeOnInitCallbacks($,z){const re=this.onInitCallbacks.get(z);if(re)for(const $e of re)try{$e($,z)}catch(De){}}getOrInitializeService({instanceIdentifier:$,options:z={}}){let re=this.instances.get($);if(!re&&this.component&&(re=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=$,pe===le?void 0:pe),options:z}),this.instances.set($,re),this.instancesOptions.set($,z),this.invokeOnInitCallbacks(re,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,re)}catch($e){}var pe;return re||null}normalizeInstanceIdentifier($=le){return this.component?this.component.multipleInstances?$:le:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor($){this.name=$,this.providers=new Map}addComponent($){const z=this.getProvider($.name);if(z.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);z.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const z=new ue($,this);return this.providers.set($,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(Je,ve,F)=>{F.d(ve,{Am:()=>pe,Ub:()=>ce,Yd:()=>he,in:()=>te});const u=[];var te=(()=>{return($=te||(te={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",te;var $})();const L={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},le=te.INFO,ue={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},we=($,z,...re)=>{if(z<$.logLevel)return;const $e=(new Date).toISOString(),De=ue[z];if(!De)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[De](`[${$e}]  ${$.name}:`,...re)};class he{constructor(z){this.name=z,this._logLevel=le,this._logHandler=we,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in te))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?L[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...z),this._logHandler(this,te.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...z),this._logHandler(this,te.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,te.INFO,...z),this._logHandler(this,te.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,te.WARN,...z),this._logHandler(this,te.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...z),this._logHandler(this,te.ERROR,...z)}}function ce($){u.forEach(z=>{z.setLogLevel($)})}function pe($,z){for(const re of u){let $e=null;z&&z.level&&($e=L[z.level]),re.userLogHandler=null===$?null:(De,Ze,...je)=>{const Le=je.map(ne=>{if(null==ne)return null;if("string"==typeof ne)return ne;if("number"==typeof ne||"boolean"==typeof ne)return ne.toString();if(ne instanceof Error)return ne.message;try{return JSON.stringify(ne)}catch(be){return null}}).filter(ne=>ne).join(" ");Ze>=(null!=$e?$e:De.logLevel)&&$({level:te[Ze].toLowerCase(),message:Le,args:je,type:De.name})}}}},8766:(Je,ve,F)=>{F.d(ve,{Lj:()=>Pe,X3:()=>Ve});var u=F(5861);let L,le;const he=new WeakMap,ce=new WeakMap,pe=new WeakMap,$=new WeakMap,z=new WeakMap;let De={get(Ee,Y,X){if(Ee instanceof IDBTransaction){if("done"===Y)return ce.get(Ee);if("objectStoreNames"===Y)return Ee.objectStoreNames||pe.get(Ee);if("store"===Y)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return ne(Ee[Y])},set:(Ee,Y,X)=>(Ee[Y]=X,!0),has:(Ee,Y)=>Ee instanceof IDBTransaction&&("done"===Y||"store"===Y)||Y in Ee};function Le(Ee){return"function"==typeof Ee?function je(Ee){return Ee!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function we(){return le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ee)?function(...Y){return Ee.apply(be(this),Y),ne(he.get(this))}:function(...Y){return ne(Ee.apply(be(this),Y))}:function(Y,...X){const de=Ee.call(be(this),Y,...X);return pe.set(de,Y.sort?Y.sort():[Y]),ne(de)}}(Ee):(Ee instanceof IDBTransaction&&function $e(Ee){if(ce.has(Ee))return;const Y=new Promise((X,de)=>{const ye=()=>{Ee.removeEventListener("complete",xe),Ee.removeEventListener("error",se),Ee.removeEventListener("abort",se)},xe=()=>{X(),ye()},se=()=>{de(Ee.error||new DOMException("AbortError","AbortError")),ye()};Ee.addEventListener("complete",xe),Ee.addEventListener("error",se),Ee.addEventListener("abort",se)});ce.set(Ee,Y)}(Ee),((Ee,Y)=>Y.some(X=>Ee instanceof X))(Ee,function ue(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ee,De):Ee)}function ne(Ee){if(Ee instanceof IDBRequest)return function re(Ee){const Y=new Promise((X,de)=>{const ye=()=>{Ee.removeEventListener("success",xe),Ee.removeEventListener("error",se)},xe=()=>{X(ne(Ee.result)),ye()},se=()=>{de(Ee.error),ye()};Ee.addEventListener("success",xe),Ee.addEventListener("error",se)});return Y.then(X=>{X instanceof IDBCursor&&he.set(X,Ee)}).catch(()=>{}),z.set(Y,Ee),Y}(Ee);if($.has(Ee))return $.get(Ee);const Y=Le(Ee);return Y!==Ee&&($.set(Ee,Y),z.set(Y,Ee)),Y}const be=Ee=>z.get(Ee);function Ve(Ee,Y,{blocked:X,upgrade:de,blocking:ye,terminated:xe}={}){const se=indexedDB.open(Ee,Y),_t=ne(se);return de&&se.addEventListener("upgradeneeded",Ut=>{de(ne(se.result),Ut.oldVersion,Ut.newVersion,ne(se.transaction))}),X&&se.addEventListener("blocked",()=>X()),_t.then(Ut=>{xe&&Ut.addEventListener("close",()=>xe()),ye&&Ut.addEventListener("versionchange",()=>ye())}).catch(()=>{}),_t}function Pe(Ee,{blocked:Y}={}){const X=indexedDB.deleteDatabase(Ee);return Y&&X.addEventListener("blocked",()=>Y()),ne(X).then(()=>{})}const ot=["get","getKey","getAll","getAllKeys","count"],Ne=["put","add","delete","clear"],qe=new Map;function Ke(Ee,Y){if(!(Ee instanceof IDBDatabase)||Y in Ee||"string"!=typeof Y)return;if(qe.get(Y))return qe.get(Y);const X=Y.replace(/FromIndex$/,""),de=Y!==X,ye=Ne.includes(X);if(!(X in(de?IDBIndex:IDBObjectStore).prototype)||!ye&&!ot.includes(X))return;const xe=function(){var se=(0,u.Z)(function*(_t,...Ut){const vn=this.transaction(_t,ye?"readwrite":"readonly");let yt=vn.store;return de&&(yt=yt.index(Ut.shift())),(yield Promise.all([yt[X](...Ut),ye&&vn.done]))[0]});return function(Ut){return se.apply(this,arguments)}}();return qe.set(Y,xe),xe}!function Ze(Ee){De=Ee(De)}(Ee=>bL(EL({},Ee),{get:(Y,X,de)=>Ke(Y,X)||Ee.get(Y,X,de),has:(Y,X)=>!!Ke(Y,X)||Ee.has(Y,X)}))},5861:(Je,ve,F)=>{function u(L,le,ue,we,he,ce,pe){try{var $=L[ce](pe),z=$.value}catch(re){return void ue(re)}$.done?le(z):Promise.resolve(z).then(we,he)}function te(L){return function(){var le=this,ue=arguments;return new Promise(function(we,he){var ce=L.apply(le,ue);function pe(z){u(ce,we,he,pe,$,"next",z)}function $(z){u(ce,we,he,pe,$,"throw",z)}pe(void 0)})}}F.d(ve,{Z:()=>te})}},Je=>{Je(Je.s=46)}]);