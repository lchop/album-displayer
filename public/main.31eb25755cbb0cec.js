"use strict";(self.webpackChunkapp_articles=self.webpackChunkapp_articles||[]).push([[179],{2011:(ut,Ce,F)=>{F.d(Ce,{Dh:()=>ae,GT:()=>ye,cc:()=>Te,hO:()=>$e,on:()=>q,pX:()=>re,xv:()=>fe});var u=F(5e3),Y=F(127),O=F(5813);ut=F.hmd(ut);const se=["ngOnDestroy"],re=(X,De,Le,Ne={})=>new Proxy(X,{get:(st,Re)=>Le.runOutsideAngular(()=>{var Ge;if(X[Re])return(null===(Ge=null==Ne?void 0:Ne.spy)||void 0===Ge?void 0:Ge.get)&&Ne.spy.get(Re,X[Re]),X[Re];if(se.indexOf(Re)>-1)return()=>{};const Qe=De.toPromise().then(ft=>{const ee=ft&&ft[Re];return"function"==typeof ee?ee.bind(ft):ee&&ee.then?ee.then(ce=>Le.run(()=>ce)):Le.run(()=>ee)});return new Proxy(()=>{},{get:(ft,ee)=>Qe[ee],apply:(ft,ee,ce)=>Qe.then(_e=>{var ve;const Pe=_e&&_e(...ce);return(null===(ve=null==Ne?void 0:Ne.spy)||void 0===ve?void 0:ve.apply)&&Ne.spy.apply(Re,ce,Pe),Pe})})})}),ye=(X,De)=>{De.forEach(Le=>{Object.getOwnPropertyNames(Le.prototype||Le).forEach(Ne=>{Object.defineProperty(X.prototype,Ne,Object.getOwnPropertyDescriptor(Le.prototype||Le,Ne))})})};class oe{constructor(De){return De}}const ae=new u.OlP("angularfire2.app.options"),fe=new u.OlP("angularfire2.app.name");function q(X,De,Le){const st="object"==typeof Le&&Le||{};st.name=st.name||"string"==typeof Le&&Le||"[DEFAULT]";const Ge=Y.Z.apps.filter(Qe=>Qe&&Qe.name===st.name)[0]||De.runOutsideAngular(()=>Y.Z.initializeApp(X,st));try{JSON.stringify(X)!==JSON.stringify(Ge.options)&&G("error",`${Ge.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Qe){}return new oe(Ge)}const G=(X,...De)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[X](...De)},te={provide:oe,useFactory:q,deps:[ae,u.R0b,[new u.FiY,fe]]};let $e=(()=>{class X{constructor(Le){Y.Z.registerVersion("angularfire",O.q4.full,"core"),Y.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Y.Z.registerVersion("angular",u.q4F.full,Le.toString())}static initializeApp(Le,Ne){return{ngModule:X,providers:[{provide:ae,useValue:Le},{provide:fe,useValue:Ne}]}}}return X.\u0275fac=function(Le){return new(Le||X)(u.LFG(u.Lbi))},X.\u0275mod=u.oAB({type:X}),X.\u0275inj=u.cJS({providers:[te]}),X})();function Te(X,De,Le,Ne,st){const[,Re,Ge]=globalThis.\u0275AngularfireInstanceCache.find(Qe=>Qe[0]===X)||[];if(Re)return function Ze(X,De){try{return X.toString()===De.toString()}catch(Le){return X===De}}(st,Ge)||(Fe("error",`${De} was already initialized on the ${Le} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),Fe("warn",{is:st,was:Ge})),Re;{const Qe=Ne();return globalThis.\u0275AngularfireInstanceCache.push([X,Qe,st]),Qe}}const Ue=!!ut.hot,Fe=(X,...De)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[X](...De)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ut,Ce,F)=>{F.d(Ce,{q4:()=>Ma,iC:()=>Oa,fc:()=>qi,HU:()=>ru,vb:()=>bd,JM:()=>Ed});var u=F(5e3),Y=F(5867),O=F(5861),se=F(9681),re=F(2090),ye=F(4859),oe=F(1877);const ae="@firebase/installations",G="w:0.5.7",te="FIS_v2",X=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function De(I){return I instanceof re.ZR&&I.code.includes("request-failed")}function Le({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Ne(I){return{token:I.token,requestStatus:2,expiresIn:ce(I.expiresIn),creationTime:Date.now()}}function st(I,T){return Re.apply(this,arguments)}function Re(){return(Re=(0,O.Z)(function*(I,T){const V=(yield T.json()).error;return X.create("request-failed",{requestName:I,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function Ge({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Qe(I,{refreshToken:T}){const k=Ge(I);return k.append("Authorization",function _e(I){return`${te} ${I}`}(T)),k}function ft(I){return ee.apply(this,arguments)}function ee(){return(ee=(0,O.Z)(function*(I){const T=yield I();return T.status>=500&&T.status<600?I():T})).apply(this,arguments)}function ce(I){return Number(I.replace("s","000"))}function ve(I,T){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:T},{fid:k}){const V=Le(I),z=Ge(I),ne=T.getImmediate({optional:!0});if(ne){const gt=yield ne.getHeartbeatsHeader();gt&&z.append("x-firebase-client",gt)}const We={method:"POST",headers:z,body:JSON.stringify({fid:k,authVersion:te,appId:I.appId,sdkVersion:G})},Dt=yield ft(()=>fetch(V,We));if(Dt.ok){const gt=yield Dt.json();return{fid:gt.fid||k,registrationStatus:2,refreshToken:gt.refreshToken,authToken:Ne(gt.authToken)}}throw yield st("Create Installation",Dt)})).apply(this,arguments)}function de(I){return new Promise(T=>{setTimeout(T,I)})}const en=/^[cdef][\w-]{21}$/;function Rt(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const k=function St(I){return function Pt(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return en.test(k)?k:""}catch(I){return""}}function vt(I){return`${I.appName}!${I.appId}`}const yn=new Map;function is(I,T){const k=vt(I);xo(k,T),function Hn(I,T){const k=function sn(){return!ar&&"BroadcastChannel"in self&&(ar=new BroadcastChannel("[Firebase] FID Change"),ar.onmessage=I=>{xo(I.data.key,I.data.fid)}),ar}();k&&k.postMessage({key:I,fid:T}),function Nn(){0===yn.size&&ar&&(ar.close(),ar=null)}()}(k,T)}function xo(I,T){const k=yn.get(I);if(k)for(const V of k)V(T)}let ar=null;const vr="firebase-installations-store";let Ae=null;function hr(){return Ae||(Ae=(0,re.X3)("firebase-installations-database",1,(I,T)=>{0===T&&I.createObjectStore(vr)})),Ae}function $n(I,T){return mt.apply(this,arguments)}function mt(){return(mt=(0,O.Z)(function*(I,T){const k=vt(I),z=(yield hr()).transaction(vr,"readwrite"),ne=z.objectStore(vr),ie=yield ne.get(k);return yield ne.put(T,k),yield z.complete,(!ie||ie.fid!==T.fid)&&is(I,T.fid),T})).apply(this,arguments)}function tn(I){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,O.Z)(function*(I){const T=vt(I),V=(yield hr()).transaction(vr,"readwrite");yield V.objectStore(vr).delete(T),yield V.complete})).apply(this,arguments)}function lr(I,T){return _i.apply(this,arguments)}function _i(){return(_i=(0,O.Z)(function*(I,T){const k=vt(I),z=(yield hr()).transaction(vr,"readwrite"),ne=z.objectStore(vr),ie=yield ne.get(k),We=T(ie);return void 0===We?yield ne.delete(k):yield ne.put(We,k),yield z.complete,We&&(!ie||ie.fid!==We.fid)&&is(I,We.fid),We})).apply(this,arguments)}function Mr(I){return wr.apply(this,arguments)}function wr(){return(wr=(0,O.Z)(function*(I){let T;const k=yield lr(I.appConfig,V=>{const z=Zn(V),ne=Ul(I,z);return T=ne.registrationPromise,ne.installationEntry});return""===k.fid?{installationEntry:yield T}:{installationEntry:k,registrationPromise:T}})).apply(this,arguments)}function Zn(I){return nn(I||{fid:Rt(),registrationStatus:0})}function Ul(I,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(X.create("app-offline"))};const k={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},V=function dn(I,T){return et.apply(this,arguments)}(I,k);return{installationEntry:k,registrationPromise:V}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:wt(I)}:{installationEntry:T}}function et(){return(et=(0,O.Z)(function*(I,T){try{const k=yield ve(I,T);return $n(I.appConfig,k)}catch(k){throw De(k)&&409===k.customData.serverCode?yield tn(I.appConfig):yield $n(I.appConfig,{fid:T.fid,registrationStatus:0}),k}})).apply(this,arguments)}function wt(I){return no.apply(this,arguments)}function no(){return(no=(0,O.Z)(function*(I){let T=yield Ds(I.appConfig);for(;1===T.registrationStatus;)yield de(100),T=yield Ds(I.appConfig);if(0===T.registrationStatus){const{installationEntry:k,registrationPromise:V}=yield Mr(I);return V||k}return T})).apply(this,arguments)}function Ds(I){return lr(I,T=>{if(!T)throw X.create("installation-not-found");return nn(T)})}function nn(I){return function Et(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Er(I,T){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:T},k){const V=rn(I,k),z=Qe(I,k),ne=T.getImmediate({optional:!0});if(ne){const gt=yield ne.getHeartbeatsHeader();gt&&z.append("x-firebase-client",gt)}const We={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:G,appId:I.appId}})},Dt=yield ft(()=>fetch(V,We));if(Dt.ok)return Ne(yield Dt.json());throw yield st("Generate Auth Token",Dt)})).apply(this,arguments)}function rn(I,{fid:T}){return`${Le(I)}/${T}/authTokens:generate`}function bt(I){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,O.Z)(function*(I,T=!1){let k;const V=yield lr(I.appConfig,ne=>{if(!on(ne))throw X.create("not-registered");const ie=ne.authToken;if(!T&&Z(ie))return ne;if(1===ie.requestStatus)return k=Je(I,T),ne;{if(!navigator.onLine)throw X.create("app-offline");const We=W(ne);return k=ht(I,We),We}});return k?yield k:V.authToken})).apply(this,arguments)}function Je(I,T){return be.apply(this,arguments)}function be(){return(be=(0,O.Z)(function*(I,T){let k=yield ot(I.appConfig);for(;1===k.authToken.requestStatus;)yield de(100),k=yield ot(I.appConfig);const V=k.authToken;return 0===V.requestStatus?bt(I,T):V})).apply(this,arguments)}function ot(I){return lr(I,T=>{if(!on(T))throw X.create("not-registered");return function he(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function ht(I,T){return jt.apply(this,arguments)}function jt(){return(jt=(0,O.Z)(function*(I,T){try{const k=yield Er(I,T),V=Object.assign(Object.assign({},T),{authToken:k});return yield $n(I.appConfig,V),k}catch(k){if(!De(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const V=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield $n(I.appConfig,V)}else yield tn(I.appConfig);throw k}})).apply(this,arguments)}function on(I){return void 0!==I&&2===I.registrationStatus}function Z(I){return 2===I.requestStatus&&!function B(I){const T=Date.now();return T<I.creationTime||I.creationTime+I.expiresIn<T+36e5}(I)}function W(I){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:T})}function Ve(){return(Ve=(0,O.Z)(function*(I){const T=I,{installationEntry:k,registrationPromise:V}=yield Mr(T);return V?V.catch(console.error):bt(T).catch(console.error),k.fid})).apply(this,arguments)}function Jt(){return(Jt=(0,O.Z)(function*(I,T=!1){const k=I;return yield fr(k),(yield bt(k,T)).token})).apply(this,arguments)}function fr(I){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,O.Z)(function*(I){const{registrationPromise:T}=yield Mr(I);T&&(yield T)})).apply(this,arguments)}function Li(I){return X.create("missing-app-config-values",{valueName:I})}const Xn="installations",yi=I=>{const T=I.getProvider("app").getImmediate(),k=function qa(I){if(!I||!I.options)throw Li("App Configuration");if(!I.name)throw Li("App Name");const T=["projectId","apiKey","appId"];for(const k of T)if(!I.options[k])throw Li(k);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(T);return{app:T,appConfig:k,heartbeatServiceProvider:(0,se._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},je=I=>{const T=I.getProvider("app").getImmediate(),k=(0,se._getProvider)(T,Xn).getImmediate();return{getId:()=>function Q(I){return Ve.apply(this,arguments)}(k),getToken:z=>function yt(I){return Jt.apply(this,arguments)}(k,z)}};(function It(){(0,se._registerComponent)(new ye.wA(Xn,yi,"PUBLIC")),(0,se._registerComponent)(new ye.wA("installations-internal",je,"PRIVATE"))})(),(0,se.registerVersion)(ae,"0.5.7"),(0,se.registerVersion)(ae,"0.5.7","esm2017");const Qt="@firebase/remote-config",Lt=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ei{constructor(T,k,V,z){this.client=T,this.storage=k,this.storageCache=V,this.logger=z}isCachedDataFresh(T,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-k,z=V<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${z}.`),z}fetch(T){var k=this;return(0,O.Z)(function*(){const[V,z]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(z&&k.isCachedDataFresh(T.cacheMaxAgeMillis,V))return z;T.eTag=z&&z.eTag;const ne=yield k.client.fetch(T),ie=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ne.status&&ie.push(k.storage.setLastSuccessfulFetchResponse(ne)),yield Promise.all(ie),ne})()}}function Qh(I=navigator){return I.languages&&I.languages[0]||I.language}class Dg{constructor(T,k,V,z,ne,ie){this.firebaseInstallations=T,this.sdkVersion=k,this.namespace=V,this.projectId=z,this.apiKey=ne,this.appId=ie}fetch(T){var k=this;return(0,O.Z)(function*(){const[V,z]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),ie=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,We={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},Dt={sdk_version:k.sdkVersion,app_instance_id:V,app_instance_id_token:z,app_id:k.appId,language_code:Qh()},gt={method:"POST",headers:We,body:JSON.stringify(Dt)},zt=fetch(ie,gt),Ct=new Promise((Or,Ls)=>{T.signal.addEventListener(()=>{const dl=new Error("The operation was aborted.");dl.name="AbortError",Ls(dl)})});let oi;try{yield Promise.race([zt,Ct]),oi=yield zt}catch(Or){let Ls="fetch-client-network";throw"AbortError"===Or.name&&(Ls="fetch-timeout"),Lt.create(Ls,{originalErrorMessage:Or.message})}let tr=oi.status;const Gi=oi.headers.get("ETag")||void 0;let Pr,Fs;if(200===oi.status){let Or;try{Or=yield oi.json()}catch(Ls){throw Lt.create("fetch-client-parse",{originalErrorMessage:Ls.message})}Pr=Or.entries,Fs=Or.state}if("INSTANCE_STATE_UNSPECIFIED"===Fs?tr=500:"NO_CHANGE"===Fs?tr=304:("NO_TEMPLATE"===Fs||"EMPTY_CONFIG"===Fs)&&(Pr={}),304!==tr&&200!==tr)throw Lt.create("fetch-status",{httpStatus:tr});return{status:tr,eTag:Gi,config:Pr}})()}}class Jh{constructor(T,k){this.client=T,this.storage=k}fetch(T){var k=this;return(0,O.Z)(function*(){const V=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(T,V)})()}attemptFetch(T,{throttleEndTimeMillis:k,backoffCount:V}){var z=this;return(0,O.Z)(function*(){yield function Vi(I,T){return new Promise((k,V)=>{const z=Math.max(T-Date.now(),0),ne=setTimeout(k,z);I.addEventListener(()=>{clearTimeout(ne),V(Lt.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,k);try{const ne=yield z.client.fetch(T);return yield z.storage.deleteThrottleMetadata(),ne}catch(ne){if(!function ga(I){if(!(I instanceof re.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ne))throw ne;const ie={throttleEndTimeMillis:Date.now()+(0,re.$s)(V),backoffCount:V+1};return yield z.storage.setThrottleMetadata(ie),z.attemptFetch(T,ie)}})()}}class ma{constructor(T,k,V,z,ne){this.app=T,this._client=k,this._storageCache=V,this._storage=z,this._logger=ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function $u(I,T){const k=I.target.error||void 0;return Lt.create(T,{originalErrorMessage:k&&k.message})}const so="app_namespace_store";class _a{constructor(T,k,V,z=function Zu(){return new Promise((I,T)=>{try{const k=indexedDB.open("firebase_remote_config",1);k.onerror=V=>{T($u(V,"storage-open"))},k.onsuccess=V=>{I(V.target.result)},k.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(so,{keyPath:"compositeKey"})}}catch(k){T(Lt.create("storage-open",{originalErrorMessage:k}))}})}()){this.appId=T,this.appName=k,this.namespace=V,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var k=this;return(0,O.Z)(function*(){const V=yield k.openDbPromise;return new Promise((z,ne)=>{const We=V.transaction([so],"readonly").objectStore(so),Dt=k.createCompositeKey(T);try{const gt=We.get(Dt);gt.onerror=zt=>{ne($u(zt,"storage-get"))},gt.onsuccess=zt=>{const Ct=zt.target.result;z(Ct?Ct.value:void 0)}}catch(gt){ne(Lt.create("storage-get",{originalErrorMessage:gt&&gt.message}))}})})()}set(T,k){var V=this;return(0,O.Z)(function*(){const z=yield V.openDbPromise;return new Promise((ne,ie)=>{const Dt=z.transaction([so],"readwrite").objectStore(so),gt=V.createCompositeKey(T);try{const zt=Dt.put({compositeKey:gt,value:k});zt.onerror=Ct=>{ie($u(Ct,"storage-set"))},zt.onsuccess=()=>{ne()}}catch(zt){ie(Lt.create("storage-set",{originalErrorMessage:zt&&zt.message}))}})})()}delete(T){var k=this;return(0,O.Z)(function*(){const V=yield k.openDbPromise;return new Promise((z,ne)=>{const We=V.transaction([so],"readwrite").objectStore(so),Dt=k.createCompositeKey(T);try{const gt=We.delete(Dt);gt.onerror=zt=>{ne($u(zt,"storage-delete"))},gt.onsuccess=()=>{z()}}catch(gt){ne(Lt.create("storage-delete",{originalErrorMessage:gt&&gt.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Sg{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,O.Z)(function*(){const k=T.storage.getLastFetchStatus(),V=T.storage.getLastSuccessfulFetchTimestampMillis(),z=T.storage.getActiveConfig(),ne=yield k;ne&&(T.lastFetchStatus=ne);const ie=yield V;ie&&(T.lastSuccessfulFetchTimestampMillis=ie);const We=yield z;We&&(T.activeConfig=We)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function ld(){return ko.apply(this,arguments)}function ko(){return(ko=(0,O.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(I){return!1}})).apply(this,arguments)}!function ad(){(0,se._registerComponent)(new ye.wA("remote-config",function I(T,{instanceIdentifier:k}){const V=T.getProvider("app").getImmediate(),z=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Lt.create("registration-window");if(!(0,re.hl)())throw Lt.create("indexed-db-unavailable");const{projectId:ne,apiKey:ie,appId:We}=V.options;if(!ne)throw Lt.create("registration-project-id");if(!ie)throw Lt.create("registration-api-key");if(!We)throw Lt.create("registration-app-id");const Dt=new _a(We,V.name,k=k||"firebase"),gt=new Sg(Dt),zt=new oe.Yd(Qt);zt.logLevel=oe.in.ERROR;const Ct=new Dg(z,se.SDK_VERSION,k,ne,ie,We),oi=new Jh(Ct,Dt),tr=new Ei(oi,Dt,gt,zt),Gi=new ma(V,tr,gt,Dt,zt);return function wi(I){const T=(0,re.m9)(I);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Gi),Gi},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Qt,"0.3.6"),(0,se.registerVersion)(Qt,"0.3.6","esm2017")}();const ef="/firebase-messaging-sw.js",ud="/firebase-cloud-messaging-push-scope",tf="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",jl="google.c.a.c_id",No="google.c.a.c_l",ya="google.c.a.ts",oo="google.c.a.e";var ao=(()=>{return(I=ao||(ao={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",ao;var I})();function er(I){const T=new Uint8Array(I);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function nf(I){const k=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(k),z=new Uint8Array(V.length);for(let ne=0;ne<V.length;++ne)z[ne]=V.charCodeAt(ne);return z}const Po="fcm_token_details_db",Ir="fcm_token_object_Store";function rf(I){return Wa.apply(this,arguments)}function Wa(){return Wa=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ne=>ne.name).includes(Po))return null;let T=null;return(yield(0,re.X3)(Po,5,function(){var V=(0,O.Z)(function*(z,ne,ie,We){var Dt;if(ne<2||!z.objectStoreNames.contains(Ir))return;const gt=We.objectStore(Ir),zt=yield gt.index("fcmSenderId").get(I);if(yield gt.clear(),zt)if(2===ne){const Ct=zt;if(!Ct.auth||!Ct.p256dh||!Ct.endpoint)return;T={token:Ct.fcmToken,createTime:null!==(Dt=Ct.createTime)&&void 0!==Dt?Dt:Date.now(),subscriptionOptions:{auth:Ct.auth,p256dh:Ct.p256dh,endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:"string"==typeof Ct.vapidKey?Ct.vapidKey:er(Ct.vapidKey)}}}else if(3===ne){const Ct=zt;T={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:er(Ct.auth),p256dh:er(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:er(Ct.vapidKey)}}}else if(4===ne){const Ct=zt;T={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:er(Ct.auth),p256dh:er(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:er(Ct.vapidKey)}}}});return function(z,ne,ie,We){return V.apply(this,arguments)}}())).close(),yield(0,re.Lj)(Po),yield(0,re.Lj)("fcm_vapid_details_db"),yield(0,re.Lj)("undefined"),dd(T)?T:null}),Wa.apply(this,arguments)}function dd(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:T}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const ei="firebase-messaging-store";let In=null;function qu(){return In||(In=(0,re.X3)("firebase-messaging-database",1,(I,T)=>{0===T&&I.createObjectStore(ei)})),In}function Oo(I){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,O.Z)(function*(I){const T=Hl(I),V=yield(yield qu()).transaction(ei).objectStore(ei).get(T);if(V)return V;{const z=yield rf(I.appConfig.senderId);if(z)return yield Fo(I,z),z}})).apply(this,arguments)}function Fo(I,T){return jr.apply(this,arguments)}function jr(){return(jr=(0,O.Z)(function*(I,T){const k=Hl(I),z=(yield qu()).transaction(ei,"readwrite");return yield z.objectStore(ei).put(T,k),yield z.complete,T})).apply(this,arguments)}function Rs(I){return On.apply(this,arguments)}function On(){return(On=(0,O.Z)(function*(I){const T=Hl(I),V=(yield qu()).transaction(ei,"readwrite");yield V.objectStore(ei).delete(T),yield V.complete})).apply(this,arguments)}function Hl({appConfig:I}){return I.appId}const Sn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ti(I,T){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,O.Z)(function*(I,T){const k=yield tt(I),V=Zl(T),z={method:"POST",headers:k,body:JSON.stringify(V)};let ne;try{ne=yield(yield fetch(lo(I.appConfig),z)).json()}catch(ie){throw Sn.create("token-subscribe-failed",{errorInfo:ie})}if(ne.error)throw Sn.create("token-subscribe-failed",{errorInfo:ne.error.message});if(!ne.token)throw Sn.create("token-subscribe-no-token");return ne.token})).apply(this,arguments)}function Gu(I,T){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,O.Z)(function*(I,T){const k=yield tt(I),V=Zl(T.subscriptionOptions),z={method:"PATCH",headers:k,body:JSON.stringify(V)};let ne;try{ne=yield(yield fetch(`${lo(I.appConfig)}/${T.token}`,z)).json()}catch(ie){throw Sn.create("token-update-failed",{errorInfo:ie})}if(ne.error)throw Sn.create("token-update-failed",{errorInfo:ne.error.message});if(!ne.token)throw Sn.create("token-update-no-token");return ne.token})).apply(this,arguments)}function ni(I,T){return va.apply(this,arguments)}function va(){return(va=(0,O.Z)(function*(I,T){const V={method:"DELETE",headers:yield tt(I)};try{const ne=yield(yield fetch(`${lo(I.appConfig)}/${T}`,V)).json();if(ne.error)throw Sn.create("token-unsubscribe-failed",{errorInfo:ne.error.message})}catch(z){throw Sn.create("token-unsubscribe-failed",{errorInfo:z})}})).apply(this,arguments)}function lo({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function tt(I){return $l.apply(this,arguments)}function $l(){return($l=(0,O.Z)(function*({appConfig:I,installations:T}){const k=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function Zl({p256dh:I,auth:T,endpoint:k,vapidKey:V}){const z={web:{endpoint:k,auth:T,p256dh:I}};return V!==tf&&(z.web.applicationPubKey=V),z}const Ya=6048e5;function Qa(I){return wa.apply(this,arguments)}function wa(){return(wa=(0,O.Z)(function*(I){const T=yield Ku(I.swRegistration,I.vapidKey),k={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:T.endpoint,auth:er(T.getKey("auth")),p256dh:er(T.getKey("p256dh"))},V=yield Oo(I.firebaseDependencies);if(V){if(Hr(V.subscriptionOptions,k))return Date.now()>=V.createTime+Ya?Ie(I,{token:V.token,createTime:Date.now(),subscriptionOptions:k}):V.token;try{yield ni(I.firebaseDependencies,V.token)}catch(z){console.warn(z)}return uo(I.firebaseDependencies,k)}return uo(I.firebaseDependencies,k)})).apply(this,arguments)}function Wu(I){return zu.apply(this,arguments)}function zu(){return(zu=(0,O.Z)(function*(I){const T=yield Oo(I.firebaseDependencies);T&&(yield ni(I.firebaseDependencies,T.token),yield Rs(I.firebaseDependencies));const k=yield I.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function Ie(I,T){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,O.Z)(function*(I,T){try{const k=yield Gu(I.firebaseDependencies,T),V=Object.assign(Object.assign({},T),{token:k,createTime:Date.now()});return yield Fo(I.firebaseDependencies,V),k}catch(k){throw yield Wu(I),k}})).apply(this,arguments)}function uo(I,T){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,O.Z)(function*(I,T){const V={token:yield ti(I,T),createTime:Date.now(),subscriptionOptions:T};return yield Fo(I,V),V.token})).apply(this,arguments)}function Ku(I,T){return as.apply(this,arguments)}function as(){return(as=(0,O.Z)(function*(I,T){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:nf(T)})})).apply(this,arguments)}function Hr(I,T){return T.vapidKey===I.vapidKey&&T.endpoint===I.endpoint&&T.auth===I.auth&&T.p256dh===I.p256dh}function Ja(I){const T={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Ea(I,T){if(!T.notification)return;I.notification={};const k=T.notification.title;k&&(I.notification.title=k);const V=T.notification.body;V&&(I.notification.body=V);const z=T.notification.image;z&&(I.notification.image=z)}(T,I),function Yu(I,T){!T.data||(I.data=T.data)}(T,I),function Qu(I,T){if(!T.fcmOptions)return;I.fcmOptions={};const k=T.fcmOptions.link;k&&(I.fcmOptions.link=k);const V=T.fcmOptions.analytics_label;V&&(I.fcmOptions.analyticsLabel=V)}(T,I),T}function Xa(I){return"object"==typeof I&&!!I&&jl in I}function co(I,T){const k=[];for(let V=0;V<I.length;V++)k.push(I.charAt(V)),V<T.length&&k.push(T.charAt(V));return k.join("")}function ri(I){return Sn.create("missing-app-config-values",{valueName:I})}co("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),co("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ju{constructor(T,k,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function Tr(I){if(!I||!I.options)throw ri("App Configuration Object");if(!I.name)throw ri("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:k}=I;for(const V of T)if(!k[V])throw ri(V);return{appName:I.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:z,installations:k,analyticsProvider:V}}_delete(){return Promise.resolve()}}function ks(I){return ji.apply(this,arguments)}function ji(){return(ji=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(ef,{scope:ud}),I.swRegistration.update().catch(()=>{})}catch(T){throw Sn.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function Xu(I,T){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,O.Z)(function*(I,T){if(!T&&!I.swRegistration&&(yield ks(I)),T||!I.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Sn.create("invalid-sw-registration");I.swRegistration=T}})).apply(this,arguments)}function ec(I,T){return ba.apply(this,arguments)}function ba(){return(ba=(0,O.Z)(function*(I,T){T?I.vapidKey=T:I.vapidKey||(I.vapidKey=tf)})).apply(this,arguments)}function Uo(){return(Uo=(0,O.Z)(function*(I,T){if(!navigator)throw Sn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Sn.create("permission-blocked");return yield ec(I,null==T?void 0:T.vapidKey),yield Xu(I,null==T?void 0:T.serviceWorkerRegistration),Qa(I)})).apply(this,arguments)}function hd(I,T,k){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,O.Z)(function*(I,T,k){const V=Rg(T);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:k[jl],message_name:k[No],message_time:k[ya],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Rg(I){switch(I){case ao.NOTIFICATION_CLICKED:return"notification_open";case ao.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ca(){return(Ca=(0,O.Z)(function*(I,T){const k=T.data;if(!k.isFirebaseMessaging)return;I.onMessageHandler&&k.messageType===ao.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Ja(k)):I.onMessageHandler.next(Ja(k)));const V=k.data;Xa(V)&&"1"===V[oo]&&(yield hd(I,k.messageType,V))})).apply(this,arguments)}const Wl="@firebase/messaging",zl=I=>{const T=new Ju(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function Gl(I,T){return Ca.apply(this,arguments)}(T,k)),T},fd=I=>{const T=I.getProvider("messaging").getImmediate();return{getToken:V=>function ql(I,T){return Uo.apply(this,arguments)}(T,V)}};function af(){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,O.Z)(function*(){try{yield(0,re.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function el(){(0,se._registerComponent)(new ye.wA("messaging",zl,"PUBLIC")),(0,se._registerComponent)(new ye.wA("messaging-internal",fd,"PRIVATE")),(0,se.registerVersion)(Wl,"0.9.11"),(0,se.registerVersion)(Wl,"0.9.11","esm2017")}();const Yl="analytics",rl="firebase_id",pd="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Jl="https://www.googletagmanager.com/gtag/js",pr=new oe.Yd("@firebase/analytics");function us(I){return Promise.all(I.map(T=>T.catch(k=>k)))}function Xl(I,T){const k=document.createElement("script");k.src=`${Jl}?l=${I}&id=${T}`,k.async=!0,document.head.appendChild(k)}function cf(I,T,k,V,z,ne){return ho.apply(this,arguments)}function ho(){return(ho=(0,O.Z)(function*(I,T,k,V,z,ne){const ie=V[z];try{if(ie)yield T[ie];else{const Dt=(yield us(k)).find(gt=>gt.measurementId===z);Dt&&(yield T[Dt.appId])}}catch(We){pr.error(We)}I("config",z,ne)})).apply(this,arguments)}function gd(I,T,k,V,z){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,O.Z)(function*(I,T,k,V,z){try{let ne=[];if(z&&z.send_to){let ie=z.send_to;Array.isArray(ie)||(ie=[ie]);const We=yield us(k);for(const Dt of ie){const gt=We.find(Ct=>Ct.measurementId===Dt),zt=gt&&T[gt.appId];if(!zt){ne=[];break}ne.push(zt)}}0===ne.length&&(ne=Object.values(T)),yield Promise.all(ne),I("event",V,z||{})}catch(ne){pr.error(ne)}})).apply(this,arguments)}function Sy(){const I=window.document.getElementsByTagName("script");for(const T of Object.values(I))if(T.src&&T.src.includes(Jl))return T;return null}const zn=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ur=new class bi{constructor(T={},k=1e3){this.throttleMetadata=T,this.intervalMillis=k}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,k){this.throttleMetadata[T]=k}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function sl(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Ng(I){return jo.apply(this,arguments)}function jo(){return(jo=(0,O.Z)(function*(I){var T;const{appId:k,apiKey:V}=I,z={method:"GET",headers:sl(V)},ne=pd.replace("{app-id}",k),ie=yield fetch(ne,z);if(200!==ie.status&&304!==ie.status){let We="";try{const Dt=yield ie.json();(null===(T=Dt.error)||void 0===T?void 0:T.message)&&(We=Dt.error.message)}catch(Dt){}throw zn.create("config-fetch-failed",{httpStatus:ie.status,responseMessage:We})}return ie.json()})).apply(this,arguments)}function md(I){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,O.Z)(function*(I,T=ur,k){const{appId:V,apiKey:z,measurementId:ne}=I.options;if(!V)throw zn.create("no-app-id");if(!z){if(ne)return{measurementId:ne,appId:V};throw zn.create("no-api-key")}const ie=T.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},We=new ff;return setTimeout((0,O.Z)(function*(){We.abort()}),void 0!==k?k:6e4),Ho({appId:V,apiKey:z,measurementId:ne},ie,We,T)})).apply(this,arguments)}function Ho(I,T,k){return $i.apply(this,arguments)}function $i(){return($i=(0,O.Z)(function*(I,{throttleEndTimeMillis:T,backoffCount:k},V,z=ur){const{appId:ne,measurementId:ie}=I;try{yield at(V,T)}catch(We){if(ie)return pr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ie} provided in the "measurementId" field in the local Firebase config. [${We.message}]`),{appId:ne,measurementId:ie};throw We}try{const We=yield Ng(I);return z.deleteThrottleMetadata(ne),We}catch(We){if(!hf(We)){if(z.deleteThrottleMetadata(ne),ie)return pr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ie} provided in the "measurementId" field in the local Firebase config. [${We.message}]`),{appId:ne,measurementId:ie};throw We}const Dt=503===Number(We.customData.httpStatus)?(0,re.$s)(k,z.intervalMillis,30):(0,re.$s)(k,z.intervalMillis),gt={throttleEndTimeMillis:Date.now()+Dt,backoffCount:k+1};return z.setThrottleMetadata(ne,gt),pr.debug(`Calling attemptFetch again in ${Dt} millis`),Ho(I,gt,V,z)}})).apply(this,arguments)}function at(I,T){return new Promise((k,V)=>{const z=Math.max(T-Date.now(),0),ne=setTimeout(k,z);I.addEventListener(()=>{clearTimeout(ne),V(zn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function hf(I){if(!(I instanceof re.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}class ff{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function Ia(){return fo.apply(this,arguments)}function fo(){return(fo=(0,O.Z)(function*(){if(!(0,re.hl)())return pr.warn(zn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(I){return pr.warn(zn.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function Ta(){return(Ta=(0,O.Z)(function*(I,T,k,V,z,ne,ie){var We;const Dt=md(I);Dt.then(tr=>{k[tr.measurementId]=tr.appId,I.options.measurementId&&tr.measurementId!==I.options.measurementId&&pr.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${tr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(tr=>pr.error(tr)),T.push(Dt);const gt=Ia().then(tr=>{if(tr)return V.getId()}),[zt,Ct]=yield Promise.all([Dt,gt]);Sy()||Xl(ne,zt.measurementId),z("js",new Date);const oi=null!==(We=null==ie?void 0:ie.config)&&void 0!==We?We:{};return oi.origin="firebase",oi.update=!0,null!=Ct&&(oi[rl]=Ct),z("config",zt.measurementId,oi),zt.measurementId})).apply(this,arguments)}class $o{constructor(T){this.app=T}_delete(){return delete cs[this.app.options.appId],Promise.resolve()}}let cs={},eu=[];const nc={};let al,Da,po="dataLayer",gr=!1;function Zo(I,T,k){!function Aa(){const I=[];if((0,re.ru)()&&I.push("This is a browser extension environment."),(0,re.zI)()||I.push("Cookies are not available."),I.length>0){const T=I.map((V,z)=>`(${z+1}) ${V}`).join(" "),k=zn.create("invalid-analytics-context",{errorInfo:T});pr.warn(k.message)}}();const V=I.options.appId;if(!V)throw zn.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw zn.create("no-api-key");pr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=cs[V])throw zn.create("already-exists",{id:V});if(!gr){!function Mg(I){let T=[];Array.isArray(window[I])?T=window[I]:window[I]=T}(po);const{wrappedGtag:ne,gtagCore:ie}=function kg(I,T,k,V,z){let ne=function(...ie){window[V].push(arguments)};return window[z]&&"function"==typeof window[z]&&(ne=window[z]),window[z]=function df(I,T,k,V){function ne(){return(ne=(0,O.Z)(function*(ie,We,Dt){try{"event"===ie?yield gd(I,T,k,We,Dt):"config"===ie?yield cf(I,T,k,V,We,Dt):I("set",We)}catch(gt){pr.error(gt)}})).apply(this,arguments)}return function z(ie,We,Dt){return ne.apply(this,arguments)}}(ne,I,T,k),{gtagCore:ne,wrappedGtag:window[z]}}(cs,eu,nc,po,"gtag");Da=ne,al=ie,gr=!0}return cs[V]=function Ln(I,T,k,V,z,ne,ie){return Ta.apply(this,arguments)}(I,eu,nc,T,al,po,k),new $o(I)}function pn(){return(pn=(0,O.Z)(function*(I,T,k,V,z){if(z&&z.global)I("event",k,V);else{const ne=yield T;I("event",k,Object.assign(Object.assign({},V),{send_to:ne}))}})).apply(this,arguments)}function ds(){return un.apply(this,arguments)}function un(){return(un=(0,O.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(I){return!1}})).apply(this,arguments)}const kr="@firebase/analytics";!function si(){(0,se._registerComponent)(new ye.wA(Yl,(T,{options:k})=>Zo(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,se._registerComponent)(new ye.wA("analytics-internal",function I(T){try{const k=T.getProvider(Yl).getImmediate();return{logEvent:(V,z,ne)=>function xa(I,T,k,V){I=(0,re.m9)(I),function mr(I,T,k,V,z){return pn.apply(this,arguments)}(Da,cs[I.app.options.appId],T,k,V).catch(z=>pr.error(z))}(k,V,z,ne)}}catch(k){throw zn.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,se.registerVersion)(kr,"0.7.7"),(0,se.registerVersion)(kr,"0.7.7","esm2017")}();var vd=F(4408),Ps=F(7565);const Pg=new class cl extends Ps.v{}(class Un extends vd.o{constructor(T,k){super(T,k),this.scheduler=T,this.work=k}schedule(T,k=0){return k>0?super.schedule(T,k):(this.delay=k,this.state=T,this.scheduler.flush(this),this)}execute(T,k){return k>0||this.closed?super.execute(T,k):this._execute(T,k)}requestAsyncId(T,k,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(T,k,V):T.flush(this)}});var Zr=F(4986),hs=F(8505),tu=F(5363),Ra=F(9468);const Ma=new u.GfV("7.3.0"),nu="__angularfire_symbol__analyticsIsSupportedValue",ka="__angularfire_symbol__analyticsIsSupported",ic="__angularfire_symbol__remoteConfigIsSupportedValue",wd="__angularfire_symbol__remoteConfigIsSupported",sc="__angularfire_symbol__messagingIsSupportedValue",xt="__angularfire_symbol__messagingIsSupported";function Ed(I,T,k){if(T){if(1===T.length)return T[0];const ne=T.filter(ie=>ie.app===k);if(1===ne.length)return ne[0]}return k.container.getProvider(I).getImmediate({optional:!0})}globalThis[ka]||(globalThis[ka]=ds().then(I=>globalThis[nu]=I).catch(()=>globalThis[nu]=!1)),globalThis[xt]||(globalThis[xt]=af().then(I=>globalThis[sc]=I).catch(()=>globalThis[sc]=!1)),globalThis[wd]||(globalThis[wd]=ld().then(I=>globalThis[ic]=I).catch(()=>globalThis[ic]=!1));const bd=(I,T)=>{const k=T?[T]:(0,Y.C6)(),V=[];return k.forEach(z=>{z.container.getProvider(I).instances.forEach(ie=>{V.includes(ie)||V.push(ie)})}),V};function Pa(){}class Zi{constructor(T,k=Pg){this.zone=T,this.delegate=k}now(){return this.delegate.now()}schedule(T,k,V){const z=this.zone;return this.delegate.schedule(function(ie){z.runGuarded(()=>{T.apply(this,[ie])})},k,V)}}class Cd{constructor(T){this.zone=T,this.task=null}call(T,k){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Pa,{},Pa,Pa)),k.pipe((0,hs.b)({next:V,complete:V,error:V})).subscribe(T).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ru=(()=>{class I{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new Zi(Zone.current)),this.insideAngular=k.run(()=>new Zi(Zone.current,Zr.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(k){return new(k||I)(u.LFG(u.R0b))},I.\u0275prov=u.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Os(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function qi(I){return I.pipe((0,tu.Q)(Os().outsideAngular))}function Oa(I){return Os(),function go(I){return function(k){return(k=k.lift(new Cd(I.ngZone))).pipe((0,Ra.R)(I.outsideAngular),(0,tu.Q)(I.insideAngular))}}(Os())(I)}},2090:(ut,Ce,F)=>{F.d(Ce,{$s:()=>Et,BH:()=>Te,DV:()=>Hn,Dv:()=>_i,G6:()=>ft,GJ:()=>vn,L:()=>fe,LL:()=>Pt,Lj:()=>jt,Mn:()=>Ge,Pz:()=>St,Sg:()=>Ze,UG:()=>X,UI:()=>sn,US:()=>oe,Wj:()=>Zn,X3:()=>ht,Yr:()=>Qe,ZB:()=>te,ZR:()=>de,b$:()=>Ne,cI:()=>Rt,d:()=>st,dS:()=>dn,eu:()=>ce,g5:()=>se,gK:()=>Mr,gQ:()=>hr,h$:()=>ae,hl:()=>ee,hu:()=>O,jU:()=>De,lb:()=>Ul,m9:()=>rn,ne:()=>$n,p$:()=>G,pd:()=>Ae,r3:()=>xo,ru:()=>Le,tV:()=>q,uI:()=>Fe,ug:()=>et,vZ:()=>Nn,w1:()=>Re,w9:()=>Br,xO:()=>Fi,xb:()=>ar,z$:()=>Ue,zI:()=>_e,zd:()=>vr});var u=F(5861);const O=function(Z,B){if(!Z)throw se(B)},se=function(Z){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Z)},re=function(Z){const B=[];let W=0;for(let he=0;he<Z.length;he++){let Q=Z.charCodeAt(he);Q<128?B[W++]=Q:Q<2048?(B[W++]=Q>>6|192,B[W++]=63&Q|128):55296==(64512&Q)&&he+1<Z.length&&56320==(64512&Z.charCodeAt(he+1))?(Q=65536+((1023&Q)<<10)+(1023&Z.charCodeAt(++he)),B[W++]=Q>>18|240,B[W++]=Q>>12&63|128,B[W++]=Q>>6&63|128,B[W++]=63&Q|128):(B[W++]=Q>>12|224,B[W++]=Q>>6&63|128,B[W++]=63&Q|128)}return B},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Z,B){if(!Array.isArray(Z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,he=[];for(let Q=0;Q<Z.length;Q+=3){const Ve=Z[Q],yt=Q+1<Z.length,Jt=yt?Z[Q+1]:0,fr=Q+2<Z.length,Jn=fr?Z[Q+2]:0;let qn=(15&Jt)<<2|Jn>>6,Gn=63&Jn;fr||(Gn=64,yt||(qn=64)),he.push(W[Ve>>2],W[(3&Ve)<<4|Jt>>4],W[qn],W[Gn])}return he.join("")},encodeString(Z,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(Z):this.encodeByteArray(re(Z),B)},decodeString(Z,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(Z):function(Z){const B=[];let W=0,he=0;for(;W<Z.length;){const Q=Z[W++];if(Q<128)B[he++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Ve=Z[W++];B[he++]=String.fromCharCode((31&Q)<<6|63&Ve)}else if(Q>239&&Q<365){const fr=((7&Q)<<18|(63&Z[W++])<<12|(63&Z[W++])<<6|63&Z[W++])-65536;B[he++]=String.fromCharCode(55296+(fr>>10)),B[he++]=String.fromCharCode(56320+(1023&fr))}else{const Ve=Z[W++],yt=Z[W++];B[he++]=String.fromCharCode((15&Q)<<12|(63&Ve)<<6|63&yt)}}return B.join("")}(this.decodeStringToByteArray(Z,B))},decodeStringToByteArray(Z,B){this.init_();const W=B?this.charToByteMapWebSafe_:this.charToByteMap_,he=[];for(let Q=0;Q<Z.length;){const Ve=W[Z.charAt(Q++)],Jt=Q<Z.length?W[Z.charAt(Q)]:0;++Q;const Jn=Q<Z.length?W[Z.charAt(Q)]:64;++Q;const Mt=Q<Z.length?W[Z.charAt(Q)]:64;if(++Q,null==Ve||null==Jt||null==Jn||null==Mt)throw Error();he.push(Ve<<2|Jt>>4),64!==Jn&&(he.push(Jt<<4&240|Jn>>2),64!==Mt&&he.push(Jn<<6&192|Mt))}return he},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Z=0;Z<this.ENCODED_VALS.length;Z++)this.byteToCharMap_[Z]=this.ENCODED_VALS.charAt(Z),this.charToByteMap_[this.byteToCharMap_[Z]]=Z,this.byteToCharMapWebSafe_[Z]=this.ENCODED_VALS_WEBSAFE.charAt(Z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Z]]=Z,Z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Z)]=Z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Z)]=Z)}}},ae=function(Z){const B=re(Z);return oe.encodeByteArray(B,!0)},fe=function(Z){return ae(Z).replace(/\./g,"")},q=function(Z){try{return oe.decodeString(Z,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function G(Z){return te(void 0,Z)}function te(Z,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===Z&&(Z={});break;case Array:Z=[];break;default:return B}for(const W in B)!B.hasOwnProperty(W)||!$e(W)||(Z[W]=te(Z[W],B[W]));return Z}function $e(Z){return"__proto__"!==Z}class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,W)=>{this.resolve=B,this.reject=W})}wrapCallback(B){return(W,he)=>{W?this.reject(W):this.resolve(he),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(W):B(W,he))}}}function Ze(Z,B){if(Z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const he=B||"demo-project",Q=Z.iat||0,Ve=Z.sub||Z.user_id;if(!Ve)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const yt=Object.assign({iss:`https://securetoken.google.com/${he}`,aud:he,iat:Q,exp:Q+3600,auth_time:Q,sub:Ve,user_id:Ve,firebase:{sign_in_provider:"custom",identities:{}}},Z);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(yt)),""].join(".")}function Ue(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Fe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function X(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Z){return!1}}function De(){return"object"==typeof self&&self.self===self}function Le(){const Z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Z&&void 0!==Z.id}function Ne(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function st(){return Ue().indexOf("Electron/")>=0}function Re(){const Z=Ue();return Z.indexOf("MSIE ")>=0||Z.indexOf("Trident/")>=0}function Ge(){return Ue().indexOf("MSAppHost/")>=0}function Qe(){return!1}function ft(){return!X()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ee(){return"object"==typeof indexedDB}function ce(){return new Promise((Z,B)=>{try{let W=!0;const he="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(he);Q.onsuccess=()=>{Q.result.close(),W||self.indexedDB.deleteDatabase(he),Z(!0)},Q.onupgradeneeded=()=>{W=!1},Q.onerror=()=>{var Ve;B((null===(Ve=Q.error)||void 0===Ve?void 0:Ve.message)||"")}}catch(W){B(W)}})}function _e(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class de extends Error{constructor(B,W,he){super(W),this.code=B,this.customData=he,this.name="FirebaseError",Object.setPrototypeOf(this,de.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pt.prototype.create)}}class Pt{constructor(B,W,he){this.service=B,this.serviceName=W,this.errors=he}create(B,...W){const he=W[0]||{},Q=`${this.service}/${B}`,Ve=this.errors[B],yt=Ve?function en(Z,B){return Z.replace(Qn,(W,he)=>{const Q=B[he];return null!=Q?String(Q):`<${he}?>`})}(Ve,he):"Error";return new de(Q,`${this.serviceName}: ${yt} (${Q}).`,he)}}const Qn=/\{\$([^}]+)}/g;function Rt(Z){return JSON.parse(Z)}function St(Z){return JSON.stringify(Z)}const vt=function(Z){let B={},W={},he={},Q="";try{const Ve=Z.split(".");B=Rt(q(Ve[0])||""),W=Rt(q(Ve[1])||""),Q=Ve[2],he=W.d||{},delete W.d}catch(Ve){}return{header:B,claims:W,data:he,signature:Q}},Br=function(Z){const W=vt(Z).claims;return!!W&&"object"==typeof W&&W.hasOwnProperty("iat")},vn=function(Z){const B=vt(Z).claims;return"object"==typeof B&&!0===B.admin};function xo(Z,B){return Object.prototype.hasOwnProperty.call(Z,B)}function Hn(Z,B){if(Object.prototype.hasOwnProperty.call(Z,B))return Z[B]}function ar(Z){for(const B in Z)if(Object.prototype.hasOwnProperty.call(Z,B))return!1;return!0}function sn(Z,B,W){const he={};for(const Q in Z)Object.prototype.hasOwnProperty.call(Z,Q)&&(he[Q]=B.call(W,Z[Q],Q,Z));return he}function Nn(Z,B){if(Z===B)return!0;const W=Object.keys(Z),he=Object.keys(B);for(const Q of W){if(!he.includes(Q))return!1;const Ve=Z[Q],yt=B[Q];if(ua(Ve)&&ua(yt)){if(!Nn(Ve,yt))return!1}else if(Ve!==yt)return!1}for(const Q of he)if(!W.includes(Q))return!1;return!0}function ua(Z){return null!==Z&&"object"==typeof Z}function Fi(Z){const B=[];for(const[W,he]of Object.entries(Z))Array.isArray(he)?he.forEach(Q=>{B.push(encodeURIComponent(W)+"="+encodeURIComponent(Q))}):B.push(encodeURIComponent(W)+"="+encodeURIComponent(he));return B.length?"&"+B.join("&"):""}function vr(Z){const B={};return Z.replace(/^\?/,"").split("&").forEach(he=>{if(he){const[Q,Ve]=he.split("=");B[decodeURIComponent(Q)]=decodeURIComponent(Ve)}}),B}function Ae(Z){const B=Z.indexOf("?");if(!B)return"";const W=Z.indexOf("#",B);return Z.substring(B,W>0?W:void 0)}class hr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let B=1;B<this.blockSize;++B)this.pad_[B]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(B,W){W||(W=0);const he=this.W_;if("string"==typeof B)for(let Mt=0;Mt<16;Mt++)he[Mt]=B.charCodeAt(W)<<24|B.charCodeAt(W+1)<<16|B.charCodeAt(W+2)<<8|B.charCodeAt(W+3),W+=4;else for(let Mt=0;Mt<16;Mt++)he[Mt]=B[W]<<24|B[W+1]<<16|B[W+2]<<8|B[W+3],W+=4;for(let Mt=16;Mt<80;Mt++){const qn=he[Mt-3]^he[Mt-8]^he[Mt-14]^he[Mt-16];he[Mt]=4294967295&(qn<<1|qn>>>31)}let Jn,Yt,Q=this.chain_[0],Ve=this.chain_[1],yt=this.chain_[2],Jt=this.chain_[3],fr=this.chain_[4];for(let Mt=0;Mt<80;Mt++){Mt<40?Mt<20?(Jn=Jt^Ve&(yt^Jt),Yt=1518500249):(Jn=Ve^yt^Jt,Yt=1859775393):Mt<60?(Jn=Ve&yt|Jt&(Ve|yt),Yt=2400959708):(Jn=Ve^yt^Jt,Yt=3395469782);const qn=(Q<<5|Q>>>27)+Jn+fr+Yt+he[Mt]&4294967295;fr=Jt,Jt=yt,yt=4294967295&(Ve<<30|Ve>>>2),Ve=Q,Q=qn}this.chain_[0]=this.chain_[0]+Q&4294967295,this.chain_[1]=this.chain_[1]+Ve&4294967295,this.chain_[2]=this.chain_[2]+yt&4294967295,this.chain_[3]=this.chain_[3]+Jt&4294967295,this.chain_[4]=this.chain_[4]+fr&4294967295}update(B,W){if(null==B)return;void 0===W&&(W=B.length);const he=W-this.blockSize;let Q=0;const Ve=this.buf_;let yt=this.inbuf_;for(;Q<W;){if(0===yt)for(;Q<=he;)this.compress_(B,Q),Q+=this.blockSize;if("string"==typeof B){for(;Q<W;)if(Ve[yt]=B.charCodeAt(Q),++yt,++Q,yt===this.blockSize){this.compress_(Ve),yt=0;break}}else for(;Q<W;)if(Ve[yt]=B[Q],++yt,++Q,yt===this.blockSize){this.compress_(Ve),yt=0;break}}this.inbuf_=yt,this.total_+=W}digest(){const B=[];let W=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Q=this.blockSize-1;Q>=56;Q--)this.buf_[Q]=255&W,W/=256;this.compress_(this.buf_);let he=0;for(let Q=0;Q<5;Q++)for(let Ve=24;Ve>=0;Ve-=8)B[he]=this.chain_[Q]>>Ve&255,++he;return B}}function $n(Z,B){const W=new mt(Z,B);return W.subscribe.bind(W)}class mt{constructor(B,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{B(this)}).catch(he=>{this.error(he)})}next(B){this.forEachObserver(W=>{W.next(B)})}error(B){this.forEachObserver(W=>{W.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,W,he){let Q;if(void 0===B&&void 0===W&&void 0===he)throw new Error("Missing Observer.");Q=function Ts(Z,B){if("object"!=typeof Z||null===Z)return!1;for(const W of B)if(W in Z&&"function"==typeof Z[W])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:W,complete:he},void 0===Q.next&&(Q.next=lr),void 0===Q.error&&(Q.error=lr),void 0===Q.complete&&(Q.complete=lr);const Ve=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch(yt){}}),this.observers.push(Q),Ve}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,B)}sendOne(B,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{W(this.observers[B])}catch(he){"undefined"!=typeof console&&console.error&&console.error(he)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lr(){}const _i=function(Z,B,W,he){let Q;if(he<B?Q="at least "+B:he>W&&(Q=0===W?"none":"no more than "+W),Q)throw new Error(Z+" failed: Was called with "+he+(1===he?" argument.":" arguments.")+" Expects "+Q+".")};function Mr(Z,B){return`${Z} failed: ${B} argument `}function Zn(Z,B,W,he){if((!he||W)&&"function"!=typeof W)throw new Error(Mr(Z,B)+"must be a valid function.")}function Ul(Z,B,W,he){if((!he||W)&&("object"!=typeof W||null===W))throw new Error(Mr(Z,B)+"must be a valid context object.")}const dn=function(Z){const B=[];let W=0;for(let he=0;he<Z.length;he++){let Q=Z.charCodeAt(he);if(Q>=55296&&Q<=56319){const Ve=Q-55296;he++,O(he<Z.length,"Surrogate pair missing trail surrogate."),Q=65536+(Ve<<10)+(Z.charCodeAt(he)-56320)}Q<128?B[W++]=Q:Q<2048?(B[W++]=Q>>6|192,B[W++]=63&Q|128):Q<65536?(B[W++]=Q>>12|224,B[W++]=Q>>6&63|128,B[W++]=63&Q|128):(B[W++]=Q>>18|240,B[W++]=Q>>12&63|128,B[W++]=Q>>6&63|128,B[W++]=63&Q|128)}return B},et=function(Z){let B=0;for(let W=0;W<Z.length;W++){const he=Z.charCodeAt(W);he<128?B++:he<2048?B+=2:he>=55296&&he<=56319?(B+=4,W++):B+=3}return B};function Et(Z,B=1e3,W=2){const he=B*Math.pow(W,Z),Q=Math.round(.5*he*(Math.random()-.5)*2);return Math.min(144e5,he+Q)}function rn(Z){return Z&&Z._delegate?Z._delegate:Z}function bt(Z,B){return new Promise((W,he)=>{Z.onsuccess=Q=>{W(Q.target.result)},Z.onerror=Q=>{var Ve;he(`${B}: ${null===(Ve=Q.target.error)||void 0===Ve?void 0:Ve.message}`)}})}class Bt{constructor(B){this._db=B,this.objectStoreNames=this._db.objectStoreNames}transaction(B,W){return new Je(this._db.transaction.call(this._db,B,W))}createObjectStore(B,W){return new be(this._db.createObjectStore(B,W))}close(){this._db.close()}}class Je{constructor(B){this._transaction=B,this.complete=new Promise((W,he)=>{this._transaction.oncomplete=function(){W()},this._transaction.onerror=()=>{he(this._transaction.error)},this._transaction.onabort=()=>{he(this._transaction.error)}})}objectStore(B){return new be(this._transaction.objectStore(B))}}class be{constructor(B){this._store=B}index(B){return new ot(this._store.index(B))}createIndex(B,W,he){return new ot(this._store.createIndex(B,W,he))}get(B){return bt(this._store.get(B),"Error reading from IndexedDB")}put(B,W){return bt(this._store.put(B,W),"Error writing to IndexedDB")}delete(B){return bt(this._store.delete(B),"Error deleting from IndexedDB")}clear(){return bt(this._store.clear(),"Error clearing IndexedDB object store")}}class ot{constructor(B){this._index=B}get(B){return bt(this._index.get(B),"Error reading from IndexedDB")}}function ht(Z,B,W){return new Promise((he,Q)=>{try{const Ve=indexedDB.open(Z,B);Ve.onsuccess=yt=>{he(new Bt(yt.target.result))},Ve.onerror=yt=>{var Jt;Q(`Error opening indexedDB: ${null===(Jt=yt.target.error)||void 0===Jt?void 0:Jt.message}`)},Ve.onupgradeneeded=yt=>{W(new Bt(Ve.result),yt.oldVersion,yt.newVersion,new Je(Ve.transaction))}}catch(Ve){Q(`Error opening indexedDB: ${Ve.message}`)}})}function jt(Z){return on.apply(this,arguments)}function on(){return(on=(0,u.Z)(function*(Z){return new Promise((B,W)=>{try{const he=indexedDB.deleteDatabase(Z);he.onsuccess=()=>{B()},he.onerror=Q=>{var Ve;W(`Error deleting indexedDB database "${Z}": ${null===(Ve=Q.target.error)||void 0===Ve?void 0:Ve.message}`)}}catch(he){W(`Error deleting indexedDB database "${Z}": ${he.message}`)}})})).apply(this,arguments)}},4600:(ut,Ce,F)=>{var u=F(5e3);let Y=null;function O(){return Y}const oe=new u.OlP("DocumentToken");let ae=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function fe(){return(0,u.LFG)(G)}()},providedIn:"platform"}),n})();const q=new u.OlP("Location Initialized");let G=(()=>{class n extends ae{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){te()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){te()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function $e(){return new G((0,u.LFG)(oe))}()},providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function Te(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ze(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ue(n){return n&&"?"!==n[0]?"?"+n:n}let Fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function X(n){const e=(0,u.LFG)(oe).location;return new Le((0,u.LFG)(ae),e&&e.origin||"")}()},providedIn:"root"}),n})();const De=new u.OlP("appBaseHref");let Le=(()=>{class n extends Fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Te(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ue(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+Ue(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+Ue(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ae),u.LFG(De,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Ne=(()=>{class n extends Fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Te(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+Ue(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+Ue(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ae),u.LFG(De,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),st=(()=>{class n{constructor(t,r){this._subject=new u.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ze(Qe(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ue(r))}normalize(t){return n.stripTrailingSlash(function Ge(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Qe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ue,n.joinWithSlash=Te,n.stripTrailingSlash=Ze,n.\u0275fac=function(t){return new(t||n)(u.LFG(Fe),u.LFG(ae))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Re(){return new st((0,u.LFG)(Fe),(0,u.LFG)(ae))}()},providedIn:"root"}),n})();function Qe(n){return n.replace(/\/index.html$/,"")}var ce=(()=>((ce=ce||{})[ce.Zero=0]="Zero",ce[ce.One=1]="One",ce[ce.Two=2]="Two",ce[ce.Few=3]="Few",ce[ce.Many=4]="Many",ce[ce.Other=5]="Other",ce))(),_e=(()=>((_e=_e||{})[_e.Format=0]="Format",_e[_e.Standalone=1]="Standalone",_e))(),ve=(()=>((ve=ve||{})[ve.Narrow=0]="Narrow",ve[ve.Abbreviated=1]="Abbreviated",ve[ve.Wide=2]="Wide",ve[ve.Short=3]="Short",ve))(),Pe=(()=>((Pe=Pe||{})[Pe.Short=0]="Short",Pe[Pe.Medium=1]="Medium",Pe[Pe.Long=2]="Long",Pe[Pe.Full=3]="Full",Pe))(),de=(()=>((de=de||{})[de.Decimal=0]="Decimal",de[de.Group=1]="Group",de[de.List=2]="List",de[de.PercentSign=3]="PercentSign",de[de.PlusSign=4]="PlusSign",de[de.MinusSign=5]="MinusSign",de[de.Exponential=6]="Exponential",de[de.SuperscriptingExponent=7]="SuperscriptingExponent",de[de.PerMille=8]="PerMille",de[de.Infinity=9]="Infinity",de[de.NaN=10]="NaN",de[de.TimeSeparator=11]="TimeSeparator",de[de.CurrencyDecimal=12]="CurrencyDecimal",de[de.CurrencyGroup=13]="CurrencyGroup",de))();function Br(n,e){return tn((0,u.cg1)(n)[u.wAp.DateFormat],e)}function vn(n,e){return tn((0,u.cg1)(n)[u.wAp.TimeFormat],e)}function xo(n,e){return tn((0,u.cg1)(n)[u.wAp.DateTimeFormat],e)}function Hn(n,e){const t=(0,u.cg1)(n),r=t[u.wAp.NumberSymbols][e];if(void 0===r){if(e===de.CurrencyDecimal)return t[u.wAp.NumberSymbols][de.Decimal];if(e===de.CurrencyGroup)return t[u.wAp.NumberSymbols][de.Group]}return r}const vr=u.kL8;function Ae(n){if(!n[u.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[u.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function tn(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function Ts(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const wr=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Zn={},Ul=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var dn=(()=>((dn=dn||{})[dn.Short=0]="Short",dn[dn.ShortGMT=1]="ShortGMT",dn[dn.Long=2]="Long",dn[dn.Extended=3]="Extended",dn))(),et=(()=>((et=et||{})[et.FullYear=0]="FullYear",et[et.Month=1]="Month",et[et.Date=2]="Date",et[et.Hours=3]="Hours",et[et.Minutes=4]="Minutes",et[et.Seconds=5]="Seconds",et[et.FractionalSeconds=6]="FractionalSeconds",et[et.Day=7]="Day",et))(),wt=(()=>((wt=wt||{})[wt.DayPeriods=0]="DayPeriods",wt[wt.Days=1]="Days",wt[wt.Months=2]="Months",wt[wt.Eras=3]="Eras",wt))();function no(n,e,t,r){let i=function Jt(n){if(Jn(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,a=1,c=1]=n.split("-").map(p=>+p);return Ds(i,a-1,c)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(wr))return function fr(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,a=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const c=Number(n[4]||0)-t,p=Number(n[5]||0)-r,_=Number(n[6]||0),E=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return a.call(e,c,p,_,E),e}(r)}const e=new Date(n);if(!Jn(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=nn(t,e)||e;let p,c=[];for(;e;){if(p=Ul.exec(e),!p){c.push(e);break}{c=c.concat(p.slice(1));const D=c.pop();if(!D)break;e=D}}let _=i.getTimezoneOffset();r&&(_=Q(r,_),i=function yt(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function Ve(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(Q(e,i)-i))}(i,r,!0));let E="";return c.forEach(D=>{const S=function he(n){if(W[n])return W[n];let e;switch(n){case"G":case"GG":case"GGG":e=Bt(wt.Eras,ve.Abbreviated);break;case"GGGG":e=Bt(wt.Eras,ve.Wide);break;case"GGGGG":e=Bt(wt.Eras,ve.Narrow);break;case"y":e=rn(et.FullYear,1,0,!1,!0);break;case"yy":e=rn(et.FullYear,2,0,!0,!0);break;case"yyy":e=rn(et.FullYear,3,0,!1,!0);break;case"yyyy":e=rn(et.FullYear,4,0,!1,!0);break;case"Y":e=B(1);break;case"YY":e=B(2,!0);break;case"YYY":e=B(3);break;case"YYYY":e=B(4);break;case"M":case"L":e=rn(et.Month,1,1);break;case"MM":case"LL":e=rn(et.Month,2,1);break;case"MMM":e=Bt(wt.Months,ve.Abbreviated);break;case"MMMM":e=Bt(wt.Months,ve.Wide);break;case"MMMMM":e=Bt(wt.Months,ve.Narrow);break;case"LLL":e=Bt(wt.Months,ve.Abbreviated,_e.Standalone);break;case"LLLL":e=Bt(wt.Months,ve.Wide,_e.Standalone);break;case"LLLLL":e=Bt(wt.Months,ve.Narrow,_e.Standalone);break;case"w":e=Z(1);break;case"ww":e=Z(2);break;case"W":e=Z(1,!0);break;case"d":e=rn(et.Date,1);break;case"dd":e=rn(et.Date,2);break;case"c":case"cc":e=rn(et.Day,1);break;case"ccc":e=Bt(wt.Days,ve.Abbreviated,_e.Standalone);break;case"cccc":e=Bt(wt.Days,ve.Wide,_e.Standalone);break;case"ccccc":e=Bt(wt.Days,ve.Narrow,_e.Standalone);break;case"cccccc":e=Bt(wt.Days,ve.Short,_e.Standalone);break;case"E":case"EE":case"EEE":e=Bt(wt.Days,ve.Abbreviated);break;case"EEEE":e=Bt(wt.Days,ve.Wide);break;case"EEEEE":e=Bt(wt.Days,ve.Narrow);break;case"EEEEEE":e=Bt(wt.Days,ve.Short);break;case"a":case"aa":case"aaa":e=Bt(wt.DayPeriods,ve.Abbreviated);break;case"aaaa":e=Bt(wt.DayPeriods,ve.Wide);break;case"aaaaa":e=Bt(wt.DayPeriods,ve.Narrow);break;case"b":case"bb":case"bbb":e=Bt(wt.DayPeriods,ve.Abbreviated,_e.Standalone,!0);break;case"bbbb":e=Bt(wt.DayPeriods,ve.Wide,_e.Standalone,!0);break;case"bbbbb":e=Bt(wt.DayPeriods,ve.Narrow,_e.Standalone,!0);break;case"B":case"BB":case"BBB":e=Bt(wt.DayPeriods,ve.Abbreviated,_e.Format,!0);break;case"BBBB":e=Bt(wt.DayPeriods,ve.Wide,_e.Format,!0);break;case"BBBBB":e=Bt(wt.DayPeriods,ve.Narrow,_e.Format,!0);break;case"h":e=rn(et.Hours,1,-12);break;case"hh":e=rn(et.Hours,2,-12);break;case"H":e=rn(et.Hours,1);break;case"HH":e=rn(et.Hours,2);break;case"m":e=rn(et.Minutes,1);break;case"mm":e=rn(et.Minutes,2);break;case"s":e=rn(et.Seconds,1);break;case"ss":e=rn(et.Seconds,2);break;case"S":e=rn(et.FractionalSeconds,1);break;case"SS":e=rn(et.FractionalSeconds,2);break;case"SSS":e=rn(et.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=be(dn.Short);break;case"ZZZZZ":e=be(dn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=be(dn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=be(dn.Long);break;default:return null}return W[n]=e,e}(D);E+=S?S(i,t,_):"''"===D?"'":D.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),E}function Ds(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function nn(n,e){const t=function en(n){return(0,u.cg1)(n)[u.wAp.LocaleId]}(n);if(Zn[t]=Zn[t]||{},Zn[t][e])return Zn[t][e];let r="";switch(e){case"shortDate":r=Br(n,Pe.Short);break;case"mediumDate":r=Br(n,Pe.Medium);break;case"longDate":r=Br(n,Pe.Long);break;case"fullDate":r=Br(n,Pe.Full);break;case"shortTime":r=vn(n,Pe.Short);break;case"mediumTime":r=vn(n,Pe.Medium);break;case"longTime":r=vn(n,Pe.Long);break;case"fullTime":r=vn(n,Pe.Full);break;case"short":const i=nn(n,"shortTime"),a=nn(n,"shortDate");r=Et(xo(n,Pe.Short),[i,a]);break;case"medium":const c=nn(n,"mediumTime"),p=nn(n,"mediumDate");r=Et(xo(n,Pe.Medium),[c,p]);break;case"long":const _=nn(n,"longTime"),E=nn(n,"longDate");r=Et(xo(n,Pe.Long),[_,E]);break;case"full":const D=nn(n,"fullTime"),S=nn(n,"fullDate");r=Et(xo(n,Pe.Full),[D,S])}return r&&(Zn[t][e]=r),r}function Et(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Er(n,e,t="-",r,i){let a="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,a=t));let c=String(n);for(;c.length<e;)c="0"+c;return r&&(c=c.substr(c.length-e)),a+c}function rn(n,e,t=0,r=!1,i=!1){return function(a,c){let p=function bt(n,e){switch(n){case et.FullYear:return e.getFullYear();case et.Month:return e.getMonth();case et.Date:return e.getDate();case et.Hours:return e.getHours();case et.Minutes:return e.getMinutes();case et.Seconds:return e.getSeconds();case et.FractionalSeconds:return e.getMilliseconds();case et.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,a);if((t>0||p>-t)&&(p+=t),n===et.Hours)0===p&&-12===t&&(p=12);else if(n===et.FractionalSeconds)return function Ro(n,e){return Er(n,3).substr(0,e)}(p,e);const _=Hn(c,de.MinusSign);return Er(p,e,_,r,i)}}function Bt(n,e,t=_e.Format,r=!1){return function(i,a){return function Je(n,e,t,r,i,a){switch(t){case wt.Months:return function St(n,e,t){const r=(0,u.cg1)(n),a=tn([r[u.wAp.MonthsFormat],r[u.wAp.MonthsStandalone]],e);return tn(a,t)}(e,i,r)[n.getMonth()];case wt.Days:return function Rt(n,e,t){const r=(0,u.cg1)(n),a=tn([r[u.wAp.DaysFormat],r[u.wAp.DaysStandalone]],e);return tn(a,t)}(e,i,r)[n.getDay()];case wt.DayPeriods:const c=n.getHours(),p=n.getMinutes();if(a){const E=function hr(n){const e=(0,u.cg1)(n);return Ae(e),(e[u.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Ts(r):[Ts(r[0]),Ts(r[1])])}(e),D=function $n(n,e,t){const r=(0,u.cg1)(n);Ae(r);const a=tn([r[u.wAp.ExtraData][0],r[u.wAp.ExtraData][1]],e)||[];return tn(a,t)||[]}(e,i,r),S=E.findIndex(N=>{if(Array.isArray(N)){const[U,H]=N,ue=c>=U.hours&&p>=U.minutes,Ee=c<H.hours||c===H.hours&&p<H.minutes;if(U.hours<H.hours){if(ue&&Ee)return!0}else if(ue||Ee)return!0}else if(N.hours===c&&N.minutes===p)return!0;return!1});if(-1!==S)return D[S]}return function Qn(n,e,t){const r=(0,u.cg1)(n),a=tn([r[u.wAp.DayPeriodsFormat],r[u.wAp.DayPeriodsStandalone]],e);return tn(a,t)}(e,i,r)[c<12?0:1];case wt.Eras:return function vt(n,e){return tn((0,u.cg1)(n)[u.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,a,n,e,t,r)}}function be(n){return function(e,t,r){const i=-1*r,a=Hn(t,de.MinusSign),c=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case dn.Short:return(i>=0?"+":"")+Er(c,2,a)+Er(Math.abs(i%60),2,a);case dn.ShortGMT:return"GMT"+(i>=0?"+":"")+Er(c,1,a);case dn.Long:return"GMT"+(i>=0?"+":"")+Er(c,2,a)+":"+Er(Math.abs(i%60),2,a);case dn.Extended:return 0===r?"Z":(i>=0?"+":"")+Er(c,2,a)+":"+Er(Math.abs(i%60),2,a);default:throw new Error(`Unknown zone width "${n}"`)}}}function on(n){return Ds(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function Z(n,e=!1){return function(t,r){let i;if(e){const a=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,c=t.getDate();i=1+Math.floor((c+a)/7)}else{const a=on(t),c=function jt(n){const e=Ds(n,0,1).getDay();return Ds(n,0,1+(e<=4?4:11)-e)}(a.getFullYear()),p=a.getTime()-c.getTime();i=1+Math.round(p/6048e5)}return Er(i,n,Hn(r,de.MinusSign))}}function B(n,e=!1){return function(t,r){return Er(on(t).getFullYear(),n,Hn(r,de.MinusSign),e)}}const W={};function Q(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Jn(n){return n instanceof Date&&!isNaN(n.valueOf())}class br{}let ha=(()=>{class n extends br{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(vr(r||this.locale)(t)){case ce.Zero:return"zero";case ce.One:return"one";case ce.Two:return"two";case ce.Few:return"few";case ce.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.soG))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Tt(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}class Ss{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let io=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function vi(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((i,a,c)=>{if(null==i.previousIndex){const p=this._viewContainer.createEmbeddedView(this._template,new Ss(null,this._ngForOf,-1,-1),null===c?void 0:c),_=new Cr(i,p);r.push(_)}else if(null==c)this._viewContainer.remove(null===a?void 0:a);else if(null!==a){const p=this._viewContainer.get(a);this._viewContainer.move(p,c);const _=new Cr(i,p);r.push(_)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,a=this._viewContainer.length;i<a;i++){const c=this._viewContainer.get(i);c.context.index=i,c.context.count=a,c.context.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Cr{constructor(e,t){this.record=e,this.view=t}}let wi=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Ui,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){an("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){an("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Ui{constructor(){this.$implicit=null,this.ngIf=null}}function an(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}function Vi(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,u.AaK)(n)}'`)}class ga{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Jh{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const sd=new Jh,Xh=new ga;let ma=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,u.QGY)(t))return sd;if((0,u.F4k)(t))return Xh;throw Vi(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO,16))},n.\u0275pipe=u.Yjl({name:"async",type:n,pure:!1}),n})();const Zu=new u.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let _a=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",i,a){var c;if(null==t||""===t||t!=t)return null;try{return no(t,r,a||this.locale,null!==(c=null!=i?i:this.defaultTimezone)&&void 0!==c?c:void 0)}catch(p){throw Vi(n,p.message)}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.soG,16),u.Y36(Zu,24))},n.\u0275pipe=u.Yjl({name:"date",type:n,pure:!0}),n})(),cd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[{provide:br,useClass:ha}]}),n})();function Ir(n){return"server"===n}let sf=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new za((0,u.LFG)(oe),window)}),n})();class za{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function In(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ei(this.window.history)||ei(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ei(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Oo{}class Fo extends class Bn extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){Y||(Y=n)}(new Fo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Rs(){return jr=jr||document.querySelector("base"),jr?jr.getAttribute("href"):null}();return null==t?null:function Hl(n){On=On||document.createElement("a"),On.setAttribute("href",n);const e=On.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){jr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Tt(document.cookie,e)}}let On,jr=null;const Ka=new u.OlP("TRANSITION_ID"),ti=[{provide:u.ip1,useFactory:function Sn(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Ka,oe,u.zs3],multi:!0}];class Bi{static init(){(0,u.VLi)(new Bi)}addToWindow(e){u.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const i=u.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const p=function(_){c=c||_,a--,0==a&&r(c)};i.forEach(function(_){_.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Gu=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Ms=new u.OlP("EventManagerPlugins");let ni=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const c=i[a];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ms),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class va{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let lo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),tt=(()=>{class n extends lo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const c=this._doc.createElement("style");c.textContent=a,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach($l),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach($l))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function $l(n){O().remove(n)}const Zl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ya=/%COMP%/g;function uo(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?uo(n,i,t):(i=i.replace(Ya,n),t.push(i))}return t}function Cn(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let as=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Hr(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case u.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Yu(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case u.ifc.ShadowDom:return new Qu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=uo(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ni),u.LFG(tt),u.LFG(u.AFp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Hr{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Zl[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Zl[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Zl[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,i&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Cn(r)):this.eventManager.addEventListener(e,t,Cn(r))}}class Yu extends Hr{constructor(e,t,r,i){super(e),this.component=r;const a=uo(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Ie(n){return"_ngcontent-%COMP%".replace(Ya,n)}(i+"-"+r.id),this.hostAttr=function Ht(n){return"_nghost-%COMP%".replace(Ya,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Qu extends Hr{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=uo(i.id,i.styles,[]);for(let c=0;c<a.length;c++){const p=document.createElement("style");p.textContent=a[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Xa=(()=>{class n extends va{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const co=["alt","control","meta","shift"],ri={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ju={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ks={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ji=(()=>{class n extends va{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="";if(co.forEach(_=>{const E=r.indexOf(_);E>-1&&(r.splice(E,1),c+=_+".")}),c+=a,0!=r.length||0===a.length)return null;const p={};return p.domEventName=i,p.fullKey=c,p}static getEventFullKey(t){let r="",i=function Xu(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Ju.hasOwnProperty(e)&&(e=Ju[e]))}return ri[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),co.forEach(a=>{a!=i&&ks[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Uo=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:"browser"},{provide:u.g9A,useValue:function Lo(){Fo.makeCurrent(),Bi.init()},multi:!0},{provide:oe,useFactory:function ba(){return(0,u.RDi)(document),document},deps:[]}]),hd=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function ec(){return new u.qLn},deps:[]},{provide:Ms,useClass:Xa,multi:!0,deps:[oe,u.R0b,u.Lbi]},{provide:Ms,useClass:ji,multi:!0,deps:[oe]},{provide:as,useClass:as,deps:[ni,tt,u.AFp]},{provide:u.FYo,useExisting:as},{provide:lo,useExisting:tt},{provide:tt,useClass:tt,deps:[oe]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b]},{provide:ni,useClass:ni,deps:[Ms,u.R0b]},{provide:Oo,useClass:Gu,deps:[]}];let Vo=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:Ka,useExisting:u.AFp},ti]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(n,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:hd,imports:[cd,u.hGG]}),n})();"undefined"!=typeof window&&window;var ln=F(8996),zn=F(7669);function pt(...n){const e=(0,zn.yG)(n);return(0,ln.D)(n,e)}var Hi=F(7579);class bi extends Hi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var ur=F(8306);const{isArray:sl}=Array,{getPrototypeOf:Ng,prototype:jo,keys:md}=Object;function Ns(n){if(1===n.length){const e=n[0];if(sl(e))return{args:e,keys:null};if(function Ho(n){return n&&"object"==typeof n&&Ng(n)===jo}(e)){const t=md(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var $i=F(4671),at=F(4004);const{isArray:hf}=Array;function Ia(n){return(0,at.U)(e=>function ff(n,e){return hf(e)?n(...e):n(e)}(n,e))}function fo(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Ln=F(5403),Ta=F(9672);function eu(n,e,t){n?(0,Ta.f)(t,n,e):e()}const po=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ol=F(8189);function Da(...n){return function al(){return(0,ol.J)(1)}()((0,ln.D)(n,(0,zn.yG)(n)))}var gr=F(8421);function ll(n){return new ur.y(e=>{(0,gr.Xf)(n()).subscribe(e)})}var Aa=F(515),Zo=F(727),mr=F(4482);function pn(){return(0,mr.e)((n,e)=>{let t=null;n._refCount++;const r=new Ln.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class _d extends ur.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,mr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Zo.w0;const t=this.getSubject();e.add(this.source.subscribe(new Ln.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Zo.w0.EMPTY)}return e}refCount(){return pn()(this)}}function Dn(n,e){return(0,mr.e)((t,r)=>{let i=null,a=0,c=!1;const p=()=>c&&!i&&r.complete();t.subscribe(new Ln.Q(r,_=>{null==i||i.unsubscribe();let E=0;const D=a++;(0,gr.Xf)(n(_,D)).subscribe(i=new Ln.Q(r,S=>r.next(e?e(_,S,D,E++):S),()=>{i=null,p()}))},()=>{c=!0,p()}))})}var ul=F(5698);function ii(...n){const e=(0,zn.yG)(n);return(0,mr.e)((t,r)=>{(e?Da(n,t,e):Da(n,t)).subscribe(r)})}function Sa(n,e,t,r,i){return(a,c)=>{let p=t,_=e,E=0;a.subscribe(new Ln.Q(c,D=>{const S=E++;_=p?n(_,D,S):(p=!0,D),r&&c.next(_)},i&&(()=>{p&&c.next(_),c.complete()})))}}function $r(n,e){return(0,mr.e)(Sa(n,e,arguments.length>=2,!0))}function Ci(n,e){return(0,mr.e)((t,r)=>{let i=0;t.subscribe(new Ln.Q(r,a=>n.call(e,a,i++)&&r.next(a)))})}function Ii(n){return(0,mr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe(new Ln.Q(t,void 0,void 0,c=>{a=(0,gr.Xf)(n(c,Ii(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var xn=F(5577),yd=F(576);function ds(n,e){return(0,yd.m)(e)?(0,xn.z)(n,e,1):(0,xn.z)(n,1)}function un(n){return n<=0?()=>Aa.E:(0,mr.e)((e,t)=>{let r=[];e.subscribe(new Ln.Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function pf(n=gf){return(0,mr.e)((e,t)=>{let r=!1;e.subscribe(new Ln.Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function gf(){return new po}function mf(n){return(0,mr.e)((e,t)=>{let r=!1;e.subscribe(new Ln.Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function xa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ci((i,a)=>n(i,a,r)):$i.y,(0,ul.q)(1),t?mf(e):pf(()=>new po))}var kr=F(8505);function rc(n){return(0,mr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class si{constructor(e,t){this.id=e,this.url=t}}class vd extends si{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Un extends si{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ps extends si{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class cl extends si{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Pg extends si{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Og extends si{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zr extends si{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class hs extends si{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tu extends si{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ra{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ma{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class nu{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ka{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ic{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wd{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sc{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const xt="primary";class Nr{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function qo(n){return new Nr(n)}const Na="ngNavigationCancelingError";function yf(n){const e=Error("NavigationCancelingError: "+n);return e[Na]=!0,e}function bd(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],p=n[a];if(c.startsWith(":"))i[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Zi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Cd(n[i],e[i]))return!1;return!0}function Cd(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function ru(n){return Array.prototype.concat.apply([],n)}function Os(n){return n.length>0?n[n.length-1]:null}function En(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function qi(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,ln.D)(Promise.resolve(n)):pt(n)}const Oa={exact:function I(n,e,t){if(!gt(n.segments,e.segments)||!z(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!I(n.children[r],e.children[r],t))return!1;return!0},subset:k},go={exact:function Fg(n,e){return Zi(n,e)},subset:function T(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Cd(n[t],e[t]))},ignored:()=>!0};function ou(n,e,t){return Oa[t.paths](n.root,e.root,t.matrixParams)&&go[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function k(n,e,t){return V(n,e,e.segments,t)}function V(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!gt(i,t)||e.hasChildren()||!z(i,t,r))}if(n.segments.length===t.length){if(!gt(n.segments,t)||!z(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!k(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(gt(n.segments,i)&&z(n.segments,i,r)&&n.children[xt])&&V(n.children[xt],e,a,r)}}function z(n,e,t){return e.every((r,i)=>go[t](n[i].parameters,r.parameters))}class ne{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qo(this.queryParams)),this._queryParamMap}toString(){return tr.serialize(this)}}class ie{constructor(e,t){this.segments=e,this.children=t,this.parent=null,En(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gi(this)}}class We{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=qo(this.parameters)),this._parameterMap}toString(){return oc(this)}}function gt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Ct{}class oi{parse(e){const t=new UE(e);return new ne(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Pr(e.root,!0)}`,r=function xy(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Or(t)}=${Or(i)}`).join("&"):`${Or(t)}=${Or(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Ls(n){return encodeURI(n)}(e.fragment)}`:""}`}}const tr=new oi;function Gi(n){return n.segments.map(e=>oc(e)).join("/")}function Pr(n,e){if(!n.hasChildren())return Gi(n);if(e){const t=n.children[xt]?Pr(n.children[xt],!1):"",r=[];return En(n.children,(i,a)=>{a!==xt&&r.push(`${a}:${Pr(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function zt(n,e){let t=[];return En(n.children,(r,i)=>{i===xt&&(t=t.concat(e(r,i)))}),En(n.children,(r,i)=>{i!==xt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===xt?[Pr(n.children[xt],!1)]:[`${i}:${Pr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[xt]?`${Gi(n)}/${t[0]}`:`${Gi(n)}/(${t.join("//")})`}}function Fs(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Or(n){return Fs(n).replace(/%3B/gi,";")}function dl(n){return Fs(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function au(n){return decodeURIComponent(n)}function hl(n){return au(n.replace(/\+/g,"%20"))}function oc(n){return`${dl(n.path)}${function vf(n){return Object.keys(n).map(e=>`;${dl(e)}=${dl(n[e])}`).join("")}(n.parameters)}`}const fl=/^[^\/()?;=#]+/;function Go(n){const e=n.match(fl);return e?e[0]:""}const Ry=/^[^=?&#]+/,Id=/^[^&#]+/;class UE{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ie([],{}):new ie([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[xt]=new ie(e,t)),r}parseSegment(){const e=Go(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new We(au(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Go(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Go(this.remaining);i&&(r=i,this.capture(r))}e[au(t)]=au(r)}parseQueryParam(e){const t=function LE(n){const e=n.match(Ry);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function My(n){const e=n.match(Id);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=hl(t),a=hl(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Go(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=xt);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[xt]:new ie([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Td{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=wf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=wf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ef(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ef(e,this._root).map(t=>t.value)}}function wf(n,e){if(n===e.value)return e;for(const t of e.children){const r=wf(n,t);if(r)return r}return null}function Ef(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ef(n,t);if(r.length)return r.unshift(e),r}return[]}class Ti{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Fa(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Wo extends Td{constructor(e,t){super(e),this.snapshot=t,lc(this,e)}toString(){return this.snapshot.toString()}}function ac(n,e){const t=function bf(n,e){const c=new uu([],{},{},"",{},xt,e,null,n.root,-1,{});return new Dd("",new Ti(c,[]))}(n,e),r=new bi([new We("",{})]),i=new bi({}),a=new bi({}),c=new bi({}),p=new bi(""),_=new lu(r,i,c,p,a,xt,e,t.root);return _.snapshot=t.root,new Wo(new Ti(_,[]),t)}class lu{constructor(e,t,r,i,a,c,p,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=p,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,at.U)(e=>qo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,at.U)(e=>qo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function pl(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Cf(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class uu{constructor(e,t,r,i,a,c,p,_,E,D,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=p,this.routeConfig=_,this._urlSegment=E,this._lastPathIndex=D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Dd extends Td{constructor(e,t){super(t),this.url=e,lc(this,t)}toString(){return If(this._root)}}function lc(n,e){e.value._routerState=n,e.children.forEach(t=>lc(n,t))}function If(n){const e=n.children.length>0?` { ${n.children.map(If).join(", ")} } `:"";return`${n.value}${e}`}function Ad(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Zi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Zi(e.params,t.params)||n.params.next(t.params),function Pa(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Zi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Zi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function uc(n,e){const t=Zi(n.params,e.params)&&function Dt(n,e){return gt(n,e)&&n.every((t,r)=>Zi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||uc(n.parent,e.parent))}function cc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Ny(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return cc(n,r,i);return cc(n,r)})}(n,e,t);return new Ti(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>cc(n,p)),c}}const r=function mo(n){return new lu(new bi(n.url),new bi(n.params),new bi(n.queryParams),new bi(n.fragment),new bi(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>cc(n,a));return new Ti(r,i)}}function Sd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function hc(n){return"object"==typeof n&&null!=n&&n.outlets}function Lg(n,e,t,r,i){let a={};return r&&En(r,(c,p)=>{a[p]=Array.isArray(c)?c.map(_=>`${_}`):`${c}`}),new ne(t.root===n?e:xd(t.root,n,e),a,i)}function xd(n,e,t){const r={};return En(n.children,(i,a)=>{r[a]=i===e?t:xd(i,e,t)}),new ie(n.segments,r)}class Py{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Sd(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(hc);if(i&&i!==Os(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Rd{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ug(n,e,t){if(n||(n=new ie([],{})),0===n.segments.length&&n.hasChildren())return Tf(n,e,t);const r=function Df(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],p=t[r];if(hc(p))break;const _=`${p}`,E=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&E&&"object"==typeof E&&void 0===E.outlets){if(!du(_,E,c))return a;r+=2}else{if(!du(_,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new ie(n.segments.slice(0,r.pathIndex),{});return a.children[xt]=new ie(n.segments.slice(r.pathIndex),n.children),Tf(a,0,i)}return r.match&&0===i.length?new ie(n.segments,{}):r.match&&!n.hasChildren()?cu(n,e,t):r.match?Tf(n,0,i):cu(n,e,t)}function Tf(n,e,t){if(0===t.length)return new ie(n.segments,{});{const r=function Ly(n){return hc(n[0])?n[0].outlets:{[xt]:n}}(t),i={};return En(r,(a,c)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[c]=Ug(n.children[c],e,a))}),En(n.children,(a,c)=>{void 0===r[c]&&(i[c]=a)}),new ie(n.segments,i)}}function cu(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(hc(a)){const _=Vg(a.outlets);return new ie(r,_)}if(0===i&&Sd(t[0])){r.push(new We(n.segments[e].path,Us(t[0]))),i++;continue}const c=hc(a)?a.outlets[xt]:`${a}`,p=i<t.length-1?t[i+1]:null;c&&p&&Sd(p)?(r.push(new We(c,Us(p))),i+=2):(r.push(new We(c,{})),i++)}return new ie(r,{})}function Vg(n){const e={};return En(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=cu(new ie([],{}),0,t))}),e}function Us(n){const e={};return En(n,(t,r)=>e[r]=`${t}`),e}function du(n,e,t){return n==t.path&&Zi(e,t.parameters)}class Af{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ad(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Fa(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),En(i,(a,c)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Fa(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Fa(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Fa(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new wd(a.value.snapshot))}),e.children.length&&this.forwardEvent(new ka(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Ad(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),Ad(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=function jg(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=p?p.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=_,c.outlet&&c.outlet.activateWith(i,_),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Hg{constructor(e,t){this.routes=e,this.module=t}}function gl(n){return"function"==typeof n}function Vs(n){return n instanceof ne}const hu=Symbol("INITIAL_VALUE");function ml(){return Dn(n=>function $o(...n){const e=(0,zn.yG)(n),t=(0,zn.jO)(n),{args:r,keys:i}=Ns(n);if(0===r.length)return(0,ln.D)([],e);const a=new ur.y(function cs(n,e,t=$i.y){return r=>{eu(e,()=>{const{length:i}=n,a=new Array(i);let c=i,p=i;for(let _=0;_<i;_++)eu(e,()=>{const E=(0,ln.D)(n[_],e);let D=!1;E.subscribe(new Ln.Q(r,S=>{a[_]=S,D||(D=!0,p--),p||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>fo(i,c):$i.y));return t?a.pipe(Ia(t)):a}(n.map(e=>e.pipe((0,ul.q)(1),ii(hu)))).pipe($r((e,t)=>{let r=!1;return t.reduce((i,a,c)=>i!==hu?i:(a===hu&&(r=!0),r||!1!==a&&c!==t.length-1&&!Vs(a)?i:a),e)},hu),Ci(e=>e!==hu),(0,at.U)(e=>Vs(e)?e:!0===e),(0,ul.q)(1)))}class Vy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new fu,this.attachRef=null}}class fu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Vy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Md=(()=>{class n{constructor(t,r,i,a,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.name=a||xt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,_=new $g(t,p,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(fu),u.Y36(u.s_b),u.Y36(u._Vd),u.$8M("name"),u.Y36(u.sBO))},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class $g{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===lu?this.route:e===fu?this.childContexts:this.parent.get(e,t)}}let pc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"router-outlet")},directives:[Md],encapsulation:2}),n})();function Zg(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];qg(r,_l(e,r))}}function qg(n,e){n.children&&Zg(n.children,e)}function _l(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Kn(n){const e=n.children&&n.children.map(Kn),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==xt&&(t.component=pc),t}function fs(n){return n.outlet||xt}function kd(n,e){const t=n.filter(r=>fs(r)===e);return t.push(...n.filter(r=>fs(r)!==e)),t}const Nd={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function yl(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Nd):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(e.matcher||bd)(t,n,e);if(!a)return Object.assign({},Nd);const c={};En(a.posParams,(_,E)=>{c[E]=_.path});const p=a.consumed.length>0?Object.assign(Object.assign({},c),a.consumed[a.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:p,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function Pd(n,e,t,r,i="corrected"){if(t.length>0&&function jy(n,e,t){return t.some(r=>gc(n,e,r)&&fs(r)!==xt)}(n,t,r)){const c=new ie(e,function xf(n,e,t,r){const i={};i[xt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&fs(a)!==xt){const c=new ie([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[fs(a)]=c}return i}(n,e,r,new ie(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function Hy(n,e,t){return t.some(r=>gc(n,e,r))}(n,t,r)){const c=new ie(n.segments,function By(n,e,t,r,i,a){const c={};for(const p of r)if(gc(n,t,p)&&!i[fs(p)]){const _=new ie([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,c[fs(p)]=_}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const a=new ie(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function gc(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function $y(n,e,t,r){return!!(fs(n)===r||r!==xt&&gc(e,t,n))&&("**"===n.path||yl(e,n,t).matched)}function pu(n,e,t){return 0===e.length&&!n.children[t]}class _r{constructor(e){this.segmentGroup=e||null}}class Od{constructor(e){this.urlTree=e}}function mc(n){return new ur.y(e=>e.error(new _r(n)))}function Fd(n){return new ur.y(e=>e.error(new Od(n)))}function Dr(n){return new ur.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class Mf{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(u.h0i)}apply(){const e=Pd(this.urlTree.root,[],[],this.config).segmentGroup,t=new ie(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,xt).pipe((0,at.U)(a=>this.createUrlTree(Ld(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ii(a=>{if(a instanceof Od)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof _r?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,xt).pipe((0,at.U)(i=>this.createUrlTree(Ld(i),e.queryParams,e.fragment))).pipe(Ii(i=>{throw i instanceof _r?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new ie([],{[xt]:e}):e;return new ne(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,at.U)(a=>new ie([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,ln.D)(i).pipe(ds(a=>{const c=r.children[a],p=kd(t,a);return this.expandSegmentGroup(e,p,c,a).pipe((0,at.U)(_=>({segment:_,outlet:a})))}),$r((a,c)=>(a[c.outlet]=c.segment,a),{}),function _f(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ci((i,a)=>n(i,a,r)):$i.y,un(1),t?mf(e):pf(()=>new po))}())}expandSegment(e,t,r,i,a,c){return(0,ln.D)(r).pipe(ds(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,a,c).pipe(Ii(E=>{if(E instanceof _r)return pt(null);throw E}))),xa(p=>!!p),Ii((p,_)=>{if(p instanceof po||"EmptyError"===p.name){if(pu(t,i,a))return pt(new ie([],{}));throw new _r(t)}throw p}))}expandSegmentAgainstRoute(e,t,r,i,a,c,p){return $y(i,t,a,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c):mc(t):mc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Fd(a):this.lineralizeSegments(r,a).pipe((0,xn.z)(c=>{const p=new ie(c,{});return this.expandSegment(e,p,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:p,consumedSegments:_,lastChild:E,positionalParamSegments:D}=yl(t,i,a);if(!p)return mc(t);const S=this.applyRedirectCommands(_,i.redirectTo,D);return i.redirectTo.startsWith("/")?Fd(S):this.lineralizeSegments(i,S).pipe((0,xn.z)(N=>this.expandSegment(e,t,r,N.concat(a.slice(E)),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?pt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,at.U)(N=>(r._loadedConfig=N,new ie(i,{})))):pt(new ie(i,{}));const{matched:c,consumedSegments:p,lastChild:_}=yl(t,r,i);if(!c)return mc(t);const E=i.slice(_);return this.getChildConfig(e,r,i).pipe((0,xn.z)(S=>{const N=S.module,U=S.routes,{segmentGroup:H,slicedSegments:ue}=Pd(t,p,E,U),Ee=new ie(H.segments,H.children);if(0===ue.length&&Ee.hasChildren())return this.expandChildren(N,U,Ee).pipe((0,at.U)(ze=>new ie(p,ze)));if(0===U.length&&0===ue.length)return pt(new ie(p,{}));const Ke=fs(r)===a;return this.expandSegment(N,Ee,U,ue,Ke?xt:a,!0).pipe((0,at.U)(ct=>new ie(p.concat(ct.segments),ct.children)))}))}getChildConfig(e,t,r){return t.children?pt(new Hg(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?pt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,xn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,at.U)(a=>(t._loadedConfig=a,a))):function _c(n){return new ur.y(e=>e.error(yf(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):pt(new Hg([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?pt(i.map(c=>{const p=e.get(c);let _;if(function Sf(n){return n&&gl(n.canLoad)}(p))_=p.canLoad(t,r);else{if(!gl(p))throw new Error("Invalid CanLoad guard");_=p(t,r)}return qi(_)})).pipe(ml(),(0,kr.b)(c=>{if(!Vs(c))return;const p=yf(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw p.url=c,p}),(0,at.U)(c=>!0===c)):pt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return pt(r);if(i.numberOfChildren>1||!i.children[xt])return Dr(e.redirectTo);i=i.children[xt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new ne(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return En(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[a]=t[p]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return En(t.children,(p,_)=>{c[_]=this.createSegmentGroup(e,p,r,i)}),new ie(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Ld(n){const e={};for(const r of Object.keys(n.children)){const a=Ld(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function kf(n){if(1===n.numberOfChildren&&n.children[xt]){const e=n.children[xt];return new ie(n.segments.concat(e.segments),e.children)}return n}(new ie(n.segments,e))}class gu{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ud{constructor(e,t){this.component=e,this.route=t}}function Gg(n,e,t){const r=n._root;return vl(r,e?e._root:null,t,[r.value])}function yc(n,e,t){const r=function Gy(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function vl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Fa(e);return n.children.forEach(c=>{(function Wy(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const _=function zy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!gt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!gt(n.url,e.url)||!Zi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!uc(n,e)||!Zi(n.queryParams,e.queryParams);default:return!uc(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new gu(r)):(a.data=c.data,a._resolvedData=c._resolvedData),vl(n,e,a.component?p?p.children:null:t,r,i),_&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new Ud(p.outlet.component,c))}else c&&wl(e,p,i),i.canActivateChecks.push(new gu(r)),vl(n,null,a.component?p?p.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),En(a,(c,p)=>wl(c,t.getContext(p),i)),i}function wl(n,e,t){const r=Fa(n),i=n.value;En(r,(a,c)=>{wl(a,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new Ud(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Of{}function Vd(n){return new ur.y(e=>e.error(n))}class Ff{constructor(e,t,r,i,a,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=c}recognize(){const e=Pd(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,xt);if(null===t)return null;const r=new uu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},xt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ti(r,t),a=new Dd(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=pl(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const c=t.children[a],p=kd(e,a),_=this.processSegmentGroup(p,c,a);if(null===_)return null;r.push(..._)}const i=Lf(r);return function Xy(n){n.sort((e,t)=>e.value.outlet===xt?-1:t.value.outlet===xt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const c=this.processSegmentAgainstRoute(a,t,r,i);if(null!==c)return c}return pu(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!$y(e,t,r,i))return null;let a,c=[],p=[];if("**"===e.path){const U=r.length>0?Os(r).parameters:{};a=new uu(r,U,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Bs(e),fs(e),e.component,e,Bd(t),zo(t)+r.length,Kg(e))}else{const U=yl(t,e,r);if(!U.matched)return null;c=U.consumedSegments,p=r.slice(U.lastChild),a=new uu(c,U.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Bs(e),fs(e),e.component,e,Bd(t),zo(t)+c.length,Kg(e))}const _=function Wi(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:E,slicedSegments:D}=Pd(t,c,p,_.filter(U=>void 0===U.redirectTo),this.relativeLinkResolution);if(0===D.length&&E.hasChildren()){const U=this.processChildren(_,E);return null===U?null:[new Ti(a,U)]}if(0===_.length&&0===D.length)return[new Ti(a,[])];const S=fs(e)===i,N=this.processSegment(_,E,D,S?xt:i);return null===N?null:[new Ti(a,N)]}}function mu(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Lf(n){const e=[],t=new Set;for(const r of n){if(!mu(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Lf(r.children);e.push(new Ti(r.value,i))}return e.filter(r=>!t.has(r))}function Bd(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function zo(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Bs(n){return n.data||{}}function Kg(n){return n.resolve||{}}function wc(n){return Dn(e=>{const t=n(e);return t?(0,ln.D)(t).pipe((0,at.U)(()=>e)):pt(e)})}class El extends class ai{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const _u=new u.OlP("ROUTES");class Vf{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,at.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=a.create(e);return new Hg(ru(c.injector.get(_u,void 0,u.XFs.Self|u.XFs.Optional)).map(Kn),c)}),Ii(a=>{throw t._loader$=void 0,a}));return t._loader$=new _d(i,()=>new Hi.x).pipe(pn()),t._loader$}loadModuleFactory(e){return qi(e()).pipe((0,xn.z)(t=>t instanceof u.YKP?pt(t):(0,ln.D)(this.compiler.compileModuleAsync(t))))}}class bl{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Bf(n){throw n}function tv(n,e,t){return e.parse("/")}function Cl(n,e){return pt(null)}const Ec={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Qg={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Di=(()=>{class n{constructor(t,r,i,a,c,p,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Hi.x,this.errorHandler=Bf,this.malformedUriErrorHandler=tv,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Cl,afterPreactivation:Cl},this.urlHandlingStrategy=new bl,this.routeReuseStrategy=new El,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(u.h0i),this.console=c.get(u.c2e);const S=c.get(u.R0b);this.isNgZoneEnabled=S instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function su(){return new ne(new ie([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Vf(c,p,N=>this.triggerEvent(new Ra(N)),N=>this.triggerEvent(new Ma(N))),this.routerState=ac(this.currentUrlTree,this.rootComponentType),this.transitions=new bi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ci(i=>0!==i.id),(0,at.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Dn(i=>{let a=!1,c=!1;return pt(i).pipe((0,kr.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Dn(p=>{const _=this.browserUrlTree.toString(),E=!this.navigated||p.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||E)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return jd(p.source)&&(this.browserUrlTree=p.extractedUrl),pt(p).pipe(Dn(S=>{const N=this.transitions.getValue();return r.next(new vd(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),N!==this.transitions.getValue()?Aa.E:Promise.resolve(S)}),function Zy(n,e,t,r){return Dn(i=>function Rf(n,e,t,r,i){return new Mf(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,at.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,kr.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function $E(n,e,t,r,i){return(0,xn.z)(a=>function Jy(n,e,t,r,i="emptyOnly",a="legacy"){try{const c=new Ff(n,e,t,r,i,a).recognize();return null===c?Vd(new Of):pt(c)}catch(c){return Vd(c)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,at.U)(c=>Object.assign(Object.assign({},a),{targetSnapshot:c}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,kr.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(U,S)}this.browserUrlTree=S.urlAfterRedirects}const N=new Pg(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(N)}));if(E&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:N,extractedUrl:U,source:H,restoredState:ue,extras:Ee}=p,Ke=new vd(N,this.serializeUrl(U),H,ue);r.next(Ke);const qe=ac(U,this.rootComponentType).snapshot;return pt(Object.assign(Object.assign({},p),{targetSnapshot:qe,urlAfterRedirects:U,extras:Object.assign(Object.assign({},Ee),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),Aa.E}),wc(p=>{const{targetSnapshot:_,id:E,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:N,replaceUrl:U}}=p;return this.hooks.beforePreactivation(_,{navigationId:E,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!N,replaceUrl:!!U})}),(0,kr.b)(p=>{const _=new Og(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),(0,at.U)(p=>Object.assign(Object.assign({},p),{guards:Gg(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function Nf(n,e){return(0,xn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?pt(Object.assign(Object.assign({},t),{guardsResult:!0})):function Wg(n,e,t,r){return(0,ln.D)(n).pipe((0,xn.z)(i=>function Pf(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?pt(a.map(p=>{const _=yc(p,e,i);let E;if(function Uy(n){return n&&gl(n.canDeactivate)}(_))E=qi(_.canDeactivate(n,e,t,r));else{if(!gl(_))throw new Error("Invalid CanDeactivate guard");E=qi(_(n,e,t,r))}return E.pipe(xa())})).pipe(ml()):pt(!0)}(i.component,i.route,t,e,r)),xa(i=>!0!==i,!0))}(c,r,i,n).pipe((0,xn.z)(p=>p&&function BE(n){return"boolean"==typeof n}(p)?function Ky(n,e,t,r){return(0,ln.D)(e).pipe(ds(i=>Da(function Yy(n,e){return null!==n&&e&&e(new nu(n)),pt(!0)}(i.route.parent,r),function vc(n,e){return null!==n&&e&&e(new ic(n)),pt(!0)}(i.route,r),function zg(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function qy(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>ll(()=>pt(c.guards.map(_=>{const E=yc(_,c.node,t);let D;if(function jE(n){return n&&gl(n.canActivateChild)}(E))D=qi(E.canActivateChild(r,n));else{if(!gl(E))throw new Error("Invalid CanActivateChild guard");D=qi(E(r,n))}return D.pipe(xa())})).pipe(ml())));return pt(a).pipe(ml())}(n,i.path,t),function Qy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return pt(!0);const i=r.map(a=>ll(()=>{const c=yc(a,e,t);let p;if(function fc(n){return n&&gl(n.canActivate)}(c))p=qi(c.canActivate(e,n));else{if(!gl(c))throw new Error("Invalid CanActivate guard");p=qi(c(e,n))}return p.pipe(xa())}));return pt(i).pipe(ml())}(n,i.route,t))),xa(i=>!0!==i,!0))}(r,a,n,e):pt(p)),(0,at.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,kr.b)(p=>{if(Vs(p.guardsResult)){const E=yf(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw E.url=p.guardsResult,E}const _=new Zr(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(_)}),Ci(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),wc(p=>{if(p.guards.canActivateChecks.length)return pt(p).pipe((0,kr.b)(_=>{const E=new hs(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(E)}),Dn(_=>{let E=!1;return pt(_).pipe(function Ko(n,e){return(0,xn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return pt(t);let a=0;return(0,ln.D)(i).pipe(ds(c=>function ev(n,e,t,r){return function _o(n,e,t,r){const i=Object.keys(n);if(0===i.length)return pt({});const a={};return(0,ln.D)(i).pipe((0,xn.z)(c=>function Uf(n,e,t,r){const i=yc(n,e,r);return qi(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,kr.b)(p=>{a[c]=p}))),un(1),(0,xn.z)(()=>Object.keys(a).length===i.length?pt(a):Aa.E))}(n._resolve,n,e,r).pipe((0,at.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),pl(n,t).resolve),null)))}(c.route,r,n,e)),(0,kr.b)(()=>a++),un(1),(0,xn.z)(c=>a===i.length?pt(t):Aa.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,kr.b)({next:()=>E=!0,complete:()=>{E||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,kr.b)(_=>{const E=new tu(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(E)}))}),wc(p=>{const{targetSnapshot:_,id:E,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:N,replaceUrl:U}}=p;return this.hooks.afterPreactivation(_,{navigationId:E,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!N,replaceUrl:!!U})}),(0,at.U)(p=>{const _=function ky(n,e,t){const r=cc(n,e._root,t?t._root:void 0);return new Wo(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:_})}),(0,kr.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,at.U)(r=>(new Af(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,kr.b)({next(){a=!0},complete(){a=!0}}),rc(()=>{var p;a||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===i.id&&(this.currentNavigation=null)}),Ii(p=>{if(c=!0,function Ed(n){return n&&n[Na]}(p)){const _=Vs(p.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const E=new Ps(i.id,this.serializeUrl(i.extractedUrl),p.message);r.next(E),_?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||jd(i.source)};this.scheduleNavigation(D,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new cl(i.id,this.serializeUrl(i.extractedUrl),p);r.next(_);try{i.resolve(this.errorHandler(p))}catch(E){i.reject(E)}}return Aa.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const _=Object.assign({},c);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const p=this.parseUrl(t.url);this.scheduleNavigation(p,r,c,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Zg(t),this.config=t.map(Kn),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:p,preserveFragment:_}=r,E=i||this.routerState.root,D=_?this.currentUrlTree.fragment:c;let S=null;switch(p){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),function dc(n,e,t,r,i){if(0===t.length)return Lg(e.root,e.root,e,r,i);const a=function VE(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Py(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const p={};return En(a.outlets,(_,E)=>{p[E]="string"==typeof _?_.split("/"):_}),[...i,{outlets:p}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((p,_)=>{0==_&&"."===p||(0==_&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,a]},[]);return new Py(t,e,r)}(t);if(a.toRoot())return Lg(e.root,new ie([],{}),e,r,i);const c=function Oy(n,e,t){if(n.isAbsolute)return new Rd(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new Rd(a,a===e.root,0)}const r=Sd(n.commands[0])?0:1;return function Fy(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Rd(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),p=c.processChildren?Tf(c.segmentGroup,c.index,a.commands):Ug(c.segmentGroup,c.index,a.commands);return Lg(c.segmentGroup,p,e,r,i)}(E,this.currentUrlTree,t,S,null!=D?D:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Vs(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function jf(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},Ec):!1===r?Object.assign({},Qg):r,Vs(t))return ou(this.currentUrlTree,t,i);const a=this.parseUrl(t);return ou(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Un(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,c){var p,_,E;if(this.disposed)return Promise.resolve(!1);const D=this.transitions.value,S=jd(r)&&D&&!jd(D.source),N=D.rawUrl.toString()===t.toString(),U=D.id===(null===(p=this.currentNavigation)||void 0===p?void 0:p.id);if(S&&N&&U)return Promise.resolve(!0);let ue,Ee,Ke;c?(ue=c.resolve,Ee=c.reject,Ke=c.promise):Ke=new Promise((ze,Nt)=>{ue=ze,Ee=Nt});const qe=++this.navigationId;let ct;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),ct=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(_=this.browserPageId)&&void 0!==_?_:0:(null!==(E=this.browserPageId)&&void 0!==E?E:0)+1):ct=0,this.setTransition({id:qe,targetPageId:ct,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:ue,reject:Ee,promise:Ke,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ke.catch(ze=>Promise.reject(ze))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Ps(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function jd(n){return"imperative"!==n}let y=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=c,this.commands=null,this.onChanges=new Hi.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:g(this.skipLocationChange),replaceUrl:g(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:g(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Di),u.Y36(lu),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&u.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),n})(),f=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Hi.x,this.subscription=t.events.subscribe(a=>{a instanceof Un&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,c){if(0!==t||r||i||a||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const p={skipLocationChange:g(this.skipLocationChange),replaceUrl:g(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:g(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Di),u.Y36(lu),u.Y36(Fe))},n.\u0275dir=u.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&u.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&u.uIk("target",r.target)("href",r.href,u.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),n})();function g(n){return""===n||!!n}class R{}class J{preload(e,t){return pt(null)}}let Me=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new Vf(i,r,_=>t.triggerEvent(new Ra(_)),_=>t.triggerEvent(new Ma(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ci(t=>t instanceof Un),ds(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(u.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const c=a._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,ln.D)(i).pipe((0,ol.J)(),(0,at.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?pt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,xn.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Di),u.LFG(u.Sil),u.LFG(u.zs3),u.LFG(R))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof vd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Un&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof sc&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new sc(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Xe=new u.OlP("ROUTER_CONFIGURATION"),Kt=new u.OlP("ROUTER_FORROOT_GUARD"),Vn=[st,{provide:Ct,useClass:oi},{provide:Di,useFactory:function $f(n,e,t,r,i,a,c={},p,_){const E=new Di(null,n,e,t,r,i,ru(a));return p&&(E.urlHandlingStrategy=p),_&&(E.routeReuseStrategy=_),function Zf(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,E),c.enableTracing&&E.events.subscribe(D=>{var S,N;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${D.constructor.name}`),console.log(D.toString()),console.log(D),null===(N=console.groupEnd)||void 0===N||N.call(console)}),E},deps:[Ct,fu,st,u.zs3,u.Sil,_u,Xe,[class js{},new u.FiY],[class Yg{},new u.FiY]]},fu,{provide:lu,useFactory:function Ic(n){return n.routerState.root},deps:[Di]},Me,J,class j{preload(e,t){return t().pipe(Ii(()=>pt(null)))}},{provide:Xe,useValue:{enableTracing:!1}}];function Yo(){return new u.PXZ("Router",Di)}let yu=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Vn,Cc(t),{provide:Kt,useFactory:Jg,deps:[[Di,new u.FiY,new u.tp0]]},{provide:Xe,useValue:r||{}},{provide:Fe,useFactory:bc,deps:[ae,[new u.tBr(De),new u.FiY],Xe]},{provide:Se,useFactory:Hf,deps:[Di,sf,Xe]},{provide:R,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:J},{provide:u.PXZ,multi:!0,useFactory:Yo},[Tc,{provide:u.ip1,multi:!0,useFactory:Hd,deps:[Tc]},{provide:qf,useFactory:vu,deps:[Tc]},{provide:u.tb,multi:!0,useExisting:qf}]]}}static forChild(t){return{ngModule:n,providers:[Cc(t)]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Kt,8),u.LFG(Di,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function Hf(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Se(n,e,t)}function bc(n,e,t={}){return t.useHash?new Ne(n,e):new Le(n,e)}function Jg(n){return"guarded"}function Cc(n){return[{provide:u.deG,multi:!0,useValue:n},{provide:_u,multi:!0,useValue:n}]}let Tc=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Hi.x}appInitializer(){return this.injector.get(q,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(p=>r=p),a=this.injector.get(Di),c=this.injector.get(Xe);return"disabled"===c.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?pt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Xe),i=this.injector.get(Me),a=this.injector.get(Se),c=this.injector.get(Di),p=this.injector.get(u.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),a.init(),c.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Hd(n){return n.appInitializer.bind(n)}function vu(n){return n.bootstrapListener.bind(n)}const qf=new u.OlP("Router Initializer");let rv=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-about-page"]],decls:65,vars:0,consts:[[1,"md:flex","block","min-h-screen","w-full","bg-primary-50"],[1,"bg-primary-700","md:w-3/5","w-full","min-h-screen"],[1,"max-w-3xl","p-12"],[1,"text-7xl","font-title","font-extrabold","text-primary-50","leading-snug"],["routerLink","/"],[1,"text-2xl","font-sans","font-semibold","text-primary-100","leading-snug","pr-2"],[1,"text-2xl","font-sans","font-semibold","text-primary-50","leading-snug","mt-12"],[1,"flex"],[1,"list-disc","list-inside","text-sans","font-thin","text-primary-100","px-8","py-2"],[1,"py-2"],[1,"font-bold"],[1,"text-xl","font-sans","font-thin","text-primary-200","leading-normal","mt-12"],[1,"bg-primary-50","w-full","md:w-2/5","border-l-4","border-secondary-500","min-h-screen"],[1,"flex","flex-col","items-center","justify-center","mt-16","pl-4"],[1,"text-2xl","font-sans","font-bold","text-primary-700","leading-snug","pr-2"],[1,"text-primary-600","text-xl","font-sans","font-normal","leading-snug","mt-4"],["href","/articles",1,"inline-flex","mt-4"],[1,"text-2xl","underline","font-sans","font-semibold","text-primary-600","leading-snug"],["xmlns","http://www.w3.org/2000/svg","width","36","height","36","fill","#911011","viewBox","0 0 256 256",1,"ml-4"],["width","256","height","256","fill","none"],["cx","128","cy","128","r","96","opacity","0.2"],["cx","128","cy","128","r","96","fill","none","stroke","#911011","stroke-miterlimit","10","stroke-width","16"],["points","134.1 161.9 168 128 134.1 94.1","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","88","y1","128","x2","168","y2","128","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"flex","items-center","justify-center"],["routerLink","/contact",1,"my-16","py-6","px-8","bg-secondary-600","hover:bg-secondary-500","rounded-lg","leading-none","flex","items-center","text","divide-x","divide-secondary-50","text-xl","shadow-md"],[1,"text-secondary-50","pr-6","font-sans","transition","duration-200"],[1,"flex","items-center","space-x-5","pl-6","animate-tilt"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","#fafafa","viewBox","0 0 256 256"],["d","M192,120,136,64l26.3-26.3a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4Z","opacity","0.2"],["d","M96,216H48a8,8,0,0,1-8-8V163.3a7.9,7.9,0,0,1,2.3-5.6l120-120a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4Z","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","136","y1","64","x2","192","y2","120","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["points","216 216 96 216 40.5 160.5","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","164","y1","92","x2","68","y2","188","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"h1",3),u.TgZ(4,"a",4),u._uU(5,"SaCh'M"),u.qZA(),u._UZ(6,"br"),u.qZA(),u.TgZ(7,"h2",5),u._uU(8," Implant\xe9e \xe0 Saint Laurent du Maroni, l'agence accompagne ses clients dans la r\xe9alisation de leurs outils de communication interne ou externe. "),u.qZA(),u.TgZ(9,"h2",6),u._uU(10," Notre coeur de m\xe9tier: "),u.qZA(),u.TgZ(11,"div",7),u.TgZ(12,"ul",8),u.TgZ(13,"li",9),u.TgZ(14,"span",10),u._uU(15," R\xe9daction de documents "),u.qZA(),u.qZA(),u.TgZ(16,"li",9),u.TgZ(17,"span",10),u._uU(18," Conseil en communication "),u.qZA(),u.qZA(),u.TgZ(19,"li",9),u.TgZ(20,"span",10),u._uU(21," Cr\xe9ation de site internet "),u.qZA(),u.qZA(),u.TgZ(22,"li",9),u.TgZ(23,"span",10),u._uU(24," Cr\xe9ation d'identit\xe9 visuelle "),u.qZA(),u.qZA(),u.TgZ(25,"li",9),u.TgZ(26,"span",10),u._uU(27," Edition publicitaire "),u.qZA(),u.qZA(),u.TgZ(28,"li",9),u.TgZ(29,"span",10),u._uU(30," Relecture et correction "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(31,"h2",11),u._uU(32," Les valeurs environnementales et humaines sont au coeur de notre projet d'entreprise. "),u.qZA(),u.qZA(),u.qZA(),u.TgZ(33,"div",12),u.TgZ(34,"div",13),u.TgZ(35,"h2",14),u._uU(36," La redaction "),u.qZA(),u.TgZ(37,"p",15),u._uU(38," Nous assurons la r\xe9daction de documents pour vous aider \xe0 vous d\xe9marquer. Nous sommes sp\xe9cialis\xe9 dans redaction de contenu pour votre site web, d'articles pour votre journal ou encore votre communication interne. "),u.qZA(),u.TgZ(39,"a",16),u.TgZ(40,"h3",17),u._uU(41," D\xe9couvrez nos articles "),u.qZA(),u.O4$(),u.TgZ(42,"svg",18),u._UZ(43,"rect",19),u._UZ(44,"circle",20),u._UZ(45,"circle",21),u._UZ(46,"polyline",22),u._UZ(47,"line",23),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(48,"div",13),u.TgZ(49,"h2",14),u._uU(50," La communication "),u.qZA(),u.TgZ(51,"p",15),u._uU(52," Nous sommes \xe9galement sp\xe9cialis\xe9 dans la communication interne et externe. Nous sommes capable de vous aider \xe0 cr\xe9er une identit\xe9 visuelle, vous accompagnez dans la r\xe9alisation de votre site web, vous conseillez dans votre communication interne ou externe. "),u.qZA(),u.qZA(),u.TgZ(53,"div",24),u.TgZ(54,"button",25),u.TgZ(55,"span",26),u._uU(56,"Contactez nous"),u.qZA(),u.TgZ(57,"span",27),u.O4$(),u.TgZ(58,"svg",28),u._UZ(59,"rect",19),u._UZ(60,"path",29),u._UZ(61,"path",30),u._UZ(62,"line",31),u._UZ(63,"polyline",32),u._UZ(64,"line",33),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA())},directives:[f,y],styles:[""]}),n})();var Dc=F(4986),iv=F(6451),sv=F(3099);function ZE(n,e=$i.y){return n=null!=n?n:ND,(0,mr.e)((t,r)=>{let i,a=!0;t.subscribe(new Ln.Q(r,c=>{const p=e(c);(a||!n(i,p))&&(a=!1,i=p,r.next(c))}))})}function ND(n,e){return n===e}var qE=F(5032),gn=F(5813),Ar=F(2011),Xg=(F(1254),F(3942)),Qo=F(4859),me=F(5861),jn=F(9681),P=F(2090),yo=F(1877);const WE="@firebase/database";let av="";function KE(n){av=n}class YE{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,P.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,P.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class PD{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,P.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const QE=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new YE(e)}}catch(e){}return new PD},Ac=QE("localStorage"),kt=QE("sessionStorage"),Sc=new yo.Yd("@firebase/database"),lv=function(){let n=1;return function(){return n++}}(),uv=function(n){const e=(0,P.dS)(n),t=new P.gQ;t.update(e);const r=t.digest();return P.US.encodeByteArray(r)},wu=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=wu.apply(null,r):e+="object"==typeof r?(0,P.Pz)(r):r,e+=" "}return e};let li=null,cv=!0;const JE=function(n,e){(0,P.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Sc.logLevel=yo.in.VERBOSE,li=Sc.log.bind(Sc),e&&kt.set("logging_enabled",!0)):"function"==typeof n?li=n:(li=null,kt.remove("logging_enabled"))},Sr=function(...n){if(!0===cv&&(cv=!1,null===li&&!0===kt.get("logging_enabled")&&JE(!0)),li){const e=wu.apply(null,n);li(e)}},Hs=function(n){return function(...e){Sr(n,...e)}},Gf=function(...n){const e="FIREBASE INTERNAL ERROR: "+wu(...n);Sc.error(e)},Jo=function(...n){const e=`FIREBASE FATAL ERROR: ${wu(...n)}`;throw Sc.error(e),new Error(e)},ui=function(...n){const e="FIREBASE WARNING: "+wu(...n);Sc.warn(e)},Wf=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},vo="[MIN_NAME]",$s="[MAX_NAME]",Il=function(n,e){if(n===e)return 0;if(n===vo||e===$s)return-1;if(e===vo||n===$s)return 1;{const t=zf(n),r=zf(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},dv=function(n,e){return n===e?0:n<e?-1:1},xc=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,P.Pz)(e))},XE=function(n){if("object"!=typeof n||null===n)return(0,P.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,P.Pz)(e[r]),t+=":",t+=XE(n[e[r]]);return t+="}",t},eb=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function qr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const tb=function(n){(0,P.hu)(!Wf(n),"Invalid JSON number");const r=1023;let i,a,c,p,_;0===n?(a=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(p=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=p+r,c=Math.round(n*Math.pow(2,52-p)-Math.pow(2,52))):(a=0,c=Math.round(n/Math.pow(2,-1074))));const E=[];for(_=52;_;_-=1)E.push(c%2?1:0),c=Math.floor(c/2);for(_=11;_;_-=1)E.push(a%2?1:0),a=Math.floor(a/2);E.push(i?1:0),E.reverse();const D=E.join("");let S="";for(_=0;_<64;_+=8){let N=parseInt(D.substr(_,8),2).toString(16);1===N.length&&(N="0"+N),S+=N}return S.toLowerCase()},FD=new RegExp("^-?(0*)\\d{1,10}$"),LD=-2147483648,em=2147483647,zf=function(n){if(FD.test(n)){const e=Number(n);if(e>=LD&&e<=em)return e}return null},$d=function(n){try{n()}catch(e){setTimeout(()=>{throw ui("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},tm=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class xM{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ui(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class RM{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Sr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ui(e)}}let nm=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const HD=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,mv="websocket",rm="long_polling";class im{constructor(e,t,r,i,a=!1,c="",p=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ac.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ac.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function rb(n,e,t){let r;if((0,P.hu)("string"==typeof e,"typeof type must == string"),(0,P.hu)("object"==typeof t,"typeof params must == object"),e===mv)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==rm)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function _v(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return qr(t,(a,c)=>{i.push(a+"="+c)}),r+i.join("&")}class Eu{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,P.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,P.p$)(this.counters_)}}const sm={},yv={};function Kf(n){const e=n.toString();return sm[e]||(sm[e]=new Eu),sm[e]}class ib{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&$d(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Qf{constructor(e,t,r,i,a,c,p){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=c,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Hs(e),this.stats_=Kf(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),rb(t,rm,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ib(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,P.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new um((...a)=>{const[c,p,_,E,D]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=p,this.password=_;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[c,p]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,p)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&HD.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Qf.forceAllow_=!0}static forceDisallow(){Qf.forceDisallow_=!0}static isAvailable(){return!((0,P.Yr)()||!Qf.forceAllow_&&(Qf.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,P.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,P.h$)(t),i=eb(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,P.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,P.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class um{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=lv(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=um.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(p){Sr("frame writing exception"),p.stack&&Sr(p.stack),Sr(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Sr("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,P.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Sr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Wd=null;"undefined"!=typeof MozWebSocket?Wd=MozWebSocket:"undefined"!=typeof WebSocket&&(Wd=WebSocket);let Jf=(()=>{class n{constructor(t,r,i,a,c,p,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Hs(this.connId),this.stats_=Kf(r),this.connURL=n.connectionURL_(r,p,_,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a){const c={v:"5"};return!(0,P.Yr)()&&"undefined"!=typeof location&&location.hostname&&HD.test(location.hostname)&&(c.r="f"),r&&(c.s=r),i&&(c.ls=i),a&&(c.ac=a),rb(t,mv,c)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ac.set("previous_websocket_failure",!0);try{if((0,P.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${av}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,p=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;p&&(a.proxy={origin:p}),this.mySock=new Wd(this.connURL,[],a)}else this.mySock=new Wd(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Wd&&!n.forceDisallow_}static previouslyFailed(){return Ac.isInMemoryStorage||!0===Ac.get("previous_websocket_failure")}markConnectionHealthy(){Ac.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,P.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,P.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=eb(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class Ev{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Qf,Jf]}initTransports_(e){const t=Jf&&Jf.isAvailable();let r=t&&!Jf.previouslyFailed();if(e.webSocketOnly&&(t||ui("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Jf];else{const i=this.transports_=[];for(const a of Ev.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class mb{constructor(e,t,r,i,a,c,p,_,E,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=c,this.onReady_=p,this.onDisconnect_=_,this.onKill_=E,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Hs("c:"+this.id+":"),this.transportManager_=new Ev(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=tm(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=xc("t",e),r=xc("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=xc("t",e),r=xc("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=xc("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Gf("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Gf("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ui("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),tm(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):tm(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ac.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Tv{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class _b{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,P.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,P.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class cm extends _b{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,P.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new cm}getInitialEvent(e){return(0,P.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class bn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function $t(){return new bn("")}function Zt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function bu(n){return n.pieces_.length-n.pieceNum_}function Rn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new bn(n.pieces_,e)}function yb(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Xf(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function wb(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new bn(e,0)}function Yn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof bn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new bn(t,0)}function qt(n){return n.pieceNum_>=n.pieces_.length}function zi(n,e){const t=Zt(n),r=Zt(e);if(null===t)return e;if(t===r)return zi(Rn(n),Rn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function YD(n,e){const t=Xf(n,0),r=Xf(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Il(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function zd(n,e){if(bu(n)!==bu(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ps(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(bu(n)>bu(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class QD{constructor(e,t){this.errorPrefix_=t,this.parts_=Xf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,P.ug)(this.parts_[r]);Rv(this)}}function Rv(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Mc(n))}function Mc(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Mv extends _b{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Mv}getInitialEvent(e){return(0,P.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const kc=1e3;let hm,Ki=(()=>{class n extends Tv{constructor(t,r,i,a,c,p,_,E){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=p,this.appCheckTokenProvider_=_,this.authOverride_=E,this.id=n.nextPersistentConnectionId_++,this.log_=Hs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=kc,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,E&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Mv.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&cm.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,c={r:a,a:t,b:r};this.log_((0,P.Pz)(c)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new P.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:p=>{const _=p.d;"ok"===p.s?(this.onDataUpdate_(i.p,_,!1,null),r.resolve(_)):r.reject(_)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const p=this.outstandingGets_[c];void 0===p||a!==p||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(t,r,i,a){this.initConnection_();const c=t._queryIdentifier,p=t._path.toString();this.log_("Listen called for "+p+" "+c),this.listens.has(p)||this.listens.set(p,new Map),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(p).has(c),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(p).set(c,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,_=>{const E=_.d,D=_.s;n.warnOnListenWarnings_(E,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==D&&this.removeListen_(i,a),t.onComplete&&t.onComplete(D,E))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,P.r3)(t,"w")){const i=(0,P.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();ui(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,P.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,P.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const c=a.s,p=a.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,p))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const c={p:t};a&&(c.q=i,c.t=a),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,p=>{a&&setTimeout(()=>{a(p.s,p.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,c){this.initConnection_();const p={p:r,d:i};void 0!==c&&(p.h=c),this.outstandingPuts_.push({action:t,request:p,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,P.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Gf("Unrecognized action received from server: "+(0,P.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=kc,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=kc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=kc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,me.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,p=t.lastSessionId;let _=!1,E=null;const D=function(){E?E.close():(_=!0,a())};t.realtime_={close:D,sendRequest:function(U){(0,P.hu)(E,"sendRequest call when we're not connected not allowed."),E.sendRequest(U)}};const N=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[U,H]=yield Promise.all([t.authTokenProvider_.getToken(N),t.appCheckTokenProvider_.getToken(N)]);_?Sr("getToken() completed but was canceled"):(Sr("getToken() completed. Creating connection."),t.authToken_=U&&U.accessToken,t.appCheckToken_=H&&H.token,E=new mb(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ue=>{ui(ue+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},p))}catch(U){t.log_("Failed to get token: "+U),_||(t.repoInfo_.nodeAdmin&&ui(U),D())}}})()}interrupt(t){Sr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Sr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=kc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>XE(c)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new bn(t).toString();let a;if(this.listens.has(i)){const c=this.listens.get(i);a=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Sr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Sr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,P.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+av.replace(/\./g,"-")]=1,(0,P.uI)()?t["framework.cordova"]=1:(0,P.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=cm.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Gt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Gt(e,t)}}class dm{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Gt(vo,e),i=new Gt(vo,t);return 0!==this.compare(r,i)}minPost(){return Gt.MIN}}class XD extends dm{static get __EMPTY_NODE(){return hm}static set __EMPTY_NODE(e){hm=e}compare(e,t){return Il(e.name,t.name)}isDefinedOn(e){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Gt.MIN}maxPost(){return new Gt($s,hm)}makePost(e,t){return(0,P.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Gt(e,hm)}toString(){return".key"}}const wo=new XD;class ep{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let pm,qs=(()=>{class n{constructor(t,r,i,a,c){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:gs.EMPTY_NODE,this.right=null!=c?c:gs.EMPTY_NODE}copy(t,r,i,a,c){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const c=i(t,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===c?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return gs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return gs.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class gs{constructor(e,t=gs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new gs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,qs.BLACK,null,null))}remove(e){return new gs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,qs.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ep(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ep(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ep(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ep(this.root_,null,this.comparator_,!0,e)}}function Pv(n,e){return Il(n.name,e.name)}function fm(n,e){return Il(n,e)}gs.EMPTY_NODE=new class tp{copy(e,t,r,i,a){return this}insert(e,t,r){return new qs(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Tb=function(n){return"number"==typeof n?"number:"+tb(n):"string:"+n},gm=function(n){if(n.isLeafNode()){const e=n.val();(0,P.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,P.r3)(e,".sv"),"Priority must be a string or number.")}else(0,P.hu)(n===pm||n.isEmpty(),"priority of unexpected type.");(0,P.hu)(n===pm||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Db,Ov,Nc,Kd=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),gm(this.priorityNode_)}static set __childrenNodeConstructor(t){Db=t}static get __childrenNodeConstructor(){return Db}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return qt(t)?this:".priority"===Zt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Zt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,P.hu)(".priority"!==i||1===bu(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Rn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Tb(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?tb(this.value_):this.value_,this.lazyHash_=uv(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,P.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,P.hu)(a>=0,"Unknown leaf type: "+r),(0,P.hu)(c>=0,"Unknown leaf type: "+i),a===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const mn=new class tA extends dm{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Il(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Gt.MIN}maxPost(){return new Gt($s,new Kd("[PRIORITY-POST]",Nc))}makePost(e,t){const r=Ov(e);return new Gt(t,new Kd("[PRIORITY-POST]",r))}toString(){return".priority"}},nA=Math.log(2);class rA{constructor(e){this.count=parseInt(Math.log(e+1)/nA,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const mm=function(n,e,t,r){n.sort(e);const i=function(_,E){const D=E-_;let S,N;if(0===D)return null;if(1===D)return S=n[_],N=t?t(S):S,new qs(N,S.node,qs.BLACK,null,null);{const U=parseInt(D/2,10)+_,H=i(_,U),ue=i(U+1,E);return S=n[U],N=t?t(S):S,new qs(N,S.node,qs.BLACK,H,ue)}},p=function(_){let E=null,D=null,S=n.length;const N=function(H,ue){const Ee=S-H,Ke=S;S-=H;const qe=i(Ee+1,Ke),ct=n[Ee],ze=t?t(ct):ct;U(new qs(ze,ct.node,ue,null,qe))},U=function(H){E?(E.left=H,E=H):(D=H,E=H)};for(let H=0;H<_.count;++H){const ue=_.nextBitIsOne(),Ee=Math.pow(2,_.count-(H+1));ue?N(Ee,qs.BLACK):(N(Ee,qs.BLACK),N(Ee,qs.RED))}return D}(new rA(n.length));return new gs(r||e,p)};let Fv;const ci={};class Xo{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,P.hu)(ci&&mn,"ChildrenNode.ts has not been loaded"),Fv=Fv||new Xo({".priority":ci},{".priority":mn}),Fv}get(e){const t=(0,P.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof gs?t:null}hasIndex(e){return(0,P.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,P.hu)(e!==wo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Gt.Wrap);let p,c=a.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=a.getNext();p=i?mm(r,e.getCompare()):ci;const _=e.toString(),E=Object.assign({},this.indexSet_);E[_]=e;const D=Object.assign({},this.indexes_);return D[_]=p,new Xo(D,E)}addToIndexes(e,t){const r=(0,P.UI)(this.indexes_,(i,a)=>{const c=(0,P.DV)(this.indexSet_,a);if((0,P.hu)(c,"Missing index implementation for "+a),i===ci){if(c.isDefinedOn(e.node)){const p=[],_=t.getIterator(Gt.Wrap);let E=_.getNext();for(;E;)E.name!==e.name&&p.push(E),E=_.getNext();return p.push(e),mm(p,c.getCompare())}return ci}{const p=t.get(e.name);let _=i;return p&&(_=_.remove(new Gt(e.name,p))),_.insert(e,e.node)}});return new Xo(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,P.UI)(this.indexes_,i=>{if(i===ci)return i;{const a=t.get(e.name);return a?i.remove(new Gt(e.name,a)):i}});return new Xo(r,this.indexSet_)}}let Yd,Ut=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&gm(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Yd||(Yd=new n(new gs(fm),null,Xo.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Yd}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Yd:r}}getChild(t){const r=Zt(t);return null===r?this:this.getImmediateChild(r).getChild(Rn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,P.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Gt(t,r);let a,c;r.isEmpty()?(a=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const p=a.isEmpty()?Yd:this.priorityNode_;return new n(a,p,c)}}updateChild(t,r){const i=Zt(t);if(null===i)return r;{(0,P.hu)(".priority"!==Zt(t)||1===bu(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Rn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,c=!0;if(this.forEachChild(mn,(p,_)=>{r[p]=_.val(t),i++,c&&n.INTEGER_REGEXP_.test(p)?a=Math.max(a,Number(p)):c=!1}),!t&&c&&a<2*i){const p=[];for(const _ in r)p[_]=r[_];return p}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Tb(this.getPriority().val())+":"),this.forEachChild(mn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":uv(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const c=a.getPredecessorKey(new Gt(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Gt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Gt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Gt.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Gt.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)>0;)a.getNext(),c=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Qd?-1:0}withIndex(t){if(t===wo||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===wo||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(mn),a=r.getIterator(mn);let c=i.getNext(),p=a.getNext();for(;c&&p;){if(c.name!==p.name||!c.node.equals(p.node))return!1;c=i.getNext(),p=a.getNext()}return null===c&&null===p}return!1}return!1}}resolveIndex_(t){return t===wo?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Qd=new class Sb extends Ut{constructor(){super(new gs(fm),Ut.EMPTY_NODE,Xo.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ut.EMPTY_NODE}isEmpty(){return!1}};function nr(n,e=null){if(null===n)return Ut.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,P.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Kd(n,nr(e));if(n instanceof Array){let t=Ut.EMPTY_NODE;return qr(n,(r,i)=>{if((0,P.r3)(n,r)&&"."!==r.substring(0,1)){const a=nr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(nr(e))}{const t=[];let r=!1;if(qr(n,(c,p)=>{if("."!==c.substring(0,1)){const _=nr(p);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new Gt(c,_)))}}),0===t.length)return Ut.EMPTY_NODE;const a=mm(t,Pv,c=>c.name,fm);if(r){const c=mm(t,mn.getCompare());return new Ut(a,nr(e),new Xo({".priority":c},{".priority":mn}))}return new Ut(a,nr(e),Xo.Default)}}Object.defineProperties(Gt,{MIN:{value:new Gt(vo,Ut.EMPTY_NODE)},MAX:{value:new Gt($s,Qd)}}),XD.__EMPTY_NODE=Ut.EMPTY_NODE,Kd.__childrenNodeConstructor=Ut,function Ib(n){pm=n}(Qd),function eA(n){Nc=n}(Qd),function Ab(n){Ov=n}(nr);class Lv extends dm{constructor(e){super(),this.indexPath_=e,(0,P.hu)(!qt(e)&&".priority"!==Zt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Il(e.name,t.name):a}makePost(e,t){const r=nr(e),i=Ut.EMPTY_NODE.updateChild(this.indexPath_,r);return new Gt(t,i)}maxPost(){const e=Ut.EMPTY_NODE.updateChild(this.indexPath_,Qd);return new Gt($s,e)}toString(){return Xf(this.indexPath_,0).join("/")}}const _m=new class sA extends dm{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Il(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Gt.MIN}maxPost(){return Gt.MAX}makePost(e,t){const r=nr(e);return new Gt(t,r)}toString(){return".value"}},np="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",PM=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=np.charAt(t%64),t=Math.floor(t/64);(0,P.hu)(0===t,"Cannot push at time == 0");let c=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=np.charAt(e[i]);return(0,P.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),oA=function(n){if(n===""+em)return"-";const e=zf(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return $s;const a=np.charAt(np.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},vm=function(n){if(n===""+LD)return vo;const e=zf(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+em:(delete t[t.length-1],t.join("")):(t[t.length-1]=np.charAt(np.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function Mb(n){return{type:"value",snapshotNode:n}}function Pc(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Jd(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function wm(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class kb{constructor(e){this.index_=e}updateChild(e,t,r,i,a,c){(0,P.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(t);return p.getChild(i).equals(r.getChild(i))&&p.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(Jd(t,p)):(0,P.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?c.trackChildChange(Pc(t,r)):c.trackChildChange(wm(t,r,p))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(mn,(i,a)=>{t.hasChild(i)||r.trackChildChange(Jd(i,a))}),t.isLeafNode()||t.forEachChild(mn,(i,a)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(a)||r.trackChildChange(wm(i,a,c))}else r.trackChildChange(Pc(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ut.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Em{constructor(e){this.indexedFilter_=new kb(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Em.getStartPost_(e),this.endPost_=Em.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,c){return this.matches(new Gt(t,r))||(r=Ut.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Ut.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Ut.EMPTY_NODE);const a=this;return t.forEachChild(mn,(c,p)=>{a.matches(new Gt(c,p))||(i=i.updateImmediateChild(c,Ut.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Nb{constructor(e){this.rangedFilter_=new Em(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,c){return this.rangedFilter_.matches(new Gt(t,r))||(r=Ut.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,c):this.fullLimitUpdateChild_(e,t,r,a,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Ut.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Ut.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const p=a.getNext();let _;if(_=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),p)<=0:this.index_.compare(p,this.rangedFilter_.getEndPost())<=0,!_)break;i=i.updateImmediateChild(p.name,p.node),c++}}else{let a,c,p,_;if(i=t.withIndex(this.index_),i=i.updatePriority(Ut.EMPTY_NODE),this.reverse_){_=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();p=(N,U)=>S(U,N)}else _=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),p=this.index_.getCompare();let E=0,D=!1;for(;_.hasNext();){const S=_.getNext();!D&&p(a,S)<=0&&(D=!0),D&&E<this.limit_&&p(S,c)<=0?E++:i=i.updateImmediateChild(S.name,Ut.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let c;if(this.reverse_){const S=this.index_.getCompare();c=(N,U)=>S(U,N)}else c=this.index_.getCompare();const p=e;(0,P.hu)(p.numChildren()===this.limit_,"");const _=new Gt(t,r),E=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),D=this.rangedFilter_.matches(_);if(p.hasChild(t)){const S=p.getImmediateChild(t);let N=i.getChildAfterChild(this.index_,E,this.reverse_);for(;null!=N&&(N.name===t||p.hasChild(N.name));)N=i.getChildAfterChild(this.index_,N,this.reverse_);const U=null==N?1:c(N,_);if(D&&!r.isEmpty()&&U>=0)return null!=a&&a.trackChildChange(wm(t,r,S)),p.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(Jd(t,S));const ue=p.updateImmediateChild(t,Ut.EMPTY_NODE);return null!=N&&this.rangedFilter_.matches(N)?(null!=a&&a.trackChildChange(Pc(N.name,N.node)),ue.updateImmediateChild(N.name,N.node)):ue}}return r.isEmpty()?e:D&&c(E,_)>=0?(null!=a&&(a.trackChildChange(Jd(E.name,E.node)),a.trackChildChange(Pc(t,r))),p.updateImmediateChild(t,r).updateImmediateChild(E.name,Ut.EMPTY_NODE)):e}}class rp{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=mn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vo}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:$s}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===mn}copy(){const e=new rp;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function bm(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Vv(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Cm(n,e){const t=n.copy();return t.index_=e,t}function Ob(n){const e={};if(n.isDefault())return e;let t;return n.index_===mn?t="$priority":n.index_===_m?t="$value":n.index_===wo?t="$key":((0,P.hu)(n.index_ instanceof Lv,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,P.Pz)(t),n.startSet_&&(e.startAt=(0,P.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,P.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,P.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,P.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Fb(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==mn&&(e.i=n.index_.toString()),e}class Im extends Tv{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Hs("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,P.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=Im.getListenId_(e,r),p={};this.listens_[c]=p;const _=Ob(e._queryParams);this.restRequest_(a+".json",_,(E,D)=>{let S=D;if(404===E&&(S=null,E=null),null===E&&this.onDataUpdate_(a,S,!1,r),(0,P.DV)(this.listens_,c)===p){let N;N=E?401===E?"permission_denied":"rest_error:"+E:"ok",i(N,null)}})}unlisten(e,t){const r=Im.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Ob(e._queryParams),r=e._path.toString(),i=new P.BH;return this.restRequest_(r+".json",t,(a,c)=>{let p=c;404===a&&(p=null,a=null),null===a?(this.onDataUpdate_(r,p,!1,null),i.resolve(p)):i.reject(new Error(p))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,P.xO)(t);this.log_("Sending REST request for "+c);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(r&&4===p.readyState){this.log_("REST Response for "+c+" received. status:",p.status,"response:",p.responseText);let _=null;if(p.status>=200&&p.status<300){try{_=(0,P.cI)(p.responseText)}catch(E){ui("Failed to parse JSON response for "+c+": "+p.responseText)}r(null,_)}else 401!==p.status&&404!==p.status&&ui("Got unsuccessful REST response for "+c+" Status: "+p.status),r(p.status);r=null}},p.open("GET",c,!0),p.send()})}}class lA{constructor(){this.rootNode_=Ut.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Tm(){return{value:null,children:new Map}}function Dl(n,e,t){if(qt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Zt(e);n.children.has(r)||n.children.set(r,Tm()),Dl(n.children.get(r),e=Rn(e),t)}}function Cu(n,e){if(qt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(mn,(r,i)=>{Dl(n,new bn(r),i)}),Cu(n,e)}}if(n.children.size>0){const t=Zt(e);return e=Rn(e),n.children.has(t)&&Cu(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function jv(n,e,t){null!==n.value?t(e,n.value):function ip(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{jv(i,new bn(e.toString()+"/"+r),t)})}class uA{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&qr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class sp{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new uA(e);const r=1e4+2e4*Math.random();tm(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;qr(e,(i,a)=>{a>0&&(0,P.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),tm(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Mn=(()=>{return(n=Mn||(Mn={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Mn;var n})();function ms(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class eh{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Mn.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(qt(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new bn(e));return new eh($t(),t,this.revert)}}return(0,P.hu)(Zt(this.path)===e,"operationForChild called for unrelated child."),new eh(Rn(this.path),this.affectedTree,this.revert)}}class Ua{constructor(e,t){this.source=e,this.path=t,this.type=Mn.LISTEN_COMPLETE}operationForChild(e){return qt(this.path)?new Ua(this.source,$t()):new Ua(this.source,Rn(this.path))}}class Eo{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Mn.OVERWRITE}operationForChild(e){return qt(this.path)?new Eo(this.source,$t(),this.snap.getImmediateChild(e)):new Eo(this.source,Rn(this.path),this.snap)}}class ta{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Mn.MERGE}operationForChild(e){if(qt(this.path)){const t=this.children.subtree(new bn(e));return t.isEmpty()?null:t.value?new Eo(this.source,$t(),t.value):new ta(this.source,$t(),t)}return(0,P.hu)(Zt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ta(this.source,Rn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Gs{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(qt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Zt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class th{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Va(n,e,t,r,i,a){const c=r.filter(p=>p.type===t);c.sort((p,_)=>function ih(n,e,t){if(null==e.childName||null==t.childName)throw(0,P.g5)("Should only compare child_ events.");const r=new Gt(e.childName,e.snapshotNode),i=new Gt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,p,_)),c.forEach(p=>{const _=function rh(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,p,a);i.forEach(E=>{E.respondsTo(p.type)&&e.push(E.createEvent(_,n.query_))})})}function op(n,e){return{eventCache:n,serverCache:e}}function sh(n,e,t,r){return op(new Gs(e,t,r),n.serverCache)}function $v(n,e,t,r){return op(n.eventCache,new Gs(e,t,r))}function ap(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Iu(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Dm;class kn{constructor(e,t=(()=>(Dm||(Dm=new gs(dv)),Dm))()){this.value=e,this.children=t}static fromObject(e){let t=new kn(null);return qr(e,(r,i)=>{t=t.set(new bn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:$t(),value:this.value};if(qt(e))return null;{const r=Zt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Rn(e),t);return null!=a?{path:Yn(new bn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(qt(e))return this;{const t=Zt(e),r=this.children.get(t);return null!==r?r.subtree(Rn(e)):new kn(null)}}set(e,t){if(qt(e))return new kn(t,this.children);{const r=Zt(e),a=(this.children.get(r)||new kn(null)).set(Rn(e),t),c=this.children.insert(r,a);return new kn(this.value,c)}}remove(e){if(qt(e))return this.children.isEmpty()?new kn(null):new kn(null,this.children);{const t=Zt(e),r=this.children.get(t);if(r){const i=r.remove(Rn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new kn(null):new kn(this.value,a)}return this}}get(e){if(qt(e))return this.value;{const t=Zt(e),r=this.children.get(t);return r?r.get(Rn(e)):null}}setTree(e,t){if(qt(e))return t;{const r=Zt(e),a=(this.children.get(r)||new kn(null)).setTree(Rn(e),t);let c;return c=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new kn(this.value,c)}}fold(e){return this.fold_($t(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Yn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,$t(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(qt(e))return null;{const a=Zt(e),c=this.children.get(a);return c?c.findOnPath_(Rn(e),Yn(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,$t(),t)}foreachOnPath_(e,t,r){if(qt(e))return this;{this.value&&r(t,this.value);const i=Zt(e),a=this.children.get(i);return a?a.foreachOnPath_(Rn(e),Yn(t,i),r):new kn(null)}}foreach(e){this.foreach_($t(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Yn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class bo{constructor(e){this.writeTree_=e}static empty(){return new bo(new kn(null))}}function lp(n,e,t){if(qt(e))return new bo(new kn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const c=zi(i,e);return a=a.updateChild(c,t),new bo(n.writeTree_.set(i,a))}{const i=new kn(t),a=n.writeTree_.setTree(e,i);return new bo(a)}}}function Am(n,e,t){let r=n;return qr(t,(i,a)=>{r=lp(r,Yn(e,i),a)}),r}function Vb(n,e){if(qt(e))return bo.empty();{const t=n.writeTree_.setTree(e,new kn(null));return new bo(t)}}function Sm(n,e){return null!=Tu(n,e)}function Tu(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(zi(t.path,e)):null}function Bb(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(mn,(r,i)=>{e.push(new Gt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Gt(r,i.value))}),e}function Du(n,e){if(qt(e))return n;{const t=Tu(n,e);return new bo(null!=t?new kn(t):n.writeTree_.subtree(e))}}function xm(n){return n.writeTree_.isEmpty()}function oh(n,e){return Zv($t(),n.writeTree_,e)}function Zv(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,P.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=Zv(Yn(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Yn(n,".priority"),r)),t}}function Rm(n,e){return $b(e,n)}function Gv(n,e){if(n.snap)return ps(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ps(Yn(n.path,t),e))return!0;return!1}function LM(n){return n.visible}function fA(n,e,t){let r=bo.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const c=a.path;let p;if(a.snap)ps(t,c)?(p=zi(t,c),r=lp(r,p,a.snap)):ps(c,t)&&(p=zi(c,t),r=lp(r,$t(),a.snap.getChild(p)));else{if(!a.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(ps(t,c))p=zi(t,c),r=Am(r,p,a.children);else if(ps(c,t))if(p=zi(c,t),qt(p))r=Am(r,$t(),a.children);else{const _=(0,P.DV)(a.children,Zt(p));if(_){const E=_.getChild(Rn(p));r=lp(r,$t(),E)}}}}}return r}function pA(n,e,t,r,i){if(r||i){const a=Du(n.visibleWrites,e);return!i&&xm(a)?t:i||null!=t||Sm(a,$t())?oh(fA(n.allWrites,function(E){return(E.visible||i)&&(!r||!~r.indexOf(E.writeId))&&(ps(E.path,e)||ps(e,E.path))},e),t||Ut.EMPTY_NODE):null}{const a=Tu(n.visibleWrites,e);if(null!=a)return a;{const c=Du(n.visibleWrites,e);return xm(c)?t:null!=t||Sm(c,$t())?oh(c,t||Ut.EMPTY_NODE):null}}}function up(n,e,t,r){return pA(n.writeTree,n.treePath,e,t,r)}function Wv(n,e){return function gA(n,e,t){let r=Ut.EMPTY_NODE;const i=Tu(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(mn,(a,c)=>{r=r.updateImmediateChild(a,c)}),r;if(t){const a=Du(n.visibleWrites,e);return t.forEachChild(mn,(c,p)=>{const _=oh(Du(a,new bn(c)),p);r=r.updateImmediateChild(c,_)}),Bb(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return Bb(Du(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function zv(n,e,t,r){return function jb(n,e,t,r,i){(0,P.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Yn(e,t);if(Sm(n.visibleWrites,a))return null;{const c=Du(n.visibleWrites,a);return xm(c)?i.getChild(t):oh(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Oc(n,e){return function mA(n,e){return Tu(n.visibleWrites,e)}(n.writeTree,Yn(n.treePath,e))}function Mm(n,e,t){return function UM(n,e,t,r){const i=Yn(e,t),a=Tu(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?oh(Du(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Hb(n,e){return $b(Yn(n.treePath,e),n.writeTree)}function $b(n,e){return{treePath:n,writeTree:e}}class vA{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,P.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,wm(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,Jd(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Pc(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,P.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,wm(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Zb=new class wA{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class km{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Gs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Mm(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Iu(this.viewCache_),a=function yA(n,e,t,r,i,a){return function ah(n,e,t,r,i,a,c){let p;const _=Du(n.visibleWrites,e),E=Tu(_,$t());if(null!=E)p=E;else{if(null==t)return[];p=oh(_,t)}if(p=p.withIndex(c),p.isEmpty()||p.isLeafNode())return[];{const D=[],S=c.getCompare(),N=a?p.getReverseIteratorFrom(r,c):p.getIteratorFrom(r,c);let U=N.getNext();for(;U&&D.length<i;)0!==S(U,r)&&D.push(U),U=N.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function bA(n,e,t,r,i,a){const c=e.eventCache;if(null!=Oc(r,t))return e;{let p,_;if(qt(t))if((0,P.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const E=Iu(e),S=Wv(r,E instanceof Ut?E:Ut.EMPTY_NODE);p=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const E=up(r,Iu(e));p=n.filter.updateFullNode(e.eventCache.getNode(),E,a)}else{const E=Zt(t);if(".priority"===E){(0,P.hu)(1===bu(t),"Can't have a priority with additional path components");const D=c.getNode();_=e.serverCache.getNode();const S=zv(r,t,D,_);p=null!=S?n.filter.updatePriority(D,S):c.getNode()}else{const D=Rn(t);let S;if(c.isCompleteForChild(E)){_=e.serverCache.getNode();const N=zv(r,t,c.getNode(),_);S=null!=N?c.getNode().getImmediateChild(E).updateChild(D,N):c.getNode().getImmediateChild(E)}else S=Mm(r,E,e.serverCache);p=null!=S?n.filter.updateChild(c.getNode(),E,S,D,i,a):c.getNode()}}return sh(e,p,c.isFullyInitialized()||qt(t),n.filter.filtersNodes())}}function lh(n,e,t,r,i,a,c,p){const _=e.serverCache;let E;const D=c?n.filter:n.filter.getIndexedFilter();if(qt(t))E=D.updateFullNode(_.getNode(),r,null);else if(D.filtersNodes()&&!_.isFiltered()){const U=_.getNode().updateChild(t,r);E=D.updateFullNode(_.getNode(),U,null)}else{const U=Zt(t);if(!_.isCompleteForPath(t)&&bu(t)>1)return e;const H=Rn(t),Ee=_.getNode().getImmediateChild(U).updateChild(H,r);E=".priority"===U?D.updatePriority(_.getNode(),Ee):D.updateChild(_.getNode(),U,Ee,H,Zb,null)}const S=$v(e,E,_.isFullyInitialized()||qt(t),D.filtersNodes());return bA(n,S,t,i,new km(i,S,a),p)}function Yv(n,e,t,r,i,a,c){const p=e.eventCache;let _,E;const D=new km(i,e,a);if(qt(t))E=n.filter.updateFullNode(e.eventCache.getNode(),r,c),_=sh(e,E,!0,n.filter.filtersNodes());else{const S=Zt(t);if(".priority"===S)E=n.filter.updatePriority(e.eventCache.getNode(),r),_=sh(e,E,p.isFullyInitialized(),p.isFiltered());else{const N=Rn(t),U=p.getNode().getImmediateChild(S);let H;if(qt(N))H=r;else{const ue=D.getCompleteChild(S);H=null!=ue?".priority"===yb(N)&&ue.getChild(wb(N)).isEmpty()?ue:ue.updateChild(N,r):Ut.EMPTY_NODE}_=U.equals(H)?e:sh(e,n.filter.updateChild(p.getNode(),S,H,N,D,c),p.isFullyInitialized(),n.filter.filtersNodes())}}return _}function CA(n,e){return n.eventCache.isCompleteForChild(e)}function Qv(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function dp(n,e,t,r,i,a,c,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let E,_=e;E=qt(t)?r:new kn(null).setTree(t,r);const D=e.serverCache.getNode();return E.children.inorderTraversal((S,N)=>{if(D.hasChild(S)){const H=Qv(0,e.serverCache.getNode().getImmediateChild(S),N);_=lh(n,_,new bn(S),H,i,a,c,p)}}),E.children.inorderTraversal((S,N)=>{const U=!e.serverCache.isCompleteForChild(S)&&void 0===N.value;if(!D.hasChild(S)&&!U){const ue=Qv(0,e.serverCache.getNode().getImmediateChild(S),N);_=lh(n,_,new bn(S),ue,i,a,c,p)}}),_}class e0{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new kb(r.getIndex()),a=function Pb(n){return n.loadsAllData()?new kb(n.getIndex()):n.hasLimit()?new Nb(n):new Em(n)}(r);this.processor_=function EA(n){return{filter:n}}(a);const c=t.serverCache,p=t.eventCache,_=i.updateFullNode(Ut.EMPTY_NODE,c.getNode(),null),E=a.updateFullNode(Ut.EMPTY_NODE,p.getNode(),null),D=new Gs(_,c.isFullyInitialized(),i.filtersNodes()),S=new Gs(E,p.isFullyInitialized(),a.filtersNodes());this.viewCache_=op(S,D),this.eventGenerator_=new th(this.query_)}get query(){return this.query_}}function TA(n,e){const t=Iu(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!qt(e)&&!t.getImmediateChild(Zt(e)).isEmpty())?t.getChild(e):null}function t0(n){return 0===n.eventRegistrations_.length}function Kb(n,e,t){const r=[];if(t){(0,P.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const c=n.eventRegistrations_[a];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function n0(n,e,t,r){e.type===Mn.MERGE&&null!==e.source.queryId&&((0,P.hu)(Iu(n.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(ap(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function Gb(n,e,t,r,i){const a=new vA;let c,p;if(t.type===Mn.OVERWRITE){const E=t;E.source.fromUser?c=Yv(n,e,E.path,E.snap,r,i,a):((0,P.hu)(E.source.fromServer,"Unknown source."),p=E.source.tagged||e.serverCache.isFiltered()&&!qt(E.path),c=lh(n,e,E.path,E.snap,r,i,p,a))}else if(t.type===Mn.MERGE){const E=t;E.source.fromUser?c=function cp(n,e,t,r,i,a,c){let p=e;return r.foreach((_,E)=>{const D=Yn(t,_);CA(e,Zt(D))&&(p=Yv(n,p,D,E,i,a,c))}),r.foreach((_,E)=>{const D=Yn(t,_);CA(e,Zt(D))||(p=Yv(n,p,D,E,i,a,c))}),p}(n,e,E.path,E.children,r,i,a):((0,P.hu)(E.source.fromServer,"Unknown source."),p=E.source.tagged||e.serverCache.isFiltered(),c=dp(n,e,E.path,E.children,r,i,p,a))}else if(t.type===Mn.ACK_USER_WRITE){const E=t;c=E.revert?function Xv(n,e,t,r,i,a){let c;if(null!=Oc(r,t))return e;{const p=new km(r,e,i),_=e.eventCache.getNode();let E;if(qt(t)||".priority"===Zt(t)){let D;if(e.serverCache.isFullyInitialized())D=up(r,Iu(e));else{const S=e.serverCache.getNode();(0,P.hu)(S instanceof Ut,"serverChildren would be complete if leaf node"),D=Wv(r,S)}D=D,E=n.filter.updateFullNode(_,D,a)}else{const D=Zt(t);let S=Mm(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=_.getImmediateChild(D)),E=null!=S?n.filter.updateChild(_,D,S,Rn(t),p,a):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(_,D,Ut.EMPTY_NODE,Rn(t),p,a):_,E.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=up(r,Iu(e)),c.isLeafNode()&&(E=n.filter.updateFullNode(E,c,a)))}return c=e.serverCache.isFullyInitialized()||null!=Oc(r,$t()),sh(e,E,c,n.filter.filtersNodes())}}(n,e,E.path,r,i,a):function Jv(n,e,t,r,i,a,c){if(null!=Oc(i,t))return e;const p=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(qt(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return lh(n,e,t,_.getNode().getChild(t),i,a,p,c);if(qt(t)){let E=new kn(null);return _.getNode().forEachChild(wo,(D,S)=>{E=E.set(new bn(D),S)}),dp(n,e,t,E,i,a,p,c)}return e}{let E=new kn(null);return r.foreach((D,S)=>{const N=Yn(t,D);_.isCompleteForPath(N)&&(E=E.set(D,_.getNode().getChild(N)))}),dp(n,e,t,E,i,a,p,c)}}(n,e,E.path,E.affectedTree,r,i,a)}else{if(t.type!==Mn.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+t.type);c=function IA(n,e,t,r,i){const a=e.serverCache;return bA(n,$v(e,a.getNode(),a.isFullyInitialized()||qt(t),a.isFiltered()),t,r,Zb,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function Kv(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=ap(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(Mb(ap(e)))}}(e,c,_),{viewCache:c,changes:_}}(n.processor_,i,e,t,r);return function qb(n,e){(0,P.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,P.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,s0(n,a.changes,a.viewCache.eventCache.getNode(),null)}function s0(n,e,t,r){return function nh(n,e,t,r){const i=[],a=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(function ea(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),Va(n,i,"child_removed",e,r,t),Va(n,i,"child_added",e,r,t),Va(n,i,"child_moved",a,r,t),Va(n,i,"child_changed",e,r,t),Va(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let hp,pp;class Nm{constructor(){this.views=new Map}}function Pm(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,P.hu)(null!=a,"SyncTree gave us an op for an invalid query."),n0(a,e,t,r)}{let a=[];for(const c of n.views.values())a=a.concat(n0(c,e,t,r));return a}}function Om(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let p=up(t,i?r:null),_=!1;p?_=!0:r instanceof Ut?(p=Wv(t,r),_=!1):(p=Ut.EMPTY_NODE,_=!1);const E=op(new Gs(p,_,!1),new Gs(r,i,!1));return new e0(e,E)}return c}function Xb(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Au(n,e){let t=null;for(const r of n.views.values())t=t||TA(r,e);return t}function Fm(n,e){return e._queryParams.loadsAllData()?fp(n):n.views.get(e._queryIdentifier)}function Lm(n,e){return null!=Fm(n,e)}function Sl(n){return null!=fp(n)}function fp(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let nC=1;class o0{constructor(e){this.listenProvider_=e,this.syncPointTree_=new kn(null),this.pendingWriteTree_=function _A(){return{visibleWrites:bo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Um(n,e,t,r,i){return function cA(n,e,t,r,i){(0,P.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=lp(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Fc(n,new Eo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Su(n,e,t=!1){const r=function dA(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function qv(n,e){const t=n.allWrites.findIndex(p=>p.writeId===e);(0,P.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const p=n.allWrites[c];p.visible&&(c>=t&&Gv(p,r.path)?i=!1:ps(r.path,p.path)&&(a=!0)),c--}return!!i&&(a?(function hA(n){n.visibleWrites=fA(n.allWrites,LM,$t()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=Vb(n.visibleWrites,r.path):qr(r.children,_=>{n.visibleWrites=Vb(n.visibleWrites,Yn(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new kn(null);return null!=r.snap?a=a.set($t(),!0):qr(r.children,c=>{a=a.set(new bn(c),!0)}),Fc(n,new eh(r.path,a,t))}return[]}function gp(n,e,t){return Fc(n,new Eo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Vm(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let c=[];if(a&&("default"===e._queryIdentifier||Lm(a,e))){const p=function AA(n,e,t,r){const i=e._queryIdentifier,a=[];let c=[];const p=Sl(n);if("default"===i)for(const[_,E]of n.views.entries())c=c.concat(Kb(E,t,r)),t0(E)&&(n.views.delete(_),E.query._queryParams.loadsAllData()||a.push(E.query));else{const _=n.views.get(i);_&&(c=c.concat(Kb(_,t,r)),t0(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return p&&!Sl(n)&&a.push(new(function DA(){return(0,P.hu)(hp,"Reference.ts has not been loaded"),hp}())(e._repo,e._path)),{removed:a,events:c}}(a,e,t,r);(function Qb(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const _=p.removed;c=p.events;const E=-1!==_.findIndex(S=>S._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(i,(S,N)=>Sl(N));if(E&&!D){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const N=function l0(n){return n.fold((e,t,r)=>{if(t&&Sl(t))return[fp(t)];{let i=[];return t&&(i=Xb(t)),qr(r,(a,c)=>{i=i.concat(c)}),i}})}(S);for(let U=0;U<N.length;++U){const H=N[U],ue=H.query,Ee=oC(n,H);n.listenProvider_.startListening(_s(ue),mp(n,ue),Ee.hashFn,Ee.onComplete)}}}!D&&_.length>0&&!r&&(E?n.listenProvider_.stopListening(_s(e),null):_.forEach(S=>{const N=n.queryToTagMap.get(jm(S));n.listenProvider_.stopListening(_s(S),N)})),function MA(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=jm(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,_)}return c}function a0(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(S,N)=>{const U=zi(S,r);i=i||Au(N,U),a=a||Sl(N)});let p,c=n.syncPointTree_.get(r);c?(a=a||Sl(c),i=i||Au(c,$t())):(c=new Nm,n.syncPointTree_=n.syncPointTree_.set(r,c)),null!=i?p=!0:(p=!1,i=Ut.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((N,U)=>{const H=Au(U,$t());H&&(i=i.updateImmediateChild(N,H))}));const _=Lm(c,e);if(!_&&!e._queryParams.loadsAllData()){const S=jm(e);(0,P.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const N=function kA(){return nC++}();n.queryToTagMap.set(S,N),n.tagToQueryMap.set(N,S)}let D=function Jb(n,e,t,r,i,a){const c=Om(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function zb(n,e){n.eventRegistrations_.push(e)}(c,t),function r0(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(mn,(a,c)=>{r.push(Pc(a,c))}),t.isFullyInitialized()&&r.push(Mb(t.getNode())),s0(n,r,t.getNode(),e)}(c,t)}(c,e,t,Rm(n.pendingWriteTree_,r),i,p);if(!_&&!a){const S=Fm(c,e);D=D.concat(function Ba(n,e,t){const r=e._path,i=mp(n,e),a=oC(n,t),c=n.listenProvider_.startListening(_s(e),i,a.hashFn,a.onComplete),p=n.syncPointTree_.subtree(r);if(i)(0,P.hu)(!Sl(p.value),"If we're adding a query, it shouldn't be shadowed");else{const _=p.fold((E,D,S)=>{if(!qt(E)&&D&&Sl(D))return[fp(D).query];{let N=[];return D&&(N=N.concat(Xb(D).map(U=>U.query))),qr(S,(U,H)=>{N=N.concat(H)}),N}});for(let E=0;E<_.length;++E){const D=_[E];n.listenProvider_.stopListening(_s(D),mp(n,D))}}return c}(n,e,S))}return D}function Bm(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,p)=>{const E=Au(p,zi(c,e));if(E)return E});return pA(i,e,a,t,!0)}function Fc(n,e){return Lc(e,n.syncPointTree_,null,Rm(n.pendingWriteTree_,$t()))}function Lc(n,e,t,r){if(qt(n.path))return sC(n,e,t,r);{const i=e.get($t());null==t&&null!=i&&(t=Au(i,$t()));let a=[];const c=Zt(n.path),p=n.operationForChild(c),_=e.children.get(c);if(_&&p){const E=t?t.getImmediateChild(c):null,D=Hb(r,c);a=a.concat(Lc(p,_,E,D))}return i&&(a=a.concat(Pm(i,n,r,t))),a}}function sC(n,e,t,r){const i=e.get($t());null==t&&null!=i&&(t=Au(i,$t()));let a=[];return e.children.inorderTraversal((c,p)=>{const _=t?t.getImmediateChild(c):null,E=Hb(r,c),D=n.operationForChild(c);D&&(a=a.concat(sC(D,p,_,E)))}),i&&(a=a.concat(Pm(i,n,r,t))),a}function oC(n,e){const t=e.query,r=mp(n,t);return{hashFn:()=>(function Wb(n){return n.viewCache_.serverCache.getNode()}(e)||Ut.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Fr(n,e,t){const r=Hm(n,t);if(r){const i=aC(r),a=i.path,c=i.queryId,p=zi(a,e);return $m(n,a,new Ua(ms(c),p))}return[]}(n,t._path,r):function SA(n,e){return Fc(n,new Ua({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function SM(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return Vm(n,t,null,a)}}}}function mp(n,e){const t=jm(e);return n.queryToTagMap.get(t)}function jm(n){return n._path.toString()+"$"+n._queryIdentifier}function Hm(n,e){return n.tagToQueryMap.get(e)}function aC(n){const e=n.indexOf("$");return(0,P.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new bn(n.substr(0,e))}}function $m(n,e,t){const r=n.syncPointTree_.get(e);return(0,P.hu)(r,"Missing sync point for query tag that we're tracking"),Pm(r,t,Rm(n.pendingWriteTree_,e),null)}function _s(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function tC(){return(0,P.hu)(pp,"Reference.ts has not been loaded"),pp}())(n._repo,n._path):n}class Ws{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Ws(t)}node(){return this.node_}}class zs{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Yn(this.path_,e);return new zs(this.syncTree_,t)}node(){return Bm(this.syncTree_,this.path_)}}const u0=function(n,e,t){return n&&"object"==typeof n?((0,P.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?NA(n[".sv"],e,t):"object"==typeof n[".sv"]?PA(n[".sv"],e):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},NA=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,P.hu)(!1,"Unexpected server value: "+n)},PA=function(n,e,t){n.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,P.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,P.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},uC=function(n,e,t,r){return _p(e,new zs(t,n),r)},c0=function(n,e,t){return _p(n,new Ws(e),t)};function _p(n,e,t){const r=n.getPriority().val(),i=u0(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,p=u0(c.getValue(),e,t);return p!==c.getValue()||i!==c.getPriority().val()?new Kd(p,nr(i)):n}{const c=n;return a=c,i!==c.getPriority().val()&&(a=a.updatePriority(new Kd(i))),c.forEachChild(mn,(p,_)=>{const E=_p(_,e.getImmediateChild(p),t);E!==_&&(a=a.updateImmediateChild(p,E))}),a}}class Uc{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Zm(n,e){let t=e instanceof bn?e:new bn(e),r=n,i=Zt(t);for(;null!==i;){const a=(0,P.DV)(r.node.children,i)||{children:{},childCount:0};r=new Uc(i,r,a),t=Rn(t),i=Zt(t)}return r}function xu(n){return n.node.value}function d0(n,e){n.node.value=e,yp(n)}function h0(n){return n.node.childCount>0}function Vc(n,e){qr(n.node.children,(t,r)=>{e(new Uc(t,n,r))})}function dC(n,e,t,r){t&&!r&&e(n),Vc(n,i=>{dC(i,e,!0,r)}),t&&r&&e(n)}function uh(n){return new bn(null===n.parent?n.name:uh(n.parent)+"/"+n.name)}function yp(n){null!==n.parent&&function qm(n,e,t){const r=function cC(n){return void 0===xu(n)&&!h0(n)}(t),i=(0,P.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,yp(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,yp(n))}(n.parent,n.name,n)}const fC=/[\[\].#$\/\u0000-\u001F\u007F]/,pC=/[\[\].#$\u0000-\u001F\u007F]/,Gm=10485760,vp=function(n){return"string"==typeof n&&0!==n.length&&!fC.test(n)},f0=function(n){return"string"==typeof n&&0!==n.length&&!pC.test(n)},ch=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Wf(n)||n&&"object"==typeof n&&(0,P.r3)(n,".sv")},na=function(n,e,t,r){r&&void 0===e||wp((0,P.gK)(n,"value"),e,t)},wp=function(n,e,t){const r=t instanceof bn?new QD(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Mc(r));if("function"==typeof e)throw new Error(n+"contains a function "+Mc(r)+" with contents = "+e.toString());if(Wf(e))throw new Error(n+"contains "+e.toString()+" "+Mc(r));if("string"==typeof e&&e.length>Gm/3&&(0,P.ug)(e)>Gm)throw new Error(n+"contains a string greater than "+Gm+" utf8 bytes "+Mc(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(qr(e,(c,p)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(a=!0,!vp(c)))throw new Error(n+" contains an invalid key ("+c+") "+Mc(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Sv(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,P.ug)(e),Rv(n)})(r,c),wp(n,p,r),function xv(n){const e=n.parts_.pop();n.byteLength_-=(0,P.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Mc(r)+" in addition to actual children.")}},mC=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,P.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];qr(e,(c,p)=>{const _=new bn(c);if(wp(i,p,Yn(t,_)),".priority"===yb(_)&&!ch(p))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=Xf(r);for(let c=0;c<a.length;c++)if((".priority"!==a[c]||c!==a.length-1)&&!vp(a[c]))throw new Error(n+"contains an invalid key ("+a[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(YD);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&ps(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},p0=function(n,e,t){if(!t||void 0!==e){if(Wf(e))throw new Error((0,P.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ch(e))throw new Error((0,P.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ep=function(n,e,t,r){if(!(r&&void 0===t||vp(t)))throw new Error((0,P.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},bp=function(n,e,t,r){if(!(r&&void 0===t||f0(t)))throw new Error((0,P.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Co=function(n,e){if(".info"===Zt(e))throw new Error(n+" failed = Can't modify data under /.info/")},_C=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!vp(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),f0(n)}(t))throw new Error((0,P.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class LA{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Wm(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!zd(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function g0(n,e,t){Wm(n,t),yC(n,r=>zd(r,e))}function Io(n,e,t){Wm(n,t),yC(n,r=>ps(r,e)||ps(e,r))}function yC(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(UA(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function UA(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();li&&Sr("event: "+t.toString()),$d(r)}}}const vC="repo_interrupt";class BA{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new LA,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Tm(),this.transactionQueueTree_=new Uc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function m0(n){const t=n.infoData_.getNode(new bn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function dh(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:m0(n)})}function _0(n,e,t,r,i){n.dataUpdateCount++;const a=new bn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const _=(0,P.UI)(t,E=>nr(E));c=function RA(n,e,t,r){const i=Hm(n,r);if(i){const a=aC(i),c=a.path,p=a.queryId,_=zi(c,e),E=kn.fromObject(t);return $m(n,c,new ta(ms(p),_,E))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=nr(t);c=function xA(n,e,t,r){const i=Hm(n,r);if(null!=i){const a=aC(i),c=a.path,p=a.queryId,_=zi(c,e);return $m(n,c,new Eo(ms(p),_,t))}return[]}(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,P.UI)(t,E=>nr(E));c=function rC(n,e,t){const r=kn.fromObject(t);return Fc(n,new ta({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=nr(t);c=gp(n.serverSyncTree_,a,_)}let p=a;c.length>0&&(p=fh(n,a)),Io(n.eventQueue_,p,c)}function y0(n,e){zm(n,"connected",e),!1===e&&function Bc(n){Ip(n,"onDisconnectEvents");const e=dh(n),t=Tm();jv(n.onDisconnect_,$t(),(i,a)=>{const c=uC(i,a,n.serverSyncTree_,e);Dl(t,i,c)});let r=[];jv(t,$t(),(i,a)=>{r=r.concat(gp(n.serverSyncTree_,i,a));const c=b0(n,i);fh(n,c)}),n.onDisconnect_=Tm(),Io(n.eventQueue_,$t(),r)}(n)}function zm(n,e,t){const r=new bn("/.info/"+e),i=nr(t);n.infoData_.updateSnapshot(r,i);const a=gp(n.infoSyncTree_,r,i);Io(n.eventQueue_,r,a)}function Cp(n){return n.nextWriteId_++}function Km(n,e,t,r,i){Ip(n,"set",{path:e.toString(),value:t,priority:r});const a=dh(n),c=nr(t,r),p=Bm(n.serverSyncTree_,e),_=c0(c,p,a),E=Cp(n),D=Um(n.serverSyncTree_,e,_,E,!0);Wm(n.eventQueue_,D),n.server_.put(e.toString(),c.val(!0),(N,U)=>{const H="ok"===N;H||ui("set at "+e+" failed: "+N);const ue=Su(n.serverSyncTree_,E,!H);Io(n.eventQueue_,e,ue),dt(0,i,N,U)});const S=b0(n,e);fh(n,S),Io(n.eventQueue_,S,[])}function jA(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Cu(n.onDisconnect_,e),dt(0,t,r,i)})}function IC(n,e,t,r){const i=nr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,c)=>{"ok"===a&&Dl(n.onDisconnect_,e,i),dt(0,r,a,c)})}function TC(n,e,t){let r;r=".info"===Zt(e._path)?Vm(n.infoSyncTree_,e,t):Vm(n.serverSyncTree_,e,t),g0(n.eventQueue_,e._path,r)}function w0(n){n.persistentConnection_&&n.persistentConnection_.interrupt(vC)}function Ip(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Sr(t,...e)}function dt(n,e,t,r){e&&$d(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const c=new Error(a);c.code=i,e(c)}})}function E0(n,e,t){return Bm(n.serverSyncTree_,e,t)||Ut.EMPTY_NODE}function Ym(n,e=n.transactionQueueTree_){if(e||Dp(n,e),xu(e)){const t=rr(n,e);(0,P.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function Qm(n,e,t){const r=t.map(E=>E.currentWriteId),i=E0(n,e,r);let a=i;const c=i.hash();for(let E=0;E<t.length;E++){const D=t[E];(0,P.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=zi(e,D.path);a=a.updateChild(S,D.currentOutputSnapshotRaw)}const p=a.val(!0),_=e;n.server_.put(_.toString(),p,E=>{Ip(n,"transaction put response",{path:_.toString(),status:E});let D=[];if("ok"===E){const S=[];for(let N=0;N<t.length;N++)t[N].status=2,D=D.concat(Su(n.serverSyncTree_,t[N].currentWriteId)),t[N].onComplete&&S.push(()=>t[N].onComplete(null,!0,t[N].currentOutputSnapshotResolved)),t[N].unwatcher();Dp(n,Zm(n.transactionQueueTree_,e)),Ym(n,n.transactionQueueTree_),Io(n.eventQueue_,e,D);for(let N=0;N<S.length;N++)$d(S[N])}else{if("datastale"===E)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{ui("transaction at "+_.toString()+" failed: "+E);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=E}fh(n,e)}},c)}(n,uh(e),t)}else h0(e)&&Vc(e,t=>{Ym(n,t)})}function fh(n,e){const t=Tp(n,e),r=uh(t);return function Jm(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(p=>0===p.status).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const _=e[p],E=zi(t,_.path);let S,D=!1;if((0,P.hu)(null!==E,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)D=!0,S=_.abortReason,i=i.concat(Su(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)D=!0,S="maxretry",i=i.concat(Su(n.serverSyncTree_,_.currentWriteId,!0));else{const N=E0(n,_.path,c);_.currentInputSnapshot=N;const U=e[p].update(N.val());if(void 0!==U){wp("transaction failed: Data returned ",U,_.path);let H=nr(U);"object"==typeof U&&null!=U&&(0,P.r3)(U,".priority")||(H=H.updatePriority(N.getPriority()));const Ee=_.currentWriteId,Ke=dh(n),qe=c0(H,N,Ke);_.currentOutputSnapshotRaw=H,_.currentOutputSnapshotResolved=qe,_.currentWriteId=Cp(n),c.splice(c.indexOf(Ee),1),i=i.concat(Um(n.serverSyncTree_,_.path,qe,_.currentWriteId,_.applyLocally)),i=i.concat(Su(n.serverSyncTree_,Ee,!0))}else D=!0,S="nodata",i=i.concat(Su(n.serverSyncTree_,_.currentWriteId,!0))}Io(n.eventQueue_,t,i),i=[],D&&(e[p].status=2,setTimeout(e[p].unwatcher,Math.floor(0)),e[p].onComplete&&r.push("nodata"===S?()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot):()=>e[p].onComplete(new Error(S),!1,null)))}Dp(n,n.transactionQueueTree_);for(let p=0;p<r.length;p++)$d(r[p]);Ym(n,n.transactionQueueTree_)}(n,rr(n,t),r),r}function Tp(n,e){let t,r=n.transactionQueueTree_;for(t=Zt(e);null!==t&&void 0===xu(r);)r=Zm(r,t),t=Zt(e=Rn(e));return r}function rr(n,e){const t=[];return $A(n,e,t),t.sort((r,i)=>r.order-i.order),t}function $A(n,e,t){const r=xu(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Vc(e,i=>{$A(n,i,t)})}function Dp(n,e){const t=xu(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,d0(e,t.length>0?t:void 0)}Vc(e,r=>{Dp(n,r)})}function b0(n,e){const t=uh(Tp(n,e)),r=Zm(n.transactionQueueTree_,e);return function hC(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{C0(n,i)}),C0(n,r),dC(r,i=>{C0(n,i)}),t}function C0(n,e){const t=xu(e);if(t){const r=[];let i=[],a=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,P.hu)(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):((0,P.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(Su(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===a?d0(e,void 0):t.length=a+1,Io(n.eventQueue_,uh(e),i);for(let c=0;c<r.length;c++)$d(r[c])}}const Xm=function(n,e){const t=xC(n),r=t.namespace;return"firebase.com"===t.domain&&Jo(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Jo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ui("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new im(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new bn(t.pathString)}},xC=function(n){let e="",t="",r="",i="",a="",c=!0,p="https",_=443;if("string"==typeof n){let E=n.indexOf("//");E>=0&&(p=n.substring(0,E-1),n=n.substring(E+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function AC(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(D,S)));const N=function SC(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ui(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));E=e.indexOf(":"),E>=0?(c="https"===p||"wss"===p,_=parseInt(e.substring(E+1),10)):E=e.length;const U=e.slice(0,E);if("localhost"===U.toLowerCase())t="localhost";else if(U.split(".").length<=2)t=U;else{const H=e.indexOf(".");r=e.substring(0,H).toLowerCase(),t=e.substring(H+1),a=r}"ns"in N&&(a=N.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:c,scheme:p,pathString:i,namespace:a}};class RC{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,P.Pz)(this.snapshot.exportVal())}}class MC{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class kC{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,P.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class ph{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new P.BH;return jA(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Co("OnDisconnect.remove",this._path);const e=new P.BH;return IC(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Co("OnDisconnect.set",this._path),na("OnDisconnect.set",e,this._path,!1);const t=new P.BH;return IC(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Co("OnDisconnect.setWithPriority",this._path),na("OnDisconnect.setWithPriority",e,this._path,!1),p0("OnDisconnect.setWithPriority",t,!1);const r=new P.BH;return function hh(n,e,t,r,i){const a=nr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(c,p)=>{"ok"===c&&Dl(n.onDisconnect_,e,a),dt(0,i,c,p)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Co("OnDisconnect.update",this._path),mC("OnDisconnect.update",e,this._path,!1);const t=new P.BH;return function jM(n,e,t,r){if((0,P.xb)(t))return Sr("onDisconnect().update() called with empty data.  Don't do anything."),void dt(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&qr(t,(c,p)=>{const _=nr(p);Dl(n.onDisconnect_,Yn(e,c),_)}),dt(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class ys{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return qt(this._path)?null:yb(this._path)}get ref(){return new Ks(this._repo,this._path)}get _queryIdentifier(){const e=Fb(this._queryParams),t=XE(e);return"{}"===t?"default":t}get _queryObject(){return Fb(this._queryParams)}isEqual(e){if(!((e=(0,P.m9)(e))instanceof ys))return!1;const t=this._repo===e._repo,r=zd(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function vb(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function e_(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ru(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===wo){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==vo)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==$s)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===mn){if(null!=e&&!ch(e)||null!=t&&!ch(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,P.hu)(n.getIndex()instanceof Lv||n.getIndex()===_m,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function jc(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ks extends ys{constructor(e,t){super(e,t,new rp,!1)}get parent(){const e=wb(this._path);return null===e?null:new Ks(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Mu{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new bn(e),r=ra(this.ref,e);return new Mu(this._node.getChild(t),r,mn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Mu(i,ra(this.ref,r),mn)))}hasChild(e){const t=new bn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function I0(n,e){return(n=(0,P.m9)(n))._checkNotDeleted("ref"),void 0!==e?ra(n._root,e):n._root}function NC(n,e){(n=(0,P.m9)(n))._checkNotDeleted("refFromURL");const t=Xm(e,n._repo.repoInfo_.nodeAdmin);_C("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Jo("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),I0(n,t.path.toString())}function ra(n,e){return null===Zt((n=(0,P.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),bp("child","path",t,!1)):bp("child","path",e,!1),new Ks(n._repo,Yn(n._path,e));var t}function T0(n,e){n=(0,P.m9)(n),Co("set",n._path),na("set",e,n._path,!1);const t=new P.BH;return Km(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function FC(n,e){mC("update",e,n._path,!1);const t=new P.BH;return function CC(n,e,t,r){Ip(n,"update",{path:e.toString(),value:t});let i=!0;const a=dh(n),c={};if(qr(t,(p,_)=>{i=!1,c[p]=uC(Yn(e,p),nr(_),n.serverSyncTree_,a)}),i)Sr("update() called with empty data.  Don't do anything."),dt(0,r,"ok",void 0);else{const p=Cp(n),_=function BM(n,e,t,r){!function FM(n,e,t,r){(0,P.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Am(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=kn.fromObject(t);return Fc(n,new ta({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,p);Wm(n.eventQueue_,_),n.server_.merge(e.toString(),t,(E,D)=>{const S="ok"===E;S||ui("update at "+e+" failed: "+E);const N=Su(n.serverSyncTree_,p,!S),U=N.length>0?fh(n,e):e;Io(n.eventQueue_,U,N),dt(0,r,E,D)}),qr(t,E=>{const D=b0(n,Yn(e,E));fh(n,D)}),Io(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function GA(n){return function bC(n,e){const t=function iC(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(E,D)=>{const S=zi(E,t);r=r||Au(D,S)});let i=n.syncPointTree_.get(t);i?r=r||Au(i,$t()):(i=new Nm,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,c=a?new Gs(r,!0,!1):null;return function VM(n){return ap(n.viewCache_)}(Om(i,e,Rm(n.pendingWriteTree_,e._path),a?c.getNode():Ut.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=nr(r).withIndex(e._queryParams.getIndex()),a=gp(n.serverSyncTree_,e._path,i);return g0(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(Ip(n,"get for query "+(0,P.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,P.m9)(n))._repo,n).then(e=>new Mu(e,new Ks(n._repo,n._path),n._queryParams.getIndex()))}class Ap{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new RC("value",this,new Mu(e.snapshotNode,new Ks(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new MC(this,e,t):null}matches(e){return e instanceof Ap&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class n_{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new MC(this,e,t):null}createEvent(e,t){(0,P.hu)(null!=e.childName,"Child events should have a childName.");const r=ra(new Ks(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new RC(e.type,this,new Mu(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof n_&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Sp(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,E=(D,S)=>{TC(n._repo,n,p),_(D,S)};E.userCallback=t.userCallback,E.context=t.context,t=E}const c=new kC(t,a||void 0),p="value"===e?new Ap(c):new n_(e,c);return function v0(n,e,t){let r;r=".info"===Zt(e._path)?a0(n.infoSyncTree_,e,t):a0(n.serverSyncTree_,e,t),g0(n.eventQueue_,e._path,r)}(n._repo,n,p),()=>TC(n._repo,n,p)}function LC(n,e,t,r){return Sp(n,"value",e,t,r)}function WA(n,e,t,r){return Sp(n,"child_added",e,t,r)}function zA(n,e,t,r){return Sp(n,"child_changed",e,t,r)}function KA(n,e,t,r){return Sp(n,"child_moved",e,t,r)}function D0(n,e,t,r){return Sp(n,"child_removed",e,t,r)}function xp(n,e,t){let r=null;const i=t?new kC(t):null;"value"===e?r=new Ap(i):e&&(r=new n_(e,i)),TC(n._repo,n,r)}class ia{}class UC extends ia{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){na("endAt",this._value,e._path,!0);const t=Vv(e._queryParams,this._value,this._key);if(jc(t),Ru(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ys(e._repo,e._path,t,e._orderByCalled)}}class Rp extends ia{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){na("endBefore",this._value,e._path,!1);const t=function Bv(n,e,t){let r,i;return n.index_===wo?("string"==typeof e&&(e=vm(e)),i=Vv(n,e,t)):(r=null==t?vo:vm(t),i=Vv(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(jc(t),Ru(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ys(e._repo,e._path,t,e._orderByCalled)}}class BC extends ia{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){na("startAt",this._value,e._path,!0);const t=bm(e._queryParams,this._value,this._key);if(jc(t),Ru(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ys(e._repo,e._path,t,e._orderByCalled)}}class JA extends ia{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){na("startAfter",this._value,e._path,!1);const t=function Uv(n,e,t){let r;if(n.index_===wo)"string"==typeof e&&(e=oA(e)),r=bm(n,e,t);else{let i;i=null==t?$s:oA(t),r=bm(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(jc(t),Ru(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ys(e._repo,e._path,t,e._orderByCalled)}}class jC extends ia{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ys(e._repo,e._path,function aA(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class tS extends ia{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ys(e._repo,e._path,function OM(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class nS extends ia{constructor(e){super(),this._path=e}_apply(e){e_(e,"orderByChild");const t=new bn(this._path);if(qt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Lv(t),i=Cm(e._queryParams,r);return Ru(i),new ys(e._repo,e._path,i,!0)}}class rS extends ia{_apply(e){e_(e,"orderByKey");const t=Cm(e._queryParams,wo);return Ru(t),new ys(e._repo,e._path,t,!0)}}class iS extends ia{_apply(e){e_(e,"orderByPriority");const t=Cm(e._queryParams,mn);return Ru(t),new ys(e._repo,e._path,t,!0)}}class sS extends ia{_apply(e){e_(e,"orderByValue");const t=Cm(e._queryParams,_m);return Ru(t),new ys(e._repo,e._path,t,!0)}}class oS extends ia{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(na("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new UC(this._value,this._key)._apply(new BC(this._value,this._key)._apply(e))}}function To(n,...e){let t=(0,P.m9)(n);for(const r of e)t=r._apply(t);return t}(function Yb(n){(0,P.hu)(!hp,"__referenceConstructor has already been defined"),hp=n})(Ks),function eC(n){(0,P.hu)(!pp,"__referenceConstructor has already been defined"),pp=n}(Ks);const S0={};function WC(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Jo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Sr("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,E,c=Xm(a,i),p=c.repoInfo;"undefined"!=typeof process&&(E=process.env.FIREBASE_DATABASE_EMULATOR_HOST),E?(_=!0,a=`http://${E}?ns=${p.namespace}`,c=Xm(a,i),p=c.repoInfo):_=!c.repoInfo.secure;const D=i&&_?new nm(nm.OWNER):new RM(n.name,n.options,e);_C("Invalid Firebase Database URL",c),qt(c.path)||Jo("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function lS(n,e,t,r){let i=S0[e.name];i||(i={},S0[e.name]=i);let a=i[n.toURLString()];return a&&Jo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new BA(n,false,t,r),i[n.toURLString()]=a,a}(p,n,D,new xM(n.name,t));return new cS(S,n)}class cS{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function wC(n,e,t){if(n.stats_=Kf(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Im(n.repoInfo_,(r,i,a,c)=>{_0(n,r,i,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>y0(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ki(n.repoInfo_,e,(r,i,a,c)=>{_0(n,r,i,a,c)},r=>{y0(n,r)},r=>{!function EC(n,e){qr(e,(t,r)=>{zm(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function $D(n,e){const t=n.toString();return yv[t]||(yv[t]=e()),yv[t]}(n.repoInfo_,()=>new sp(n.stats_,n.server_)),n.infoData_=new lA,n.infoSyncTree_=new o0({startListening:(r,i,a,c)=>{let p=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(p=gp(n.infoSyncTree_,r._path,_),setTimeout(()=>{c("ok")},0)),p},stopListening:()=>{}}),zm(n,"connected",!1),n.serverSyncTree_=new o0({startListening:(r,i,a,c)=>(n.server_.listen(r,a,i,(p,_)=>{const E=c(p,_);Io(n.eventQueue_,r._path,E)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ks(this._repo,$t())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function zC(n,e){const t=S0[e];(!t||t[n.key]!==n)&&Jo(`Database ${e}(${n.repoInfo_}) has already been deleted.`),w0(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Jo("Cannot call "+e+" on a deleted database.")}}function pS(n,e){JE(n,e)}const YC={".sv":"timestamp"};class QC{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ki.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Ki.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function KC(n){KE(jn.SDK_VERSION),(0,jn._registerComponent)(new Qo.wA("database",(e,{instanceIdentifier:t})=>WC(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,jn.registerVersion)(WE,"0.12.7",n),(0,jn.registerVersion)(WE,"0.12.7","esm2017")}();const JC=new yo.Yd("@firebase/database-compat"),r_=function(n){JC.warn("FIREBASE WARNING: "+n)};class k0{constructor(e){this._delegate=e}cancel(e){(0,P.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,P.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,P.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,P.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,P.Dv)("OnDisconnect.set",1,2,arguments.length),(0,P.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,P.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,P.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,r_("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,P.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class wS{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,P.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class xl{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,P.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,P.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,P.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,P.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,P.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),bp("DataSnapshot.child","path",e,!1),new xl(this._database,this._delegate.child(e))}hasChild(e){return(0,P.Dv)("DataSnapshot.hasChild",1,1,arguments.length),bp("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,P.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,P.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,P.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new xl(this._database,t)))}hasChildren(){return(0,P.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,P.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,P.Dv)("DataSnapshot.ref",0,0,arguments.length),new vs(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class di{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,P.Dv)("Query.on",2,4,arguments.length),(0,P.Wj)("Query.on","callback",t,!1);const c=di.getCancelAndContextArgs_("Query.on",r,i),p=(E,D)=>{t.call(c.context,new xl(this.database,E),D)};p.userCallback=t,p.context=c.context;const _=null===(a=c.cancel)||void 0===a?void 0:a.bind(c.context);switch(e){case"value":return LC(this._delegate,p,_),t;case"child_added":return WA(this._delegate,p,_),t;case"child_removed":return D0(this._delegate,p,_),t;case"child_changed":return zA(this._delegate,p,_),t;case"child_moved":return KA(this._delegate,p,_),t;default:throw new Error((0,P.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,P.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,P.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,P.Wj)("Query.off","callback",t,!0),(0,P.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,xp(this._delegate,e,i)}else xp(this._delegate,e)}get(){return GA(this._delegate).then(e=>new xl(this.database,e))}once(e,t,r,i){(0,P.Dv)("Query.once",1,4,arguments.length),(0,P.Wj)("Query.once","callback",t,!0);const a=di.getCancelAndContextArgs_("Query.once",r,i),c=new P.BH,p=(E,D)=>{const S=new xl(this.database,E);t&&t.call(a.context,S,D),c.resolve(S)};p.userCallback=t,p.context=a.context;const _=E=>{a.cancel&&a.cancel.call(a.context,E),c.reject(E)};switch(e){case"value":LC(this._delegate,p,_,{onlyOnce:!0});break;case"child_added":WA(this._delegate,p,_,{onlyOnce:!0});break;case"child_removed":D0(this._delegate,p,_,{onlyOnce:!0});break;case"child_changed":zA(this._delegate,p,_,{onlyOnce:!0});break;case"child_moved":KA(this._delegate,p,_,{onlyOnce:!0});break;default:throw new Error((0,P.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,P.Dv)("Query.limitToFirst",1,1,arguments.length),new di(this.database,To(this._delegate,function eS(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new jC(n)}(e)))}limitToLast(e){return(0,P.Dv)("Query.limitToLast",1,1,arguments.length),new di(this.database,To(this._delegate,function gh(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new tS(n)}(e)))}orderByChild(e){return(0,P.Dv)("Query.orderByChild",1,1,arguments.length),new di(this.database,To(this._delegate,function HC(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return bp("orderByChild","path",n,!1),new nS(n)}(e)))}orderByKey(){return(0,P.Dv)("Query.orderByKey",0,0,arguments.length),new di(this.database,To(this._delegate,function $C(){return new rS}()))}orderByPriority(){return(0,P.Dv)("Query.orderByPriority",0,0,arguments.length),new di(this.database,To(this._delegate,function ZC(){return new iS}()))}orderByValue(){return(0,P.Dv)("Query.orderByValue",0,0,arguments.length),new di(this.database,To(this._delegate,function A0(){return new sS}()))}startAt(e=null,t){return(0,P.Dv)("Query.startAt",0,2,arguments.length),new di(this.database,To(this._delegate,function QA(n=null,e){return Ep("startAt","key",e,!0),new BC(n,e)}(e,t)))}startAfter(e=null,t){return(0,P.Dv)("Query.startAfter",0,2,arguments.length),new di(this.database,To(this._delegate,function XA(n,e){return Ep("startAfter","key",e,!0),new JA(n,e)}(e,t)))}endAt(e=null,t){return(0,P.Dv)("Query.endAt",0,2,arguments.length),new di(this.database,To(this._delegate,function VC(n,e){return Ep("endAt","key",e,!0),new UC(n,e)}(e,t)))}endBefore(e=null,t){return(0,P.Dv)("Query.endBefore",0,2,arguments.length),new di(this.database,To(this._delegate,function YA(n,e){return Ep("endBefore","key",e,!0),new Rp(n,e)}(e,t)))}equalTo(e,t){return(0,P.Dv)("Query.equalTo",1,2,arguments.length),new di(this.database,To(this._delegate,function qC(n,e){return Ep("equalTo","key",e,!0),new oS(n,e)}(e,t)))}toString(){return(0,P.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,P.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,P.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof di))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,P.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,P.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,P.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new vs(this.database,new Ks(this._delegate._repo,this._delegate._path))}}class vs extends di{constructor(e,t){super(e,new ys(t._repo,t._path,new rp,!1)),this.database=e,this._delegate=t}getKey(){return(0,P.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,P.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new vs(this.database,ra(this._delegate,e))}getParent(){(0,P.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new vs(this.database,e):null}getRoot(){return(0,P.Dv)("Reference.root",0,0,arguments.length),new vs(this.database,this._delegate.root)}set(e,t){(0,P.Dv)("Reference.set",1,2,arguments.length),(0,P.Wj)("Reference.set","onComplete",t,!0);const r=T0(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,P.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,r_("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Co("Reference.update",this._delegate._path),(0,P.Wj)("Reference.update","onComplete",t,!0);const r=FC(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,P.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function OC(n,e,t){if(Co("setWithPriority",n._path),na("setWithPriority",e,n._path,!1),p0("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new P.BH;return Km(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,P.Dv)("Reference.remove",0,1,arguments.length),(0,P.Wj)("Reference.remove","onComplete",e,!0);const t=function qA(n){return Co("remove",n._path),T0(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,P.Dv)("Reference.transaction",1,3,arguments.length),(0,P.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,P.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,P.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function _S(n,e,t){var r;if(n=(0,P.m9)(n),Co("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new P.BH,p=LC(n,()=>{});return function HA(n,e,t,r,i,a){Ip(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:lv(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},p=E0(n,e,void 0);c.currentInputSnapshot=p;const _=c.update(p.val());if(void 0===_)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{wp("transaction failed: Data returned ",_,c.path),c.status=0;const E=Zm(n.transactionQueueTree_,e),D=xu(E)||[];let S;D.push(c),d0(E,D),"object"==typeof _&&null!==_&&(0,P.r3)(_,".priority")?(S=(0,P.DV)(_,".priority"),(0,P.hu)(ch(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(Bm(n.serverSyncTree_,e)||Ut.EMPTY_NODE).getPriority().val();const N=dh(n),U=nr(_,S),H=c0(U,p,N);c.currentOutputSnapshotRaw=U,c.currentOutputSnapshotResolved=H,c.currentWriteId=Cp(n);const ue=Um(n.serverSyncTree_,e,H,c.currentWriteId,c.applyLocally);Io(n.eventQueue_,e,ue),Ym(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,E,D)=>{let S=null;_?a.reject(_):(S=new Mu(D,new Ks(n._repo,n._path),mn),a.resolve(new QC(E,S)))},p,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new wS(a.committed,new xl(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,P.Dv)("Reference.setPriority",1,2,arguments.length),(0,P.Wj)("Reference.setPriority","onComplete",t,!0);const r=function PC(n,e){n=(0,P.m9)(n),Co("setPriority",n._path),p0("setPriority",e,!1);const t=new P.BH;return Km(n._repo,Yn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,P.Dv)("Reference.push",0,2,arguments.length),(0,P.Wj)("Reference.push","onComplete",t,!0);const r=function ZA(n,e){n=(0,P.m9)(n),Co("push",n._path),na("push",e,n._path,!0);const t=m0(n._repo),r=PM(t),i=ra(n,r),a=ra(n,r);let c;return c=null!=e?T0(a,e).then(()=>a):Promise.resolve(a),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new vs(this.database,c));t&&i.then(()=>t(null),c=>t(c));const a=new vs(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Co("Reference.onDisconnect",this._delegate._path),new k0(new ph(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Mp{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function dS(n,e,t,r={}){(n=(0,P.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Jo("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Jo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new nm(nm.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,P.Sg)(r.mockUserToken,n.app.options.projectId);a=new nm(c)}!function x0(n,e,t,r){n.repoInfo_=new im(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,P.Dv)("database.ref",0,1,arguments.length),e instanceof vs){const t=NC(this._delegate,e.toString());return new vs(this,t)}{const t=I0(this._delegate,e);return new vs(this,t)}}refFromURL(e){(0,P.Dv)("database.refFromURL",1,1,arguments.length);const r=NC(this._delegate,e);return new vs(this,r)}goOffline(){return(0,P.Dv)("database.goOffline",0,0,arguments.length),function hS(n){(n=(0,P.m9)(n))._checkNotDeleted("goOffline"),w0(n._repo)}(this._delegate)}goOnline(){return(0,P.Dv)("database.goOnline",0,0,arguments.length),function fS(n){(n=(0,P.m9)(n))._checkNotDeleted("goOnline"),function DC(n){n.persistentConnection_&&n.persistentConnection_.resume(vC)}(n._repo)}(this._delegate)}}Mp.ServerValue={TIMESTAMP:function gS(){return YC}(),increment:n=>function mS(n){return{".sv":{increment:n}}}(n)};var qM=Object.freeze({__proto__:null,initStandalone:function XC({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){KE(t);const c=new Qo.zt("auth-internal",new Qo.H0("database-standalone"));return c.setComponent(new Qo.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Mp(WC(n,c,void 0,e,a),n),namespace:i}}});const ES=Mp.ServerValue;!function kp(n){n.INTERNAL.registerComponent(new Qo.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Mp(i,r)},"PUBLIC").setServiceProps({Reference:vs,Query:di,Database:Mp,DataSnapshot:xl,enableLogging:pS,INTERNAL:qM,ServerValue:ES}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.7")}(Xg.Z);var i_=F(5363),mh=F(6063);class Np extends Hi.x{constructor(e=1/0,t=1/0,r=mh.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let p=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)p=_;p&&r.splice(0,p+1)}}}function eI(n,e,t){var r,i;let a,c=!1;return n&&"object"==typeof n?(a=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,c=!!n.refCount,t=n.scheduler):a=null!=n?n:1/0,(0,sv.B)({connector:()=>new Np(a,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}function bS(n,e){return(0,yd.m)(e)?Dn(()=>n,e):Dn(()=>n)}var s_=F(9468);F(5867);const sI=new Map,AS={activated:!1,tokenObservers:[]},_h={initialized:!1,enabled:!1};function Lr(n){return sI.get(n)||AS}function Ai(n,e){sI.set(n,e)}function P0(){return _h}class O0{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new P.BH,yield function RS(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new P.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Yi=new P.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function lI(n){if(!Lr(n).activated)throw Yi.create("use-before-activation",{appName:n.name})}function L0(n,e){return U0.apply(this,arguments)}function U0(){return(U0=(0,me.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(e),headers:r};let c,p;try{c=yield fetch(n,a)}catch(S){throw Yi.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==c.status)throw Yi.create("fetch-status-error",{httpStatus:c.status});try{p=yield c.json()}catch(S){throw Yi.create("fetch-parse-error",{originalErrorMessage:S.message})}const _=p.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw Yi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const E=1e3*Number(_[1]),D=Date.now();return{token:p.attestationToken,expireTimeMillis:D+E,issuedAtTimeMillis:D}})).apply(this,arguments)}function cI(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const yh="firebase-app-check-store";let d_=null;function B0(){return d_||(d_=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Yi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(yh,{keyPath:"compositeKey"})}}catch(t){e(Yi.create("storage-open",{originalErrorMessage:t.message}))}}),d_)}function j0(){return(j0=(0,me.Z)(function*(n,e){const r=(yield B0()).transaction(yh,"readwrite"),a=r.objectStore(yh).put({compositeKey:n,value:e});return new Promise((c,p)=>{a.onsuccess=_=>{c()},r.onerror=_=>{var E;p(Yi.create("storage-set",{originalErrorMessage:null===(E=_.target.error)||void 0===E?void 0:E.message}))}})})).apply(this,arguments)}const Hc=new yo.Yd("@firebase/app-check");function gI(n,e){return(0,P.hl)()?function NS(n,e){return function vh(n,e){return j0.apply(this,arguments)}(function pI(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Hc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Lp(){return P0().enabled}function mI(){return $0.apply(this,arguments)}function $0(){return($0=(0,me.Z)(function*(){const n=P0();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const yI={error:"UNKNOWN_ERROR"};function Z0(n){return P.US.encodeString(JSON.stringify(n),!1)}function Up(n){return q0.apply(this,arguments)}function q0(){return(q0=(0,me.Z)(function*(n,e=!1){const t=n.app;lI(t);const r=Lr(t);let a,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&Eh(_)&&(i=_)}if(!e&&i&&Eh(i))return{token:i.token};let p,c=!1;if(Lp()){r.exchangeTokenPromise||(r.exchangeTokenPromise=L0(cI(t,yield mI()),n.heartbeatServiceProvider).then(E=>(r.exchangeTokenPromise=void 0,E)),c=!0);const _=yield r.exchangeTokenPromise;return yield gI(t,_),Ai(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),c=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Hc.warn(_.message):Hc.error(_),a=_}return i?(p={token:i.token},Ai(t,Object.assign(Object.assign({},r),{token:i})),yield gI(t,i)):p=K0(a),c&&z0(t,p),p})).apply(this,arguments)}function vI(n,e){const t=Lr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ai(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function f_(n){const{app:e}=n,t=Lr(e);let r=t.tokenRefresher;r||(r=function W0(n){const{app:e}=n;return new O0((0,me.Z)(function*(){let r;if(r=Lr(e).token?yield Up(n,!0):yield Up(n),r.error)throw r.error}),()=>!0,()=>{const t=Lr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ai(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function z0(n,e){const t=Lr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function Eh(n){return n.expireTimeMillis-Date.now()>0}function K0(n){return{token:Z0(yI),error:n}}class LS{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Lr(this.app);for(const t of e)vI(this.app,t.next);return Promise.resolve()}}const __="app-check-internal";!function xI(){(0,jn._registerComponent)(new Qo.wA("app-check",n=>function US(n,e){return new LS(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(__).initialize()})),(0,jn._registerComponent)(new Qo.wA(__,n=>function VS(n){return{getToken:e=>Up(n,e),addTokenListener:e=>function G0(n,e,t,r){const{app:i}=n,a=Lr(i),c={next:t,error:r,type:e};if(Ai(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,c]})),a.token&&Eh(a.token)){const p=a.token;Promise.resolve().then(()=>{t({token:p.token}),f_(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>f_(n))}(n,"INTERNAL",e),removeTokenListener:e=>vI(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,jn.registerVersion)("@firebase/app-check","0.5.5")}();class Zc{constructor(){return(0,gn.vb)("app-check")}}"undefined"!=typeof window&&window;var Bp=F(127);const ew=new u.OlP("angularfire2.auth.use-emulator"),tw=new u.OlP("angularfire2.auth.settings"),v_=new u.OlP("angularfire2.auth.tenant-id"),nw=new u.OlP("angularfire2.auth.langugage-code"),w_=new u.OlP("angularfire2.auth.use-device-language"),E_=new u.OlP("angularfire.auth.persistence"),b_=(n,e,t,r,i,a,c,p)=>(0,Ar.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),c)for(const[E,D]of Object.entries(c))_.settings[E]=D;return p&&_.setPersistence(p),_},[t,r,i,a,c,p]);let Ch=(()=>{class n{constructor(t,r,i,a,c,p,_,E,D,S,N,U){const H=new Hi.x,ue=pt(void 0).pipe((0,i_.Q)(c.outsideAngular),Dn(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,1254)))),(0,at.U)(()=>(0,Ar.on)(t,a,r)),(0,at.U)(Ee=>b_(Ee,a,p,E,D,S,_,N)),eI({bufferSize:1,refCount:!1}));if(Ir(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=pt(null);else{ue.pipe(xa()).subscribe();const Ke=ue.pipe(Dn(ze=>ze.getRedirectResult().then(Nt=>Nt,()=>null)),gn.iC,eI({bufferSize:1,refCount:!1})),qe=ue.pipe(Dn(ze=>new ur.y(Nt=>({unsubscribe:a.runOutsideAngular(()=>ze.onAuthStateChanged(Vt=>Nt.next(Vt),Vt=>Nt.error(Vt),()=>Nt.complete()))})))),ct=ue.pipe(Dn(ze=>new ur.y(Nt=>({unsubscribe:a.runOutsideAngular(()=>ze.onIdTokenChanged(Vt=>Nt.next(Vt),Vt=>Nt.error(Vt),()=>Nt.complete()))}))));this.authState=Ke.pipe(bS(qe),(0,s_.R)(c.outsideAngular),(0,i_.Q)(c.insideAngular)),this.user=Ke.pipe(bS(ct),(0,s_.R)(c.outsideAngular),(0,i_.Q)(c.insideAngular)),this.idToken=this.user.pipe(Dn(ze=>ze?(0,ln.D)(ze.getIdToken()):pt(null))),this.idTokenResult=this.user.pipe(Dn(ze=>ze?(0,ln.D)(ze.getIdTokenResult()):pt(null))),this.credential=(0,iv.T)(Ke,H,this.authState.pipe(Ci(ze=>!ze))).pipe((0,at.U)(ze=>(null==ze?void 0:ze.user)?ze:null),(0,s_.R)(c.outsideAngular),(0,i_.Q)(c.insideAngular))}return(0,Ar.pX)(this,ue,a,{spy:{apply:(Ee,Ke,qe)=>{(Ee.startsWith("signIn")||Ee.startsWith("createUser"))&&qe.then(ct=>H.next(ct))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ar.Dh),u.LFG(Ar.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(gn.HU),u.LFG(ew,8),u.LFG(tw,8),u.LFG(v_,8),u.LFG(nw,8),u.LFG(w_,8),u.LFG(E_,8),u.LFG(Zc,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),KS=(()=>{class n{constructor(){Bp.Z.registerVersion("angularfire",gn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Ch]}),n})();function rw(n){return null==n}function QS(n){return"function"==typeof n.set}function JS(n,e){return QS(e)?e:n.ref(e)}function XS(n,e){if(function YS(n){return"string"==typeof n}(n))return e.stringCase();if(QS(n))return e.firebaseCase();if(function sk(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function C_(n,e,t="on",r=Dc.z){return new ur.y(i=>{let a=null;return a=n[t](e,(c,p)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:p})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,at.U)(i=>{const{snapshot:a,prevKey:c}=i;let p=null;return a.exists()&&(p=a.key),{type:e,payload:a,prevKey:c,key:p}}),(0,sv.B)())}function ex(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function lk(n,e){const{payload:t,prevKey:r,key:i}=e,a=ex(n,i),c=function ak(n,e){if(rw(e))return 0;{const t=ex(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let p=null;e.payload.forEach(_=>{const E={payload:_,type:"value",prevKey:p,key:_.key};return p=_.key,n=[...n,E],!1})}return n;case"child_added":if(a>-1){const p=n[a-1];(p&&p.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(p=>p.payload.key!==t.key);case"child_changed":return n.map(p=>p.payload.key===i?e:p);case"child_moved":if(a>-1){const p=n.splice(a,1)[0];return(n=n.slice()).splice(c,0,p),n}return n;default:return n}}function jp(n){return(rw(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function tx(n,e,t){return function ok(n,e,t){return C_(n,"value","once",t).pipe(Dn(r=>{const i=[pt(r)];return e.forEach(a=>i.push(C_(n,a,"on",t))),(0,iv.T)(...i).pipe($r(lk,[]))}),ZE())}(n,e=jp(e),t)}function I_(n,e,t){const r=(e=jp(e)).map(i=>C_(n,i,"on",t));return(0,iv.T)(...r)}function FI(n,e){return function(r,i){return XS(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function iw(n){return function(t){return t?XS(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function sw(n,e){return function(){return C_(n,"value","on",e)}}const uk=new u.OlP("angularfire2.realtimeDatabaseURL"),VI=new u.OlP("angularfire2.database.use-emulator");let Th=(()=>{class n{constructor(t,r,i,a,c,p,_,E,D,S,N,U,H,ue,Ee){this.schedulers=p;const Ke=_,qe=(0,Ar.on)(t,c,r);E&&b_(qe,c,D,N,U,H,S,ue),this.database=(0,Ar.cc)(`${qe.name}.database.${i}`,"AngularFireDatabase",qe.name,()=>{const ct=c.runOutsideAngular(()=>qe.database(i||void 0));return Ke&&ct.useEmulator(...Ke),ct},[Ke])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>JS(this.database,t));let a=i;return r&&(a=r(i)),function LI(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:FI(r,"update"),set:FI(r,"set"),push:i=>r.push(i),remove:iw(r),snapshotChanges:i=>tx(n,i,t).pipe(gn.iC),stateChanges:i=>I_(n,i,t).pipe(gn.iC),auditTrail:i=>function Ih(n,e,t){return function nx(n,e,t){return function OI(n,e){return C_(n,"value","on",e).pipe((0,at.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function ov(...n){const e=(0,zn.jO)(n);return(0,mr.e)((t,r)=>{const i=n.length,a=new Array(i);let c=n.map(()=>!1),p=!1;for(let _=0;_<i;_++)(0,gr.Xf)(n[_]).subscribe(new Ln.Q(r,E=>{a[_]=E,!p&&!c[_]&&(c[_]=!0,(p=c.every($i.y))&&(c=null))},qE.Z));t.subscribe(new Ln.Q(r,_=>{if(p){const E=[_,...a];r.next(e?e(...E):E)}}))})}(e),(0,at.U)(([i,a])=>{const c=i.lastKeyToLoad,p=a.map(_=>_.key);return{actions:a,lastKeyToLoad:c,loadedKeys:p}}),function GE(n){return(0,mr.e)((e,t)=>{let r=!1,i=0;e.subscribe(new Ln.Q(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,at.U)(i=>i.actions))}(n,I_(n,e).pipe($r((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(gn.iC),valueChanges:(i,a)=>tx(n,i,t).pipe((0,at.U)(p=>p.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),gn.iC)}}(a,this)}object(t){return function UI(n,e){return{query:n,snapshotChanges:()=>sw(n,e.schedulers.outsideAngular)().pipe(gn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>sw(n,e.schedulers.outsideAngular)().pipe(gn.iC,(0,at.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>JS(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ar.Dh),u.LFG(Ar.xv,8),u.LFG(uk,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(gn.HU),u.LFG(VI,8),u.LFG(Ch,8),u.LFG(ew,8),u.LFG(tw,8),u.LFG(v_,8),u.LFG(nw,8),u.LFG(w_,8),u.LFG(E_,8),u.LFG(Zc,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),BI=(()=>{class n{constructor(){Bp.Z.registerVersion("angularfire",gn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Th]}),n})();function jI(){return(0,mr.e)((n,e)=>{let t,r=!1;n.subscribe(new Ln.Q(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var it,ck="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ku={},Hp=Hp||{},Ot=ck||self;function ow(){}function aw(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function qc(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Qi="closure_uid_"+(1e9*Math.random()>>>0),ix=0;function lw(n,e,t){return n.call.apply(n.bind,arguments)}function sx(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function hi(n,e,t){return(hi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?lw:sx).apply(null,arguments)}function Dh(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Gr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[i].apply(r,c)}}function Rl(){this.s=this.s,this.o=this.o}var HI={};Rl.prototype.s=!1,Rl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function rx(n){return Object.prototype.hasOwnProperty.call(n,Qi)&&n[Qi]||(n[Qi]=++ix)}(this);delete HI[n]}},Rl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const uw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},$I=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function T_(n){return Array.prototype.concat.apply([],arguments)}function Ys(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function D_(n){return/^[\s\xa0]*$/.test(n)}var Xi,lx=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ji(n,e){return-1!=n.indexOf(e)}function A_(n,e){return n<e?-1:n>e?1:0}e:{var ZI=Ot.navigator;if(ZI){var cw=ZI.userAgent;if(cw){Xi=cw;break e}}Xi=""}function dw(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function ux(n){const e={};for(const t in n)e[t]=n[t];return e}var hw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fw(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<hw.length;a++)t=hw[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function pw(n){return pw[" "](n),n}pw[" "]=ow;var R_,n,qI=Ji(Xi,"Opera"),ja=Ji(Xi,"Trident")||Ji(Xi,"MSIE"),S_=Ji(Xi,"Edge"),x_=S_||ja,GI=Ji(Xi,"Gecko")&&!(Ji(Xi.toLowerCase(),"webkit")&&!Ji(Xi,"Edge"))&&!(Ji(Xi,"Trident")||Ji(Xi,"MSIE"))&&!Ji(Xi,"Edge"),WI=Ji(Xi.toLowerCase(),"webkit")&&!Ji(Xi,"Edge");function gw(){var n=Ot.document;return n?n.documentMode:void 0}e:{var mw="",zI=(n=Xi,GI?/rv:([^\);]+)(\)|;)/.exec(n):S_?/Edge\/([\d\.]+)/.exec(n):ja?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):WI?/WebKit\/(\S+)/.exec(n):qI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(zI&&(mw=zI?zI[1]:""),ja){var KI=gw();if(null!=KI&&KI>parseFloat(mw)){R_=String(KI);break e}}R_=mw}var YI={};var dk=Ot.document&&ja&&(gw()||parseInt(R_,10))||void 0,hk=function(){if(!Ot.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ot.addEventListener("test",ow,e),Ot.removeEventListener("test",ow,e)}catch(t){}return n}();function es(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function M_(n,e){if(es.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(GI){e:{try{pw(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:fk[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&M_.Z.h.call(this)}}es.prototype.h=function(){this.defaultPrevented=!0},Gr(M_,es);var fk={2:"touch",3:"pen",4:"mouse"};M_.prototype.h=function(){M_.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var $p="closure_listenable_"+(1e6*Math.random()|0),k_=0;function hx(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++k_,this.ca=this.fa=!1}function N_(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Zp(n){this.src=n,this.g={},this.h=0}function Ml(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=uw(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(N_(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function P_(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}Zp.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=P_(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new hx(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var qp="closure_lm_"+(1e6*Math.random()|0),Gp={};function JI(n,e,t,r,i){if(r&&r.once)return vw(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)JI(n,e[a],t,r,i);return null}return t=nT(t),n&&n[$p]?n.N(e,t,qc(r)?!!r.capture:!!r,i):O_(n,e,t,!1,r,i)}function O_(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=qc(i)?!!i.capture:!!i,p=eT(n);if(p||(n[qp]=p=new Zp(n)),(t=p.add(e,t,r,c,a)).proxy)return t;if(r=function yw(){var e=pk;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)hk||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(fx(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function vw(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)vw(n,e[a],t,r,i);return null}return t=nT(t),n&&n[$p]?n.O(e,t,qc(r)?!!r.capture:!!r,i):O_(n,e,t,!0,r,i)}function ww(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)ww(n,e[a],t,r,i);else r=qc(r)?!!r.capture:!!r,t=nT(t),n&&n[$p]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=P_(a=n.g[e],t,r,i))&&(N_(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=eT(n))&&(e=n.g[e.toString()],n=-1,e&&(n=P_(e,t,r,i)),(t=-1<n?e[n]:null)&&XI(t))}function XI(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[$p])Ml(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(fx(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=eT(e))?(Ml(t,n),0==t.h&&(t.src=null,e[qp]=null)):N_(n)}}}function fx(n){return n in Gp?Gp[n]:Gp[n]="on"+n}function pk(n,e){if(n.ca)n=!0;else{e=new M_(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&XI(n),n=t.call(r,e)}return n}function eT(n){return(n=n[qp])instanceof Zp?n:null}var tT="__closure_events_fn_"+(1e9*Math.random()>>>0);function nT(n){return"function"==typeof n?n:(n[tT]||(n[tT]=function(e){return n.handleEvent(e)}),n[tT])}function fi(){Rl.call(this),this.i=new Zp(this),this.P=this,this.I=null}function Wr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new es(e,n);else if(e instanceof es)e.target=e.target||n;else{var i=e;fw(e=new es(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=F_(c,r,!0,e)&&i}if(i=F_(c=e.g=n,r,!0,e)&&i,i=F_(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=F_(c=e.g=t[a],r,!1,e)&&i}function F_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.ca&&c.capture==t){var p=c.listener,_=c.ia||c.src;c.fa&&Ml(n.i,c),i=!1!==p.call(_,r)&&i}}return i&&!r.defaultPrevented}Gr(fi,Rl),fi.prototype[$p]=!0,fi.prototype.removeEventListener=function(n,e,t,r){ww(this,n,e,t,r)},fi.prototype.M=function(){if(fi.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)N_(t[r]);delete n.g[e],n.h--}}this.I=null},fi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},fi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Ew=Ot.JSON.stringify;function px(){var n=oT;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Iw,bw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new rT,n=>n.reset());class rT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function iT(n){Ot.setTimeout(()=>{throw n},0)}function Cw(n,e){Iw||function sT(){var n=Ot.Promise.resolve(void 0);Iw=function(){n.then(aT)}}(),Ah||(Iw(),Ah=!0),oT.add(n,e)}var Ah=!1,oT=new class gx{constructor(){this.h=this.g=null}add(e,t){const r=bw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function aT(){for(var n;n=px();){try{n.h.call(n.g)}catch(t){iT(t)}var e=bw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ah=!1}function Gc(n,e){fi.call(this),this.h=n||1,this.g=e||Ot,this.j=hi(this.kb,this),this.l=Date.now()}function Tw(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Dw(n,e,t){if("function"==typeof n)t&&(n=hi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=hi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ot.setTimeout(n,e||0)}function lT(n){n.g=Dw(()=>{n.g=null,n.i&&(n.i=!1,lT(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Gr(Gc,fi),(it=Gc.prototype).da=!1,it.S=null,it.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Wr(this,"tick"),this.da&&(Tw(this),this.start()))}},it.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},it.M=function(){Gc.Z.M.call(this),Tw(this),delete this.g};class mx extends Rl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:lT(this)}M(){super.M(),this.g&&(Ot.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function L_(n){Rl.call(this),this.h=n,this.g={}}Gr(L_,Rl);var uT=[];function cT(n,e,t,r){Array.isArray(t)||(t&&(uT[0]=t.toString()),t=uT);for(var i=0;i<t.length;i++){var a=JI(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function dT(n){dw(n.g,function(e,t){this.g.hasOwnProperty(t)&&XI(e)},n),n.g={}}function U_(){this.g=!0}function Sh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function gk(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return Ew(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}L_.prototype.M=function(){L_.Z.M.call(this),dT(this)},L_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},U_.prototype.Aa=function(){this.g=!1},U_.prototype.info=function(){};var xh={},wx=null;function Aw(){return wx=wx||new fi}function Ex(n){es.call(this,xh.Ma,n)}function Wp(n){const e=Aw();Wr(e,new Ex(e,n))}function bx(n,e){es.call(this,xh.STAT_EVENT,n),this.stat=e}function ws(n){const e=Aw();Wr(e,new bx(e,n))}function Cx(n,e){es.call(this,xh.Na,n),this.size=e}function V_(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ot.setTimeout(function(){n()},e)}xh.Ma="serverreachability",Gr(Ex,es),xh.STAT_EVENT="statevent",Gr(bx,es),xh.Na="timingevent",Gr(Cx,es);var s={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},o={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function l(){}function h(){}l.prototype.h=null;var C,m={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function v(){es.call(this,"d")}function b(){es.call(this,"c")}function x(){}function M(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new L_(this),this.P=$,this.W=new Gc(n=x_?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new L}function L(){this.i=null,this.g="",this.h=!1}Gr(v,es),Gr(b,es),Gr(x,l),x.prototype.g=function(){return new XMLHttpRequest},x.prototype.i=function(){return{}},C=new x;var $=45e3,K={},ge={};function ke(n,e,t){n.K=1,n.v=gT(Wc(e)),n.s=t,n.U=!0,Be(n,null)}function Be(n,e){n.F=Date.now(),Wt(n),n.A=Wc(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),wk(t.h,"t",r),n.C=0,t=n.l.H,n.h=new L,n.g=$k(n.l,t?e:null,!n.s),0<n.O&&(n.L=new mx(hi(n.Ia,n,n.g),n.O)),cT(n.V,n.g,"readystatechange",n.gb),e=n.H?ux(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Wp(1),function _x(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",p=a.split("&"),_=0;_<p.length;_++){var E=p[_].split("=");if(1<E.length){var D=E[0];E=E[1];var S=D.split("_");c=2<=S.length&&"type"==S[1]?c+(D+"=")+E+"&":c+(D+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function nt(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function we(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=_t(n,t),i==ge){4==e&&(n.o=4,ws(14),r=!1),Sh(n.j,n.m,null,"[Incomplete Response]");break}if(i==K){n.o=4,ws(15),Sh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Sh(n.j,n.m,i,null),zp(n,i)}nt(n)&&i!=ge&&i!=K&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ws(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),kx(e),e.L=!0,ws(11))):(Sh(n.j,n.m,t,"[Invalid Chunked Response]"),kl(n),sa(n))}function _t(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?ge:(t=Number(e.substring(t,r)),isNaN(t)?K:(r+=1)+t>e.length?ge:(e=e.substr(r,t),n.C=r+t,e))}function Wt(n){n.Y=Date.now()+n.P,_n(n,n.P)}function _n(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=V_(hi(n.eb,n),e)}function xi(n){n.B&&(Ot.clearTimeout(n.B),n.B=null)}function sa(n){0==n.l.G||n.I||Vk(n.l,n)}function kl(n){xi(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Tw(n.W),dT(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function zp(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Ix(t.i,n)))if(t.I=n.N,!n.J&&Ix(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(E){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=V_(hi(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;ET(t),vT(t)}Mx(t),ws(18)}if(1>=Ck(t.i)&&t.ka){try{t.ka()}catch(E){}t.ka=void 0}}else Jp(t,11)}else if((n.J||t.g==n)&&ET(t),!D_(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let E=i[e];if(t.U=E[0],E=E[1],2==t.G)if("c"==E[0]){t.J=E[1],t.la=E[2];const D=E[3];null!=D&&(t.ma=D,t.h.info("VER="+t.ma));const S=E[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const N=E[5];null!=N&&"number"==typeof N&&0<N&&(t.K=r=1.5*N,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const H=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(H){var a=r.i;!a.g&&(Ji(H,"spdy")||Ji(H,"quic")||Ji(H,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(Tx(a,a.h),a.h=null))}if(r.D){const ue=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;ue&&(r.sa=ue,cr(r.F,r.D,ue))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=Hk(r,r.H?r.la:null,r.W),c.J){Ik(r.i,c);var p=c,_=r.K;_&&p.setTimeout(_),p.B&&(xi(p),Wt(p)),r.g=c}else Lk(r);0<t.l.length&&wT(t)}else"stop"!=E[0]&&"close"!=E[0]||Jp(t,7);else 3==t.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?Jp(t,7):xx(t):"noop"!=E[0]&&t.j&&t.j.wa(E),t.A=0)}Wp(4)}catch(E){}}function Kp(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(aw(n)||"string"==typeof n)$I(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(aw(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function Sw(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(aw(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function Nu(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Nu)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Yp(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Nl(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Nl(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Nl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(it=M.prototype).setTimeout=function(n){this.P=n},it.gb=function(n){n=n.target;const e=this.L;e&&3==zc(n)?e.l():this.Ia(n)},it.Ia=function(n){try{if(n==this.g)e:{const D=zc(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>D)&&(3!=D||x_||this.g&&(this.h.h||this.g.ga()||kk(this.g)))){this.I||4!=D||7==e||Wp(8==e||0>=S?3:2),xi(this);var t=this.g.ba();this.N=t;t:if(nt(this)){var r=kk(this.g);n="";var i=r.length,a=4==zc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){kl(this),sa(this);var c="";break t}this.h.i=new Ot.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function yx(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.X,D,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,_=this.g;if((p=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D_(p)){var E=p;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,ws(12),kl(this),sa(this);break e}Sh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,zp(this,t)}this.U?(we(this,D,c),x_&&this.i&&3==D&&(cT(this.V,this.W,"tick",this.fb),this.W.start())):(Sh(this.j,this.m,c,null),zp(this,c)),4==D&&kl(this),this.i&&!this.I&&(4==D?Vk(this.l,this):(this.i=!1,Wt(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,ws(12)):(this.o=0,ws(13)),kl(this),sa(this)}}}catch(D){}},it.fb=function(){if(this.g){var n=zc(this.g),e=this.g.ga();this.C<e.length&&(xi(this),we(this,n,e),this.i&&4!=n&&Wt(this))}},it.cancel=function(){this.I=!0,kl(this)},it.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function vx(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Wp(3),ws(17)),kl(this),this.o=2,sa(this)):_n(this,this.Y-n)},(it=Nu.prototype).R=function(){Yp(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},it.T=function(){return Yp(this),this.g.concat()},it.get=function(n,e){return Nl(this.h,n)?this.h[n]:e},it.set=function(n,e){Nl(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},it.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var B_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Qp(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Qp){this.g=void 0!==e?e:n.g,hT(this,n.j),this.s=n.s,fT(this,n.i),pT(this,n.m),this.l=n.l,e=n.h;var t=new kw;t.i=e.i,e.g&&(t.g=new Nu(e.g),t.h=e.h),mk(this,t),this.o=n.o}else n&&(t=String(n).match(B_))?(this.g=!!e,hT(this,t[1]||"",!0),this.s=Rw(t[2]||""),fT(this,t[3]||"",!0),pT(this,t[4]),this.l=Rw(t[5]||"",!0),mk(this,t[6]||"",!0),this.o=Rw(t[7]||"")):(this.g=!!e,this.h=new kw(null,this.g))}function Wc(n){return new Qp(n)}function hT(n,e,t){n.j=t?Rw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function fT(n,e,t){n.i=t?Rw(e,!0):e}function pT(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function mk(n,e,t){e instanceof kw?(n.h=e,function g2(n,e){e&&!n.j&&(Rh(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(yk(this,r),wk(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Mw(e,f2)),n.h=new kw(e,n.g))}function cr(n,e,t){n.h.set(e,t)}function gT(n){return cr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Rw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Mw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,c2),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function c2(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Qp.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Mw(e,_k,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Mw(e,_k,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Mw(t,"/"==t.charAt(0)?h2:d2,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Mw(t,p2)),n.join("")};var _k=/[#\/\?@]/g,d2=/[#\?:]/g,h2=/[#\?]/g,f2=/[#\?@]/g,p2=/#/g;function kw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Rh(n){n.g||(n.g=new Nu,n.h=0,n.i&&function xw(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function yk(n,e){Rh(n),e=j_(n,e),Nl(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Nl((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Yp(n)))}function vk(n,e){return Rh(n),e=j_(n,e),Nl(n.g.h,e)}function wk(n,e,t){yk(n,e),0<t.length&&(n.i=null,n.g.set(j_(n,e),Ys(t)),n.h+=t.length)}function j_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Ek(n){this.l=n||_2,n=Ot.PerformanceNavigationTiming?0<(n=Ot.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ot.g&&Ot.g.Ea&&Ot.g.Ea()&&Ot.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(it=kw.prototype).add=function(n,e){Rh(this),this.i=null,n=j_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},it.forEach=function(n,e){Rh(this),this.g.forEach(function(t,r){$I(t,function(i){n.call(e,i,r,this)},this)},this)},it.T=function(){Rh(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},it.R=function(n){Rh(this);var e=[];if("string"==typeof n)vk(this,n)&&(e=T_(e,this.g.get(j_(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=T_(e,n[t])}return e},it.set=function(n,e){return Rh(this),this.i=null,vk(this,n=j_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},it.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},it.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var c=i;""!==r[a]&&(c+="="+encodeURIComponent(String(r[a]))),n.push(c)}}return this.i=n.join("&")};var _2=10;function bk(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Ck(n){return n.h?1:n.g?n.g.size:0}function Ix(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Tx(n,e){n.g?n.g.add(e):n.h=e}function Ik(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Tk(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Ys(n.i)}function Dx(){}function y2(){this.g=new Dx}function v2(n,e,t){const r=t||"";try{Kp(n,function(i,a){let c=i;qc(i)&&(c=Ew(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function mT(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function Nw(n){this.l=n.$b||null,this.j=n.ib||!1}function _T(n,e){fi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Ax,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ek.prototype.cancel=function(){if(this.i=Tk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Dx.prototype.stringify=function(n){return Ot.JSON.stringify(n,void 0)},Dx.prototype.parse=function(n){return Ot.JSON.parse(n,void 0)},Gr(Nw,l),Nw.prototype.g=function(){return new _T(this.l,this.j)},Nw.prototype.i=function(n){return function(){return n}}({}),Gr(_T,fi);var Ax=0;function Dk(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Pw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ow(n)}function Ow(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(it=_T.prototype).open=function(n,e){if(this.readyState!=Ax)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ow(this)},it.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ot).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},it.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pw(this)),this.readyState=Ax},it.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ow(this)),this.g&&(this.readyState=3,Ow(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ot.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Dk(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},it.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Pw(this):Ow(this),3==this.readyState&&Dk(this)}},it.Ua=function(n){this.g&&(this.response=this.responseText=n,Pw(this))},it.Ta=function(n){this.g&&(this.response=n,Pw(this))},it.ha=function(){this.g&&Pw(this)},it.setRequestHeader=function(n,e){this.v.append(n,e)},it.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},it.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(_T.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var E2=Ot.JSON.parse;function zr(n){fi.call(this),this.headers=new Nu,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ak,this.K=this.L=!1}Gr(zr,fi);var Ak="",b2=/^https?$/i,C2=["POST","PUT"];function T2(n){return"content-type"==n.toLowerCase()}function Sk(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,xk(n),yT(n)}function xk(n){n.D||(n.D=!0,Wr(n,"complete"),Wr(n,"error"))}function Rk(n){if(n.h&&void 0!==Hp&&(!n.C[1]||4!=zc(n)||2!=n.ba()))if(n.v&&4==zc(n))Dw(n.Fa,0,n);else if(Wr(n,"readystatechange"),4==zc(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(B_)[1]||null;if(!i&&Ot.self&&Ot.self.location){var a=Ot.self.location.protocol;i=a.substr(0,a.length-1)}r=!b2.test(i?i.toLowerCase():"")}t=r}if(t)Wr(n,"complete"),Wr(n,"success");else{n.m=6;try{var c=2<zc(n)?n.g.statusText:""}catch(_){c=""}n.j=c+" ["+n.ba()+"]",xk(n)}}finally{yT(n)}}}function yT(n,e){if(n.g){Mk(n);const t=n.g,r=n.C[0]?ow:null;n.g=null,n.C=null,e||Wr(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function Mk(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ot.clearTimeout(n.A),n.A=null)}function zc(n){return n.g?n.g.readyState:0}function kk(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Ak:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Sx(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function D2(n){let e="";return dw(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):cr(n,e,t))}function Fw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Nk(n){this.za=0,this.l=[],this.h=new U_,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Fw("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Fw("baseRetryDelayMs",5e3,n),this.$a=Fw("retryDelaySeedMs",1e4,n),this.Ya=Fw("forwardChannelMaxRetries",2,n),this.ra=Fw("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Ek(n&&n.concurrentRequestLimit),this.Ca=new y2,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function xx(n){if(Pk(n),3==n.G){var e=n.V++,t=Wc(n.F);cr(t,"SID",n.J),cr(t,"RID",e),cr(t,"TYPE","terminate"),Lw(n,t),(e=new M(n,n.h,e,void 0)).K=2,e.v=gT(Wc(t)),t=!1,Ot.navigator&&Ot.navigator.sendBeacon&&(t=Ot.navigator.sendBeacon(e.v.toString(),"")),!t&&Ot.Image&&((new Image).src=e.v,t=!0),t||(e.g=$k(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Wt(e)}jk(n)}function vT(n){n.g&&(kx(n),n.g.cancel(),n.g=null)}function Pk(n){vT(n),n.u&&(Ot.clearTimeout(n.u),n.u=null),ET(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ot.clearTimeout(n.m),n.m=null)}function Rx(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&wT(n)}function wT(n){bk(n.i)||n.m||(n.m=!0,Cw(n.Ha,n),n.C=0)}function Ok(n,e){var t;t=e?e.m:n.V++;const r=Wc(n.F);cr(r,"SID",n.J),cr(r,"RID",t),cr(r,"AID",n.U),Lw(n,r),n.o&&n.s&&Sx(r,n.o,n.s),t=new M(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Fk(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Tx(n.i,t),ke(t,r,e)}function Lw(n,e){n.j&&Kp({},function(t,r){cr(e,r,t)})}function Fk(n,e,t){t=Math.min(n.l.length,t);var r=n.j?hi(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].h,c.push("ofs="+a)):a=0:c.push("ofs="+a);let p=!0;for(let _=0;_<t;_++){let E=i[_].h;const D=i[_].g;if(E-=a,0>E)a=Math.max(0,i[_].h-100),p=!1;else try{v2(D,c,"req"+E+"_")}catch(S){r&&r(D)}}if(p){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Lk(n){n.g||n.u||(n.Y=1,Cw(n.Ga,n),n.A=0)}function Mx(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=V_(hi(n.Ga,n),Bk(n,n.A)),n.A++,0))}function kx(n){null!=n.B&&(Ot.clearTimeout(n.B),n.B=null)}function Uk(n){n.g=new M(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Wc(n.oa);cr(e,"RID","rpc"),cr(e,"SID",n.J),cr(e,"CI",n.N?"0":"1"),cr(e,"AID",n.U),Lw(n,e),cr(e,"TYPE","xmlhttp"),n.o&&n.s&&Sx(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=gT(Wc(e)),t.s=null,t.U=!0,Be(t,n)}function ET(n){null!=n.v&&(Ot.clearTimeout(n.v),n.v=null)}function Vk(n,e){var t=null;if(n.g==e){ET(n),kx(n),n.g=null;var r=2}else{if(!Ix(n.i,e))return;t=e.D,Ik(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Wr(r=Aw(),new Cx(r,t,e,i)),wT(n)}else Lk(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function A2(n,e){return!(Ck(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=V_(hi(n.Ha,n,e),Bk(n,n.C)),n.C++,0)))}(n,e)||2==r&&Mx(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Jp(n,5);break;case 4:Jp(n,10);break;case 3:Jp(n,6);break;default:Jp(n,2)}}function Bk(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Jp(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=hi(n.jb,n);t||(t=new Qp("//www.google.com/images/cleardot.gif"),Ot.location&&"http"==Ot.location.protocol||hT(t,"https"),gT(t)),function w2(n,e){const t=new U_;if(Ot.Image){const r=new Image;r.onload=Dh(mT,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Dh(mT,t,r,"TestLoadImage: error",!1,e),r.onabort=Dh(mT,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Dh(mT,t,r,"TestLoadImage: timeout",!1,e),Ot.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ws(2);n.G=0,n.j&&n.j.va(e),jk(n),Pk(n)}function jk(n){n.G=0,n.I=-1,n.j&&((0!=Tk(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Ys(n.l),n.l.length=0),n.j.ua())}function Hk(n,e,t){let r=function l2(n){return n instanceof Qp?Wc(n):new Qp(n,void 0)}(t);if(""!=r.i)e&&fT(r,e+"."+r.i),pT(r,r.m);else{const i=Ot.location;r=function u2(n,e,t,r){var i=new Qp(null,void 0);return n&&hT(i,n),e&&fT(i,e),t&&pT(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&dw(n.aa,function(i,a){cr(r,a,i)}),t=n.sa,(e=n.D)&&t&&cr(r,e,t),cr(r,"VER",n.ma),Lw(n,r),r}function $k(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new zr(t&&n.Ba&&!n.qa?new Nw({ib:!0}):n.qa)).L=n.H,e}function Zk(){}function bT(){if(ja&&!(10<=Number(dk)))throw Error("Environmental error: no available transport.")}function oa(n,e){fi.call(this),this.g=new Nk(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!D_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!D_(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new H_(this)}function qk(n){v.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Gk(){b.call(this),this.status=1}function H_(n){this.g=n}(it=zr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():C.g(),this.C=function d(n){return n.h||(n.h=n.i())}(this.u?this.u:C),this.g.onreadystatechange=hi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void Sk(this,a)}n=t||"";const i=new Nu(this.headers);r&&Kp(r,function(a,c){i.set(c,a)}),r=function ax(n){e:{var e=T2;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Ot.FormData&&n instanceof Ot.FormData,!(0<=uw(C2,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,c){this.g.setRequestHeader(c,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Mk(this),0<this.B&&((this.K=function I2(n){return ja&&function dx(){return function cx(n){var e=YI;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=lx(String(R_)).split("."),t=lx("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",a=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=A_(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||A_(0==i[2].length,0==a[2].length)||A_(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=hi(this.pa,this)):this.A=Dw(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){Sk(this,a)}},it.pa=function(){void 0!==Hp&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Wr(this,"timeout"),this.abort(8))},it.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Wr(this,"complete"),Wr(this,"abort"),yT(this))},it.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),yT(this,!0)),zr.Z.M.call(this)},it.Fa=function(){this.s||(this.F||this.v||this.l?Rk(this):this.cb())},it.cb=function(){Rk(this)},it.ba=function(){try{return 2<zc(this)?this.g.status:-1}catch(n){return-1}},it.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},it.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),E2(e)}},it.Da=function(){return this.m},it.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(it=Nk.prototype).ma=8,it.G=1,it.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},it.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new M(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=ux(a),fw(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Fk(this,i,e),cr(t=Wc(this.F),"RID",n),cr(t,"CVER",22),this.D&&cr(t,"X-HTTP-Session-Id",this.D),Lw(this,t),this.o&&a&&Sx(t,this.o,a),Tx(this.i,i),this.Ra&&cr(t,"TYPE","init"),this.ja?(cr(t,"$req",e),cr(t,"SID","null"),i.$=!0,ke(i,t,null)):ke(i,t,e),this.G=2}}else 3==this.G&&(n?Ok(this,n):0==this.l.length||bk(this.i)||Ok(this))},it.Ga=function(){if(this.u=null,Uk(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=V_(hi(this.bb,this),n)}},it.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ws(10),vT(this),Uk(this))},it.ab=function(){null!=this.v&&(this.v=null,vT(this),Mx(this),ws(19))},it.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ws(2)):(this.h.info("Failed to ping google.com"),ws(1))},(it=Zk.prototype).xa=function(){},it.wa=function(){},it.va=function(){},it.ua=function(){},it.Oa=function(){},bT.prototype.g=function(n,e){return new oa(n,e)},Gr(oa,fi),oa.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Cw(hi(n.hb,n,e))),ws(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Hk(n,null,n.W),wT(n)},oa.prototype.close=function(){xx(this.g)},oa.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Rx(this.g,e)}else this.v?((e={}).__data__=Ew(n),Rx(this.g,e)):Rx(this.g,n)},oa.prototype.M=function(){this.g.j=null,delete this.j,xx(this.g),delete this.g,oa.Z.M.call(this)},Gr(qk,v),Gr(Gk,b),Gr(H_,Zk),H_.prototype.xa=function(){Wr(this.g,"a")},H_.prototype.wa=function(n){Wr(this.g,new qk(n))},H_.prototype.va=function(n){Wr(this.g,new Gk(n))},H_.prototype.ua=function(){Wr(this.g,"b")},bT.prototype.createWebChannel=bT.prototype.g,oa.prototype.send=oa.prototype.u,oa.prototype.open=oa.prototype.m,oa.prototype.close=oa.prototype.close,s.NO_ERROR=0,s.TIMEOUT=8,s.HTTP_ERROR=6,o.COMPLETE="complete",h.EventType=m,m.OPEN="a",m.CLOSE="b",m.ERROR="c",m.MESSAGE="d",fi.prototype.listen=fi.prototype.N,zr.prototype.listenOnce=zr.prototype.O,zr.prototype.getLastError=zr.prototype.La,zr.prototype.getLastErrorCode=zr.prototype.Da,zr.prototype.getStatus=zr.prototype.ba,zr.prototype.getResponseJson=zr.prototype.Qa,zr.prototype.getResponseText=zr.prototype.ga,zr.prototype.send=zr.prototype.ea;var S2=ku.createWebChannelTransport=function(){return new bT},x2=ku.getStatEventTarget=function(){return Aw()},Nx=ku.ErrorCode=s,R2=ku.EventType=o,M2=ku.Event=xh,Wk=ku.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},k2=ku.FetchXmlHttpFactory=Nw,CT=ku.WebChannel=h,N2=ku.XhrIo=zr;const zk="@firebase/firestore";class ts{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ts.UNAUTHENTICATED=new ts(null),ts.GOOGLE_CREDENTIALS=new ts("google-credentials-uid"),ts.FIRST_PARTY=new ts("first-party-uid"),ts.MOCK_USER=new ts("mock-user");let $_="9.6.10";const Mh=new yo.Yd("@firebase/firestore");function Px(){return Mh.logLevel}function Oe(n,...e){if(Mh.logLevel<=yo.in.DEBUG){const t=e.map(Ox);Mh.debug(`Firestore (${$_}): ${n}`,...t)}}function Kr(n,...e){if(Mh.logLevel<=yo.in.ERROR){const t=e.map(Ox);Mh.error(`Firestore (${$_}): ${n}`,...t)}}function Uw(n,...e){if(Mh.logLevel<=yo.in.WARN){const t=e.map(Ox);Mh.warn(`Firestore (${$_}): ${n}`,...t)}}function Ox(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function lt(n="Unexpected state"){const e=`FIRESTORE (${$_}) INTERNAL ASSERTION FAILED: `+n;throw Kr(e),new Error(e)}function Ft(n,e){n||lt()}function Ye(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends P.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ri{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Kk{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class F2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ts.UNAUTHENTICATED))}shutdown(){}}class L2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class U2{constructor(e){this.t=e,this.currentUser=ts.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=E=>this.i!==i?(i=this.i,t(E)):Promise.resolve();let c=new Ri;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ri,e.enqueueRetryable(()=>a(this.currentUser))};const p=()=>{const E=c;e.enqueueRetryable((0,me.Z)(function*(){yield E.promise,yield a(r.currentUser)}))},_=E=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(E=>_(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?_(E):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ri)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ft("string"==typeof r.accessToken),new Kk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ft(null===e||"string"==typeof e),new ts(e)}}class V2{constructor(e,t,r){this.type="FirstParty",this.user=ts.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class B2{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new V2(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ts.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Yk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class j2{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.p;return this.p=a.token,Oe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ft("string"==typeof t.token),this.p=t.token,new Yk(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class aa{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function H2(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}aa.A=-1;class Qk{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=H2(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Xt(n,e){return n<e?-1:n>e?1:0}function Z_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Jk(n){return n+"\0"}class Ur{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ur.fromMillis(Date.now())}static fromDate(e){return Ur.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ur(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Xt(this.nanoseconds,e.nanoseconds):Xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(e){this.timestamp=e}static fromTimestamp(e){return new At(e)}static min(){return new At(new Ur(0,0))}static max(){return new At(new Ur(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Xk(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Xp(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function eN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Vw{constructor(e,t,r){void 0===t?t=0:t>e.length&&lt(),void 0===r?r=e.length-t:r>e.length-t&&lt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Vw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class hn extends Vw{construct(e,t,r){return new hn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new hn(t)}static emptyPath(){return new hn([])}}const $2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mi extends Vw{construct(e,t,r){return new Mi(e,t,r)}static isValidIdentifier(e){return $2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Mi(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new xe(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new xe(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new xe(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===p?(c=!c,i++):"."!==p||c?(r+=p,i++):(a(),i++)}if(a(),c)throw new xe(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mi(t)}static emptyPath(){return new Mi([])}}class q_{constructor(e){this.fields=e,e.sort(Mi.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Z_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class pi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new pi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new pi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pi.EMPTY_BYTE_STRING=new pi("");const q2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kh(n){if(Ft(!!n),"string"==typeof n){let e=0;const t=q2.exec(n);if(Ft(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xr(n.seconds),nanos:xr(n.nanos)}}function xr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function eg(n){return"string"==typeof n?pi.fromBase64String(n):pi.fromUint8Array(n)}function Fx(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function tN(n){const e=n.mapValue.fields.__previous_value__;return Fx(e)?tN(e):e}function Bw(n){const e=kh(n.mapValue.fields.__local_write_time__.timestampValue);return new Ur(e.seconds,e.nanos)}class G2{constructor(e,t,r,i,a,c,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=_}}class Kc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Kc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Kc&&e.projectId===this.projectId&&e.database===this.database}}function tg(n){return null==n}function jw(n){return 0===n&&1/n==-1/0}function nN(n){return"number"==typeof n&&Number.isInteger(n)&&!jw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class He{constructor(e){this.path=e}static fromPath(e){return new He(hn.fromString(e))}static fromName(e){return new He(hn.fromString(e).popFirst(5))}static empty(){return new He(hn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===hn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return hn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new hn(e.slice()))}}const rN={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},iN={nullValue:"NULL_VALUE"};function ng(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Fx(n)?4:lN(n)?9:10:lt()}function Pu(n,e){if(n===e)return!0;const t=ng(n);if(t!==ng(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bw(n).isEqual(Bw(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=kh(r.timestampValue),c=kh(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,eg(n.bytesValue).isEqual(eg(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return xr(r.geoPointValue.latitude)===xr(i.geoPointValue.latitude)&&xr(r.geoPointValue.longitude)===xr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return xr(r.integerValue)===xr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=xr(r.doubleValue),c=xr(i.doubleValue);return a===c?jw(a)===jw(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return Z_(n.arrayValue.values||[],e.arrayValue.values||[],Pu);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(Xk(a)!==Xk(c))return!1;for(const p in a)if(a.hasOwnProperty(p)&&(void 0===c[p]||!Pu(a[p],c[p])))return!1;return!0}(n,e);default:return lt()}var i}function Hw(n,e){return void 0!==(n.values||[]).find(t=>Pu(t,e))}function Nh(n,e){if(n===e)return 0;const t=ng(n),r=ng(e);if(t!==r)return Xt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Xt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=xr(i.integerValue||i.doubleValue),p=xr(a.integerValue||a.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return sN(n.timestampValue,e.timestampValue);case 4:return sN(Bw(n),Bw(e));case 5:return Xt(n.stringValue,e.stringValue);case 6:return function(i,a){const c=eg(i),p=eg(a);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),p=a.split("/");for(let _=0;_<c.length&&_<p.length;_++){const E=Xt(c[_],p[_]);if(0!==E)return E}return Xt(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=Xt(xr(i.latitude),xr(a.latitude));return 0!==c?c:Xt(xr(i.longitude),xr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],p=a.values||[];for(let _=0;_<c.length&&_<p.length;++_){const E=Nh(c[_],p[_]);if(E)return E}return Xt(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const c=i.fields||{},p=Object.keys(c),_=a.fields||{},E=Object.keys(_);p.sort(),E.sort();for(let D=0;D<p.length&&D<E.length;++D){const S=Xt(p[D],E[D]);if(0!==S)return S;const N=Nh(c[p[D]],_[E[D]]);if(0!==N)return N}return Xt(p.length,E.length)}(n.mapValue,e.mapValue);default:throw lt()}}function sN(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Xt(n,e);const t=kh(n),r=kh(e),i=Xt(t.seconds,r.seconds);return 0!==i?i:Xt(t.nanos,r.nanos)}function G_(n){return Lx(n)}function Lx(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=kh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?eg(n.bytesValue).toBase64():"referenceValue"in n?He.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=Lx(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const p of i)c?c=!1:a+=",",a+=`${p}:${Lx(r.fields[p])}`;return a+"}"}(n.mapValue):lt();var e}function W_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ux(n){return!!n&&"integerValue"in n}function $w(n){return!!n&&"arrayValue"in n}function oN(n){return!!n&&"nullValue"in n}function aN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function IT(n){return!!n&&"mapValue"in n}function Zw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Xp(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Zw(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function lN(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function uN(n,e){return void 0===n?e:void 0===e||Nh(n,e)>0?n:e}function cN(n,e){return void 0===n?e:void 0===e||Nh(n,e)<0?n:e}class Es{constructor(e){this.value=e}static empty(){return new Es({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!IT(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zw(t)}setAll(e){let t=Mi.emptyPath(),r={},i=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=p.popLast()}c?r[p.lastSegment()]=Zw(c):i.push(p.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());IT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];IT(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Xp(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Es(Zw(this.value))}}function dN(n){const e=[];return Xp(n.fields,(t,r)=>{const i=new Mi([t]);if(IT(r)){const a=dN(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new q_(e)}class ir{constructor(e,t,r,i,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new ir(e,0,At.min(),At.min(),Es.empty(),0)}static newFoundDocument(e,t,r){return new ir(e,1,t,At.min(),r,0)}static newNoDocument(e,t){return new ir(e,2,t,At.min(),Es.empty(),0)}static newUnknownDocument(e,t){return new ir(e,3,t,At.min(),Es.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Es.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Es.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ir&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ir(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class TT{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Vx(n){return n.fields.find(e=>2===e.kind)}function z_(n){return n.fields.filter(e=>2!==e.kind)}TT.UNKNOWN_ID=-1;class DT{constructor(e,t){this.fieldPath=e,this.kind=t}}class qw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new qw(0,Yc.min())}}function hN(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=At.fromTimestamp(1e9===r?new Ur(t+1,0):new Ur(t,r));return new Yc(i,He.empty(),e)}function W2(n){return new Yc(n.readTime,n.key,-1)}class Yc{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Yc(At.min(),He.empty(),-1)}static max(){return new Yc(At.max(),He.empty(),-1)}}function z2(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=He.comparator(n.documentKey,e.documentKey),0!==t?t:Xt(n.largestBatchId,e.largestBatchId))}class K2{constructor(e,t=null,r=[],i=[],a=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=p,this.P=null}}function fN(n,e=null,t=[],r=[],i=null,a=null,c=null){return new K2(n,e,t,r,i,a,c)}function rg(n){const e=Ye(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+G_(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),tg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>G_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>G_(r)).join(",")),e.P=t}return e.P}function Gw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!iU(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Pu(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!mN(n.startAt,e.startAt)&&mN(n.endAt,e.endAt)}function AT(n){return He.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ST(n,e){return n.filters.filter(t=>t instanceof ns&&t.field.isEqual(e))}class ns extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Q2(e,t,r):"array-contains"===t?new eU(e,r):"in"===t?new tU(e,r):"not-in"===t?new nU(e,r):"array-contains-any"===t?new rU(e,r):new ns(e,t,r)}static V(e,t,r){return"in"===t?new J2(e,r):new X2(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Nh(t,this.value)):null!==t&&ng(this.value)===ng(t)&&this.v(Nh(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Q2 extends ns{constructor(e,t,r){super(e,t,r),this.key=He.fromName(r.referenceValue)}matches(e){const t=He.comparator(e.key,this.key);return this.v(t)}}class J2 extends ns{constructor(e,t){super(e,"in",t),this.keys=pN(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class X2 extends ns{constructor(e,t){super(e,"not-in",t),this.keys=pN(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function pN(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>He.fromName(r.referenceValue))}class eU extends ns{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $w(t)&&Hw(t.arrayValue,this.value)}}class tU extends ns{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Hw(this.value.arrayValue,t)}}class nU extends ns{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Hw(this.value.arrayValue,t)}}class rU extends ns{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$w(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Hw(this.value.arrayValue,r))}}class Ph{constructor(e,t){this.position=e,this.inclusive=t}}class K_{constructor(e,t="asc"){this.field=e,this.dir=t}}function iU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function gN(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?He.comparator(He.fromName(c.referenceValue),t.key):Nh(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function mN(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Pu(n.position[t],e.position[t]))return!1;return!0}class Qc{constructor(e,t=null,r=[],i=[],a=null,c="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=p,this.endAt=_,this.D=null,this.C=null}}function _N(n,e,t,r,i,a,c,p){return new Qc(n,e,t,r,i,a,c,p)}function Y_(n){return new Qc(n)}function xT(n){return!tg(n.limit)&&"F"===n.limitType}function RT(n){return!tg(n.limit)&&"L"===n.limitType}function Bx(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function jx(n){for(const e of n.filters)if(e.S())return e.field;return null}function Hx(n){return null!==n.collectionGroup}function Q_(n){const e=Ye(n);if(null===e.D){e.D=[];const t=jx(e),r=Bx(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new K_(t)),e.D.push(new K_(Mi.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new K_(Mi.keyField(),a))}}}return e.D}function Ha(n){const e=Ye(n);if(!e.C)if("F"===e.limitType)e.C=fN(e.path,e.collectionGroup,Q_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Q_(e))t.push(new K_(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Ph(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new Ph(e.startAt.position,!e.startAt.inclusive):null;e.C=fN(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function yN(n,e,t){return new Qc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ww(n,e){return Gw(Ha(n),Ha(e))&&n.limitType===e.limitType}function vN(n){return`${rg(Ha(n))}|lt:${n.limitType}`}function $x(n){return`Query(target=${function Y2(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${G_(r.value)}`;var r}).join(", ")}]`),tg(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>G_(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>G_(t)).join(",")),`Target(${e})`}(Ha(n))}; limitType=${n.limitType})`}function Zx(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):He.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const p=gN(i,a,c);return i.inclusive?p<=0:p<0}(t.startAt,Q_(t),r)||t.endAt&&!function(i,a,c){const p=gN(i,a,c);return i.inclusive?p>=0:p>0}(t.endAt,Q_(t),r)));var t,r}function wN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function EN(n){return(e,t)=>{let r=!1;for(const i of Q_(n)){const a=sU(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function sU(n,e,t){const r=n.field.isKeyField()?He.comparator(e.key,t.key):function(i,a,c){const p=a.data.field(i),_=c.data.field(i);return null!==p&&null!==_?Nh(p,_):lt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return lt()}}function bN(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jw(e)?"-0":e}}function CN(n){return{integerValue:""+n}}function IN(n,e){return nN(e)?CN(e):bN(n,e)}class MT{constructor(){this._=void 0}}function oU(n,e,t){return n instanceof J_?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof ig?DN(n,e):n instanceof sg?AN(n,e):function(r,i){const a=TN(r,i),c=SN(a)+SN(r.k);return Ux(a)&&Ux(r.k)?CN(c):bN(r.M,c)}(n,e)}function aU(n,e,t){return n instanceof ig?DN(n,e):n instanceof sg?AN(n,e):t}function TN(n,e){return n instanceof X_?Ux(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class J_ extends MT{}class ig extends MT{constructor(e){super(),this.elements=e}}function DN(n,e){const t=xN(e);for(const r of n.elements)t.some(i=>Pu(i,r))||t.push(r);return{arrayValue:{values:t}}}class sg extends MT{constructor(e){super(),this.elements=e}}function AN(n,e){let t=xN(e);for(const r of n.elements)t=t.filter(i=>!Pu(i,r));return{arrayValue:{values:t}}}class X_ extends MT{constructor(e,t){super(),this.M=e,this.k=t}}function SN(n){return xr(n.integerValue||n.doubleValue)}function xN(n){return $w(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class zw{constructor(e,t){this.field=e,this.transform=t}}class uU{constructor(e,t){this.version=e,this.transformResults=t}}class Yr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Yr}static exists(e){return new Yr(void 0,e)}static updateTime(e){return new Yr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kT(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class NT{}function cU(n,e,t){n instanceof Kw?function(r,i,a){const c=r.value.clone(),p=NN(r.fieldTransforms,i,a.transformResults);c.setAll(p),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof og?function(r,i,a){if(!kT(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=NN(r.fieldTransforms,i,a.transformResults),p=i.data;p.setAll(kN(r)),p.setAll(c),i.convertToFoundDocument(a.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function qx(n,e,t){var i;n instanceof Kw?function(r,i,a){if(!kT(r.precondition,i))return;const c=r.value.clone(),p=PN(r.fieldTransforms,a,i);c.setAll(p),i.convertToFoundDocument(MN(i),c).setHasLocalMutations()}(n,e,t):n instanceof og?function(r,i,a){if(!kT(r.precondition,i))return;const c=PN(r.fieldTransforms,a,i),p=i.data;p.setAll(kN(r)),p.setAll(c),i.convertToFoundDocument(MN(i),p).setHasLocalMutations()}(n,e,t):kT(n.precondition,i=e)&&i.convertToNoDocument(At.min())}function dU(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=TN(r.transform,i||null);null!=a&&(null==t&&(t=Es.empty()),t.set(r.field,a))}return t||null}function RN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Z_(t,r,(i,a)=>function lU(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ig&&r instanceof ig||t instanceof sg&&r instanceof sg?Z_(t.elements,r.elements,Pu):t instanceof X_&&r instanceof X_?Pu(t.k,r.k):t instanceof J_&&r instanceof J_);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function MN(n){return n.isFoundDocument()?n.version:At.min()}class Kw extends NT{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class og extends NT{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function kN(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function NN(n,e,t){const r=new Map;Ft(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,p=e.data.field(a.field);r.set(a.field,aU(c,p,t[i]))}return r}function PN(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,oU(a,c,e))}return r}class Yw extends NT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Gx extends NT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class hU{constructor(e){this.count=e}}var Qr,fn;function ON(n){switch(n){default:return lt();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function FN(n){if(void 0===n)return Kr("GRPC error has no .code"),le.UNKNOWN;switch(n){case Qr.OK:return le.OK;case Qr.CANCELLED:return le.CANCELLED;case Qr.UNKNOWN:return le.UNKNOWN;case Qr.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Qr.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Qr.INTERNAL:return le.INTERNAL;case Qr.UNAVAILABLE:return le.UNAVAILABLE;case Qr.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Qr.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Qr.NOT_FOUND:return le.NOT_FOUND;case Qr.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Qr.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Qr.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Qr.ABORTED:return le.ABORTED;case Qr.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Qr.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Qr.DATA_LOSS:return le.DATA_LOSS;default:return lt()}}(fn=Qr||(Qr={}))[fn.OK=0]="OK",fn[fn.CANCELLED=1]="CANCELLED",fn[fn.UNKNOWN=2]="UNKNOWN",fn[fn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fn[fn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fn[fn.NOT_FOUND=5]="NOT_FOUND",fn[fn.ALREADY_EXISTS=6]="ALREADY_EXISTS",fn[fn.PERMISSION_DENIED=7]="PERMISSION_DENIED",fn[fn.UNAUTHENTICATED=16]="UNAUTHENTICATED",fn[fn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fn[fn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fn[fn.ABORTED=10]="ABORTED",fn[fn.OUT_OF_RANGE=11]="OUT_OF_RANGE",fn[fn.UNIMPLEMENTED=12]="UNIMPLEMENTED",fn[fn.INTERNAL=13]="INTERNAL",fn[fn.UNAVAILABLE=14]="UNAVAILABLE",fn[fn.DATA_LOSS=15]="DATA_LOSS";class Oh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Xp(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return eN(this.inner)}size(){return this.innerSize}}class Vr{constructor(e,t){this.comparator=e,this.root=t||rs.EMPTY}insert(e,t){return new Vr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rs.BLACK,null,null))}remove(e){return new Vr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new PT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new PT(this.root,e,this.comparator,!1)}getReverseIterator(){return new PT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new PT(this.root,e,this.comparator,!0)}}class PT{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rs{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:rs.RED,this.left=null!=i?i:rs.EMPTY,this.right=null!=a?a:rs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new rs(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return rs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return rs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}rs.EMPTY=null,rs.RED=!0,rs.BLACK=!1,rs.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new rs(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class sr{constructor(e){this.comparator=e,this.data=new Vr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new LN(this.data.getIterator())}getIteratorFrom(e){return new LN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof sr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new sr(this.comparator);return t.data=e,t}}class LN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ey(n){return n.hasNext()?n.getNext():void 0}const fU=new Vr(He.comparator);function $a(){return fU}const pU=new Vr(He.comparator);function Wx(){return pU}function Qw(){return new Oh(n=>n.toString(),(n,e)=>n.isEqual(e))}const gU=new Vr(He.comparator),mU=new sr(He.comparator);function An(...n){let e=mU;for(const t of n)e=e.add(t);return e}const _U=new sr(Xt);function OT(){return _U}class Jw{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Xw.createSynthesizedTargetChangeForCurrentChange(e,t)),new Jw(At.min(),r,OT(),$a(),An())}}class Xw{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Xw(pi.EMPTY_BYTE_STRING,t,An(),An(),An())}}class FT{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class UN{constructor(e,t){this.targetId=e,this.$=t}}class VN{constructor(e,t,r=pi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class BN{constructor(){this.B=0,this.L=HN(),this.U=pi.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=An(),t=An(),r=An();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:lt()}}),new Xw(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=HN()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class yU{constructor(e){this.nt=e,this.st=new Map,this.it=$a(),this.rt=jN(),this.ot=new sr(Xt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:lt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const a=i.target;if(AT(a))if(0===r){const c=new He(a.path);this.ct(t,c,ir.newNoDocument(c,At.min()))}else Ft(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,c)=>{const p=this.wt(c);if(p){if(a.current&&AT(p.target)){const _=new He(p.target.path);null!==this.it.get(_)||this.It(c,_)||this.ct(c,_,ir.newNoDocument(_,e))}a.j&&(t.set(c,a.H()),a.J())}});let r=An();this.rt.forEach((a,c)=>{let p=!0;c.forEachWhile(_=>{const E=this.wt(_);return!E||2===E.purpose||(p=!1,!1)}),p&&(r=r.add(a))}),this.it.forEach((a,c)=>c.setReadTime(e));const i=new Jw(e,t,this.ot,this.it,r);return this.it=$a(),this.rt=jN(),this.ot=new sr(Xt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new BN,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new sr(Xt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new BN),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function jN(){return new Vr(He.comparator)}function HN(){return new Vr(He.comparator)}const vU={asc:"ASCENDING",desc:"DESCENDING"},wU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class EU{constructor(e,t){this.databaseId=e,this.N=t}}function eE(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $N(n,e){return n.N?e.toBase64():e.toUint8Array()}function bU(n,e){return eE(n,e.toTimestamp())}function ki(n){return Ft(!!n),At.fromTimestamp(function(e){const t=kh(e);return new Ur(t.seconds,t.nanos)}(n))}function zx(n,e){return(t=n,new hn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ZN(n){const e=hn.fromString(n);return Ft(XN(e)),e}function tE(n,e){return zx(n.databaseId,e.path)}function Ou(n,e){const t=ZN(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new He(GN(t))}function Kx(n,e){return zx(n.databaseId,e)}function qN(n){const e=ZN(n);return 4===e.length?hn.emptyPath():GN(e)}function nE(n){return new hn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function GN(n){return Ft(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function WN(n,e,t){return{name:tE(n,e),fields:t.value.mapValue.fields}}function zN(n,e,t){const r=Ou(n,e.name),i=ki(e.updateTime),a=new Es({mapValue:{fields:e.fields}}),c=ir.newFoundDocument(r,i,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function rE(n,e){let t;if(e instanceof Kw)t={update:WN(n,e.key,e.value)};else if(e instanceof Yw)t={delete:tE(n,e.key)};else if(e instanceof og)t={update:WN(n,e.key,e.data),updateMask:MU(e.fieldMask)};else{if(!(e instanceof Gx))return lt();t={verify:tE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof J_)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ig)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof sg)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof X_)return{fieldPath:a.field.canonicalString(),increment:c.k};throw lt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:bU(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:lt()),t;var i}function Yx(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Yr.updateTime(ki(i.updateTime)):void 0!==i.exists?Yr.exists(i.exists):Yr.none():Yr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let p=null;"setToServerValue"in c?(Ft("REQUEST_TIME"===c.setToServerValue),p=new J_):"appendMissingElements"in c?p=new ig(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new sg(c.removeAllFromArray.values||[]):"increment"in c?p=new X_(a,c.increment):lt();const _=Mi.fromServerFormat(c.fieldPath);return new zw(_,p)}(n,i)):[];var i;if(e.update){const i=Ou(n,e.update.name),a=new Es({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new q_((e.updateMask.fieldPaths||[]).map(E=>Mi.fromServerFormat(E)));return new og(i,a,c,t,r)}return new Kw(i,a,t,r)}if(e.delete){const i=Ou(n,e.delete);return new Yw(i,t)}if(e.verify){const i=Ou(n,e.verify);return new Gx(i,t)}return lt()}function KN(n,e){return{documents:[Kx(n,e.path)]}}function YN(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Kx(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Kx(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const E=_.map(D=>function(S){if("=="===S.op){if(aN(S.value))return{unaryFilter:{field:ty(S.field),op:"IS_NAN"}};if(oN(S.value))return{unaryFilter:{field:ty(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(aN(S.value))return{unaryFilter:{field:ty(S.field),op:"IS_NOT_NAN"}};if(oN(S.value))return{unaryFilter:{field:ty(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ty(S.field),op:SU(S.op),value:S.value}}}(D));return 1===E.length?E[0]:{compositeFilter:{op:"AND",filters:E}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(E=>{return{field:ty((D=E).field),direction:AU(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=(E=e.limit,n.N||tg(E)?E:{value:E});var E,p,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function QN(n){let e=qN(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ft(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=JN(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(D=>{return new K_(ny((S=D).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let p=null;t.limit&&(p=function(D){let S;return S="object"==typeof D?D.value:D,tg(S)?null:S}(t.limit));let _=null;var D;t.startAt&&(_=new Ph((D=t.startAt).values||[],!!D.before));let E=null;return t.endAt&&(E=function(D){return new Ph(D.values||[],!D.before)}(t.endAt)),_N(e,i,c,a,p,"F",_,E)}function JN(n){return n?void 0!==n.unaryFilter?[RU(n)]:void 0!==n.fieldFilter?[xU(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>JN(e)).reduce((e,t)=>e.concat(t)):lt():[]}function AU(n){return vU[n]}function SU(n){return wU[n]}function ty(n){return{fieldPath:n.canonicalString()}}function ny(n){return Mi.fromServerFormat(n.fieldPath)}function xU(n){return ns.create(ny(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(n.fieldFilter.op),n.fieldFilter.value)}function RU(n){switch(n.unaryFilter.op){case"IS_NAN":const e=ny(n.unaryFilter.field);return ns.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=ny(n.unaryFilter.field);return ns.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ny(n.unaryFilter.field);return ns.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ny(n.unaryFilter.field);return ns.create(i,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}function MU(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function XN(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ni(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=eP(e)),e=kU(n.get(t),e);return eP(e)}function kU(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function eP(n){return n+"\x01\x01"}function Pl(n){const e=n.length;if(Ft(e>=2),2===e)return Ft("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),hn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&lt(),n.charAt(c+1)){case"\x01":const p=n.substring(a,c);let _;0===i.length?_=p:(i+=p,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:lt()}a=c+2}return new hn(r)}const tP=["userId","batchId"];function LT(n,e){return[n,Ni(e)]}function nP(n,e,t){return[n,Ni(e),t]}const NU={},PU=["prefixPath","collectionGroup","readTime","documentId"],OU=["prefixPath","collectionGroup","documentId"],FU=["collectionGroup","readTime","prefixPath","documentId"],LU=["canonicalId","targetId"],UU=["targetId","path"],VU=["path","targetId"],BU=["collectionId","parent"],jU=["indexId","uid"],HU=["uid","sequenceNumber"],$U=["indexId","uid","arrayValue","directionalValue","documentKey"],ZU=["indexId","uid","documentKey"],qU=["userId","collectionPath","documentId"],GU=["userId","collectionPath","largestBatchId"],WU=["userId","collectionGroup","largestBatchId"],rP=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],zU=[...rP,"documentOverlays"],iP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],KU=[...iP,"indexConfiguration","indexState","indexEntries"],sP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.reject(t)}static resolve(e){return new pe((t,r)=>{t(e)})}static reject(e){return new pe((t,r)=>{r(e)})}static waitFor(e){return new pe((t,r)=>{let i=0,a=0,c=!1;e.forEach(p=>{++i,p.next(()=>{++a,c&&a===i&&t()},_=>r(_))}),c=!0,a===i&&t()})}static or(e){let t=pe.resolve(!1);for(const r of e)t=t.next(i=>i?pe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class UT{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Ri,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new iE(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=Qx(r.target.error);this.At.reject(new iE(e,i))}}static open(e,t,r,i){try{return new UT(t,e.transaction(i,r))}catch(a){throw new iE(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new QU(t)}}class Ol{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Ol.Vt((0,P.z$)())&&Kr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),lg(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,P.hl)())return!1;if(Ol.St())return!0;const e=(0,P.z$)(),t=Ol.Vt(e),r=0<t&&t<10,i=Ol.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,me.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new iE(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const p=c.target.error;i("VersionError"===p.name?new xe(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new xe(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new iE(e,p))},a.onupgradeneeded=c=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,me.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{a.db=yield a.Nt(e);const _=UT.open(a.db,e,c?"readonly":"readwrite",r),E=i(_).next(D=>(_.bt(),D)).catch(D=>(_.abort(D),pe.reject(D))).toPromise();return E.catch(()=>{}),yield _.Rt,E}catch(_){const E="FirebaseError"!==_.name&&p<3;if(Oe("SimpleDb","Transaction failed with error:",_.message,"Retrying:",E),a.close(),!E)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class YU{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return lg(this.Ft.delete())}}class iE extends xe{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ag(n){return"IndexedDbTransactionError"===n.name}class QU{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),lg(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),lg(this.store.add(e))}get(e){return lg(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),lg(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),lg(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Gt(i,(c,p)=>{a.push(p)}).next(()=>a)}{const i=this.store.getAll(r.range);return new pe((a,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{a(p.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new pe((i,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Gt(i,(a,c,p)=>p.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Gt(i,t)}zt(e){const t=this.cursor({});return new pe((r,i)=>{t.onerror=a=>{const c=Qx(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}Gt(e,t){const r=[];return new pe((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void i();const _=new YU(p),E=t(p.primaryKey,p.value,_);if(E instanceof pe){const D=E.catch(S=>(_.done(),pe.reject(S)));r.push(D)}_.isDone?i():null===_.Lt?p.continue():p.continue(_.Lt)}}).next(()=>pe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function lg(n){return new pe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Qx(r.target.error);t(i)}})}let aP=!1;function Qx(n){const e=Ol.Vt((0,P.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return aP||(aP=!0,setTimeout(()=>{throw r},0)),r}}return n}class lP extends oP{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Pi(n,e){const t=Ye(n);return Ol.xt(t.Ht,e)}class Jx{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&cU(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&qx(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&qx(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(At.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),An())}isEqual(e){return this.batchId===e.batchId&&Z_(this.mutations,e.mutations,(t,r)=>RN(t,r))&&Z_(this.baseMutations,e.baseMutations,(t,r)=>RN(t,r))}}class Xx{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ft(e.mutations.length===r.length);let i=gU;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new Xx(e,t,r,i)}}class e1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Fh{constructor(e,t,r,i,a=At.min(),c=At.min(),p=pi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new Fh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Fh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Fh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class uP{constructor(e){this.Jt=e}}function cP(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:VT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:tE(i=n.Jt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:eE(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ug(e.version)};else{if(!e.isUnknownDocument())return lt();r.unknownDocument={path:t.path.toArray(),version:ug(e.version)}}var i,a;return r}function VT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ug(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function cg(n){const e=new Ur(n.seconds,n.nanoseconds);return At.fromTimestamp(e)}function ry(n,e){const t=(e.baseMutations||[]).map(a=>Yx(n.Jt,a));for(let a=0;a<e.mutations.length-1;++a){const c=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(c.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>Yx(n.Jt,a)),i=Ur.fromMillis(e.localWriteTimeMs);return new Jx(e.batchId,i,t,r)}function sE(n){const e=cg(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?cg(n.lastLimboFreeSnapshotVersion):At.min();let r;var i;return void 0!==n.query.documents?(Ft(1===(i=n.query).documents.length),r=Ha(Y_(qN(i.documents[0])))):r=Ha(QN(n.query)),new Fh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,pi.fromBase64String(n.resumeToken))}function dP(n,e){const t=ug(e.snapshotVersion),r=ug(e.lastLimboFreeSnapshotVersion);let i;i=AT(e.target)?KN(n.Jt,e.target):YN(n.Jt,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:rg(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function t1(n){const e=QN({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?yN(e,e.limit,"L"):e}function n1(n,e){return new e1(e.largestBatchId,Yx(n.Jt,e.overlayMutation))}function hP(n,e){const t=e.path.lastSegment();return[n,Ni(e.path.popLast()),t]}class XU{getBundleMetadata(e,t){return fP(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:cg(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return fP(e).put({bundleId:(r=t).id,createTime:ug(ki(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return pP(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:t1(i.bundledQuery),readTime:cg(i.readTime)};var i})}saveNamedQuery(e,t){return pP(e).put({name:(r=t).name,readTime:ug(ki(r.readTime)),bundledQuery:r.bundledQuery});var r}}function fP(n){return Pi(n,"bundles")}function pP(n){return Pi(n,"namedQueries")}class r1{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new r1(e,t.uid||"")}getOverlay(e,t){return oE(e).get(hP(this.userId,t)).next(r=>r?n1(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((a,c)=>{const p=new e1(t,c);i.push(this.Xt(e,p))}),pe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Ni(c.getCollectionPath())));const a=[];return i.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(oE(e).Qt("collectionPathOverlayIndex",p))}),pe.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Qw(),a=Ni(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return oE(e).qt("collectionPathOverlayIndex",c).next(p=>{for(const _ of p){const E=n1(this.M,_);i.set(E.getKey(),E)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Qw();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return oE(e).Wt({index:"collectionGroupOverlayIndex",range:p},(_,E,D)=>{const S=n1(this.M,E);a.size()<i||S.largestBatchId===c?(a.set(S.getKey(),S),c=S.largestBatchId):D.done()}).next(()=>a)}Xt(e,t){return oE(e).put(function(r,i,a){const[c,p,_]=hP(i,a.mutation.key);return{userId:i,collectionPath:p,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:rE(r.Jt,a.mutation)}}(this.M,this.userId,t))}}function oE(n){return Pi(n,"documentOverlays")}class iy{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(xr(e.integerValue));else if("doubleValue"in e){const r=xr(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),jw(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(eg(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?lN(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):lt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),He.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function eV(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function gP(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=eV(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}iy.fe=new iy;class tV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=gP(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=gP(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class nV{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class rV{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class BT{constructor(){this.De=new tV,this.Ce=new nV(this.De),this.xe=new rV(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Lh{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Lh(this.indexId,this.documentKey,this.arrayValue,r)}}function dg(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=mP(n.arrayValue,e.arrayValue),0!==t?t:(t=mP(n.directionalValue,e.directionalValue),0!==t?t:He.comparator(n.documentKey,e.documentKey)))}function mP(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class iV{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Vx(e);if(void 0!==t&&!this.Be(t))return!1;const r=z_(e);let i=0,a=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[a++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(a>=this.Me.length||!this.Ue(this.Me[a++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class sV{constructor(){this.qe=new i1}addToCollectionParentIndex(e,t){return this.qe.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getFieldIndex(e,t){return pe.resolve(null)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}updateCollectionGroup(e,t,r){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class i1{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new sr(hn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new sr(hn.comparator)).toArray()}}const jT=new Uint8Array(0);class oV{constructor(e){this.user=e,this.Ge=new i1,this.Ke=new Oh(t=>rg(t),(t,r)=>Gw(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const a={collectionId:r,parent:Ni(i)};return _P(e).put(a)}return pe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Jk(t),""],!1,!0);return _P(e).qt(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(Pl(c.parent))}return r})}addFieldIndex(e,t){const r=HT(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=HT(e),i=$T(e),a=aE(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=aE(e);let i=!0;const a=new Map;return pe.forEach(this.Qe(t),c=>this.getFieldIndex(e,c).next(p=>{i&&(i=!!p),a.set(c,p)})).next(()=>{if(i){let c=An();return pe.forEach(a,(p,_)=>{var E;Oe("IndexedDbIndexManager",`Using index ${E=p,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(qe=>`${qe.fieldPath}:${qe.kind}`).join(",")}`} to execute ${rg(t)}`);const D=function(qe,ct){const ze=Vx(ct);if(void 0===ze)return null;for(const Nt of ST(qe,ze.fieldPath))switch(Nt.op){case"array-contains-any":return Nt.value.arrayValue.values||[];case"array-contains":return[Nt.value]}return null}(_,p),S=function(qe,ct){const ze=new Map;for(const Nt of z_(ct))for(const Vt of ST(qe,Nt.fieldPath))switch(Vt.op){case"==":case"in":ze.set(Nt.fieldPath.canonicalString(),Vt.value);break;case"not-in":case"!=":return ze.set(Nt.fieldPath.canonicalString(),Vt.value),Array.from(ze.values())}return null}(_,p),N=function(qe,ct){const ze=[];let Nt=!0;for(const So of z_(ct)){let gi,Ll=!0;for(const mi of ST(qe,So.fieldPath)){let yr,Ty=!0;switch(mi.op){case"<":case"<=":yr="nullValue"in(Vt=mi.value)?iN:"booleanValue"in Vt?{booleanValue:!1}:"integerValue"in Vt||"doubleValue"in Vt?{doubleValue:NaN}:"timestampValue"in Vt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in Vt?{stringValue:""}:"bytesValue"in Vt?{bytesValue:""}:"referenceValue"in Vt?W_(Kc.empty(),He.empty()):"geoPointValue"in Vt?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in Vt?{arrayValue:{}}:"mapValue"in Vt?{mapValue:{}}:lt();break;case"==":case"in":case">=":yr=mi.value;break;case">":yr=mi.value,Ty=!1;break;case"!=":case"not-in":yr=iN}uN(gi,yr)===yr&&(gi=yr,Ll=Ty)}if(null!==qe.startAt)for(let mi=0;mi<qe.orderBy.length;++mi)if(qe.orderBy[mi].field.isEqual(So.fieldPath)){const yr=qe.startAt.position[mi];uN(gi,yr)===yr&&(gi=yr,Ll=qe.startAt.inclusive);break}if(void 0===gi)return null;ze.push(gi),Nt&&(Nt=Ll)}var Vt;return new Ph(ze,Nt)}(_,p),U=function(qe,ct){const ze=[];let Nt=!0;for(const So of z_(ct)){let gi,Ll=!0;for(const mi of ST(qe,So.fieldPath)){let yr,Ty=!0;switch(mi.op){case">=":case">":yr="nullValue"in(Vt=mi.value)?{booleanValue:!1}:"booleanValue"in Vt?{doubleValue:NaN}:"integerValue"in Vt||"doubleValue"in Vt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in Vt?{stringValue:""}:"stringValue"in Vt?{bytesValue:""}:"bytesValue"in Vt?W_(Kc.empty(),He.empty()):"referenceValue"in Vt?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in Vt?{arrayValue:{}}:"arrayValue"in Vt?{mapValue:{}}:"mapValue"in Vt?rN:lt(),Ty=!1;break;case"==":case"in":case"<=":yr=mi.value;break;case"<":yr=mi.value,Ty=!1;break;case"!=":case"not-in":yr=rN}cN(gi,yr)===yr&&(gi=yr,Ll=Ty)}if(null!==qe.endAt)for(let mi=0;mi<qe.orderBy.length;++mi)if(qe.orderBy[mi].field.isEqual(So.fieldPath)){const yr=qe.endAt.position[mi];cN(gi,yr)===yr&&(gi=yr,Ll=qe.endAt.inclusive);break}if(void 0===gi)return null;ze.push(gi),Nt&&(Nt=Ll)}var Vt;return new Ph(ze,Nt)}(_,p),H=this.je(p,_,N),ue=this.je(p,_,U),Ee=this.We(p,_,S),Ke=this.ze(p.indexId,D,H,!!N&&N.inclusive,ue,!!U&&U.inclusive,Ee);return pe.forEach(Ke,qe=>r.Kt(qe,t.limit).next(ct=>{ct.forEach(ze=>{c=c.add(new He(Pl(ze.documentKey)))})}))}).next(()=>c)}return pe.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,i,a,c,p){const _=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=a?a.length:1),E=_/(null!=t?t.length:1),D=[];for(let S=0;S<_;++S){const N=t?this.He(t[S/E]):jT,U=r?this.Je(e,N,r[S%E],i):this.Ye(e),H=a?this.Xe(e,N,a[S%E],c):this.Ye(e+1);D.push(...this.createRange(U,H,p.map(ue=>this.Je(e,N,ue,!0))))}return D}Je(e,t,r,i){const a=new Lh(e,He.empty(),t,r);return i?a:a.ke()}Xe(e,t,r,i){const a=new Lh(e,He.empty(),t,r);return i?a.ke():a}Ye(e){return new Lh(e,He.empty(),jT,jT)}getFieldIndex(e,t){const r=new iV(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{const c=a.filter(p=>r.$e(p));return c.sort((p,_)=>_.fields.length-p.fields.length),c.length>0?c[0]:null})}Ze(e,t){const r=new BT;for(const i of z_(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.Ne(i.kind);iy.fe.Zt(a,c)}return r.Se()}He(e){const t=new BT;return iy.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new BT);let a=0;for(const c of z_(e)){const p=r[a++];for(const _ of i)if(this.tn(t,c.fieldPath)&&$w(p))i=this.en(i,c,p);else{const E=_.Ne(c.kind);iy.fe.Zt(p,E)}}return this.nn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const i=[...e],a=[];for(const c of r.arrayValue.values||[])for(const p of i){const _=new BT;_.seed(p.Se()),iy.fe.Zt(c,_.Ne(t.kind)),a.push(_)}return a}tn(e,t){return!!e.filters.find(r=>r instanceof ns&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=HT(e),i=$T(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const c=[];return pe.forEach(a,p=>i.get([p.indexId,this.uid]).next(_=>{c.push(function(E,D){const S=D?new qw(D.sequenceNumber,new Yc(cg(D.readTime),new He(Pl(D.documentKey)),D.largestBatchId)):qw.empty(),N=E.fields.map(([U,H])=>new DT(Mi.fromServerFormat(U),H));return new TT(E.indexId,E.collectionGroup,N,S)}(p,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Xt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=HT(e),a=$T(e);return this.sn(e).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>pe.forEach(p,_=>{return a.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:ug((N=r).readTime),documentKey:Ni(N.documentKey.path),largestBatchId:N.largestBatchId});var N})))}updateIndexEntries(e,t){const r=new Map;return pe.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?pe.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),pe.forEach(p,_=>this.rn(e,i,_).next(E=>{const D=this.on(a,_);return E.isEqual(D)?pe.resolve():this.un(e,a,E,D)}))))})}an(e,t,r){return aE(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:Ni(t.key.path)})}cn(e,t,r){return aE(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,Ni(t.key.path)])}rn(e,t,r){const i=aE(e);let a=new sr(dg);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,Ni(t.path)])},(c,p)=>{a=a.add(new Lh(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>a)}on(e,t){let r=new sr(dg);const i=this.Ze(t,e);if(null==i)return r;const a=Vx(t);if(null!=a){const c=e.data.field(a.fieldPath);if($w(c))for(const p of c.arrayValue.values||[])r=r.add(new Lh(t.indexId,e.key,this.He(p),i))}else r=r.add(new Lh(t.indexId,e.key,jT,i));return r}un(e,t,r,i){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(c,p,_,E,D){const S=c.getIterator(),N=p.getIterator();let U=ey(S),H=ey(N);for(;U||H;){let ue=!1,Ee=!1;if(U&&H){const Ke=_(U,H);Ke<0?Ee=!0:Ke>0&&(ue=!0)}else null!=U?Ee=!0:ue=!0;ue?(E(H),H=ey(N)):Ee?(D(U),U=ey(S)):(U=ey(S),H=ey(N))}}(r,i,dg,c=>{a.push(this.an(e,t,c))},c=>{a.push(this.cn(e,t,c))}),pe.waitFor(a)}sn(e){let t=1;return $T(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>dg(c,p)).filter((c,p,_)=>!p||0!==dg(c,_[p-1]));const i=[];i.push(e);for(const c of r){const p=dg(c,e),_=dg(c,t);if(0===p)i[0]=e.ke();else if(p>0&&_<0)i.push(c),i.push(c.ke());else if(_>0)break}i.push(t);const a=[];for(let c=0;c<i.length;c+=2)a.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,""],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,""]));return a}}function _P(n){return Pi(n,"collectionParents")}function aE(n){return Pi(n,"indexEntries")}function HT(n){return Pi(n,"indexConfiguration")}function $T(n){return Pi(n,"indexState")}const yP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ao{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ao(e,Ao.DEFAULT_COLLECTION_PERCENTILE,Ao.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function vP(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let p=0;const _=r.Wt({range:c},(D,S,N)=>(p++,N.delete()));a.push(_.next(()=>{Ft(1===p)}));const E=[];for(const D of t.mutations){const S=nP(e,D.key.path,t.batchId);a.push(i.delete(S)),E.push(D.key)}return pe.waitFor(a).next(()=>E)}function ZT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw lt();e=n.noDocument}return JSON.stringify(e).length}Ao.DEFAULT_COLLECTION_PERCENTILE=10,Ao.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ao.DEFAULT=new Ao(41943040,Ao.DEFAULT_COLLECTION_PERCENTILE,Ao.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ao.DISABLED=new Ao(-1,0,0);class s1{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.hn={}}static Yt(e,t,r,i){Ft(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new s1(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Uh(e).Wt({index:"userMutationsIndex",range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=sy(e),c=Uh(e);return c.add({}).next(p=>{Ft("number"==typeof p);const _=new Jx(p,t,r,i),E=function(N,U,H){const ue=H.baseMutations.map(Ke=>rE(N.Jt,Ke)),Ee=H.mutations.map(Ke=>rE(N.Jt,Ke));return{userId:U,batchId:H.batchId,localWriteTimeMs:H.localWriteTime.toMillis(),baseMutations:ue,mutations:Ee}}(this.M,this.userId,_),D=[];let S=new sr((N,U)=>Xt(N.canonicalString(),U.canonicalString()));for(const N of i){const U=nP(this.userId,N.key.path,p);S=S.add(N.key.path.popLast()),D.push(c.put(E)),D.push(a.put(U,NU))}return S.forEach(N=>{D.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.hn[p]=_.keys()}),pe.waitFor(D).next(()=>_)})}lookupMutationBatch(e,t){return Uh(e).get(t).next(r=>r?(Ft(r.userId===this.userId),ry(this.M,r)):null)}ln(e,t){return this.hn[t]?pe.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.hn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Uh(e).Wt({index:"userMutationsIndex",range:i},(c,p,_)=>{p.userId===this.userId&&(Ft(p.batchId>=r),a=ry(this.M,p)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Uh(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Uh(e).qt("userMutationsIndex",t).next(r=>r.map(i=>ry(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=LT(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return sy(e).Wt({range:i},(c,p,_)=>{const[E,D,S]=c,N=Pl(D);if(E===this.userId&&t.path.isEqual(N))return Uh(e).get(S).next(U=>{if(!U)throw lt();Ft(U.userId===this.userId),a.push(ry(this.M,U))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new sr(Xt);const i=[];return t.forEach(a=>{const c=LT(this.userId,a.path),p=IDBKeyRange.lowerBound(c),_=sy(e).Wt({range:p},(E,D,S)=>{const[N,U,H]=E,ue=Pl(U);N===this.userId&&a.path.isEqual(ue)?r=r.add(H):S.done()});i.push(_)}),pe.waitFor(i).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=LT(this.userId,r),c=IDBKeyRange.lowerBound(a);let p=new sr(Xt);return sy(e).Wt({range:c},(_,E,D)=>{const[S,N,U]=_,H=Pl(N);S===this.userId&&r.isPrefixOf(H)?H.length===i&&(p=p.add(U)):D.done()}).next(()=>this.fn(e,p))}fn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Uh(e).get(a).next(c=>{if(null===c)throw lt();Ft(c.userId===this.userId),r.push(ry(this.M,c))}))}),pe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return vP(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),pe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return pe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return sy(e).Wt({range:r},(a,c,p)=>{if(a[0]===this.userId){const _=Pl(a[1]);i.push(_)}else p.done()}).next(()=>{Ft(0===i.length)})})}containsKey(e,t){return wP(e,this.userId,t)}_n(e){return EP(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function wP(n,e,t){const r=LT(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return sy(n).Wt({range:a,jt:!0},(p,_,E)=>{const[D,S,N]=p;D===e&&S===i&&(c=!0),E.done()}).next(()=>c)}function Uh(n){return Pi(n,"mutations")}function sy(n){return Pi(n,"documentMutations")}function EP(n){return Pi(n,"mutationQueues")}class hg{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new hg(0)}static gn(){return new hg(-1)}}class aV{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new hg(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>At.fromTimestamp(new Ur(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.pn(e,i)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>oy(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(Ft(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return oy(e).Wt((c,p)=>{const _=sE(p);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>pe.waitFor(a)).next(()=>i)}forEachTarget(e,t){return oy(e).Wt((r,i)=>{const a=sE(i);t(a)})}yn(e){return bP(e).get("targetGlobalKey").next(t=>(Ft(null!==t),t))}pn(e,t){return bP(e).put("targetGlobalKey",t)}In(e,t){return oy(e).put(dP(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=rg(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return oy(e).Wt({range:i,index:"queryTargetsIndex"},(c,p,_)=>{const E=sE(p);Gw(t,E.target)&&(a=E,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Vh(e);return t.forEach(c=>{const p=Ni(c.path);i.push(a.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,c))}),pe.waitFor(i)}removeMatchingKeys(e,t,r){const i=Vh(e);return pe.forEach(t,a=>{const c=Ni(a.path);return pe.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Vh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Vh(e);let a=An();return i.Wt({range:r,jt:!0},(c,p,_)=>{const E=Pl(c[1]),D=new He(E);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=Ni(t.path),i=IDBKeyRange.bound([r],[Jk(r)],!1,!0);let a=0;return Vh(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,p],_,E)=>{0!==c&&(a++,E.done())}).next(()=>a>0)}Et(e,t){return oy(e).get(t).next(r=>r?sE(r):null)}}function oy(n){return Pi(n,"targets")}function bP(n){return Pi(n,"targetGlobal")}function Vh(n){return Pi(n,"targetDocuments")}function fg(n){return o1.apply(this,arguments)}function o1(){return o1=(0,me.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==sP)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),o1.apply(this,arguments)}function CP([n,e],[t,r]){const i=Xt(n,t);return 0===i?Xt(e,r):i}class lV{constructor(e){this.En=e,this.buffer=new sr(CP),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();CP(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class uV{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;Oe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,me.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){ag(i)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield fg(i)}yield t.vn(e)}))}}class cV{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return pe.resolve(aa.A);const r=new lV(t);return this.Sn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Sn.Cn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(yP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yP):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,i,a,c,p,_,E;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,c=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,p=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(E=Date.now(),Px()<=yo.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-D}ms\n\tDetermined least recently used ${i} in `+(p-c)+`ms\n\tRemoved ${a} targets in `+(_-p)+`ms\n\tRemoved ${S} documents in `+(E-_)+`ms\nTotal Duration: ${E-D}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class dV{constructor(e,t){this.db=e,this.garbageCollector=new cV(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,i)=>t(i))}addReference(e,t,r){return qT(e,r)}removeReference(e,t,r){return qT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return qT(e,t)}Mn(e,t){return function(r,i){let a=!1;return EP(r).zt(c=>wP(r,c,i).next(p=>(p&&(a=!0),pe.resolve(!p)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.kn(e,(c,p)=>{if(p<=t){const _=this.Mn(e,c).next(E=>{if(!E)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,At.min()),Vh(e).delete([0,Ni(c.path)])))});i.push(_)}}).next(()=>pe.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return qT(e,t)}kn(e,t){const r=Vh(e);let i,a=aa.A;return r.Wt({index:"documentTargetsIndex"},([c,p],{path:_,sequenceNumber:E})=>{0===c?(a!==aa.A&&t(new He(Pl(i)),a),a=E,i=_):a=aa.A}).next(()=>{a!==aa.A&&t(new He(Pl(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qT(n,e){return Vh(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ni(e.path),sequenceNumber:r}));var r}class IP{constructor(){this.changes=new Oh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ir.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?pe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hV{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return pg(e).put(r)}removeEntry(e,t,r){return pg(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],VT(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=ir.newInvalidDocument(t);return pg(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(lE(t))},(i,a)=>{r=this.Fn(t,a)}).next(()=>r)}$n(e,t){let r={size:0,document:ir.newInvalidDocument(t)};return pg(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(lE(t))},(i,a)=>{r={document:this.Fn(t,a),size:ZT(a)}}).next(()=>r)}getEntries(e,t){let r=$a();return this.Bn(e,t,(i,a)=>{const c=this.Fn(i,a);r=r.insert(i,c)}).next(()=>r)}Ln(e,t){let r=$a(),i=new Vr(He.comparator);return this.Bn(e,t,(a,c)=>{const p=this.Fn(a,c);r=r.insert(a,p),i=i.insert(a,ZT(c))}).next(()=>({documents:r,Un:i}))}Bn(e,t,r){if(t.isEmpty())return pe.resolve();let i=new sr(AP);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(lE(i.first()),lE(i.last())),c=i.getIterator();let p=c.getNext();return pg(e).Wt({index:"documentKeyIndex",range:a},(_,E,D)=>{const S=He.fromSegments([...E.prefixPath,E.collectionGroup,E.documentId]);for(;p&&AP(p,S)<0;)r(p,null),p=c.getNext();p&&p.isEqual(S)&&(r(p,E),p=c.hasNext()?c.getNext():null),p?D.Ut(lE(p)):D.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),VT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pg(e).qt(IDBKeyRange.bound(i,a,!0)).next(c=>{let p=$a();for(const _ of c){const E=this.Fn(He.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);p=p.insert(E.key,E)}return p})}getAllFromCollectionGroup(e,t,r,i){let a=$a();const c=DP(t,r),p=DP(t,Yc.max());return pg(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(_,E,D)=>{const S=this.Fn(He.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);a=a.insert(S.key,S),a.size===i&&D.done()}).next(()=>a)}newChangeBuffer(e){return new fV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return TP(e).get("remoteDocumentGlobalKey").next(t=>(Ft(!!t),t))}On(e,t){return TP(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function JU(n,e){let t;if(e.document)t=zN(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=He.fromSegments(e.noDocument.path),i=cg(e.noDocument.readTime);t=ir.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return lt();{const r=He.fromSegments(e.unknownDocument.path),i=cg(e.unknownDocument.version);t=ir.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Ur(r[0],r[1]);return At.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(At.min()))return r}return ir.newInvalidDocument(e)}}class fV extends IP{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new Oh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new sr((a,c)=>Xt(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const p=this.Gn.get(a);if(t.push(this.qn.removeEntry(e,a,p.readTime)),c.isValidDocument()){const _=cP(this.qn.M,c);i=i.add(a.path.popLast()),r+=ZT(_)-p.size,t.push(this.qn.addEntry(e,a,_))}else if(r-=p.size,this.trackRemovals){const _=cP(this.qn.M,c.convertToNoDocument(At.min()));t.push(this.qn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.qn.updateMetadata(e,r)),pe.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:i})=>(i.forEach((a,c)=>{this.Gn.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function TP(n){return Pi(n,"remoteDocumentGlobal")}function pg(n){return Pi(n,"remoteDocumentsV14")}function lE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function DP(n,e){const t=e.documentKey.path.toArray();return[n,VT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function AP(n,e){const t=n.path.length-e.path.length;return 0!==t?t:He.comparator(n,e)}class pV{constructor(e){this.M=e}kt(e,t,r,i){const a=new UT("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",tP,{unique:!0}),p.createObjectStore("documentMutations"),SP(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=pe.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),SP(e)),c=c.next(()=>function(p){const _=p.store("targetGlobal"),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:At.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",E)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(p,_){return _.store("mutations").qt().next(E=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",tP,{unique:!0});const D=_.store("mutations"),S=E.map(N=>D.put(N));return pe.waitFor(S)})}(e,a))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Kn(a))),r<6&&i>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(a)))),r<7&&i>=7&&(c=c.next(()=>this.jn(a))),r<8&&i>=8&&(c=c.next(()=>this.Wn(e,a))),r<9&&i>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.zn(a))),r<11&&i>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(p){const _=p.createObjectStore("documentOverlays",{keyPath:qU});_.createIndex("collectionPathOverlayIndex",GU,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",WU,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(p){const _=p.createObjectStore("remoteDocumentsV14",{keyPath:PU});_.createIndex("documentKeyIndex",OU),_.createIndex("collectionGroupIndex",FU)}(e)).next(()=>this.Hn(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:jU}).createIndex("sequenceNumberIndex",HU,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:$U}).createIndex("documentKeyIndex",ZU,{unique:!1})}(e)})),c}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=ZT(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>pe.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(p=>pe.forEach(p,_=>{Ft(_.userId===a.userId);const E=ry(this.M,_);return vP(e,a.userId,E).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Wt((c,p)=>{const _=new hn(c),E=[0,Ni(_)];a.push(t.get(E).next(D=>D?pe.resolve():t.put({targetId:0,path:Ni(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>pe.waitFor(a))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:BU});const r=t.store("collectionParents"),i=new i1,a=c=>{if(i.add(c)){const p=c.lastSegment(),_=c.popLast();return r.put({collectionId:p,parent:Ni(_)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,p)=>{const _=new hn(c);return a(_.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,p,_],E)=>{const D=Pl(p);return a(D.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,i)=>{const a=sE(i),c=dP(this.M,a);return t.put(c)})}Hn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((a,c)=>{const p=t.store("remoteDocumentsV14"),_=(E=c,E.document?new He(hn.fromString(E.document.name).popFirst(5)):E.noDocument?He.fromSegments(E.noDocument.path):E.unknownDocument?He.fromSegments(E.unknownDocument.path):lt()).path.toArray();var E;const D={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(p.put(D))}).next(()=>pe.waitFor(i))}}function SP(n){n.createObjectStore("targetDocuments",{keyPath:UU}).createIndex("documentTargetsIndex",VU,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",LU,{unique:!0}),n.createObjectStore("targetGlobal")}const a1="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class l1{constructor(e,t,r,i,a,c,p,_,E,D,S=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=a,this.window=c,this.document=p,this.Yn=E,this.Xn=D,this.Zn=S,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=N=>Promise.resolve(),!l1.vt())throw new xe(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dV(this,i),this.cs=t+"main",this.M=new uP(_),this.hs=new Ol(this.cs,this.Zn,new pV(this.M)),this.ls=new aV(this.referenceDelegate,this.M),this.fs=new hV(this.M),this.ds=new XU,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===D&&Kr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(le.FAILED_PRECONDITION,a1);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new aa(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,me.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>GT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(ag(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return uE(e).get("owner").next(t=>pe.resolve(this.bs(t)))}Ps(e){return GT(e).delete(this.clientId)}Vs(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Pi(r,"clientMetadata");return i.qt().next(a=>{const c=e.Ss(a,18e5),p=a.filter(_=>-1===c.indexOf(_));return pe.forEach(p,_=>i.delete(_.clientId)).next(()=>p)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?pe.resolve(!0):uE(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new xe(le.FAILED_PRECONDITION,a1);return!1}}return!(!this.networkEnabled||!this.inForeground)||GT(e).qt().next(r=>void 0===this.Ss(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new lP(t,aa.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>GT(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return s1.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new oV(e)}getDocumentOverlayCache(e){return r1.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=14===(c=this.Zn)?KU:13===c?iP:12===c?zU:11===c?rP:void lt();var c;let p;return this.hs.runTransaction(e,i,a,_=>(p=new lP(_,this.ts?this.ts.next():aa.A),"readwrite-primary"===t?this.Ts(p).next(E=>!!E||this.Es(p)).next(E=>{if(!E)throw Kr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new xe(le.FAILED_PRECONDITION,sP);return r(p)}).next(E=>this.Rs(p).next(()=>E)):this.Fs(p).next(()=>r(p)))).then(_=>(p.raiseOnCommittedEvent(),_))}Fs(e){return uE(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(le.FAILED_PRECONDITION,a1)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return uE(e).put("owner",t)}static vt(){return Ol.vt()}As(e){const t=uE(e);return t.get("owner").next(r=>this.bs(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):pe.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(Kr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,P.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Kr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){Kr("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function uE(n){return Pi(n,"owner")}function GT(n){return Pi(n,"clientMetadata")}function u1(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class gV{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}Us(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return He.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Qs(e,t.path):Hx(t)?this.js(e,t,r):this.Ws(e,t,r);var i}Qs(e,t){return this.Bs(e,new He(t)).next(r=>{let i=Wx();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}js(e,t,r){const i=t.collectionGroup;let a=Wx();return this.indexManager.getCollectionParents(e,i).next(c=>pe.forEach(c,p=>{const _=(E=t,D=p.child(i),new Qc(D,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,D;return this.Ws(e,_,r).next(E=>{E.forEach((D,S)=>{a=a.insert(D,S)})})}).next(()=>a))}Ws(e,t,r){let i;return this.fs.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const c of a)for(const p of c.mutations){const _=p.key;let E=i.get(_);null==E&&(E=ir.newInvalidDocument(_),i=i.insert(_,E)),qx(p,E,c.localWriteTime),E.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((a,c)=>{Zx(t,c)||(i=i.remove(a))}),i))}}class c1{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=i}static Js(e,t){let r=An(),i=An();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new c1(e,t.fromCache,r,i)}}class xP{Ys(e){this.Xs=e}Ks(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(At.min())?this.Zs(e,t):this.Xs.qs(e,i).next(a=>{const c=this.ti(t,a);return(xT(t)||RT(t))&&this.ei(t.limitType,c,i,r)?this.Zs(e,t):(Px()<=yo.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),$x(t)),this.Xs.Ks(e,t,hN(r,-1)).next(p=>(c.forEach(_=>{p=p.insert(_.key,_)}),p)))});var a}ti(e,t){let r=new sr(EN(e));return t.forEach((i,a)=>{Zx(e,a)&&(r=r.add(a))}),r}ei(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Zs(e,t){return Px()<=yo.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",$x(t)),this.Xs.Ks(e,t,Yc.min())}}class mV{constructor(e,t,r,i){this.persistence=e,this.ni=t,this.M=i,this.si=new Vr(Xt),this.ii=new Oh(a=>rg(a),Gw),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new gV(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function RP(n,e,t,r){return new mV(n,e,t,r)}function MP(n,e){return d1.apply(this,arguments)}function d1(){return d1=(0,me.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.$s.getAllMutationBatches(r).next(a=>(i=a,t.ui(e),t.$s.getAllMutationBatches(r))).next(a=>{const c=[],p=[];let _=An();for(const E of i){c.push(E.batchId);for(const D of E.mutations)_=_.add(D.key)}for(const E of a){p.push(E.batchId);for(const D of E.mutations)_=_.add(D.key)}return t.ai.qs(r,_).next(E=>({ci:E,removedBatchIds:c,addedBatchIds:p}))})})}),d1.apply(this,arguments)}function _V(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.oi.newChangeBuffer({trackRemovals:!0});return function(c,p,_,E){const D=_.batch,S=D.keys();let N=pe.resolve();return S.forEach(U=>{N=N.next(()=>E.getEntry(p,U)).next(H=>{const ue=_.docVersions.get(U);Ft(null!==ue),H.version.compareTo(ue)<0&&(D.applyToRemoteDocument(H,_),H.isValidDocument()&&(H.setReadTime(_.commitVersion),E.addEntry(H)))})}),N.next(()=>c.$s.removeMutationBatch(p,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,i))})}function kP(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function yV(n,e){const t=Ye(n),r=e.snapshotVersion;let i=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.oi.newChangeBuffer({trackRemovals:!0});i=t.si;const p=[];e.targetChanges.forEach((E,D)=>{const S=i.get(D);if(!S)return;p.push(t.ls.removeMatchingKeys(a,E.removedDocuments,D).next(()=>t.ls.addMatchingKeys(a,E.addedDocuments,D)));let N=S.withSequenceNumber(a.currentSequenceNumber);var U,H,ue;e.targetMismatches.has(D)?N=N.withResumeToken(pi.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):E.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(E.resumeToken,r)),i=i.insert(D,N),H=N,ue=E,(0===(U=S).resumeToken.approximateByteSize()||H.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||ue.addedDocuments.size+ue.modifiedDocuments.size+ue.removedDocuments.size>0)&&p.push(t.ls.updateTargetData(a,N))});let _=$a();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(a,E))}),p.push(NP(a,c,e.documentUpdates).next(E=>{_=E})),!r.isEqual(At.min())){const E=t.ls.getLastRemoteSnapshotVersion(a).next(D=>t.ls.setTargetsMetadata(a,a.currentSequenceNumber,r));p.push(E)}return pe.waitFor(p).next(()=>c.apply(a)).next(()=>t.ai.Gs(a,_)).next(()=>_)}).then(a=>(t.si=i,a))}function NP(n,e,t){let r=An();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=$a();return t.forEach((c,p)=>{const _=i.get(c);p.isNoDocument()&&p.version.isEqual(At.min())?(e.removeEntry(c,p.readTime),a=a.insert(c,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(p),a=a.insert(c,p)):Oe("LocalStore","Ignoring outdated watch update for ",c,". Current version:",_.version," Watch version:",p.version)}),a})}function vV(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function ay(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ls.getTargetData(r,e).next(a=>a?(i=a,pe.resolve(i)):t.ls.allocateTargetId(r).next(c=>(i=new Fh(e,c,0,r.currentSequenceNumber),t.ls.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.si.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function ly(n,e,t){return h1.apply(this,arguments)}function h1(){return h1=(0,me.Z)(function*(n,e,t){const r=Ye(n),i=r.si.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!ag(c))throw c;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.si=r.si.remove(e),r.ii.delete(i.target)}),h1.apply(this,arguments)}function WT(n,e,t){const r=Ye(n);let i=At.min(),a=An();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,_,E){const D=Ye(p),S=D.ii.get(E);return void 0!==S?pe.resolve(D.si.get(S)):D.ls.getTargetData(_,E)}(r,c,Ha(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(c,p.targetId).next(_=>{a=_})}).next(()=>r.ni.Ks(c,e,t?i:At.min(),t?a:An())).next(p=>(FP(r,wN(e),p),{documents:p,hi:a})))}function PP(n,e){const t=Ye(n),r=Ye(t.ls),i=t.si.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(c=>c?c.target:null))}function OP(n,e){const t=Ye(n),r=t.ri.get(e)||At.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.oi.getAllFromCollectionGroup(i,e,hN(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(FP(t,e,i),i))}function FP(n,e,t){let r=At.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.ri.set(e,r)}function f1(){return f1=(0,me.Z)(function*(n,e,t,r){const i=Ye(n);let a=An(),c=$a();for(const E of t){const D=e.li(E.metadata.name);E.document&&(a=a.add(D));const S=e.fi(E);S.setReadTime(e.di(E.metadata.readTime)),c=c.insert(D,S)}const p=i.oi.newChangeBuffer({trackRemovals:!0}),_=yield ay(i,(E=r,Ha(Y_(hn.fromString(`__bundle__/docs/${E}`)))));var E;return i.persistence.runTransaction("Apply bundle documents","readwrite",E=>NP(E,p,c).next(D=>(p.apply(E),D)).next(D=>i.ls.removeMatchingKeysForTargetId(E,_.targetId).next(()=>i.ls.addMatchingKeys(E,a,_.targetId)).next(()=>i.ai.Gs(E,D)).next(()=>D)))}),f1.apply(this,arguments)}function EV(n,e){return p1.apply(this,arguments)}function p1(){return p1=(0,me.Z)(function*(n,e,t=An()){const r=yield ay(n,Ha(t1(e.bundledQuery))),i=Ye(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=ki(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.ds.saveNamedQuery(a,e);const p=r.withResumeToken(pi.EMPTY_BYTE_STRING,c);return i.si=i.si.insert(p.targetId,p),i.ls.updateTargetData(a,p).next(()=>i.ls.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.ls.addMatchingKeys(a,t,r.targetId)).next(()=>i.ds.saveNamedQuery(a,e))})}),p1.apply(this,arguments)}class bV{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return pe.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:ki(r.createTime)}),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:t1(r.bundledQuery),readTime:ki(r.readTime)}),pe.resolve();var r}}class CV{constructor(){this.overlays=new Vr(He.comparator),this.mi=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.Xt(e,t,a)}),pe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.mi.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.mi.delete(r)),pe.resolve()}getOverlaysForCollection(e,t,r){const i=Qw(),a=t.length+1,c=new He(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const _=p.getNext().value,E=_.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return pe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Vr((E,D)=>E-D);const c=this.overlays.getIterator();for(;c.hasNext();){const E=c.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>r){let D=a.get(E.largestBatchId);null===D&&(D=Qw(),a=a.insert(E.largestBatchId,D)),D.set(E.getKey(),E)}}const p=Qw(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((E,D)=>p.set(E,D)),!(p.size()>=i)););return pe.resolve(p)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.mi.get(i.largestBatchId).delete(r.key);this.mi.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new e1(t,r));let a=this.mi.get(t);void 0===a&&(a=An(),this.mi.set(t,a)),this.mi.set(t,a.add(r.key))}}class g1{constructor(){this.gi=new sr(Oi.yi),this.pi=new sr(Oi.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new Oi(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new Oi(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new He(new hn([])),r=new Oi(t,e),i=new Oi(t,e+1),a=[];return this.pi.forEachInRange([r,i],c=>{this.Ei(c),a.push(c.key)}),a}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new He(new hn([])),r=new Oi(t,e),i=new Oi(t,e+1);let a=An();return this.pi.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Oi(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Oi{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return He.comparator(e.key,t.key)||Xt(e.Vi,t.Vi)}static Ii(e,t){return Xt(e.Vi,t.Vi)||He.comparator(e.key,t.key)}}class IV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new sr(Oi.yi)}checkEmpty(e){return pe.resolve(0===this.$s.length)}addMutationBatch(e,t,r,i){const a=this.vi;this.vi++;const c=new Jx(a,t,r,i);this.$s.push(c);for(const p of i)this.Si=this.Si.add(new Oi(p.key,a)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return pe.resolve(c)}lookupMutationBatch(e,t){return pe.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ci(t+1),a=i<0?0:i;return pe.resolve(this.$s.length>a?this.$s[a]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return pe.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Oi(t,0),i=new Oi(t,Number.POSITIVE_INFINITY),a=[];return this.Si.forEachInRange([r,i],c=>{const p=this.Di(c.Vi);a.push(p)}),pe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new sr(Xt);return t.forEach(i=>{const a=new Oi(i,0),c=new Oi(i,Number.POSITIVE_INFINITY);this.Si.forEachInRange([a,c],p=>{r=r.add(p.Vi)})}),pe.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;He.isDocumentKey(a)||(a=a.child(""));const c=new Oi(new He(a),0);let p=new sr(Xt);return this.Si.forEachWhile(_=>{const E=_.key.path;return!!r.isPrefixOf(E)&&(E.length===i&&(p=p.add(_.Vi)),!0)},c),pe.resolve(this.xi(p))}xi(e){const t=[];return e.forEach(r=>{const i=this.Di(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ft(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return pe.forEach(t.mutations,i=>{const a=new Oi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new Oi(t,0),i=this.Si.firstAfterOrEqual(r);return pe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return pe.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class TV{constructor(e){this.ki=e,this.docs=new Vr(He.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return pe.resolve(r?r.document.mutableCopy():ir.newInvalidDocument(t))}getEntries(e,t){let r=$a();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():ir.newInvalidDocument(i))}),pe.resolve(r)}getAllFromCollection(e,t,r){let i=$a();const a=new He(t.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:p,value:{document:_}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||z2(W2(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return pe.resolve(i)}getAllFromCollectionGroup(e,t,r,i){lt()}Mi(e,t){return pe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new DV(this)}getSize(e){return pe.resolve(this.size)}}class DV extends IP{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.qn.addEntry(e,i)):this.qn.removeEntry(r)}),pe.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class AV{constructor(e){this.persistence=e,this.Oi=new Oh(t=>rg(t),Gw),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.Fi=0,this.$i=new g1,this.targetCount=0,this.Bi=hg.mn()}forEachTarget(e,t){return this.Oi.forEach((r,i)=>t(i)),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),pe.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new hg(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.In(t),pe.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Oi.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Oi.delete(c),a.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),pe.waitFor(a).next(()=>i)}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return pe.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),pe.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),pe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return pe.resolve(r)}containsKey(e,t){return pe.resolve(this.$i.containsKey(t))}}class SV{constructor(e,t){this.Li={},this.overlays={},this.ts=new aa(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new AV(this),this.indexManager=new sV,this.fs=new TV(r=>this.referenceDelegate.Ui(r)),this.M=new uP(t),this.ds=new bV(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new CV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new IV(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const i=new xV(this.ts.next());return this.referenceDelegate.qi(),r(i).next(a=>this.referenceDelegate.Gi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ki(e,t){return pe.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class xV extends oP{constructor(e){super(),this.currentSequenceNumber=e}}class m1{constructor(e){this.persistence=e,this.Qi=new g1,this.ji=null}static Wi(e){return new m1(e)}get zi(){if(this.ji)return this.ji;throw lt()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),pe.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),pe.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(i=>this.zi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.zi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.zi,r=>{const i=He.fromPath(r);return this.Hi(e,i).next(a=>{a||t.removeEntry(i,At.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return pe.or([()=>pe.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function LP(n,e){return`firestore_clients_${n}_${e}`}function UP(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function _1(n,e){return`firestore_targets_${n}_${e}`}class zT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new xe(i.error.code,i.error.message))),c?new zT(e,t,i.state,a):(Kr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new xe(r.error.code,r.error.message))),a?new cE(e,r.state,i):(Kr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class KT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=OT();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=nN(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new KT(e,a):(Kr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class y1{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new y1(t.clientId,t.onlineState):(Kr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class v1{constructor(){this.activeTargetIds=OT()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class w1{constructor(e,t,r,i,a){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Vr(Xt),this.started=!1,this.ir=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=LP(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new v1),this.ar=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.Os();for(const i of t){if(i===e.tr)continue;const a=e.getItem(LP(e.persistenceKey,i));if(a){const c=KT.Ji(i,a);c&&(e.sr=e.sr.insert(c.clientId,c))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(_1(this.persistenceKey,e));if(r){const i=cE.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_1(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Kr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const i=t.Vr(r.key,r.newValue);if(i)return t.vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(a){let c=aa.A;if(null!=a)try{const p=JSON.parse(a);Ft("number"==typeof p),c=p}catch(p){Kr("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);i!==aa.A&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Nr(a)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new zT(this.currentUser,e,t,r),a=UP(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Yi())}pr(e){const t=UP(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=_1(this.persistenceKey,e),a=new cE(e,t,r);this.setItem(i,a.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return KT.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),i=Number(r[1]);return zT.Ji(new ts(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return cE.Ji(i,t)}wr(e){return y1.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),c=[],p=[];return a.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{a.has(_)||p.push(_)}),this.syncEngine.Or(c,p).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=OT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class VP{constructor(){this.Fr=new v1,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new v1,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class RV{Br(e){}shutdown(){}}class BP{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const MV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class kV{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class NV extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,a){const c=this.oo(e,t);Oe("RestConnection","Sending: ",c,r);const p={};return this.uo(p,i,a),this.ao(e,c,p,r).then(_=>(Oe("RestConnection","Received: ",_),_),_=>{throw Uw("RestConnection",`${e} failed with error: `,_,"url: ",c,"request:",r),_})}co(e,t,r,i,a){return this.ro(e,t,r,i,a)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+$_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}oo(e,t){return`${this.so}/v1/${t}:${MV[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,i){return new Promise((a,c)=>{const p=new N2;p.listenOnce(R2.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Nx.NO_ERROR:const E=p.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(E)),a(E);break;case Nx.TIMEOUT:Oe("Connection",'RPC "'+e+'" timed out'),c(new xe(le.DEADLINE_EXCEEDED,"Request time out"));break;case Nx.HTTP_ERROR:const D=p.getStatus();if(Oe("Connection",'RPC "'+e+'" failed with status:',D,"response text:",p.getResponseText()),D>0){const S=p.getResponseJson().error;if(S&&S.status&&S.message){const N=function(U){const H=U.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(H)>=0?H:le.UNKNOWN}(S.status);c(new xe(N,S.message))}else c(new xe(le.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new xe(le.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{Oe("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);p.send(t,"POST",_,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=S2(),c=x2(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new k2({})),this.uo(p.initMessageHeaders,t,r),(0,P.uI)()||(0,P.b$)()||(0,P.d)()||(0,P.w1)()||(0,P.Mn)()||(0,P.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");Oe("Connection","Creating WebChannel: "+_,p);const E=a.createWebChannel(_,p);let D=!1,S=!1;const N=new kV({jr:H=>{S?Oe("Connection","Not sending because WebChannel is closed:",H):(D||(Oe("Connection","Opening WebChannel transport."),E.open(),D=!0),Oe("Connection","WebChannel sending:",H),E.send(H))},Wr:()=>E.close()}),U=(H,ue,Ee)=>{H.listen(ue,Ke=>{try{Ee(Ke)}catch(qe){setTimeout(()=>{throw qe},0)}})};return U(E,CT.EventType.OPEN,()=>{S||Oe("Connection","WebChannel transport opened.")}),U(E,CT.EventType.CLOSE,()=>{S||(S=!0,Oe("Connection","WebChannel transport closed"),N.eo())}),U(E,CT.EventType.ERROR,H=>{S||(S=!0,Uw("Connection","WebChannel transport errored:",H),N.eo(new xe(le.UNAVAILABLE,"The operation could not be completed")))}),U(E,CT.EventType.MESSAGE,H=>{var ue;if(!S){const Ee=H.data[0];Ft(!!Ee);const Ke=Ee,qe=Ke.error||(null===(ue=Ke[0])||void 0===ue?void 0:ue.error);if(qe){Oe("Connection","WebChannel received error:",qe);const ct=qe.status;let ze=function(Vt){const So=Qr[Vt];if(void 0!==So)return FN(So)}(ct),Nt=qe.message;void 0===ze&&(ze=le.INTERNAL,Nt="Unknown error status: "+ct+" with message "+qe.message),S=!0,N.eo(new xe(ze,Nt)),E.close()}else Oe("Connection","WebChannel received:",Ee),N.no(Ee)}}),U(c,M2.STAT_EVENT,H=>{H.stat===Wk.PROXY?Oe("Connection","Detected buffering proxy"):H.stat===Wk.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.Zr()},0),N}}function jP(){return"undefined"!=typeof window?window:null}function YT(){return"undefined"!=typeof document?document:null}function dE(n){return new EU(n,!0)}class E1{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class HP{constructor(e,t,r,i,a,c,p,_){this.Jn=e,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new E1(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,me.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,me.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(Kr(t.toString()),Kr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new xe(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,me.Z)(function*(){e.state=0,e.start()}))}qo(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PV extends HP{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.M=a}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function IU(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:lt(),i=e.targetChange.targetIds||[],a=function(_,E){return _.N?(Ft(void 0===E||"string"==typeof E),pi.fromBase64String(E||"")):(Ft(void 0===E||E instanceof Uint8Array),pi.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(_){const E=void 0===_.code?le.UNKNOWN:FN(_.code);return new xe(E,_.message||"")}(c);t=new VN(r,i,a,p||null)}else if("documentChange"in e){const r=e.documentChange,i=Ou(n,r.document.name),a=ki(r.document.updateTime),c=new Es({mapValue:{fields:r.document.fields}}),p=ir.newFoundDocument(i,a,c);t=new FT(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=Ou(n,r.document),a=r.readTime?ki(r.readTime):At.min(),c=ir.newNoDocument(i,a);t=new FT([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Ou(n,r.document);t=new FT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return lt();{const r=e.filter,a=new hU(r.count||0);t=new UN(r.targetId,a)}}var _;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return At.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?At.min():a.readTime?ki(a.readTime):At.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=nE(this.M),t.addTarget=function(i,a){let c;const p=a.target;return c=AT(p)?{documents:KN(i,p)}:{query:YN(i,p)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=$N(i,a.resumeToken):a.snapshotVersion.compareTo(At.min())>0&&(c.readTime=eE(i,a.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function DU(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return lt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=nE(this.M),t.removeTarget=e,this.Oo(t)}}class OV extends HP{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.M=a,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Ft(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function TU(n,e){return n&&n.length>0?(Ft(void 0!==e),n.map(t=>function(r,i){let a=ki(r.updateTime?r.updateTime:i);return a.isEqual(At.min())&&(a=ki(i)),new uU(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ki(e.commitTime);return this.listener.Jo(r,t)}return Ft(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=nE(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>rE(this.M,r))};this.Oo(t)}}class FV extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.Zo=!1}tu(){if(this.Zo)throw new xe(le.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ro(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new xe(le.UNKNOWN,i.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new xe(le.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class LV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Kr(t),this.su=!1):Oe("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class UV{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br(p=>{r.enqueueAndForget((0,me.Z)(function*(){var _;Bh(c)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,me.Z)(function*(E){const D=Ye(E);D.lu.add(4),yield uy(D),D._u.set("Unknown"),D.lu.delete(4),yield hE(D)}),function(E){return _.apply(this,arguments)})(c))}))}),this._u=new LV(r,i)}}function hE(n){return b1.apply(this,arguments)}function b1(){return b1=(0,me.Z)(function*(n){if(Bh(n))for(const e of n.fu)yield e(!0)}),b1.apply(this,arguments)}function uy(n){return C1.apply(this,arguments)}function C1(){return C1=(0,me.Z)(function*(n){for(const e of n.fu)yield e(!1)}),C1.apply(this,arguments)}function QT(n,e){const t=Ye(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),D1(t)?T1(t):dy(t).Co()&&I1(t,e))}function fE(n,e){const t=Ye(n),r=dy(t);t.hu.delete(e),r.Co()&&$P(t,e),0===t.hu.size&&(r.Co()?r.ko():Bh(t)&&t._u.set("Unknown"))}function I1(n,e){n.wu.Z(e.targetId),dy(n).Qo(e)}function $P(n,e){n.wu.Z(e),dy(n).jo(e)}function T1(n){n.wu=new yU({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),dy(n).start(),n._u.iu()}function D1(n){return Bh(n)&&!dy(n).Do()&&n.hu.size>0}function Bh(n){return 0===Ye(n).lu.size}function ZP(n){n.wu=void 0}function VV(n){return A1.apply(this,arguments)}function A1(){return A1=(0,me.Z)(function*(n){n.hu.forEach((e,t)=>{I1(n,e)})}),A1.apply(this,arguments)}function BV(n,e){return S1.apply(this,arguments)}function S1(){return S1=(0,me.Z)(function*(n,e){ZP(n),D1(n)?(n._u.uu(e),T1(n)):n._u.set("Unknown")}),S1.apply(this,arguments)}function jV(n,e,t){return x1.apply(this,arguments)}function x1(){return x1=(0,me.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof VN&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(i,a){const c=a.cause;for(const p of a.targetIds)i.hu.has(p)&&(yield i.remoteSyncer.rejectListen(p,c),i.hu.delete(p),i.wu.removeTarget(p))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield JT(n,r)}else if(e instanceof FT?n.wu.ut(e):e instanceof UN?n.wu._t(e):n.wu.ht(e),!t.isEqual(At.min()))try{const r=yield kP(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.wu.yt(a);return c.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const E=i.hu.get(_);E&&i.hu.set(_,E.withResumeToken(p.resumeToken,a))}}),c.targetMismatches.forEach(p=>{const _=i.hu.get(p);if(!_)return;i.hu.set(p,_.withResumeToken(pi.EMPTY_BYTE_STRING,_.snapshotVersion)),$P(i,p);const E=new Fh(_.target,p,1,_.sequenceNumber);I1(i,E)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield JT(n,r)}var r}),x1.apply(this,arguments)}function JT(n,e,t){return R1.apply(this,arguments)}function R1(){return R1=(0,me.Z)(function*(n,e,t){if(!ag(e))throw e;n.lu.add(1),yield uy(n),n._u.set("Offline"),t||(t=()=>kP(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield hE(n)}))}),R1.apply(this,arguments)}function qP(n,e){return e().catch(t=>JT(n,t,e))}function cy(n){return M1.apply(this,arguments)}function M1(){return M1=(0,me.Z)(function*(n){const e=Ye(n),t=jh(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;HV(e);)try{const i=yield vV(e.localStore,r);if(null===i){0===e.cu.length&&t.ko();break}r=i.batchId,$V(e,i)}catch(i){yield JT(e,i)}GP(e)&&WP(e)}),M1.apply(this,arguments)}function HV(n){return Bh(n)&&n.cu.length<10}function $V(n,e){n.cu.push(e);const t=jh(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function GP(n){return Bh(n)&&!jh(n).Do()&&n.cu.length>0}function WP(n){jh(n).start()}function ZV(n){return k1.apply(this,arguments)}function k1(){return k1=(0,me.Z)(function*(n){jh(n).Xo()}),k1.apply(this,arguments)}function qV(n){return N1.apply(this,arguments)}function N1(){return N1=(0,me.Z)(function*(n){const e=jh(n);for(const t of n.cu)e.Ho(t.mutations)}),N1.apply(this,arguments)}function GV(n,e,t){return P1.apply(this,arguments)}function P1(){return P1=(0,me.Z)(function*(n,e,t){const r=n.cu.shift(),i=Xx.from(r,e,t);yield qP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield cy(n)}),P1.apply(this,arguments)}function WV(n,e){return O1.apply(this,arguments)}function O1(){return O1=(0,me.Z)(function*(n,e){var t;e&&jh(n).zo&&(yield(t=(0,me.Z)(function*(r,i){if(ON(a=i.code)&&a!==le.ABORTED){const c=r.cu.shift();jh(r).No(),yield qP(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield cy(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),GP(n)&&WP(n)}),O1.apply(this,arguments)}function zP(n,e){return F1.apply(this,arguments)}function F1(){return F1=(0,me.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=Bh(t);t.lu.add(3),yield uy(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield hE(t)}),F1.apply(this,arguments)}function L1(n,e){return U1.apply(this,arguments)}function U1(){return U1=(0,me.Z)(function*(n,e){const t=Ye(n);e?(t.lu.delete(2),yield hE(t)):e||(t.lu.add(2),yield uy(t),t._u.set("Unknown"))}),U1.apply(this,arguments)}function dy(n){return n.mu||(n.mu=function(e,t,r){const i=Ye(e);return i.tu(),new PV(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:VV.bind(null,n),Jr:BV.bind(null,n),Ko:jV.bind(null,n)}),n.fu.push(function(){var e=(0,me.Z)(function*(t){t?(n.mu.No(),D1(n)?T1(n):n._u.set("Unknown")):(yield n.mu.stop(),ZP(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function jh(n){return n.gu||(n.gu=function(e,t,r){const i=Ye(e);return i.tu(),new OV(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:ZV.bind(null,n),Jr:WV.bind(null,n),Yo:qV.bind(null,n),Jo:GV.bind(null,n)}),n.fu.push(function(){var e=(0,me.Z)(function*(t){t?(n.gu.No(),yield cy(n)):(yield n.gu.stop(),n.cu.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class V1{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,p=new V1(e,t,c,i,a);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hy(n,e){if(Kr("AsyncQueue",`${e}: ${n}`),ag(n))return new xe(le.UNAVAILABLE,`${e}: ${n}`);throw n}class fy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||He.comparator(t.key,r.key):(t,r)=>He.comparator(t.key,r.key),this.keyedMap=Wx(),this.sortedSet=new Vr(this.comparator)}static emptySet(e){return new fy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new fy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class KP{constructor(){this.yu=new Vr(He.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):lt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class py{constructor(e,t,r,i,a,c,p,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new py(e,t,fy.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ww(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class zV{constructor(){this.Iu=void 0,this.listeners=[]}}class KV{constructor(){this.queries=new Oh(e=>vN(e),Ww),this.onlineState="Unknown",this.Tu=new Set}}function B1(n,e){return j1.apply(this,arguments)}function j1(){return j1=(0,me.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new zV),i)try{a.Iu=yield t.onListen(r)}catch(c){const p=hy(c,`Initialization of query '${$x(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,a),a.listeners.push(e),e.Eu(t.onlineState),a.Iu&&e.Au(a.Iu)&&Z1(t)}),j1.apply(this,arguments)}function H1(n,e){return $1.apply(this,arguments)}function $1(){return $1=(0,me.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),$1.apply(this,arguments)}function YV(n,e){const t=Ye(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const p of c.listeners)p.Au(i)&&(r=!0);c.Iu=i}}r&&Z1(t)}function QV(n,e,t){const r=Ye(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function Z1(n){n.Tu.forEach(e=>{e.next()})}class q1{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new py(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=py.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class JV{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class YP{constructor(e){this.M=e}li(e){return Ou(this.M,e)}fi(e){return e.metadata.exists?zN(this.M,e.document,!1):ir.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return ki(e)}}class XV{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=QP(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=hn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new YP(this.M);for(const i of e)if(i.metadata.queries){const a=r.li(i.metadata.name);for(const c of i.metadata.queries){const p=(t.get(c)||An()).add(a);t.set(c,p)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function wV(n,e,t,r){return f1.apply(this,arguments)}(e.localStore,new YP(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield EV(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function QP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class JP{constructor(e){this.key=e}}class XP{constructor(e){this.key=e}}class eO{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=An(),this.mutatedKeys=An(),this.Lu=EN(e),this.Uu=new fy(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new KP,i=t?t.Uu:this.Uu;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,p=!1;const _=xT(this.query)&&i.size===this.query.limit?i.last():null,E=RT(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const N=i.get(D),U=Zx(this.query,S)?S:null,H=!!N&&this.mutatedKeys.has(N.key),ue=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let Ee=!1;N&&U?N.data.isEqual(U.data)?H!==ue&&(r.track({type:3,doc:U}),Ee=!0):this.Qu(N,U)||(r.track({type:2,doc:U}),Ee=!0,(_&&this.Lu(U,_)>0||E&&this.Lu(U,E)<0)&&(p=!0)):!N&&U?(r.track({type:0,doc:U}),Ee=!0):N&&!U&&(r.track({type:1,doc:N}),Ee=!0,(_||E)&&(p=!0)),Ee&&(U?(c=c.add(U),a=ue?a.add(D):a.delete(D)):(c=c.delete(D),a=a.delete(D)))}),xT(this.query)||RT(this.query))for(;c.size>this.query.limit;){const D=xT(this.query)?c.last():c.first();c=c.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{Uu:c,Ku:r,ei:p,mutatedKeys:a}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const a=e.Ku.pu();a.sort((E,D)=>function(S,N){const U=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return U(S)-U(N)}(E.type,D.type)||this.Lu(E.doc,D.doc)),this.ju(r);const c=t?this.Wu():[],p=0===this.Bu.size&&this.current?1:0,_=p!==this.$u;return this.$u=p,0!==a.length||_?{snapshot:new py(this.query,e.Uu,i,a,e.mutatedKeys,0===p,_,!1),zu:c}:{zu:c}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new KP,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=An(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new XP(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new JP(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=An();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return py.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class eB{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class tB{constructor(e){this.key=e,this.Xu=!1}}class nB{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Zu={},this.ta=new Oh(p=>vN(p),Ww),this.ea=new Map,this.na=new Set,this.sa=new Vr(He.comparator),this.ia=new Map,this.ra=new g1,this.oa={},this.ua=new Map,this.aa=hg.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function rB(n,e){return G1.apply(this,arguments)}function G1(){return G1=(0,me.Z)(function*(n,e){const t=gR(n);let r,i;const a=t.ta.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Yu();else{const c=yield ay(t.localStore,Ha(e));t.isPrimaryClient&&QT(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield W1(t,e,r,"current"===p)}return i}),G1.apply(this,arguments)}function W1(n,e,t,r){return z1.apply(this,arguments)}function z1(){return z1=(0,me.Z)(function*(n,e,t,r){n.ha=(D,S,N)=>{return(U=(0,me.Z)(function*(H,ue,Ee,Ke){let qe=ue.view.Gu(Ee);qe.ei&&(qe=yield WT(H.localStore,ue.query,!1).then(({documents:Nt})=>ue.view.Gu(Nt,qe)));const ct=Ke&&Ke.targetChanges.get(ue.targetId),ze=ue.view.applyChanges(qe,H.isPrimaryClient,ct);return iR(H,ue.targetId,ze.zu),ze.snapshot}),function(H,ue,Ee,Ke){return U.apply(this,arguments)})(n,D,S,N);var U};const i=yield WT(n.localStore,e,!0),a=new eO(e,i.hi),c=a.Gu(i.documents),p=Xw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=a.applyChanges(c,n.isPrimaryClient,p);iR(n,t,_.zu);const E=new eB(e,t,a);return n.ta.set(e,E),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),_.snapshot}),z1.apply(this,arguments)}function iB(n,e){return K1.apply(this,arguments)}function K1(){return K1=(0,me.Z)(function*(n,e){const t=Ye(n),r=t.ta.get(e),i=t.ea.get(r.targetId);if(i.length>1)return t.ea.set(r.targetId,i.filter(a=>!Ww(a,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ly(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),fE(t.remoteStore,r.targetId),gy(t,r.targetId)}).catch(fg))):(gy(t,r.targetId),yield ly(t.localStore,r.targetId,!0))}),K1.apply(this,arguments)}function Y1(){return Y1=(0,me.Z)(function*(n,e,t){const r=mR(n);try{const i=yield function(a,c){const p=Ye(a),_=Ur.now(),E=c.reduce((S,N)=>S.add(N.key),An());let D;return p.persistence.runTransaction("Locally write mutations","readwrite",S=>p.ai.qs(S,E).next(N=>{D=N;const U=[];for(const H of c){const ue=dU(H,D.get(H.key));null!=ue&&U.push(new og(H.key,ue,dN(ue.value.mapValue),Yr.exists(!0)))}return p.$s.addMutationBatch(S,_,U,c)})).then(S=>(S.applyToLocalDocumentSet(D),{batchId:S.batchId,changes:D}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,p){let _=a.oa[a.currentUser.toKey()];_||(_=new Vr(Xt)),_=_.insert(c,p),a.oa[a.currentUser.toKey()]=_}(r,i.batchId,t),yield Jc(r,i.changes),yield cy(r.remoteStore)}catch(i){const a=hy(i,"Failed to persist write");t.reject(a)}}),Y1.apply(this,arguments)}function tO(n,e){return Q1.apply(this,arguments)}function Q1(){return Q1=(0,me.Z)(function*(n,e){const t=Ye(n);try{const r=yield yV(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.ia.get(a);c&&(Ft(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Xu=!0:i.modifiedDocuments.size>0?Ft(c.Xu):i.removedDocuments.size>0&&(Ft(c.Xu),c.Xu=!1))}),yield Jc(t,r,e)}catch(r){yield fg(r)}}),Q1.apply(this,arguments)}function nO(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ta.forEach((a,c)=>{const p=c.view.Eu(e);p.snapshot&&i.push(p.snapshot)}),function(a,c){const p=Ye(a);p.onlineState=c;let _=!1;p.queries.forEach((E,D)=>{for(const S of D.listeners)S.Eu(c)&&(_=!0)}),_&&Z1(p)}(r.eventManager,e),i.length&&r.Zu.Ko(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function oB(n,e,t){return J1.apply(this,arguments)}function J1(){return J1=(0,me.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ia.get(e),a=i&&i.key;if(a){let c=new Vr(He.comparator);c=c.insert(a,ir.newNoDocument(a,At.min()));const p=An().add(a),_=new Jw(At.min(),new Map,new sr(Xt),c,p);yield tO(r,_),r.sa=r.sa.remove(a),r.ia.delete(e),sR(r)}else yield ly(r.localStore,e,!1).then(()=>gy(r,e,t)).catch(fg)}),J1.apply(this,arguments)}function aB(n,e){return X1.apply(this,arguments)}function X1(){return X1=(0,me.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const i=yield _V(t.localStore,e);rR(t,r,null),nR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Jc(t,i)}catch(i){yield fg(i)}}),X1.apply(this,arguments)}function lB(n,e,t){return eR.apply(this,arguments)}function eR(){return eR=(0,me.Z)(function*(n,e,t){const r=Ye(n);try{const i=yield function(a,c){const p=Ye(a);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let E;return p.$s.lookupMutationBatch(_,c).next(D=>(Ft(null!==D),E=D.keys(),p.$s.removeMutationBatch(_,D))).next(()=>p.$s.performConsistencyCheck(_)).next(()=>p.ai.qs(_,E))})}(r.localStore,e);rR(r,e,t),nR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Jc(r,i)}catch(i){yield fg(i)}}),eR.apply(this,arguments)}function tR(){return tR=(0,me.Z)(function*(n,e){const t=Ye(n);Bh(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=Ye(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.$s.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ua.get(r)||[];i.push(e),t.ua.set(r,i)}catch(r){const i=hy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),tR.apply(this,arguments)}function nR(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function rR(n,e,t){const r=Ye(n);let i=r.oa[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.oa[r.currentUser.toKey()]=i}}function gy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||rO(n,r)})}function rO(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(fE(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),sR(n))}function iR(n,e,t){for(const r of t)r instanceof JP?(n.ra.addReference(r.key,e),cB(n,r)):r instanceof XP?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||rO(n,r.key)):lt()}function cB(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.na.add(r),sR(n))}function sR(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new He(hn.fromString(e)),r=n.aa.next();n.ia.set(r,new tB(t)),n.sa=n.sa.insert(t,r),QT(n.remoteStore,new Fh(Ha(Y_(t.path)),r,2,aa.A))}}function Jc(n,e,t){return oR.apply(this,arguments)}function oR(){return oR=(0,me.Z)(function*(n,e,t){const r=Ye(n),i=[],a=[],c=[];var p;r.ta.isEmpty()||(r.ta.forEach((p,_)=>{c.push(r.ha(_,e,t).then(E=>{if(E){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,E.fromCache?"not-current":"current"),i.push(E);const D=c1.Js(_.targetId,E);a.push(D)}}))}),yield Promise.all(c),r.Zu.Ko(i),yield(p=(0,me.Z)(function*(_,E){const D=Ye(_);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>pe.forEach(E,N=>pe.forEach(N.zs,U=>D.persistence.referenceDelegate.addReference(S,N.targetId,U)).next(()=>pe.forEach(N.Hs,U=>D.persistence.referenceDelegate.removeReference(S,N.targetId,U)))))}catch(S){if(!ag(S))throw S;Oe("LocalStore","Failed to update sequence numbers: "+S)}for(const S of E){const N=S.targetId;if(!S.fromCache){const U=D.si.get(N),ue=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);D.si=D.si.insert(N,ue)}}}),function(_,E){return p.apply(this,arguments)})(r.localStore,a))}),oR.apply(this,arguments)}function dB(n,e){return aR.apply(this,arguments)}function aR(){return aR=(0,me.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield MP(t.localStore,e);t.currentUser=e,(i=t).ua.forEach(c=>{c.forEach(p=>{p.reject(new xe(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Jc(t,r.ci)}var i}),aR.apply(this,arguments)}function hB(n,e){const t=Ye(n),r=t.ia.get(e);if(r&&r.Xu)return An().add(r.key);{let i=An();const a=t.ea.get(e);if(!a)return i;for(const c of a){const p=t.ta.get(c);i=i.unionWith(p.view.qu)}return i}}function fB(n,e){return lR.apply(this,arguments)}function lR(){return lR=(0,me.Z)(function*(n,e){const t=Ye(n),r=yield WT(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&iR(t,e.targetId,i.zu),i}),lR.apply(this,arguments)}function pB(n,e){return uR.apply(this,arguments)}function uR(){return uR=(0,me.Z)(function*(n,e){const t=Ye(n);return OP(t.localStore,e).then(r=>Jc(t,r))}),uR.apply(this,arguments)}function gB(n,e,t,r){return cR.apply(this,arguments)}function cR(){return cR=(0,me.Z)(function*(n,e,t,r){const i=Ye(n),a=yield function(c,p){const _=Ye(c),E=Ye(_.$s);return _.persistence.runTransaction("Lookup mutation documents","readonly",D=>E.ln(D,p).next(S=>S?_.ai.qs(D,S):pe.resolve(null)))}(i.localStore,e);var p;null!==a?("pending"===t?yield cy(i.remoteStore):"acknowledged"===t||"rejected"===t?(rR(i,e,r||null),nR(i,e),p=e,Ye(Ye(i.localStore).$s).dn(p)):lt(),yield Jc(i,a)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),cR.apply(this,arguments)}function dR(){return dR=(0,me.Z)(function*(n,e){const t=Ye(n);if(gR(t),mR(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield iO(t,r.toArray());t.ca=!0,yield L1(t.remoteStore,!0);for(const a of i)QT(t.remoteStore,a)}else if(!1===e&&!1!==t.ca){const r=[];let i=Promise.resolve();t.ea.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(gy(t,c),ly(t.localStore,c,!0))),fE(t.remoteStore,c)}),yield i,yield iO(t,r),function(a){const c=Ye(a);c.ia.forEach((p,_)=>{fE(c.remoteStore,_)}),c.ra.bi(),c.ia=new Map,c.sa=new Vr(He.comparator)}(t),t.ca=!1,yield L1(t.remoteStore,!1)}}),dR.apply(this,arguments)}function iO(n,e,t){return hR.apply(this,arguments)}function hR(){return hR=(0,me.Z)(function*(n,e,t){const r=Ye(n),i=[],a=[];for(const c of e){let p;const _=r.ea.get(c);if(_&&0!==_.length){p=yield ay(r.localStore,Ha(_[0]));for(const E of _){const D=r.ta.get(E),S=yield fB(r,D);S.snapshot&&a.push(S.snapshot)}}else{const E=yield PP(r.localStore,c);p=yield ay(r.localStore,E),yield W1(r,sO(E),c,!1)}i.push(p)}return r.Zu.Ko(a),i}),hR.apply(this,arguments)}function sO(n){return _N(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function _B(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).Os()}function yB(n,e,t,r){return fR.apply(this,arguments)}function fR(){return fR=(0,me.Z)(function*(n,e,t,r){const i=Ye(n);if(i.ca)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const a=i.ea.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=yield OP(i.localStore,wN(a[0])),p=Jw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Jc(i,c,p);break}case"rejected":yield ly(i.localStore,e,!0),gy(i,e,r);break;default:lt()}}),fR.apply(this,arguments)}function vB(n,e,t){return pR.apply(this,arguments)}function pR(){return pR=(0,me.Z)(function*(n,e,t){const r=gR(n);if(r.ca){for(const i of e){if(r.ea.has(i)){Oe("SyncEngine","Adding an already active target "+i);continue}const a=yield PP(r.localStore,i),c=yield ay(r.localStore,a);yield W1(r,sO(a),c.targetId,!1),QT(r.remoteStore,c)}for(const i of t)r.ea.has(i)&&(yield ly(r.localStore,i,!1).then(()=>{fE(r.remoteStore,i),gy(r,i)}).catch(fg))}}),pR.apply(this,arguments)}function gR(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oB.bind(null,e),e.Zu.Ko=YV.bind(null,e.eventManager),e.Zu.la=QV.bind(null,e.eventManager),e}function mR(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lB.bind(null,e),e}class oO{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.M=dE(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return RP(this.persistence,new xP,e.initialUser,this.M)}_a(e){return new SV(m1.Wi,this.M)}da(e){return new VP}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class aO extends oO{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield mR(r.ga.syncEngine),yield cy(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return RP(this.persistence,new xP,e.initialUser,this.M)}wa(e){return new uV(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=u1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ao.withCacheSize(this.cacheSizeBytes):Ao.DEFAULT;return new l1(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,jP(),YT(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new VP}}class EB extends aO{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const i=r.ga.syncEngine;r.sharedClientState instanceof w1&&(r.sharedClientState.syncEngine={kr:gB.bind(null,i),Mr:yB.bind(null,i),Or:vB.bind(null,i),Os:_B.bind(null,i),Nr:pB.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var a=(0,me.Z)(function*(c){yield function mB(n,e){return dR.apply(this,arguments)}(r.ga.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}da(e){const t=jP();if(!w1.vt(t))throw new xe(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=u1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new w1(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class _R{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>nO(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=dB.bind(null,r.syncEngine),yield L1(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new KV}createDatastore(e){const t=dE(e.databaseInfo.databaseId),r=new NV(e.databaseInfo);return new FV(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=p=>nO(this.syncEngine,p,0),c=BP.vt()?new BP:new RV,new UV(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,p,_,E){const D=new nB(r,i,a,c,p,_);return E&&(D.ca=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=Ye(t);Oe("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield uy(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function lO(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class XT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class bB{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new Ri,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,me.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),i=Number(r);isNaN(i)&&e.Ra(`length string (${r}) is not valid number`);const a=yield e.ba(i);return new JV(JSON.parse(a),t.length+i)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,me.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,me.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class CB{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,me.Z)(function*(a,c){const p=Ye(a),_=nE(p.M)+"/documents",E={documents:c.map(U=>tE(p.M,U))},D=yield p.co("BatchGetDocuments",_,E),S=new Map;D.forEach(U=>{const H=function CU(n,e){return"found"in e?function(t,r){Ft(!!r.found);const i=Ou(t,r.found.name),a=ki(r.found.updateTime),c=new Es({mapValue:{fields:r.found.fields}});return ir.newFoundDocument(i,a,c)}(n,e):"missing"in e?function(t,r){Ft(!!r.missing),Ft(!!r.readTime);const i=Ou(t,r.missing),a=ki(r.readTime);return ir.newNoDocument(i,a)}(n,e):lt()}(p.M,U);S.set(H.key.toString(),H)});const N=[];return c.forEach(U=>{const H=S.get(U.toString());Ft(!!H),N.push(H)}),N}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Yw(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=He.fromPath(i);e.mutations.push(new Gx(a,e.precondition(a)))}),yield(r=(0,me.Z)(function*(i,a){const c=Ye(i),p=nE(c.M)+"/documents",_={writes:a.map(E=>rE(c.M,E))};yield c.ro("Commit",p,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw lt();t=At.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Yr.updateTime(t):Yr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(At.min()))throw new xe(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yr.updateTime(t)}return Yr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class IB{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.va=5,this.So=new E1(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,me.Z)(function*(){const t=new CB(e.datastore),r=e.Da(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Ca(a)}))}).catch(i=>{e.Ca(i)})}))}Da(e){try{const t=this.updateFunction(e);return!tg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!ON(t)}return!1}}class TB{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ts.UNAUTHENTICATED,this.clientId=Qk.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,me.Z)(function*(p){Oe("FirestoreClient","Received user=",p.uid),yield a.authCredentialListener(p),a.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Oe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=hy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function uO(n,e){return yR.apply(this,arguments)}function yR(){return yR=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,me.Z)(function*(a){r.isEqual(a)||(yield MP(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),yR.apply(this,arguments)}function cO(n,e){return vR.apply(this,arguments)}function vR(){return vR=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield wR(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>zP(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>zP(e.remoteStore,a)),n.onlineComponents=e}),vR.apply(this,arguments)}function wR(n){return ER.apply(this,arguments)}function ER(){return ER=(0,me.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield uO(n,new oO)),n.offlineComponents}),ER.apply(this,arguments)}function eD(n){return bR.apply(this,arguments)}function bR(){return bR=(0,me.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield cO(n,new _R)),n.onlineComponents}),bR.apply(this,arguments)}function dO(n){return wR(n).then(e=>e.persistence)}function CR(n){return wR(n).then(e=>e.localStore)}function hO(n){return eD(n).then(e=>e.remoteStore)}function IR(n){return eD(n).then(e=>e.syncEngine)}function my(n){return TR.apply(this,arguments)}function TR(){return TR=(0,me.Z)(function*(n){const e=yield eD(n),t=e.eventManager;return t.onListen=rB.bind(null,e.syncEngine),t.onUnlisten=iB.bind(null,e.syncEngine),t}),TR.apply(this,arguments)}function fO(n,e,t={}){const r=new Ri;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,a,c,p,_){const E=new XT({next:S=>{a.enqueueAndForget(()=>H1(i,D));const N=S.docs.has(c);!N&&S.fromCache?_.reject(new xe(le.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&p&&"server"===p.source?_.reject(new xe(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new q1(Y_(c.path),E,{includeMetadataChanges:!0,Du:!0});return B1(i,D)}(yield my(n),n.asyncQueue,e,t,r)})),r.promise}function pO(n,e,t={}){const r=new Ri;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,a,c,p,_){const E=new XT({next:S=>{a.enqueueAndForget(()=>H1(i,D)),S.fromCache&&"server"===p.source?_.reject(new xe(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new q1(c,E,{includeMetadataChanges:!0,Du:!0});return B1(i,D)}(yield my(n),n.asyncQueue,e,t,r)})),r.promise}const gO=new Map;function DR(n,e,t){if(!t)throw new xe(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function mO(n,e,t,r){if(!0===e&&!0===r)throw new xe(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function _O(n){if(!He.isDocumentKey(n))throw new xe(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yO(n){if(He.isDocumentKey(n))throw new xe(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":lt()}function cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tD(n);throw new xe(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function vO(n,e){if(e<=0)throw new xe(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class wO{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,mO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pE{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wO({}),this._settingsFrozen=!1,e instanceof Kc?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new xe(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kc(i.options.projectId)}(e))}get app(){if(!this._app)throw new xe(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wO(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new F2;switch(t.type){case"gapi":const r=t.client;return Ft(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new B2(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xe(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=gO.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),gO.delete(e),t.terminate())}(this),Promise.resolve()}}class or{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new or(this.firestore,e,this._key)}}class bs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bs(this.firestore,e,this._query)}}class Fu extends bs{constructor(e,t,r){super(e,t,Y_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new or(this.firestore,null,new He(e))}withConverter(e){return new Fu(this.firestore,e,this._path)}}function EO(n,e,...t){if(n=(0,P.m9)(n),DR("collection","path",e),n instanceof pE){const r=hn.fromString(e,...t);return yO(r),new Fu(n,null,r)}{if(!(n instanceof or||n instanceof Fu))throw new xe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(hn.fromString(e,...t));return yO(r),new Fu(n.firestore,null,r)}}function nD(n,e,...t){if(n=(0,P.m9)(n),1===arguments.length&&(e=Qk.R()),DR("doc","path",e),n instanceof pE){const r=hn.fromString(e,...t);return _O(r),new or(n,null,new He(r))}{if(!(n instanceof or||n instanceof Fu))throw new xe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(hn.fromString(e,...t));return _O(r),new or(n.firestore,n instanceof Fu?n.converter:null,new He(r))}}function bO(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),(n instanceof or||n instanceof Fu)&&(e instanceof or||e instanceof Fu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function CO(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),n instanceof bs&&e instanceof bs&&n.firestore===e.firestore&&Ww(n._query,e._query)&&n.converter===e.converter}class FB{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new E1(this,"async_queue_retry"),this.Ua=()=>{const t=YT();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=YT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=YT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new Ri;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,me.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!ag(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,Kr("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const i=V1.createAndSchedule(this,e,t,r,a=>this.Qa(a));return this.Oa.push(i),i}qa(){this.Fa&&lt()}verifyOperationInProgress(){}ja(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function AR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class LB{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ri,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class dr extends pE{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new FB,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||IO(this),this._firestoreClient.terminate()}}function Jr(n){return n._firestoreClient||IO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function IO(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new G2(n._databaseId,a,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var a,p;n._firestoreClient=new TB(n._authCredentials,n._appCheckCredentials,n._queue,r)}function TO(n,e,t){const r=new Ri;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield uO(n,t),yield cO(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===le.FAILED_PRECONDITION||a.code===le.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function DO(n){if(n._initialized||n._terminated)throw new xe(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Xc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Lu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lu(pi.fromBase64String(e))}catch(t){throw new xe(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Lu(pi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class gg{constructor(e){this._methodName=e}}class rD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xt(this._lat,e._lat)||Xt(this._long,e._long)}}const WB=/^__.*__$/;class zB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new og(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kw(e,this.data,t,this.fieldTransforms)}}class AO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new og(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function SO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class iD{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ja(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new iD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.ec(e),i}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.Ja(),i}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return aD(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(SO(this.Ya)&&WB.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class KB{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||dE(e)}uc(e,t,r,i=!1){return new iD({Ya:e,methodName:t,oc:r,path:Mi.emptyPath(),tc:!1,rc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function mg(n){const e=n._freezeSettings(),t=dE(n._databaseId);return new KB(n._databaseId,!!e.ignoreUndefinedProperties,t)}function sD(n,e,t,r,i,a={}){const c=n.uc(a.merge||a.mergeFields?2:0,e,t,i);MR("Data must be an object, but it was:",c,r);const p=MO(r,c);let _,E;if(a.merge)_=new q_(c.fieldMask),E=c.fieldTransforms;else if(a.mergeFields){const D=[];for(const S of a.mergeFields){const N=kR(e,S,t);if(!c.contains(N))throw new xe(le.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);NO(D,N)||D.push(N)}_=new q_(D),E=c.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,E=c.fieldTransforms;return new zB(new Es(p),_,E)}class gE extends gg{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gE}}function xO(n,e,t){return new iD({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class SR extends gg{_toFieldTransform(e){return new zw(e.path,new J_)}isEqual(e){return e instanceof SR}}class YB extends gg{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=xO(this,e,!0),r=this.ac.map(a=>_g(a,t)),i=new ig(r);return new zw(e.path,i)}isEqual(e){return this===e}}class QB extends gg{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=xO(this,e,!0),r=this.ac.map(a=>_g(a,t)),i=new sg(r);return new zw(e.path,i)}isEqual(e){return this===e}}class JB extends gg{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new X_(e.M,IN(e.M,this.cc));return new zw(e.path,t)}isEqual(e){return this===e}}function xR(n,e,t,r){const i=n.uc(1,e,t);MR("Data must be an object, but it was:",i,r);const a=[],c=Es.empty();Xp(r,(_,E)=>{const D=oD(e,_,t);E=(0,P.m9)(E);const S=i.nc(D);if(E instanceof gE)a.push(D);else{const N=_g(E,S);null!=N&&(a.push(D),c.set(D,N))}});const p=new q_(a);return new AO(c,p,i.fieldTransforms)}function RR(n,e,t,r,i,a){const c=n.uc(1,e,t),p=[kR(e,r,t)],_=[i];if(a.length%2!=0)throw new xe(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<a.length;N+=2)p.push(kR(e,a[N])),_.push(a[N+1]);const E=[],D=Es.empty();for(let N=p.length-1;N>=0;--N)if(!NO(E,p[N])){const U=p[N];let H=_[N];H=(0,P.m9)(H);const ue=c.nc(U);if(H instanceof gE)E.push(U);else{const Ee=_g(H,ue);null!=Ee&&(E.push(U),D.set(U,Ee))}}const S=new q_(E);return new AO(D,S,c.fieldTransforms)}function RO(n,e,t,r=!1){return _g(t,n.uc(r?4:3,e))}function _g(n,e){if(kO(n=(0,P.m9)(n)))return MR("Unsupported field value:",e,n),MO(n,e);if(n instanceof gg)return function(t,r){if(!SO(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let p=_g(c,r.sc(a));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,P.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return IN(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Ur.fromDate(t);return{timestampValue:eE(r.M,i)}}if(t instanceof Ur){const i=new Ur(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:eE(r.M,i)}}if(t instanceof rD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Lu)return{bytesValue:$N(r.M,t._byteString)};if(t instanceof or){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ic(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:zx(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${tD(t)}`)}(n,e)}function MO(n,e){const t={};return eN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xp(n,(r,i)=>{const a=_g(i,e.Za(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function kO(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ur||n instanceof rD||n instanceof Lu||n instanceof or||n instanceof gg)}function MR(n,e,t){if(!kO(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=tD(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function kR(n,e,t){if((e=(0,P.m9)(e))instanceof Xc)return e._internalPath;if("string"==typeof e)return oD(n,e);throw aD("Field path arguments must be of type string or ",n,!1,void 0,t)}const XB=new RegExp("[~\\*/\\[\\]]");function oD(n,e,t){if(e.search(XB)>=0)throw aD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Xc(...e.split("."))._internalPath}catch(r){throw aD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function aD(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(a||c)&&(_+=" (found",a&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new xe(le.INVALID_ARGUMENT,p+n+_)}function NO(n,e){return n.some(t=>t.isEqual(e))}class mE{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new or(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ej(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(lD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ej extends mE{data(){return super.data()}}function lD(n,e){return"string"==typeof e?oD(n,e):e instanceof Xc?e._internalPath:e._delegate._internalPath}class yg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ed extends mE{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _E(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(lD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class _E extends ed{data(e={}){return super.data(e)}}class Hh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new yg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new _E(this._firestore,this._userDataWriter,r.key,r,new yg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new _E(r._firestore,r._userDataWriter,c.doc.key,c.doc,new yg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const p=new _E(r._firestore,r._userDataWriter,c.doc.key,c.doc,new yg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,E=-1;return 0!==c.type&&(_=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),E=a.indexOf(c.doc.key)),{type:tj(c.type),doc:p,oldIndex:_,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function tj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}function PO(n,e){return n instanceof ed&&e instanceof ed?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Hh&&e instanceof Hh&&n._firestore===e._firestore&&CO(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function OO(n){if(RT(n)&&0===n.explicitOrderBy.length)throw new xe(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yE{}function $h(n,...e){for(const t of e)n=t._apply(n);return n}class nj extends yE{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=mg(e.firestore),r=function(i,a,c,p,_,E,D){let S;if(_.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){jO(D,E);const U=[];for(const H of D)U.push(BO(p,i,H));S={arrayValue:{values:U}}}else S=BO(p,i,D)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||jO(D,E),S=RO(c,"where",D,"in"===E||"not-in"===E);const N=ns.create(_,E,S);return function(U,H){if(H.S()){const Ee=jx(U);if(null!==Ee&&!Ee.isEqual(H.field))throw new xe(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ee.toString()}' and '${H.field.toString()}'`);const Ke=Bx(U);null!==Ke&&HO(0,H.field,Ke)}const ue=function(Ee,Ke){for(const qe of Ee.filters)if(Ke.indexOf(qe.op)>=0)return qe.op;return null}(U,function(Ee){switch(Ee){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(H.op));if(null!==ue)throw new xe(le.INVALID_ARGUMENT,ue===H.op?`Invalid query. You cannot use more than one '${H.op.toString()}' filter.`:`Invalid query. You cannot use '${H.op.toString()}' filters with '${ue.toString()}' filters.`)}(i,N),N}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new bs(e.firestore,e.converter,function(i,a){const c=i.filters.concat([a]);return new Qc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class ij extends yE{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new xe(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new K_(i,a);return function(p,_){if(null===Bx(p)){const E=jx(p);null!==E&&HO(0,E,_.field)}}(r,c),c}(e._query,this.hc,this.dc);return new bs(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Qc(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class FO extends yE{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new bs(e.firestore,e.converter,yN(e._query,this._c,this.wc))}}class LO extends yE{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=VO(e,this.type,this.mc,this.gc);return new bs(e.firestore,e.converter,(i=t,new Qc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class UO extends yE{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=VO(e,this.type,this.mc,this.gc);return new bs(e.firestore,e.converter,(i=t,new Qc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function VO(n,e,t,r){if(t[0]=(0,P.m9)(t[0]),t[0]instanceof mE)return function(i,a,c,p,_){if(!p)throw new xe(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const E=[];for(const D of Q_(i))if(D.field.isKeyField())E.push(W_(a,p.key));else{const S=p.data.field(D.field);if(Fx(S))throw new xe(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const N=D.field.canonicalString();throw new xe(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}E.push(S)}return new Ph(E,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=mg(n.firestore);return function(a,c,p,_,E,D){const S=a.explicitOrderBy;if(E.length>S.length)throw new xe(le.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let U=0;U<E.length;U++){const H=E[U];if(S[U].field.isKeyField()){if("string"!=typeof H)throw new xe(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof H}`);if(!Hx(a)&&-1!==H.indexOf("/"))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${H}' contains a slash.`);const ue=a.path.child(hn.fromString(H));if(!He.isDocumentKey(ue))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ue}' is not because it contains an odd number of segments.`);const Ee=new He(ue);N.push(W_(c,Ee))}else{const ue=RO(p,_,H);N.push(ue)}}return new Ph(N,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function BO(n,e,t){if("string"==typeof(t=(0,P.m9)(t))){if(""===t)throw new xe(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hx(e)&&-1!==t.indexOf("/"))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(hn.fromString(t));if(!He.isDocumentKey(r))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return W_(n,new He(r))}if(t instanceof or)return W_(n,t._key);throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tD(t)}.`)}function jO(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function HO(n,e,t){if(!t.isEqual(e))throw new xe(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class NR{convertValue(e,t="none"){switch(ng(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(eg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw lt()}}convertObject(e,t){const r={};return Xp(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new rD(xr(e.latitude),xr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=tN(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Bw(e));default:return null}}convertTimestamp(e){const t=kh(e);return new Ur(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=hn.fromString(e);Ft(XN(r));const i=new Kc(r.get(1),r.get(3)),a=new He(r.popFirst(5));return i.isEqual(t)||Kr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function uD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class hj extends NR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,t)}}class $O{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=mg(e)}set(e,t,r){this._verifyNotCommitted();const i=Zh(e,this._firestore),a=uD(i.converter,t,r),c=sD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Yr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Zh(e,this._firestore);let c;return c="string"==typeof(t=(0,P.m9)(t))||t instanceof Xc?RR(this._dataReader,"WriteBatch.update",a._key,t,r,i):xR(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,Yr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Zh(e,this._firestore);return this._mutations=this._mutations.concat(new Yw(t._key,Yr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Zh(n,e){if((n=(0,P.m9)(n)).firestore!==e)throw new xe(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class vg extends NR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,t)}}function ZO(n,e,t){n=cn(n,or);const r=cn(n.firestore,dr),i=uD(n.converter,e,t);return _y(r,[sD(mg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Yr.none())])}function qO(n,e,t,...r){n=cn(n,or);const i=cn(n.firestore,dr),a=mg(i);let c;return c="string"==typeof(e=(0,P.m9)(e))||e instanceof Xc?RR(a,"updateDoc",n._key,e,t,r):xR(a,"updateDoc",n._key,e),_y(i,[c.toMutation(n._key,Yr.exists(!0))])}function GO(n,...e){var t,r,i;n=(0,P.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||AR(e[c])||(a=e[c],c++);const p={includeMetadataChanges:a.includeMetadataChanges};if(AR(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[c+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let _,E,D;if(n instanceof or)E=cn(n.firestore,dr),D=Y_(n._key.path),_={next:S=>{e[c]&&e[c](PR(E,n,S))},error:e[c+1],complete:e[c+2]};else{const S=cn(n,bs);E=cn(S.firestore,dr),D=S._query;const N=new vg(E);_={next:U=>{e[c]&&e[c](new Hh(E,N,S,U))},error:e[c+1],complete:e[c+2]},OO(n._query)}return function(S,N,U,H){const ue=new XT(H),Ee=new q1(N,ue,U);return S.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return B1(yield my(S),Ee)})),()=>{ue.pa(),S.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return H1(yield my(S),Ee)}))}}(Jr(E),D,p,_)}function _y(n,e){return function(t,r){const i=new Ri;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function sB(n,e,t){return Y1.apply(this,arguments)}(yield IR(t),r,i)})),i.promise}(Jr(n),e)}function PR(n,e,t){const r=t.docs.get(e._key),i=new vg(n);return new ed(n,i,e._key,r,new yg(t.hasPendingWrites,t.fromCache),e.converter)}class bj extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=mg(e)}get(e){const t=Zh(e,this._firestore),r=new hj(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return lt();const a=i[0];if(a.isFoundDocument())return new mE(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new mE(this._firestore,r,t._key,null,t.converter);throw lt()})}set(e,t,r){const i=Zh(e,this._firestore),a=uD(i.converter,t,r),c=sD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=Zh(e,this._firestore);let c;return c="string"==typeof(t=(0,P.m9)(t))||t instanceof Xc?RR(this._dataReader,"Transaction.update",a._key,t,r,i):xR(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=Zh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Zh(e,this._firestore),r=new vg(this._firestore);return super.get(e).then(i=>new ed(this._firestore,r,t._key,i._document,new yg(!1,!1),t.converter))}}function OR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function zO(){if("undefined"==typeof Uint8Array)throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function KO(){if(!function Z2(){return"undefined"!=typeof atob}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){$_=jn.SDK_VERSION,(0,jn._registerComponent)(new Qo.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new dr(i,new U2(t.getProvider("auth-internal")),new j2(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,jn.registerVersion)(zk,"3.4.7",n),(0,jn.registerVersion)(zk,"3.4.7","esm2017")}();class vE{constructor(e){this._delegate=e}static fromBase64String(e){return KO(),new vE(Lu.fromBase64String(e))}static fromUint8Array(e){return zO(),new vE(Lu.fromUint8Array(e))}toBase64(){return KO(),this._delegate.toBase64()}toUint8Array(){return zO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function FR(n){return function Mj(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class kj{enableIndexedDbPersistence(e,t){return function VB(n,e){DO(n=cn(n,dr));const t=Jr(n),r=n._freezeSettings(),i=new _R;return TO(t,i,new aO(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function BB(n){DO(n=cn(n,dr));const e=Jr(n),t=n._freezeSettings(),r=new _R;return TO(e,r,new EB(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function jB(n){if(n._initialized&&!n._terminated)throw new xe(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ri;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!Ol.vt())return Promise.resolve();const i=r+"main";yield Ol.delete(i)}),function(r){return t.apply(this,arguments)})(u1(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class YO{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Kc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Uw("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function PB(n,e,t,r={}){var i;const a=(n=cn(n,pE))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Uw("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=ts.MOCK_USER;else{c=(0,P.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new xe(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ts(_)}n._authCredentials=new L2(new Kk(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function $B(n){return function DB(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield dO(n),t=yield hO(n);return e.setNetworkEnabled(!0),function(r){const i=Ye(r);return i.lu.delete(0),hE(i)}(t)}))}(Jr(n=cn(n,dr)))}(this._delegate)}disableNetwork(){return function ZB(n){return function AB(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield dO(n),t=yield hO(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(i){const a=Ye(i);a.lu.add(0),yield uy(a),a._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Jr(n=cn(n,dr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,mO("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function HB(n){return function(e){const t=new Ri;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function uB(n,e){return tR.apply(this,arguments)}(yield IR(e),t)})),t.promise}(Jr(n=cn(n,dr)))}(this._delegate)}onSnapshotsInSync(e){return function Ej(n,e){return function RB(n,e){const t=new XT(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield my(n),i=t,Ye(r).Tu.add(i),void i.next();var r,i})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield my(n),i=t,void Ye(r).Tu.delete(i);var r,i}))}}(Jr(n=cn(n,dr)),AR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new yy(this,EO(this._delegate,e))}catch(t){throw Qs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Za(this,nD(this._delegate,e))}catch(t){throw Qs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Js(this,function OB(n,e){if(n=cn(n,pE),DR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new bs(n,null,(t=e,new Qc(hn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Qs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Cj(n,e){return function MB(n,e){const t=new Ri;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const r=yield(i=n,eD(i).then(a=>a.datastore));var i;new IB(n.asyncQueue,r,e,t).run()})),t.promise}(Jr(n=cn(n,dr)),t=>e(new bj(n,t)))}(this._delegate,t=>e(new QO(this,t)))}batch(){return Jr(this._delegate),new JO(new $O(this._delegate,e=>_y(this._delegate,e)))}loadBundle(e){return function qB(n,e){const t=Jr(n=cn(n,dr)),r=new LB;return function kB(n,e,t,r){const i=function(a,c){let p;return p="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,E){if(_ instanceof Uint8Array)return lO(_,E);if(_ instanceof ArrayBuffer)return lO(new Uint8Array(_),E);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new bB(_,c);var _}(t,dE(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function wB(n,e,t){const r=Ye(n);var i;(i=(0,me.Z)(function*(a,c,p){try{const _=yield c.getMetadata();if(yield function(N,U){const H=Ye(N),ue=ki(U.createTime);return H.persistence.runTransaction("hasNewerBundle","readonly",Ee=>H.ds.getBundleMetadata(Ee,U.id)).then(Ee=>!!Ee&&Ee.createTime.compareTo(ue)>=0)}(a.localStore,_))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(N=_).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);p._updateProgress(QP(_));const E=new XV(_,a.localStore,c.M);let D=yield c.fa();for(;D;){const N=yield E.Nu(D);N&&p._updateProgress(N),D=yield c.fa()}const S=yield E.complete();return yield Jc(a,S.Ou,void 0),yield function(N,U){const H=Ye(N);return H.persistence.runTransaction("Save bundle","readwrite",ue=>H.ds.saveBundleMetadata(ue,U))}(a.localStore,_),p._completeWith(S.progress),Promise.resolve(S.Mu)}catch(_){return Uw("SyncEngine",`Loading bundle failed with ${_}`),p._failWith(_),Promise.resolve(new Set)}var N}),function(a,c,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield IR(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function GB(n,e){return function NB(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const i=Ye(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.ds.getNamedQuery(a,r))}(yield CR(n),e)}))}(Jr(n=cn(n,dr)),e).then(t=>t?new bs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Js(this,t):null)}}class cD extends NR{constructor(e){super(),this.firestore=e}convertBytes(e){return new vE(new Lu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Za.forKey(t,this.firestore,null)}}class QO{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new cD(e)}get(e){const t=Eg(e);return this._delegate.get(t).then(r=>new wE(this._firestore,new ed(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Eg(e);return r?(OR("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Eg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Eg(e);return this._delegate.delete(t),this}}class JO{constructor(e){this._delegate=e}set(e,t,r){const i=Eg(e);return r?(OR("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Eg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Eg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class wg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new _E(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new EE(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=wg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new wg(e,new cD(e),t),i.set(t,a)),a}}wg.INSTANCES=new WeakMap;class Za{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Za(t,new or(t._delegate,r,new He(e)))}static forKey(e,t,r){return new Za(t,new or(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new yy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new yy(this.firestore,EO(this._delegate,e))}catch(t){throw Qs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,P.m9)(e))instanceof or&&bO(this._delegate,e)}set(e,t){t=OR("DocumentReference.set",t);try{return t?ZO(this._delegate,e,t):ZO(this._delegate,e)}catch(r){throw Qs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?qO(this._delegate,e):qO(this._delegate,e,t,...r)}catch(i){throw Qs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function vj(n){return _y(cn(n.firestore,dr),[new Yw(n._key,Yr.none())])}(this._delegate)}onSnapshot(...e){const t=XO(e),r=eF(e,i=>new wE(this.firestore,new ed(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return GO(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function pj(n){n=cn(n,or);const e=cn(n.firestore,dr),t=Jr(e),r=new vg(e);return function SB(n,e){const t=new Ri;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,a,c){try{const p=yield function(_,E){const D=Ye(_);return D.persistence.runTransaction("read document","readonly",S=>D.ai.Bs(S,E))}(i,a);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new xe(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const _=hy(p,`Failed to get document '${a} from cache`);c.reject(_)}}),function(i,a,c){return r.apply(this,arguments)})(yield CR(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ed(e,r,n._key,i,new yg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function gj(n){n=cn(n,or);const e=cn(n.firestore,dr);return fO(Jr(e),n._key,{source:"server"}).then(t=>PR(e,n,t))}(this._delegate):function fj(n){n=cn(n,or);const e=cn(n.firestore,dr);return fO(Jr(e),n._key).then(t=>PR(e,n,t))}(this._delegate),t.then(r=>new wE(this.firestore,new ed(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Za(this.firestore,this._delegate.withConverter(e?wg.getInstance(this.firestore,e):null))}}function Qs(n,e,t){return n.message=n.message.replace(e,t),n}function XO(n){for(const e of n)if("object"==typeof e&&!FR(e))return e;return{}}function eF(n,e){var t,r;let i;return i=FR(n[0])?n[0]:FR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class wE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Za(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return PO(this._delegate,e._delegate)}}class EE extends wE{data(e){const t=this._delegate.data(e);return function O2(n,e){n||lt()}(void 0!==t),t}}class Js{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cD(e)}where(e,t,r){try{return new Js(this.firestore,$h(this._delegate,function rj(n,e,t){const r=e,i=lD("where",n);return new nj(i,r,t)}(e,t,r)))}catch(i){throw Qs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Js(this.firestore,$h(this._delegate,function sj(n,e="asc"){const t=e,r=lD("orderBy",n);return new ij(r,t)}(e,t)))}catch(r){throw Qs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Js(this.firestore,$h(this._delegate,function oj(n){return vO("limit",n),new FO("limit",n,"F")}(e)))}catch(t){throw Qs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Js(this.firestore,$h(this._delegate,function aj(n){return vO("limitToLast",n),new FO("limitToLast",n,"L")}(e)))}catch(t){throw Qs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Js(this.firestore,$h(this._delegate,function lj(...n){return new LO("startAt",n,!0)}(...e)))}catch(t){throw Qs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Js(this.firestore,$h(this._delegate,function uj(...n){return new LO("startAfter",n,!1)}(...e)))}catch(t){throw Qs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Js(this.firestore,$h(this._delegate,function cj(...n){return new UO("endBefore",n,!1)}(...e)))}catch(t){throw Qs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Js(this.firestore,$h(this._delegate,function dj(...n){return new UO("endAt",n,!0)}(...e)))}catch(t){throw Qs(t,"endAt()","Query.endAt()")}}isEqual(e){return CO(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function _j(n){n=cn(n,bs);const e=cn(n.firestore,dr),t=Jr(e),r=new vg(e);return function xB(n,e){const t=new Ri;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,a,c){try{const p=yield WT(i,a,!0),_=new eO(a,p.hi),E=_.Gu(p.documents),D=_.applyChanges(E,!1);c.resolve(D.snapshot)}catch(p){const _=hy(p,`Failed to execute query '${a} against cache`);c.reject(_)}}),function(i,a,c){return r.apply(this,arguments)})(yield CR(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Hh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function yj(n){n=cn(n,bs);const e=cn(n.firestore,dr),t=Jr(e),r=new vg(e);return pO(t,n._query,{source:"server"}).then(i=>new Hh(e,r,n,i))}(this._delegate):function mj(n){n=cn(n,bs);const e=cn(n.firestore,dr),t=Jr(e),r=new vg(e);return OO(n._query),pO(t,n._query).then(i=>new Hh(e,r,n,i))}(this._delegate),t.then(r=>new LR(this.firestore,new Hh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=XO(e),r=eF(e,i=>new LR(this.firestore,new Hh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return GO(this._delegate,t,r)}withConverter(e){return new Js(this.firestore,this._delegate.withConverter(e?wg.getInstance(this.firestore,e):null))}}class Pj{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new EE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class LR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Js(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new EE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Pj(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new EE(this._firestore,r))})}isEqual(e){return PO(this._delegate,e._delegate)}}class yy extends Js{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Za(this.firestore,e):null}doc(e){try{return new Za(this.firestore,void 0===e?nD(this._delegate):nD(this._delegate,e))}catch(t){throw Qs(t,"doc()","CollectionReference.doc()")}}add(e){return function wj(n,e){const t=cn(n.firestore,dr),r=nD(n),i=uD(n.converter,e);return _y(t,[sD(mg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Yr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Za(this.firestore,t))}isEqual(e){return bO(this._delegate,e._delegate)}withConverter(e){return new yy(this.firestore,this._delegate.withConverter(e?wg.getInstance(this.firestore,e):null))}}function Eg(n){return cn(n,or)}class UR{constructor(...e){this._delegate=new Xc(...e)}static documentId(){return new UR(Mi.keyField().canonicalString())}isEqual(e){return(e=(0,P.m9)(e))instanceof Xc&&this._delegate._internalPath.isEqual(e._internalPath)}}class bg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Tj(){return new SR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new bg(e)}static delete(){const e=function Ij(){return new gE("deleteField")}();return e._methodName="FieldValue.delete",new bg(e)}static arrayUnion(...e){const t=function Dj(...n){return new YB("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new bg(t)}static arrayRemove(...e){const t=function Aj(...n){return new QB("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new bg(t)}static increment(e){const t=function Sj(n){return new JB("increment",n)}(e);return t._methodName="FieldValue.increment",new bg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Oj={Firestore:YO,GeoPoint:rD,Timestamp:Ur,Blob:vE,Transaction:QO,WriteBatch:JO,DocumentReference:Za,DocumentSnapshot:wE,Query:Js,QueryDocumentSnapshot:EE,QuerySnapshot:LR,CollectionReference:yy,FieldPath:UR,FieldValue:bg,setLogLevel:function Nj(n){!function P2(n){Mh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function tF(n,e){return function Uj(n,e=Dc.z){return new ur.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function VR(n,e){return tF(n,e).pipe((0,at.U)(t=>({payload:t,type:"query"})))}function dD(n,e){return VR(n,e).pipe(ii(void 0),jI(),(0,at.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const _=i.find(D=>D.doc.ref.isEqual(c.ref)),E=null==t?void 0:t.payload.docs.find(D=>D.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&E&&JSON.stringify(E.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),a}))}function nF(n,e,t){return dD(n,t).pipe($r((r,i)=>function Bj(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function jj(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return BR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return BR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return BR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),ZE(),(0,at.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function BR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function rF(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function Lj(n){(function Fj(n,e){n.INTERNAL.registerComponent(new Qo.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Oj)))})(n,(e,t)=>new YO(e,t,new kj)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(Xg.Z);class iF{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=dD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,at.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ii(void 0),jI(),Ci(([r,i])=>i.length>0||!r),(0,at.U)(([r,i])=>i),gn.iC)}auditTrail(e){return this.stateChanges(e).pipe($r((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=rF(e);return nF(this.query,t,this.afs.schedulers.outsideAngular).pipe(gn.iC)}valueChanges(e={}){return VR(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),gn.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(gn.iC)}add(e){return this.ref.add(e)}doc(e){return new sF(this.ref.doc(e),this.afs)}}class sF{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=lF(r,t);return new iF(i,a,this.afs)}snapshotChanges(){return function Vj(n,e){return tF(n,e).pipe(ii(void 0),jI(),(0,at.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(gn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,at.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ln.D)(this.ref.get(e)).pipe(gn.iC)}}class Hj{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?dD(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ci(t=>t.length>0),gn.iC):dD(this.query,this.afs.schedulers.outsideAngular).pipe(gn.iC)}auditTrail(e){return this.stateChanges(e).pipe($r((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=rF(e);return nF(this.query,t,this.afs.schedulers.outsideAngular).pipe(gn.iC)}valueChanges(e={}){return VR(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),gn.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(gn.iC)}}const oF=new u.OlP("angularfire2.enableFirestorePersistence"),aF=new u.OlP("angularfire2.firestore.persistenceSettings"),$j=new u.OlP("angularfire2.firestore.settings"),Zj=new u.OlP("angularfire2.firestore.use-emulator");function lF(n,e=(t=>t)){return{query:e(n),ref:n}}let uF=(()=>{class n{constructor(t,r,i,a,c,p,_,E,D,S,N,U,H,ue,Ee,Ke,qe){this.schedulers=_;const ct=(0,Ar.on)(t,p,r),ze=D;S&&b_(ct,p,N,H,ue,Ee,U,Ke),[this.firestore,this.persistenceEnabled$]=(0,Ar.cc)(`${ct.name}.firestore`,"AngularFirestore",ct.name,()=>{const Nt=p.runOutsideAngular(()=>ct.firestore());if(a&&Nt.settings(a),ze&&Nt.useEmulator(...ze),i&&!Ir(c)){const Vt=()=>{try{return(0,ln.D)(Nt.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(So){return"undefined"!=typeof console&&console.warn(So),pt(!1)}};return[Nt,p.runOutsideAngular(Vt)]}return[Nt,pt(!1)]},[a,ze,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=lF(i,r),p=this.schedulers.ngZone.run(()=>a);return new iF(p,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new Hj(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new sF(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ar.Dh),u.LFG(Ar.xv,8),u.LFG(oF,8),u.LFG($j,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(gn.HU),u.LFG(aF,8),u.LFG(Zj,8),u.LFG(Ch,8),u.LFG(ew,8),u.LFG(tw,8),u.LFG(v_,8),u.LFG(nw,8),u.LFG(w_,8),u.LFG(E_,8),u.LFG(Zc,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),qj=(()=>{class n{constructor(){Bp.Z.registerVersion("angularfire",gn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:oF,useValue:!0},{provide:aF,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[uF]}),n})(),bE=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.user={email:null,idToken:null},this.subject=new bi(null),this.user$=this.subject.asObservable(),this.afAuth.authState.subscribe(c=>{c?(this.user.email=c.email,c.getIdToken().then(p=>{this.user.idToken=p,this.subject.next(this.user)})):this.subject.next(null)}),this.isLogIn$=this.user$.pipe((0,at.U)(c=>!!c)),this.isLogOut$=this.isLogIn$.pipe((0,at.U)(c=>!c))}signIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{var a;return(null===(a=i.user)||void 0===a?void 0:a.email)&&(this.user.email=i.user.email,i.user.getIdToken().then(c=>{this.user.idToken=c,this.subject.next(this.user)})),i}).catch(i=>{window.alert(i.message)})}signOut(){this.afAuth.signOut(),this.subject.next(null)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(uF),u.LFG(Ch),u.LFG(Di),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vy=(()=>{class n{constructor(t,r){this.auth=t,this.db=r,this.sendCurrentNumberPage=new Hi.x,this.auth.user$.subscribe(i=>{this.idToken=null==i?void 0:i.idToken})}currentPage(t){return this.sendCurrentNumberPage.next(t)}getArticles(){return this.db.list("articles").valueChanges().pipe((0,at.U)(t=>t.sort((r,i)=>new Date(i.creationDate).getTime()-new Date(r.creationDate).getTime())))}getArticle(t){return this.db.object(`articles/${t}`).valueChanges().pipe((0,at.U)(r=>r))}getCountArticles(){return this.db.list("articles").valueChanges().pipe((0,at.U)(t=>t.length))}getLastArticle(){return this.db.list("articles").valueChanges().pipe((0,at.U)(t=>t.sort((r,i)=>new Date(i.creationDate).getTime()-new Date(r.creationDate).getTime())[0]))}search(t){return this.db.list("articles").valueChanges().pipe((0,at.U)(r=>r.filter(i=>!(t.length>0)||i.title.toLowerCase().includes(t.toLowerCase())).sort((i,a)=>new Date(a.creationDate).getTime()-new Date(i.creationDate).getTime())))}paginate(t,r,i){return t.slice((r-1)*i,r*i)}deleteArticle(t){this.db.list("articles").remove(t.title)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(bE),u.LFG(Th))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cF=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),Cg=(()=>{class n extends cF{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const Uu=new u.OlP("NgValueAccessor"),zj={provide:Uu,useExisting:(0,u.Gpc)(()=>wy),multi:!0},Yj=new u.OlP("CompositionEventMode");let wy=(()=>{class n extends cF{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Kj(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(Yj,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[u._Bn([zj]),u.qOj]}),n})();function qh(n){return null==n||0===n.length}function hF(n){return null!=n&&"number"==typeof n.length}const Cs=new u.OlP("NgValidators"),Gh=new u.OlP("NgAsyncValidators"),Qj=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function CE(n){return null}function EF(n){return null!=n}function bF(n){const e=(0,u.QGY)(n)?(0,ln.D)(n):n;return(0,u.CqO)(e),e}function CF(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function IF(n,e){return e.map(t=>t(n))}function TF(n){return n.map(e=>function Jj(n){return!n.validate}(e)?e:t=>e.validate(t))}function jR(n){return null!=n?function DF(n){if(!n)return null;const e=n.filter(EF);return 0==e.length?null:function(t){return CF(IF(t,e))}}(TF(n)):null}function HR(n){return null!=n?function AF(n){if(!n)return null;const e=n.filter(EF);return 0==e.length?null:function(t){return function Gj(...n){const e=(0,zn.jO)(n),{args:t,keys:r}=Ns(n),i=new ur.y(a=>{const{length:c}=t;if(!c)return void a.complete();const p=new Array(c);let _=c,E=c;for(let D=0;D<c;D++){let S=!1;(0,gr.Xf)(t[D]).subscribe(new Ln.Q(a,N=>{S||(S=!0,E--),p[D]=N},()=>_--,void 0,()=>{(!_||!S)&&(E||a.next(r?fo(r,p):p),a.complete())}))}});return e?i.pipe(Ia(e)):i}(IF(t,e).map(bF)).pipe((0,at.U)(CF))}}(TF(n)):null}function SF(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function $R(n){return n?Array.isArray(n)?n:[n]:[]}function hD(n,e){return Array.isArray(n)?n.includes(e):n===e}function MF(n,e){const t=$R(e);return $R(n).forEach(i=>{hD(t,i)||t.push(i)}),t}function kF(n,e){return $R(e).filter(t=>!hD(n,t))}class NF{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=jR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=HR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Wh extends NF{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Xs extends NF{get formDirective(){return null}get path(){return null}}class PF{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let fD=(()=>{class n extends PF{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Wh,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[u.qOj]}),n})(),IE=(()=>{class n extends PF{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Xs,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[u.qOj]}),n})();function TE(n,e){GR(n,e),e.valueAccessor.writeValue(n.value),function r3(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&OF(n,e)})}(n,e),function s3(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function i3(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&OF(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function n3(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function _D(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function GR(n,e){const t=function xF(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(SF(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function RF(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(SF(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();_D(e._rawValidators,i),_D(e._rawAsyncValidators,i)}function OF(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function vD(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const DE="VALID",wD="INVALID",Ey="PENDING",AE="DISABLED";function KR(n){return(QR(n)?n.validators:n)||null}function UF(n){return Array.isArray(n)?jR(n):n||null}function YR(n,e){return(QR(e)?e.asyncValidators:n)||null}function VF(n){return Array.isArray(n)?HR(n):n||null}function QR(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class JR{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=UF(this._rawValidators),this._composedAsyncValidatorFn=VF(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===DE}get invalid(){return this.status===wD}get pending(){return this.status==Ey}get disabled(){return this.status===AE}get enabled(){return this.status!==AE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=UF(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=VF(e)}addValidators(e){this.setValidators(MF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(MF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(kF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(kF(e,this._rawAsyncValidators))}hasValidator(e){return hD(this._rawValidators,e)}hasAsyncValidator(e){return hD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ey,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=AE,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=DE,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===DE||this.status===Ey)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?AE:DE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ey,this._hasOwnPendingAsyncValidator=!0;const t=bF(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function u3(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=r instanceof XR?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof c3&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?AE:this.errors?wD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ey)?Ey:this._anyControlsHaveStatus(wD)?wD:DE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){QR(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ED extends JR{constructor(e=null,t,r){super(KR(t),YR(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){vD(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){vD(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class XR extends JR{constructor(e,t,r){super(KR(t),YR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof ED?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class c3 extends JR{constructor(e,t,r){super(KR(t),YR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof ED?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const d3={provide:Xs,useExisting:(0,u.Gpc)(()=>Ig)},SE=(()=>Promise.resolve(null))();let Ig=(()=>{class n extends Xs{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new u.vpe,this.form=new XR({},jR(t),HR(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){SE.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),TE(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){SE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),vD(this._directives,t)})}addFormGroup(t){SE.then(()=>{const r=this._findContainer(t.path),i=new XR({});(function FF(n,e){GR(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){SE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){SE.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function LF(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Cs,10),u.Y36(Gh,10))},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([d3]),u.qOj]}),n})();const f3={provide:Wh,useExisting:(0,u.Gpc)(()=>xE)},HF=(()=>Promise.resolve(null))();let xE=(()=>{class n extends Wh{constructor(t,r,i,a){super(),this.control=new ED,this._registered=!1,this.update=new u.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function zR(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===wy?t=a:function l3(n){return Object.getPrototypeOf(n.constructor)===Cg}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function WR(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function gD(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){TE(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){HF.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;HF.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Xs,9),u.Y36(Cs,10),u.Y36(Gh,10),u.Y36(Uu,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([f3]),u.qOj,u.TTD]}),n})(),RE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),ZF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function XF(n){return"number"==typeof n?n:parseInt(n,10)}let bD=(()=>{class n{constructor(){this._validator=CE}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._validator=this.enabled()?this.createValidator(r):CE,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(){return null!=this[this.inputName]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,features:[u.TTD]}),n})();const M3={provide:Cs,useExisting:(0,u.Gpc)(()=>ME),multi:!0};let ME=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?function gF(n){return qh(n.value)?{required:!0}:null}(t):null}registerOnValidatorChange(t){this._onChange=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("required",r.required?"":null)},inputs:{required:"required"},features:[u._Bn([M3])]}),n})();const N3={provide:Cs,useExisting:(0,u.Gpc)(()=>sM),multi:!0};let sM=(()=>{class n{constructor(){this._enabled=!1}set email(t){this._enabled=""===t||!0===t||"true"===t,this._onChange&&this._onChange()}validate(t){return this._enabled?function _F(n){return qh(n.value)||Qj.test(n.value)?null:{email:!0}}(t):null}registerOnValidatorChange(t){this._onChange=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[u._Bn([N3])]}),n})();const P3={provide:Cs,useExisting:(0,u.Gpc)(()=>oM),multi:!0};let oM=(()=>{class n extends bD{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=t=>XF(t),this.createValidator=t=>function yF(n){return e=>qh(e.value)||!hF(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("minlength",r.enabled()?r.minlength:null)},inputs:{minlength:"minlength"},features:[u._Bn([P3]),u.qOj]}),n})();const O3={provide:Cs,useExisting:(0,u.Gpc)(()=>CD),multi:!0};let CD=(()=>{class n extends bD{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>XF(t),this.createValidator=t=>function vF(n){return e=>hF(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("maxlength",r.enabled()?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[u._Bn([O3]),u.qOj]}),n})(),L3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[ZF]]}),n})(),U3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[L3]}),n})();const sL="firebasestorage.googleapis.com",oL="storageBucket";class Rr extends P.ZR{constructor(e,t){super(aM(e),`Firebase Storage: ${t} (${aM(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Rr.prototype)}_codeEquals(e){return aM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function aM(n){return"storage/"+n}function lM(){return new Rr("unknown","An unknown error occurred, please check the error payload for server response.")}function aL(){return new Rr("canceled","User canceled the upload/download.")}function lL(){return new Rr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function by(n){return new Rr("invalid-argument",n)}function uL(){return new Rr("app-deleted","The Firebase app was deleted.")}function cL(n){return new Rr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function kE(n,e){return new Rr("invalid-format","String does not match format '"+n+"': "+e)}function NE(n){throw new Rr("internal-error","Internal error: "+n)}class Is{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Is.makeFromUrl(e,t)}catch(i){return new Is(e,"")}if(""===r.path)return r;throw function K3(n){return new Rr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",p=new RegExp("^gs://"+i+"(/(.*))?$","i");function E(ze){ze.path_=decodeURIComponent(ze.path)}const S=t.replace(/[.]/g,"\\."),ct=[{regex:p,indices:{bucket:1,path:3},postModify:function a(ze){"/"===ze.path.charAt(ze.path.length-1)&&(ze.path_=ze.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:E},{regex:new RegExp(`^https?://${t===sL?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:E}];for(let ze=0;ze<ct.length;ze++){const Nt=ct[ze],Vt=Nt.regex.exec(e);if(Vt){let gi=Vt[Nt.indices.path];gi||(gi=""),r=new Is(Vt[Nt.indices.bucket],gi),Nt.postModify(r);break}}if(null==r)throw function z3(n){return new Rr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class X3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function ID(n){return"string"==typeof n||n instanceof String}function dL(n){return uM()&&n instanceof Blob}function uM(){return"undefined"!=typeof Blob}function cM(n,e,t,r){if(r<e)throw by(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw by(`Invalid value for '${n}'. Expected ${t} or less.`)}function td(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function hL(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var zh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(zh||(zh={})),zh))();class s6{constructor(e,t,r,i,a,c,p,_,E,D,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=p,this.errorCallback_=_,this.timeout_=E,this.progressCallback_=D,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,U)=>{this.resolve_=N,this.reject_=U,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,c=this.reject_,p=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(p,p.getResponse());!function n6(n){return void 0!==n}(_)?a():a(_)}catch(_){c(_)}else if(null!==p){const _=lM();_.serverResponse=p.getErrorText(),c(this.errorCallback_?this.errorCallback_(p,_):_)}else c(i.canceled?this.appDelete_?uL():aL():function W3(){return new Rr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new TD(!1,null,!0)):this.backoffId_=function e6(n,e,t){let r=1,i=null,a=null,c=!1,p=0;function _(){return 2===p}let E=!1;function D(...Ee){E||(E=!0,e.apply(null,Ee))}function S(Ee){i=setTimeout(()=>{i=null,n(U,_())},Ee)}function N(){a&&clearTimeout(a)}function U(Ee,...Ke){if(E)return void N();if(Ee)return N(),void D.call(null,Ee,...Ke);if(_()||c)return N(),void D.call(null,Ee,...Ke);let ct;r<64&&(r*=2),1===p?(p=2,ct=0):ct=1e3*(r+Math.random()),S(ct)}let H=!1;function ue(Ee){H||(H=!0,N(),!E&&(null!==i?(Ee||(p=2),clearTimeout(i),S(0)):Ee||(p=1)))}return S(0),a=setTimeout(()=>{c=!0,ue(!0)},t),ue}((r,i)=>{if(i)return void r(!1,new TD(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const c=p=>{null!==this.progressCallback_&&this.progressCallback_(p.loaded,p.lengthComputable?p.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const p=a.getErrorCode()===zh.NO_ERROR,_=a.getStatus();if(!p||this.isRetryStatusCode_(_)){const D=a.getErrorCode()===zh.ABORT;return void r(!1,new TD(!1,null,D))}const E=-1!==this.successCodes_.indexOf(_);r(!0,new TD(E,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function t6(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class TD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function h6(...n){const e=function d6(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(uM())return new Blob(n);throw new Rr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const la={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class dM{constructor(e,t){this.data=e,this.contentType=t||null}}function hM(n,e){switch(n){case la.RAW:return new dM(fL(e));case la.BASE64:case la.BASE64URL:return new dM(pL(n,e));case la.DATA_URL:return new dM(function m6(n){const e=new gL(n);return e.base64?pL(la.BASE64,e.rest):function g6(n){let e;try{e=decodeURIComponent(n)}catch(t){throw kE(la.DATA_URL,"Malformed data URL.")}return fL(e)}(e.rest)}(e),function _6(n){return new gL(n).contentType}(e))}throw lM()}function fL(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function pL(n,e){switch(n){case la.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw kE(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case la.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw kE(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function p6(n){return atob(n)}(e)}catch(i){throw kE(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class gL{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw kE(la.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function y6(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Vu{constructor(e,t){let r=0,i="";dL(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(dL(this.data_)){const i=function f6(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Vu(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Vu(r,!0)}}static getBlob(...e){if(uM()){const t=e.map(r=>r instanceof Vu?r.data_:r);return new Vu(h6.apply(null,t))}{const t=e.map(c=>ID(c)?hM(la.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(c=>{for(let p=0;p<c.length;p++)i[a++]=c[p]}),new Vu(i,!0)}}uploadData(){return this.data_}}function fM(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function i6(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function mL(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function E6(n,e){return e}class eo{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||E6}}let DD=null;function PE(){if(DD)return DD;const n=[];n.push(new eo("bucket")),n.push(new eo("generation")),n.push(new eo("metageneration")),n.push(new eo("name","fullPath",!0));const t=new eo("name");t.xform=function e(a,c){return function b6(n){return!ID(n)||n.length<2?n:mL(n)}(c)},n.push(t);const i=new eo("size");return i.xform=function r(a,c){return void 0!==c?Number(c):c},n.push(i),n.push(new eo("timeCreated")),n.push(new eo("updated")),n.push(new eo("md5Hash",null,!0)),n.push(new eo("cacheControl",null,!0)),n.push(new eo("contentDisposition",null,!0)),n.push(new eo("contentEncoding",null,!0)),n.push(new eo("contentLanguage",null,!0)),n.push(new eo("contentType",null,!0)),n.push(new eo("metadata","customMetadata",!0)),DD=n,DD}function _L(n,e,t){const r=fM(e);return null===r?null:function I6(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const c=t[a];r[c.local]=c.xform(r,e[c.server])}return function C6(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new Is(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function pM(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const yL="prefixes";class Bu{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ju(n){if(!n)throw lM()}function AD(n,e){return function t(r,i){const a=_L(n,i,e);return ju(null!==a),a}}function Cy(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function q3(){return new Rr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Z3(){return new Rr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function $3(n){return new Rr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function G3(n){return new Rr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function OE(n){const e=Cy(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function H3(n){return new Rr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function wL(n,e,t){const i=td(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new Bu(i,"GET",AD(n,t),c);return p.errorHandler=OE(e),p}function R6(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const p=td(e.bucketOnlyServerUrl(),n.host,n._protocol),E=n.maxOperationRetryTime,D=new Bu(p,"GET",function S6(n,e){return function t(r,i){const a=function A6(n,e,t){const r=fM(t);return null===r?null:function D6(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[yL])for(const i of t[yL]){const a=i.replace(/\/$/,""),c=n._makeStorageReference(new Is(e,a));r.prefixes.push(c)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new Is(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return ju(null!==a),a}}(n,e.bucket),E);return D.urlParams=a,D.errorHandler=Cy(e),D}function bL(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function P6(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class SD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function gM(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){ju(!1)}return ju(!!t&&-1!==(e||["active"]).indexOf(t)),t}const U6={STATE_CHANGED:"state_changed"},to={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function mM(n){switch(n){case"running":case"pausing":case"canceling":return to.RUNNING;case"paused":return to.PAUSED;case"success":return to.SUCCESS;case"canceled":return to.CANCELED;default:return to.ERROR}}class V6{constructor(e,t,r){if(function r6(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Iy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class j6 extends class B6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=zh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=zh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw NE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw NE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw NE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw NE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw NE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Fl(){return new j6}class DL{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=PE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function O6(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c=bL(e,r,i),p={name:c.fullPath},_=td(a,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},S=pM(c,t),H=new Bu(_,"POST",function U(ue){let Ee;gM(ue);try{Ee=ue.getResponseHeader("X-Goog-Upload-URL")}catch(Ke){ju(!1)}return ju(ID(Ee)),Ee},n.maxUploadRetryTime);return H.urlParams=p,H.headers=D,H.body=S,H.errorHandler=Cy(e),H}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Fl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function F6(n,e,t,r){const _=new Bu(t,"POST",function a(E){const D=gM(E,["active","final"]);let S=null;try{S=E.getResponseHeader("X-Goog-Upload-Size-Received")}catch(U){ju(!1)}S||ju(!1);const N=Number(S);return ju(!isNaN(N)),new SD(N,r.size(),"final"===D)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=Cy(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Fl,t,r);this._request=a,a.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new SD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let c;try{c=function L6(n,e,t,r,i,a,c,p){const _=new SD(0,0);if(c?(_.current=c.current,_.total=c.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function Q3(){return new Rr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const E=_.total-_.current;let D=E;i>0&&(D=Math.min(D,i));const S=_.current,H={"X-Goog-Upload-Command":D===E?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},ue=r.slice(S,S+D);if(null===ue)throw lL();const ct=new Bu(t,"POST",function Ee(ze,Nt){const Vt=gM(ze,["active","final"]),So=_.current+D,gi=r.size();let Ll;return Ll="final"===Vt?AD(e,a)(ze,Nt):null,new SD(So,gi,"final"===Vt,Ll)},e.maxUploadRetryTime);return ct.headers=H,ct.body=ue.uploadData(),ct.progressCallback=p||null,ct.errorHandler=Cy(n),ct}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const p=this._ref.storage._makeRequest(c,Fl,i,a);this._request=p,p.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=wL(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Fl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function CL(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},_=function p(){let ct="";for(let ze=0;ze<2;ze++)ct+=Math.random().toString().slice(2);return ct}();c["Content-Type"]="multipart/related; boundary="+_;const E=bL(e,r,i),D=pM(E,t),U=Vu.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+_+"\r\nContent-Type: "+E.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===U)throw lL();const H={name:E.fullPath},ue=td(a,n.host,n._protocol),Ke=n.maxUploadRetryTime,qe=new Bu(ue,"POST",AD(n,t),Ke);return qe.urlParams=H,qe.headers=c,qe.body=U.uploadData(),qe.errorHandler=Cy(e),qe}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Fl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=aL(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=mM(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new V6(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(mM(this._state)){case to.SUCCESS:Iy(this._resolve.bind(null,this.snapshot))();break;case to.CANCELED:case to.ERROR:Iy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(mM(this._state)){case to.RUNNING:case to.PAUSED:e.next&&Iy(e.next.bind(e,this.snapshot))();break;case to.SUCCESS:e.complete&&Iy(e.complete.bind(e))();break;default:e.error&&Iy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Tg{constructor(e,t){this._service=e,this._location=t instanceof Is?t:Is.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Tg(e,t)}get root(){const e=new Is(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mL(this._location.path)}get storage(){return this._service}get parent(){const e=function v6(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Is(this._location.bucket,e);return new Tg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw cL(e)}}function SL(n,e,t){return _M.apply(this,arguments)}function _M(){return _M=(0,me.Z)(function*(n,e,t){const i=yield xL(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield SL(n,e,i.nextPageToken))}),_M.apply(this,arguments)}function xL(n,e){null!=e&&"number"==typeof e.maxResults&&cM("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=R6(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Fl)}function X6(n){n._throwIfRoot("getDownloadURL");const e=function M6(n,e,t){const i=td(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new Bu(i,"GET",function x6(n,e){return function t(r,i){const a=_L(n,i,e);return ju(null!==a),function T6(n,e,t,r){const i=fM(e);if(null===i||!ID(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const c=encodeURIComponent;return a.split(",").map(E=>{const S=n.fullPath;return td("/b/"+c(n.bucket)+"/o/"+c(S),t,r)+hL({alt:"media",token:E})})[0]}(a,i,n.host,n._protocol)}}(n,t),c);return p.errorHandler=OE(e),p}(n.storage,n._location,PE());return n.storage.makeRequestWithTokens(e,Fl).then(t=>{if(null===t)throw function J3(){return new Rr("no-download-url","The given file does not have any download URLs.")}();return t})}function RL(n,e){const t=function w6(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Is(n._location.bucket,t);return new Tg(n.storage,r)}function ML(n,e){if(n instanceof yM){const t=n;if(null==t._bucket)throw function Y3(){return new Rr("no-default-bucket","No default bucket found. Did you set the '"+oL+"' property when initializing the app?")}();const r=new Tg(t,t._bucket);return null!=e?ML(r,e):r}return void 0!==e?RL(n,e):n}function rH(n,e){if(e&&function tH(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof yM)return function nH(n,e){return new Tg(n,e)}(n,e);throw by("To use ref(service, url), the first argument must be a Storage instance.")}return ML(n,e)}function kL(n,e){const t=null==e?void 0:e[oL];return null==t?null:Is.makeFromBucketSpec(t,n)}class yM{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=sL,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Is.makeFromBucketSpec(i,this._host):kL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Is.makeFromBucketSpec(this._url,e):kL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){cM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){cM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,me.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,me.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Tg(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new X3(uL());{const a=function c6(n,e,t,r,i,a){const c=hL(n.urlParams),p=n.url+c,_=Object.assign({},n.headers);return function l6(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function o6(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function a6(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(_,a),function u6(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new s6(p,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,me.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const NL="@firebase/storage";function FL(n,e){return rH(n=(0,P.m9)(n),e)}function pH(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new yM(t,r,i,e,jn.SDK_VERSION)}!function gH(){(0,jn._registerComponent)(new Qo.wA("storage",pH,"PUBLIC").setMultipleInstances(!0)),(0,jn.registerVersion)(NL,"0.9.4",""),(0,jn.registerVersion)(NL,"0.9.4","esm2017")}();class xD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class LL{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new xD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new xD(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?c=>t(new xD(c,this,this._ref)):{next:t.next?c=>t.next(new xD(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class UL{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new nd(e,this._service))}get items(){return this._delegate.items.map(e=>new nd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class nd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function hH(n,e){return RL(n,e)}(this._delegate,e);return new nd(t,this.storage)}get root(){return new nd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new nd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new LL(function sH(n,e,t){return function z6(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new DL(n,new Vu(e),t)}(n=(0,P.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=la.RAW,r){this._throwIfRoot("putString");const i=hM(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new LL(new DL(this._delegate,new Vu(i.data,!0),a),this)}listAll(){return function uH(n){return function Y6(n){const e={prefixes:[],items:[]};return SL(n,e).then(()=>e)}(n=(0,P.m9)(n))}(this._delegate).then(e=>new UL(e,this.storage))}list(e){return function lH(n,e){return xL(n=(0,P.m9)(n),e)}(this._delegate,e||void 0).then(t=>new UL(t,this.storage))}getMetadata(){return function oH(n){return function Q6(n){n._throwIfRoot("getMetadata");const e=wL(n.storage,n._location,PE());return n.storage.makeRequestWithTokens(e,Fl)}(n=(0,P.m9)(n))}(this._delegate)}updateMetadata(e){return function aH(n,e){return function J6(n,e){n._throwIfRoot("updateMetadata");const t=function k6(n,e,t,r){const a=td(e.fullServerUrl(),n.host,n._protocol),p=pM(t,r),E=n.maxOperationRetryTime,D=new Bu(a,"PATCH",AD(n,r),E);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=p,D.errorHandler=OE(e),D}(n.storage,n._location,e,PE());return n.storage.makeRequestWithTokens(t,Fl)}(n=(0,P.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function cH(n){return X6(n=(0,P.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function dH(n){return function eH(n){n._throwIfRoot("deleteObject");const e=function N6(n,e){const r=td(e.fullServerUrl(),n.host,n._protocol),p=new Bu(r,"DELETE",function c(_,E){},n.maxOperationRetryTime);return p.successCodes=[200,204],p.errorHandler=OE(e),p}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Fl)}(n=(0,P.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw cL(e)}}class VL{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(BL(e))throw by("ref() expected a child path but got a URL, use refFromURL instead.");return new nd(FL(this._delegate,e),this)}refFromURL(e){if(!BL(e))throw by("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Is.makeFromUrl(e,this._delegate.host)}catch(t){throw by("refFromUrl() expected a valid full URL but got an invalid one.")}return new nd(FL(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function fH(n,e,t,r={}){!function iH(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,P.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function BL(n){return/^[A-Za-z]+:\/\//.test(n)}function vH(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new VL(t,r)}function jL(n){const e=function EH(n){return new ur.y(e=>{const t=c=>e.next(c);t(n.snapshot);const a=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){a()}}).pipe(function V3(n,e=Dc.z){return(0,mr.e)((t,r)=>{let i=null,a=null,c=null;const p=()=>{if(i){i.unsubscribe(),i=null;const E=a;a=null,r.next(E)}};function _(){const E=c+n,D=e.now();if(D<E)return i=this.schedule(void 0,E-D),void r.add(i);p()}t.subscribe(new Ln.Q(r,E=>{a=E,c=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{p(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,at.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function RD(n){return{getDownloadURL:()=>pt(void 0).pipe(gn.fc,Dn(()=>n.getDownloadURL()),gn.iC),getMetadata:()=>pt(void 0).pipe(gn.fc,Dn(()=>n.getMetadata()),gn.iC),delete:()=>(0,ln.D)(n.delete()),child:e=>RD(n.child(e)),updateMetadata:e=>(0,ln.D)(n.updateMetadata(e)),put:(e,t)=>jL(n.put(e,t)),putString:(e,t,r)=>jL(n.putString(e,t,r)),list:e=>(0,ln.D)(n.list(e)),listAll:()=>(0,ln.D)(n.listAll())}}!function wH(n){const e={TaskState:to,TaskEvent:U6,StringFormat:la,Storage:VL,Reference:nd};n.INTERNAL.registerComponent(new Qo.wA("storage-compat",vH,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.12")}(Xg.Z);const bH=new u.OlP("angularfire2.storageBucket"),CH=new u.OlP("angularfire2.storage.maxUploadRetryTime"),IH=new u.OlP("angularfire2.storage.maxOperationRetryTime"),TH=new u.OlP("angularfire2.storage.use-emulator");let HL=(()=>{class n{constructor(t,r,i,a,c,p,_,E,D,S){const N=(0,Ar.on)(t,c,r);this.storage=(0,Ar.cc)(`${N.name}.storage.${i}`,"AngularFireStorage",N.name,()=>{const U=c.runOutsideAngular(()=>N.storage(i||void 0)),H=D;return H&&U.useEmulator(...H),_&&U.setMaxUploadRetryTime(_),E&&U.setMaxOperationRetryTime(E),U},[_,E])}ref(t){return RD(this.storage.ref(t))}refFromURL(t){return RD(this.storage.refFromURL(t))}upload(t,r,i){return RD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ar.Dh),u.LFG(Ar.xv,8),u.LFG(bH,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(gn.HU),u.LFG(CH,8),u.LFG(IH,8),u.LFG(TH,8),u.LFG(Zc,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),DH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),AH=(()=>{class n{constructor(){Bp.Z.registerVersion("angularfire",gn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[HL],imports:[DH]}),n})();function SH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"label",3),u.O4$(),u.TgZ(2,"svg",4),u._UZ(3,"path",5),u.qZA(),u.kcU(),u.TgZ(4,"span",6),u._uU(5),u.qZA(),u.TgZ(6,"input",7),u.NdJ("change",function(i){return u.CHM(t),u.oxw().upload(i)}),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=u.oxw();u.xp6(5),u.hij("Ajouter ",t.displayName,"")}}function xH(n,e){if(1&n&&(u.TgZ(0,"div",8),u.O4$(),u.TgZ(1,"svg",9),u._UZ(2,"circle",10),u._UZ(3,"polyline",11),u._UZ(4,"circle",12),u.qZA(),u.kcU(),u.TgZ(5,"span"),u._uU(6),u.qZA(),u.qZA()),2&n){const t=u.oxw();u.xp6(6),u.Oqu(t.name)}}let RH=(()=>{class n{constructor(t){this.afStorage=t,this.uploadFileName=new u.vpe,this.progress=new u.vpe}ngOnInit(){"image"===this.type?this.displayName="une image":"file"===this.type&&(this.displayName="un fichier")}upload(t){this.name=t.target.files[0].name,"image"===this.type?this.ref=this.afStorage.ref(`images/${this.name}`):"file"===this.type&&(this.ref=this.afStorage.ref("/files/"+this.name)),this.task=this.ref.put(t.target.files[0]),this.progress.emit(this.uploadProgress=this.task.snapshotChanges().pipe((0,at.U)(r=>r.bytesTransferred/r.totalBytes*100))),this.task.snapshotChanges().pipe(rc(()=>{this.ref.getDownloadURL().pipe((0,at.U)(r=>{this.uploadFileName.emit(r)})).subscribe()})).subscribe()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(HL))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-upload-file"]],inputs:{type:"type"},outputs:{uploadFileName:"uploadFileName",progress:"progress"},decls:5,vars:4,consts:[[1,"flex","justify-between","py-2"],[4,"ngIf","ngIfElse"],["uploadSucess",""],[1,"flex","flex-col","items-center","px-4","py-6","bg-primary-50","text-primary-700","rounded-lg","shadow-lg","tracking-wide","uppercase","border","border-primary-800","cursor-pointer","hover:bg-primary-100","hover:text-primary-600"],["fill","currentColor","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20",1,"w-8","h-8"],["d","M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z"],[1,"mt-2","text-base","leading-normal"],["type","file",1,"hidden",3,"change"],[1,"flex","flex-col","items-center","px-4","py-6","bg-primary-50","text-primary-700","rounded-lg","shadow-lg","tracking-wide","uppercase","border","border-primary-800"],["xmlns","http://www.w3.org/2000/svg","width","36","height","36","fill","#911011","viewBox","0 0 256 256"],["cx","128","cy","128","r","96","opacity","0.2"],["points","172 104 113.3 160 84 132","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["cx","128","cy","128","r","96","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"]],template:function(t,r){if(1&t&&(u.TgZ(0,"div",0),u.YNc(1,SH,7,1,"div",1),u.ALo(2,"async"),u.YNc(3,xH,7,1,"ng-template",null,2,u.W1O),u.qZA()),2&t){const i=u.MAs(4);u.xp6(1),u.Q6J("ngIf",100!==u.lcZ(2,2,r.uploadProgress))("ngIfElse",i)}},directives:[wi],pipes:[ma],styles:[""]}),n})();function MH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",5),u.TgZ(1,"div",6),u.TgZ(2,"h1",7),u._uU(3,"Ajouter un article"),u.qZA(),u.TgZ(4,"div",8),u.O4$(),u.TgZ(5,"svg",9),u._UZ(6,"circle",10),u._UZ(7,"circle",11),u._UZ(8,"line",12),u._UZ(9,"line",13),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(10,"form",14,15),u.NdJ("ngSubmit",function(){u.CHM(t);const i=u.MAs(11);return u.oxw().onSubmit(i)}),u.TgZ(12,"div",16),u.TgZ(13,"label",17),u._uU(14," Titre * "),u.qZA(),u.TgZ(15,"input",18),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().title=i}),u.qZA(),u.qZA(),u.TgZ(16,"div",16),u.TgZ(17,"label",19),u._uU(18," Description * "),u.qZA(),u.TgZ(19,"textarea",20),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().description=i}),u.qZA(),u.qZA(),u.TgZ(20,"div",16),u.TgZ(21,"label",19),u._uU(22," Date de creation * "),u.qZA(),u.TgZ(23,"input",21),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().creationDate=i}),u.ALo(24,"date"),u.qZA(),u.qZA(),u.TgZ(25,"div",22),u.TgZ(26,"app-upload-file",23),u.NdJ("uploadFileName",function(i){return u.CHM(t),u.oxw().onUploadImage(i)})("progress",function(i){return u.CHM(t),u.oxw().onProgressUploadImage(i)}),u.qZA(),u.TgZ(27,"app-upload-file",23),u.NdJ("uploadFileName",function(i){return u.CHM(t),u.oxw().onUploadFile(i)})("progress",function(i){return u.CHM(t),u.oxw().onProgressUploadFile(i)}),u.qZA(),u.qZA(),u.TgZ(28,"div",24),u.TgZ(29,"button",25),u.ALo(30,"async"),u.TgZ(31,"span",26),u._uU(32," Ajouter"),u.qZA(),u.TgZ(33,"span",27),u.O4$(),u.TgZ(34,"svg",28),u._UZ(35,"rect",29),u._UZ(36,"circle",10),u._UZ(37,"polyline",30),u._UZ(38,"circle",31),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(39,"a",32),u.O4$(),u.TgZ(40,"svg",33),u._UZ(41,"rect",29),u._UZ(42,"line",34),u._UZ(43,"polyline",35),u.qZA(),u._uU(44," Back "),u.qZA(),u.qZA()}if(2&n){const t=u.MAs(11),r=u.oxw();u.xp6(15),u.Q6J("ngModel",r.title),u.xp6(4),u.Q6J("ngModel",r.description),u.xp6(4),u.Q6J("ngModel",u.xi3(24,6,r.creationDate,"yyyy-MM-dd")),u.xp6(3),u.Q6J("type","image"),u.xp6(1),u.Q6J("type","file"),u.xp6(2),u.Q6J("disabled",t.invalid||u.lcZ(30,9,r.progressUploadImage)<100&&""!==r.imageName)}}function kH(n,e){1&n&&(u.TgZ(0,"div",5),u.TgZ(1,"div",36),u.O4$(),u.TgZ(2,"svg",9),u._UZ(3,"circle",10),u._UZ(4,"polyline",37),u._UZ(5,"circle",38),u.qZA(),u.kcU(),u.TgZ(6,"h1",39),u._uU(7," Article ajout\xe9e avec succ\xe8s "),u.qZA(),u.TgZ(8,"a",40),u.O4$(),u.TgZ(9,"svg",33),u._UZ(10,"rect",29),u._UZ(11,"line",34),u._UZ(12,"polyline",35),u.qZA(),u._uU(13," Back "),u.qZA(),u.qZA(),u.qZA())}let NH=(()=>{class n{constructor(t,r,i){this.db=t,this.articleService=r,this.datePipe=i,this.id="",this.status="",this.title="",this.description="",this.creationDate=new Date,this.fileName="",this.imageName="",this.progressUploadImage=new ur.y,this.progressUploadFile=new ur.y,this.articleAdded=!1}ngOnInit(){this.datePipe.transform(this.creationDate,"dd/MM/yyyy")}onSubmit(t){const r={title:t.value.title,description:t.value.description,creationDate:t.value.creationDate,imageName:this.imageName,fileName:this.fileName};this.db.object(`articles/${this.title}`).set(r).finally(()=>{this.articleAdded=!0})}onUploadImage(t){this.imageName=t}onUploadFile(t){this.fileName=t}onProgressUploadImage(t){this.progressUploadImage=t}onProgressUploadFile(t){this.progressUploadFile=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Th),u.Y36(vy),u.Y36(_a))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-add-article-page"]],decls:6,vars:2,consts:[[1,"container","max-w-full","max-h-full","bg-primary-300"],[1,"bg-primary-50","py-8","px-4","flex","flex-col","items-center","justify-center","min-h-screen"],[1,"bg-primary-50","border-dashed","border-primary-700","border-2","rounded-xl","py-12","lg:px-28","px-8","shadow-xl","md:w-246"],["class","container w-full",4,"ngIf","ngIfElse"],["articleAddedSuccess",""],[1,"container","w-full"],[1,"flex","items-center","justify-center","mb-4"],[1,"text-primary-700","text-3xl","font-bold"],[1,"flex","justify-center","items-center","ml-8"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","#911011","viewBox","0 0 256 256"],["cx","128","cy","128","r","96","opacity","0.2"],["cx","128","cy","128","r","96","fill","none","stroke","#911011","stroke-miterlimit","10","stroke-width","16"],["x1","88","y1","128","x2","168","y2","128","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","128","y1","88","x2","128","y2","168","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[3,"ngSubmit"],["formSearch","ngForm"],[1,"mb-4"],["for","username",1,"block","text-primary-700","text-sm","font-bold","mb-2"],["name","title","id","title","type","text","maxlength","100","placeholder","Titre","aria-label","Tilte","required","",1,"w-full","focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","bg-white","rounded","placeholder-primary-100",3,"ngModel","ngModelChange"],["for","password",1,"block","text-primary-700","text-sm","font-bold","mb-2"],["name","description","required","","id","description","type","description","maxlength","350","placeholder","Entrer une description de votre article","aria-label","Description",1,"justify-start","w-full","focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","bg-white","rounded","placeholder-primary-100","h-56","overflow-y-scroll",3,"ngModel","ngModelChange"],["name","creationDate","required","","id","creationDate","min","2018-01-01","max","2030-12-31","type","date","aria-label","CreationDate",1,"w-full","focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","bg-white","rounded","placeholder-primary-100",3,"ngModel","ngModelChange"],[1,"mb-4","flex","justify-between","items-center"],[3,"type","uploadFileName","progress"],[1,"flex","items-center","justify-center","my-8"],["type","submit",1,"relative","py-4","px-6","disabled:bg-primary-100","disabled:hover:bg-primary-100","bg-secondary-600","hover:bg-secondary-500","rounded-lg","leading-none","flex","items-center","text","divide-x","divide-secondary-50",3,"disabled"],[1,"text-secondary-50","pr-6","font-sans","transition","duration-200"],[1,"flex","items-center","space-x-5","pl-6"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","#fafafa","viewBox","0 0 256 256"],["width","256","height","256","fill","none"],["points","172 104 113.3 160 84 132","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["cx","128","cy","128","r","96","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["routerLink","/login",1,"underline","text-primary-500","hover:text-primary-600","inline-flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","fill","#ba2525","viewBox","0 0 256 256",1,"mr-1"],["x1","216","y1","128","x2","40","y2","128","fill","none","stroke","#ba2525","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["points","112 56 40 128 112 200","fill","none","stroke","#ba2525","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"flex","flex-col","justify-center","items-center"],["points","172 104 113.3 160 84 132","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["cx","128","cy","128","r","96","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"text-primary-700","text-3xl","font-bold","mt-4"],["routerLink","/login",1,"underline","text-primary-500","hover:text-primary-600","inline-flex","items-center","justify-center","mt-4"]],template:function(t,r){if(1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.YNc(3,MH,45,11,"div",3),u.YNc(4,kH,14,0,"ng-template",null,4,u.W1O),u.qZA(),u.qZA(),u.qZA()),2&t){const i=u.MAs(5);u.xp6(3),u.Q6J("ngIf",!r.articleAdded)("ngIfElse",i)}},directives:[wi,RE,IE,Ig,wy,CD,ME,fD,xE,RH,f],pipes:[_a,ma],encapsulation:2}),n})();class $L{}let PH=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-article-card"]],inputs:{article:"article"},decls:20,vars:9,consts:[[1,"container","md:w-138","bg-primary-50","rounded-lg","shadow-xl"],["alt","Syncing",1,"md:object-cover","object-center","md:w-138","md:h-[288px]","rounded-t-lg","bg-primary-50",3,"src"],[1,"block","md:w-138","h-92","bg-primary-800","opacity-40","text-left","rounded-b-lg","px-4","py-8"],[1,"h-12","px-1","py-2","font-bold","text-white"],[1,"font-thin","text-white"],[1,"h-36","px-1","py-2","font-bold","text-white"],[1,"px-1","py-2","font-bold","text-white"],["target","_blank","download","",1,"font-thin","text-primary-100","underline",3,"href"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u._UZ(1,"img",1),u.TgZ(2,"div",2),u.TgZ(3,"h2",3),u._uU(4," Titre: "),u.TgZ(5,"span",4),u._uU(6),u.qZA(),u.qZA(),u.TgZ(7,"h2",5),u._uU(8," Description: "),u.TgZ(9,"span",4),u._uU(10),u.qZA(),u.qZA(),u.TgZ(11,"h2",6),u._uU(12," Date de publication: "),u.TgZ(13,"span",4),u._uU(14),u.ALo(15,"date"),u.qZA(),u.qZA(),u.TgZ(16,"h2",6),u._uU(17," T\xe9l\xe9charger l'article complet: "),u.TgZ(18,"a",7),u._uU(19),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(1),u.s9C("src",r.article.imageName,u.LSH),u.xp6(5),u.Oqu(r.article.title),u.xp6(4),u.Oqu(r.article.description),u.xp6(4),u.Oqu(u.xi3(15,6,r.article.creationDate,"dd/MM/YYYY")),u.xp6(4),u.s9C("href",r.article.fileName,u.LSH),u.xp6(1),u.hij(" ",r.article.title," "))},pipes:[_a],styles:[""]}),n})();function OH(n,e){if(1&n&&(u.O4$(),u.kcU(),u.TgZ(0,"div"),u.TgZ(1,"div",18),u.TgZ(2,"h2",19),u._uU(3),u.qZA(),u.qZA(),u.qZA()),2&n){const t=u.oxw();u.xp6(3),u.hij(" ",t.searchFound," articles trouv\xe9s ")}}function FH(n,e){1&n&&(u.O4$(),u.kcU(),u.TgZ(0,"div",18),u.TgZ(1,"h2",19),u._uU(2," Aucun article trouv\xe9s "),u.qZA(),u.qZA())}function LH(n,e){if(1&n&&(u.TgZ(0,"li",20),u._UZ(1,"app-article-card",21),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.Q6J("article",t)}}let UH=(()=>{class n{constructor(t){this.articleService=t,this.currentCountArticles=new u.vpe,this.updateCurrentPage=new u.vpe,this.actualPage=1,this.searchFound=0,this.searchWord="",this.perPage=2}set currentPage(t){this.actualPage=t,this.searchWord.length>0?this.articleService.search(this.searchWord).subscribe(r=>{this.articles=this.articleService.paginate(r,this.actualPage,this.perPage),this.searchFound=this.articles.length,this.currentCountArticles.emit(this.articles.length)}):this.articleService.getArticles().subscribe(r=>{this.articles=r,this.articlesOnPage=this.articleService.paginate(r,this.actualPage,this.perPage),this.searchFound=this.articles.length,this.currentCountArticles.emit(this.articles.length)})}onTyping(t){this.searchWord=t.target.value,this.actualPage=1,this.updateCurrentPage.emit(this.actualPage),this.searchWord.length>0?this.articleService.search(this.searchWord).subscribe(r=>{this.articles=r,this.articlesOnPage=this.articleService.paginate(r,this.actualPage,this.perPage),this.searchFound=this.articles.length,this.currentCountArticles.emit(this.articles.length)}):this.articleService.getArticles().subscribe(r=>{this.articles=r,this.articlesOnPage=this.articleService.paginate(r,this.actualPage,this.perPage),this.searchFound=this.articles.length,this.currentCountArticles.emit(this.articles.length)})}onSubmit(t){this.searchWord=t.value.word,this.actualPage=1,this.updateCurrentPage.emit(this.actualPage),this.searchWord.length>0?this.articleService.search(this.searchWord).subscribe(r=>{this.articles=r,this.articlesOnPage=this.articleService.paginate(r,this.actualPage,this.perPage),this.searchFound=this.articles.length,this.currentCountArticles.emit(this.articles.length)}):this.articleService.getArticles().subscribe(r=>{this.articles=r,this.articlesOnPage=this.articleService.paginate(r,this.actualPage,this.perPage),this.searchFound=this.articles.length,this.currentCountArticles.emit(this.articles.length)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(vy))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-articles"]],inputs:{currentPage:"currentPage"},outputs:{currentCountArticles:"currentCountArticles",updateCurrentPage:"updateCurrentPage"},decls:19,vars:4,consts:[[1,"container","max-w-screen-2xl","mx-auto"],[1,"pt-4","px-4"],[1,"flex","flex-col","items-center","justify-center","pt-2","px-4"],[1,"inline-flex",3,"ngSubmit"],["formSearch","ngForm"],["name","word","type","text","placeholder","Search","aria-label","Search",1,"font-thin","text-secondary-600","px-2","py-2","outline-none","focus:ring-primary-200","focus:ring-1","rounded-l-md","placeholder-primary-200","bg-white",3,"keyup"],["type","submit",1,"relative","py-2","px-4","bg-secondary-600","hover:bg-secondary-500","rounded-r-md","ring-1","ring-secondary-500","leading-none","flex","items-center",3,"disabled"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","#fafafa","viewBox","0 0 256 256"],["width","256","height","256","fill","none"],["cx","116","cy","116","r","84","opacity","0.2"],["cx","116","cy","116","r","84","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","175.4","y1","175.4","x2","224","y2","224","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[4,"ngIf","ngIfElse"],["nothingFound",""],[1,"flex","items-center","justify-center"],[1,"grid","md:grid-cols-2","grid-cols-1","grid-rows-1","gap-20","place-content-evenly","max-w-screen-xl"],["class","col-span-1 row-span-1 bg-transparent px-4",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-center","py-4","px-4"],[1,"font-sans","font-bold","text-center","text-primary-700"],[1,"col-span-1","row-span-1","bg-transparent","px-4"],[3,"article"]],template:function(t,r){if(1&t){const i=u.EpF();u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"form",3,4),u.NdJ("ngSubmit",function(){u.CHM(i);const c=u.MAs(4);return r.onSubmit(c)}),u.TgZ(5,"input",5),u.NdJ("keyup",function(c){return r.onTyping(c)}),u.qZA(),u.TgZ(6,"button",6),u.TgZ(7,"span",7),u.O4$(),u.TgZ(8,"svg",8),u._UZ(9,"rect",9),u._UZ(10,"circle",10),u._UZ(11,"circle",11),u._UZ(12,"line",12),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(13,OH,4,1,"div",13),u.YNc(14,FH,3,0,"ng-template",null,14,u.W1O),u.qZA(),u.qZA(),u.kcU(),u.TgZ(16,"div",15),u.TgZ(17,"ul",16),u.YNc(18,LH,2,1,"li",17),u.qZA(),u.qZA(),u.qZA()}if(2&t){const i=u.MAs(4),a=u.MAs(15);u.xp6(6),u.Q6J("disabled",i.invalid),u.xp6(7),u.Q6J("ngIf",r.searchFound>0)("ngIfElse",a),u.xp6(5),u.Q6J("ngForOf",r.articlesOnPage)}},directives:[RE,IE,Ig,wi,io,PH],encapsulation:2}),n})(),VH=(()=>{class n{constructor(t){this.articleService=t,this.perPage=2,this.page=1,this.max_page=0,this.currentPage=new u.vpe,t.sendCurrentNumberPage.subscribe(r=>{})}set currentMaxPage(t){this.max_page=Math.ceil(t/this.perPage)}ngOnInit(){this.articleService.getCountArticles().subscribe(t=>this.max_page=Math.ceil(t/this.perPage))}next(){this.page=this.page<this.max_page?this.page+1:1,this.currentPage.emit(this.page)}previous(){this.page>1?this.page=this.page-1:(console.log(this.max_page),this.page=this.max_page),this.currentPage.emit(this.page)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(vy))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-paginate"]],inputs:{currentMaxPage:"currentMaxPage"},outputs:{currentPage:"currentPage"},decls:12,vars:0,consts:[[1,"flex","items-center","justify-center","px-4","py-8"],["aria-label","Pagination",1,"relative","z-0","inline-flex","rounded-md","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-primary-100","bg-white","text-sm","font-medium","text-primary-800","hover:bg-primary-50",3,"click"],[1,"sr-only"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"h-5","w-5"],["fill-rule","evenodd","d","M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule","evenodd"],[1,"outline-none","relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-primary-100","bg-white","text-sm","font-medium","text-primary-800","hover:bg-primary-50",3,"click"],["fill-rule","evenodd","d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule","evenodd"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"nav",1),u.TgZ(2,"button",2),u.NdJ("click",function(){return r.previous()}),u.TgZ(3,"span",3),u._uU(4,"Previous"),u.qZA(),u.O4$(),u.TgZ(5,"svg",4),u._UZ(6,"path",5),u.qZA(),u.qZA(),u.kcU(),u.TgZ(7,"button",6),u.NdJ("click",function(){return r.next()}),u.TgZ(8,"span",3),u._uU(9,"Next"),u.qZA(),u.O4$(),u.TgZ(10,"svg",4),u._UZ(11,"path",7),u.qZA(),u.qZA(),u.qZA(),u.qZA())},styles:[""]}),n})(),BH=(()=>{class n{constructor(t){this.articleService=t,this.lastArticle=new $L,this.currentArticlePage=1}ngOnInit(){this.articleService.getLastArticle().subscribe(t=>{this.lastArticle=t})}setCurrentArticlePage(t){this.currentArticlePage=t}updateCountArticles(t){this.currentCountArticles=t}updateCurrentPage(t){this.currentArticlePage=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(vy))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-articles-page"]],decls:4,vars:2,consts:[[1,"bg-primary-50","min-w-full","min-h-screen"],[1,"flex","items-center","justify-center","flex-col"],[3,"currentPage","updateCurrentPage","currentCountArticles"],[1,"mt-4",3,"currentMaxPage","currentPage"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"app-articles",2),u.NdJ("updateCurrentPage",function(a){return r.updateCurrentPage(a)})("currentCountArticles",function(a){return r.updateCountArticles(a)}),u.qZA(),u.TgZ(3,"app-paginate",3),u.NdJ("currentPage",function(a){return r.setCurrentArticlePage(a)}),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(2),u.Q6J("currentPage",r.currentArticlePage),u.xp6(1),u.Q6J("currentMaxPage",r.currentCountArticles))},directives:[UH,VH],styles:[""]}),n})();class ZL{}class qL{}class rd{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(c):this.headers.set(a,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof rd?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new rd;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof rd?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let c=this.headers.get(t);if(!c)return;c=c.filter(p=>-1===a.indexOf(p)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class jH{encodeKey(e){return GL(e)}encodeValue(e){return GL(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const $H=/%(\d[a-f0-9])/gi,ZH={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function GL(n){return encodeURIComponent(n).replace($H,(e,t)=>{var r;return null!==(r=ZH[t])&&void 0!==r?r:e})}function WL(n){return`${n}`}class Kh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new jH,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function HH(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[c,p]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],_=t.get(c)||[];_.push(p),t.set(c,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Kh({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(WL(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(WL(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class qH{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function zL(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function KL(n){return"undefined"!=typeof Blob&&n instanceof Blob}function YL(n){return"undefined"!=typeof FormData&&n instanceof FormData}class FE{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function GH(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new rd),this.context||(this.context=new qH),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+c}}else this.params=new Kh,this.urlWithParams=t}serializeBody(){return null===this.body?null:zL(this.body)||KL(this.body)||YL(this.body)||function WH(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Kh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||YL(this.body)?null:KL(this.body)?this.body.type||null:zL(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Kh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,a=e.responseType||this.responseType,c=void 0!==e.body?e.body:this.body,p=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,_=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let E=e.headers||this.headers,D=e.params||this.params;const S=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(E=Object.keys(e.setHeaders).reduce((N,U)=>N.set(U,e.setHeaders[U]),E)),e.setParams&&(D=Object.keys(e.setParams).reduce((N,U)=>N.set(U,e.setParams[U]),D)),new FE(r,i,c,{params:D,headers:E,context:S,reportProgress:_,responseType:a,withCredentials:p})}}var Xr=(()=>((Xr=Xr||{})[Xr.Sent=0]="Sent",Xr[Xr.UploadProgress=1]="UploadProgress",Xr[Xr.ResponseHeader=2]="ResponseHeader",Xr[Xr.DownloadProgress=3]="DownloadProgress",Xr[Xr.Response=4]="Response",Xr[Xr.User=5]="User",Xr))();class vM{constructor(e,t=200,r="OK"){this.headers=e.headers||new rd,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class wM extends vM{constructor(e={}){super(e),this.type=Xr.ResponseHeader}clone(e={}){return new wM({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class MD extends vM{constructor(e={}){super(e),this.type=Xr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new MD({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class QL extends vM{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function EM(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let JL=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof FE)a=t;else{let _,E;_=i.headers instanceof rd?i.headers:new rd(i.headers),i.params&&(E=i.params instanceof Kh?i.params:new Kh({fromObject:i.params})),a=new FE(t,r,void 0!==i.body?i.body:null,{headers:_,context:i.context,params:E,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=pt(a).pipe(ds(_=>this.handler.handle(_)));if(t instanceof FE||"events"===i.observe)return c;const p=c.pipe(Ci(_=>_ instanceof MD));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return p.pipe((0,at.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return p.pipe((0,at.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return p.pipe((0,at.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return p.pipe((0,at.U)(_=>_.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Kh).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,EM(i,r))}post(t,r,i={}){return this.request("POST",t,EM(i,r))}put(t,r,i={}){return this.request("PUT",t,EM(i,r))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ZL))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class XL{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const e2=new u.OlP("HTTP_INTERCEPTORS");let zH=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const KH=/^\)\]\}',?\n/;let t2=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ur.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((U,H)=>i.setRequestHeader(U,H.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const U=t.detectContentTypeHeader();null!==U&&i.setRequestHeader("Content-Type",U)}if(t.responseType){const U=t.responseType.toLowerCase();i.responseType="json"!==U?U:"text"}const a=t.serializeBody();let c=null;const p=()=>{if(null!==c)return c;const U=1223===i.status?204:i.status,H=i.statusText||"OK",ue=new rd(i.getAllResponseHeaders()),Ee=function YH(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return c=new wM({headers:ue,status:U,statusText:H,url:Ee}),c},_=()=>{let{headers:U,status:H,statusText:ue,url:Ee}=p(),Ke=null;204!==H&&(Ke=void 0===i.response?i.responseText:i.response),0===H&&(H=Ke?200:0);let qe=H>=200&&H<300;if("json"===t.responseType&&"string"==typeof Ke){const ct=Ke;Ke=Ke.replace(KH,"");try{Ke=""!==Ke?JSON.parse(Ke):null}catch(ze){Ke=ct,qe&&(qe=!1,Ke={error:ze,text:Ke})}}qe?(r.next(new MD({body:Ke,headers:U,status:H,statusText:ue,url:Ee||void 0})),r.complete()):r.error(new QL({error:Ke,headers:U,status:H,statusText:ue,url:Ee||void 0}))},E=U=>{const{url:H}=p(),ue=new QL({error:U,status:i.status||0,statusText:i.statusText||"Unknown Error",url:H||void 0});r.error(ue)};let D=!1;const S=U=>{D||(r.next(p()),D=!0);let H={type:Xr.DownloadProgress,loaded:U.loaded};U.lengthComputable&&(H.total=U.total),"text"===t.responseType&&!!i.responseText&&(H.partialText=i.responseText),r.next(H)},N=U=>{let H={type:Xr.UploadProgress,loaded:U.loaded};U.lengthComputable&&(H.total=U.total),r.next(H)};return i.addEventListener("load",_),i.addEventListener("error",E),i.addEventListener("timeout",E),i.addEventListener("abort",E),t.reportProgress&&(i.addEventListener("progress",S),null!==a&&i.upload&&i.upload.addEventListener("progress",N)),i.send(a),r.next({type:Xr.Sent}),()=>{i.removeEventListener("error",E),i.removeEventListener("abort",E),i.removeEventListener("load",_),i.removeEventListener("timeout",E),t.reportProgress&&(i.removeEventListener("progress",S),null!==a&&i.upload&&i.upload.removeEventListener("progress",N)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Oo))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const bM=new u.OlP("XSRF_COOKIE_NAME"),CM=new u.OlP("XSRF_HEADER_NAME");class n2{}let QH=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Tt(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe),u.LFG(u.Lbi),u.LFG(bM))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),IM=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(n2),u.LFG(CM))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),JH=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(e2,[]);this.chain=r.reduceRight((i,a)=>new XL(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(qL),u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),XH=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:IM,useClass:zH}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:bM,useValue:t.cookieName}:[],t.headerName?{provide:CM,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[IM,{provide:e2,useExisting:IM,multi:!0},{provide:n2,useClass:QH},{provide:bM,useValue:"XSRF-TOKEN"},{provide:CM,useValue:"X-XSRF-TOKEN"}]}),n})(),e8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[JL,{provide:ZL,useClass:JH},t2,{provide:qL,useExisting:t2}],imports:[[XH.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),r2=(()=>{class n{constructor(t){this.httpCLient=t,this.aliasMailThis="https://mailthis.to/lchop"}postMessageContact(t){return this.httpCLient.post(this.aliasMailThis,t,{responseType:"text"}).pipe((0,at.U)(r=>r,r=>r))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(JL))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function t8(n,e){if(1&n&&(u.TgZ(0,"button",35),u.TgZ(1,"span",36),u._uU(2," Envoyez"),u.qZA(),u.TgZ(3,"span",37),u.O4$(),u.TgZ(4,"svg",38),u._UZ(5,"rect",6),u._UZ(6,"path",39),u._UZ(7,"path",40),u._UZ(8,"path",41),u._UZ(9,"line",42),u._UZ(10,"path",43),u.qZA(),u.qZA(),u.qZA()),2&n){const t=u.oxw(),r=u.MAs(14);u.Q6J("disabled",r.invalid||t.waitResponse)}}function n8(n,e){1&n&&(u.TgZ(0,"div",44),u.O4$(),u.TgZ(1,"svg",45),u._UZ(2,"path",46),u._UZ(3,"path",47),u.qZA(),u.qZA())}function r8(n,e){1&n&&(u.TgZ(0,"div",48),u._uU(1," * Veuillez compl\xe8ter votre nom "),u.qZA())}function i8(n,e){1&n&&(u.TgZ(0,"div",48),u._uU(1," * Veuillez utiliser un email valide "),u.qZA())}function s8(n,e){1&n&&(u.TgZ(0,"div",48),u._uU(1," * Veuillez compl\xe8ter votre message "),u.qZA())}function o8(n,e){1&n&&(u.TgZ(0,"div",48),u._uU(1," * Veuillez compl\xe8ter votre entreprise "),u.qZA())}let a8=(()=>{class n{constructor(t){this.contact=t,this.waitResponse=!1}ngOnInit(){}onSubmit(t){this.waitResponse=!0,this.contact.postMessageContact(t.value).subscribe(r=>{location.href="https://mailthis.to/confirm",this.waitResponse=!1},r=>{console.log({error:r})})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(r2))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-contact-page"]],decls:45,vars:10,consts:[[1,"container","max-w-full","bg-primary-50","mt-0"],[1,"bg-primary-50","min-h-screen","w-full"],[1,"flex","items-center","justify-center","py-5","px-4"],[1,"bg-primary-50","border-dashed","border-primary-700","border-2","rounded-xl","py-12","lg:px-28","px-8","shadow-xl"],[1,"md:text-3xl","text-xl","font-bold","leading-7","text-center","text-primary-700","inline-flex","justify-center","items-center"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","#911011","viewBox","0 0 256 256",1,"ml-8"],["width","256","height","256","fill","none"],["points","224 96 145.5 152 110.5 152 32 96 128 32 224 96","opacity","0.2"],["d","M32,96V200a8,8,0,0,0,8,8H216a8,8,0,0,0,8-8V96L128,32Z","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","110.5","y1","152","x2","34.5","y2","205.7","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","221.5","y1","205.7","x2","145.5","y2","152","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["points","224 96 145.5 152 110.5 152 32 96","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[3,"ngSubmit"],["formContact","ngForm"],[1,"md:flex","items-center","mt-12"],[1,"md:w-72","flex","flex-col"],["for","name",1,"text-base","font-semibold","leading-none","text-primary-800"],["name","name","id","name","type","text","maxlength","25","minlength","2","placeholder","Compl\xe9ter votre nom","arial-label","name","required","",1,"focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","mt-4","bg-white","rounded","placeholder-primary-100",3,"ngModel","ngModelChange"],["prmName","ngModel"],[1,"md:w-72","flex","flex-col","md:ml-6","md:mt-0","mt-4"],["for","email",1,"text-base","font-semibold","leading-none","text-primary-800"],["name","email","id","email","type","email","minlength","5","maxlength","100","placeholder","Compl\xe9ter votre email","arial-label","email","required","","email","",1,"focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","mt-4","bg-white","rounded","placeholder-primary-100",3,"ngModel","ngModelChange"],["prmEmail","ngModel"],[1,"md:flex","items-center","mt-8"],["for","company",1,"text-base","font-semibold","leading-none","text-primary-800"],["name","company","id","company","type","text","minlength","2","maxlength","100","placeholder","Nom de votre entreprise","arial-label","company","required","",1,"focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","mt-4","bg-white","rounded","placeholder-primary-100",3,"ngModel","ngModelChange"],["prmCompany","ngModel"],[1,"w-full","flex","flex-col","mt-8"],["for","message",1,"text-base","font-semibold","leading-none","text-primary-800"],["name","message","required","","id","message","type","text","minlength","2","maxlength","500","placeholder","Entrer votre message","aria-label","Message",1,"outline-none","h-36","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","mt-4","rounded","focus:ring-2","focus:ring-primary-700","border-primary-200","placeholder-primary-100","resize-none","bg-white",3,"ngModel","ngModelChange"],["prmMessage","ngModel"],[1,"flex","items-center","justify-center","w-full","mt-12"],["type","submit","class","relative py-4 px-6 disabled:bg-primary-100 disabled:hover:bg-primary-100 bg-secondary-600 hover:bg-secondary-500 rounded-lg leading-none flex items-center text divide-x divide-secondary-50",3,"disabled",4,"ngIf"],["class","mr-4",4,"ngIf"],["class","text-base font-thin text-primary-800 leading-none mt-8",4,"ngIf"],["type","submit",1,"relative","py-4","px-6","disabled:bg-primary-100","disabled:hover:bg-primary-100","bg-secondary-600","hover:bg-secondary-500","rounded-lg","leading-none","flex","items-center","text","divide-x","divide-secondary-50",3,"disabled"],[1,"text-secondary-50","pr-6","font-sans","transition","duration-200"],[1,"flex","items-center","space-x-5","pl-6","animate-tilt"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","#fafafa","viewBox","0 0 256 256"],["d","M88,134.9,224.1,36.6h0a7.8,7.8,0,0,0-6.2-.2L33.3,108.9c-7.4,2.9-6.4,13.7,1.4,15.3Z","opacity","0.2"],["d","M132.9,174.4l-31.2,31.2A8,8,0,0,1,88,200V134.9Z","opacity","0.2"],["d","M88,134.9,177.9,214a8,8,0,0,0,13.1-4.2L228.6,45.6a8,8,0,0,0-10.7-9.2L33.3,108.9c-7.4,2.9-6.4,13.7,1.4,15.3Z","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","88","y1","134.9","x2","224.1","y2","36.6","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M132.9,174.4l-31.2,31.2A8,8,0,0,1,88,200V134.9","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"mr-4"],["role","status","viewBox","0 0 100 101","fill","none","xmlns","http://www.w3.org/2000/svg",1,"w-8","h-8","mr-2","text-primary-100","animate-spin","fill-primary-800"],["d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z","fill","currentColor"],["d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z","fill","currentFill"],[1,"text-base","font-thin","text-primary-800","leading-none","mt-8"]],template:function(t,r){if(1&t){const i=u.EpF();u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"div",3),u.TgZ(4,"p",4),u._uU(5," Envie de travailler avec nous "),u.O4$(),u.TgZ(6,"svg",5),u._UZ(7,"rect",6),u._UZ(8,"polygon",7),u._UZ(9,"path",8),u._UZ(10,"line",9),u._UZ(11,"line",10),u._UZ(12,"polyline",11),u.qZA(),u.qZA(),u.kcU(),u.TgZ(13,"form",12,13),u.NdJ("ngSubmit",function(){u.CHM(i);const c=u.MAs(14);return r.onSubmit(c)}),u.TgZ(15,"div",14),u.TgZ(16,"div",15),u.TgZ(17,"label",16),u._uU(18,"Nom *"),u.qZA(),u.TgZ(19,"input",17,18),u.NdJ("ngModelChange",function(c){return r.name=c}),u.qZA(),u.qZA(),u.TgZ(21,"div",19),u.TgZ(22,"label",20),u._uU(23,"Email *"),u.qZA(),u.TgZ(24,"input",21,22),u.NdJ("ngModelChange",function(c){return r.email=c}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(26,"div",23),u.TgZ(27,"div",15),u.TgZ(28,"label",24),u._uU(29," Entreprise *"),u.qZA(),u.TgZ(30,"input",25,26),u.NdJ("ngModelChange",function(c){return r.company=c}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(32,"div"),u.TgZ(33,"div",27),u.TgZ(34,"label",28),u._uU(35,"Message *"),u.qZA(),u.TgZ(36,"textarea",29,30),u.NdJ("ngModelChange",function(c){return r.message=c}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(38,"div",31),u.YNc(39,t8,11,1,"button",32),u.YNc(40,n8,4,0,"div",33),u.qZA(),u.YNc(41,r8,2,0,"div",34),u.YNc(42,i8,2,0,"div",34),u.YNc(43,s8,2,0,"div",34),u.YNc(44,o8,2,0,"div",34),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&t){const i=u.MAs(20),a=u.MAs(25),c=u.MAs(31),p=u.MAs(37);u.xp6(19),u.Q6J("ngModel",r.name),u.xp6(5),u.Q6J("ngModel",r.email),u.xp6(6),u.Q6J("ngModel",r.company),u.xp6(6),u.Q6J("ngModel",r.message),u.xp6(3),u.Q6J("ngIf",!r.waitResponse),u.xp6(1),u.Q6J("ngIf",r.waitResponse),u.xp6(1),u.Q6J("ngIf",(null==i.errors?null:i.errors.minlength)&&i.touched),u.xp6(1),u.Q6J("ngIf",(null==a.errors?null:a.errors.email)&&a.touched),u.xp6(1),u.Q6J("ngIf",(null==p.errors?null:p.errors.minlength)&&p.touched),u.xp6(1),u.Q6J("ngIf",(null==c.errors?null:c.errors.minlength)&&c.touched)}},directives:[RE,IE,Ig,wy,CD,oM,ME,fD,xE,sM,wi],styles:[""]}),n})();function l8(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",12),u.TgZ(1,"div",13),u._UZ(2,"input",14),u.TgZ(3,"header",15),u.TgZ(4,"span",16),u._uU(5),u.qZA(),u.TgZ(6,"div",17),u.O4$(),u.TgZ(7,"svg",18),u._UZ(8,"polyline",19),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(9,"div",20),u.TgZ(10,"div",21),u.TgZ(11,"p"),u._uU(12),u.qZA(),u.TgZ(13,"button",22),u.NdJ("click",function(){const a=u.CHM(t).$implicit;return u.oxw().onDeleteArticleClick(a)}),u._uU(14," Supprimer "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=e.$implicit;u.xp6(5),u.hij(" ",t.title," "),u.xp6(7),u.Oqu(t.description)}}let u8=(()=>{class n{constructor(t){this.articleService=t,this.articles$=this.articleService.getArticles()}ngOnInit(){}onDeleteArticleClick(t){this.articleService.deleteArticle(t),this.articles$=this.articleService.getArticles()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(vy))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-delete-article"]],decls:15,vars:3,consts:[[1,"container","max-w-full","max-h-full","bg-primary-300"],[1,"bg-primary-50","py-8","px-4","flex","flex-col","min-w-screen","min-h-screen","items-center","justify-center"],[1,"container","max-w-xl","place-content-center"],[1,"text-primary-700","text-2xl","font-bold","mb-8"],[1,"shadow","row"],[1,"tabs"],["class","border-b tab",4,"ngFor","ngForOf"],["routerLink","/login",1,"underline","text-primary-500","hover:text-primary-600","inline-flex","items-center","justify-center","mt-4"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","fill","#ba2525","viewBox","0 0 256 256",1,"mr-1"],["width","256","height","256","fill","none"],["x1","216","y1","128","x2","40","y2","128","fill","none","stroke","#ba2525","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["points","112 56 40 128 112 200","fill","none","stroke","#ba2525","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"border-b","tab"],[1,"border-l-2","border-transparent","relative"],["type","checkbox","id","chck1",1,"w-full","absolute","z-10","cursor-pointer","opacity-0","h-5","top-6"],["for","chck1",1,"flex","justify-between","items-center","p-5","pl-8","pr-8","cursor-pointer","select-none","tab-label"],[1,"text-neutral-800","font-thin","text-xl"],[1,"rounded-full","border","border-neutral-300","w-7","h-7","flex","items-center","justify-center","test"],["aria-hidden","true","data-reactid","266","fill","none","height","24","stroke","#606F7B","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewbox","0 0 24 24","width","24","xmlns","http://www.w3.org/2000/svg",1,""],["points","6 9 12 15 18 9"],[1,"tab-content"],[1,"flex","justify-between","items-center","pl-8","pr-8","pb-5","text-neutral-800"],[1,"bg-primary-500","hover:bg-primary-600","text-white","font-thin","py-2","px-4","rounded-xl","ml-4",3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"h1",3),u._uU(4," Veuillez selectionner l'article \xe0 supprimer. "),u.qZA(),u.TgZ(5,"section",4),u.TgZ(6,"div",5),u.YNc(7,l8,15,2,"div",6),u.ALo(8,"async"),u.qZA(),u.qZA(),u.TgZ(9,"a",7),u.O4$(),u.TgZ(10,"svg",8),u._UZ(11,"rect",9),u._UZ(12,"line",10),u._UZ(13,"polyline",11),u.qZA(),u._uU(14," Back "),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(7),u.Q6J("ngForOf",u.lcZ(8,1,r.articles$)))},directives:[io,f],pipes:[ma],styles:[".tab[_ngcontent-%COMP%]{overflow:hidden}.tab-content[_ngcontent-%COMP%]{max-height:0;transition:all .5s}input[_ngcontent-%COMP%]:checked + .tab-label[_ngcontent-%COMP%]   .test[_ngcontent-%COMP%]{background-color:#000}input[_ngcontent-%COMP%]:checked + .tab-label[_ngcontent-%COMP%]   .test[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:rotate(180deg);stroke:#fff}input[_ngcontent-%COMP%]:checked + .tab-label[_ngcontent-%COMP%]:after{transform:rotate(90deg)}input[_ngcontent-%COMP%]:checked ~ .tab-content[_ngcontent-%COMP%]{max-height:100vh}"]}),n})();function c8(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",5),u.TgZ(1,"p",6),u._uU(2," Login "),u.O4$(),u.TgZ(3,"svg",7),u._UZ(4,"rect",8),u._UZ(5,"polyline",9),u._UZ(6,"line",10),u._UZ(7,"path",11),u.qZA(),u.qZA(),u.kcU(),u.TgZ(8,"form",12,13),u.NdJ("ngSubmit",function(){u.CHM(t);const i=u.MAs(9);return u.oxw().onSubmit(i)}),u.TgZ(10,"div",14),u.TgZ(11,"label",15),u._uU(12," Username "),u.qZA(),u.TgZ(13,"input",16),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().username=i}),u.qZA(),u.qZA(),u.TgZ(14,"div",17),u.TgZ(15,"label",18),u._uU(16," Password "),u.qZA(),u.TgZ(17,"input",19),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().password=i}),u.qZA(),u.qZA(),u.TgZ(18,"div",20),u.TgZ(19,"button",21),u._uU(20," Log In "),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=u.MAs(9),r=u.oxw();u.xp6(13),u.Q6J("ngModel",r.username),u.xp6(4),u.Q6J("ngModel",r.password),u.xp6(2),u.Q6J("disabled",t.invalid)}}function d8(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",22),u.TgZ(1,"p",6),u._uU(2),u.ALo(3,"async"),u.O4$(),u.TgZ(4,"svg",7),u._UZ(5,"rect",8),u._UZ(6,"circle",23),u._UZ(7,"circle",24),u._UZ(8,"path",25),u.qZA(),u.qZA(),u.kcU(),u.TgZ(9,"div",26),u.TgZ(10,"button",27),u.TgZ(11,"span",28),u._uU(12," Ajouter un article"),u.qZA(),u.TgZ(13,"span",29),u.O4$(),u.TgZ(14,"svg",30),u._UZ(15,"rect",8),u._UZ(16,"polygon",31),u._UZ(17,"path",32),u._UZ(18,"polyline",33),u._UZ(19,"line",34),u._UZ(20,"line",35),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(21,"button",36),u.TgZ(22,"span",28),u._uU(23," Supprimer un article"),u.qZA(),u.TgZ(24,"span",29),u.O4$(),u.TgZ(25,"svg",30),u._UZ(26,"rect",8),u._UZ(27,"path",37),u._UZ(28,"line",38),u._UZ(29,"line",39),u._UZ(30,"line",40),u._UZ(31,"path",41),u._UZ(32,"path",42),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(33,"a",43),u.NdJ("click",function(){return u.CHM(t),u.oxw().onLogout()}),u.TgZ(34,"p",44),u._uU(35," Log Out "),u.qZA(),u.qZA()}if(2&n){const t=u.oxw();let r;u.xp6(2),u.hij(" ",null==(r=u.lcZ(3,1,t.user$))?null:r.email.split("@")[0]," ")}}let h8=(()=>{class n{constructor(t){this.auth=t,this.username="",this.password="",this.loginSucess$=this.auth.isLogIn$,this.user$=this.auth.user$}onSubmit(t){this.auth.signIn(t.value.username,t.value.password),this.username="",this.password=""}onLogout(){this.auth.signOut()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(bE))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-login"]],decls:7,vars:4,consts:[[1,"container","max-w-full","max-h-full","bg-primary-50"],[1,"bg-primary-50","flex","flex-col","min-w-screen","min-h-screen","items-center","justify-center"],[1,"flex","flex-col","items-center","justify-center","px-4"],["class","bg-primary-50 border-dashed border-primary-700 border-2 rounded-xl py-12 lg:px-28 px-20 shadow-xl",4,"ngIf","ngIfElse"],["logIn",""],[1,"bg-primary-50","border-dashed","border-primary-700","border-2","rounded-xl","py-12","lg:px-28","px-20","shadow-xl"],[1,"md:text-3xl","text-xl","font-bold","leading-7","text-center","text-primary-700","inline-flex","justify-center","items-center"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","#911011","viewBox","0 0 256 256",1,"ml-8"],["width","256","height","256","fill","none"],["points","94 170 136 128 94 86","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","24","y1","128","x2","136","y2","128","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M136,40h56a8,8,0,0,1,8,8V208a8,8,0,0,1-8,8H136","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[3,"ngSubmit"],["formSearch","ngForm"],[1,"mb-8","mt-12"],["for","username",1,"w-24","text-primary-700","text-sm","font-bold","mb-4"],["name","username","id","username","type","text","placeholder","Username","aria-label","Username",1,"w-full","focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","bg-white","rounded","placeholder-primary-100",3,"ngModel","ngModelChange"],[1,"mb-4"],["for","password",1,"text-primary-700","text-sm","font-bold","mb-2"],["name","password","id","password","type","password","placeholder","******************","aria-label","Password",1,"w-full","focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","bg-white","rounded","placeholder-primary-100",3,"ngModel","ngModelChange"],[1,"flex","items-center","justify-center","mt-8"],["type","submit",1,"bg-primary-500","hover:bg-primary-600","text-white","font-thin","py-2","px-4","rounded-xl",3,"disabled"],[1,"bg-primary-50","border-dashed","border-primary-700","border-2","rounded-xl","py-12","lg:px-28","px-8","shadow-xl"],["cx","128","cy","96","r","64","opacity","0.2"],["cx","128","cy","96","r","64","fill","none","stroke","#911011","stroke-miterlimit","10","stroke-width","16"],["d","M31,216a112,112,0,0,1,194,0","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"md:flex","block","items-center","justify-between","mt-12"],["routerLink","/add-article",1,"w-52","md:mb-0","mb-4","mr-8","relative","py-4","px-6","bg-secondary-600","hover:bg-secondary-500","rounded-lg","leading-none","flex","items-center","text","divide-x","divide-secondary-50"],[1,"text-secondary-50","pr-6","font-sans","transition","duration-200"],[1,"flex","items-center","space-x-5","pl-6"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","#fafafa","viewBox","0 0 256 256"],["points","152 32 152 88 208 88 152 32","opacity","0.2"],["d","M200,224H56a8,8,0,0,1-8-8V40a8,8,0,0,1,8-8h96l56,56V216A8,8,0,0,1,200,224Z","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["points","152 32 152 88 208 88","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","104","y1","152","x2","152","y2","152","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","128","y1","128","x2","128","y2","176","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["routerLink","/delete-article",1,"w-52","relative","py-4","px-6","bg-secondary-600","hover:bg-secondary-500","rounded-lg","leading-none","flex","items-center","text","divide-x","divide-secondary-50"],["d","M200,56V208a8,8,0,0,1-8,8H64a8,8,0,0,1-8-8V56Z","opacity","0.2"],["x1","216","y1","56","x2","40","y2","56","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","104","y1","104","x2","104","y2","168","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","152","y1","104","x2","152","y2","168","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M200,56V208a8,8,0,0,1-8,8H64a8,8,0,0,1-8-8V56","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M168,56V40a16,16,0,0,0-16-16H104A16,16,0,0,0,88,40V56","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"text-primary-500","hover:text-primary-400","font-thin","underline","cursor-pointer",3,"click"],[1,"text-center","mt-4"]],template:function(t,r){if(1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.YNc(3,c8,21,3,"div",3),u.ALo(4,"async"),u.YNc(5,d8,36,3,"ng-template",null,4,u.W1O),u.qZA(),u.qZA(),u.qZA()),2&t){const i=u.MAs(6);u.xp6(3),u.Q6J("ngIf",!u.lcZ(4,2,r.loginSucess$))("ngIfElse",i)}},directives:[wi,RE,IE,Ig,wy,fD,xE,y],pipes:[ma],styles:[""]}),n})(),i2=(()=>{class n{constructor(t){this.articleService=t,this.lastArticle=new $L,this.slides=[{src:"/assets/images/greenMag.jpeg"},{src:"/assets/images/guyaMag.png"},{src:"/assets/images/Elle.png"},{src:"/assets/images/ewag.webp"},{src:"/assets/images/resto-avenue.png"},{src:"/assets/images/shopping-fr.png"}]}ngOnInit(){this.articleService.getLastArticle().subscribe(t=>{this.lastArticle=t})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(vy))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-main-page"]],decls:110,vars:0,consts:[[1,"md:flex","block","min-h-screen","w-full"],[1,"bg-primary-50","md:w-3/5","w-full","min-h-screen"],[1,"max-w-3xl","p-12"],[1,"text-7xl","font-title","font-extrabold","text-primary-700","leading-snug"],["routerLink","/sachem"],[1,"inline-flex"],[1,"text-center","text-4xl","font-sans","font-bold","text-primary-400","leading-snug","mt-8"],["xmlns","http://www.w3.org/2000/svg","width","72","height","72","fill","#911011","viewBox","0 0 256 256",1,"ml-8"],["width","256","height","256","fill","none"],["d","M78,201.3,45.1,228.9A8,8,0,0,1,32,222.8V64a8,8,0,0,1,8-8H216a8,8,0,0,1,8,8V192a8,8,0,0,1-8,8H81.7Z","opacity","0.2"],["d","M77.4,201.9l-32.3,27A8,8,0,0,1,32,222.8V64a8,8,0,0,1,8-8H216a8,8,0,0,1,8,8V192a8,8,0,0,1-8,8H82.5A7.8,7.8,0,0,0,77.4,201.9Z","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"inline-flex","mt-8","typewriter"],[1,"text-2xl","font-sans","font-semibold","text-primary-400","leading-snug","pr-2"],[1,"flex","flex-col","justify-start","items-start","mt-4","px-12"],[1,"text-2xl","font-sans","font-semibold","text-primary-300","leading-snug"],[1,"flex","items-center","justify-center"],["routerLink","/contact",1,"my-16","py-6","px-8","bg-secondary-600","hover:bg-secondary-500","rounded-lg","leading-none","flex","items-center","text","divide-x","divide-secondary-50","text-xl","shadow-md"],[1,"text-secondary-50","pr-6","font-sans","transition","duration-200"],[1,"flex","items-center","space-x-5","pl-6","animate-tilt"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","#fafafa","viewBox","0 0 256 256"],["d","M192,120,136,64l26.3-26.3a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4Z","opacity","0.2"],["d","M96,216H48a8,8,0,0,1-8-8V163.3a7.9,7.9,0,0,1,2.3-5.6l120-120a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4Z","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","136","y1","64","x2","192","y2","120","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["points","216 216 96 216 40.5 160.5","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","164","y1","92","x2","68","y2","188","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"block","px-12"],[1,"inline-flex","mt-2"],["href","https://www.facebook.com/Sachem.pro/?pnref=lhc","target","_blank",1,"mr-6"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","#911011","viewBox","0 0 256 256"],["cx","128","cy","128","r","96","opacity","0.2"],["cx","128","cy","128","r","96","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M168,88H152a23.9,23.9,0,0,0-24,24V224","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","96","y1","144","x2","160","y2","144","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["href","https://www.linkedin.com/in/sandrine-chopot-90831b162/","target","_blank",1,"mr-6"],["x","36","y","36","width","184","height","184","rx","8","opacity","0.2"],["x","36","y","36","width","184","height","184","rx","8","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","120","y1","112","x2","120","y2","176","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","88","y1","112","x2","88","y2","176","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M120,140a28,28,0,0,1,56,0v36","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["cx","88","cy","80","r","12"],[1,"bg-primary-700","w-full","md:w-2/5","border-l-4","border-secondary-500","min-h-screen"],[1,"flex","flex-col","items-center","justify-center","mt-16"],["src","assets/images/portrait.jpeg","alt","greenmag",1,"mt-4","md:mt-0","w-36","rounded-full","shadow-md"],[1,"px-4","py-4","flex"],[1,"flex","items-start","justify-start","mr-4"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","fill","#fafafa","viewBox","0 0 256 256"],["d","M108,144H40a8,8,0,0,1-8-8V72a8,8,0,0,1,8-8h60a8,8,0,0,1,8,8Z","opacity","0.2"],["d","M224,144H156a8,8,0,0,1-8-8V72a8,8,0,0,1,8-8h60a8,8,0,0,1,8,8Z","opacity","0.2"],["d","M108,144H40a8,8,0,0,1-8-8V72a8,8,0,0,1,8-8h60a8,8,0,0,1,8,8v88a40,40,0,0,1-40,40","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M224,144H156a8,8,0,0,1-8-8V72a8,8,0,0,1,8-8h60a8,8,0,0,1,8,8v88a40,40,0,0,1-40,40","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"text-justify","text-lg","font-sans","font-light","text-primary-50","leading-snug"],[1,"flex","items-end","justify-end","ml-4"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","fill","#fafafa","viewBox","0 0 256 256",1,""],[1,"mr-4","text-2xl","font-sans","font-semibold","text-primary-50","leading-snug"],["href","https://www.linkedin.com/in/sandrine-chopot-90831b162/","target","_blank",1,"inline-flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","width","36","height","36","fill","#fafafa","viewBox","0 0 256 256",1,"mr-2"],["x","36","y","36","width","184","height","184","rx","8","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","120","y1","112","x2","120","y2","176","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","88","y1","112","x2","88","y2","176","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M120,140a28,28,0,0,1,56,0v36","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"text-lg","font-sans","font-light","text-primary-100","leading-snug","text-center"],[1,"mt-12","flex","items-center","justify-center"],["href","/sachem",1,"inline-flex","justify-center","items-center","border-2","border-primary-50","border-dashed","px-4","py-4","rounded-full","hover:bg-primary-600","hover:border-solid"],[1,"text-2xl","font-sans","font-semibold","text-primary-50","leading-snug"],["xmlns","http://www.w3.org/2000/svg","width","36","height","36","fill","#fafafa","viewBox","0 0 256 256",1,"ml-4"],["cx","128","cy","128","r","96","fill","none","stroke","#fafafa","stroke-miterlimit","10","stroke-width","16"],["points","134.1 161.9 168 128 134.1 94.1","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","88","y1","128","x2","168","y2","128","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["href","/articles",1,"inline-flex","justify-center","items-center","border-2","border-primary-50","border-dashed","px-4","py-4","rounded-full","hover:bg-primary-600","hover:border-solid"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"h1",3),u.TgZ(4,"a",4),u._uU(5,"SaCh'M"),u.qZA(),u._UZ(6,"br"),u.qZA(),u.TgZ(7,"div",5),u.TgZ(8,"h2",6),u._uU(9," Agence de communication "),u._UZ(10,"br"),u.qZA(),u.O4$(),u.TgZ(11,"svg",7),u._UZ(12,"rect",8),u._UZ(13,"path",9),u._UZ(14,"path",10),u.qZA(),u.qZA(),u.kcU(),u.TgZ(15,"div",11),u.TgZ(16,"h2",12),u._uU(17," Sp\xe9cialis\xe9e dans la redaction de contenue "),u._UZ(18,"br"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(19,"div",13),u.TgZ(20,"h3",14),u._uU(21," 10 ans d'exp\xe9rience, plus de 500 articles publi\xe9es,"),u._UZ(22,"br"),u.qZA(),u.TgZ(23,"h3",14),u._uU(24," \xe0 travers la France metropolitaine et les Outre-Mer. "),u.qZA(),u.qZA(),u.TgZ(25,"div",15),u.TgZ(26,"button",16),u.TgZ(27,"span",17),u._uU(28,"Contactez nous"),u.qZA(),u.TgZ(29,"span",18),u.O4$(),u.TgZ(30,"svg",19),u._UZ(31,"rect",8),u._UZ(32,"path",20),u._UZ(33,"path",21),u._UZ(34,"line",22),u._UZ(35,"polyline",23),u._UZ(36,"line",24),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(37,"div",25),u.TgZ(38,"div",26),u.TgZ(39,"a",27),u.O4$(),u.TgZ(40,"svg",28),u._UZ(41,"rect",8),u._UZ(42,"circle",29),u._UZ(43,"circle",30),u._UZ(44,"path",31),u._UZ(45,"line",32),u.qZA(),u.qZA(),u.kcU(),u.TgZ(46,"a",33),u.O4$(),u.TgZ(47,"svg",28),u._UZ(48,"rect",8),u._UZ(49,"rect",34),u._UZ(50,"rect",35),u._UZ(51,"line",36),u._UZ(52,"line",37),u._UZ(53,"path",38),u._UZ(54,"circle",39),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(55,"div",40),u.TgZ(56,"div",41),u._UZ(57,"img",42),u.TgZ(58,"div",43),u.TgZ(59,"div",44),u.O4$(),u.TgZ(60,"svg",45),u._UZ(61,"path",46),u._UZ(62,"path",47),u._UZ(63,"path",48),u._UZ(64,"path",49),u.qZA(),u.qZA(),u.kcU(),u.TgZ(65,"p",50),u._uU(66," Journaux nationaux ou regionaux, formation en communication ou en r\xe9daction, web ou print,"),u._UZ(67,"br"),u._uU(68," Nous sommes \xe0 votre disposition pour vous aider \xe0 cr\xe9er votre contenu. "),u.qZA(),u.TgZ(69,"div",51),u.O4$(),u.TgZ(70,"svg",52),u._UZ(71,"path",46),u._UZ(72,"path",47),u._UZ(73,"path",48),u._UZ(74,"path",49),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(75,"div"),u.TgZ(76,"h1",53),u.TgZ(77,"a",54),u.O4$(),u.TgZ(78,"svg",55),u._UZ(79,"rect",8),u._UZ(80,"rect",34),u._UZ(81,"rect",56),u._UZ(82,"line",57),u._UZ(83,"line",58),u._UZ(84,"path",59),u._UZ(85,"circle",39),u.qZA(),u._uU(86," Sandrine CHOPOT "),u.kcU(),u._UZ(87,"br"),u.qZA(),u.qZA(),u.TgZ(88,"h2",60),u._uU(89," Directrice de Sachem. "),u.qZA(),u.qZA(),u.qZA(),u.TgZ(90,"div",61),u.TgZ(91,"a",62),u.TgZ(92,"h3",63),u._uU(93," A propos de SaCh'M "),u.qZA(),u.O4$(),u.TgZ(94,"svg",64),u._UZ(95,"rect",8),u._UZ(96,"circle",29),u._UZ(97,"circle",65),u._UZ(98,"polyline",66),u._UZ(99,"line",67),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(100,"div",61),u.TgZ(101,"a",68),u.TgZ(102,"h3",63),u._uU(103," D\xe9couvrez nos derniers articles "),u.qZA(),u.O4$(),u.TgZ(104,"svg",64),u._UZ(105,"rect",8),u._UZ(106,"circle",29),u._UZ(107,"circle",65),u._UZ(108,"polyline",66),u._UZ(109,"line",67),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA())},directives:[f,y],styles:[".typewriter[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{overflow:hidden;border-right:.15em solid orange;animation:blink-caret .75s step-end infinite}@keyframes blink-caret{0%,to{border-color:transparent}50%{border-color:orange}}"]}),n})();const f8=[{path:"main",component:i2},{path:"login",component:h8},{path:"sachem",component:rv},{path:"articles",component:BH},{path:"contact",component:a8},{path:"add-article",component:NH},{path:"delete-article",component:u8},{path:"**",component:i2}];let p8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[yu.forRoot(f8)],yu]}),n})();function g8(n,e){1&n&&(u.TgZ(0,"a",9),u._uU(1,"Login"),u.qZA())}function m8(n,e){if(1&n&&(u.TgZ(0,"a",10),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.hij(" ",t.logInName,"")}}let _8=(()=>{class n{constructor(t){this.auth=t,this.loggedIn=!1,this.logInName="",this.auth.isLogIn$.subscribe(r=>{this.loggedIn=r,r&&this.auth.user$.subscribe(i=>{this.logInName=i.email.search("@")>0?i.email.substring(0,i.email.search("@")):i.email})})}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(bE))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-nav-bar"]],decls:19,vars:2,consts:[[1,"bg-secondary-600","px-8","py-2"],[1,"flex","items-center","justify-between","mt-0","text-sm","font-medium"],[1,"flex","justify-center","items-center"],["routerLink","/main",1,"block","py-2","pr-4","pl-3","font-sans","border-transparent","text-primary-50","hover:text-primary-100","border-b-2","hover:border-primary-100","bg-transparent"],["routerLink","/sachem",1,"block","py-2","pr-4","pl-3","font-sans","border-transparent","text-primary-50","hover:text-primary-100","border-b-2","hover:border-primary-100","bg-transparent"],["routerLink","/articles",1,"block","py-2","pr-4","pl-3","font-sans","border-transparent","text-primary-50","hover:text-primary-100","border-b-2","hover:border-primary-100","bg-transparent"],["routerLink","/contact",1,"block","py-2","pr-4","pl-3","font-sans","border-transparent","text-primary-50","hover:text-primary-100","border-b-2","hover:border-primary-100","bg-transparent"],["routerLink","/login","class","block py-2 pr-4 pl-3 font-sans text-slate-50 border-b-2 border-transparent hover:border-slate-100 hover:text-slate-100 bg-transparent",4,"ngIf","ngIfElse"],["isLoggedIn",""],["routerLink","/login",1,"block","py-2","pr-4","pl-3","font-sans","text-slate-50","border-b-2","border-transparent","hover:border-slate-100","hover:text-slate-100","bg-transparent"],["routerLink","/login",1,"break-all","block","w-16","md:w-24","py-2","mr-4","pl-3","font-sans","text-slate-50","border-b-2","border-transparent","hover:border-slate-100","hover:text-slate-100","bg-transparent"]],template:function(t,r){if(1&t&&(u.TgZ(0,"nav",0),u.TgZ(1,"ul",1),u.TgZ(2,"div",2),u.TgZ(3,"li"),u.TgZ(4,"a",3),u._uU(5,"Accueil"),u.qZA(),u.qZA(),u.TgZ(6,"li"),u.TgZ(7,"a",4),u._uU(8,"SaCh'm"),u.qZA(),u.qZA(),u.TgZ(9,"li"),u.TgZ(10,"a",5),u._uU(11,"Articles"),u.qZA(),u.qZA(),u.TgZ(12,"li"),u.TgZ(13,"a",6),u._uU(14,"Contact"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(15,"li"),u.YNc(16,g8,2,0,"a",7),u.YNc(17,m8,2,1,"ng-template",null,8,u.W1O),u.qZA(),u.qZA(),u.qZA()),2&t){const i=u.MAs(18);u.xp6(16),u.Q6J("ngIf",!r.loggedIn)("ngIfElse",i)}},directives:[f,wi],styles:[""]}),n})(),y8=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-footer"]],decls:25,vars:0,consts:[[1,"bg-secondary-600","px-8","py-2"],[1,"flex","items-center","justify-between"],[1,"text-sm","text-primary-50","text-center"],["routerLink","/main",1,"hover:underline"],[1,"block","px-12"],[1,"inline-flex","mt-2"],["href","https://www.facebook.com/Sachem.pro/?pnref=lhc","target","_blank",1,"mr-4"],["xmlns","http://www.w3.org/2000/svg","width","26","height","26","fill","#fafafa","viewBox","0 0 256 256"],["width","256","height","256","fill","none"],["cx","128","cy","128","r","96","opacity","0.2"],["cx","128","cy","128","r","96","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M168,88H152a23.9,23.9,0,0,0-24,24V224","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","96","y1","144","x2","160","y2","144","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["href","https://www.linkedin.com/in/sandrine-chopot-90831b162/","target","_blank",1,"mr-4"],["x","36","y","36","width","184","height","184","rx","8","opacity","0.2"],["x","36","y","36","width","184","height","184","rx","8","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","120","y1","112","x2","120","y2","176","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","88","y1","112","x2","88","y2","176","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M120,140a28,28,0,0,1,56,0v36","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["cx","88","cy","80","r","12"]],template:function(t,r){1&t&&(u.TgZ(0,"footer",0),u.TgZ(1,"div",1),u.TgZ(2,"span",2),u._uU(3,"\xa9 2022 "),u.TgZ(4,"a",3),u._uU(5,"Sandrine CHOPOT"),u.qZA(),u._uU(6,". All Rights Reserved. "),u.qZA(),u.TgZ(7,"div",4),u.TgZ(8,"div",5),u.TgZ(9,"a",6),u.O4$(),u.TgZ(10,"svg",7),u._UZ(11,"rect",8),u._UZ(12,"circle",9),u._UZ(13,"circle",10),u._UZ(14,"path",11),u._UZ(15,"line",12),u.qZA(),u.qZA(),u.kcU(),u.TgZ(16,"a",13),u.O4$(),u.TgZ(17,"svg",7),u._UZ(18,"rect",8),u._UZ(19,"rect",14),u._UZ(20,"rect",15),u._UZ(21,"line",16),u._UZ(22,"line",17),u._UZ(23,"path",18),u._UZ(24,"circle",19),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA())},directives:[f],styles:[""]}),n})(),v8=(()=>{class n{constructor(t){this.auth=t,this.title="app-articles"}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(bE))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:7,vars:0,consts:[[1,"w-full","h-full"],[1,"flex-none"],[1,"h-full","pl-0","bg-primary-50","overflow-auto"],[1,"md:mb-0","mb-48","bg-white"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u._UZ(2,"app-nav-bar"),u.qZA(),u.TgZ(3,"div",2),u._UZ(4,"router-outlet"),u.qZA(),u.TgZ(5,"div",3),u._UZ(6,"app-footer"),u.qZA(),u.qZA())},directives:[_8,Md,y8],styles:[""]}),n})();const s2_firebaseConfig={apiKey:"AIzaSyA_qMTzXvNHhR4FQlPuazr5NC9Cmo4gwlw",authDomain:"sachem-fcd12.firebaseapp.com",databaseURL:"https://sachem-fcd12-default-rtdb.europe-west1.firebasedatabase.app",projectId:"sachem-fcd12",storageBucket:"sachem-fcd12.appspot.com",messagingSenderId:"44609888106",appId:"1:44609888106:web:390916816d50e3e5cd0f13",measurementId:"G-QVNQXHPHDS"};let w8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[v8]}),n.\u0275inj=u.cJS({providers:[bE,_a,r2],imports:[[Vo,p8,U3,e8,Ar.hO.initializeApp(s2_firebaseConfig),KS,qj,AH,BI]]}),n})();(0,u.G48)(),Uo().bootstrapModule(w8).catch(n=>console.error(n))},5867:(ut,Ce,F)=>{F.d(Ce,{C6:()=>u.getApps,Mq:()=>u.getApp});var u=F(9681);(0,u.registerVersion)("firebase","9.6.10","app")},127:(ut,Ce,F)=>{F.d(Ce,{Z:()=>u.Z});var u=F(3942);u.Z.registerVersion("firebase","9.6.10","app-compat")},1254:(ut,Ce,F)=>{F.r(Ce);var u=F(5861),Y=F(3942),O=F(2090),se=F(9681);function ae(y,f){var g={};for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&f.indexOf(w)<0&&(g[w]=y[w]);if(null!=y&&"function"==typeof Object.getOwnPropertySymbols){var A=0;for(w=Object.getOwnPropertySymbols(y);A<w.length;A++)f.indexOf(w[A])<0&&Object.prototype.propertyIsEnumerable.call(y,w[A])&&(g[w[A]]=y[w[A]])}return g}var Pe=F(1877),de=F(4859);const is=function vt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Br=function yn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},vn=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Hn=new Pe.Yd("@firebase/auth");function ar(y,...f){Hn.logLevel<=Pe.in.ERROR&&Hn.error(`Auth (${se.SDK_VERSION}): ${y}`,...f)}function sn(y,...f){throw vr(y,...f)}function Nn(y,...f){return vr(y,...f)}function ua(y,f,g){const w=Object.assign(Object.assign({},Br()),{[f]:g});return new O.LL("auth","Firebase",w).create(f,{appName:y.name})}function Fi(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&sn(y,"argument-error"),ua(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vr(y,...f){if("string"!=typeof y){const g=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(g,...w)}return vn.create(y,...f)}function Ae(y,f,...g){if(!y)throw vr(f,...g)}function hr(y){const f="INTERNAL ASSERTION FAILED: "+y;throw ar(f),new Error(f)}function $n(y,f){y||hr(f)}const mt=new Map;function tn(y){$n(y instanceof Function,"Expected a class definition");let f=mt.get(y);return f?($n(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,mt.set(y,f),f)}function _i(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Mr(){return"http:"===wr()||"https:"===wr()}function wr(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class dn{constructor(f,g){this.shortDelay=f,this.longDelay=g,$n(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Zn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Mr()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function et(y,f){$n(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class wt{static initialize(f,g,w){this.fetchImpl=f,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const no={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ds=new dn(3e4,6e4);function nn(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Et(y,f,g,w){return Er.apply(this,arguments)}function Er(){return(Er=(0,u.Z)(function*(y,f,g,w,A={}){return Ro(y,A,(0,u.Z)(function*(){let R={},j={};w&&("GET"===f?j=w:R={body:JSON.stringify(w)});const J=(0,O.xO)(Object.assign({key:y.config.apiKey},j)).slice(1),Me=yield y._getAdditionalHeaders();return Me["Content-Type"]="application/json",y.languageCode&&(Me["X-Firebase-Locale"]=y.languageCode),wt.fetch()(Je(y,y.config.apiHost,g,J),Object.assign({method:f,headers:Me,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Ro(y,f,g){return rn.apply(this,arguments)}function rn(){return(rn=(0,u.Z)(function*(y,f,g){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},no),f);try{const A=new be(y),R=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const j=yield R.json();if("needConfirmation"in j)throw ot(y,"account-exists-with-different-credential",j);if(R.ok&&!("errorMessage"in j))return j;{const J=R.ok?j.errorMessage:j.error.message,[Me,Se]=J.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Me)throw ot(y,"credential-already-in-use",j);if("EMAIL_EXISTS"===Me)throw ot(y,"email-already-in-use",j);const rt=w[Me]||Me.toLowerCase().replace(/[_\s]+/g,"-");if(Se)throw ua(y,rt,Se);sn(y,rt)}}catch(A){if(A instanceof O.ZR)throw A;sn(y,"network-request-failed")}})).apply(this,arguments)}function bt(y,f,g,w){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,u.Z)(function*(y,f,g,w,A={}){const R=yield Et(y,f,g,w,A);return"mfaPendingCredential"in R&&sn(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Je(y,f,g,w){const A=`${f}${g}?${w}`;return y.config.emulator?et(y.config,A):`${y.config.apiScheme}://${A}`}class be{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(Nn(this.auth,"network-request-failed")),Ds.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ot(y,f,g){const w={appName:y.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const A=Nn(y,f,w);return A.customData._tokenResponse=g,A}function jt(){return(jt=(0,u.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function on(y,f){return Z.apply(this,arguments)}function Z(){return(Z=(0,u.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function B(y,f){return W.apply(this,arguments)}function W(){return(W=(0,u.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function he(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function yt(){return(yt=(0,u.Z)(function*(y,f=!1){const g=(0,O.m9)(y),w=yield g.getIdToken(f),A=fr(w);Ae(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const R="object"==typeof A.firebase?A.firebase:void 0,j=null==R?void 0:R.sign_in_provider;return{claims:A,token:w,authTime:he(Jt(A.auth_time)),issuedAtTime:he(Jt(A.iat)),expirationTime:he(Jt(A.exp)),signInProvider:j||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function Jt(y){return 1e3*Number(y)}function fr(y){const[f,g,w]=y.split(".");if(void 0===f||void 0===g||void 0===w)return ar("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,O.tV)(g);return A?JSON.parse(A):(ar("Failed to decode base64 JWT payload"),null)}catch(A){return ar("Caught error parsing JWT payload as JSON",A),null}}function Yt(y,f){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,u.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(w){throw w instanceof O.ZR&&qn(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function qn({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Gn{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,u.Z)(function*(){yield g.iteration()}),w)}iteration(){var f=this;return(0,u.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class As{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=he(this.lastLoginAt),this.creationTime=he(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ca(y){return ro.apply(this,arguments)}function ro(){return(ro=(0,u.Z)(function*(y){var f;const g=y.auth,w=yield y.getIdToken(),A=yield Yt(y,B(g,{idToken:w}));Ae(null==A?void 0:A.users.length,g,"internal-error");const R=A.users[0];y._notifyReloadListener(R);const j=(null===(f=R.providerUserInfo)||void 0===f?void 0:f.length)?Yh(R.providerUserInfo):[],J=Xn(y.providerData,j),rt=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==J?void 0:J.length)),Xe={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:J,metadata:new As(R.createdAt,R.lastLoginAt),isAnonymous:rt};Object.assign(y,Xe)})).apply(this,arguments)}function Li(){return(Li=(0,u.Z)(function*(y){const f=(0,O.m9)(y);yield ca(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Xn(y,f){return[...y.filter(w=>!f.some(A=>A.providerId===w.providerId)),...f]}function Yh(y){return y.map(f=>{var{providerId:g}=f,w=ae(f,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function je(){return(je=(0,u.Z)(function*(y,f){const g=yield Ro(y,{},(0,u.Z)(function*(){const w=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:R}=y.config,j=Je(y,A,"/v1/token",`key=${R}`),J=yield y._getAdditionalHeaders();return J["Content-Type"]="application/x-www-form-urlencoded",wt.fetch()(j,{method:"POST",headers:J,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class It{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Ae(f.idToken,"internal-error"),Ae(void 0!==f.idToken,"internal-error"),Ae(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function Jn(y){const f=fr(y);return Ae(f,"internal-error"),Ae(void 0!==f.exp,"internal-error"),Ae(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var w=this;return(0,u.Z)(function*(){return Ae(!w.accessToken||w.refreshToken,f,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var w=this;return(0,u.Z)(function*(){const{accessToken:A,refreshToken:R,expiresIn:j}=yield function yi(y,f){return je.apply(this,arguments)}(f,g);w.updateTokensAndExpiration(A,R,Number(j))})()}updateTokensAndExpiration(f,g,w){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,g){const{refreshToken:w,accessToken:A,expirationTime:R}=g,j=new It;return w&&(Ae("string"==typeof w,"internal-error",{appName:f}),j.refreshToken=w),A&&(Ae("string"==typeof A,"internal-error",{appName:f}),j.accessToken=A),R&&(Ae("number"==typeof R,"internal-error",{appName:f}),j.expirationTime=R),j}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new It,this.toJSON())}_performRefresh(){return hr("not implemented")}}function Qt(y,f){Ae("string"==typeof y||void 0===y,"internal-error",{appName:f})}class Wn{constructor(f){var{uid:g,auth:w,stsTokenManager:A}=f,R=ae(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new As(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,u.Z)(function*(){const w=yield Yt(g,g.stsTokenManager.getToken(g.auth,f));return Ae(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(f){return function Ve(y){return yt.apply(this,arguments)}(this,f)}reload(){return function qa(y){return Li.apply(this,arguments)}(this)}_assign(f){this!==f&&(Ae(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Wn(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var w=this;return(0,u.Z)(function*(){let A=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),A=!0),g&&(yield ca(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,u.Z)(function*(){const g=yield f.getIdToken();return yield Yt(f,function ht(y,f){return jt.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var w,A,R,j,J,Me,Se,rt;const Xe=null!==(w=g.displayName)&&void 0!==w?w:void 0,Kt=null!==(A=g.email)&&void 0!==A?A:void 0,Vn=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,Yo=null!==(j=g.photoURL)&&void 0!==j?j:void 0,yu=null!==(J=g.tenantId)&&void 0!==J?J:void 0,Hf=null!==(Me=g._redirectEventId)&&void 0!==Me?Me:void 0,bc=null!==(Se=g.createdAt)&&void 0!==Se?Se:void 0,Jg=null!==(rt=g.lastLoginAt)&&void 0!==rt?rt:void 0,{uid:Cc,emailVerified:$f,isAnonymous:Zf,providerData:Ic,stsTokenManager:Tc}=g;Ae(Cc&&Tc,f,"internal-error");const Hd=It.fromJSON(this.name,Tc);Ae("string"==typeof Cc,f,"internal-error"),Qt(Xe,f.name),Qt(Kt,f.name),Ae("boolean"==typeof $f,f,"internal-error"),Ae("boolean"==typeof Zf,f,"internal-error"),Qt(Vn,f.name),Qt(Yo,f.name),Qt(yu,f.name),Qt(Hf,f.name),Qt(bc,f.name),Qt(Jg,f.name);const vu=new Wn({uid:Cc,auth:f,email:Kt,emailVerified:$f,displayName:Xe,isAnonymous:Zf,photoURL:Yo,phoneNumber:Vn,tenantId:yu,stsTokenManager:Hd,createdAt:bc,lastLoginAt:Jg});return Ic&&Array.isArray(Ic)&&(vu.providerData=Ic.map(qf=>Object.assign({},qf))),Hf&&(vu._redirectEventId=Hf),vu}static _fromIdTokenResponse(f,g,w=!1){return(0,u.Z)(function*(){const A=new It;A.updateFromServerResponse(g);const R=new Wn({uid:g.localId,auth:f,stsTokenManager:A,isAnonymous:w});return yield ca(R),R})()}}const wn=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(g,w){var A=this;return(0,u.Z)(function*(){A.storage[g]=w})()}_get(g){var w=this;return(0,u.Z)(function*(){const A=w.storage[g];return void 0===A?null:A})()}_remove(g){var w=this;return(0,u.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return y.type="NONE",y})();function br(y,f,g){return`firebase:${y}:${f}:${g}`}class Lt{constructor(f,g,w){this.persistence=f,this.auth=g,this.userKey=w;const{config:A,name:R}=this.auth;this.fullUserKey=br(this.userKey,A.apiKey,R),this.fullPersistenceKey=br("persistence",A.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,u.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?Wn._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,u.Z)(function*(){if(g.persistence===f)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,w="authUser"){return(0,u.Z)(function*(){if(!g.length)return new Lt(tn(wn),f,w);const A=(yield Promise.all(g.map(function(){var Se=(0,u.Z)(function*(rt){if(yield rt._isAvailable())return rt});return function(rt){return Se.apply(this,arguments)}}()))).filter(Se=>Se);let R=A[0]||tn(wn);const j=br(w,f.config.apiKey,f.name);let J=null;for(const Se of g)try{const rt=yield Se._get(j);if(rt){const Xe=Wn._fromJSON(f,rt);Se!==R&&(J=Xe),R=Se;break}}catch(rt){}const Me=A.filter(Se=>Se._shouldAllowMigration);return R._shouldAllowMigration&&Me.length?(R=Me[0],J&&(yield R._set(j,J.toJSON())),yield Promise.all(g.map(function(){var Se=(0,u.Z)(function*(rt){if(rt!==R)try{yield rt._remove(j)}catch(Xe){}});return function(rt){return Se.apply(this,arguments)}}())),new Lt(R,f,w)):new Lt(R,f,w)})()}}function ha(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Mo(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(fa(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(io(f))return"Blackberry";if(Cr(f))return"Webos";if(Tt(f))return"Safari";if((f.includes("chrome/")||pa(f))&&!f.includes("edge/"))return"Chrome";if(Ss(f))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function fa(y=(0,O.z$)()){return/firefox\//i.test(y)}function Tt(y=(0,O.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function pa(y=(0,O.z$)()){return/crios\//i.test(y)}function Mo(y=(0,O.z$)()){return/iemobile/i.test(y)}function Ss(y=(0,O.z$)()){return/android/i.test(y)}function io(y=(0,O.z$)()){return/blackberry/i.test(y)}function Cr(y=(0,O.z$)()){return/webos/i.test(y)}function vi(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function Hu(y=(0,O.z$)()){return vi(y)||Ss(y)||Cr(y)||io(y)||/windows phone/i.test(y)||Mo(y)}function ss(y,f=[]){let g;switch(y){case"Browser":g=ha((0,O.z$)());break;case"Worker":g=`${ha((0,O.z$)())}-${y}`;break;default:g=y}const w=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${se.SDK_VERSION}/${w}`}class os{constructor(f,g,w){this.app=f,this.heartbeatServiceProvider=g,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ga(this),this.idTokenSubscription=new Ga(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,g){var w=this;return g&&(this._popupRedirectResolver=tn(g)),this._initializationPromise=this.queue((0,u.Z)(function*(){var A,R;if(!w._deleted&&(w.persistenceManager=yield Lt.create(w,f),!w._deleted)){if(null===(A=w._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(j){}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(R=w.currentUser)||void 0===R?void 0:R.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,u.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g)}})()}initializeCurrentUser(f){var g=this;return(0,u.Z)(function*(){var w;let A=yield g.assertedPersistence.getCurrentUser();if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const R=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,j=null==A?void 0:A._redirectEventId,J=yield g.tryRedirectSignIn(f);(!R||R===j)&&(null==J?void 0:J.user)&&(A=J.user)}return A?A._redirectEventId?(Ae(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===A._redirectEventId?g.directlySetCurrentUser(A):g.reloadAndSetCurrentUserOrClear(A)):g.reloadAndSetCurrentUserOrClear(A):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var g=this;return(0,u.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(A){yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,u.Z)(function*(){try{yield ca(f)}catch(w){if("auth/network-request-failed"!==w.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Ul(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,u.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,u.Z)(function*(){const w=f?(0,O.m9)(f):null;return w&&Ae(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(f){var g=this;return(0,u.Z)(function*(){if(!g._deleted)return f&&Ae(g.tenantId===f.tenantId,g,"tenant-id-mismatch"),g.queue((0,u.Z)(function*(){yield g.directlySetCurrentUser(f),g.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,u.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var g=this;return this.queue((0,u.Z)(function*(){yield g.assertedPersistence.setPersistence(tn(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,g,w){return this.registerStateListener(this.authStateSubscription,f,g,w)}onIdTokenChanged(f,g,w){return this.registerStateListener(this.idTokenSubscription,f,g,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var w=this;return(0,u.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(g);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,u.Z)(function*(){if(!g.redirectPersistenceManager){const w=f&&tn(f)||g._popupRedirectResolver;Ae(w,g,"argument-error"),g.redirectPersistenceManager=yield Lt.create(g,[tn(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,u.Z)(function*(){var w,A;return g._isInitialized&&(yield g.queue((0,u.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===f?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,u.Z)(function*(){if(f===g.currentUser)return g.queue((0,u.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,w,A){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),j=this._isInitialized?Promise.resolve():this._initializationPromise;return Ae(j,this,"internal-error"),j.then(()=>R(this.currentUser)),"function"==typeof g?f.addObserver(g,w,A):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,u.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=ss(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,u.Z)(function*(){var g;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return A&&(w["X-Firebase-Client"]=A),w})()}}function Pn(y){return(0,O.m9)(y)}class Ga{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ei(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Dg(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class ga{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return hr("not implemented")}_getIdTokenResponse(f){return hr("not implemented")}_linkToIdToken(f,g){return hr("not implemented")}_getReauthenticationResolver(f){return hr("not implemented")}}function Jh(y,f){return sd.apply(this,arguments)}function sd(){return(sd=(0,u.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:resetPassword",nn(y,f))})).apply(this,arguments)}function Xh(y,f){return ma.apply(this,arguments)}function ma(){return(ma=(0,u.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function $u(y,f){return so.apply(this,arguments)}function so(){return(so=(0,u.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:update",nn(y,f))})).apply(this,arguments)}function od(){return(od=(0,u.Z)(function*(y,f){return bt(y,"POST","/v1/accounts:signInWithPassword",nn(y,f))})).apply(this,arguments)}function Zu(y,f){return _a.apply(this,arguments)}function _a(){return(_a=(0,u.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:sendOobCode",nn(y,f))})).apply(this,arguments)}function Sg(y,f){return ad.apply(this,arguments)}function ad(){return(ad=(0,u.Z)(function*(y,f){return Zu(y,f)})).apply(this,arguments)}function Dy(y,f){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,u.Z)(function*(y,f){return Zu(y,f)})).apply(this,arguments)}function ld(y,f){return ko.apply(this,arguments)}function ko(){return(ko=(0,u.Z)(function*(y,f){return Zu(y,f)})).apply(this,arguments)}function ef(y,f){return ud.apply(this,arguments)}function ud(){return(ud=(0,u.Z)(function*(y,f){return Zu(y,f)})).apply(this,arguments)}function xs(){return(xs=(0,u.Z)(function*(y,f){return bt(y,"POST","/v1/accounts:signInWithEmailLink",nn(y,f))})).apply(this,arguments)}function No(){return(No=(0,u.Z)(function*(y,f){return bt(y,"POST","/v1/accounts:signInWithEmailLink",nn(y,f))})).apply(this,arguments)}class ya extends ga{constructor(f,g,w,A=null){super("password",w),this._email=f,this._password=g,this._tenantId=A}static _fromEmailAndPassword(f,g){return new ya(f,g,"password")}static _fromEmailAndCode(f,g,w=null){return new ya(f,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,u.Z)(function*(){switch(g.signInMethod){case"password":return function Ag(y,f){return od.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function tf(y,f){return xs.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:sn(f,"internal-error")}})()}_linkToIdToken(f,g){var w=this;return(0,u.Z)(function*(){switch(w.signInMethod){case"password":return Xh(f,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function jl(y,f){return No.apply(this,arguments)}(f,{idToken:g,email:w._email,oobCode:w._password});default:sn(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function oo(y,f){return cd.apply(this,arguments)}function cd(){return(cd=(0,u.Z)(function*(y,f){return bt(y,"POST","/v1/accounts:signInWithIdp",nn(y,f))})).apply(this,arguments)}class er extends ga{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new er(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):sn("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A}=g,R=ae(g,["providerId","signInMethod"]);if(!w||!A)return null;const j=new er(w,A);return j.idToken=R.idToken||void 0,j.accessToken=R.accessToken||void 0,j.secret=R.secret,j.nonce=R.nonce,j.pendingToken=R.pendingToken||null,j}_getIdTokenResponse(f){return oo(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,oo(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,oo(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,O.xO)(g)}return f}}function nf(y,f){return Po.apply(this,arguments)}function Po(){return(Po=(0,u.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:sendVerificationCode",nn(y,f))})).apply(this,arguments)}function Ir(){return(Ir=(0,u.Z)(function*(y,f){return bt(y,"POST","/v1/accounts:signInWithPhoneNumber",nn(y,f))})).apply(this,arguments)}function Wa(){return(Wa=(0,u.Z)(function*(y,f){const g=yield bt(y,"POST","/v1/accounts:signInWithPhoneNumber",nn(y,f));if(g.temporaryProof)throw ot(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const dd={USER_NOT_FOUND:"user-not-found"};function za(){return(za=(0,u.Z)(function*(y,f){return bt(y,"POST","/v1/accounts:signInWithPhoneNumber",nn(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),dd)})).apply(this,arguments)}class ei extends ga{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new ei({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new ei({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function xg(y,f){return Ir.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function rf(y,f){return Wa.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function sf(y,f){return za.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:w,verificationCode:A}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:w,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:w,phoneNumber:A,temporaryProof:R}=f;return w||g||A||R?new ei({verificationId:g,verificationCode:w,phoneNumber:A,temporaryProof:R}):null}}class Oo{constructor(f){var g,w,A,R,j,J;const Me=(0,O.zd)((0,O.pd)(f)),Se=null!==(g=Me.apiKey)&&void 0!==g?g:null,rt=null!==(w=Me.oobCode)&&void 0!==w?w:null,Xe=function In(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Me.mode)&&void 0!==A?A:null);Ae(Se&&rt&&Xe,"argument-error"),this.apiKey=Se,this.operation=Xe,this.code=rt,this.continueUrl=null!==(R=Me.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(j=Me.languageCode)&&void 0!==j?j:null,this.tenantId=null!==(J=Me.tenantId)&&void 0!==J?J:null}static parseLink(f){const g=function qu(y){const f=(0,O.zd)((0,O.pd)(y)).link,g=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,w=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(w?(0,O.zd)((0,O.pd)(w)).link:null)||w||g||f||y}(f);try{return new Oo(g)}catch(w){return null}}}let Fo=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,w){return ya._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const A=Oo.parseLink(w);return Ae(A,"argument-error"),ya._fromEmailAndCode(g,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class jr{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Rs extends jr{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class On extends Rs{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return Ae("providerId"in g&&"signInMethod"in g,"argument-error"),er._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Ae(f.idToken||f.accessToken,"argument-error"),er._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return On.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return On.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:R,nonce:j,providerId:J}=f;if(!w&&!A&&!g&&!R||!J)return null;try{return new On(J)._credential({idToken:g,accessToken:w,nonce:j,pendingToken:R})}catch(Me){return null}}}let Hl=(()=>{class y extends Rs{constructor(){super("facebook.com")}static credential(g){return er._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(w){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Ka=(()=>{class y extends Rs{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return er._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:A}=g;if(!w&&!A)return null;try{return y.credential(w,A)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Sn=(()=>{class y extends Rs{constructor(){super("github.com")}static credential(g){return er._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(w){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Bi extends ga{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return oo(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,oo(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,oo(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A,pendingToken:R}=g;return w&&A&&R&&w===A?new Bi(w,R):null}static _create(f,g){return new Bi(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ms extends jr{constructor(f){Ae(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Ms.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Ms.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Bi.fromJSON(f);return Ae(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:w}=f;if(!g||!w)return null;try{return Bi._create(w,g)}catch(A){return null}}}let ni=(()=>{class y extends Rs{constructor(){super("twitter.com")}static credential(g,w){return er._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=g;if(!w||!A)return null;try{return y.credential(w,A)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function va(y,f){return lo.apply(this,arguments)}function lo(){return(lo=(0,u.Z)(function*(y,f){return bt(y,"POST","/v1/accounts:signUp",nn(y,f))})).apply(this,arguments)}class tt{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,w,A=!1){return(0,u.Z)(function*(){const R=yield Wn._fromIdTokenResponse(f,w,A),j=$l(w);return new tt({user:R,providerId:j,_tokenResponse:w,operationType:g})})()}static _forOperation(f,g,w){return(0,u.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const A=$l(w);return new tt({user:f,providerId:A,_tokenResponse:w,operationType:g})})()}}function $l(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Ya(){return(Ya=(0,u.Z)(function*(y){var f;const g=Pn(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new tt({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield va(g,{returnSecureToken:!0}),A=yield tt._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Qa extends O.ZR{constructor(f,g,w,A){var R;super(g.code,g.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,Qa.prototype),this.customData={appName:f.name,tenantId:null!==(R=f.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,g,w,A){return new Qa(f,g,w,A)}}function wa(y,f,g,w){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Qa._fromErrorAndOperation(y,R,f,w):R})}function Wu(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function Ie(){return(Ie=(0,u.Z)(function*(y,f){const g=(0,O.m9)(y);yield Cn(!0,g,f);const{providerUserInfo:w}=yield on(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),A=Wu(w||[]);return g.providerData=g.providerData.filter(R=>A.has(R.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Ht(y,f){return uo.apply(this,arguments)}function uo(){return(uo=(0,u.Z)(function*(y,f,g=!1){const w=yield Yt(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return tt._forOperation(y,"link",w)})).apply(this,arguments)}function Cn(y,f,g){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,u.Z)(function*(y,f,g){yield ca(f);const A=!1===y?"provider-already-linked":"no-such-provider";Ae(Wu(f.providerData).has(g)===y,f.auth,A)})).apply(this,arguments)}function as(y,f){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,u.Z)(function*(y,f,g=!1){const{auth:w}=y,A="reauthenticate";try{const R=yield Yt(y,wa(w,A,f,y),g);Ae(R.idToken,w,"internal-error");const j=fr(R.idToken);Ae(j,w,"internal-error");const{sub:J}=j;return Ae(y.uid===J,w,"user-mismatch"),tt._forOperation(y,A,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&sn(w,"user-mismatch"),R}})).apply(this,arguments)}function Ja(y,f){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,u.Z)(function*(y,f,g=!1){const w="signIn",A=yield wa(y,w,f),R=yield tt._fromIdTokenResponse(y,w,A);return g||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Yu(y,f){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,u.Z)(function*(y,f){return Ja(Pn(y),f)})).apply(this,arguments)}function Xa(y,f){return co.apply(this,arguments)}function co(){return(co=(0,u.Z)(function*(y,f){const g=(0,O.m9)(y);return yield Cn(!1,g,f.providerId),Ht(g,f)})).apply(this,arguments)}function Tr(y,f){return ri.apply(this,arguments)}function ri(){return(ri=(0,u.Z)(function*(y,f){return as((0,O.m9)(y),f)})).apply(this,arguments)}function Ju(y,f){return ks.apply(this,arguments)}function ks(){return(ks=(0,u.Z)(function*(y,f){return bt(y,"POST","/v1/accounts:signInWithCustomToken",nn(y,f))})).apply(this,arguments)}function Xu(){return(Xu=(0,u.Z)(function*(y,f){const g=Pn(y),w=yield Ju(g,{token:f,returnSecureToken:!0}),A=yield tt._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Lo{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?ec._fromServerResponse(f,g):sn(f,"internal-error")}}class ec extends Lo{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new ec(g)}}function ba(y,f,g){var w;Ae((null===(w=g.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),Ae(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Ae(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(Ae(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function Uo(){return(Uo=(0,u.Z)(function*(y,f,g){const w=(0,O.m9)(y),A={requestType:"PASSWORD_RESET",email:f};g&&ba(w,A,g),yield Dy(w,A)})).apply(this,arguments)}function Vo(){return(Vo=(0,u.Z)(function*(y,f,g){yield Jh((0,O.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Gl(){return(Gl=(0,u.Z)(function*(y,f){yield $u((0,O.m9)(y),{oobCode:f})})).apply(this,arguments)}function Ca(y,f){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,u.Z)(function*(y,f){const g=(0,O.m9)(y),w=yield Jh(g,{oobCode:f}),A=w.requestType;switch(Ae(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ae(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ae(w.mfaInfo,g,"internal-error");default:Ae(w.email,g,"internal-error")}let R=null;return w.mfaInfo&&(R=Lo._fromServerResponse(Pn(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:R},operation:A}})).apply(this,arguments)}function zl(){return(zl=(0,u.Z)(function*(y,f){const{data:g}=yield Ca((0,O.m9)(y),f);return g.email})).apply(this,arguments)}function el(){return(el=(0,u.Z)(function*(y,f,g){const w=Pn(y),A=yield va(w,{returnSecureToken:!0,email:f,password:g}),R=yield tt._fromIdTokenResponse(w,"signIn",A);return yield w._updateCurrentUser(R.user),R})).apply(this,arguments)}function Tn(){return(Tn=(0,u.Z)(function*(y,f,g){const w=(0,O.m9)(y),A={requestType:"EMAIL_SIGNIN",email:f};Ae(g.handleCodeInApp,w,"argument-error"),g&&ba(w,A,g),yield ld(w,A)})).apply(this,arguments)}function tl(){return(tl=(0,u.Z)(function*(y,f,g){const w=(0,O.m9)(y),A=Fo.credentialWithLink(f,g||_i());return Ae(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Yu(w,A)})).apply(this,arguments)}function lf(y,f){return nl.apply(this,arguments)}function nl(){return(nl=(0,u.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:createAuthUri",nn(y,f))})).apply(this,arguments)}function uf(){return(uf=(0,u.Z)(function*(y,f){const w={identifier:f,continueUri:Mr()?_i():"http://localhost"},{signinMethods:A}=yield lf((0,O.m9)(y),w);return A||[]})).apply(this,arguments)}function rl(){return(rl=(0,u.Z)(function*(y,f){const g=(0,O.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&ba(g.auth,A,f);const{email:R}=yield Sg(g.auth,A);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function il(){return(il=(0,u.Z)(function*(y,f,g){const w=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&ba(w.auth,R,g);const{email:j}=yield ef(w.auth,R);j!==y.email&&(yield y.reload())})).apply(this,arguments)}function pd(y,f){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,u.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function us(){return(us=(0,u.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const w=(0,O.m9)(y),R={idToken:yield w.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},j=yield Yt(w,pd(w.auth,R));w.displayName=j.displayName||null,w.photoURL=j.photoUrl||null;const J=w.providerData.find(({providerId:Me})=>"password"===Me);J&&(J.displayName=w.displayName,J.photoURL=w.photoURL),yield w._updateTokensIfNecessary(j)})).apply(this,arguments)}function cf(y,f,g){return ho.apply(this,arguments)}function ho(){return(ho=(0,u.Z)(function*(y,f,g){const{auth:w}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(R.email=f),g&&(R.password=g);const j=yield Yt(y,Xh(w,R));yield y._updateTokensIfNecessary(j,!0)})).apply(this,arguments)}class Bo{constructor(f,g,w={}){this.isNewUser=f,this.providerId=g,this.profile=w}}class df extends Bo{constructor(f,g,w,A){super(f,g,w),this.username=A}}class kg extends Bo{constructor(f,g){super(f,"facebook.com",g)}}class Sy extends df{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class ln extends Bo{constructor(f,g){super(f,"google.com",g)}}class zn extends df{constructor(f,g,w){super(f,"twitter.com",g,w)}}function pt(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function gd(y){var f,g;if(!y)return null;const{providerId:w}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&(null==y?void 0:y.idToken)){const j=null===(g=null===(f=fr(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(j)return new Bo(R,"anonymous"!==j&&"custom"!==j?j:null)}if(!w)return null;switch(w){case"facebook.com":return new kg(R,A);case"github.com":return new Sy(R,A);case"google.com":return new ln(R,A);case"twitter.com":return new zn(R,A,y.screenName||null);case"custom":case"anonymous":return new Bo(R,null);default:return new Bo(R,w,A)}}(g)}class Ho{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new Ho("enroll",f)}static _fromMfaPendingCredential(f){return new Ho("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,w;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return Ho._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(w=f.multiFactorSession)||void 0===w?void 0:w.idToken)return Ho._fromIdtoken(f.multiFactorSession.idToken)}return null}}class $i{constructor(f,g,w){this.session=f,this.hints=g,this.signInResolver=w}static _fromError(f,g){const w=Pn(f),A=g.customData._serverResponse,R=(A.mfaInfo||[]).map(J=>Lo._fromServerResponse(w,J));Ae(A.mfaPendingCredential,w,"internal-error");const j=Ho._fromMfaPendingCredential(A.mfaPendingCredential);return new $i(j,R,function(){var J=(0,u.Z)(function*(Me){const Se=yield Me._process(w,j);delete A.mfaInfo,delete A.mfaPendingCredential;const rt=Object.assign(Object.assign({},A),{idToken:Se.idToken,refreshToken:Se.refreshToken});switch(g.operationType){case"signIn":const Xe=yield tt._fromIdTokenResponse(w,g.operationType,rt);return yield w._updateCurrentUser(Xe.user),Xe;case"reauthenticate":return Ae(g.user,w,"internal-error"),tt._forOperation(g.user,g.operationType,rt);default:sn(w,"internal-error")}});return function(Me){return J.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,u.Z)(function*(){return g.signInResolver(f)})()}}function hf(y,f){return Et(y,"POST","/v2/accounts/mfaEnrollment:start",nn(y,f))}class fo{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>Lo._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new fo(f)}getSession(){var f=this;return(0,u.Z)(function*(){return Ho._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var w=this;return(0,u.Z)(function*(){const A=f,R=yield w.getSession(),j=yield Yt(w.user,A._process(w.user.auth,R,g));return yield w.user._updateTokensIfNecessary(j),w.user.reload()})()}unenroll(f){var g=this;return(0,u.Z)(function*(){const w="string"==typeof f?f:f.uid,A=yield g.user.getIdToken(),R=yield Yt(g.user,function Ia(y,f){return Et(y,"POST","/v2/accounts/mfaEnrollment:withdraw",nn(y,f))}(g.user.auth,{idToken:A,mfaEnrollmentId:w}));g.enrolledFactors=g.enrolledFactors.filter(({uid:j})=>j!==w),yield g.user._updateTokensIfNecessary(R);try{yield g.user.reload()}catch(j){if("auth/user-token-expired"!==j.code)throw j}})()}}const Ln=new WeakMap,$o="__sak";class cs{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem($o,"1"),this.storage.removeItem($o),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const al=(()=>{class y extends cs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function eu(){const y=(0,O.z$)();return Tt(y)||vi(y)}()&&function id(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Hu(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),R=this.localCache[w];A!==R&&g(w,R,A)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((J,Me,Se)=>{this.notifyListeners(J,Se)});const A=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const J=this.storage.getItem(A);if(g.newValue!==J)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!w)return}const R=()=>{const J=this.storage.getItem(A);!w&&this.localCache[A]===J||this.notifyListeners(A,J)},j=this.storage.getItem(A);!function an(){return(0,O.w1)()&&10===document.documentMode}()||j===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,w){this.localCache[g]=w;const A=this.listeners[g];if(A)for(const R of Array.from(A))R(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var A=()=>super._set,R=this;return(0,u.Z)(function*(){yield A().call(R,g,w),R.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,A=this;return(0,u.Z)(function*(){const R=yield w().call(A,g);return A.localCache[g]=JSON.stringify(R),R})()}_remove(g){var w=()=>super._remove,A=this;return(0,u.Z)(function*(){yield w().call(A,g),delete A.localCache[g]})()}}return y.type="LOCAL",y})(),gr=(()=>{class y extends cs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return y.type="SESSION",y})();let Aa=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(R=>R.isListeningto(g));if(w)return w;const A=new y(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,u.Z)(function*(){const A=g,{eventId:R,eventType:j,data:J}=A.data,Me=w.handlersMap[j];if(!(null==Me?void 0:Me.size))return;A.ports[0].postMessage({status:"ack",eventId:R,eventType:j});const Se=Array.from(Me).map(function(){var Xe=(0,u.Z)(function*(Kt){return Kt(A.origin,J)});return function(Kt){return Xe.apply(this,arguments)}}()),rt=yield function ll(y){return Promise.all(y.map(function(){var f=(0,u.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return f.apply(this,arguments)}}()))}(Se);A.ports[0].postMessage({status:"done",eventId:R,eventType:j,response:rt})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Zo(y="",f=10){let g="";for(let w=0;w<f;w++)g+=Math.floor(10*Math.random());return y+g}class mr{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,w=50){var A=this;return(0,u.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let j,J;return new Promise((Me,Se)=>{const rt=Zo("",20);R.port1.start();const Xe=setTimeout(()=>{Se(new Error("unsupported_event"))},w);J={messageChannel:R,onMessage(Kt){const Vn=Kt;if(Vn.data.eventId===rt)switch(Vn.data.status){case"ack":clearTimeout(Xe),j=setTimeout(()=>{Se(new Error("timeout"))},3e3);break;case"done":clearTimeout(j),Me(Vn.data.response);break;default:clearTimeout(Xe),clearTimeout(j),Se(new Error("invalid_response"))}}},A.handlers.add(J),R.port1.addEventListener("message",J.onMessage),A.target.postMessage({eventType:f,eventId:rt,data:g},[R.port2])}).finally(()=>{J&&A.removeMessageHandler(J)})})()}}function pn(){return window}function Dn(){return void 0!==pn().WorkerGlobalScope&&"function"==typeof pn().importScripts}function ii(){return(ii=(0,u.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Ci="firebaseLocalStorageDb",xn="firebaseLocalStorage",yd="fbase_key";class ds{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function un(y,f){return y.transaction([xn],f?"readwrite":"readonly").objectStore(xn)}function gf(){const y=indexedDB.open(Ci,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(xn,{keyPath:yd})}catch(A){g(A)}}),y.addEventListener("success",(0,u.Z)(function*(){const w=y.result;w.objectStoreNames.contains(xn)?f(w):(w.close(),yield function pf(){const y=indexedDB.deleteDatabase(Ci);return new ds(y).toPromise()}(),f(yield gf()))}))})}function mf(y,f,g){return _f.apply(this,arguments)}function _f(){return(_f=(0,u.Z)(function*(y,f,g){const w=un(y,!0).put({[yd]:f,value:g});return new ds(w).toPromise()})).apply(this,arguments)}function kr(){return(kr=(0,u.Z)(function*(y,f){const g=un(y,!1).get(f),w=yield new ds(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function rc(y,f){const g=un(y,!0).delete(f);return new ds(g).toPromise()}const Ps=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,u.Z)(function*(){return g.db||(g.db=yield gf()),g.db})()}_withRetries(g){var w=this;return(0,u.Z)(function*(){let A=0;for(;;)try{const R=yield w._openDb();return yield g(R)}catch(R){if(A++>3)throw R;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,u.Z)(function*(){return Dn()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,u.Z)(function*(){g.receiver=Aa._getInstance(function $r(){return Dn()?self:null}()),g.receiver._subscribe("keyChanged",function(){var w=(0,u.Z)(function*(A,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(A,R){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,u.Z)(function*(A,R){return["keyChanged"]});return function(A,R){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,u.Z)(function*(){var w,A;if(g.activeServiceWorker=yield function ul(){return ii.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new mr(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(w=R[0])||void 0===w?void 0:w.fulfilled)&&(null===(A=R[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,u.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Sa(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const g=yield gf();return yield mf(g,$o,"1"),yield rc(g,$o),!0}catch(g){}return!1})()}_withPendingWrite(g){var w=this;return(0,u.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var A=this;return(0,u.Z)(function*(){return A._withPendingWrite((0,u.Z)(function*(){return yield A._withRetries(R=>mf(R,g,w)),A.localCache[g]=w,A.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,u.Z)(function*(){const A=yield w._withRetries(R=>function xa(y,f){return kr.apply(this,arguments)}(R,g));return w.localCache[g]=A,A})()}_remove(g){var w=this;return(0,u.Z)(function*(){return w._withPendingWrite((0,u.Z)(function*(){return yield w._withRetries(A=>rc(A,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,u.Z)(function*(){const w=yield g._withRetries(j=>{const J=un(j,!1).getAll();return new ds(J).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const A=[],R=new Set;for(const{fbase_key:j,value:J}of w)R.add(j),JSON.stringify(g.localCache[j])!==JSON.stringify(J)&&(g.notifyListeners(j,J),A.push(j));for(const j of Object.keys(g.localCache))g.localCache[j]&&!R.has(j)&&(g.notifyListeners(j,null),A.push(j));return A})()}notifyListeners(g,w){this.localCache[g]=w;const A=this.listeners[g];if(A)for(const R of Array.from(A))R(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function cl(y,f){return Et(y,"POST","/v2/accounts/mfaSignIn:start",nn(y,f))}function Zr(){return(Zr=(0,u.Z)(function*(y){return(yield Et(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function tu(y){return new Promise((f,g)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=f,w.onerror=A=>{const R=Nn("internal-error");R.customData=A,g(R)},w.type="text/javascript",w.charset="UTF-8",function hs(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(w)})}function Ra(y){return`__${y}${Math.floor(1e6*Math.random())}`}const ka=1e12;class ic{constructor(f){this.auth=f,this.counter=ka,this._widgets=new Map}render(f,g){const w=this.counter;return this._widgets.set(w,new wd(f,this.auth.name,g||{})),this.counter++,w}reset(f){var g;const w=f||ka;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(f){var g;return(null===(g=this._widgets.get(f||ka))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,u.Z)(function*(){var w;return null===(w=g._widgets.get(f||ka))||void 0===w||w.execute(),""})()}}class wd{constructor(f,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;Ae(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function sc(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const xt=Ra("rcb"),Nr=new dn(3e4,6e4);class Na{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!pn().grecaptcha}load(f,g=""){return Ae(function yf(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(pn().grecaptcha):new Promise((w,A)=>{const R=pn().setTimeout(()=>{A(Nn(f,"network-request-failed"))},Nr.get());pn()[xt]=()=>{pn().clearTimeout(R),delete pn()[xt];const J=pn().grecaptcha;if(!J)return void A(Nn(f,"internal-error"));const Me=J.render;J.render=(Se,rt)=>{const Xe=Me(Se,rt);return this.counter++,Xe},this.hostLanguage=g,w(J)},tu(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:xt,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),A(Nn(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!pn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ed{load(f){return(0,u.Z)(function*(){return new ic(f)})()}clearedOneInstance(){}}const bd="recaptcha",Pa={theme:"light",type:"image"};class Zi{constructor(f,g=Object.assign({},Pa),w){this.parameters=g,this.type=bd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Pn(w),this.isInvisible="invisible"===this.parameters.size,Ae("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;Ae(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ed:new Na,this.validateStartingState()}verify(){var f=this;return(0,u.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(g)||new Promise(R=>{const j=J=>{!J||(f.tokenChangeListeners.delete(j),R(J))};f.tokenChangeListeners.add(j),f.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Ae(!this.parameters.sitekey,this.auth,"argument-error"),Ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ae("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof f)f(g);else if("string"==typeof f){const w=pn()[f];"function"==typeof w&&w(g)}}}assertNotDestroyed(){Ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,u.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,u.Z)(function*(){Ae(Mr()&&!Dn(),f.auth,"internal-error"),yield function Cd(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Og(y){return Zr.apply(this,arguments)}(f.auth);Ae(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return Ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ru{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=ei._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function iu(){return(iu=(0,u.Z)(function*(y,f,g){const w=Pn(y),A=yield go(w,f,(0,O.m9)(g));return new ru(A,R=>Yu(w,R))})).apply(this,arguments)}function qi(){return(qi=(0,u.Z)(function*(y,f,g){const w=(0,O.m9)(y);yield Cn(!1,w,"phone");const A=yield go(w.auth,f,(0,O.m9)(g));return new ru(A,R=>Xa(w,R))})).apply(this,arguments)}function Oa(){return(Oa=(0,u.Z)(function*(y,f,g){const w=(0,O.m9)(y),A=yield go(w.auth,f,(0,O.m9)(g));return new ru(A,R=>Tr(w,R))})).apply(this,arguments)}function go(y,f,g){return ou.apply(this,arguments)}function ou(){return(ou=(0,u.Z)(function*(y,f,g){var w;const A=yield g.verify();try{let R;if(Ae("string"==typeof A,y,"argument-error"),Ae(g.type===bd,y,"argument-error"),R="string"==typeof f?{phoneNumber:f}:f,"session"in R){const j=R.session;if("phoneNumber"in R)return Ae("enroll"===j.type,y,"internal-error"),(yield hf(y,{idToken:j.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{Ae("signin"===j.type,y,"internal-error");const J=(null===(w=R.multiFactorHint)||void 0===w?void 0:w.uid)||R.multiFactorUid;return Ae(J,y,"missing-multi-factor-info"),(yield cl(y,{mfaPendingCredential:j.credential,mfaEnrollmentId:J,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:j}=yield nf(y,{phoneNumber:R.phoneNumber,recaptchaToken:A});return j}}finally{g._reset()}})).apply(this,arguments)}function I(){return(I=(0,u.Z)(function*(y,f){yield Ht((0,O.m9)(y),f)})).apply(this,arguments)}let T=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Pn(g)}verifyPhoneNumber(g,w){return go(this.auth,g,(0,O.m9)(w))}static credential(g,w){return ei._fromVerification(g,w)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:A}=g;return w&&A?ei._fromTokenResponse(w,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function k(y,f){return f?tn(f):(Ae(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class V extends ga{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return oo(f,this._buildIdpRequest())}_linkToIdToken(f,g){return oo(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return oo(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function z(y){return Ja(y.auth,new V(y),y.bypassAuthState)}function ne(y){const{auth:f,user:g}=y;return Ae(g,f,"internal-error"),as(g,new V(y),y.bypassAuthState)}function ie(y){return We.apply(this,arguments)}function We(){return(We=(0,u.Z)(function*(y){const{auth:f,user:g}=y;return Ae(g,f,"internal-error"),Ht(g,new V(y),y.bypassAuthState)})).apply(this,arguments)}class Dt{constructor(f,g,w,A,R=!1){this.auth=f,this.resolver=w,this.user=A,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,u.Z)(function*(w,A){f.pendingPromise={resolve:w,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(R){f.reject(R)}});return function(w,A){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,u.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:R,tenantId:j,error:J,type:Me}=f;if(J)return void g.reject(J);const Se={auth:g.auth,requestUri:w,sessionId:A,tenantId:j||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Me)(Se))}catch(rt){g.reject(rt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return z;case"linkViaPopup":case"linkViaRedirect":return ie;case"reauthViaPopup":case"reauthViaRedirect":return ne;default:sn(this.auth,"internal-error")}}resolve(f){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const gt=new dn(2e3,1e4);function Ct(){return(Ct=(0,u.Z)(function*(y,f,g){const w=Pn(y);Fi(y,f,jr);const A=k(w,g);return new Fs(w,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function tr(){return(tr=(0,u.Z)(function*(y,f,g){const w=(0,O.m9)(y);Fi(w.auth,f,jr);const A=k(w.auth,g);return new Fs(w.auth,"reauthViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}function Pr(){return(Pr=(0,u.Z)(function*(y,f,g){const w=(0,O.m9)(y);Fi(w.auth,f,jr);const A=k(w.auth,g);return new Fs(w.auth,"linkViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}let Fs=(()=>{class y extends Dt{constructor(g,w,A,R,j){super(g,w,R,j),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,u.Z)(function*(){const w=yield g.execute();return Ae(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,u.Z)(function*(){$n(1===g.filter.length,"Popup operations only handle one event");const w=Zo();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(Nn(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Nn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,A;this.pollId=(null===(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Nn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,gt.get())};g()}}return y.currentPopupAction=null,y})();const Ls=new Map;class dl extends Dt{constructor(f,g,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,u.Z)(function*(){let w=Ls.get(g.auth._key());if(!w){try{const R=(yield function au(y,f){return hl.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;w=()=>Promise.resolve(R)}catch(A){w=()=>Promise.reject(A)}Ls.set(g.auth._key(),w)}return g.bypassAuthState||Ls.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,w=this;return(0,u.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(w,f);if("unknown"!==f.type){if(f.eventId){const A=yield w.auth._redirectUserForId(f.eventId);if(A)return w.user=A,g().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function hl(){return(hl=(0,u.Z)(function*(y,f){const g=Go(f),w=fl(y);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(g));return yield w._remove(g),A})).apply(this,arguments)}function oc(y,f){return vf.apply(this,arguments)}function vf(){return(vf=(0,u.Z)(function*(y,f){return fl(y)._set(Go(f),"true")})).apply(this,arguments)}function fl(y){return tn(y._redirectPersistence)}function Go(y){return br("pendingRedirect",y.config.apiKey,y.name)}function Id(){return(Id=(0,u.Z)(function*(y,f,g){const w=Pn(y);Fi(y,f,jr);const A=k(w,g);return yield oc(A,w),A._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function Td(){return(Td=(0,u.Z)(function*(y,f,g){const w=(0,O.m9)(y);Fi(w.auth,f,jr);const A=k(w.auth,g);yield oc(A,w.auth);const R=yield lu(w);return A._openRedirect(w.auth,f,"reauthViaRedirect",R)})).apply(this,arguments)}function Ti(){return(Ti=(0,u.Z)(function*(y,f,g){const w=(0,O.m9)(y);Fi(w.auth,f,jr);const A=k(w.auth,g);yield Cn(!1,w,f.providerId),yield oc(A,w.auth);const R=yield lu(w);return A._openRedirect(w.auth,f,"linkViaRedirect",R)})).apply(this,arguments)}function Wo(){return(Wo=(0,u.Z)(function*(y,f){return yield Pn(y)._initializationPromise,ac(y,f,!1)})).apply(this,arguments)}function ac(y,f){return bf.apply(this,arguments)}function bf(){return(bf=(0,u.Z)(function*(y,f,g=!1){const w=Pn(y),A=k(w,f),j=yield new dl(w,A,g).execute();return j&&!g&&(delete j.user._redirectEventId,yield w._persistUserIfCurrent(j.user),yield w._setRedirectUser(null,f)),j})).apply(this,arguments)}function lu(y){return pl.apply(this,arguments)}function pl(){return(pl=(0,u.Z)(function*(y){const f=Zo(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class uu{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(g=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function If(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lc(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var w;if(f.error&&!lc(f)){const A=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(Nn(this.auth,A))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const w=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dd(f))}saveEventToCache(f){this.cachedEventUids.add(Dd(f)),this.lastProcessedEventTime=Date.now()}}function Dd(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function lc({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Ad(y){return uc.apply(this,arguments)}function uc(){return(uc=(0,u.Z)(function*(y,f={}){return Et(y,"GET","/v1/projects",f)})).apply(this,arguments)}const ky=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cc=/^https?/;function mo(){return(mo=(0,u.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Ad(y);for(const g of f)try{if(dc(g))return}catch(w){}sn(y,"unauthorized-domain")})).apply(this,arguments)}function dc(y){const f=_i(),{protocol:g,hostname:w}=new URL(f);if(y.startsWith("chrome-extension://")){const j=new URL(y);return""===j.hostname&&""===w?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&j.hostname===w}if(!cc.test(g))return!1;if(ky.test(y))return w===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const Sd=new dn(3e4,6e4);function hc(){const y=pn().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let xd=null;function Py(y){return xd=xd||function Lg(y){return new Promise((f,g)=>{var w,A,R;function j(){hc(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{hc(),g(Nn(y,"network-request-failed"))},timeout:Sd.get()})}if(null===(A=null===(w=pn().gapi)||void 0===w?void 0:w.iframes)||void 0===A?void 0:A.Iframe)f(gapi.iframes.getContext());else{if(!(null===(R=pn().gapi)||void 0===R?void 0:R.load)){const J=Ra("iframefcb");return pn()[J]=()=>{gapi.load?j():g(Nn(y,"network-request-failed"))},tu(`https://apis.google.com/js/api.js?onload=${J}`).catch(Me=>g(Me))}j()}}).catch(f=>{throw xd=null,f})}(y),xd}const VE=new dn(5e3,15e3),Fy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ly=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ug(y){const f=y.config;Ae(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?et(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:y.name,v:se.SDK_VERSION},A=Ly.get(y.config.apiHost);A&&(w.eid=A);const R=y._getFrameworks();return R.length&&(w.fw=R.join(",")),`${g}?${(0,O.xO)(w).slice(1)}`}function Df(){return Df=(0,u.Z)(function*(y){const f=yield Py(y),g=pn().gapi;return Ae(g,y,"internal-error"),f.open({where:document.body,url:Ug(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fy,dontclear:!0},w=>new Promise(function(){var A=(0,u.Z)(function*(R,j){yield w.restyle({setHideOnLeave:!1});const J=Nn(y,"network-request-failed"),Me=pn().setTimeout(()=>{j(J)},VE.get());function Se(){pn().clearTimeout(Me),R(w)}w.ping(Se).then(Se,()=>{j(J)})});return function(R,j){return A.apply(this,arguments)}}()))}),Df.apply(this,arguments)}const cu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Af{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Vs(y,f,g,w,A,R){Ae(y.config.authDomain,y,"auth-domain-config-required"),Ae(y.config.apiKey,y,"invalid-api-key");const j={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:w,v:se.SDK_VERSION,eventId:A};if(f instanceof jr){f.setDefaultLanguage(y.languageCode),j.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(j.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Me,Se]of Object.entries(R||{}))j[Me]=Se}if(f instanceof Rs){const Me=f.getScopes().filter(Se=>""!==Se);Me.length>0&&(j.scopes=Me.join(","))}y.tenantId&&(j.tid=y.tenantId);const J=j;for(const Me of Object.keys(J))void 0===J[Me]&&delete J[Me];return`${function Sf({config:y}){return y.emulator?et(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(J).slice(1)}`}const fc="webStorageSupport";class ml extends class hu{constructor(f){this.factorId=f}_process(f,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,w);case"signin":return this._finalizeSignIn(f,g.credential);default:return hr("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new ml(f)}_finalizeEnroll(f,g,w){return function ff(y,f){return Et(y,"POST","/v2/accounts/mfaEnrollment:finalize",nn(y,f))}(f,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function Pg(y,f){return Et(y,"POST","/v2/accounts/mfaSignIn:finalize",nn(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Vy=(()=>{class y{constructor(){}static assertion(g){return ml._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var fu="@firebase/auth",Md="0.19.11";class $g{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,u.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(w=>{var A;f((null===(A=w)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function _l(){return window}function kd(){return(kd=(0,u.Z)(function*(y,f,g){var w;const{BuildInfo:A}=_l();$n(f.sessionId,"AuthEvent did not contain a session ID");const R=yield Hy(f.sessionId),j={};return vi()?j.ibi=A.packageName:Ss()?j.apn=A.packageName:sn(y,"operation-not-supported-in-this-environment"),A.displayName&&(j.appDisplayName=A.displayName),j.sessionId=R,Vs(y,g,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,j)})).apply(this,arguments)}function yl(){return(yl=(0,u.Z)(function*(y){const{BuildInfo:f}=_l(),g={};vi()?g.iosBundleId=f.packageName:Ss()?g.androidPackageName=f.packageName:sn(y,"operation-not-supported-in-this-environment"),yield Ad(y,g)})).apply(this,arguments)}function xf(){return(xf=(0,u.Z)(function*(y,f,g){const{cordova:w}=_l();let A=()=>{};try{yield new Promise((R,j)=>{let J=null;function Me(){var Xe;R();const Kt=null===(Xe=w.plugins.browsertab)||void 0===Xe?void 0:Xe.close;"function"==typeof Kt&&Kt(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Se(){J||(J=window.setTimeout(()=>{j(Nn(y,"redirect-cancelled-by-user"))},2e3))}function rt(){"visible"===(null==document?void 0:document.visibilityState)&&Se()}f.addPassiveListener(Me),document.addEventListener("resume",Se,!1),Ss()&&document.addEventListener("visibilitychange",rt,!1),A=()=>{f.removePassiveListener(Me),document.removeEventListener("resume",Se,!1),document.removeEventListener("visibilitychange",rt,!1),J&&window.clearTimeout(J)}})}finally{A()}})).apply(this,arguments)}function Hy(y){return gc.apply(this,arguments)}function gc(){return(gc=(0,u.Z)(function*(y){const f=$y(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function $y(y){if($n(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let w=0;w<y.length;w++)g[w]=y.charCodeAt(w);return g}!function Zg(y){(0,se._registerComponent)(new de.wA("auth",(f,{options:g})=>{const w=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),{apiKey:R,authDomain:j}=w.options;return((J,Me)=>{Ae(R&&!R.includes(":"),"invalid-api-key",{appName:J.name}),Ae(!(null==j?void 0:j.includes(":")),"argument-error",{appName:J.name});const Se={apiKey:R,authDomain:j,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ss(y)},rt=new os(J,Me,Se);return function lr(y,f){const g=(null==f?void 0:f.persistence)||[],w=(Array.isArray(g)?g:[g]).map(tn);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(w,null==f?void 0:f.popupRedirectResolver)}(rt,g),rt})(w,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,w)=>{f.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new de.wA("auth-internal",f=>{const g=Pn(f.getProvider("auth").getImmediate());return new $g(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(fu,Md,function pc(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,se.registerVersion)(fu,Md,"esm2017")}("Browser");class _r extends uu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,u.Z)(function*(){yield f.initPromise})()}}function Fd(y){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,u.Z)(function*(y){const f=yield Mf()._get(kf(y));return f&&(yield Mf()._remove(kf(y))),f})).apply(this,arguments)}function Rf(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*f.length);y.push(f.charAt(w))}return y.join("")}function Mf(){return tn(al)}function kf(y){return br("authEvent",y.config.apiKey,y.name)}function gu(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,O.zd)(g.join("?"))}function yc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Nn("no-auth-event")}}function wl(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Wg(y=(0,O.z$)()){return!("file:"!==wl()&&"ionic:"!==wl()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function zg(){try{const y=self.localStorage,f=Zo();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Qy(y=(0,O.z$)()){return function vc(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Yy(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return Pf()&&(0,O.hl)()}return!1}function Pf(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Of(){return(function Nf(){return"http:"===wl()||"https:"===wl()}()||(0,O.ru)()||Wg())&&!function Ky(){return(0,O.b$)()||(0,O.UG)()}()&&zg()&&!Pf()}function Vd(){return Wg()&&"undefined"!=typeof document}function Ff(){return(Ff=(0,u.Z)(function*(){return!!Vd()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Wi={LOCAL:"local",NONE:"none",SESSION:"session"},mu=Ae,Lf="persistence";function Bd(y){return zo.apply(this,arguments)}function zo(){return(zo=(0,u.Z)(function*(y){yield y._initializationPromise;const f=Kg(),g=br(Lf,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function Kg(){var y;try{return(null===(y=function Xy(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const $E=Ae;class Ko{constructor(){this.browserResolver=tn(class jE{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gr,this._completeRedirectFn=ac}_openPopup(f,g,w,A){var R=this;return(0,u.Z)(function*(){var j;$n(null===(j=R.eventManagers[f._key()])||void 0===j?void 0:j.manager,"_initialize() not called before _openPopup()");const J=Vs(f,g,w,_i(),A);return function jg(y,f,g,w=500,A=600){const R=Math.max((window.screen.availHeight-A)/2,0).toString(),j=Math.max((window.screen.availWidth-w)/2,0).toString();let J="";const Me=Object.assign(Object.assign({},cu),{width:w.toString(),height:A.toString(),top:R,left:j}),Se=(0,O.z$)().toLowerCase();g&&(J=pa(Se)?"_blank":g),fa(Se)&&(f=f||"http://localhost",Me.scrollbars="yes");const rt=Object.entries(Me).reduce((Kt,[Vn,Yo])=>`${Kt}${Vn}=${Yo},`,"");if(function Ui(y=(0,O.z$)()){var f;return vi(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Se)&&"_self"!==J)return function Hg(y,f){const g=document.createElement("a");g.href=y,g.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(f||"",J),new Af(null);const Xe=window.open(f||"",J,rt);Ae(Xe,y,"popup-blocked");try{Xe.focus()}catch(Kt){}return new Af(Xe)}(f,J,Zo())})()}_openRedirect(f,g,w,A){var R=this;return(0,u.Z)(function*(){return yield R._originValidation(f),function _d(y){pn().location.href=y}(Vs(f,g,w,_i(),A)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:A,promise:R}=this.eventManagers[g];return A?Promise.resolve(A):($n(R,"If manager is not set, promise should be"),R)}const w=this.initAndGetManager(f);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(f){var g=this;return(0,u.Z)(function*(){const w=yield function Tf(y){return Df.apply(this,arguments)}(f),A=new uu(f);return w.register("authEvent",R=>(Ae(null==R?void 0:R.authEvent,f,"invalid-auth-event"),{status:A.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:A},g.iframes[f._key()]=w,A})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(fc,{type:fc},A=>{var R;const j=null===(R=null==A?void 0:A[0])||void 0===R?void 0:R[fc];void 0!==j&&g(!!j),sn(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Ny(y){return mo.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Hu()||Tt()||vi()}}),this.cordovaResolver=tn(class Gg{constructor(){this._redirectPersistence=gr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ac}_initialize(f){var g=this;return(0,u.Z)(function*(){const w=f._key();let A=g.eventManagers.get(w);return A||(A=new _r(f),g.eventManagers.set(w,A),g.attachCallbackListeners(f,A)),A})()}_openPopup(f){sn(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,w,A){var R=this;return(0,u.Z)(function*(){!function jy(y){var f,g,w,A,R,j,J,Me,Se,rt;const Xe=_l();Ae("function"==typeof(null===(f=null==Xe?void 0:Xe.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ae(void 0!==(null===(g=null==Xe?void 0:Xe.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ae("function"==typeof(null===(R=null===(A=null===(w=null==Xe?void 0:Xe.cordova)||void 0===w?void 0:w.plugins)||void 0===A?void 0:A.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ae("function"==typeof(null===(Me=null===(J=null===(j=null==Xe?void 0:Xe.cordova)||void 0===j?void 0:j.plugins)||void 0===J?void 0:J.browsertab)||void 0===Me?void 0:Me.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ae("function"==typeof(null===(rt=null===(Se=null==Xe?void 0:Xe.cordova)||void 0===Se?void 0:Se.InAppBrowser)||void 0===rt?void 0:rt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const j=yield R._initialize(f);yield j.initialized(),j.resetRedirect(),function xy(){Ls.clear()}(),yield R._originValidation(f);const J=function Od(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Rf(),postBody:null,tenantId:y.tenantId,error:Nn(y,"no-auth-event")}}(f,w,A);yield function mc(y,f){return Mf()._set(kf(y),f)}(f,J);const Me=yield function fs(y,f,g){return kd.apply(this,arguments)}(f,J,g),Se=yield function Pd(y){const{cordova:f}=_l();return new Promise(g=>{f.plugins.browsertab.isAvailable(w=>{let A=null;w?f.plugins.browsertab.openUrl(y):A=f.InAppBrowser.open(y,function wi(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(A)})})}(Me);return function By(y,f,g){return xf.apply(this,arguments)}(f,j,Se)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Nd(y){return yl.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:w,handleOpenURL:A,BuildInfo:R}=_l(),j=setTimeout((0,u.Z)(function*(){yield Fd(f),g.onEvent(yc())}),500),J=function(){var rt=(0,u.Z)(function*(Xe){clearTimeout(j);const Kt=yield Fd(f);let Vn=null;Kt&&(null==Xe?void 0:Xe.url)&&(Vn=function _c(y,f){var g,w;const A=function Zy(y){const f=gu(y),g=f.link?decodeURIComponent(f.link):void 0,w=gu(g).link,A=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return gu(A).link||A||w||g||y}(f);if(A.includes("/__/auth/callback")){const R=gu(A),j=R.firebaseError?function Ld(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(R.firebaseError)):null,J=null===(w=null===(g=null==j?void 0:j.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],Me=J?Nn(J):null;return Me?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Me,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(Kt,Xe.url)),g.onEvent(Vn||yc())});return function(Kt){return rt.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,J);const Me=A,Se=`${R.packageName.toLowerCase()}://`;_l().handleOpenURL=function(){var rt=(0,u.Z)(function*(Xe){if(Xe.toLowerCase().startsWith(Se)&&J({url:Xe}),"function"==typeof Me)try{Me(Xe)}catch(Kt){console.error(Kt)}});return function(Xe){return rt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=gr,this._completeRedirectFn=ac}_initialize(f){var g=this;return(0,u.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,w,A){var R=this;return(0,u.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(f,g,w,A)})()}_openRedirect(f,g,w,A){var R=this;return(0,u.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(f,g,w,A)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Vd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return $E(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,u.Z)(function*(){if(f.underlyingResolver)return;const g=yield function Jy(){return Ff.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function ev(y){return y.unwrap()}function Uf(y){return Yg(y)}function Yg(y){const{_tokenResponse:f}=y instanceof O.ZR?y.customData:y;if(!f)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return T.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=Ka;break;case"facebook.com":w=Hl;break;case"github.com":w=Sn;break;case"twitter.com":w=ni;break;default:const{oauthIdToken:A,oauthAccessToken:R,oauthTokenSecret:j,pendingToken:J,nonce:Me}=f;return R||j||A||J?J?g.startsWith("saml.")?Bi._create(g,J):er._fromParams({providerId:g,signInMethod:g,pendingToken:J,idToken:A,accessToken:R}):new On(g).credential({idToken:A,accessToken:R,rawNonce:Me}):null}return y instanceof O.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function ai(y,f){return f.catch(g=>{throw g instanceof O.ZR&&function wc(y,f){var g;const w=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new Vf(y,function at(y,f){var g;const w=(0,O.m9)(y),A=f;return Ae(f.customData.operationType,w,"argument-error"),Ae(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),$i._fromError(w,A)}(y,f));else if(w){const A=Yg(f),R=f;A&&(R.credential=A,R.tenantId=w.tenantId||void 0,R.email=w.email||void 0,R.phoneNumber=w.phoneNumber||void 0)}}(y,g),g}).then(g=>{const A=g.user;return{operationType:g.operationType,credential:Uf(g),additionalUserInfo:pt(g),user:js.getOrCreate(A)}})}function El(y,f){return _u.apply(this,arguments)}function _u(){return(_u=(0,u.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:w=>ai(y,g.confirm(w))}})).apply(this,arguments)}class Vf{constructor(f,g){this.resolver=g,this.auth=function _o(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return ai(ev(this.auth),this.resolver.resolveSignIn(f))}}class js{constructor(f){this._delegate=f,this.multiFactor=function Ta(y){const f=(0,O.m9)(y);return Ln.has(f)||Ln.set(f,fo._fromUser(f)),Ln.get(f)}(f)}static getOrCreate(f){return js.USER_MAP.has(f)||js.USER_MAP.set(f,new js(f)),js.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,u.Z)(function*(){return ai(g.auth,Xa(g._delegate,f))})()}linkWithPhoneNumber(f,g){var w=this;return(0,u.Z)(function*(){return El(w.auth,function En(y,f,g){return qi.apply(this,arguments)}(w._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,u.Z)(function*(){return ai(g.auth,function Gi(y,f,g){return Pr.apply(this,arguments)}(g._delegate,f,Ko))})()}linkWithRedirect(f){var g=this;return(0,u.Z)(function*(){return yield Bd(Pn(g.auth)),function wf(y,f,g){return function Ef(y,f,g){return Ti.apply(this,arguments)}(y,f,g)}(g._delegate,f,Ko)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,u.Z)(function*(){return ai(g.auth,Tr(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return El(this.auth,function su(y,f,g){return Oa.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return ai(this.auth,function oi(y,f,g){return tr.apply(this,arguments)}(this._delegate,f,Ko))}reauthenticateWithRedirect(f){var g=this;return(0,u.Z)(function*(){return yield Bd(Pn(g.auth)),function My(y,f,g){return function UE(y,f,g){return Td.apply(this,arguments)}(y,f,g)}(g._delegate,f,Ko)})()}sendEmailVerification(f){return function Yl(y,f){return rl.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,u.Z)(function*(){return yield function zu(y,f){return Ie.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function Xl(y,f){return cf((0,O.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Mg(y,f){return cf((0,O.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Fg(y,f){return I.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function pr(y,f){return us.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function Ql(y,f,g){return il.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}js.USER_MAP=new WeakMap;const bl=Ae;let Bf=(()=>{class y{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=g.options;bl(A,"invalid-api-key",{appName:g.name}),bl(A,"invalid-api-key",{appName:g.name});const R="undefined"!=typeof window?Ko:void 0;this._delegate=w.initialize({options:{persistence:Cl(A,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(is),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?js.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function Vl(y,f,g){const w=Pn(y);Ae(w._canInitEmulator,w,"emulator-config-failed"),Ae(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const A=!!(null==g?void 0:g.disableWarnings),R=Ei(f),{host:j,port:J}=function Qh(y){const f=Ei(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const R=A[1];return{host:R,port:Dg(w.substr(R.length+1))}}{const[R,j]=w.split(":");return{host:R,port:Dg(j)}}}(f);w.config.emulator={url:`${R}//${j}${null===J?"":`:${J}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:j,port:J,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Vi(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,w)}applyActionCode(g){return function Rg(y,f){return Gl.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Ca(this._delegate,g)}confirmPasswordReset(g,w){return function hd(y,f,g){return Vo.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var A=this;return(0,u.Z)(function*(){return ai(A._delegate,function fd(y,f,g){return el.apply(this,arguments)}(A._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Ay(y,f){return uf.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function ls(y,f){const g=Oo.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,u.Z)(function*(){bl(Of(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function Fa(y,f){return Wo.apply(this,arguments)}(g._delegate,Ko);return w?ai(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Gy(y,f){Pn(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,w,A){const{next:R,error:j,complete:J}=tv(g,w,A);return this._delegate.onAuthStateChanged(R,j,J)}onIdTokenChanged(g,w,A){const{next:R,error:j,complete:J}=tv(g,w,A);return this._delegate.onIdTokenChanged(R,j,J)}sendSignInLinkToEmail(g,w){return function Kl(y,f,g){return Tn.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function ql(y,f,g){return Uo.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,u.Z)(function*(){let A;switch(function HE(y,f){mu(Object.values(Wi).includes(f),y,"invalid-persistence-type"),(0,O.b$)()?mu(f!==Wi.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?mu(f===Wi.NONE,y,"unsupported-persistence-type"):Pf()?mu(f===Wi.NONE||f===Wi.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):mu(f===Wi.NONE||zg(),y,"unsupported-persistence-type")}(w._delegate,g),g){case Wi.SESSION:A=gr;break;case Wi.LOCAL:A=(yield tn(Ps)._isAvailable())?Ps:al;break;case Wi.NONE:A=wn;break;default:return sn("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return ai(this._delegate,function Zl(y){return Ya.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return ai(this._delegate,Yu(this._delegate,g))}signInWithCustomToken(g){return ai(this._delegate,function ji(y,f){return Xu.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return ai(this._delegate,function af(y,f,g){return Yu((0,O.m9)(y),Fo.credential(f,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return ai(this._delegate,function Fn(y,f,g){return tl.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return El(this._delegate,function Os(y,f,g){return iu.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,u.Z)(function*(){return bl(Of(),w._delegate,"operation-not-supported-in-this-environment"),ai(w._delegate,function zt(y,f,g){return Ct.apply(this,arguments)}(w._delegate,g,Ko))})()}signInWithRedirect(g){var w=this;return(0,u.Z)(function*(){return bl(Of(),w._delegate,"operation-not-supported-in-this-environment"),yield Bd(w._delegate),function Ry(y,f,g){return function LE(y,f,g){return Id.apply(this,arguments)}(y,f,g)}(w._delegate,g,Ko)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function tc(y,f){return zl.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Wi,y})();function tv(y,f,g){let w=y;"function"!=typeof y&&({next:w,error:f,complete:g}=y);const A=w;return{next:j=>A(j&&js.getOrCreate(j)),error:f,complete:g}}function Cl(y,f){const g=function Bs(y,f){const g=Kg();if(!g)return[];const w=br(Lf,y,f);switch(g.getItem(w)){case Wi.NONE:return[wn];case Wi.LOCAL:return[Ps,gr];case Wi.SESSION:return[gr];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(Ps)&&g.push(Ps),"undefined"!=typeof window)for(const w of[al,gr])g.includes(w)||g.push(w);return g.includes(wn)||g.push(wn),g}class Ec{constructor(){this.providerId="phone",this._delegate=new T(ev(Y.Z.auth()))}static credential(f,g){return T.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Ec.PHONE_SIGN_IN_METHOD=T.PHONE_SIGN_IN_METHOD,Ec.PROVIDER_ID=T.PROVIDER_ID;const Qg=Ae;class Di{constructor(f,g,w=Y.Z.app()){var A;Qg(null===(A=w.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Zi(f,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function jd(y){y.INTERNAL.registerComponent(new de.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new Bf(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Fo,FacebookAuthProvider:Hl,GithubAuthProvider:Sn,GoogleAuthProvider:Ka,OAuthProvider:On,SAMLAuthProvider:Ms,PhoneAuthProvider:Ec,PhoneMultiFactorGenerator:Vy,RecaptchaVerifier:Di,TwitterAuthProvider:ni,Auth:Bf,AuthCredential:ga,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.11")}(Y.Z)},8306:(ut,Ce,F)=>{F.d(Ce,{y:()=>q});var u=F(930),Y=F(727),O=F(8822),se=F(4671);var oe=F(2416),ae=F(576),fe=F(2806);let q=(()=>{class Te{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const Fe=new Te;return Fe.source=this,Fe.operator=Ue,Fe}subscribe(Ue,Fe,X){const De=function $e(Te){return Te&&Te instanceof u.Lv||function te(Te){return Te&&(0,ae.m)(Te.next)&&(0,ae.m)(Te.error)&&(0,ae.m)(Te.complete)}(Te)&&(0,Y.Nn)(Te)}(Ue)?Ue:new u.Hp(Ue,Fe,X);return(0,fe.x)(()=>{const{operator:Le,source:Ne}=this;De.add(Le?Le.call(De,Ne):Ne?this._subscribe(De):this._trySubscribe(De))}),De}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(Fe){Ue.error(Fe)}}forEach(Ue,Fe){return new(Fe=G(Fe))((X,De)=>{let Le;Le=this.subscribe(Ne=>{try{Ue(Ne)}catch(st){De(st),null==Le||Le.unsubscribe()}},De,X)})}_subscribe(Ue){var Fe;return null===(Fe=this.source)||void 0===Fe?void 0:Fe.subscribe(Ue)}[O.L](){return this}pipe(...Ue){return function ye(Te){return 0===Te.length?se.y:1===Te.length?Te[0]:function(Ue){return Te.reduce((Fe,X)=>X(Fe),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=G(Ue))((Fe,X)=>{let De;this.subscribe(Le=>De=Le,Le=>X(Le),()=>Fe(De))})}}return Te.create=Ze=>new Te(Ze),Te})();function G(Te){var Ze;return null!==(Ze=null!=Te?Te:oe.v.Promise)&&void 0!==Ze?Ze:Promise}},7579:(ut,Ce,F)=>{F.d(Ce,{x:()=>oe});var u=F(8306),Y=F(727);const se=(0,F(3888).d)(fe=>function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=F(8737),ye=F(2806);let oe=(()=>{class fe extends u.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const te=new ae(this,this);return te.operator=G,te}_throwIfClosed(){if(this.closed)throw new se}next(G){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const te=this.observers.slice();for(const $e of te)$e.next(G)}})}error(G){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:te}=this;for(;te.length;)te.shift().error(G)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:te,isStopped:$e,observers:Te}=this;return te||$e?Y.Lc:(Te.push(G),new Y.w0(()=>(0,re.P)(Te,G)))}_checkFinalizedStatuses(G){const{hasError:te,thrownError:$e,isStopped:Te}=this;te?G.error($e):Te&&G.complete()}asObservable(){const G=new u.y;return G.source=this,G}}return fe.create=(q,G)=>new ae(q,G),fe})();class ae extends oe{constructor(q,G){super(),this.destination=q,this.source=G}next(q){var G,te;null===(te=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===te||te.call(G,q)}error(q){var G,te;null===(te=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===te||te.call(G,q)}complete(){var q,G;null===(G=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===G||G.call(q)}_subscribe(q){var G,te;return null!==(te=null===(G=this.source)||void 0===G?void 0:G.subscribe(q))&&void 0!==te?te:Y.Lc}}},930:(ut,Ce,F)=>{F.d(Ce,{Hp:()=>$e,Lv:()=>te});var u=F(576),Y=F(727),O=F(2416),se=F(7849),re=F(5032);const ye=fe("C",void 0,void 0);function fe(X,De,Le){return{kind:X,value:De,error:Le}}var q=F(3410),G=F(2806);class te extends Y.w0{constructor(De){super(),this.isStopped=!1,De?(this.destination=De,(0,Y.Nn)(De)&&De.add(this)):this.destination=Fe}static create(De,Le,Ne){return new $e(De,Le,Ne)}next(De){this.isStopped?Ue(function ae(X){return fe("N",X,void 0)}(De),this):this._next(De)}error(De){this.isStopped?Ue(function oe(X){return fe("E",void 0,X)}(De),this):(this.isStopped=!0,this._error(De))}complete(){this.isStopped?Ue(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(De){this.destination.next(De)}_error(De){try{this.destination.error(De)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class $e extends te{constructor(De,Le,Ne){let st;if(super(),(0,u.m)(De))st=De;else if(De){let Re;({next:st,error:Le,complete:Ne}=De),this&&O.v.useDeprecatedNextContext?(Re=Object.create(De),Re.unsubscribe=()=>this.unsubscribe()):Re=De,st=null==st?void 0:st.bind(Re),Le=null==Le?void 0:Le.bind(Re),Ne=null==Ne?void 0:Ne.bind(Re)}this.destination={next:st?Te(st):re.Z,error:Te(null!=Le?Le:Ze),complete:Ne?Te(Ne):re.Z}}}function Te(X,De){return(...Le)=>{try{X(...Le)}catch(Ne){O.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Ne):(0,se.h)(Ne)}}}function Ze(X){throw X}function Ue(X,De){const{onStoppedNotification:Le}=O.v;Le&&q.z.setTimeout(()=>Le(X,De))}const Fe={closed:!0,next:re.Z,error:Ze,complete:re.Z}},727:(ut,Ce,F)=>{F.d(Ce,{Lc:()=>ye,w0:()=>re,Nn:()=>oe});var u=F(576);const O=(0,F(3888).d)(fe=>function(G){fe(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((te,$e)=>`${$e+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var se=F(8737);class re{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Te of G)Te.remove(this);else G.remove(this);const{initialTeardown:te}=this;if((0,u.m)(te))try{te()}catch(Te){q=Te instanceof O?Te.errors:[Te]}const{_teardowns:$e}=this;if($e){this._teardowns=null;for(const Te of $e)try{ae(Te)}catch(Ze){q=null!=q?q:[],Ze instanceof O?q=[...q,...Ze.errors]:q.push(Ze)}}if(q)throw new O(q)}}add(q){var G;if(q&&q!==this)if(this.closed)ae(q);else{if(q instanceof re){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._teardowns=null!==(G=this._teardowns)&&void 0!==G?G:[]).push(q)}}_hasParent(q){const{_parentage:G}=this;return G===q||Array.isArray(G)&&G.includes(q)}_addParent(q){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(q),G):G?[G,q]:q}_removeParent(q){const{_parentage:G}=this;G===q?this._parentage=null:Array.isArray(G)&&(0,se.P)(G,q)}remove(q){const{_teardowns:G}=this;G&&(0,se.P)(G,q),q instanceof re&&q._removeParent(this)}}re.EMPTY=(()=>{const fe=new re;return fe.closed=!0,fe})();const ye=re.EMPTY;function oe(fe){return fe instanceof re||fe&&"closed"in fe&&(0,u.m)(fe.remove)&&(0,u.m)(fe.add)&&(0,u.m)(fe.unsubscribe)}function ae(fe){(0,u.m)(fe)?fe():fe.unsubscribe()}},2416:(ut,Ce,F)=>{F.d(Ce,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ut,Ce,F)=>{F.d(Ce,{E:()=>Y});const Y=new(F(8306).y)(re=>re.complete())},8996:(ut,Ce,F)=>{F.d(Ce,{D:()=>st});var u=F(8421),Y=F(5363),O=F(9468),ye=F(8306),ae=F(2202),fe=F(576),q=F(9672);function te(Re,Ge){if(!Re)throw new Error("Iterable cannot be null");return new ye.y(Qe=>{(0,q.f)(Qe,Ge,()=>{const ft=Re[Symbol.asyncIterator]();(0,q.f)(Qe,Ge,()=>{ft.next().then(ee=>{ee.done?Qe.complete():Qe.next(ee.value)})},0,!0)})})}var $e=F(3670),Te=F(8239),Ze=F(1144),Ue=F(6495),Fe=F(2206),X=F(4532),De=F(3260);function st(Re,Ge){return Ge?function Ne(Re,Ge){if(null!=Re){if((0,$e.c)(Re))return function se(Re,Ge){return(0,u.Xf)(Re).pipe((0,O.R)(Ge),(0,Y.Q)(Ge))}(Re,Ge);if((0,Ze.z)(Re))return function oe(Re,Ge){return new ye.y(Qe=>{let ft=0;return Ge.schedule(function(){ft===Re.length?Qe.complete():(Qe.next(Re[ft++]),Qe.closed||this.schedule())})})}(Re,Ge);if((0,Te.t)(Re))return function re(Re,Ge){return(0,u.Xf)(Re).pipe((0,O.R)(Ge),(0,Y.Q)(Ge))}(Re,Ge);if((0,Fe.D)(Re))return te(Re,Ge);if((0,Ue.T)(Re))return function G(Re,Ge){return new ye.y(Qe=>{let ft;return(0,q.f)(Qe,Ge,()=>{ft=Re[ae.h](),(0,q.f)(Qe,Ge,()=>{let ee,ce;try{({value:ee,done:ce}=ft.next())}catch(_e){return void Qe.error(_e)}ce?Qe.complete():Qe.next(ee)},0,!0)}),()=>(0,fe.m)(null==ft?void 0:ft.return)&&ft.return()})}(Re,Ge);if((0,De.L)(Re))return function Le(Re,Ge){return te((0,De.Q)(Re),Ge)}(Re,Ge)}throw(0,X.z)(Re)}(Re,Ge):(0,u.Xf)(Re)}},8421:(ut,Ce,F)=>{F.d(Ce,{Xf:()=>$e});var u=F(5987),Y=F(1144),O=F(8239),se=F(8306),re=F(3670),ye=F(2206),oe=F(4532),ae=F(6495),fe=F(3260),q=F(576),G=F(7849),te=F(8822);function $e(Ne){if(Ne instanceof se.y)return Ne;if(null!=Ne){if((0,re.c)(Ne))return function Te(Ne){return new se.y(st=>{const Re=Ne[te.L]();if((0,q.m)(Re.subscribe))return Re.subscribe(st);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ne);if((0,Y.z)(Ne))return function Ze(Ne){return new se.y(st=>{for(let Re=0;Re<Ne.length&&!st.closed;Re++)st.next(Ne[Re]);st.complete()})}(Ne);if((0,O.t)(Ne))return function Ue(Ne){return new se.y(st=>{Ne.then(Re=>{st.closed||(st.next(Re),st.complete())},Re=>st.error(Re)).then(null,G.h)})}(Ne);if((0,ye.D)(Ne))return X(Ne);if((0,ae.T)(Ne))return function Fe(Ne){return new se.y(st=>{for(const Re of Ne)if(st.next(Re),st.closed)return;st.complete()})}(Ne);if((0,fe.L)(Ne))return function De(Ne){return X((0,fe.Q)(Ne))}(Ne)}throw(0,oe.z)(Ne)}function X(Ne){return new se.y(st=>{(function Le(Ne,st){var Re,Ge,Qe,ft;return(0,u.mG)(this,void 0,void 0,function*(){try{for(Re=(0,u.KL)(Ne);!(Ge=yield Re.next()).done;)if(st.next(Ge.value),st.closed)return}catch(ee){Qe={error:ee}}finally{try{Ge&&!Ge.done&&(ft=Re.return)&&(yield ft.call(Re))}finally{if(Qe)throw Qe.error}}st.complete()})})(Ne,st).catch(Re=>st.error(Re))})}},6451:(ut,Ce,F)=>{F.d(Ce,{T:()=>ye});var u=F(8189),Y=F(8421),O=F(515),se=F(7669),re=F(8996);function ye(...oe){const ae=(0,se.yG)(oe),fe=(0,se._6)(oe,1/0),q=oe;return q.length?1===q.length?(0,Y.Xf)(q[0]):(0,u.J)(fe)((0,re.D)(q,ae)):O.E}},5403:(ut,Ce,F)=>{F.d(Ce,{Q:()=>Y});var u=F(930);class Y extends u.Lv{constructor(se,re,ye,oe,ae){super(se),this.onFinalize=ae,this._next=re?function(fe){try{re(fe)}catch(q){se.error(q)}}:super._next,this._error=oe?function(fe){try{oe(fe)}catch(q){se.error(q)}finally{this.unsubscribe()}}:super._error,this._complete=ye?function(){try{ye()}catch(fe){se.error(fe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;const{closed:re}=this;super.unsubscribe(),!re&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}},4004:(ut,Ce,F)=>{F.d(Ce,{U:()=>O});var u=F(4482),Y=F(5403);function O(se,re){return(0,u.e)((ye,oe)=>{let ae=0;ye.subscribe(new Y.Q(oe,fe=>{oe.next(se.call(re,fe,ae++))}))})}},8189:(ut,Ce,F)=>{F.d(Ce,{J:()=>O});var u=F(5577),Y=F(4671);function O(se=1/0){return(0,u.z)(Y.y,se)}},5577:(ut,Ce,F)=>{F.d(Ce,{z:()=>ae});var u=F(4004),Y=F(8421),O=F(4482),se=F(9672),re=F(5403),oe=F(576);function ae(fe,q,G=1/0){return(0,oe.m)(q)?ae((te,$e)=>(0,u.U)((Te,Ze)=>q(te,Te,$e,Ze))((0,Y.Xf)(fe(te,$e))),G):("number"==typeof q&&(G=q),(0,O.e)((te,$e)=>function ye(fe,q,G,te,$e,Te,Ze,Ue){const Fe=[];let X=0,De=0,Le=!1;const Ne=()=>{Le&&!Fe.length&&!X&&q.complete()},st=Ge=>X<te?Re(Ge):Fe.push(Ge),Re=Ge=>{Te&&q.next(Ge),X++;let Qe=!1;(0,Y.Xf)(G(Ge,De++)).subscribe(new re.Q(q,ft=>{null==$e||$e(ft),Te?st(ft):q.next(ft)},()=>{Qe=!0},void 0,()=>{if(Qe)try{for(X--;Fe.length&&X<te;){const ft=Fe.shift();Ze?(0,se.f)(q,Ze,()=>Re(ft)):Re(ft)}Ne()}catch(ft){q.error(ft)}}))};return fe.subscribe(new re.Q(q,st,()=>{Le=!0,Ne()})),()=>{null==Ue||Ue()}}(te,$e,fe,G)))}},5363:(ut,Ce,F)=>{F.d(Ce,{Q:()=>se});var u=F(9672),Y=F(4482),O=F(5403);function se(re,ye=0){return(0,Y.e)((oe,ae)=>{oe.subscribe(new O.Q(ae,fe=>(0,u.f)(ae,re,()=>ae.next(fe),ye),()=>(0,u.f)(ae,re,()=>ae.complete(),ye),fe=>(0,u.f)(ae,re,()=>ae.error(fe),ye)))})}},3099:(ut,Ce,F)=>{F.d(Ce,{B:()=>ye});var u=F(8996),Y=F(5698),O=F(7579),se=F(930),re=F(4482);function ye(ae={}){const{connector:fe=(()=>new O.x),resetOnError:q=!0,resetOnComplete:G=!0,resetOnRefCountZero:te=!0}=ae;return $e=>{let Te=null,Ze=null,Ue=null,Fe=0,X=!1,De=!1;const Le=()=>{null==Ze||Ze.unsubscribe(),Ze=null},Ne=()=>{Le(),Te=Ue=null,X=De=!1},st=()=>{const Re=Te;Ne(),null==Re||Re.unsubscribe()};return(0,re.e)((Re,Ge)=>{Fe++,!De&&!X&&Le();const Qe=Ue=null!=Ue?Ue:fe();Ge.add(()=>{Fe--,0===Fe&&!De&&!X&&(Ze=oe(st,te))}),Qe.subscribe(Ge),Te||(Te=new se.Hp({next:ft=>Qe.next(ft),error:ft=>{De=!0,Le(),Ze=oe(Ne,q,ft),Qe.error(ft)},complete:()=>{X=!0,Le(),Ze=oe(Ne,G),Qe.complete()}}),(0,u.D)(Re).subscribe(Te))})($e)}}function oe(ae,fe,...q){return!0===fe?(ae(),null):!1===fe?null:fe(...q).pipe((0,Y.q)(1)).subscribe(()=>ae())}},9468:(ut,Ce,F)=>{F.d(Ce,{R:()=>Y});var u=F(4482);function Y(O,se=0){return(0,u.e)((re,ye)=>{ye.add(O.schedule(()=>re.subscribe(ye),se))})}},5698:(ut,Ce,F)=>{F.d(Ce,{q:()=>se});var u=F(515),Y=F(4482),O=F(5403);function se(re){return re<=0?()=>u.E:(0,Y.e)((ye,oe)=>{let ae=0;ye.subscribe(new O.Q(oe,fe=>{++ae<=re&&(oe.next(fe),re<=ae&&oe.complete())}))})}},8505:(ut,Ce,F)=>{F.d(Ce,{b:()=>re});var u=F(576),Y=F(4482),O=F(5403),se=F(4671);function re(ye,oe,ae){const fe=(0,u.m)(ye)||oe||ae?{next:ye,error:oe,complete:ae}:ye;return fe?(0,Y.e)((q,G)=>{var te;null===(te=fe.subscribe)||void 0===te||te.call(fe);let $e=!0;q.subscribe(new O.Q(G,Te=>{var Ze;null===(Ze=fe.next)||void 0===Ze||Ze.call(fe,Te),G.next(Te)},()=>{var Te;$e=!1,null===(Te=fe.complete)||void 0===Te||Te.call(fe),G.complete()},Te=>{var Ze;$e=!1,null===(Ze=fe.error)||void 0===Ze||Ze.call(fe,Te),G.error(Te)},()=>{var Te,Ze;$e&&(null===(Te=fe.unsubscribe)||void 0===Te||Te.call(fe)),null===(Ze=fe.finalize)||void 0===Ze||Ze.call(fe)}))}):se.y}},4408:(ut,Ce,F)=>{F.d(Ce,{o:()=>re});var u=F(727);class Y extends u.w0{constructor(oe,ae){super()}schedule(oe,ae=0){return this}}const O={setInterval(...ye){const{delegate:oe}=O;return((null==oe?void 0:oe.setInterval)||setInterval)(...ye)},clearInterval(ye){const{delegate:oe}=O;return((null==oe?void 0:oe.clearInterval)||clearInterval)(ye)},delegate:void 0};var se=F(8737);class re extends Y{constructor(oe,ae){super(oe,ae),this.scheduler=oe,this.work=ae,this.pending=!1}schedule(oe,ae=0){if(this.closed)return this;this.state=oe;const fe=this.id,q=this.scheduler;return null!=fe&&(this.id=this.recycleAsyncId(q,fe,ae)),this.pending=!0,this.delay=ae,this.id=this.id||this.requestAsyncId(q,this.id,ae),this}requestAsyncId(oe,ae,fe=0){return O.setInterval(oe.flush.bind(oe,this),fe)}recycleAsyncId(oe,ae,fe=0){if(null!=fe&&this.delay===fe&&!1===this.pending)return ae;O.clearInterval(ae)}execute(oe,ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(oe,ae);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,ae){let q,fe=!1;try{this.work(oe)}catch(G){fe=!0,q=G||new Error("Scheduled action threw falsy error")}if(fe)return this.unsubscribe(),q}unsubscribe(){if(!this.closed){const{id:oe,scheduler:ae}=this,{actions:fe}=ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(fe,this),null!=oe&&(this.id=this.recycleAsyncId(ae,oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(ut,Ce,F)=>{F.d(Ce,{v:()=>O});var u=F(6063);class Y{constructor(re,ye=Y.now){this.schedulerActionCtor=re,this.now=ye}schedule(re,ye=0,oe){return new this.schedulerActionCtor(this,re).schedule(oe,ye)}}Y.now=u.l.now;class O extends Y{constructor(re,ye=Y.now){super(re,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:ye}=this;if(this._active)return void ye.push(re);let oe;this._active=!0;do{if(oe=re.execute(re.state,re.delay))break}while(re=ye.shift());if(this._active=!1,oe){for(;re=ye.shift();)re.unsubscribe();throw oe}}}},4986:(ut,Ce,F)=>{F.d(Ce,{z:()=>O});var u=F(4408);const O=new(F(7565).v)(u.o)},6063:(ut,Ce,F)=>{F.d(Ce,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},3410:(ut,Ce,F)=>{F.d(Ce,{z:()=>u});const u={setTimeout(...Y){const{delegate:O}=u;return((null==O?void 0:O.setTimeout)||setTimeout)(...Y)},clearTimeout(Y){const{delegate:O}=u;return((null==O?void 0:O.clearTimeout)||clearTimeout)(Y)},delegate:void 0}},2202:(ut,Ce,F)=>{F.d(Ce,{h:()=>Y});const Y=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ut,Ce,F)=>{F.d(Ce,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ut,Ce,F)=>{F.d(Ce,{_6:()=>ye,jO:()=>se,yG:()=>re});var u=F(576);function O(oe){return oe[oe.length-1]}function se(oe){return(0,u.m)(O(oe))?oe.pop():void 0}function re(oe){return function Y(oe){return oe&&(0,u.m)(oe.schedule)}(O(oe))?oe.pop():void 0}function ye(oe,ae){return"number"==typeof O(oe)?oe.pop():ae}},8737:(ut,Ce,F)=>{function u(Y,O){if(Y){const se=Y.indexOf(O);0<=se&&Y.splice(se,1)}}F.d(Ce,{P:()=>u})},3888:(ut,Ce,F)=>{function u(Y){const se=Y(re=>{Error.call(re),re.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}F.d(Ce,{d:()=>u})},2806:(ut,Ce,F)=>{F.d(Ce,{O:()=>se,x:()=>O});var u=F(2416);let Y=null;function O(re){if(u.v.useDeprecatedSynchronousErrorHandling){const ye=!Y;if(ye&&(Y={errorThrown:!1,error:null}),re(),ye){const{errorThrown:oe,error:ae}=Y;if(Y=null,oe)throw ae}}else re()}function se(re){u.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=re)}},9672:(ut,Ce,F)=>{function u(Y,O,se,re=0,ye=!1){const oe=O.schedule(function(){se(),ye?Y.add(this.schedule(null,re)):this.unsubscribe()},re);if(Y.add(oe),!ye)return oe}F.d(Ce,{f:()=>u})},4671:(ut,Ce,F)=>{function u(Y){return Y}F.d(Ce,{y:()=>u})},1144:(ut,Ce,F)=>{F.d(Ce,{z:()=>u});const u=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(ut,Ce,F)=>{F.d(Ce,{D:()=>Y});var u=F(576);function Y(O){return Symbol.asyncIterator&&(0,u.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(ut,Ce,F)=>{function u(Y){return"function"==typeof Y}F.d(Ce,{m:()=>u})},3670:(ut,Ce,F)=>{F.d(Ce,{c:()=>O});var u=F(8822),Y=F(576);function O(se){return(0,Y.m)(se[u.L])}},6495:(ut,Ce,F)=>{F.d(Ce,{T:()=>O});var u=F(2202),Y=F(576);function O(se){return(0,Y.m)(null==se?void 0:se[u.h])}},8239:(ut,Ce,F)=>{F.d(Ce,{t:()=>Y});var u=F(576);function Y(O){return(0,u.m)(null==O?void 0:O.then)}},3260:(ut,Ce,F)=>{F.d(Ce,{L:()=>se,Q:()=>O});var u=F(5987),Y=F(576);function O(re){return(0,u.FC)(this,arguments,function*(){const oe=re.getReader();try{for(;;){const{value:ae,done:fe}=yield(0,u.qq)(oe.read());if(fe)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(ae)}}finally{oe.releaseLock()}})}function se(re){return(0,Y.m)(null==re?void 0:re.getReader)}},4482:(ut,Ce,F)=>{F.d(Ce,{A:()=>Y,e:()=>O});var u=F(576);function Y(se){return(0,u.m)(null==se?void 0:se.lift)}function O(se){return re=>{if(Y(re))return re.lift(function(ye){try{return se(ye,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ut,Ce,F)=>{function u(){}F.d(Ce,{Z:()=>u})},7849:(ut,Ce,F)=>{F.d(Ce,{h:()=>O});var u=F(2416),Y=F(3410);function O(se){Y.z.setTimeout(()=>{const{onUnhandledError:re}=u.v;if(!re)throw se;re(se)})}},4532:(ut,Ce,F)=>{function u(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ce,{z:()=>u})},5987:(ut,Ce,F)=>{function ae(ee,ce,_e,ve){return new(_e||(_e=Promise))(function(de,Pt){function en(St){try{Rt(ve.next(St))}catch(vt){Pt(vt)}}function Qn(St){try{Rt(ve.throw(St))}catch(vt){Pt(vt)}}function Rt(St){St.done?de(St.value):function Pe(de){return de instanceof _e?de:new _e(function(Pt){Pt(de)})}(St.value).then(en,Qn)}Rt((ve=ve.apply(ee,ce||[])).next())})}function Fe(ee){return this instanceof Fe?(this.v=ee,this):new Fe(ee)}function X(ee,ce,_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,ve=_e.apply(ee,ce||[]),de=[];return Pe={},Pt("next"),Pt("throw"),Pt("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe;function Pt(yn){ve[yn]&&(Pe[yn]=function(is){return new Promise(function(Br,vn){de.push([yn,is,Br,vn])>1||en(yn,is)})})}function en(yn,is){try{!function Qn(yn){yn.value instanceof Fe?Promise.resolve(yn.value.v).then(Rt,St):vt(de[0][2],yn)}(ve[yn](is))}catch(Br){vt(de[0][3],Br)}}function Rt(yn){en("next",yn)}function St(yn){en("throw",yn)}function vt(yn,is){yn(is),de.shift(),de.length&&en(de[0][0],de[0][1])}}function Le(ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _e,ce=ee[Symbol.asyncIterator];return ce?ce.call(ee):(ee=function te(ee){var ce="function"==typeof Symbol&&Symbol.iterator,_e=ce&&ee[ce],ve=0;if(_e)return _e.call(ee);if(ee&&"number"==typeof ee.length)return{next:function(){return ee&&ve>=ee.length&&(ee=void 0),{value:ee&&ee[ve++],done:!ee}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(ee),_e={},ve("next"),ve("throw"),ve("return"),_e[Symbol.asyncIterator]=function(){return this},_e);function ve(de){_e[de]=ee[de]&&function(Pt){return new Promise(function(en,Qn){!function Pe(de,Pt,en,Qn){Promise.resolve(Qn).then(function(Rt){de({value:Rt,done:en})},Pt)}(en,Qn,(Pt=ee[de](Pt)).done,Pt.value)})}}}F.d(Ce,{FC:()=>X,KL:()=>Le,mG:()=>ae,qq:()=>Fe})},5e3:(ut,Ce,F)=>{F.d(Ce,{$8M:()=>ul,$Z:()=>Qv,AFp:()=>OI,ALo:()=>V0,AaK:()=>ae,CHM:()=>uo,CRH:()=>Vp,CZH:()=>Ih,CqO:()=>hp,EJc:()=>BI,EpF:()=>n0,F4k:()=>s0,FYo:()=>s_,FiY:()=>Pr,G48:()=>mw,GfV:()=>nI,Gpc:()=>G,JOm:()=>_o,LFG:()=>ie,LSH:()=>Nd,Lbi:()=>sw,MAs:()=>Sm,NdJ:()=>Nm,O4$:()=>tl,OlP:()=>un,Oqu:()=>yp,PXZ:()=>Xi,Q6J:()=>dp,QGY:()=>r0,Qsj:()=>tI,R0b:()=>Qi,RDi:()=>sf,Rgc:()=>Fp,SBq:()=>Np,Sil:()=>Hp,Suo:()=>bI,TTD:()=>No,TgZ:()=>Xv,VLi:()=>ax,W1O:()=>TI,X6Q:()=>R_,XFs:()=>mt,Xpm:()=>Z,Y36:()=>cp,YKP:()=>Lr,YNc:()=>Am,Yjl:()=>Jn,Yz7:()=>vn,ZZ4:()=>Ah,_Bn:()=>xl,_UZ:()=>Wb,_Vd:()=>kp,_c5:()=>uT,_uU:()=>uh,aQg:()=>Gc,c2e:()=>VI,cJS:()=>Hn,cg1:()=>v0,dDg:()=>HI,deG:()=>pf,dqk:()=>Et,eFA:()=>cw,ekj:()=>l0,g9A:()=>LI,h0i:()=>_h,hGG:()=>vx,hij:()=>qm,iGM:()=>EI,ifc:()=>et,ip1:()=>I_,kL8:()=>w0,kcU:()=>nl,lG2:()=>fr,lcZ:()=>B0,n5z:()=>_d,oAB:()=>Ve,oxw:()=>Jb,q4F:()=>a_,qLn:()=>vc,qOj:()=>Uv,qZA:()=>e0,s9C:()=>Fm,sBO:()=>dx,sIi:()=>ip,s_b:()=>Lp,soG:()=>Th,tBr:()=>Gi,tb:()=>UI,tp0:()=>Or,uIk:()=>eh,vHH:()=>Ze,vpe:()=>Do,wAp:()=>dt,xi3:()=>fI,xp6:()=>Sc,z2F:()=>ja,zSh:()=>qs,zs3:()=>ci});var u=F(7579),Y=F(727),O=F(8306),se=F(6451),re=F(3099);function ye(s){for(let o in s)if(s[o]===ye)return o;throw Error("Could not find renamed property on target object.")}function oe(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function ae(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ae).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function fe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const q=ye({__forward_ref__:ye});function G(s){return s.__forward_ref__=G,s.toString=function(){return ae(this())},s}function te(s){return $e(s)?s():s}function $e(s){return"function"==typeof s&&s.hasOwnProperty(q)&&s.__forward_ref__===G}class Ze extends Error{constructor(o,l){super(function Fe(s,o){return`${s?`NG0${s}: `:""}${o}`}(o,l)),this.code=o}}function X(s){return"string"==typeof s?s:null==s?"":String(s)}function De(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():X(s)}function Re(s,o){const l=o?` in ${o}`:"";throw new Ze("201",`No provider for ${De(s)} found${l}`)}function St(s,o){null==s&&function vt(s,o,l,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${l} ${d} ${o} <=Actual]`))}(o,s,null,"!=")}function vn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Hn(s){return{providers:s.providers||[],imports:s.imports||[]}}function ar(s){return sn(s,vr)||sn(s,hr)}function sn(s,o){return s.hasOwnProperty(o)?s[o]:null}function Fi(s){return s&&(s.hasOwnProperty(Ae)||s.hasOwnProperty($n))?s[Ae]:null}const vr=ye({\u0275prov:ye}),Ae=ye({\u0275inj:ye}),hr=ye({ngInjectableDef:ye}),$n=ye({ngInjectorDef:ye});var mt=(()=>((mt=mt||{})[mt.Default=0]="Default",mt[mt.Host=1]="Host",mt[mt.Self=2]="Self",mt[mt.SkipSelf=4]="SkipSelf",mt[mt.Optional=8]="Optional",mt))();let tn;function lr(s){const o=tn;return tn=s,o}function _i(s,o,l){const d=ar(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&mt.Optional?null:void 0!==o?o:void Re(ae(s),"Injector")}function wr(s){return{toString:s}.toString()}var Zn=(()=>((Zn=Zn||{})[Zn.OnPush=0]="OnPush",Zn[Zn.Default=1]="Default",Zn))(),et=(()=>{return(s=et||(et={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",et;var s})();const wt="undefined"!=typeof globalThis&&globalThis,no="undefined"!=typeof window&&window,Ds="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Et=wt||"undefined"!=typeof global&&global||no||Ds,rn={},bt=[],Bt=ye({\u0275cmp:ye}),Je=ye({\u0275dir:ye}),be=ye({\u0275pipe:ye}),ot=ye({\u0275mod:ye}),ht=ye({\u0275fac:ye}),jt=ye({__NG_ELEMENT_ID__:ye});let on=0;function Z(s){return wr(()=>{const l={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Zn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||bt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||et.Emulated,id:"c",styles:s.styles||bt,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,m=s.features,v=s.pipes;return d.id+=on++,d.inputs=Jt(s.inputs,l),d.outputs=Jt(s.outputs),m&&m.forEach(b=>b(d)),d.directiveDefs=h?()=>("function"==typeof h?h():h).map(W):null,d.pipeDefs=v?()=>("function"==typeof v?v():v).map(he):null,d})}function W(s){return Yt(s)||function Mt(s){return s[Je]||null}(s)}function he(s){return function qn(s){return s[be]||null}(s)}const Q={};function Ve(s){return wr(()=>{const o={type:s.type,bootstrap:s.bootstrap||bt,declarations:s.declarations||bt,imports:s.imports||bt,exports:s.exports||bt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Q[s.id]=s.type),o})}function Jt(s,o){if(null==s)return rn;const l={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),l[h]=d,o&&(o[h]=m)}return l}const fr=Z;function Jn(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Yt(s){return s[Bt]||null}function Gn(s,o){const l=s[ot]||null;if(!l&&!0===o)throw new Error(`Type ${ae(s)} does not have '\u0275mod' property.`);return l}function ss(s){return Array.isArray(s)&&"object"==typeof s[1]}function os(s){return Array.isArray(s)&&!0===s[1]}function Pn(s){return 0!=(8&s.flags)}function Ga(s){return 2==(2&s.flags)}function Vl(s){return 1==(1&s.flags)}function Ei(s){return null!==s.template}function Qh(s){return 0!=(512&s[2])}function xs(s,o){return s.hasOwnProperty(ht)?s[ht]:null}class jl{constructor(o,l,d){this.previousValue=o,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function No(){return ya}function ya(s){return s.type.prototype.ngOnChanges&&(s.setInput=cd),oo}function oo(){const s=er(this),o=null==s?void 0:s.current;if(o){const l=s.previous;if(l===rn)s.previous=o;else for(let d in o)l[d]=o[d];s.current=null,this.ngOnChanges(o)}}function cd(s,o,l,d){const h=er(s)||function nf(s,o){return s[ao]=o}(s,{previous:rn,current:null}),m=h.current||(h.current={}),v=h.previous,b=this.declaredInputs[l],C=v[b];m[b]=new jl(C&&C.currentValue,o,v===rn),s[d]=o}No.ngInherit=!0;const ao="__ngSimpleChanges__";function er(s){return s[ao]||null}const rf="http://www.w3.org/2000/svg";let dd;function sf(s){dd=s}function In(s){return!!s.listen}const qu={createRenderer:(s,o)=>function za(){return void 0!==dd?dd:"undefined"!=typeof document?document:void 0}()};function Bn(s){for(;Array.isArray(s);)s=s[0];return s}function Rs(s,o){return Bn(o[s])}function On(s,o){return Bn(o[s.index])}function Ka(s,o){return s.data[o]}function Sn(s,o){return s[o]}function ti(s,o){const l=o[s];return ss(l)?l:l[0]}function Bi(s){return 4==(4&s[2])}function Gu(s){return 128==(128&s[2])}function ni(s,o){return null==o?null:s[o]}function va(s){s[18]=0}function lo(s,o){s[5]+=o;let l=s,d=s[3];for(;null!==d&&(1===o&&1===l[5]||-1===o&&0===l[5]);)d[5]+=o,l=d,d=d[3]}const tt={lFrame:tc(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function wa(){return tt.bindingsEnabled}function Ie(){return tt.lFrame.lView}function Ht(){return tt.lFrame.tView}function uo(s){return tt.lFrame.contextLView=s,s[8]}function Cn(){let s=Ku();for(;null!==s&&64===s.type;)s=s.parent;return s}function Ku(){return tt.lFrame.currentTNode}function Hr(s,o){const l=tt.lFrame;l.currentTNode=s,l.isParent=o}function Ja(){return tt.lFrame.isParent}function Xa(){return tt.isInCheckNoChangesMode}function co(s){tt.isInCheckNoChangesMode=s}function Tr(){const s=tt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function ks(){return tt.lFrame.bindingIndex++}function ec(s,o){const l=tt.lFrame;l.bindingIndex=l.bindingRootIndex=s,ql(o)}function ql(s){tt.lFrame.currentDirectiveIndex=s}function hd(){return tt.lFrame.currentQueryIndex}function Vo(s){tt.lFrame.currentQueryIndex=s}function Rg(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Gl(s,o,l){if(l&mt.SkipSelf){let h=o,m=s;for(;!(h=h.parent,null!==h||l&mt.Host||(h=Rg(m),null===h||(m=m[15],10&h.type))););if(null===h)return!1;o=h,s=m}const d=tt.lFrame=Wl();return d.currentTNode=o,d.lView=s,!0}function Ca(s){const o=Wl(),l=s[1];tt.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function Wl(){const s=tt.lFrame,o=null===s?null:s.child;return null===o?tc(s):o}function tc(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function zl(){const s=tt.lFrame;return tt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const fd=zl;function el(){const s=zl();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Tn(){return tt.lFrame.selectedIndex}function ls(s){tt.lFrame.selectedIndex=s}function Fn(){const s=tt.lFrame;return Ka(s.tView,s.selectedIndex)}function tl(){tt.lFrame.currentNamespace=rf}function nl(){!function Ay(){tt.lFrame.currentNamespace=null}()}function rl(s,o){for(let l=o.directiveStart,d=o.directiveEnd;l<d;l++){const m=s.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:b,ngAfterViewInit:C,ngAfterViewChecked:x,ngOnDestroy:M}=m;v&&(s.contentHooks||(s.contentHooks=[])).push(-l,v),b&&((s.contentHooks||(s.contentHooks=[])).push(l,b),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,b)),C&&(s.viewHooks||(s.viewHooks=[])).push(-l,C),x&&((s.viewHooks||(s.viewHooks=[])).push(l,x),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,x)),null!=M&&(s.destroyHooks||(s.destroyHooks=[])).push(l,M)}}function Ql(s,o,l){Jl(s,o,3,l)}function il(s,o,l,d){(3&s[2])===l&&Jl(s,o,l,d)}function pd(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function Jl(s,o,l,d){const m=null!=d?d:-1,v=o.length-1;let b=0;for(let C=void 0!==d?65535&s[18]:0;C<v;C++)if("number"==typeof o[C+1]){if(b=o[C],null!=d&&b>=d)break}else o[C]<0&&(s[18]+=65536),(b<m||-1==m)&&(pr(s,l,o,C),s[18]=(4294901760&s[18])+C+2),C++}function pr(s,o,l,d){const h=l[d]<0,m=l[d+1],b=s[h?-l[d]:l[d]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{m.call(b)}finally{}}}else try{m.call(b)}finally{}}class Xl{constructor(o,l,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function ln(s,o,l){const d=In(s);let h=0;for(;h<l.length;){const m=l[h];if("number"==typeof m){if(0!==m)break;h++;const v=l[h++],b=l[h++],C=l[h++];d?s.setAttribute(o,b,C,v):o.setAttributeNS(v,b,C)}else{const v=m,b=l[++h];pt(v)?d&&s.setProperty(o,v,b):d?s.setAttribute(o,v,b):o.setAttribute(v,b),h++}}return h}function zn(s){return 3===s||4===s||6===s}function pt(s){return 64===s.charCodeAt(0)}function Hi(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let d=0;d<o.length;d++){const h=o[d];"number"==typeof h?l=h:0===l||bi(s,l,h,null,-1===l||2===l?o[++d]:null)}}return s}function bi(s,o,l,d,h){let m=0,v=s.length;if(-1===o)v=-1;else for(;m<s.length;){const b=s[m++];if("number"==typeof b){if(b===o){v=-1;break}if(b>o){v=m-1;break}}}for(;m<s.length;){const b=s[m];if("number"==typeof b)break;if(b===l){if(null===d)return void(null!==h&&(s[m+1]=h));if(d===s[m+1])return void(s[m+2]=h)}m++,null!==d&&m++,null!==h&&m++}-1!==v&&(s.splice(v,0,o),m=v+1),s.splice(m++,0,l),null!==d&&s.splice(m++,0,d),null!==h&&s.splice(m++,0,h)}function ur(s){return-1!==s}function sl(s){return 32767&s}function jo(s,o){let l=function Ng(s){return s>>16}(s),d=o;for(;l>0;)d=d[15],l--;return d}let md=!0;function Ns(s){const o=md;return md=s,o}let hf=0;function Ia(s,o){const l=Ln(s,o);if(-1!==l)return l;const d=o[1];d.firstCreatePass&&(s.injectorIndex=o.length,fo(d.data,s),fo(o,null),fo(d.blueprint,null));const h=Ta(s,o),m=s.injectorIndex;if(ur(h)){const v=sl(h),b=jo(h,o),C=b[1].data;for(let x=0;x<8;x++)o[m+x]=b[v+x]|C[v+x]}return o[m+8]=h,m}function fo(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Ln(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Ta(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,d=null,h=o;for(;null!==h;){const m=h[1],v=m.type;if(d=2===v?m.declTNode:1===v?h[6]:null,null===d)return-1;if(l++,h=h[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function $o(s,o,l){!function ff(s,o,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(jt)&&(d=l[jt]),null==d&&(d=l[jt]=hf++);const h=255&d;o.data[s+(h>>5)]|=1<<h}(s,o,l)}function eu(s,o,l){if(l&mt.Optional)return s;Re(o,"NodeInjector")}function nc(s,o,l,d){if(l&mt.Optional&&void 0===d&&(d=null),0==(l&(mt.Self|mt.Host))){const h=s[9],m=lr(void 0);try{return h?h.get(o,d,l&mt.Optional):_i(o,d,l&mt.Optional)}finally{lr(m)}}return eu(d,o,l)}function po(s,o,l,d=mt.Default,h){if(null!==s){const m=function Aa(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(jt)?s[jt]:void 0;return"number"==typeof o?o>=0?255&o:al:o}(l);if("function"==typeof m){if(!Gl(o,s,d))return d&mt.Host?eu(h,l,d):nc(o,l,d,h);try{const v=m(d);if(null!=v||d&mt.Optional)return v;Re(l)}finally{fd()}}else if("number"==typeof m){let v=null,b=Ln(s,o),C=-1,x=d&mt.Host?o[16][6]:null;for((-1===b||d&mt.SkipSelf)&&(C=-1===b?Ta(s,o):o[b+8],-1!==C&&mr(d,!1)?(v=o[1],b=sl(C),o=jo(C,o)):b=-1);-1!==b;){const M=o[1];if(Zo(m,b,M.data)){const L=Da(b,o,l,v,d,x);if(L!==ol)return L}C=o[b+8],-1!==C&&mr(d,o[1].data[b+8]===x)&&Zo(m,b,o)?(v=M,b=sl(C),o=jo(C,o)):b=-1}}}return nc(o,l,d,h)}const ol={};function al(){return new pn(Cn(),Ie())}function Da(s,o,l,d,h,m){const v=o[1],b=v.data[s+8],M=gr(b,v,l,null==d?Ga(b)&&md:d!=v&&0!=(3&b.type),h&mt.Host&&m===b);return null!==M?ll(o,v,M,b):ol}function gr(s,o,l,d,h){const m=s.providerIndexes,v=o.data,b=1048575&m,C=s.directiveStart,M=m>>20,$=h?b+M:s.directiveEnd;for(let K=d?b:b+M;K<$;K++){const ge=v[K];if(K<C&&l===ge||K>=C&&ge.type===l)return K}if(h){const K=v[C];if(K&&Ei(K)&&K.type===l)return C}return null}function ll(s,o,l,d){let h=s[l];const m=o.data;if(function Mg(s){return s instanceof Xl}(h)){const v=h;v.resolving&&function Le(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ze("200",`Circular dependency in DI detected for ${s}${l}`)}(De(m[l]));const b=Ns(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?lr(v.injectImpl):null;Gl(s,d,mt.Default);try{h=s[l]=v.factory(void 0,m,s,d),o.firstCreatePass&&l>=d.directiveStart&&function Yl(s,o,l){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:m}=o.type.prototype;if(d){const v=ya(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,v)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),m&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,m),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,m))}(l,m[l],o)}finally{null!==C&&lr(C),Ns(b),v.resolving=!1,fd()}}return h}function Zo(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function mr(s,o){return!(s&mt.Self||s&mt.Host&&o)}class pn{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,d){return po(this._tNode,this._lView,o,d,l)}}function _d(s){return wr(()=>{const o=s.prototype.constructor,l=o[ht]||Dn(o),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const m=h[ht]||Dn(h);if(m&&m!==l)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function Dn(s){return $e(s)?()=>{const o=Dn(te(s));return o&&o()}:xs(s)}function ul(s){return function cs(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const d=l.length;let h=0;for(;h<d;){const m=l[h];if(zn(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<d&&"string"==typeof l[h];)h++;else{if(m===o)return l[h+1];h+=2}}}return null}(Cn(),s)}const Sa="__parameters__";function xn(s,o,l){return wr(()=>{const d=function Ii(s){return function(...l){if(s){const d=s(...l);for(const h in d)this[h]=d[h]}}}(o);function h(...m){if(this instanceof h)return d.apply(this,m),this;const v=new h(...m);return b.annotation=v,b;function b(C,x,M){const L=C.hasOwnProperty(Sa)?C[Sa]:Object.defineProperty(C,Sa,{value:[]})[Sa];for(;L.length<=M;)L.push(null);return(L[M]=L[M]||[]).push(v),C}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class un{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=vn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const pf=new un("AnalyzeForEntryComponents");function Zr(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let d=s[l];Array.isArray(d)?(o===s&&(o=s.slice(0,l)),Zr(d,o)):o!==s&&o.push(d)}return o}function hs(s,o){s.forEach(l=>Array.isArray(l)?hs(l,o):o(l))}function tu(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function Ra(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Nr(s,o,l){let d=Na(s,o);return d>=0?s[1|d]=l:(d=~d,function ic(s,o,l,d){let h=s.length;if(h==o)s.push(l,d);else if(1===h)s.push(d,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=d}}(s,d,o,l)),d}function qo(s,o){const l=Na(s,o);if(l>=0)return s[1|l]}function Na(s,o){return function Ed(s,o,l){let d=0,h=s.length>>l;for(;h!==d;){const m=d+(h-d>>1),v=s[m<<l];if(o===v)return m<<l;v>o?h=m:d=m+1}return~(h<<l)}(s,o,1)}const su={},Oa="__NG_DI_FLAG__",go="ngTempTokenPath",Fg=/\n/gm,T="__source",k=ye({provide:String,useValue:ye});let V;function z(s){const o=V;return V=s,o}function ne(s,o=mt.Default){if(void 0===V)throw new Error("inject() must be called from an injection context");return null===V?_i(s,void 0,o):V.get(s,o&mt.Optional?null:void 0,o)}function ie(s,o=mt.Default){return(function Ts(){return tn}()||ne)(te(s),o)}function gt(s){const o=[];for(let l=0;l<s.length;l++){const d=te(s[l]);if(Array.isArray(d)){if(0===d.length)throw new Error("Arguments array must have arguments.");let h,m=mt.Default;for(let v=0;v<d.length;v++){const b=d[v],C=Ct(b);"number"==typeof C?-1===C?h=b.token:m|=C:h=b}o.push(ie(h,m))}else o.push(ie(d))}return o}function zt(s,o){return s[Oa]=o,s.prototype[Oa]=o,s}function Ct(s){return s[Oa]}const Gi=zt(xn("Inject",s=>({token:s})),-1),Pr=zt(xn("Optional"),8),Or=zt(xn("SkipSelf"),4);class If{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function mo(s){return s instanceof If?s.changingThisBreaksApplicationSecurity:s}const Ug=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Df=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Kn=(()=>((Kn=Kn||{})[Kn.NONE=0]="NONE",Kn[Kn.HTML=1]="HTML",Kn[Kn.STYLE=2]="STYLE",Kn[Kn.SCRIPT=3]="SCRIPT",Kn[Kn.URL=4]="URL",Kn[Kn.RESOURCE_URL=5]="RESOURCE_URL",Kn))();function Nd(s){const o=function pu(){const s=Ie();return s&&s[12]}();return o?o.sanitize(Kn.URL,s)||"":function dc(s,o){const l=function Sd(s){return s instanceof If&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}(s,"URL")?mo(s):function cu(s){return(s=String(s)).match(Ug)||s.match(Df)?s:"unsafe:"+s}(X(s))}const Fd="__ngContext__";function Dr(s,o){s[Fd]=o}function Rf(s){const o=function _c(s){return s[Fd]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Nf(s){return s.ngOriginalError}function Ky(s,...o){s.error(...o)}class vc{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o),d=function Wg(s){return s&&s.ngErrorLogger||Ky}(o);d(this._console,"ERROR",o),l&&d(this._console,"ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&Nf(o);for(;l&&Nf(l);)l=Nf(l);return l||null}}const mu=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Et))();function Bs(s){return s instanceof Function?s():s}var _o=(()=>((_o=_o||{})[_o.Important=1]="Important",_o[_o.DashCase=2]="DashCase",_o))();function wc(s,o){return undefined(s,o)}function El(s){const o=s[3];return os(o)?o[3]:o}function js(s){return Bf(s[13])}function bl(s){return Bf(s[4])}function Bf(s){for(;null!==s&&!os(s);)s=s[4];return s}function Cl(s,o,l,d,h){if(null!=d){let m,v=!1;os(d)?m=d:ss(d)&&(v=!0,d=d[0]);const b=Bn(d);0===s&&null!==l?null==h?Yo(o,l,b):Vn(o,l,b,h||null,!0):1===s&&null!==l?Vn(o,l,b,h||null,!0):2===s?function kD(s,o,l){const d=bc(s,o);d&&function Hf(s,o,l,d){In(s)?s.removeChild(o,l,d):o.removeChild(l)}(s,d,o,l)}(o,b,v):3===s&&o.destroyNode(b),null!=m&&function ZE(s,o,l,d,h){const m=l[7];m!==Bn(l)&&Cl(o,s,d,m,h);for(let b=10;b<l.length;b++){const C=l[b];Dc(C[1],C,s,o,d,m)}}(o,s,m,l,h)}}function jf(s,o,l){return In(s)?s.createElement(o,l):null===l?s.createElement(o):s.createElementNS(l,o)}function R(s,o){const l=s[9],d=l.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,lo(h,-1)),l.splice(d,1)}function j(s,o){if(s.length<=10)return;const l=10+o,d=s[l];if(d){const h=d[17];null!==h&&h!==s&&R(h,d),o>0&&(s[l-1][4]=d[4]);const m=Ra(s,10+o);!function jd(s,o){Dc(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(d[1],d);const v=m[19];null!==v&&v.detachView(m[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function J(s,o){if(!(256&o[2])){const l=o[11];In(l)&&l.destroyNode&&Dc(s,o,l,3,null,null),function g(s){let o=s[13];if(!o)return Me(s[1],s);for(;o;){let l=null;if(ss(o))l=o[13];else{const d=o[10];d&&(l=d)}if(!l){for(;o&&!o[4]&&o!==s;)ss(o)&&Me(o[1],o),o=o[3];null===o&&(o=s),ss(o)&&Me(o[1],o),l=o&&o[4]}o=l}}(o)}}function Me(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function rt(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let d=0;d<l.length;d+=2){const h=o[l[d]];if(!(h instanceof Xl)){const m=l[d+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const b=h[m[v]],C=m[v+1];try{C.call(b)}finally{}}else try{m.call(h)}finally{}}}}(s,o),function Se(s,o){const l=s.cleanup,d=o[7];let h=-1;if(null!==l)for(let m=0;m<l.length-1;m+=2)if("string"==typeof l[m]){const v=l[m+1],b="function"==typeof v?v(o):Bn(o[v]),C=d[h=l[m+2]],x=l[m+3];"boolean"==typeof x?b.removeEventListener(l[m],C,x):x>=0?d[h=x]():d[h=-x].unsubscribe(),m+=2}else{const v=d[h=l[m+1]];l[m].call(v)}if(null!==d){for(let m=h+1;m<d.length;m++)d[m]();o[7]=null}}(s,o),1===o[1].type&&In(o[11])&&o[11].destroy();const l=o[17];if(null!==l&&os(o[3])){l!==o[3]&&R(l,o);const d=o[19];null!==d&&d.detachView(s)}}}function Xe(s,o,l){return function Kt(s,o,l){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return l[0];if(2&d.flags){const h=s.data[d.directiveStart].encapsulation;if(h===et.None||h===et.Emulated)return null}return On(d,l)}(s,o.parent,l)}function Vn(s,o,l,d,h){In(s)?s.insertBefore(o,l,d,h):o.insertBefore(l,d,h)}function Yo(s,o,l){In(s)?s.appendChild(o,l):o.appendChild(l)}function yu(s,o,l,d,h){null!==d?Vn(s,o,l,d,h):Yo(s,o,l)}function bc(s,o){return In(s)?s.parentNode(o):o.parentNode}let Zf=function $f(s,o,l){return 40&s.type?On(s,l):null};function Hd(s,o,l,d){const h=Xe(s,d,o),m=o[11],b=function Cc(s,o,l){return Zf(s,o,l)}(d.parent||o[6],d,o);if(null!=h)if(Array.isArray(l))for(let C=0;C<l.length;C++)yu(m,h,l[C],b,!1);else yu(m,h,l,b,!1)}function vu(s,o){if(null!==o){const l=o.type;if(3&l)return On(o,s);if(4&l)return nv(-1,s[o.index]);if(8&l){const d=o.child;if(null!==d)return vu(s,d);{const h=s[o.index];return os(h)?nv(-1,h):Bn(h)}}if(32&l)return wc(o,s)()||Bn(s[o.index]);{const d=qf(s,o);return null!==d?Array.isArray(d)?d[0]:vu(El(s[16]),d):vu(s,o.next)}}return null}function qf(s,o){return null!==o?s[16][6].projection[o.projection]:null}function nv(s,o){const l=10+s+1;if(l<o.length){const d=o[l],h=d[1].firstChild;if(null!==h)return vu(d,h)}return o[7]}function rv(s,o,l,d,h,m,v){for(;null!=l;){const b=d[l.index],C=l.type;if(v&&0===o&&(b&&Dr(Bn(b),d),l.flags|=4),64!=(64&l.flags))if(8&C)rv(s,o,l.child,d,h,m,!1),Cl(o,s,h,b,m);else if(32&C){const x=wc(l,d);let M;for(;M=x();)Cl(o,s,h,M,m);Cl(o,s,h,b,m)}else 16&C?sv(s,o,d,l,h,m):Cl(o,s,h,b,m);l=v?l.projectionNext:l.next}}function Dc(s,o,l,d,h,m){rv(l,d,s.firstChild,o,h,m,!1)}function sv(s,o,l,d,h,m){const v=l[16],C=v[6].projection[d.projection];if(Array.isArray(C))for(let x=0;x<C.length;x++)Cl(o,s,h,C[x],m);else rv(s,o,C,v[3],h,m,!0)}function qE(s,o,l){In(s)?s.setAttribute(o,"style",l):o.style.cssText=l}function ov(s,o,l){In(s)?""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l):o.className=l}function GE(s,o,l){let d=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const m=o.length;if(h+m===d||s.charCodeAt(h+m)<=32)return h}l=h+1}}const Ar="ng-template";function TM(s,o,l){let d=0;for(;d<s.length;){let h=s[d++];if(l&&"class"===h){if(h=s[d],-1!==GE(h.toLowerCase(),o,0))return!0}else if(1===h){for(;d<s.length&&"string"==typeof(h=s[d++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function Xg(s){return 4===s.type&&s.value!==Ar}function Qo(s,o,l){return o===(4!==s.type||l?s.value:Ar)}function me(s,o,l){let d=4;const h=s.attrs||[],m=function zE(s){for(let o=0;o<s.length;o++)if(zn(s[o]))return o;return s.length}(h);let v=!1;for(let b=0;b<o.length;b++){const C=o[b];if("number"!=typeof C){if(!v)if(4&d){if(d=2|1&d,""!==C&&!Qo(s,C,l)||""===C&&1===o.length){if(jn(d))return!1;v=!0}}else{const x=8&d?C:o[++b];if(8&d&&null!==s.attrs){if(!TM(s.attrs,x,l)){if(jn(d))return!1;v=!0}continue}const L=P(8&d?"class":C,h,Xg(s),l);if(-1===L){if(jn(d))return!1;v=!0;continue}if(""!==x){let $;$=L>m?"":h[L+1].toLowerCase();const K=8&d?$:null;if(K&&-1!==GE(K,x,0)||2&d&&x!==$){if(jn(d))return!1;v=!0}}}}else{if(!v&&!jn(d)&&!jn(C))return!1;if(v&&jn(C))continue;v=!1,d=C|1&d}}return jn(d)||v}function jn(s){return 0==(1&s)}function P(s,o,l,d){if(null===o)return-1;let h=0;if(d||!l){let m=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)m=!0;else{if(1===v||2===v){let b=o[++h];for(;"string"==typeof b;)b=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=m?1:2}return-1}return function av(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const d=s[l];if("number"==typeof d)return-1;if(d===o)return l;l++}return-1}(o,s)}function yo(s,o,l=!1){for(let d=0;d<o.length;d++)if(me(s,o[d],l))return!0;return!1}function YE(s,o){return s?":not("+o.trim()+")":o}function PD(s){let o=s[0],l=1,d=2,h="",m=!1;for(;l<s.length;){let v=s[l];if("string"==typeof v)if(2&d){const b=s[++l];h+="["+v+(b.length>0?'="'+b+'"':"")+"]"}else 8&d?h+="."+v:4&d&&(h+=" "+v);else""!==h&&!jn(v)&&(o+=YE(m,h),h=""),d=v,m=m||!jn(d);l++}return""!==h&&(o+=YE(m,h)),o}const kt={};function Sc(s){lv(Ht(),Ie(),Tn()+s,Xa())}function lv(s,o,l,d){if(!d)if(3==(3&o[2])){const m=s.preOrderCheckHooks;null!==m&&Ql(o,m,l)}else{const m=s.preOrderHooks;null!==m&&il(o,m,0,l)}ls(l)}function wu(s,o){return s<<17|o<<2}function li(s){return s>>17&32767}function Sr(s){return 2|s}function Hs(s){return(131068&s)>>2}function Gf(s,o){return-131069&s|o<<2}function ui(s){return 1|s}function ib(s,o){const l=s.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const h=l[d],m=l[d+1];if(-1!==m){const v=s.data[m];Vo(h),v.contentQueries(2,o[m],m)}}}function Yf(s,o,l,d,h,m,v,b,C,x){const M=o.blueprint.slice();return M[0]=h,M[2]=140|d,va(M),M[3]=M[15]=s,M[8]=l,M[10]=v||s&&s[10],M[11]=b||s&&s[11],M[12]=C||s&&s[12]||null,M[9]=x||s&&s[9]||null,M[6]=m,M[16]=2==o.type?s[16]:M,M}function Zd(s,o,l,d,h){let m=s.data[o];if(null===m)m=function om(s,o,l,d,h){const m=Ku(),v=Ja(),C=s.data[o]=function WD(s,o,l,d,h,m){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,l,o,d,h);return null===s.firstChild&&(s.firstChild=C),null!==m&&(v?null==m.child&&null!==C.parent&&(m.child=C):null===m.next&&(m.next=C)),C}(s,o,l,d,h),function Xu(){return tt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=l,m.value=d,m.attrs=h;const v=function as(){const s=tt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return Hr(m,!0),m}function Rc(s,o,l,d){if(0===l)return-1;const h=o.length;for(let m=0;m<l;m++)o.push(d),s.blueprint.push(d),s.data.push(null);return h}function qd(s,o,l){Ca(o);try{const d=s.viewQuery;null!==d&&kc(1,d,l);const h=s.template;null!==h&&ob(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&ib(s,o),s.staticViewQueries&&kc(2,s.viewQuery,l);const m=s.components;null!==m&&function ZD(s,o){for(let l=0;l<o.length;l++)zi(s,o[l])}(o,m)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[2]&=-5,el()}}function Gd(s,o,l,d){const h=o[2];if(256==(256&h))return;Ca(o);const m=Xa();try{va(o),function Ju(s){return tt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&ob(s,o,l,2,d);const v=3==(3&h);if(!m)if(v){const x=s.preOrderCheckHooks;null!==x&&Ql(o,x,null)}else{const x=s.preOrderHooks;null!==x&&il(o,x,0,null),pd(o,0)}if(function wb(s){for(let o=js(s);null!==o;o=bl(o)){if(!o[2])continue;const l=o[9];for(let d=0;d<l.length;d++){const h=l[d],m=h[3];0==(1024&h[2])&&lo(m,1),h[2]|=1024}}}(o),function Xf(s){for(let o=js(s);null!==o;o=bl(o))for(let l=10;l<o.length;l++){const d=o[l],h=d[1];Gu(d)&&Gd(h,d,h.template,d[8])}}(o),null!==s.contentQueries&&ib(s,o),!m)if(v){const x=s.contentCheckHooks;null!==x&&Ql(o,x)}else{const x=s.contentHooks;null!==x&&il(o,x,1),pd(o,1)}!function $D(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const h=l[d];if(h<0)ls(~h);else{const m=h,v=l[++d],b=l[++d];ec(v,m),b(2,o[m])}}}finally{ls(-1)}}(s,o);const b=s.components;null!==b&&function sb(s,o){for(let l=0;l<o.length;l++)Yn(s,o[l])}(o,b);const C=s.viewQuery;if(null!==C&&kc(2,C,d),!m)if(v){const x=s.viewCheckHooks;null!==x&&Ql(o,x)}else{const x=s.viewHooks;null!==x&&il(o,x,2),pd(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),m||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,lo(o[3],-1))}finally{el()}}function qD(s,o,l,d){const h=o[10],m=!Xa(),v=Bi(o);try{m&&!v&&h.begin&&h.begin(),v&&qd(s,o,d),Gd(s,o,l,d)}finally{m&&!v&&h.end&&h.end()}}function ob(s,o,l,d,h){const m=Tn(),v=2&d;try{ls(-1),v&&o.length>20&&lv(s,o,20,Xa()),l(d,h)}finally{ls(m)}}function vv(s,o,l){!wa()||(function fb(s,o,l,d){const h=l.directiveStart,m=l.directiveEnd;s.firstCreatePass||Ia(l,o),Dr(d,o);const v=l.initialInputs;for(let b=h;b<m;b++){const C=s.data[b],x=Ei(C);x&&bn(o,l,C);const M=ll(o,s,b,l);Dr(M,o),null!==v&&bu(0,b-h,M,C,0,v),x&&(ti(l.index,o)[8]=M)}}(s,o,l,On(l,o)),128==(128&l.flags)&&function pb(s,o,l){const d=l.directiveStart,h=l.directiveEnd,v=l.index,b=function ba(){return tt.lFrame.currentDirectiveIndex}();try{ls(v);for(let C=d;C<h;C++){const x=s.data[C],M=o[C];ql(C),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&gb(x,M)}}finally{ls(-1),ql(b)}}(s,o,l))}function am(s,o,l=On){const d=o.localNames;if(null!==d){let h=o.index+1;for(let m=0;m<d.length;m+=2){const v=d[m+1],b=-1===v?l(o,s):s[v];s[h++]=b}}}function wv(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=lm(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function lm(s,o,l,d,h,m,v,b,C,x){const M=20+d,L=M+h,$=function GD(s,o){const l=[];for(let d=0;d<o;d++)l.push(d<s?null:kt);return l}(M,L),K="function"==typeof x?x():x;return $[1]={type:s,blueprint:$,template:l,queries:null,viewQuery:b,declTNode:o,data:$.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:K,incompleteFirstPass:!1}}function ub(s,o,l,d){const h=kv(o);null===l?h.push(d):(h.push(l),s.firstCreatePass&&Eb(s).push(d,h.length-1))}function Wd(s,o,l){for(let d in s)if(s.hasOwnProperty(d)){const h=s[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(o,h):l[d]=[o,h]}return l}function Zs(s,o,l,d,h,m,v,b){const C=On(o,l);let M,x=o.inputs;!b&&null!=x&&(M=x[d])?(Nv(s,l,M,d,h),Ga(o)&&function zD(s,o){const l=ti(o,s);16&l[2]||(l[2]|=64)}(l,o.index)):3&o.type&&(d=function Ev(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=v?v(h,o.value||"",d):h,In(m)?m.setProperty(C,d,h):pt(d)||(C.setProperty?C.setProperty(d,h):C[d]=h))}function Cv(s,o,l,d){let h=!1;if(wa()){const m=function mb(s,o,l){const d=s.directiveRegistry;let h=null;if(d)for(let m=0;m<d.length;m++){const v=d[m];yo(l,v.selectors,!1)&&(h||(h=[]),$o(Ia(l,o),s,v.type),Ei(v)?(Tv(s,l),h.unshift(v)):h.push(v))}return h}(s,o,l),v=null===d?null:{"":-1};if(null!==m){h=!0,Dv(l,s.data.length,m.length);for(let M=0;M<m.length;M++){const L=m[M];L.providersResolver&&L.providersResolver(L)}let b=!1,C=!1,x=Rc(s,o,m.length,null);for(let M=0;M<m.length;M++){const L=m[M];l.mergedAttrs=Hi(l.mergedAttrs,L.hostAttrs),Av(s,l,o,x,L),cm(x,L,v),null!==L.contentQueries&&(l.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(l.flags|=128);const $=L.type.prototype;!b&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),b=!0),!C&&($.ngOnChanges||$.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),C=!0),x++}!function Jf(s,o){const d=o.directiveEnd,h=s.data,m=o.attrs,v=[];let b=null,C=null;for(let x=o.directiveStart;x<d;x++){const M=h[x],L=M.inputs,$=null===m||Xg(o)?null:Rn(L,m);v.push($),b=Wd(L,x,b),C=Wd(M.outputs,x,C)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=16),b.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=b,o.outputs=C}(s,l)}v&&function _b(s,o,l){if(o){const d=s.localNames=[];for(let h=0;h<o.length;h+=2){const m=l[o[h+1]];if(null==m)throw new Ze("301",`Export of name '${o[h+1]}' not found!`);d.push(o[h],m)}}}(l,d,v)}return l.mergedAttrs=Hi(l.mergedAttrs,l.attrs),h}function Iv(s,o,l,d,h,m){const v=m.hostBindings;if(v){let b=s.hostBindingOpCodes;null===b&&(b=s.hostBindingOpCodes=[]);const C=~o.index;(function hb(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(b)!=C&&b.push(C),b.push(d,h,v)}}function gb(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Tv(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function cm(s,o,l){if(l){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)l[o.exportAs[d]]=s;Ei(o)&&(l[""]=s)}}function Dv(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function Av(s,o,l,d,h){s.data[d]=h;const m=h.factory||(h.factory=xs(h.type)),v=new Xl(m,Ei(h),null);s.blueprint[d]=v,l[d]=v,Iv(s,o,0,d,Rc(s,l,h.hostVars,kt),h)}function bn(s,o,l){const d=On(o,s),h=wv(l),m=s[10],v=zd(s,Yf(s,h,null,l.onPush?64:16,d,o,m,m.createRenderer(d,l),null,null));s[o.index]=v}function $t(s,o,l,d,h,m){const v=On(s,o);!function Zt(s,o,l,d,h,m,v){if(null==m)In(s)?s.removeAttribute(o,h,l):o.removeAttribute(h);else{const b=null==v?X(m):v(m,d||"",h);In(s)?s.setAttribute(o,h,b,l):l?o.setAttributeNS(l,h,b):o.setAttribute(h,b)}}(o[11],v,m,s.value,l,d,h)}function bu(s,o,l,d,h,m){const v=m[o];if(null!==v){const b=d.setInput;for(let C=0;C<v.length;){const x=v[C++],M=v[C++],L=v[C++];null!==b?d.setInput(l,L,x,M):l[M]=L}}}function Rn(s,o){let l=null,d=0;for(;d<o.length;){const h=o[d];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],o[d+1])),d+=2}else d+=2;else d+=4}return l}function vb(s,o,l,d){return new Array(s,!0,!1,o,null,0,d,l,null,null)}function Yn(s,o){const l=ti(o,s);if(Gu(l)){const d=l[1];80&l[2]?Gd(d,l,d.template,l[8]):l[5]>0&&qt(l)}}function qt(s){for(let d=js(s);null!==d;d=bl(d))for(let h=10;h<d.length;h++){const m=d[h];if(1024&m[2]){const v=m[1];Gd(v,m,v.template,m[8])}else m[5]>0&&qt(m)}const l=s[1].components;if(null!==l)for(let d=0;d<l.length;d++){const h=ti(l[d],s);Gu(h)&&h[5]>0&&qt(h)}}function zi(s,o){const l=ti(o,s),d=l[1];(function YD(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(d,l),qd(d,l,l[8])}function zd(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function ps(s){for(;s;){s[2]|=64;const o=El(s);if(Qh(s)&&!o)return s;s=o}return null}function xv(s,o,l){const d=o[10];d.begin&&d.begin();try{Gd(s,o,s.template,l)}catch(h){throw Cb(o,h),h}finally{d.end&&d.end()}}function Rv(s){!function Sv(s){for(let o=0;o<s.components.length;o++){const l=s.components[o],d=Rf(l),h=d[1];qD(h,d,h.template,l)}}(s[8])}function kc(s,o,l){Vo(0),o(s,l)}const JD=(()=>Promise.resolve(null))();function kv(s){return s[7]||(s[7]=[])}function Eb(s){return s.cleanup||(s.cleanup=[])}function Cb(s,o){const l=s[9],d=l?l.get(vc,null):null;d&&d.handleError(o)}function Nv(s,o,l,d,h){for(let m=0;m<l.length;){const v=l[m++],b=l[m++],C=o[v],x=s.data[v];null!==x.setInput?x.setInput(C,h,d,b):C[b]=h}}function Ki(s,o,l){const d=Rs(o,s);!function Qg(s,o,l){In(s)?s.setValue(o,l):o.textContent=l}(s[11],d,l)}function Gt(s,o,l){let d=l?s.styles:null,h=l?s.classes:null,m=0;if(null!==o)for(let v=0;v<o.length;v++){const b=o[v];"number"==typeof b?m=b:1==m?h=fe(h,b):2==m&&(d=fe(d,b+": "+o[++v]+";"))}l?s.styles=d:s.stylesWithoutHost=d,l?s.classes=h:s.classesWithoutHost=h}const wo=new un("INJECTOR",-1);class ep{get(o,l=su){if(l===su){const d=new Error(`NullInjectorError: No provider for ${ae(o)}!`);throw d.name="NullInjectorError",d}return l}}const qs=new un("Set Injector scope."),tp={},gs={};let Pv;function fm(){return void 0===Pv&&(Pv=new ep),Pv}function pm(s,o=null,l=null,d){const h=Ib(s,o,l,d);return h._resolveInjectorDefTypes(),h}function Ib(s,o=null,l=null,d){return new Tb(s,l,o||fm(),d)}class Tb{constructor(o,l,d,h=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];l&&hs(l,b=>this.processProvider(b,o,l)),hs([o],b=>this.processInjectorType(b,[],m)),this.records.set(wo,Nc(void 0,this));const v=this.records.get(qs);this.scope=null!=v?v.value:null,this.source=h||("object"==typeof o?null:ae(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,l=su,d=mt.Default){this.assertNotDestroyed();const h=z(this),m=lr(void 0);try{if(!(d&mt.SkipSelf)){let b=this.records.get(o);if(void 0===b){const C=function Fv(s){return"function"==typeof s||"object"==typeof s&&s instanceof un}(o)&&ar(o);b=C&&this.injectableDefInScope(C)?Nc(gm(o),tp):null,this.records.set(o,b)}if(null!=b)return this.hydrate(o,b)}return(d&mt.Self?fm():this.parent).get(o,l=d&mt.Optional&&l===su?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[go]=v[go]||[]).unshift(ae(o)),h)throw v;return function oi(s,o,l,d){const h=s[go];throw o[T]&&h.unshift(o[T]),s.message=function tr(s,o,l,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=ae(o);if(Array.isArray(o))h=o.map(ae).join(" -> ");else if("object"==typeof o){let m=[];for(let v in o)if(o.hasOwnProperty(v)){let b=o[v];m.push(v+":"+("string"==typeof b?JSON.stringify(b):ae(b)))}h=`{${m.join(", ")}}`}return`${l}${d?"("+d+")":""}[${h}]: ${s.replace(Fg,"\n  ")}`}("\n"+s.message,h,l,d),s.ngTokenPath=h,s[go]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{lr(m),z(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((d,h)=>o.push(ae(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(o,l,d){if(!(o=te(o)))return!1;let h=Fi(o);const m=null==h&&o.ngModule||void 0,v=void 0===m?o:m,b=-1!==d.indexOf(v);if(void 0!==m&&(h=Fi(m)),null==h)return!1;if(null!=h.imports&&!b){let M;d.push(v);try{hs(h.imports,L=>{this.processInjectorType(L,l,d)&&(void 0===M&&(M=[]),M.push(L))})}finally{}if(void 0!==M)for(let L=0;L<M.length;L++){const{ngModule:$,providers:K}=M[L];hs(K,ge=>this.processProvider(ge,$,K||bt))}}this.injectorDefTypes.add(v);const C=xs(v)||(()=>new v);this.records.set(v,Nc(C,tp));const x=h.providers;if(null!=x&&!b){const M=o;hs(x,L=>this.processProvider(L,M,x))}return void 0!==m&&void 0!==o.providers}processProvider(o,l,d){let h=mn(o=te(o))?o:te(o&&o.provide);const m=function Kd(s,o,l){return Ab(s)?Nc(void 0,s.useValue):Nc(Ov(s),tp)}(o);if(mn(o)||!0!==o.multi)this.records.get(h);else{let v=this.records.get(h);v||(v=Nc(void 0,tp,!0),v.factory=()=>gt(v.multi),this.records.set(h,v)),h=o,v.multi.push(o)}this.records.set(h,m)}hydrate(o,l){return l.value===tp&&(l.value=gs,l.value=l.factory()),"object"==typeof l.value&&l.value&&function mm(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this.onDestroy.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=te(o.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function gm(s){const o=ar(s),l=null!==o?o.factory:xs(s);if(null!==l)return l;if(s instanceof un)throw new Error(`Token ${ae(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function Db(s){const o=s.length;if(o>0){const d=function Ma(s,o){const l=[];for(let d=0;d<s;d++)l.push(o);return l}(o,"?");throw new Error(`Can't resolve all parameters for ${ae(s)}: (${d.join(", ")}).`)}const l=function Nn(s){const o=s&&(s[vr]||s[hr]);if(o){const l=function ua(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Error("unreachable")}function Ov(s,o,l){let d;if(mn(s)){const h=te(s);return xs(h)||gm(h)}if(Ab(s))d=()=>te(s.useValue);else if(function tA(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...gt(s.deps||[]));else if(function eA(s){return!(!s||!s.useExisting)}(s))d=()=>ie(te(s.useExisting));else{const h=te(s&&(s.useClass||s.provide));if(!function rA(s){return!!s.deps}(s))return xs(h)||gm(h);d=()=>new h(...gt(s.deps))}return d}function Nc(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function Ab(s){return null!==s&&"object"==typeof s&&k in s}function mn(s){return"function"==typeof s}let ci=(()=>{class s{static create(l,d){var h;if(Array.isArray(l))return pm({name:""},d,l,"");{const m=null!==(h=l.name)&&void 0!==h?h:"";return pm({name:m},l.parent,l.providers,m)}}}return s.THROW_IF_NOT_FOUND=su,s.NULL=new ep,s.\u0275prov=vn({token:s,providedIn:"any",factory:()=>ie(wo)}),s.__NG_ELEMENT_ID__=-1,s})();function aA(s,o){rl(Rf(s)[1],Cn())}function Uv(s){let o=function bm(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const d=[s];for(;o;){let h;if(Ei(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Error("Directives cannot inherit Components");h=o.\u0275dir}if(h){if(l){d.push(h);const v=s;v.inputs=Bv(s.inputs),v.declaredInputs=Bv(s.declaredInputs),v.outputs=Bv(s.outputs);const b=h.hostBindings;b&&Fb(s,b);const C=h.viewQuery,x=h.contentQueries;if(C&&Cm(s,C),x&&Ob(s,x),oe(s.inputs,h.inputs),oe(s.declaredInputs,h.declaredInputs),oe(s.outputs,h.outputs),Ei(h)&&h.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let v=0;v<m.length;v++){const b=m[v];b&&b.ngInherit&&b(s),b===Uv&&(l=!1)}}o=Object.getPrototypeOf(o)}!function Vv(s){let o=0,l=null;for(let d=s.length-1;d>=0;d--){const h=s[d];h.hostVars=o+=h.hostVars,h.hostAttrs=Hi(h.hostAttrs,l=Hi(l,h.hostAttrs))}}(d)}function Bv(s){return s===rn?{}:s===bt?[]:s}function Cm(s,o){const l=s.viewQuery;s.viewQuery=l?(d,h)=>{o(d,h),l(d,h)}:o}function Ob(s,o){const l=s.contentQueries;s.contentQueries=l?(d,h,m)=>{o(d,h,m),l(d,h,m)}:o}function Fb(s,o){const l=s.hostBindings;s.hostBindings=l?(d,h)=>{o(d,h),l(d,h)}:o}let Dl=null;function Cu(){if(!Dl){const s=Et.Symbol;if(s&&s.iterator)Dl=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const d=o[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(Dl=d)}}}return Dl}function ip(s){return!!Hv(s)&&(Array.isArray(s)||!(s instanceof Map)&&Cu()in s)}function Hv(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function La(s,o,l){return s[o]=l}function Mn(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function eh(s,o,l,d){const h=Ie();return Mn(h,ks(),o)&&(Ht(),$t(Fn(),h,s,o,l,d)),eh}function Eo(s,o,l,d){return Mn(s,ks(),l)?o+X(l)+d:kt}function Am(s,o,l,d,h,m,v,b){const C=Ie(),x=Ht(),M=s+20,L=x.firstCreatePass?function lp(s,o,l,d,h,m,v,b,C){const x=o.consts,M=Zd(o,s,4,v||null,ni(x,b));Cv(o,l,M,ni(x,C)),rl(o,M);const L=M.tViews=lm(2,M,d,h,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,M),L.queries=o.queries.embeddedTView(M)),M}(M,x,C,o,l,d,h,m,v):x.data[M];Hr(L,!1);const $=C[11].createComment("");Hd(x,C,$,L),Dr($,C),zd(C,C[M]=vb($,C,$,L)),Vl(L)&&vv(x,C,L),null!=v&&am(C,L,b)}function Sm(s){return Sn(function Qu(){return tt.lFrame.contextLView}(),20+s)}function cp(s,o=mt.Default){const l=Ie();return null===l?ie(s,o):po(Cn(),l,te(s),o)}function Qv(){throw new Error("invalid")}function dp(s,o,l){const d=Ie();return Mn(d,ks(),o)&&Zs(Ht(),Fn(),d,s,o,d[11],l,!1),dp}function Jv(s,o,l,d,h){const v=h?"class":"style";Nv(s,l,o.inputs[v],v,d)}function Xv(s,o,l,d){const h=Ie(),m=Ht(),v=20+s,b=h[11],C=h[v]=jf(b,o,function uf(){return tt.lFrame.currentNamespace}()),x=m.firstCreatePass?function IA(s,o,l,d,h,m,v){const b=o.consts,x=Zd(o,s,2,h,ni(b,m));return Cv(o,l,x,ni(b,v)),null!==x.attrs&&Gt(x,x.attrs,!1),null!==x.mergedAttrs&&Gt(x,x.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,x),x}(v,m,h,0,o,l,d):m.data[v];Hr(x,!0);const M=x.mergedAttrs;null!==M&&ln(b,C,M);const L=x.classes;null!==L&&ov(b,C,L);const $=x.styles;null!==$&&qE(b,C,$),64!=(64&x.flags)&&Hd(m,h,C,x),0===function Zl(){return tt.lFrame.elementDepthCount}()&&Dr(C,h),function Ya(){tt.lFrame.elementDepthCount++}(),Vl(x)&&(vv(m,h,x),function ab(s,o,l){if(Pn(o)){const h=o.directiveEnd;for(let m=o.directiveStart;m<h;m++){const v=s.data[m];v.contentQueries&&v.contentQueries(1,l[m],m)}}}(m,x,h)),null!==d&&am(h,x)}function e0(){let s=Cn();Ja()?function Ea(){tt.lFrame.isParent=!1}():(s=s.parent,Hr(s,!1));const o=s;!function Qa(){tt.lFrame.elementDepthCount--}();const l=Ht();l.firstCreatePass&&(rl(l,s),Pn(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Bo(s){return 0!=(16&s.flags)}(o)&&Jv(l,o,Ie(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function df(s){return 0!=(32&s.flags)}(o)&&Jv(l,o,Ie(),o.stylesWithoutHost,!1)}function Wb(s,o,l,d){Xv(s,o,l,d),e0()}function n0(){return Ie()}function r0(s){return!!s&&"function"==typeof s.then}function s0(s){return!!s&&"function"==typeof s.subscribe}const hp=s0;function Nm(s,o,l,d){const h=Ie(),m=Ht(),v=Cn();return function Qb(s,o,l,d,h,m,v,b){const C=Vl(d),M=s.firstCreatePass&&Eb(s),L=o[8],$=kv(o);let K=!0;if(3&d.type||b){const Be=On(d,o),nt=b?b(Be):Be,we=$.length,_t=b?Wt=>b(Bn(Wt[d.index])):d.index;if(In(l)){let Wt=null;if(!b&&C&&(Wt=function DA(s,o,l,d){const h=s.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const v=h[m];if(v===l&&h[m+1]===d){const b=o[7],C=h[m+2];return b.length>C?b[C]:null}"string"==typeof v&&(m+=2)}return null}(s,o,h,d.index)),null!==Wt)(Wt.__ngLastListenerFn__||Wt).__ngNextListenerFn__=m,Wt.__ngLastListenerFn__=m,K=!1;else{m=Om(d,o,L,m,!1);const _n=l.listen(nt,h,m);$.push(m,_n),M&&M.push(h,_t,we,we+1)}}else m=Om(d,o,L,m,!0),nt.addEventListener(h,m,v),$.push(m),M&&M.push(h,_t,we,v)}else m=Om(d,o,L,m,!1);const ge=d.outputs;let ke;if(K&&null!==ge&&(ke=ge[h])){const Be=ke.length;if(Be)for(let nt=0;nt<Be;nt+=2){const xi=o[ke[nt]][ke[nt+1]].subscribe(m),sa=$.length;$.push(m,xi),M&&M.push(h,d.index,sa,-(sa+1))}}}(m,h,h[11],v,s,o,!!l,d),Nm}function Pm(s,o,l,d){try{return!1!==l(d)}catch(h){return Cb(s,h),!1}}function Om(s,o,l,d,h){return function m(v){if(v===Function)return d;const b=2&s.flags?ti(s.index,o):o;0==(32&o[2])&&ps(b);let C=Pm(o,0,d,v),x=m.__ngNextListenerFn__;for(;x;)C=Pm(o,0,x,v)&&C,x=x.__ngNextListenerFn__;return h&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function Jb(s=1){return function af(s){return(tt.lFrame.contextLView=function Kl(s,o){for(;s>0;)o=o[15],s--;return o}(s,tt.lFrame.contextLView))[8]}(s)}function Fm(s,o,l){return Lm(s,"",o,"",l),Fm}function Lm(s,o,l,d,h){const m=Ie(),v=Eo(m,o,l,d);return v!==kt&&Zs(Ht(),Fn(),m,s,v,m[11],h,!1),Lm}function rC(s,o,l,d,h){const m=s[l+1],v=null===o;let b=d?li(m):Hs(m),C=!1;for(;0!==b&&(!1===C||v);){const M=s[b+1];SA(s[b],o)&&(C=!0,s[b+1]=d?ui(M):Sr(M)),b=d?li(M):Hs(M)}C&&(s[l+1]=d?Sr(m):ui(m))}function SA(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Na(s,o)>=0}function l0(s,o){return function Ws(s,o,l,d){const h=Ie(),m=Ht(),v=function ji(s){const o=tt.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}(2);m.firstUpdatePass&&function u0(s,o,l,d){const h=s.data;if(null===h[l+1]){const m=h[Tn()],v=function lC(s,o){return o>=s.expandoStartIndex}(s,l);(function hC(s,o){return 0!=(s.flags&(o?16:32))})(m,d)&&null===o&&!v&&(o=!1),o=function NA(s,o,l,d){const h=function Uo(s){const o=tt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let m=d?o.residualClasses:o.residualStyles;if(null===h)0===(d?o.classBindings:o.styleBindings)&&(l=Uc(l=_p(null,s,o,l,d),o.attrs,d),m=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(l=_p(h,s,o,l,d),null===m){let C=function PA(s,o,l){const d=l?o.classBindings:o.styleBindings;if(0!==Hs(d))return s[li(d)]}(s,o,d);void 0!==C&&Array.isArray(C)&&(C=_p(null,s,o,C[1],d),C=Uc(C,o.attrs,d),function uC(s,o,l,d){s[li(l?o.classBindings:o.styleBindings)]=d}(s,o,d,C))}else m=function c0(s,o,l){let d;const h=o.directiveEnd;for(let m=1+o.directiveStylingLast;m<h;m++)d=Uc(d,s[m].hostAttrs,l);return Uc(d,o.attrs,l)}(s,o,d)}return void 0!==m&&(d?o.residualClasses=m:o.residualStyles=m),l}(h,m,o,d),function Su(s,o,l,d,h,m){let v=m?o.classBindings:o.styleBindings,b=li(v),C=Hs(v);s[d]=l;let M,x=!1;if(Array.isArray(l)){const L=l;M=L[1],(null===M||Na(L,M)>0)&&(x=!0)}else M=l;if(h)if(0!==C){const $=li(s[b+1]);s[d+1]=wu($,b),0!==$&&(s[$+1]=Gf(s[$+1],d)),s[b+1]=function JE(s,o){return 131071&s|o<<17}(s[b+1],d)}else s[d+1]=wu(b,0),0!==b&&(s[b+1]=Gf(s[b+1],d)),b=d;else s[d+1]=wu(C,0),0===b?b=d:s[C+1]=Gf(s[C+1],d),C=d;x&&(s[d+1]=Sr(s[d+1])),rC(s,M,d,!0),rC(s,M,d,!1),function gp(s,o,l,d,h){const m=h?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof o&&Na(m,o)>=0&&(l[d+1]=ui(l[d+1]))}(o,M,s,d,m),v=wu(b,C),m?o.classBindings=v:o.styleBindings=v}(h,m,o,l,v,d)}}(m,s,v,d),o!==kt&&Mn(h,v,o)&&function h0(s,o,l,d,h,m,v,b){if(!(3&o.type))return;const C=s.data,x=C[b+1];Vc(function Jo(s){return 1==(1&s)}(x)?cC(C,o,l,h,Hs(x),v):void 0)||(Vc(m)||function cv(s){return 2==(2&s)}(x)&&(m=cC(C,null,l,h,b,v)),function ND(s,o,l,d,h){const m=In(s);if(o)h?m?s.addClass(l,d):l.classList.add(d):m?s.removeClass(l,d):l.classList.remove(d);else{let v=-1===d.indexOf("-")?void 0:_o.DashCase;if(null==h)m?s.removeStyle(l,d,v):l.style.removeProperty(d);else{const b="string"==typeof h&&h.endsWith("!important");b&&(h=h.slice(0,-10),v|=_o.Important),m?s.setStyle(l,d,h,v):l.style.setProperty(d,h,b?"important":"")}}}(d,v,Rs(Tn(),l),h,m))}(m,m.data[Tn()],h,h[11],s,h[v+1]=function dC(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ae(mo(s)))),s}(o,l),d,v)}(s,o,null,!0),l0}function _p(s,o,l,d,h){let m=null;const v=l.directiveEnd;let b=l.directiveStylingLast;for(-1===b?b=l.directiveStart:b++;b<v&&(m=o[b],d=Uc(d,m.hostAttrs,h),m!==s);)b++;return null!==s&&(l.directiveStylingLast=b),d}function Uc(s,o,l){const d=l?1:2;let h=-1;if(null!==o)for(let m=0;m<o.length;m++){const v=o[m];"number"==typeof v?h=v:h===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Nr(s,v,!!l||o[++m]))}return void 0===s?null:s}function cC(s,o,l,d,h,m){const v=null===o;let b;for(;h>0;){const C=s[h],x=Array.isArray(C),M=x?C[1]:C,L=null===M;let $=l[h+1];$===kt&&($=L?bt:void 0);let K=L?qo($,d):M===d?$:void 0;if(x&&!Vc(K)&&(K=qo(C,d)),Vc(K)&&(b=K,v))return b;const ge=s[h+1];h=v?li(ge):Hs(ge)}if(null!==o){let C=m?o.residualClasses:o.residualStyles;null!=C&&(b=qo(C,d))}return b}function Vc(s){return void 0!==s}function uh(s,o=""){const l=Ie(),d=Ht(),h=s+20,m=d.firstCreatePass?Zd(d,h,1,o,null):d.data[h],v=l[h]=function Ec(s,o){return In(s)?s.createText(o):s.createTextNode(o)}(l[11],o);Hd(d,l,v,m),Hr(m,!1)}function yp(s){return qm("",s,""),yp}function qm(s,o,l){const d=Ie(),h=Eo(d,s,o,l);return h!==kt&&Ki(d,Tn(),h),qm}const Bc=void 0;var IC=["en",[["a","p"],["AM","PM"],Bc],[["AM","PM"],Bc,Bc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bc,"{1} 'at' {0}",Bc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function jA(s){const l=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let hh={};function v0(s){const o=function HA(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=DC(o);if(l)return l;const d=o.split("-")[0];if(l=DC(d),l)return l;if("en"===d)return IC;throw new Error(`Missing locale data for the locale "${s}".`)}function w0(s){return v0(s)[dt.PluralCase]}function DC(s){return s in hh||(hh[s]=Et.ng&&Et.ng.common&&Et.ng.common.locales&&Et.ng.common.locales[s]),hh[s]}var dt=(()=>((dt=dt||{})[dt.LocaleId=0]="LocaleId",dt[dt.DayPeriodsFormat=1]="DayPeriodsFormat",dt[dt.DayPeriodsStandalone=2]="DayPeriodsStandalone",dt[dt.DaysFormat=3]="DaysFormat",dt[dt.DaysStandalone=4]="DaysStandalone",dt[dt.MonthsFormat=5]="MonthsFormat",dt[dt.MonthsStandalone=6]="MonthsStandalone",dt[dt.Eras=7]="Eras",dt[dt.FirstDayOfWeek=8]="FirstDayOfWeek",dt[dt.WeekendRange=9]="WeekendRange",dt[dt.DateFormat=10]="DateFormat",dt[dt.TimeFormat=11]="TimeFormat",dt[dt.DateTimeFormat=12]="DateTimeFormat",dt[dt.NumberSymbols=13]="NumberSymbols",dt[dt.NumberFormats=14]="NumberFormats",dt[dt.CurrencyCode=15]="CurrencyCode",dt[dt.CurrencySymbol=16]="CurrencySymbol",dt[dt.CurrencyName=17]="CurrencyName",dt[dt.Currencies=18]="Currencies",dt[dt.Directionality=19]="Directionality",dt[dt.PluralCase=20]="PluralCase",dt[dt.ExtraData=21]="ExtraData",dt))();const Qm="en-US";let Dp=Qm;function R0(s,o,l,d,h){if(s=te(s),Array.isArray(s))for(let m=0;m<s.length;m++)R0(s[m],o,l,d,h);else{const m=Ht(),v=Ie();let b=mn(s)?s:te(s.provide),C=Ov(s);const x=Cn(),M=1048575&x.providerIndexes,L=x.directiveStart,$=x.providerIndexes>>20;if(mn(s)||!s.multi){const K=new Xl(C,h,cp),ge=r_(b,o,h?M:M+$,L);-1===ge?($o(Ia(x,v),m,b),M0(m,s,o.length),o.push(b),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),l.push(K),v.push(K)):(l[ge]=K,v[ge]=K)}else{const K=r_(b,o,M+$,L),ge=r_(b,o,M,M+$),ke=K>=0&&l[K],Be=ge>=0&&l[ge];if(h&&!Be||!h&&!ke){$o(Ia(x,v),m,b);const nt=function wS(s,o,l,d,h){const m=new Xl(s,l,cp);return m.multi=[],m.index=o,m.componentProviders=0,JC(m,h,d&&!l),m}(h?vS:yS,l.length,h,d,C);!h&&Be&&(l[ge].providerFactory=nt),M0(m,s,o.length,0),o.push(b),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),l.push(nt),v.push(nt)}else M0(m,s,K>-1?K:ge,JC(l[h?ge:K],C,!h&&d));!h&&d&&Be&&l[ge].componentProviders++}}}function M0(s,o,l,d){const h=mn(o),m=function nA(s){return!!s.useClass}(o);if(h||m){const C=(m?te(o.useClass):o).prototype.ngOnDestroy;if(C){const x=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const M=x.indexOf(l);-1===M?x.push(l,[d,C]):x[M+1].push(d,C)}else x.push(l,C)}}}function JC(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function r_(s,o,l,d){for(let h=l;h<d;h++)if(o[h]===s)return h;return-1}function yS(s,o,l,d){return k0(this.multi,[])}function vS(s,o,l,d){const h=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,b=ll(l,l[1],this.providerFactory.index,d);m=b.slice(0,v),k0(h,m);for(let C=v;C<b.length;C++)m.push(b[C])}else m=[],k0(h,m);return m}function k0(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function xl(s,o=[]){return l=>{l.providersResolver=(d,h)=>function ZM(s,o,l){const d=Ht();if(d.firstCreatePass){const h=Ei(s);R0(l,d.data,d.blueprint,h,!0),R0(o,d.data,d.blueprint,h,!1)}}(d,h?h(s):s,o)}}class vs{}class ES{resolveComponentFactory(o){throw function Mp(s){const o=Error(`No component factory found for ${ae(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let kp=(()=>{class s{}return s.NULL=new ES,s})();function i_(){return mh(Cn(),Ie())}function mh(s,o){return new Np(On(s,o))}let Np=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=i_,s})();function eI(s){return s instanceof Np?s.nativeElement:s}class s_{}let tI=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function CS(){const s=Ie(),l=ti(Cn().index,s);return function o_(s){return s[11]}(ss(l)?l:s)}(),s})(),GM=(()=>{class s{}return s.\u0275prov=vn({token:s,providedIn:"root",factory:()=>null}),s})();class nI{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const a_=new nI("13.0.3"),rI={};function N0(s,o,l,d,h=!1){for(;null!==l;){const m=o[l.index];if(null!==m&&d.push(Bn(m)),os(m))for(let b=10;b<m.length;b++){const C=m[b],x=C[1].firstChild;null!==x&&N0(C[1],C,x,d)}const v=l.type;if(8&v)N0(s,o,l.child,d);else if(32&v){const b=wc(l,o);let C;for(;C=b();)d.push(C)}else if(16&v){const b=qf(o,l);if(Array.isArray(b))d.push(...b);else{const C=El(o[16]);N0(C[1],C,b,d,!0)}}l=h?l.projectionNext:l.next}return d}class Pp{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return N0(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(os(o)){const l=o[8],d=l?l.indexOf(this):-1;d>-1&&(j(o,d),Ra(l,d))}this._attachedToViewContainer=!1}J(this._lView[1],this._lView)}onDestroy(o){ub(this._lView[1],this._lView,null,o)}markForCheck(){ps(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){xv(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Mc(s,o,l){co(!0);try{xv(s,o,l)}finally{co(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function f(s,o){Dc(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=o}}class IS extends Pp{constructor(o){super(o),this._view=o}detectChanges(){Rv(this._view)}checkNoChanges(){!function Mv(s){co(!0);try{Rv(s)}finally{co(!1)}}(this._view)}get context(){return null}}class TS extends kp{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=Yt(o);return new iI(l,this.ngModule)}}function DS(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}const zM=new un("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>mu});class iI extends vs{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function QE(s){return s.map(PD).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return DS(this.componentDef.inputs)}get outputs(){return DS(this.componentDef.outputs)}create(o,l,d,h){const m=(h=h||this.ngModule)?function KM(s,o){return{get:(l,d,h)=>{const m=s.get(l,rI,h);return m!==rI||d===rI?m:o.get(l,d,h)}}}(o,h.injector):o,v=m.get(s_,qu),b=m.get(GM,null),C=v.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",M=d?function um(s,o,l){if(In(s))return s.selectRootElement(o,l===et.ShadowDom);let d="string"==typeof o?s.querySelector(o):o;return d.textContent="",d}(C,d,this.componentDef.encapsulation):jf(v.createRenderer(null,this.componentDef),x,function WM(s){const o=s.toLowerCase();return"svg"===o?rf:"math"===o?"http://www.w3.org/1998/MathML/":null}(x)),L=this.componentDef.onPush?576:528,$=function Pb(s,o){return{components:[],scheduler:s||mu,clean:JD,playerHandler:o||null,flags:0}}(),K=lm(0,null,null,1,0,null,null,null,null,null),ge=Yf(null,K,$,L,null,null,v,C,b,m);let ke,Be;Ca(ge);try{const nt=function Nb(s,o,l,d,h,m){const v=l[1];l[20]=s;const C=Zd(v,20,2,"#host",null),x=C.mergedAttrs=o.hostAttrs;null!==x&&(Gt(C,x,!0),null!==s&&(ln(h,s,x),null!==C.classes&&ov(h,s,C.classes),null!==C.styles&&qE(h,s,C.styles)));const M=d.createRenderer(s,o),L=Yf(l,wv(o),null,o.onPush?64:16,l[20],C,d,M,m||null,null);return v.firstCreatePass&&($o(Ia(C,l),v,o.type),Tv(v,C),Dv(C,l.length,1)),zd(l,L),l[20]=L}(M,this.componentDef,ge,v,C);if(M)if(d)ln(C,M,["ng-version",a_.full]);else{const{attrs:we,classes:_t}=function Ac(s){const o=[],l=[];let d=1,h=2;for(;d<s.length;){let m=s[d];if("string"==typeof m)2===h?""!==m&&o.push(m,s[++d]):8===h&&l.push(m);else{if(!jn(h))break;h=m}d++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);we&&ln(C,M,we),_t&&_t.length>0&&ov(C,M,_t.join(" "))}if(Be=Ka(K,20),void 0!==l){const we=Be.projection=[];for(let _t=0;_t<this.ngContentSelectors.length;_t++){const Wt=l[_t];we.push(null!=Wt?Array.from(Wt):null)}}ke=function rp(s,o,l,d,h){const m=l[1],v=function db(s,o,l){const d=Cn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),Av(s,d,o,Rc(s,o,1,null),l));const h=ll(o,s,d.directiveStart,d);Dr(h,o);const m=On(d,o);return m&&Dr(m,o),h}(m,l,o);if(d.components.push(v),s[8]=v,h&&h.forEach(C=>C(v,o)),o.contentQueries){const C=Cn();o.contentQueries(1,v,C.directiveStart)}const b=Cn();return!m.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ls(b.index),Iv(l[1],b,0,b.directiveStart,b.directiveEnd,o),gb(o,v)),v}(nt,this.componentDef,ge,$,[aA]),qd(K,ge,null)}finally{el()}return new sI(this.componentType,ke,mh(Be,ge),ge,Be)}}class sI extends class di{}{constructor(o,l,d,h,m){super(),this.location=d,this._rootLView=h,this._tNode=m,this.instance=l,this.hostView=this.changeDetectorRef=new IS(h),this.componentType=o}get injector(){return new pn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class _h{}class Lr{}const Ai=new Map;class aI extends _h{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new TS(this);const d=Gn(o);this._bootstrapComponents=Bs(d.bootstrap),this._r3Injector=Ib(o,l,[{provide:_h,useValue:this},{provide:kp,useValue:this.componentFactoryResolver}],ae(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,l=ci.THROW_IF_NOT_FOUND,d=mt.Default){return o===ci||o===_h||o===wo?this:this._r3Injector.get(o,l,d)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class O0 extends Lr{constructor(o){super(),this.moduleType=o,null!==Gn(o)&&function SS(s){const o=new Set;!function l(d){const h=Gn(d,!0),m=h.id;null!==m&&(function l_(s,o,l){if(o&&o!==l)throw new Error(`Duplicate module registered for ${s} - ${ae(o)} vs ${ae(o.name)}`)}(m,Ai.get(m),d),Ai.set(m,d));const v=Bs(h.imports);for(const b of v)o.has(b)||(o.add(b),l(b))}(s)}(o)}create(o){return new aI(this.moduleType,o)}}function Op(s,o){const l=s[o];return l===kt?void 0:l}function cI(s,o,l,d,h,m,v){const b=o+l;return function Al(s,o,l,d){const h=Mn(s,o,l);return Mn(s,o+1,d)||h}(s,b,h,m)?La(s,b+2,v?d.call(v,h,m):d(h,m)):Op(s,b+2)}function V0(s,o){const l=Ht();let d;const h=s+20;l.firstCreatePass?(d=function d_(s,o){if(o)for(let l=o.length-1;l>=0;l--){const d=o[l];if(s===d.name)return d}}(o,l.pipeRegistry),l.data[h]=d,d.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(h,d.onDestroy)):d=l.data[h];const m=d.factory||(d.factory=xs(d.type)),v=lr(cp);try{const b=Ns(!1),C=m();return Ns(b),function Vb(s,o,l,d){l>=s.data.length&&(s.data[l]=null,s.blueprint[l]=null),o[l]=d}(l,Ie(),h,C),C}finally{lr(v)}}function B0(s,o,l){const d=s+20,h=Ie(),m=Sn(h,d);return vh(h,d)?function uI(s,o,l,d,h,m){const v=o+l;return Mn(s,v,h)?La(s,v+1,m?d.call(m,h):d(h)):Op(s,v+1)}(h,Tr(),o,m.transform,l,m):m.transform(l)}function fI(s,o,l,d){const h=s+20,m=Ie(),v=Sn(m,h);return vh(m,h)?cI(m,Tr(),o,v.transform,l,d,v):v.transform(l,d)}function vh(s,o){return s[1].data[o].pure}function h_(s){return o=>{setTimeout(s,void 0,o)}}const Do=class j0 extends u.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,d){var h,m,v;let b=o,C=l||(()=>null),x=d;if(o&&"object"==typeof o){const L=o;b=null===(h=L.next)||void 0===h?void 0:h.bind(L),C=null===(m=L.error)||void 0===m?void 0:m.bind(L),x=null===(v=L.complete)||void 0===v?void 0:v.bind(L)}this.__isAsync&&(C=h_(C),b&&(b=h_(b)),x&&(x=h_(x)));const M=super.subscribe({next:b,error:C,complete:x});return o instanceof Y.w0&&o.add(M),M}};function pI(){return this._results[Cu()]()}class Hc{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Cu(),d=Hc.prototype;d[l]||(d[l]=pI)}get changes(){return this._changes||(this._changes=new Do)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const d=this;d.dirty=!1;const h=Zr(o);(this._changesDetected=!function Og(s,o,l){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],m=o[d];if(l&&(h=l(h),m=l(m)),m!==h)return!1}return!0}(d._results,h,l))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Fp=(()=>{class s{}return s.__NG_ELEMENT_ID__=FS,s})();const H0=Fp,gI=class extends H0{constructor(o,l,d){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(o){const l=this._declarationTContainer.tViews,d=Yf(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(d[19]=m.createEmbeddedView(l)),qd(l,d,o),new Pp(d)}};function FS(){return wh(Cn(),Ie())}function wh(s,o){return 4&s.type?new gI(o,s,mh(s,o)):null}let Lp=(()=>{class s{}return s.__NG_ELEMENT_ID__=mI,s})();function mI(){return Up(Cn(),Ie())}const $0=Lp,_I=class extends $0{constructor(o,l,d){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=d}get element(){return mh(this._hostTNode,this._hostLView)}get injector(){return new pn(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ta(this._hostTNode,this._hostLView);if(ur(o)){const l=jo(o,this._hostLView),d=sl(o);return new pn(l[1].data[d+8],l)}return new pn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=yI(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,d){const h=o.createEmbeddedView(l||{});return this.insert(h,d),h}createComponent(o,l,d,h,m){const v=o&&!function cl(s){return"function"==typeof s}(o);let b;if(v)b=l;else{const L=l||{};b=L.index,d=L.injector,h=L.projectableNodes,m=L.ngModuleRef}const C=v?o:new iI(Yt(o)),x=d||this.parentInjector;if(!m&&null==C.ngModule&&x){const L=x.get(_h,null);L&&(m=L)}const M=C.create(x,h,void 0,m);return this.insert(M.hostView,b),M}insert(o,l){const d=o._lView,h=d[1];if(function Ms(s){return os(s[3])}(d)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const L=d[3],$=new _I(L,L[6],L[3]);$.detach($.indexOf(o))}}const m=this._adjustIndex(l),v=this._lContainer;!function w(s,o,l,d){const h=10+d,m=l.length;d>0&&(l[h-1][4]=o),d<m-10?(o[4]=l[h],tu(l,10+d,o)):(l.push(o),o[4]=null),o[3]=l;const v=o[17];null!==v&&l!==v&&function A(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(v,o);const b=o[19];null!==b&&b.insertView(s),o[2]|=128}(h,d,v,m);const b=nv(m,v),C=d[11],x=bc(C,v[7]);return null!==x&&function y(s,o,l,d,h,m){d[0]=h,d[6]=o,Dc(s,d,l,1,h,m)}(h,v[6],C,d,x,b),o.attachToViewContainerRef(),tu(Z0(v),m,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=yI(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),d=j(this._lContainer,l);d&&(Ra(Z0(this._lContainer),l),J(d[1],d))}detach(o){const l=this._adjustIndex(o,-1),d=j(this._lContainer,l);return d&&null!=Ra(Z0(this._lContainer),l)?new Pp(d):null}_adjustIndex(o,l=0){return null==o?this.length+l:o}};function yI(s){return s[8]}function Z0(s){return s[8]||(s[8]=[])}function Up(s,o){let l;const d=o[s.index];if(os(d))l=d;else{let h;if(8&s.type)h=Bn(d);else{const m=o[11];h=m.createComment("");const v=On(s,o);Vn(m,bc(m,v),h,function Jg(s,o){return In(s)?s.nextSibling(o):o.nextSibling}(m,v),!1)}o[s.index]=l=vb(d,o,h,s),zd(o,l)}return new _I(l,s,o)}class f_{constructor(o){this.queryList=o,this.matches=null}clone(){return new f_(this.queryList)}setDirty(){this.queryList.setDirty()}}class W0{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const d=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let m=0;m<d;m++){const v=l.getByIndex(m);h.push(this.queries[v.indexInDeclarationView].clone())}return new W0(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==II(o,l).matches&&this.queries[l].setDirty()}}class z0{constructor(o,l,d=null){this.predicate=o,this.flags=l,this.read=d}}class Eh{constructor(o=[]){this.queries=o}elementStart(o,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let d=0;d<this.length;d++){const h=null!==l?l.length:0,m=this.getByIndex(d).embeddedTView(o,h);m&&(m.indexInDeclarationView=d,null!==l?l.push(m):l=[m])}return null!==l?new Eh(l):null}template(o,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class K0{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new K0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const m=d[h];this.matchTNodeWithReadOption(o,l,LS(l,m)),this.matchTNodeWithReadOption(o,l,gr(l,o,m,!1,!1))}else d===Fp?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,gr(l,o,d,!1,!1))}matchTNodeWithReadOption(o,l,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===Np||h===Lp||h===Fp&&4&l.type)this.addMatch(l.index,-2);else{const m=gr(l,o,h,!1,!1);null!==m&&this.addMatch(l.index,m)}else this.addMatch(l.index,d)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function LS(s,o){const l=s.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===o)return l[d+1];return null}function VS(s,o,l,d){return-1===l?function US(s,o){return 11&s.type?mh(s,o):4&s.type?wh(s,o):null}(o,s):-2===l?function BS(s,o,l){return l===Np?mh(o,s):l===Fp?wh(o,s):l===Lp?Up(o,s):void 0}(s,o,d):ll(s,s[1],l,o)}function wI(s,o,l,d){const h=o[19].queries[d];if(null===h.matches){const m=s.data,v=l.matches,b=[];for(let C=0;C<v.length;C+=2){const x=v[C];b.push(x<0?null:VS(o,m[x],v[C+1],l.metadata.read))}h.matches=b}return h.matches}function Y0(s,o,l,d){const h=s.queries.getByIndex(l),m=h.matches;if(null!==m){const v=wI(s,o,h,l);for(let b=0;b<m.length;b+=2){const C=m[b];if(C>0)d.push(v[b/2]);else{const x=m[b+1],M=o[-C];for(let L=10;L<M.length;L++){const $=M[L];$[17]===$[3]&&Y0($[1],$,x,d)}if(null!==M[9]){const L=M[9];for(let $=0;$<L.length;$++){const K=L[$];Y0(K[1],K,x,d)}}}}}return d}function EI(s){const o=Ie(),l=Ht(),d=hd();Vo(d+1);const h=II(l,d);if(s.dirty&&Bi(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const m=h.crossesNgTemplate?Y0(l,o,d,[]):wI(l,o,h,d);s.reset(m,eI),s.notifyOnChanges()}return!0}return!1}function bI(s,o,l,d){const h=Ht();if(h.firstCreatePass){const m=Cn();(function p_(s,o,l){null===s.queries&&(s.queries=new Eh),s.queries.track(new K0(o,l))})(h,new z0(o,l,d),m.index),function HS(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}!function Q0(s,o,l){const d=new Hc(4==(4&l));ub(s,o,d,d.destroy),null===o[19]&&(o[19]=new W0),o[19].queries.push(new f_(d))}(h,Ie(),l)}function Vp(){return function CI(s,o){return s[19].queries[o].queryList}(Ie(),hd())}function II(s,o){return s.queries.getByIndex(o)}function TI(s,o){return wh(s,o)}function jp(...s){}const I_=new un("Application Initializer");let Ih=(()=>{class s{constructor(l){this.appInits=l,this.resolve=jp,this.reject=jp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,h)=>{this.resolve=d,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(r0(m))l.push(m);else if(hp(m)){const v=new Promise((b,C)=>{m.subscribe({complete:b,error:C})});l.push(v)}}Promise.all(l).then(()=>{d()}).catch(h=>{this.reject(h)}),0===l.length&&d(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(ie(I_,8))},s.\u0275prov=vn({token:s,factory:s.\u0275fac}),s})();const OI=new un("AppId"),FI={provide:OI,useFactory:function nx(){return`${iw()}${iw()}${iw()}`},deps:[]};function iw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const LI=new un("Platform Initializer"),sw=new un("Platform ID"),UI=new un("appBootstrapListener");let VI=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=vn({token:s,factory:s.\u0275fac}),s})();const Th=new un("LocaleId"),BI=new un("DefaultCurrencyCode");class it{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let Hp=(()=>{class s{compileModuleSync(l){return new O0(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),m=Bs(Gn(l).declarations).reduce((v,b)=>{const C=Yt(b);return C&&v.push(new iI(C)),v},[]);return new it(d,m)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=vn({token:s,factory:s.\u0275fac}),s})();const aw=(()=>Promise.resolve(0))();function qc(s){"undefined"==typeof Zone?aw.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Qi{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Do(!1),this.onMicrotaskEmpty=new Do(!1),this.onStable=new Do(!1),this.onError=new Do(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&l,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function rx(){let s=Et.requestAnimationFrame,o=Et.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function hi(s){const o=()=>{!function sx(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Et,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Dh(s),s.isCheckStableRunning=!0,lw(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Dh(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,h,m,v,b)=>{try{return Gr(s),l.invokeTask(h,m,v,b)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),Rl(s)}},onInvoke:(l,d,h,m,v,b,C)=>{try{return Gr(s),l.invoke(h,m,v,b,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),Rl(s)}},onHasTask:(l,d,h,m)=>{l.hasTask(h,m),d===h&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,Dh(s),lw(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(l,d,h,m)=>(l.handleError(h,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Qi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Qi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,l,d){return this._inner.run(o,l,d)}runTask(o,l,d,h){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+h,o,ix,jp,jp);try{return m.runTask(v,l,d)}finally{m.cancelTask(v)}}runGuarded(o,l,d){return this._inner.runGuarded(o,l,d)}runOutsideAngular(o){return this._outer.run(o)}}const ix={};function lw(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Dh(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Gr(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Rl(s){s._nesting--,lw(s)}class ox{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Do,this.onMicrotaskEmpty=new Do,this.onStable=new Do,this.onError=new Do}run(o,l,d){return o.apply(l,d)}runGuarded(o,l,d){return o.apply(l,d)}runOutsideAngular(o){return o()}runTask(o,l,d,h){return o.apply(l,d)}}let HI=(()=>{class s{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Qi.assertNotInAngularZone(),qc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())qc(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,h){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:m,updateCb:h})}whenStable(l,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,d,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(ie(Qi))},s.\u0275prov=vn({token:s,factory:s.\u0275fac}),s})(),uw=(()=>{class s{constructor(){this._applications=new Map,T_.addToWindow(this)}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return T_.findTestabilityInTree(this,l,d)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=vn({token:s,factory:s.\u0275fac}),s})();class $I{addToWindow(o){}findTestabilityInTree(o,l,d){return null}}function ax(s){T_=s}let Ys,T_=new $I;const A_=new un("AllowMultipleToken");class Xi{constructor(o,l){this.name=o,this.token=l}}function cw(s,o,l=[]){const d=`Platform: ${o}`,h=new un(d);return(m=[])=>{let v=hw();if(!v||v.injector.get(A_,!1))if(s)s(l.concat(m).concat({provide:h,useValue:!0}));else{const b=l.concat(m).concat({provide:h,useValue:!0},{provide:qs,useValue:"platform"});!function ZI(s){if(Ys&&!Ys.destroyed&&!Ys.injector.get(A_,!1))throw new Ze("400","");Ys=s.get(fw);const o=s.get(LI,null);o&&o.forEach(l=>l())}(ci.create({providers:b,name:d}))}return function dw(s){const o=hw();if(!o)throw new Ze("401","");return o}()}}function hw(){return Ys&&!Ys.destroyed?Ys:null}let fw=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const b=function pw(s,o){let l;return l="noop"===s?new ox:("zone.js"===s?void 0:s)||new Qi({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),l}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),C=[{provide:Qi,useValue:b}];return b.run(()=>{const x=ci.create({providers:C,parent:this.injector,name:l.moduleType.name}),M=l.create(x),L=M.injector.get(vc,null);if(!L)throw new Ze("402","");return b.runOutsideAngular(()=>{const $=b.onError.subscribe({next:K=>{L.handleError(K)}});M.onDestroy(()=>{S_(this._modules,M),$.unsubscribe()})}),function cx(s,o,l){try{const d=l();return r0(d)?d.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}(L,b,()=>{const $=M.injector.get(Ih);return $.runInitializers(),$.donePromise.then(()=>(function b0(s){St(s,"Expected localeId to be defined"),"string"==typeof s&&(Dp=s.toLowerCase().replace(/_/g,"-"))}(M.injector.get(Th,Qm)||Qm),this._moduleDoBootstrap(M),M))})})}bootstrapModule(l,d=[]){const h=qI({},d);return function D_(s,o,l){const d=new O0(l);return Promise.resolve(d)}(0,0,l).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(l){const d=l.injector.get(ja);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new Ze("403","");l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ze("404","");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(ie(ci))},s.\u0275prov=vn({token:s,factory:s.\u0275fac}),s})();function qI(s,o){return Array.isArray(o)?o.reduce(qI,s):Object.assign(Object.assign({},s),o)}let ja=(()=>{class s{constructor(l,d,h,m,v){this._zone=l,this._injector=d,this._exceptionHandler=h,this._componentFactoryResolver=m,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const b=new O.y(x=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{x.next(this._stable),x.complete()})}),C=new O.y(x=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{Qi.assertNotInAngularZone(),qc(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,x.next(!0))})})});const L=this._zone.onUnstable.subscribe(()=>{Qi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{x.next(!1)}))});return()=>{M.unsubscribe(),L.unsubscribe()}});this.isStable=(0,se.T)(b,C.pipe((0,re.B)()))}bootstrap(l,d){if(!this._initStatus.done)throw new Ze("405","");let h;h=l instanceof vs?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(h.componentType);const m=function Ji(s){return s.isBoundToModule}(h)?void 0:this._injector.get(_h),b=h.create(ci.NULL,[],d||h.selector,m),C=b.location.nativeElement,x=b.injector.get(HI,null),M=x&&b.injector.get(uw);return x&&M&&M.registerApplication(C,x),b.onDestroy(()=>{this.detachView(b.hostView),S_(this.components,b),M&&M.unregisterApplication(C)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new Ze("101","");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;S_(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(UI,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(l){return new(l||s)(ie(Qi),ie(ci),ie(vc),ie(kp),ie(Ih))},s.\u0275prov=vn({token:s,factory:s.\u0275fac}),s})();function S_(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let WI=!0,gw=!1;function R_(){return gw=!0,WI}function mw(){if(gw)throw new Error("Cannot enable prod mode after platform setup.");WI=!1}let dx=(()=>{class s{}return s.__NG_ELEMENT_ID__=_w,s})();function _w(s){return function QI(s,o,l){if(Ga(s)&&!l){const d=ti(s.index,o);return new Pp(d,d)}return 47&s.type?new Pp(o[16],o):null}(Cn(),Ie(),16==(16&s))}class Wr{constructor(){}supports(o){return ip(o)}create(o){return new Ew(o)}}const F_=(s,o)=>o;class Ew{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||F_}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,d=this._removalsHead,h=0,m=null;for(;l||d;){const v=!d||l&&l.currentIndex<rT(d,h,m)?l:d,b=rT(v,h,m),C=v.currentIndex;if(v===d)h--,d=d._nextRemoved;else if(l=l._next,null==v.previousIndex)h++;else{m||(m=[]);const x=b-h,M=C-h;if(x!=M){for(let $=0;$<x;$++){const K=$<m.length?m[$]:m[$]=0,ge=K+$;M<=ge&&ge<x&&(m[$]=K+1)}m[v.previousIndex]=M-x}}b!==C&&o(v,b,C)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!ip(o))throw new Error(`Error trying to diff '${ae(o)}'. Only arrays and iterables are allowed`);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,m,v,l=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let b=0;b<this.length;b++)m=o[b],v=this._trackByFn(b,m),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,m,v,b)),Object.is(l.item,m)||this._addIdentityChange(l,m)):(l=this._mismatch(l,m,v,b),d=!0),l=l._next}else h=0,function Lb(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[Cu()]();let d;for(;!(d=l.next()).done;)o(d.value)}}(o,b=>{v=this._trackByFn(h,b),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,b,v,h)),Object.is(l.item,b)||this._addIdentityChange(l,b)):(l=this._mismatch(l,b,v,h),d=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,d,h){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,m,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,m,h)):o=this._addAfter(new px(l,d),m,h),o}_verifyReinsertion(o,l,d,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?o=this._reinsertAfter(m,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,m=o._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(o,l,d),this._addToMoves(o,d),o}_moveAfter(o,l,d){return this._unlink(o),this._insertAfter(o,l,d),this._addToMoves(o,d),o}_addAfter(o,l,d){return this._insertAfter(o,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,d){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new bw),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,d=o._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bw),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class px{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class gx{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const l=o._prevDup,d=o._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class bw{constructor(){this.map=new Map}put(o){const l=o.trackById;let d=this.map.get(l);d||(d=new gx,this.map.set(l,d)),d.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function rT(s,o,l){const d=s.previousIndex;if(null===d)return d;let h=0;return l&&d<l.length&&(h=l[d]),d+o+h}class iT{constructor(){}supports(o){return o instanceof Map||Hv(o)}create(){return new Cw}}class Cw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||Hv(o)))throw new Error(`Error trying to diff '${ae(o)}'. Only maps and objects are allowed`)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const m=this._getOrCreateRecordForKey(h,d);l=this._insertBeforeOrAppend(l,m)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const d=o._prev;return l._next=o,l._prev=d,o._prev=l,d&&(d._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const m=h._prev,v=h._next;return m&&(m._next=v),v&&(v._prev=m),h._next=null,h._prev=null,h}const d=new Iw(o);return this._records.set(o,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(d=>l(o[d],d))}}class Iw{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sT(){return new Ah([new Wr])}let Ah=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(null!=d){const h=d.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||sT()),deps:[[s,new Or,new Pr]]}}find(l){const d=this.factories.find(h=>h.supports(l));if(null!=d)return d;throw new Error(`Cannot find a differ supporting object '${l}' of type '${function oT(s){return s.name||typeof s}(l)}'`)}}return s.\u0275prov=vn({token:s,providedIn:"root",factory:sT}),s})();function aT(){return new Gc([new iT])}let Gc=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(d){const h=d.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||aT()),deps:[[s,new Or,new Pr]]}}find(l){const d=this.factories.find(h=>h.supports(l));if(d)return d;throw new Error(`Cannot find a differ supporting object '${l}'`)}}return s.\u0275prov=vn({token:s,providedIn:"root",factory:aT}),s})();const Tw=[new iT],lT=new Ah([new Wr]),mx=new Gc(Tw),uT=cw(null,"core",[{provide:sw,useValue:"unknown"},{provide:fw,deps:[ci]},{provide:uw,deps:[]},{provide:VI,deps:[]}]),yx=[{provide:ja,useClass:ja,deps:[Qi,ci,vc,kp,Ih]},{provide:zM,deps:[Qi],useFactory:function Sh(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(l){o.push(l)}}},{provide:Ih,useClass:Ih,deps:[[new Pr,I_]]},{provide:Hp,useClass:Hp,deps:[]},FI,{provide:Ah,useFactory:function cT(){return lT},deps:[]},{provide:Gc,useFactory:function dT(){return mx},deps:[]},{provide:Th,useFactory:function U_(s){return s||function _x(){return"undefined"!=typeof $localize&&$localize.locale||Qm}()},deps:[[new Gi(Th),new Pr,new Or]]},{provide:BI,useValue:"USD"}];let vx=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(ie(ja))},s.\u0275mod=Ve({type:s}),s.\u0275inj=Hn({providers:yx}),s})()},3942:(ut,Ce,F)=>{F.d(Ce,{Z:()=>Ze});var u=F(2090),Y=F(4859),O=F(9681),se=F(1877);class re{constructor(Fe,X){this._delegate=Fe,this.firebase=X,(0,O._addComponent)(Fe,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=Fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Fe){this._delegate.automaticDataCollectionEnabled=Fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Fe=>{this._delegate.checkDestroyed(),Fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(Fe,X=O._DEFAULT_ENTRY_NAME){var De;this._delegate.checkDestroyed();const Le=this._delegate.container.getProvider(Fe);return!Le.isInitialized()&&"EXPLICIT"===(null===(De=Le.getComponent())||void 0===De?void 0:De.instantiationMode)&&Le.initialize(),Le.getImmediate({identifier:X})}_removeServiceInstance(Fe,X=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Fe).clearInstance(X)}_addComponent(Fe){(0,O._addComponent)(this._delegate,Fe)}_addOrOverwriteComponent(Fe){(0,O._addOrOverwriteComponent)(this._delegate,Fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const oe=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function fe(){const Ue=function ae(Ue){const Fe={},X={__esModule:!0,initializeApp:function Ne(Qe,ft={}){const ee=O.initializeApp(Qe,ft);if((0,u.r3)(Fe,ee.name))return Fe[ee.name];const ce=new Ue(ee,X);return Fe[ee.name]=ce,ce},app:Le,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Re(Qe){const ft=Qe.name,ee=ft.replace("-compat","");if(O._registerComponent(Qe)&&"PUBLIC"===Qe.type){const ce=(_e=Le())=>{if("function"!=typeof _e[ee])throw oe.create("invalid-app-argument",{appName:ft});return _e[ee]()};void 0!==Qe.serviceProps&&(0,u.ZB)(ce,Qe.serviceProps),X[ee]=ce,Ue.prototype[ee]=function(..._e){return this._getService.bind(this,ft).apply(this,Qe.multipleInstances?_e:[])}}return"PUBLIC"===Qe.type?X[ee]:null},removeApp:function De(Qe){delete Fe[Qe]},useAsService:function Ge(Qe,ft){return"serverAuth"===ft?null:ft},modularAPIs:O}};function Le(Qe){if(!(0,u.r3)(Fe,Qe=Qe||O._DEFAULT_ENTRY_NAME))throw oe.create("no-app",{appName:Qe});return Fe[Qe]}return X.default=X,Object.defineProperty(X,"apps",{get:function st(){return Object.keys(Fe).map(Qe=>Fe[Qe])}}),Le.App=Ue,X}(re);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:fe,extendNamespace:function Fe(X){(0,u.ZB)(Ue,X)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),Ue}(),G=new se.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ze=q;!function Te(Ue){(0,O.registerVersion)("@firebase/app-compat","0.1.21",Ue)}()},9681:(ut,Ce,F)=>{F.r(Ce),F.d(Ce,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>ua,_DEFAULT_ENTRY_NAME:()=>Qn,_addComponent:()=>yn,_addOrOverwriteComponent:()=>is,_apps:()=>St,_clearComponents:()=>Hn,_components:()=>vt,_getProvider:()=>vn,_registerComponent:()=>Br,_removeServiceInstance:()=>xo,deleteApp:()=>hr,getApp:()=>vr,getApps:()=>Ae,initializeApp:()=>Fi,onLog:()=>tn,registerVersion:()=>mt,setLogLevel:()=>Ts});var u=F(5861),Y=F(4859),O=F(1877),se=F(2090);class re{constructor(be){this.container=be}getPlatformInfoString(){return this.container.getProviders().map(ot=>{if(function ye(Je){const be=Je.getComponent();return"VERSION"===(null==be?void 0:be.type)}(ot)){const ht=ot.getImmediate();return`${ht.library}/${ht.version}`}return null}).filter(ot=>ot).join(" ")}}const oe="@firebase/app",fe=new O.Yd("@firebase/app"),Qn="[DEFAULT]",Rt={[oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},St=new Map,vt=new Map;function yn(Je,be){try{Je.container.addComponent(be)}catch(ot){fe.debug(`Component ${be.name} failed to register with FirebaseApp ${Je.name}`,ot)}}function is(Je,be){Je.container.addOrOverwriteComponent(be)}function Br(Je){const be=Je.name;if(vt.has(be))return fe.debug(`There were multiple attempts to register component ${be}.`),!1;vt.set(be,Je);for(const ot of St.values())yn(ot,Je);return!0}function vn(Je,be){const ot=Je.container.getProvider("heartbeat").getImmediate({optional:!0});return ot&&ot.triggerHeartbeat(),Je.container.getProvider(be)}function xo(Je,be,ot=Qn){vn(Je,be).clearInstance(ot)}function Hn(){vt.clear()}const sn=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Nn{constructor(be,ot,ht){this._isDeleted=!1,this._options=Object.assign({},be),this._config=Object.assign({},ot),this._name=ot.name,this._automaticDataCollectionEnabled=ot.automaticDataCollectionEnabled,this._container=ht,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this.checkDestroyed(),this._automaticDataCollectionEnabled=be}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(be){this._isDeleted=be}checkDestroyed(){if(this.isDeleted)throw sn.create("app-deleted",{appName:this._name})}}const ua="9.6.10";function Fi(Je,be={}){"object"!=typeof be&&(be={name:be});const ot=Object.assign({name:Qn,automaticDataCollectionEnabled:!1},be),ht=ot.name;if("string"!=typeof ht||!ht)throw sn.create("bad-app-name",{appName:String(ht)});const jt=St.get(ht);if(jt){if((0,se.vZ)(Je,jt.options)&&(0,se.vZ)(ot,jt.config))return jt;throw sn.create("duplicate-app",{appName:ht})}const on=new Y.H0(ht);for(const B of vt.values())on.addComponent(B);const Z=new Nn(Je,ot,on);return St.set(ht,Z),Z}function vr(Je=Qn){const be=St.get(Je);if(!be)throw sn.create("no-app",{appName:Je});return be}function Ae(){return Array.from(St.values())}function hr(Je){return $n.apply(this,arguments)}function $n(){return($n=(0,u.Z)(function*(Je){const be=Je.name;St.has(be)&&(St.delete(be),yield Promise.all(Je.container.getProviders().map(ot=>ot.delete())),Je.isDeleted=!0)})).apply(this,arguments)}function mt(Je,be,ot){var ht;let jt=null!==(ht=Rt[Je])&&void 0!==ht?ht:Je;ot&&(jt+=`-${ot}`);const on=jt.match(/\s|\//),Z=be.match(/\s|\//);if(on||Z){const B=[`Unable to register library "${jt}" with version "${be}":`];return on&&B.push(`library name "${jt}" contains illegal characters (whitespace or "/")`),on&&Z&&B.push("and"),Z&&B.push(`version name "${be}" contains illegal characters (whitespace or "/")`),void fe.warn(B.join(" "))}Br(new Y.wA(`${jt}-version`,()=>({library:jt,version:be}),"VERSION"))}function tn(Je,be){if(null!==Je&&"function"!=typeof Je)throw sn.create("invalid-log-argument");(0,O.Am)(Je,be)}function Ts(Je){(0,O.Ub)(Je)}const Mr="firebase-heartbeat-store";let wr=null;function Zn(){return wr||(wr=(0,se.X3)("firebase-heartbeat-database",1,(Je,be)=>{0===be&&Je.createObjectStore(Mr)}).catch(Je=>{throw sn.create("storage-open",{originalErrorMessage:Je.message})})),wr}function dn(){return(dn=(0,u.Z)(function*(Je){try{return(yield Zn()).transaction(Mr).objectStore(Mr).get(no(Je))}catch(be){throw sn.create("storage-get",{originalErrorMessage:be.message})}})).apply(this,arguments)}function et(Je,be){return wt.apply(this,arguments)}function wt(){return(wt=(0,u.Z)(function*(Je,be){try{const ht=(yield Zn()).transaction(Mr,"readwrite");return yield ht.objectStore(Mr).put(be,no(Je)),ht.complete}catch(ot){throw sn.create("storage-set",{originalErrorMessage:ot.message})}})).apply(this,arguments)}function no(Je){return`${Je.name}!${Je.options.appId}`}class Et{constructor(be){this.container=be,this._heartbeatsCache=null;const ot=this.container.getProvider("app").getImmediate();this._storage=new rn(ot),this._heartbeatsCachePromise=this._storage.read().then(ht=>(this._heartbeatsCache=ht,ht))}triggerHeartbeat(){var be=this;return(0,u.Z)(function*(){const ht=be.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),jt=Er();if(null===be._heartbeatsCache&&(be._heartbeatsCache=yield be._heartbeatsCachePromise),be._heartbeatsCache.lastSentHeartbeatDate!==jt&&!be._heartbeatsCache.heartbeats.some(on=>on.date===jt))return be._heartbeatsCache.heartbeats.push({date:jt,agent:ht}),be._heartbeatsCache.heartbeats=be._heartbeatsCache.heartbeats.filter(on=>{const Z=new Date(on.date).valueOf();return Date.now()-Z<=2592e6}),be._storage.overwrite(be._heartbeatsCache)})()}getHeartbeatsHeader(){var be=this;return(0,u.Z)(function*(){if(null===be._heartbeatsCache&&(yield be._heartbeatsCachePromise),null===be._heartbeatsCache||0===be._heartbeatsCache.heartbeats.length)return"";const ot=Er(),{heartbeatsToSend:ht,unsentEntries:jt}=function Ro(Je,be=1024){const ot=[];let ht=Je.slice();for(const jt of Je){const on=ot.find(Z=>Z.agent===jt.agent);if(on){if(on.dates.push(jt.date),bt(ot)>be){on.dates.pop();break}}else if(ot.push({agent:jt.agent,dates:[jt.date]}),bt(ot)>be){ot.pop();break}ht=ht.slice(1)}return{heartbeatsToSend:ot,unsentEntries:ht}}(be._heartbeatsCache.heartbeats),on=(0,se.L)(JSON.stringify({version:2,heartbeats:ht}));return be._heartbeatsCache.lastSentHeartbeatDate=ot,jt.length>0?(be._heartbeatsCache.heartbeats=jt,yield be._storage.overwrite(be._heartbeatsCache)):(be._heartbeatsCache.heartbeats=[],be._storage.overwrite(be._heartbeatsCache)),on})()}}function Er(){return(new Date).toISOString().substring(0,10)}class rn{constructor(be){this.app=be,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var be=this;return(0,u.Z)(function*(){return(yield be._canUseIndexedDBPromise)&&(yield function Ul(Je){return dn.apply(this,arguments)}(be.app))||{heartbeats:[]}})()}overwrite(be){var ot=this;return(0,u.Z)(function*(){var ht;if(yield ot._canUseIndexedDBPromise){const on=yield ot.read();return et(ot.app,{lastSentHeartbeatDate:null!==(ht=be.lastSentHeartbeatDate)&&void 0!==ht?ht:on.lastSentHeartbeatDate,heartbeats:be.heartbeats})}})()}add(be){var ot=this;return(0,u.Z)(function*(){var ht;if(yield ot._canUseIndexedDBPromise){const on=yield ot.read();return et(ot.app,{lastSentHeartbeatDate:null!==(ht=be.lastSentHeartbeatDate)&&void 0!==ht?ht:on.lastSentHeartbeatDate,heartbeats:[...on.heartbeats,...be.heartbeats]})}})()}}function bt(Je){return(0,se.L)(JSON.stringify({version:2,heartbeats:Je})).length}!function Bt(Je){Br(new Y.wA("platform-logger",be=>new re(be),"PRIVATE")),Br(new Y.wA("heartbeat",be=>new Et(be),"PRIVATE")),mt(oe,"0.7.20",Je),mt(oe,"0.7.20","esm2017"),mt("fire-js","")}("")},4859:(ut,Ce,F)=>{F.d(Ce,{H0:()=>ae,wA:()=>O,zt:()=>re});var u=F(5861),Y=F(2090);class O{constructor(q,G,te){this.name=q,this.instanceFactory=G,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const se="[DEFAULT]";class re{constructor(q,G){this.name=q,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const G=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has(G)){const te=new Y.BH;if(this.instancesDeferred.set(G,te),this.isInitialized(G)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:G});$e&&te.resolve($e)}catch($e){}}return this.instancesDeferred.get(G).promise}getImmediate(q){var G;const te=this.normalizeInstanceIdentifier(null==q?void 0:q.identifier),$e=null!==(G=null==q?void 0:q.optional)&&void 0!==G&&G;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Te){if($e)return null;throw Te}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if(function oe(fe){return"EAGER"===fe.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:se})}catch(G){}for(const[G,te]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(G);try{const Te=this.getOrInitializeService({instanceIdentifier:$e});te.resolve(Te)}catch(Te){}}}}clearInstance(q=se){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,u.Z)(function*(){const G=Array.from(q.instances.values());yield Promise.all([...G.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...G.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=se){return this.instances.has(q)}getOptions(q=se){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:G={}}=q,te=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:te,options:G});for(const[Te,Ze]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Te)&&Ze.resolve($e);return $e}onInit(q,G){var te;const $e=this.normalizeInstanceIdentifier(G),Te=null!==(te=this.onInitCallbacks.get($e))&&void 0!==te?te:new Set;Te.add(q),this.onInitCallbacks.set($e,Te);const Ze=this.instances.get($e);return Ze&&q(Ze,$e),()=>{Te.delete(q)}}invokeOnInitCallbacks(q,G){const te=this.onInitCallbacks.get(G);if(te)for(const $e of te)try{$e(q,G)}catch(Te){}}getOrInitializeService({instanceIdentifier:q,options:G={}}){let te=this.instances.get(q);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(fe=q,fe===se?void 0:fe),options:G}),this.instances.set(q,te),this.instancesOptions.set(q,G),this.invokeOnInitCallbacks(te,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,te)}catch($e){}var fe;return te||null}normalizeInstanceIdentifier(q=se){return this.component?this.component.multipleInstances?q:se:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ae{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const G=this.getProvider(q.name);if(G.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);G.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const G=new re(q,this);return this.providers.set(q,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(ut,Ce,F)=>{F.d(Ce,{Am:()=>fe,Ub:()=>ae,Yd:()=>oe,in:()=>Y});const u=[];var Y=(()=>{return(q=Y||(Y={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",Y;var q})();const O={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},se=Y.INFO,re={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},ye=(q,G,...te)=>{if(G<q.logLevel)return;const $e=(new Date).toISOString(),Te=re[G];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Te](`[${$e}]  ${q.name}:`,...te)};class oe{constructor(G){this.name=G,this._logLevel=se,this._logHandler=ye,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in Y))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?O[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...G),this._logHandler(this,Y.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...G),this._logHandler(this,Y.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...G),this._logHandler(this,Y.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...G),this._logHandler(this,Y.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...G),this._logHandler(this,Y.ERROR,...G)}}function ae(q){u.forEach(G=>{G.setLogLevel(q)})}function fe(q,G){for(const te of u){let $e=null;G&&G.level&&($e=O[G.level]),te.userLogHandler=null===q?null:(Te,Ze,...Ue)=>{const Fe=Ue.map(X=>{if(null==X)return null;if("string"==typeof X)return X;if("number"==typeof X||"boolean"==typeof X)return X.toString();if(X instanceof Error)return X.message;try{return JSON.stringify(X)}catch(De){return null}}).filter(X=>X).join(" ");Ze>=(null!=$e?$e:Te.logLevel)&&q({level:Y[Ze].toLowerCase(),message:Fe,args:Ue,type:Te.name})}}}},5861:(ut,Ce,F)=>{function u(O,se,re,ye,oe,ae,fe){try{var q=O[ae](fe),G=q.value}catch(te){return void re(te)}q.done?se(G):Promise.resolve(G).then(ye,oe)}function Y(O){return function(){var se=this,re=arguments;return new Promise(function(ye,oe){var ae=O.apply(se,re);function fe(G){u(ae,ye,oe,fe,q,"next",G)}function q(G){u(ae,ye,oe,fe,q,"throw",G)}fe(void 0)})}}F.d(Ce,{Z:()=>Y})}},ut=>{ut(ut.s=4600)}]);