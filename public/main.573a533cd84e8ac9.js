"use strict";(self.webpackChunkapp_articles=self.webpackChunkapp_articles||[]).push([[179],{2011:(ut,Ee,F)=>{F.d(Ee,{Dh:()=>ae,GT:()=>ye,cc:()=>Te,hO:()=>$e,on:()=>q,pX:()=>re,xv:()=>fe});var u=F(5e3),Y=F(127),O=F(5813);ut=F.hmd(ut);const se=["ngOnDestroy"],re=(X,De,Le,Ne={})=>new Proxy(X,{get:(st,ke)=>Le.runOutsideAngular(()=>{var Ge;if(X[ke])return(null===(Ge=null==Ne?void 0:Ne.spy)||void 0===Ge?void 0:Ge.get)&&Ne.spy.get(ke,X[ke]),X[ke];if(se.indexOf(ke)>-1)return()=>{};const Qe=De.toPromise().then(ht=>{const ee=ht&&ht[ke];return"function"==typeof ee?ee.bind(ht):ee&&ee.then?ee.then(ce=>Le.run(()=>ce)):Le.run(()=>ee)});return new Proxy(()=>{},{get:(ht,ee)=>Qe[ee],apply:(ht,ee,ce)=>Qe.then(_e=>{var we;const Pe=_e&&_e(...ce);return(null===(we=null==Ne?void 0:Ne.spy)||void 0===we?void 0:we.apply)&&Ne.spy.apply(ke,ce,Pe),Pe})})})}),ye=(X,De)=>{De.forEach(Le=>{Object.getOwnPropertyNames(Le.prototype||Le).forEach(Ne=>{Object.defineProperty(X.prototype,Ne,Object.getOwnPropertyDescriptor(Le.prototype||Le,Ne))})})};class oe{constructor(De){return De}}const ae=new u.OlP("angularfire2.app.options"),fe=new u.OlP("angularfire2.app.name");function q(X,De,Le){const st="object"==typeof Le&&Le||{};st.name=st.name||"string"==typeof Le&&Le||"[DEFAULT]";const Ge=Y.Z.apps.filter(Qe=>Qe&&Qe.name===st.name)[0]||De.runOutsideAngular(()=>Y.Z.initializeApp(X,st));try{JSON.stringify(X)!==JSON.stringify(Ge.options)&&G("error",`${Ge.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Qe){}return new oe(Ge)}const G=(X,...De)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[X](...De)},te={provide:oe,useFactory:q,deps:[ae,u.R0b,[new u.FiY,fe]]};let $e=(()=>{class X{constructor(Le){Y.Z.registerVersion("angularfire",O.q4.full,"core"),Y.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Y.Z.registerVersion("angular",u.q4F.full,Le.toString())}static initializeApp(Le,Ne){return{ngModule:X,providers:[{provide:ae,useValue:Le},{provide:fe,useValue:Ne}]}}}return X.\u0275fac=function(Le){return new(Le||X)(u.LFG(u.Lbi))},X.\u0275mod=u.oAB({type:X}),X.\u0275inj=u.cJS({providers:[te]}),X})();function Te(X,De,Le,Ne,st){const[,ke,Ge]=globalThis.\u0275AngularfireInstanceCache.find(Qe=>Qe[0]===X)||[];if(ke)return function He(X,De){try{return X.toString()===De.toString()}catch(Le){return X===De}}(st,Ge)||(Fe("error",`${De} was already initialized on the ${Le} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),Fe("warn",{is:st,was:Ge})),ke;{const Qe=Ne();return globalThis.\u0275AngularfireInstanceCache.push([X,Qe,st]),Qe}}const Ue=!!ut.hot,Fe=(X,...De)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[X](...De)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ut,Ee,F)=>{F.d(Ee,{q4:()=>Ta,iC:()=>xa,fc:()=>Wi,HU:()=>ru,vb:()=>Dd,JM:()=>Td});var u=F(5e3),Y=F(5867),O=F(5861),se=F(9681),re=F(2090),ye=F(4859),oe=F(1877);const ae="@firebase/installations",G="w:0.5.7",te="FIS_v2",X=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function De(I){return I instanceof re.ZR&&I.code.includes("request-failed")}function Le({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Ne(I){return{token:I.token,requestStatus:2,expiresIn:ce(I.expiresIn),creationTime:Date.now()}}function st(I,D){return ke.apply(this,arguments)}function ke(){return(ke=(0,O.Z)(function*(I,D){const V=(yield D.json()).error;return X.create("request-failed",{requestName:I,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function Ge({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Qe(I,{refreshToken:D}){const M=Ge(I);return M.append("Authorization",function _e(I){return`${te} ${I}`}(D)),M}function ht(I){return ee.apply(this,arguments)}function ee(){return(ee=(0,O.Z)(function*(I){const D=yield I();return D.status>=500&&D.status<600?I():D})).apply(this,arguments)}function ce(I){return Number(I.replace("s","000"))}function we(I,D){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:D},{fid:M}){const V=Le(I),z=Ge(I),ne=D.getImmediate({optional:!0});if(ne){const pt=yield ne.getHeartbeatsHeader();pt&&z.append("x-firebase-client",pt)}const We={method:"POST",headers:z,body:JSON.stringify({fid:M,authVersion:te,appId:I.appId,sdkVersion:G})},Dt=yield ht(()=>fetch(V,We));if(Dt.ok){const pt=yield Dt.json();return{fid:pt.fid||M,registrationStatus:2,refreshToken:pt.refreshToken,authToken:Ne(pt.authToken)}}throw yield st("Create Installation",Dt)})).apply(this,arguments)}function de(I){return new Promise(D=>{setTimeout(D,I)})}const Xt=/^[cdef][\w-]{21}$/;function kt(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function St(I){return function Nt(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Xt.test(M)?M:""}catch(I){return""}}function vt(I){return`${I.appName}!${I.appId}`}const _n=new Map;function rs(I,D){const M=vt(I);Eo(M,D),function $n(I,D){const M=function rn(){return!or&&"BroadcastChannel"in self&&(or=new BroadcastChannel("[Firebase] FID Change"),or.onmessage=I=>{Eo(I.data.key,I.data.fid)}),or}();M&&M.postMessage({key:I,fid:D}),function Pn(){0===_n.size&&or&&(or.close(),or=null)}()}(M,D)}function Eo(I,D){const M=_n.get(I);if(M)for(const V of M)V(D)}let or=null;const br="firebase-installations-store";let Ae=null;function fr(){return Ae||(Ae=(0,re.X3)("firebase-installations-database",1,(I,D)=>{0===D&&I.createObjectStore(br)})),Ae}function Hn(I,D){return mt.apply(this,arguments)}function mt(){return(mt=(0,O.Z)(function*(I,D){const M=vt(I),z=(yield fr()).transaction(br,"readwrite"),ne=z.objectStore(br),ie=yield ne.get(M);return yield ne.put(D,M),yield z.complete,(!ie||ie.fid!==D.fid)&&rs(I,D.fid),D})).apply(this,arguments)}function en(I){return vs.apply(this,arguments)}function vs(){return(vs=(0,O.Z)(function*(I){const D=vt(I),V=(yield fr()).transaction(br,"readwrite");yield V.objectStore(br).delete(D),yield V.complete})).apply(this,arguments)}function ar(I,D){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,O.Z)(function*(I,D){const M=vt(I),z=(yield fr()).transaction(br,"readwrite"),ne=z.objectStore(br),ie=yield ne.get(M),We=D(ie);return void 0===We?yield ne.delete(M):yield ne.put(We,M),yield z.complete,We&&(!ie||ie.fid!==We.fid)&&rs(I,We.fid),We})).apply(this,arguments)}function Mr(I){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,O.Z)(function*(I){let D;const M=yield ar(I.appConfig,V=>{const z=qn(V),ne=Ul(I,z);return D=ne.registrationPromise,ne.installationEntry});return""===M.fid?{installationEntry:yield D}:{installationEntry:M,registrationPromise:D}})).apply(this,arguments)}function qn(I){return tn(I||{fid:kt(),registrationStatus:0})}function Ul(I,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(X.create("app-offline"))};const M={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},V=function dn(I,D){return et.apply(this,arguments)}(I,M);return{installationEntry:M,registrationPromise:V}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:wt(I)}:{installationEntry:D}}function et(){return(et=(0,O.Z)(function*(I,D){try{const M=yield we(I,D);return Hn(I.appConfig,M)}catch(M){throw De(M)&&409===M.customData.serverCode?yield en(I.appConfig):yield Hn(I.appConfig,{fid:D.fid,registrationStatus:0}),M}})).apply(this,arguments)}function wt(I){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,O.Z)(function*(I){let D=yield ws(I.appConfig);for(;1===D.registrationStatus;)yield de(100),D=yield ws(I.appConfig);if(0===D.registrationStatus){const{installationEntry:M,registrationPromise:V}=yield Mr(I);return V||M}return D})).apply(this,arguments)}function ws(I){return ar(I,D=>{if(!D)throw X.create("installation-not-found");return tn(D)})}function tn(I){return function Et(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Ir(I,D){return bo.apply(this,arguments)}function bo(){return(bo=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:D},M){const V=nn(I,M),z=Qe(I,M),ne=D.getImmediate({optional:!0});if(ne){const pt=yield ne.getHeartbeatsHeader();pt&&z.append("x-firebase-client",pt)}const We={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:G,appId:I.appId}})},Dt=yield ht(()=>fetch(V,We));if(Dt.ok)return Ne(yield Dt.json());throw yield st("Generate Auth Token",Dt)})).apply(this,arguments)}function nn(I,{fid:D}){return`${Le(I)}/${D}/authTokens:generate`}function bt(I){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,O.Z)(function*(I,D=!1){let M;const V=yield ar(I.appConfig,ne=>{if(!sn(ne))throw X.create("not-registered");const ie=ne.authToken;if(!D&&H(ie))return ne;if(1===ie.requestStatus)return M=Je(I,D),ne;{if(!navigator.onLine)throw X.create("app-offline");const We=W(ne);return M=dt(I,We),We}});return M?yield M:V.authToken})).apply(this,arguments)}function Je(I,D){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,O.Z)(function*(I,D){let M=yield ot(I.appConfig);for(;1===M.authToken.requestStatus;)yield de(100),M=yield ot(I.appConfig);const V=M.authToken;return 0===V.requestStatus?bt(I,D):V})).apply(this,arguments)}function ot(I){return ar(I,D=>{if(!sn(D))throw X.create("not-registered");return function he(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function dt(I,D){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,O.Z)(function*(I,D){try{const M=yield Ir(I,D),V=Object.assign(Object.assign({},D),{authToken:M});return yield Hn(I.appConfig,V),M}catch(M){if(!De(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const V=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Hn(I.appConfig,V)}else yield en(I.appConfig);throw M}})).apply(this,arguments)}function sn(I){return void 0!==I&&2===I.registrationStatus}function H(I){return 2===I.requestStatus&&!function B(I){const D=Date.now();return D<I.creationTime||I.creationTime+I.expiresIn<D+36e5}(I)}function W(I){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:D})}function Ve(){return(Ve=(0,O.Z)(function*(I){const D=I,{installationEntry:M,registrationPromise:V}=yield Mr(D);return V?V.catch(console.error):bt(D).catch(console.error),M.fid})).apply(this,arguments)}function Qt(){return(Qt=(0,O.Z)(function*(I,D=!1){const M=I;return yield pr(M),(yield bt(M,D)).token})).apply(this,arguments)}function pr(I){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,O.Z)(function*(I){const{registrationPromise:D}=yield Mr(I);D&&(yield D)})).apply(this,arguments)}function Vi(I){return X.create("missing-app-config-values",{valueName:I})}const Xn="installations",Ii=I=>{const D=I.getProvider("app").getImmediate(),M=function ja(I){if(!I||!I.options)throw Vi("App Configuration");if(!I.name)throw Vi("App Name");const D=["projectId","apiKey","appId"];for(const M of D)if(!I.options[M])throw Vi(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(D);return{app:D,appConfig:M,heartbeatServiceProvider:(0,se._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},je=I=>{const D=I.getProvider("app").getImmediate(),M=(0,se._getProvider)(D,Xn).getImmediate();return{getId:()=>function Q(I){return Ve.apply(this,arguments)}(M),getToken:z=>function _t(I){return Qt.apply(this,arguments)}(M,z)}};(function It(){(0,se._registerComponent)(new ye.wA(Xn,Ii,"PUBLIC")),(0,se._registerComponent)(new ye.wA("installations-internal",je,"PRIVATE"))})(),(0,se.registerVersion)(ae,"0.5.7"),(0,se.registerVersion)(ae,"0.5.7","esm2017");const Kt="@firebase/remote-config",Lt=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Di{constructor(D,M,V,z){this.client=D,this.storage=M,this.storageCache=V,this.logger=z}isCachedDataFresh(D,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-M,z=V<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${z}.`),z}fetch(D){var M=this;return(0,O.Z)(function*(){const[V,z]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(z&&M.isCachedDataFresh(D.cacheMaxAgeMillis,V))return z;D.eTag=z&&z.eTag;const ne=yield M.client.fetch(D),ie=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ne.status&&ie.push(M.storage.setLastSuccessfulFetchResponse(ne)),yield Promise.all(ie),ne})()}}function tf(I=navigator){return I.languages&&I.languages[0]||I.language}class kg{constructor(D,M,V,z,ne,ie){this.firebaseInstallations=D,this.sdkVersion=M,this.namespace=V,this.projectId=z,this.apiKey=ne,this.appId=ie}fetch(D){var M=this;return(0,O.Z)(function*(){const[V,z]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),ie=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,We={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},Dt={sdk_version:M.sdkVersion,app_instance_id:V,app_instance_id_token:z,app_id:M.appId,language_code:tf()},pt={method:"POST",headers:We,body:JSON.stringify(Dt)},Ht=fetch(ie,pt),Ct=new Promise((Fr,Ms)=>{D.signal.addEventListener(()=>{const al=new Error("The operation was aborted.");al.name="AbortError",Ms(al)})});let hi;try{yield Promise.race([Ht,Ct]),hi=yield Ht}catch(Fr){let Ms="fetch-client-network";throw"AbortError"===Fr.name&&(Ms="fetch-timeout"),Lt.create(Ms,{originalErrorMessage:Fr.message})}let nr=hi.status;const zi=hi.headers.get("ETag")||void 0;let Or,Rs;if(200===hi.status){let Fr;try{Fr=yield hi.json()}catch(Ms){throw Lt.create("fetch-client-parse",{originalErrorMessage:Ms.message})}Or=Fr.entries,Rs=Fr.state}if("INSTANCE_STATE_UNSPECIFIED"===Rs?nr=500:"NO_CHANGE"===Rs?nr=304:("NO_TEMPLATE"===Rs||"EMPTY_CONFIG"===Rs)&&(Or={}),304!==nr&&200!==nr)throw Lt.create("fetch-status",{httpStatus:nr});return{status:nr,eTag:zi,config:Or}})()}}class nf{constructor(D,M){this.client=D,this.storage=M}fetch(D){var M=this;return(0,O.Z)(function*(){const V=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(D,V)})()}attemptFetch(D,{throttleEndTimeMillis:M,backoffCount:V}){var z=this;return(0,O.Z)(function*(){yield function ji(I,D){return new Promise((M,V)=>{const z=Math.max(D-Date.now(),0),ne=setTimeout(M,z);I.addEventListener(()=>{clearTimeout(ne),V(Lt.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,M);try{const ne=yield z.client.fetch(D);return yield z.storage.deleteThrottleMetadata(),ne}catch(ne){if(!function ua(I){if(!(I instanceof re.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ne))throw ne;const ie={throttleEndTimeMillis:Date.now()+(0,re.$s)(V),backoffCount:V+1};return yield z.storage.setThrottleMetadata(ie),z.attemptFetch(D,ie)}})()}}class ca{constructor(D,M,V,z,ne){this.app=D,this._client=M,this._storageCache=V,this._storage=z,this._logger=ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ku(I,D){const M=I.target.error||void 0;return Lt.create(D,{originalErrorMessage:M&&M.message})}const Xs="app_namespace_store";class da{constructor(D,M,V,z=function Yu(){return new Promise((I,D)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=V=>{D(Ku(V,"storage-open"))},M.onsuccess=V=>{I(V.target.result)},M.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(Xs,{keyPath:"compositeKey"})}}catch(M){D(Lt.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=D,this.appName=M,this.namespace=V,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var M=this;return(0,O.Z)(function*(){const V=yield M.openDbPromise;return new Promise((z,ne)=>{const We=V.transaction([Xs],"readonly").objectStore(Xs),Dt=M.createCompositeKey(D);try{const pt=We.get(Dt);pt.onerror=Ht=>{ne(Ku(Ht,"storage-get"))},pt.onsuccess=Ht=>{const Ct=Ht.target.result;z(Ct?Ct.value:void 0)}}catch(pt){ne(Lt.create("storage-get",{originalErrorMessage:pt&&pt.message}))}})})()}set(D,M){var V=this;return(0,O.Z)(function*(){const z=yield V.openDbPromise;return new Promise((ne,ie)=>{const Dt=z.transaction([Xs],"readwrite").objectStore(Xs),pt=V.createCompositeKey(D);try{const Ht=Dt.put({compositeKey:pt,value:M});Ht.onerror=Ct=>{ie(Ku(Ct,"storage-set"))},Ht.onsuccess=()=>{ne()}}catch(Ht){ie(Lt.create("storage-set",{originalErrorMessage:Ht&&Ht.message}))}})})()}delete(D){var M=this;return(0,O.Z)(function*(){const V=yield M.openDbPromise;return new Promise((z,ne)=>{const We=V.transaction([Xs],"readwrite").objectStore(Xs),Dt=M.createCompositeKey(D);try{const pt=We.delete(Dt);pt.onerror=Ht=>{ne(Ku(Ht,"storage-delete"))},pt.onsuccess=()=>{z()}}catch(pt){ne(Lt.create("storage-delete",{originalErrorMessage:pt&&pt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Mg{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,O.Z)(function*(){const M=D.storage.getLastFetchStatus(),V=D.storage.getLastSuccessfulFetchTimestampMillis(),z=D.storage.getActiveConfig(),ne=yield M;ne&&(D.lastFetchStatus=ne);const ie=yield V;ie&&(D.lastSuccessfulFetchTimestampMillis=ie);const We=yield z;We&&(D.activeConfig=We)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function hd(){return Io.apply(this,arguments)}function Io(){return(Io=(0,O.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(I){return!1}})).apply(this,arguments)}!function dd(){(0,se._registerComponent)(new ye.wA("remote-config",function I(D,{instanceIdentifier:M}){const V=D.getProvider("app").getImmediate(),z=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Lt.create("registration-window");if(!(0,re.hl)())throw Lt.create("indexed-db-unavailable");const{projectId:ne,apiKey:ie,appId:We}=V.options;if(!ne)throw Lt.create("registration-project-id");if(!ie)throw Lt.create("registration-api-key");if(!We)throw Lt.create("registration-app-id");const Dt=new da(We,V.name,M=M||"firebase"),pt=new Mg(Dt),Ht=new oe.Yd(Kt);Ht.logLevel=oe.in.ERROR;const Ct=new kg(z,se.SDK_VERSION,M,ne,ie,We),hi=new nf(Ct,Dt),nr=new Di(hi,Dt,pt,Ht),zi=new ca(V,nr,pt,Dt,Ht);return function Gr(I){const D=(0,re.m9)(I);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(zi),zi},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Kt,"0.3.6"),(0,se.registerVersion)(Kt,"0.3.6","esm2017")}();const sf="/firebase-messaging-sw.js",fd="/firebase-cloud-messaging-push-scope",af="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",jl="google.c.a.c_id",To="google.c.a.c_l",ha="google.c.a.ts",eo="google.c.a.e";var to=(()=>{return(I=to||(to={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",to;var I})();function er(I){const D=new Uint8Array(I);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function lf(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(M),z=new Uint8Array(V.length);for(let ne=0;ne<V.length;++ne)z[ne]=V.charCodeAt(ne);return z}const Do="fcm_token_details_db",Ar="fcm_token_object_Store";function uf(I){return $a.apply(this,arguments)}function $a(){return $a=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ne=>ne.name).includes(Do))return null;let D=null;return(yield(0,re.X3)(Do,5,function(){var V=(0,O.Z)(function*(z,ne,ie,We){var Dt;if(ne<2||!z.objectStoreNames.contains(Ar))return;const pt=We.objectStore(Ar),Ht=yield pt.index("fcmSenderId").get(I);if(yield pt.clear(),Ht)if(2===ne){const Ct=Ht;if(!Ct.auth||!Ct.p256dh||!Ct.endpoint)return;D={token:Ct.fcmToken,createTime:null!==(Dt=Ct.createTime)&&void 0!==Dt?Dt:Date.now(),subscriptionOptions:{auth:Ct.auth,p256dh:Ct.p256dh,endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:"string"==typeof Ct.vapidKey?Ct.vapidKey:er(Ct.vapidKey)}}}else if(3===ne){const Ct=Ht;D={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:er(Ct.auth),p256dh:er(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:er(Ct.vapidKey)}}}else if(4===ne){const Ct=Ht;D={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:er(Ct.auth),p256dh:er(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:er(Ct.vapidKey)}}}});return function(z,ne,ie,We){return V.apply(this,arguments)}}())).close(),yield(0,re.Lj)(Do),yield(0,re.Lj)("fcm_vapid_details_db"),yield(0,re.Lj)("undefined"),gd(D)?D:null}),$a.apply(this,arguments)}function gd(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:D}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const si="firebase-messaging-store";let In=null;function Qu(){return In||(In=(0,re.X3)("firebase-messaging-database",1,(I,D)=>{0===D&&I.createObjectStore(si)})),In}function Ao(I){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,O.Z)(function*(I){const D=Zl(I),V=yield(yield Qu()).transaction(si).objectStore(si).get(D);if(V)return V;{const z=yield uf(I.appConfig.senderId);if(z)return yield So(I,z),z}})).apply(this,arguments)}function So(I,D){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,O.Z)(function*(I,D){const M=Zl(I),z=(yield Qu()).transaction(si,"readwrite");return yield z.objectStore(si).put(D,M),yield z.complete,D})).apply(this,arguments)}function Ts(I){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,O.Z)(function*(I){const D=Zl(I),V=(yield Qu()).transaction(si,"readwrite");yield V.objectStore(si).delete(D),yield V.complete})).apply(this,arguments)}function Zl({appConfig:I}){return I.appId}const Sn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function oi(I,D){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,O.Z)(function*(I,D){const M=yield nt(I),V=Hl(D),z={method:"POST",headers:M,body:JSON.stringify(V)};let ne;try{ne=yield(yield fetch(no(I.appConfig),z)).json()}catch(ie){throw Sn.create("token-subscribe-failed",{errorInfo:ie})}if(ne.error)throw Sn.create("token-subscribe-failed",{errorInfo:ne.error.message});if(!ne.token)throw Sn.create("token-subscribe-no-token");return ne.token})).apply(this,arguments)}function Ju(I,D){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,O.Z)(function*(I,D){const M=yield nt(I),V=Hl(D.subscriptionOptions),z={method:"PATCH",headers:M,body:JSON.stringify(V)};let ne;try{ne=yield(yield fetch(`${no(I.appConfig)}/${D.token}`,z)).json()}catch(ie){throw Sn.create("token-update-failed",{errorInfo:ie})}if(ne.error)throw Sn.create("token-update-failed",{errorInfo:ne.error.message});if(!ne.token)throw Sn.create("token-update-no-token");return ne.token})).apply(this,arguments)}function ai(I,D){return fa.apply(this,arguments)}function fa(){return(fa=(0,O.Z)(function*(I,D){const V={method:"DELETE",headers:yield nt(I)};try{const ne=yield(yield fetch(`${no(I.appConfig)}/${D}`,V)).json();if(ne.error)throw Sn.create("token-unsubscribe-failed",{errorInfo:ne.error.message})}catch(z){throw Sn.create("token-unsubscribe-failed",{errorInfo:z})}})).apply(this,arguments)}function no({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function nt(I){return $l.apply(this,arguments)}function $l(){return($l=(0,O.Z)(function*({appConfig:I,installations:D}){const M=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Hl({p256dh:I,auth:D,endpoint:M,vapidKey:V}){const z={web:{endpoint:M,auth:D,p256dh:I}};return V!==af&&(z.web.applicationPubKey=V),z}const Ga=6048e5;function Wa(I){return pa.apply(this,arguments)}function pa(){return(pa=(0,O.Z)(function*(I){const D=yield tc(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:D.endpoint,auth:er(D.getKey("auth")),p256dh:er(D.getKey("p256dh"))},V=yield Ao(I.firebaseDependencies);if(V){if(zr(V.subscriptionOptions,M))return Date.now()>=V.createTime+Ga?Ie(I,{token:V.token,createTime:Date.now(),subscriptionOptions:M}):V.token;try{yield ai(I.firebaseDependencies,V.token)}catch(z){console.warn(z)}return ro(I.firebaseDependencies,M)}return ro(I.firebaseDependencies,M)})).apply(this,arguments)}function Xu(I){return ec.apply(this,arguments)}function ec(){return(ec=(0,O.Z)(function*(I){const D=yield Ao(I.firebaseDependencies);D&&(yield ai(I.firebaseDependencies,D.token),yield Ts(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Ie(I,D){return jt.apply(this,arguments)}function jt(){return(jt=(0,O.Z)(function*(I,D){try{const M=yield Ju(I.firebaseDependencies,D),V=Object.assign(Object.assign({},D),{token:M,createTime:Date.now()});return yield So(I.firebaseDependencies,V),M}catch(M){throw yield Xu(I),M}})).apply(this,arguments)}function ro(I,D){return bn.apply(this,arguments)}function bn(){return(bn=(0,O.Z)(function*(I,D){const V={token:yield oi(I,D),createTime:Date.now(),subscriptionOptions:D};return yield So(I,V),V.token})).apply(this,arguments)}function tc(I,D){return os.apply(this,arguments)}function os(){return(os=(0,O.Z)(function*(I,D){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:lf(D)})})).apply(this,arguments)}function zr(I,D){return D.vapidKey===I.vapidKey&&D.endpoint===I.endpoint&&D.auth===I.auth&&D.p256dh===I.p256dh}function za(I){const D={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function ga(I,D){if(!D.notification)return;I.notification={};const M=D.notification.title;M&&(I.notification.title=M);const V=D.notification.body;V&&(I.notification.body=V);const z=D.notification.image;z&&(I.notification.image=z)}(D,I),function nc(I,D){!D.data||(I.data=D.data)}(D,I),function rc(I,D){if(!D.fcmOptions)return;I.fcmOptions={};const M=D.fcmOptions.link;M&&(I.fcmOptions.link=M);const V=D.fcmOptions.analytics_label;V&&(I.fcmOptions.analyticsLabel=V)}(D,I),D}function Ka(I){return"object"==typeof I&&!!I&&jl in I}function io(I,D){const M=[];for(let V=0;V<I.length;V++)M.push(I.charAt(V)),V<D.length&&M.push(D.charAt(V));return M.join("")}function li(I){return Sn.create("missing-app-config-values",{valueName:I})}io("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),io("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ic{constructor(D,M,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function Sr(I){if(!I||!I.options)throw li("App Configuration Object");if(!I.name)throw li("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const V of D)if(!M[V])throw li(V);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:z,installations:M,analyticsProvider:V}}_delete(){return Promise.resolve()}}function As(I){return $i.apply(this,arguments)}function $i(){return($i=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(sf,{scope:fd}),I.swRegistration.update().catch(()=>{})}catch(D){throw Sn.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function sc(I,D){return xo.apply(this,arguments)}function xo(){return(xo=(0,O.Z)(function*(I,D){if(!D&&!I.swRegistration&&(yield As(I)),D||!I.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Sn.create("invalid-sw-registration");I.swRegistration=D}})).apply(this,arguments)}function oc(I,D){return ma.apply(this,arguments)}function ma(){return(ma=(0,O.Z)(function*(I,D){D?I.vapidKey=D:I.vapidKey||(I.vapidKey=af)})).apply(this,arguments)}function ko(){return(ko=(0,O.Z)(function*(I,D){if(!navigator)throw Sn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Sn.create("permission-blocked");return yield oc(I,null==D?void 0:D.vapidKey),yield sc(I,null==D?void 0:D.serviceWorkerRegistration),Wa(I)})).apply(this,arguments)}function md(I,D,M){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,O.Z)(function*(I,D,M){const V=Pg(D);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:M[jl],message_name:M[To],message_time:M[ha],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Pg(I){switch(I){case to.NOTIFICATION_CLICKED:return"notification_open";case to.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function _a(){return(_a=(0,O.Z)(function*(I,D){const M=D.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===to.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(za(M)):I.onMessageHandler.next(za(M)));const V=M.data;Ka(V)&&"1"===V[eo]&&(yield md(I,M.messageType,V))})).apply(this,arguments)}const Wl="@firebase/messaging",zl=I=>{const D=new ic(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Gl(I,D){return _a.apply(this,arguments)}(D,M)),D},_d=I=>{const D=I.getProvider("messaging").getImmediate();return{getToken:V=>function ql(I,D){return ko.apply(this,arguments)}(D,V)}};function df(){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,O.Z)(function*(){try{yield(0,re.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ya(){(0,se._registerComponent)(new ye.wA("messaging",zl,"PUBLIC")),(0,se._registerComponent)(new ye.wA("messaging-internal",_d,"PRIVATE")),(0,se.registerVersion)(Wl,"0.9.11"),(0,se.registerVersion)(Wl,"0.9.11","esm2017")}();const Yl="analytics",Xa="firebase_id",yd="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Jl="https://www.googletagmanager.com/gtag/js",gr=new oe.Yd("@firebase/analytics");function ls(I){return Promise.all(I.map(D=>D.catch(M=>M)))}function Xl(I,D){const M=document.createElement("script");M.src=`${Jl}?l=${I}&id=${D}`,M.async=!0,document.head.appendChild(M)}function pf(I,D,M,V,z,ne){return so.apply(this,arguments)}function so(){return(so=(0,O.Z)(function*(I,D,M,V,z,ne){const ie=V[z];try{if(ie)yield D[ie];else{const Dt=(yield ls(M)).find(pt=>pt.measurementId===z);Dt&&(yield D[Dt.appId])}}catch(We){gr.error(We)}I("config",z,ne)})).apply(this,arguments)}function vd(I,D,M,V,z){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,O.Z)(function*(I,D,M,V,z){try{let ne=[];if(z&&z.send_to){let ie=z.send_to;Array.isArray(ie)||(ie=[ie]);const We=yield ls(M);for(const Dt of ie){const pt=We.find(Ct=>Ct.measurementId===Dt),Ht=pt&&D[pt.appId];if(!Ht){ne=[];break}ne.push(Ht)}}0===ne.length&&(ne=Object.values(D)),yield Promise.all(ne),I("event",V,z||{})}catch(ne){gr.error(ne)}})).apply(this,arguments)}function Ey(){const I=window.document.getElementsByTagName("script");for(const D of Object.values(I))if(D.src&&D.src.includes(Jl))return D;return null}const Kn=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),tr=new class Ai{constructor(D={},M=1e3){this.throttleMetadata=D,this.intervalMillis=M}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,M){this.throttleMetadata[D]=M}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function tl(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Lg(I){return No.apply(this,arguments)}function No(){return(No=(0,O.Z)(function*(I){var D;const{appId:M,apiKey:V}=I,z={method:"GET",headers:tl(V)},ne=yd.replace("{app-id}",M),ie=yield fetch(ne,z);if(200!==ie.status&&304!==ie.status){let We="";try{const Dt=yield ie.json();(null===(D=Dt.error)||void 0===D?void 0:D.message)&&(We=Dt.error.message)}catch(Dt){}throw Kn.create("config-fetch-failed",{httpStatus:ie.status,responseMessage:We})}return ie.json()})).apply(this,arguments)}function wd(I){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,O.Z)(function*(I,D=tr,M){const{appId:V,apiKey:z,measurementId:ne}=I.options;if(!V)throw Kn.create("no-app-id");if(!z){if(ne)return{measurementId:ne,appId:V};throw Kn.create("no-api-key")}const ie=D.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},We=new _f;return setTimeout((0,O.Z)(function*(){We.abort()}),void 0!==M?M:6e4),Po({appId:V,apiKey:z,measurementId:ne},ie,We,D)})).apply(this,arguments)}function Po(I,D,M){return qi.apply(this,arguments)}function qi(){return(qi=(0,O.Z)(function*(I,{throttleEndTimeMillis:D,backoffCount:M},V,z=tr){const{appId:ne,measurementId:ie}=I;try{yield at(V,D)}catch(We){if(ie)return gr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ie} provided in the "measurementId" field in the local Firebase config. [${We.message}]`),{appId:ne,measurementId:ie};throw We}try{const We=yield Lg(I);return z.deleteThrottleMetadata(ne),We}catch(We){if(!mf(We)){if(z.deleteThrottleMetadata(ne),ie)return gr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ie} provided in the "measurementId" field in the local Firebase config. [${We.message}]`),{appId:ne,measurementId:ie};throw We}const Dt=503===Number(We.customData.httpStatus)?(0,re.$s)(M,z.intervalMillis,30):(0,re.$s)(M,z.intervalMillis),pt={throttleEndTimeMillis:Date.now()+Dt,backoffCount:M+1};return z.setThrottleMetadata(ne,pt),gr.debug(`Calling attemptFetch again in ${Dt} millis`),Po(I,pt,V,z)}})).apply(this,arguments)}function at(I,D){return new Promise((M,V)=>{const z=Math.max(D-Date.now(),0),ne=setTimeout(M,z);I.addEventListener(()=>{clearTimeout(ne),V(Kn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function mf(I){if(!(I instanceof re.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}class _f{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function ya(){return oo.apply(this,arguments)}function oo(){return(oo=(0,O.Z)(function*(){if(!(0,re.hl)())return gr.warn(Kn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(I){return gr.warn(Kn.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function va(){return(va=(0,O.Z)(function*(I,D,M,V,z,ne,ie){var We;const Dt=wd(I);Dt.then(nr=>{M[nr.measurementId]=nr.appId,I.options.measurementId&&nr.measurementId!==I.options.measurementId&&gr.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${nr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(nr=>gr.error(nr)),D.push(Dt);const pt=ya().then(nr=>{if(nr)return V.getId()}),[Ht,Ct]=yield Promise.all([Dt,pt]);Ey()||Xl(ne,Ht.measurementId),z("js",new Date);const hi=null!==(We=null==ie?void 0:ie.config)&&void 0!==We?We:{};return hi.origin="firebase",hi.update=!0,null!=Ct&&(hi[Xa]=Ct),z("config",Ht.measurementId,hi),Ht.measurementId})).apply(this,arguments)}class Oo{constructor(D){this.app=D}_delete(){return delete us[this.app.options.appId],Promise.resolve()}}let us={},eu=[];const lc={};let rl,wa,ao="dataLayer",mr=!1;function Fo(I,D,M){!function Ea(){const I=[];if((0,re.ru)()&&I.push("This is a browser extension environment."),(0,re.zI)()||I.push("Cookies are not available."),I.length>0){const D=I.map((V,z)=>`(${z+1}) ${V}`).join(" "),M=Kn.create("invalid-analytics-context",{errorInfo:D});gr.warn(M.message)}}();const V=I.options.appId;if(!V)throw Kn.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Kn.create("no-api-key");gr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=us[V])throw Kn.create("already-exists",{id:V});if(!mr){!function Og(I){let D=[];Array.isArray(window[I])?D=window[I]:window[I]=D}(ao);const{wrappedGtag:ne,gtagCore:ie}=function Fg(I,D,M,V,z){let ne=function(...ie){window[V].push(arguments)};return window[z]&&"function"==typeof window[z]&&(ne=window[z]),window[z]=function gf(I,D,M,V){function ne(){return(ne=(0,O.Z)(function*(ie,We,Dt){try{"event"===ie?yield vd(I,D,M,We,Dt):"config"===ie?yield pf(I,D,M,V,We,Dt):I("set",We)}catch(pt){gr.error(pt)}})).apply(this,arguments)}return function z(ie,We,Dt){return ne.apply(this,arguments)}}(ne,I,D,M),{gtagCore:ne,wrappedGtag:window[z]}}(us,eu,lc,ao,"gtag");wa=ne,rl=ie,mr=!0}return us[V]=function Un(I,D,M,V,z,ne,ie){return va.apply(this,arguments)}(I,eu,lc,D,rl,ao,M),new Oo(I)}function mn(){return(mn=(0,O.Z)(function*(I,D,M,V,z){if(z&&z.global)I("event",M,V);else{const ne=yield D;I("event",M,Object.assign(Object.assign({},V),{send_to:ne}))}})).apply(this,arguments)}function cs(){return ln.apply(this,arguments)}function ln(){return(ln=(0,O.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(I){return!1}})).apply(this,arguments)}const Nr="@firebase/analytics";!function di(){(0,se._registerComponent)(new ye.wA(Yl,(D,{options:M})=>Fo(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,se._registerComponent)(new ye.wA("analytics-internal",function I(D){try{const M=D.getProvider(Yl).getImmediate();return{logEvent:(V,z,ne)=>function Ca(I,D,M,V){I=(0,re.m9)(I),function _r(I,D,M,V,z){return mn.apply(this,arguments)}(wa,us[I.app.options.appId],D,M,V).catch(z=>gr.error(z))}(M,V,z,ne)}}catch(M){throw Kn.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,se.registerVersion)(Nr,"0.7.7"),(0,se.registerVersion)(Nr,"0.7.7","esm2017")}();var Cd=F(4408),xs=F(7565);const Ug=new class ol extends xs.v{}(class kn extends Cd.o{constructor(D,M){super(D,M),this.scheduler=D,this.work=M}schedule(D,M=0){return M>0?super.schedule(D,M):(this.delay=M,this.state=D,this.scheduler.flush(this),this)}execute(D,M){return M>0||this.closed?super.execute(D,M):this._execute(D,M)}requestAsyncId(D,M,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(D,M,V):D.flush(this)}});var Yr=F(4986),ds=F(8505),tu=F(5363),Ia=F(9468);const Ta=new u.GfV("7.3.0"),nu="__angularfire_symbol__analyticsIsSupportedValue",Da="__angularfire_symbol__analyticsIsSupported",cc="__angularfire_symbol__remoteConfigIsSupportedValue",Id="__angularfire_symbol__remoteConfigIsSupported",dc="__angularfire_symbol__messagingIsSupportedValue",xt="__angularfire_symbol__messagingIsSupported";function Td(I,D,M){if(D){if(1===D.length)return D[0];const ne=D.filter(ie=>ie.app===M);if(1===ne.length)return ne[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[Da]||(globalThis[Da]=cs().then(I=>globalThis[nu]=I).catch(()=>globalThis[nu]=!1)),globalThis[xt]||(globalThis[xt]=df().then(I=>globalThis[dc]=I).catch(()=>globalThis[dc]=!1)),globalThis[Id]||(globalThis[Id]=hd().then(I=>globalThis[cc]=I).catch(()=>globalThis[cc]=!1));const Dd=(I,D)=>{const M=D?[D]:(0,Y.C6)(),V=[];return M.forEach(z=>{z.container.getProvider(I).instances.forEach(ie=>{V.includes(ie)||V.push(ie)})}),V};function Sa(){}class Gi{constructor(D,M=Ug){this.zone=D,this.delegate=M}now(){return this.delegate.now()}schedule(D,M,V){const z=this.zone;return this.delegate.schedule(function(ie){z.runGuarded(()=>{D.apply(this,[ie])})},M,V)}}class Ad{constructor(D){this.zone=D,this.task=null}call(D,M){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Sa,{},Sa,Sa)),M.pipe((0,ds.b)({next:V,complete:V,error:V})).subscribe(D).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ru=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Gi(Zone.current)),this.insideAngular=M.run(()=>new Gi(Zone.current,Yr.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(u.LFG(u.R0b))},I.\u0275prov=u.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function ks(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Wi(I){return I.pipe((0,tu.Q)(ks().outsideAngular))}function xa(I){return ks(),function lo(I){return function(M){return(M=M.lift(new Ad(I.ngZone))).pipe((0,Ia.R)(I.outsideAngular),(0,tu.Q)(I.insideAngular))}}(ks())(I)}},2090:(ut,Ee,F)=>{F.d(Ee,{$s:()=>Et,BH:()=>Te,DV:()=>$n,Dv:()=>Ci,G6:()=>ht,GJ:()=>yn,L:()=>fe,LL:()=>Nt,Lj:()=>Bt,Mn:()=>Ge,Pz:()=>St,Sg:()=>He,UG:()=>X,UI:()=>rn,US:()=>oe,Wj:()=>qn,X3:()=>dt,Yr:()=>Qe,ZB:()=>te,ZR:()=>de,b$:()=>Ne,cI:()=>kt,d:()=>st,dS:()=>dn,eu:()=>ce,g5:()=>se,gK:()=>Mr,gQ:()=>fr,h$:()=>ae,hl:()=>ee,hu:()=>O,jU:()=>De,lb:()=>Ul,m9:()=>nn,ne:()=>Hn,p$:()=>G,pd:()=>Ae,r3:()=>Eo,ru:()=>Le,tV:()=>q,uI:()=>Fe,ug:()=>et,vZ:()=>Pn,w1:()=>ke,w9:()=>qr,xO:()=>Ui,xb:()=>or,z$:()=>Ue,zI:()=>_e,zd:()=>br});var u=F(5861);const O=function(H,B){if(!H)throw se(B)},se=function(H){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+H)},re=function(H){const B=[];let W=0;for(let he=0;he<H.length;he++){let Q=H.charCodeAt(he);Q<128?B[W++]=Q:Q<2048?(B[W++]=Q>>6|192,B[W++]=63&Q|128):55296==(64512&Q)&&he+1<H.length&&56320==(64512&H.charCodeAt(he+1))?(Q=65536+((1023&Q)<<10)+(1023&H.charCodeAt(++he)),B[W++]=Q>>18|240,B[W++]=Q>>12&63|128,B[W++]=Q>>6&63|128,B[W++]=63&Q|128):(B[W++]=Q>>12|224,B[W++]=Q>>6&63|128,B[W++]=63&Q|128)}return B},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,B){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,he=[];for(let Q=0;Q<H.length;Q+=3){const Ve=H[Q],_t=Q+1<H.length,Qt=_t?H[Q+1]:0,pr=Q+2<H.length,Jn=pr?H[Q+2]:0;let Gn=(15&Qt)<<2|Jn>>6,Wn=63&Jn;pr||(Wn=64,_t||(Gn=64)),he.push(W[Ve>>2],W[(3&Ve)<<4|Qt>>4],W[Gn],W[Wn])}return he.join("")},encodeString(H,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(H):this.encodeByteArray(re(H),B)},decodeString(H,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(H):function(H){const B=[];let W=0,he=0;for(;W<H.length;){const Q=H[W++];if(Q<128)B[he++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Ve=H[W++];B[he++]=String.fromCharCode((31&Q)<<6|63&Ve)}else if(Q>239&&Q<365){const pr=((7&Q)<<18|(63&H[W++])<<12|(63&H[W++])<<6|63&H[W++])-65536;B[he++]=String.fromCharCode(55296+(pr>>10)),B[he++]=String.fromCharCode(56320+(1023&pr))}else{const Ve=H[W++],_t=H[W++];B[he++]=String.fromCharCode((15&Q)<<12|(63&Ve)<<6|63&_t)}}return B.join("")}(this.decodeStringToByteArray(H,B))},decodeStringToByteArray(H,B){this.init_();const W=B?this.charToByteMapWebSafe_:this.charToByteMap_,he=[];for(let Q=0;Q<H.length;){const Ve=W[H.charAt(Q++)],Qt=Q<H.length?W[H.charAt(Q)]:0;++Q;const Jn=Q<H.length?W[H.charAt(Q)]:64;++Q;const Rt=Q<H.length?W[H.charAt(Q)]:64;if(++Q,null==Ve||null==Qt||null==Jn||null==Rt)throw Error();he.push(Ve<<2|Qt>>4),64!==Jn&&(he.push(Qt<<4&240|Jn>>2),64!==Rt&&he.push(Jn<<6&192|Rt))}return he},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}},ae=function(H){const B=re(H);return oe.encodeByteArray(B,!0)},fe=function(H){return ae(H).replace(/\./g,"")},q=function(H){try{return oe.decodeString(H,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function G(H){return te(void 0,H)}function te(H,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return B}for(const W in B)!B.hasOwnProperty(W)||!$e(W)||(H[W]=te(H[W],B[W]));return H}function $e(H){return"__proto__"!==H}class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,W)=>{this.resolve=B,this.reject=W})}wrapCallback(B){return(W,he)=>{W?this.reject(W):this.resolve(he),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(W):B(W,he))}}}function He(H,B){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const he=B||"demo-project",Q=H.iat||0,Ve=H.sub||H.user_id;if(!Ve)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const _t=Object.assign({iss:`https://securetoken.google.com/${he}`,aud:he,iat:Q,exp:Q+3600,auth_time:Q,sub:Ve,user_id:Ve,firebase:{sign_in_provider:"custom",identities:{}}},H);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(_t)),""].join(".")}function Ue(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Fe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function X(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(H){return!1}}function De(){return"object"==typeof self&&self.self===self}function Le(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function Ne(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function st(){return Ue().indexOf("Electron/")>=0}function ke(){const H=Ue();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function Ge(){return Ue().indexOf("MSAppHost/")>=0}function Qe(){return!1}function ht(){return!X()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ee(){return"object"==typeof indexedDB}function ce(){return new Promise((H,B)=>{try{let W=!0;const he="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(he);Q.onsuccess=()=>{Q.result.close(),W||self.indexedDB.deleteDatabase(he),H(!0)},Q.onupgradeneeded=()=>{W=!1},Q.onerror=()=>{var Ve;B((null===(Ve=Q.error)||void 0===Ve?void 0:Ve.message)||"")}}catch(W){B(W)}})}function _e(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class de extends Error{constructor(B,W,he){super(W),this.code=B,this.customData=he,this.name="FirebaseError",Object.setPrototypeOf(this,de.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nt.prototype.create)}}class Nt{constructor(B,W,he){this.service=B,this.serviceName=W,this.errors=he}create(B,...W){const he=W[0]||{},Q=`${this.service}/${B}`,Ve=this.errors[B],_t=Ve?function Xt(H,B){return H.replace(Qn,(W,he)=>{const Q=B[he];return null!=Q?String(Q):`<${he}?>`})}(Ve,he):"Error";return new de(Q,`${this.serviceName}: ${_t} (${Q}).`,he)}}const Qn=/\{\$([^}]+)}/g;function kt(H){return JSON.parse(H)}function St(H){return JSON.stringify(H)}const vt=function(H){let B={},W={},he={},Q="";try{const Ve=H.split(".");B=kt(q(Ve[0])||""),W=kt(q(Ve[1])||""),Q=Ve[2],he=W.d||{},delete W.d}catch(Ve){}return{header:B,claims:W,data:he,signature:Q}},qr=function(H){const W=vt(H).claims;return!!W&&"object"==typeof W&&W.hasOwnProperty("iat")},yn=function(H){const B=vt(H).claims;return"object"==typeof B&&!0===B.admin};function Eo(H,B){return Object.prototype.hasOwnProperty.call(H,B)}function $n(H,B){if(Object.prototype.hasOwnProperty.call(H,B))return H[B]}function or(H){for(const B in H)if(Object.prototype.hasOwnProperty.call(H,B))return!1;return!0}function rn(H,B,W){const he={};for(const Q in H)Object.prototype.hasOwnProperty.call(H,Q)&&(he[Q]=B.call(W,H[Q],Q,H));return he}function Pn(H,B){if(H===B)return!0;const W=Object.keys(H),he=Object.keys(B);for(const Q of W){if(!he.includes(Q))return!1;const Ve=H[Q],_t=B[Q];if(ra(Ve)&&ra(_t)){if(!Pn(Ve,_t))return!1}else if(Ve!==_t)return!1}for(const Q of he)if(!W.includes(Q))return!1;return!0}function ra(H){return null!==H&&"object"==typeof H}function Ui(H){const B=[];for(const[W,he]of Object.entries(H))Array.isArray(he)?he.forEach(Q=>{B.push(encodeURIComponent(W)+"="+encodeURIComponent(Q))}):B.push(encodeURIComponent(W)+"="+encodeURIComponent(he));return B.length?"&"+B.join("&"):""}function br(H){const B={};return H.replace(/^\?/,"").split("&").forEach(he=>{if(he){const[Q,Ve]=he.split("=");B[decodeURIComponent(Q)]=decodeURIComponent(Ve)}}),B}function Ae(H){const B=H.indexOf("?");if(!B)return"";const W=H.indexOf("#",B);return H.substring(B,W>0?W:void 0)}class fr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let B=1;B<this.blockSize;++B)this.pad_[B]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(B,W){W||(W=0);const he=this.W_;if("string"==typeof B)for(let Rt=0;Rt<16;Rt++)he[Rt]=B.charCodeAt(W)<<24|B.charCodeAt(W+1)<<16|B.charCodeAt(W+2)<<8|B.charCodeAt(W+3),W+=4;else for(let Rt=0;Rt<16;Rt++)he[Rt]=B[W]<<24|B[W+1]<<16|B[W+2]<<8|B[W+3],W+=4;for(let Rt=16;Rt<80;Rt++){const Gn=he[Rt-3]^he[Rt-8]^he[Rt-14]^he[Rt-16];he[Rt]=4294967295&(Gn<<1|Gn>>>31)}let Jn,zt,Q=this.chain_[0],Ve=this.chain_[1],_t=this.chain_[2],Qt=this.chain_[3],pr=this.chain_[4];for(let Rt=0;Rt<80;Rt++){Rt<40?Rt<20?(Jn=Qt^Ve&(_t^Qt),zt=1518500249):(Jn=Ve^_t^Qt,zt=1859775393):Rt<60?(Jn=Ve&_t|Qt&(Ve|_t),zt=2400959708):(Jn=Ve^_t^Qt,zt=3395469782);const Gn=(Q<<5|Q>>>27)+Jn+pr+zt+he[Rt]&4294967295;pr=Qt,Qt=_t,_t=4294967295&(Ve<<30|Ve>>>2),Ve=Q,Q=Gn}this.chain_[0]=this.chain_[0]+Q&4294967295,this.chain_[1]=this.chain_[1]+Ve&4294967295,this.chain_[2]=this.chain_[2]+_t&4294967295,this.chain_[3]=this.chain_[3]+Qt&4294967295,this.chain_[4]=this.chain_[4]+pr&4294967295}update(B,W){if(null==B)return;void 0===W&&(W=B.length);const he=W-this.blockSize;let Q=0;const Ve=this.buf_;let _t=this.inbuf_;for(;Q<W;){if(0===_t)for(;Q<=he;)this.compress_(B,Q),Q+=this.blockSize;if("string"==typeof B){for(;Q<W;)if(Ve[_t]=B.charCodeAt(Q),++_t,++Q,_t===this.blockSize){this.compress_(Ve),_t=0;break}}else for(;Q<W;)if(Ve[_t]=B[Q],++_t,++Q,_t===this.blockSize){this.compress_(Ve),_t=0;break}}this.inbuf_=_t,this.total_+=W}digest(){const B=[];let W=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Q=this.blockSize-1;Q>=56;Q--)this.buf_[Q]=255&W,W/=256;this.compress_(this.buf_);let he=0;for(let Q=0;Q<5;Q++)for(let Ve=24;Ve>=0;Ve-=8)B[he]=this.chain_[Q]>>Ve&255,++he;return B}}function Hn(H,B){const W=new mt(H,B);return W.subscribe.bind(W)}class mt{constructor(B,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{B(this)}).catch(he=>{this.error(he)})}next(B){this.forEachObserver(W=>{W.next(B)})}error(B){this.forEachObserver(W=>{W.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,W,he){let Q;if(void 0===B&&void 0===W&&void 0===he)throw new Error("Missing Observer.");Q=function vs(H,B){if("object"!=typeof H||null===H)return!1;for(const W of B)if(W in H&&"function"==typeof H[W])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:W,complete:he},void 0===Q.next&&(Q.next=ar),void 0===Q.error&&(Q.error=ar),void 0===Q.complete&&(Q.complete=ar);const Ve=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch(_t){}}),this.observers.push(Q),Ve}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,B)}sendOne(B,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{W(this.observers[B])}catch(he){"undefined"!=typeof console&&console.error&&console.error(he)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ar(){}const Ci=function(H,B,W,he){let Q;if(he<B?Q="at least "+B:he>W&&(Q=0===W?"none":"no more than "+W),Q)throw new Error(H+" failed: Was called with "+he+(1===he?" argument.":" arguments.")+" Expects "+Q+".")};function Mr(H,B){return`${H} failed: ${B} argument `}function qn(H,B,W,he){if((!he||W)&&"function"!=typeof W)throw new Error(Mr(H,B)+"must be a valid function.")}function Ul(H,B,W,he){if((!he||W)&&("object"!=typeof W||null===W))throw new Error(Mr(H,B)+"must be a valid context object.")}const dn=function(H){const B=[];let W=0;for(let he=0;he<H.length;he++){let Q=H.charCodeAt(he);if(Q>=55296&&Q<=56319){const Ve=Q-55296;he++,O(he<H.length,"Surrogate pair missing trail surrogate."),Q=65536+(Ve<<10)+(H.charCodeAt(he)-56320)}Q<128?B[W++]=Q:Q<2048?(B[W++]=Q>>6|192,B[W++]=63&Q|128):Q<65536?(B[W++]=Q>>12|224,B[W++]=Q>>6&63|128,B[W++]=63&Q|128):(B[W++]=Q>>18|240,B[W++]=Q>>12&63|128,B[W++]=Q>>6&63|128,B[W++]=63&Q|128)}return B},et=function(H){let B=0;for(let W=0;W<H.length;W++){const he=H.charCodeAt(W);he<128?B++:he<2048?B+=2:he>=55296&&he<=56319?(B+=4,W++):B+=3}return B};function Et(H,B=1e3,W=2){const he=B*Math.pow(W,H),Q=Math.round(.5*he*(Math.random()-.5)*2);return Math.min(144e5,he+Q)}function nn(H){return H&&H._delegate?H._delegate:H}function bt(H,B){return new Promise((W,he)=>{H.onsuccess=Q=>{W(Q.target.result)},H.onerror=Q=>{var Ve;he(`${B}: ${null===(Ve=Q.target.error)||void 0===Ve?void 0:Ve.message}`)}})}class Vt{constructor(B){this._db=B,this.objectStoreNames=this._db.objectStoreNames}transaction(B,W){return new Je(this._db.transaction.call(this._db,B,W))}createObjectStore(B,W){return new Ce(this._db.createObjectStore(B,W))}close(){this._db.close()}}class Je{constructor(B){this._transaction=B,this.complete=new Promise((W,he)=>{this._transaction.oncomplete=function(){W()},this._transaction.onerror=()=>{he(this._transaction.error)},this._transaction.onabort=()=>{he(this._transaction.error)}})}objectStore(B){return new Ce(this._transaction.objectStore(B))}}class Ce{constructor(B){this._store=B}index(B){return new ot(this._store.index(B))}createIndex(B,W,he){return new ot(this._store.createIndex(B,W,he))}get(B){return bt(this._store.get(B),"Error reading from IndexedDB")}put(B,W){return bt(this._store.put(B,W),"Error writing to IndexedDB")}delete(B){return bt(this._store.delete(B),"Error deleting from IndexedDB")}clear(){return bt(this._store.clear(),"Error clearing IndexedDB object store")}}class ot{constructor(B){this._index=B}get(B){return bt(this._index.get(B),"Error reading from IndexedDB")}}function dt(H,B,W){return new Promise((he,Q)=>{try{const Ve=indexedDB.open(H,B);Ve.onsuccess=_t=>{he(new Vt(_t.target.result))},Ve.onerror=_t=>{var Qt;Q(`Error opening indexedDB: ${null===(Qt=_t.target.error)||void 0===Qt?void 0:Qt.message}`)},Ve.onupgradeneeded=_t=>{W(new Vt(Ve.result),_t.oldVersion,_t.newVersion,new Je(Ve.transaction))}}catch(Ve){Q(`Error opening indexedDB: ${Ve.message}`)}})}function Bt(H){return sn.apply(this,arguments)}function sn(){return(sn=(0,u.Z)(function*(H){return new Promise((B,W)=>{try{const he=indexedDB.deleteDatabase(H);he.onsuccess=()=>{B()},he.onerror=Q=>{var Ve;W(`Error deleting indexedDB database "${H}": ${null===(Ve=Q.target.error)||void 0===Ve?void 0:Ve.message}`)}}catch(he){W(`Error deleting indexedDB database "${H}": ${he.message}`)}})})).apply(this,arguments)}},46:(ut,Ee,F)=>{var u=F(5e3);let Y=null;function O(){return Y}const oe=new u.OlP("DocumentToken");let ae=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function fe(){return(0,u.LFG)(G)}()},providedIn:"platform"}),n})();const q=new u.OlP("Location Initialized");let G=(()=>{class n extends ae{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){te()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){te()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function $e(){return new G((0,u.LFG)(oe))}()},providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function Te(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function He(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ue(n){return n&&"?"!==n[0]?"?"+n:n}let Fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function X(n){const e=(0,u.LFG)(oe).location;return new Le((0,u.LFG)(ae),e&&e.origin||"")}()},providedIn:"root"}),n})();const De=new u.OlP("appBaseHref");let Le=(()=>{class n extends Fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Te(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ue(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+Ue(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+Ue(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ae),u.LFG(De,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Ne=(()=>{class n extends Fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Te(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+Ue(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+Ue(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ae),u.LFG(De,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),st=(()=>{class n{constructor(t,r){this._subject=new u.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=He(Qe(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ue(r))}normalize(t){return n.stripTrailingSlash(function Ge(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Qe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ue,n.joinWithSlash=Te,n.stripTrailingSlash=He,n.\u0275fac=function(t){return new(t||n)(u.LFG(Fe),u.LFG(ae))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function ke(){return new st((0,u.LFG)(Fe),(0,u.LFG)(ae))}()},providedIn:"root"}),n})();function Qe(n){return n.replace(/\/index.html$/,"")}var ce=(()=>((ce=ce||{})[ce.Zero=0]="Zero",ce[ce.One=1]="One",ce[ce.Two=2]="Two",ce[ce.Few=3]="Few",ce[ce.Many=4]="Many",ce[ce.Other=5]="Other",ce))(),_e=(()=>((_e=_e||{})[_e.Format=0]="Format",_e[_e.Standalone=1]="Standalone",_e))(),we=(()=>((we=we||{})[we.Narrow=0]="Narrow",we[we.Abbreviated=1]="Abbreviated",we[we.Wide=2]="Wide",we[we.Short=3]="Short",we))(),Pe=(()=>((Pe=Pe||{})[Pe.Short=0]="Short",Pe[Pe.Medium=1]="Medium",Pe[Pe.Long=2]="Long",Pe[Pe.Full=3]="Full",Pe))(),de=(()=>((de=de||{})[de.Decimal=0]="Decimal",de[de.Group=1]="Group",de[de.List=2]="List",de[de.PercentSign=3]="PercentSign",de[de.PlusSign=4]="PlusSign",de[de.MinusSign=5]="MinusSign",de[de.Exponential=6]="Exponential",de[de.SuperscriptingExponent=7]="SuperscriptingExponent",de[de.PerMille=8]="PerMille",de[de.Infinity=9]="Infinity",de[de.NaN=10]="NaN",de[de.TimeSeparator=11]="TimeSeparator",de[de.CurrencyDecimal=12]="CurrencyDecimal",de[de.CurrencyGroup=13]="CurrencyGroup",de))();function qr(n,e){return en((0,u.cg1)(n)[u.wAp.DateFormat],e)}function yn(n,e){return en((0,u.cg1)(n)[u.wAp.TimeFormat],e)}function Eo(n,e){return en((0,u.cg1)(n)[u.wAp.DateTimeFormat],e)}function $n(n,e){const t=(0,u.cg1)(n),r=t[u.wAp.NumberSymbols][e];if(void 0===r){if(e===de.CurrencyDecimal)return t[u.wAp.NumberSymbols][de.Decimal];if(e===de.CurrencyGroup)return t[u.wAp.NumberSymbols][de.Group]}return r}const br=u.kL8;function Ae(n){if(!n[u.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[u.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function en(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function vs(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Cr=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,qn={},Ul=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var dn=(()=>((dn=dn||{})[dn.Short=0]="Short",dn[dn.ShortGMT=1]="ShortGMT",dn[dn.Long=2]="Long",dn[dn.Extended=3]="Extended",dn))(),et=(()=>((et=et||{})[et.FullYear=0]="FullYear",et[et.Month=1]="Month",et[et.Date=2]="Date",et[et.Hours=3]="Hours",et[et.Minutes=4]="Minutes",et[et.Seconds=5]="Seconds",et[et.FractionalSeconds=6]="FractionalSeconds",et[et.Day=7]="Day",et))(),wt=(()=>((wt=wt||{})[wt.DayPeriods=0]="DayPeriods",wt[wt.Days=1]="Days",wt[wt.Months=2]="Months",wt[wt.Eras=3]="Eras",wt))();function Qs(n,e,t,r){let i=function Qt(n){if(Jn(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,a=1,c=1]=n.split("-").map(p=>+p);return ws(i,a-1,c)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Cr))return function pr(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,a=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const c=Number(n[4]||0)-t,p=Number(n[5]||0)-r,_=Number(n[6]||0),E=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return a.call(e,c,p,_,E),e}(r)}const e=new Date(n);if(!Jn(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=tn(t,e)||e;let p,c=[];for(;e;){if(p=Ul.exec(e),!p){c.push(e);break}{c=c.concat(p.slice(1));const T=c.pop();if(!T)break;e=T}}let _=i.getTimezoneOffset();r&&(_=Q(r,_),i=function _t(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function Ve(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(Q(e,i)-i))}(i,r,!0));let E="";return c.forEach(T=>{const S=function he(n){if(W[n])return W[n];let e;switch(n){case"G":case"GG":case"GGG":e=Vt(wt.Eras,we.Abbreviated);break;case"GGGG":e=Vt(wt.Eras,we.Wide);break;case"GGGGG":e=Vt(wt.Eras,we.Narrow);break;case"y":e=nn(et.FullYear,1,0,!1,!0);break;case"yy":e=nn(et.FullYear,2,0,!0,!0);break;case"yyy":e=nn(et.FullYear,3,0,!1,!0);break;case"yyyy":e=nn(et.FullYear,4,0,!1,!0);break;case"Y":e=B(1);break;case"YY":e=B(2,!0);break;case"YYY":e=B(3);break;case"YYYY":e=B(4);break;case"M":case"L":e=nn(et.Month,1,1);break;case"MM":case"LL":e=nn(et.Month,2,1);break;case"MMM":e=Vt(wt.Months,we.Abbreviated);break;case"MMMM":e=Vt(wt.Months,we.Wide);break;case"MMMMM":e=Vt(wt.Months,we.Narrow);break;case"LLL":e=Vt(wt.Months,we.Abbreviated,_e.Standalone);break;case"LLLL":e=Vt(wt.Months,we.Wide,_e.Standalone);break;case"LLLLL":e=Vt(wt.Months,we.Narrow,_e.Standalone);break;case"w":e=H(1);break;case"ww":e=H(2);break;case"W":e=H(1,!0);break;case"d":e=nn(et.Date,1);break;case"dd":e=nn(et.Date,2);break;case"c":case"cc":e=nn(et.Day,1);break;case"ccc":e=Vt(wt.Days,we.Abbreviated,_e.Standalone);break;case"cccc":e=Vt(wt.Days,we.Wide,_e.Standalone);break;case"ccccc":e=Vt(wt.Days,we.Narrow,_e.Standalone);break;case"cccccc":e=Vt(wt.Days,we.Short,_e.Standalone);break;case"E":case"EE":case"EEE":e=Vt(wt.Days,we.Abbreviated);break;case"EEEE":e=Vt(wt.Days,we.Wide);break;case"EEEEE":e=Vt(wt.Days,we.Narrow);break;case"EEEEEE":e=Vt(wt.Days,we.Short);break;case"a":case"aa":case"aaa":e=Vt(wt.DayPeriods,we.Abbreviated);break;case"aaaa":e=Vt(wt.DayPeriods,we.Wide);break;case"aaaaa":e=Vt(wt.DayPeriods,we.Narrow);break;case"b":case"bb":case"bbb":e=Vt(wt.DayPeriods,we.Abbreviated,_e.Standalone,!0);break;case"bbbb":e=Vt(wt.DayPeriods,we.Wide,_e.Standalone,!0);break;case"bbbbb":e=Vt(wt.DayPeriods,we.Narrow,_e.Standalone,!0);break;case"B":case"BB":case"BBB":e=Vt(wt.DayPeriods,we.Abbreviated,_e.Format,!0);break;case"BBBB":e=Vt(wt.DayPeriods,we.Wide,_e.Format,!0);break;case"BBBBB":e=Vt(wt.DayPeriods,we.Narrow,_e.Format,!0);break;case"h":e=nn(et.Hours,1,-12);break;case"hh":e=nn(et.Hours,2,-12);break;case"H":e=nn(et.Hours,1);break;case"HH":e=nn(et.Hours,2);break;case"m":e=nn(et.Minutes,1);break;case"mm":e=nn(et.Minutes,2);break;case"s":e=nn(et.Seconds,1);break;case"ss":e=nn(et.Seconds,2);break;case"S":e=nn(et.FractionalSeconds,1);break;case"SS":e=nn(et.FractionalSeconds,2);break;case"SSS":e=nn(et.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Ce(dn.Short);break;case"ZZZZZ":e=Ce(dn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ce(dn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ce(dn.Long);break;default:return null}return W[n]=e,e}(T);E+=S?S(i,t,_):"''"===T?"'":T.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),E}function ws(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function tn(n,e){const t=function Xt(n){return(0,u.cg1)(n)[u.wAp.LocaleId]}(n);if(qn[t]=qn[t]||{},qn[t][e])return qn[t][e];let r="";switch(e){case"shortDate":r=qr(n,Pe.Short);break;case"mediumDate":r=qr(n,Pe.Medium);break;case"longDate":r=qr(n,Pe.Long);break;case"fullDate":r=qr(n,Pe.Full);break;case"shortTime":r=yn(n,Pe.Short);break;case"mediumTime":r=yn(n,Pe.Medium);break;case"longTime":r=yn(n,Pe.Long);break;case"fullTime":r=yn(n,Pe.Full);break;case"short":const i=tn(n,"shortTime"),a=tn(n,"shortDate");r=Et(Eo(n,Pe.Short),[i,a]);break;case"medium":const c=tn(n,"mediumTime"),p=tn(n,"mediumDate");r=Et(Eo(n,Pe.Medium),[c,p]);break;case"long":const _=tn(n,"longTime"),E=tn(n,"longDate");r=Et(Eo(n,Pe.Long),[_,E]);break;case"full":const T=tn(n,"fullTime"),S=tn(n,"fullDate");r=Et(Eo(n,Pe.Full),[T,S])}return r&&(qn[t][e]=r),r}function Et(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Ir(n,e,t="-",r,i){let a="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,a=t));let c=String(n);for(;c.length<e;)c="0"+c;return r&&(c=c.substr(c.length-e)),a+c}function nn(n,e,t=0,r=!1,i=!1){return function(a,c){let p=function bt(n,e){switch(n){case et.FullYear:return e.getFullYear();case et.Month:return e.getMonth();case et.Date:return e.getDate();case et.Hours:return e.getHours();case et.Minutes:return e.getMinutes();case et.Seconds:return e.getSeconds();case et.FractionalSeconds:return e.getMilliseconds();case et.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,a);if((t>0||p>-t)&&(p+=t),n===et.Hours)0===p&&-12===t&&(p=12);else if(n===et.FractionalSeconds)return function bo(n,e){return Ir(n,3).substr(0,e)}(p,e);const _=$n(c,de.MinusSign);return Ir(p,e,_,r,i)}}function Vt(n,e,t=_e.Format,r=!1){return function(i,a){return function Je(n,e,t,r,i,a){switch(t){case wt.Months:return function St(n,e,t){const r=(0,u.cg1)(n),a=en([r[u.wAp.MonthsFormat],r[u.wAp.MonthsStandalone]],e);return en(a,t)}(e,i,r)[n.getMonth()];case wt.Days:return function kt(n,e,t){const r=(0,u.cg1)(n),a=en([r[u.wAp.DaysFormat],r[u.wAp.DaysStandalone]],e);return en(a,t)}(e,i,r)[n.getDay()];case wt.DayPeriods:const c=n.getHours(),p=n.getMinutes();if(a){const E=function fr(n){const e=(0,u.cg1)(n);return Ae(e),(e[u.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?vs(r):[vs(r[0]),vs(r[1])])}(e),T=function Hn(n,e,t){const r=(0,u.cg1)(n);Ae(r);const a=en([r[u.wAp.ExtraData][0],r[u.wAp.ExtraData][1]],e)||[];return en(a,t)||[]}(e,i,r),S=E.findIndex(N=>{if(Array.isArray(N)){const[U,Z]=N,ue=c>=U.hours&&p>=U.minutes,be=c<Z.hours||c===Z.hours&&p<Z.minutes;if(U.hours<Z.hours){if(ue&&be)return!0}else if(ue||be)return!0}else if(N.hours===c&&N.minutes===p)return!0;return!1});if(-1!==S)return T[S]}return function Qn(n,e,t){const r=(0,u.cg1)(n),a=en([r[u.wAp.DayPeriodsFormat],r[u.wAp.DayPeriodsStandalone]],e);return en(a,t)}(e,i,r)[c<12?0:1];case wt.Eras:return function vt(n,e){return en((0,u.cg1)(n)[u.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,a,n,e,t,r)}}function Ce(n){return function(e,t,r){const i=-1*r,a=$n(t,de.MinusSign),c=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case dn.Short:return(i>=0?"+":"")+Ir(c,2,a)+Ir(Math.abs(i%60),2,a);case dn.ShortGMT:return"GMT"+(i>=0?"+":"")+Ir(c,1,a);case dn.Long:return"GMT"+(i>=0?"+":"")+Ir(c,2,a)+":"+Ir(Math.abs(i%60),2,a);case dn.Extended:return 0===r?"Z":(i>=0?"+":"")+Ir(c,2,a)+":"+Ir(Math.abs(i%60),2,a);default:throw new Error(`Unknown zone width "${n}"`)}}}function sn(n){return ws(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function H(n,e=!1){return function(t,r){let i;if(e){const a=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,c=t.getDate();i=1+Math.floor((c+a)/7)}else{const a=sn(t),c=function Bt(n){const e=ws(n,0,1).getDay();return ws(n,0,1+(e<=4?4:11)-e)}(a.getFullYear()),p=a.getTime()-c.getTime();i=1+Math.round(p/6048e5)}return Ir(i,n,$n(r,de.MinusSign))}}function B(n,e=!1){return function(t,r){return Ir(sn(t).getFullYear(),n,$n(r,de.MinusSign),e)}}const W={};function Q(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Jn(n){return n instanceof Date&&!isNaN(n.valueOf())}class Tr{}let oa=(()=>{class n extends Tr{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(br(r||this.locale)(t)){case ce.Zero:return"zero";case ce.One:return"one";case ce.Two:return"two";case ce.Few:return"few";case ce.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.soG))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Tt(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}class bs{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Cs=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function Ti(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((i,a,c)=>{if(null==i.previousIndex){const p=this._viewContainer.createEmbeddedView(this._template,new bs(null,this._ngForOf,-1,-1),null===c?void 0:c),_=new Dr(i,p);r.push(_)}else if(null==c)this._viewContainer.remove(null===a?void 0:a);else if(null!==a){const p=this._viewContainer.get(a);this._viewContainer.move(p,c);const _=new Dr(i,p);r.push(_)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,a=this._viewContainer.length;i<a;i++){const c=this._viewContainer.get(i);c.context.index=i,c.context.count=a,c.context.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Dr{constructor(e,t){this.record=e,this.view=t}}let Gr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Bi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){on("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){on("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Bi{constructor(){this.$implicit=null,this.ngIf=null}}function on(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}function ji(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,u.AaK)(n)}'`)}class ua{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class nf{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const ud=new nf,rf=new ua;let ca=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,u.QGY)(t))return ud;if((0,u.F4k)(t))return rf;throw ji(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO,16))},n.\u0275pipe=u.Yjl({name:"async",type:n,pure:!1}),n})();const Yu=new u.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let da=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",i,a){var c;if(null==t||""===t||t!=t)return null;try{return Qs(t,r,a||this.locale,null!==(c=null!=i?i:this.defaultTimezone)&&void 0!==c?c:void 0)}catch(p){throw ji(n,p.message)}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.soG,16),u.Y36(Yu,24))},n.\u0275pipe=u.Yjl({name:"date",type:n,pure:!0}),n})(),pd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[{provide:Tr,useClass:oa}]}),n})();function Ar(n){return"server"===n}let cf=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new Ha((0,u.LFG)(oe),window)}),n})();class Ha{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function In(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=si(this.window.history)||si(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function si(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ao{}class So extends class Zn extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){Y||(Y=n)}(new So)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ts(){return Wr=Wr||document.querySelector("base"),Wr?Wr.getAttribute("href"):null}();return null==t?null:function Zl(n){Fn=Fn||document.createElement("a"),Fn.setAttribute("href",n);const e=Fn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Wr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Tt(document.cookie,e)}}let Fn,Wr=null;const qa=new u.OlP("TRANSITION_ID"),oi=[{provide:u.ip1,useFactory:function Sn(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[qa,oe,u.zs3],multi:!0}];class Zi{static init(){(0,u.VLi)(new Zi)}addToWindow(e){u.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const i=u.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const p=function(_){c=c||_,a--,0==a&&r(c)};i.forEach(function(_){_.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Ju=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Ds=new u.OlP("EventManagerPlugins");let ai=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const c=i[a];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ds),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class fa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let no=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),nt=(()=>{class n extends no{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const c=this._doc.createElement("style");c.textContent=a,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach($l),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach($l))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function $l(n){O().remove(n)}const Hl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ga=/%COMP%/g;function ro(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?ro(n,i,t):(i=i.replace(Ga,n),t.push(i))}return t}function bn(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let os=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new zr(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case u.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new nc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case u.ifc.ShadowDom:return new rc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=ro(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ai),u.LFG(nt),u.LFG(u.AFp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class zr{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Hl[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Hl[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Hl[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,i&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,bn(r)):this.eventManager.addEventListener(e,t,bn(r))}}class nc extends zr{constructor(e,t,r,i){super(e),this.component=r;const a=ro(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Ie(n){return"_ngcontent-%COMP%".replace(Ga,n)}(i+"-"+r.id),this.hostAttr=function jt(n){return"_nghost-%COMP%".replace(Ga,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class rc extends zr{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=ro(i.id,i.styles,[]);for(let c=0;c<a.length;c++){const p=document.createElement("style");p.textContent=a[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ka=(()=>{class n extends fa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const io=["alt","control","meta","shift"],li={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ic={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},As={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let $i=(()=>{class n extends fa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="";if(io.forEach(_=>{const E=r.indexOf(_);E>-1&&(r.splice(E,1),c+=_+".")}),c+=a,0!=r.length||0===a.length)return null;const p={};return p.domEventName=i,p.fullKey=c,p}static getEventFullKey(t){let r="",i=function sc(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ic.hasOwnProperty(e)&&(e=ic[e]))}return li[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),io.forEach(a=>{a!=i&&As[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const ko=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:"browser"},{provide:u.g9A,useValue:function xo(){So.makeCurrent(),Zi.init()},multi:!0},{provide:oe,useFactory:function ma(){return(0,u.RDi)(document),document},deps:[]}]),md=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function oc(){return new u.qLn},deps:[]},{provide:Ds,useClass:Ka,multi:!0,deps:[oe,u.R0b,u.Lbi]},{provide:Ds,useClass:$i,multi:!0,deps:[oe]},{provide:os,useClass:os,deps:[ai,nt,u.AFp]},{provide:u.FYo,useExisting:os},{provide:no,useExisting:nt},{provide:nt,useClass:nt,deps:[oe]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b]},{provide:ai,useClass:ai,deps:[Ds,u.R0b]},{provide:Ao,useClass:Ju,deps:[]}];let Ro=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:qa,useExisting:u.AFp},oi]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(n,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:md,imports:[pd,u.hGG]}),n})();"undefined"!=typeof window&&window;var an=F(8996),Kn=F(3269);function ft(...n){const e=(0,Kn.yG)(n);return(0,an.D)(n,e)}var Hi=F(7579);class Ai extends Hi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var tr=F(8306);const{isArray:tl}=Array,{getPrototypeOf:Lg,prototype:No,keys:wd}=Object;function Ss(n){if(1===n.length){const e=n[0];if(tl(e))return{args:e,keys:null};if(function Po(n){return n&&"object"==typeof n&&Lg(n)===No}(e)){const t=wd(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var qi=F(4671),at=F(4004);const{isArray:mf}=Array;function ya(n){return(0,at.U)(e=>function _f(n,e){return mf(e)?n(...e):n(e)}(n,e))}function oo(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Un=F(5403),va=F(9672);function eu(n,e,t){n?(0,va.f)(t,n,e):e()}const ao=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var nl=F(8189);function wa(...n){return function rl(){return(0,nl.J)(1)}()((0,an.D)(n,(0,Kn.yG)(n)))}var mr=F(8421);function il(n){return new tr.y(e=>{(0,mr.Xf)(n()).subscribe(e)})}var Ea=F(515),Fo=F(727),_r=F(4482);function mn(){return(0,_r.e)((n,e)=>{let t=null;n._refCount++;const r=new Un.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ed extends tr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,_r.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Fo.w0;const t=this.getSubject();e.add(this.source.subscribe(new Un.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Fo.w0.EMPTY)}return e}refCount(){return mn()(this)}}function Dn(n,e){return(0,_r.e)((t,r)=>{let i=null,a=0,c=!1;const p=()=>c&&!i&&r.complete();t.subscribe(new Un.Q(r,_=>{null==i||i.unsubscribe();let E=0;const T=a++;(0,mr.Xf)(n(_,T)).subscribe(i=new Un.Q(r,S=>r.next(e?e(_,S,T,E++):S),()=>{i=null,p()}))},()=>{c=!0,p()}))})}var sl=F(5698);function ui(...n){const e=(0,Kn.yG)(n);return(0,_r.e)((t,r)=>{(e?wa(n,t,e):wa(n,t)).subscribe(r)})}function ba(n,e,t,r,i){return(a,c)=>{let p=t,_=e,E=0;a.subscribe(new Un.Q(c,T=>{const S=E++;_=p?n(_,T,S):(p=!0,T),r&&c.next(_)},i&&(()=>{p&&c.next(_),c.complete()})))}}function Kr(n,e){return(0,_r.e)(ba(n,e,arguments.length>=2,!0))}function ci(n,e){return(0,_r.e)((t,r)=>{let i=0;t.subscribe(new Un.Q(r,a=>n.call(e,a,i++)&&r.next(a)))})}function Si(n){return(0,_r.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe(new Un.Q(t,void 0,void 0,c=>{a=(0,mr.Xf)(n(c,Si(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var xn=F(5577),bd=F(576);function cs(n,e){return(0,bd.m)(e)?(0,xn.z)(n,e,1):(0,xn.z)(n,1)}function ln(n){return n<=0?()=>Ea.E:(0,_r.e)((e,t)=>{let r=[];e.subscribe(new Un.Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function yf(n=vf){return(0,_r.e)((e,t)=>{let r=!1;e.subscribe(new Un.Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function vf(){return new ao}function wf(n){return(0,_r.e)((e,t)=>{let r=!1;e.subscribe(new Un.Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ca(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ci((i,a)=>n(i,a,r)):qi.y,(0,sl.q)(1),t?wf(e):yf(()=>new ao))}var Nr=F(8505);function uc(n){return(0,_r.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class di{constructor(e,t){this.id=e,this.url=t}}class Cd extends di{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class kn extends di{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xs extends di{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ol extends di{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ug extends di{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vg extends di{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yr extends di{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ds extends di{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tu extends di{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ia{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ta{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class nu{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Da{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cc{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Id{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dc{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const xt="primary";class Pr{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Lo(n){return new Pr(n)}const Aa="ngNavigationCancelingError";function bf(n){const e=Error("NavigationCancelingError: "+n);return e[Aa]=!0,e}function Dd(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],p=n[a];if(c.startsWith(":"))i[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Gi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Ad(n[i],e[i]))return!1;return!0}function Ad(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function ru(n){return Array.prototype.concat.apply([],n)}function ks(n){return n.length>0?n[n.length-1]:null}function wn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Wi(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,an.D)(Promise.resolve(n)):ft(n)}const xa={exact:function I(n,e,t){if(!pt(n.segments,e.segments)||!z(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!I(n.children[r],e.children[r],t))return!1;return!0},subset:M},lo={exact:function Bg(n,e){return Gi(n,e)},subset:function D(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ad(n[t],e[t]))},ignored:()=>!0};function ou(n,e,t){return xa[t.paths](n.root,e.root,t.matrixParams)&&lo[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function M(n,e,t){return V(n,e,e.segments,t)}function V(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!pt(i,t)||e.hasChildren()||!z(i,t,r))}if(n.segments.length===t.length){if(!pt(n.segments,t)||!z(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!M(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(pt(n.segments,i)&&z(n.segments,i,r)&&n.children[xt])&&V(n.children[xt],e,a,r)}}function z(n,e,t){return e.every((r,i)=>lo[t](n[i].parameters,r.parameters))}class ne{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lo(this.queryParams)),this._queryParamMap}toString(){return nr.serialize(this)}}class ie{constructor(e,t){this.segments=e,this.children=t,this.parent=null,wn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zi(this)}}class We{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Lo(this.parameters)),this._parameterMap}toString(){return hc(this)}}function pt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Ct{}class hi{parse(e){const t=new ZE(e);return new ne(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Or(e.root,!0)}`,r=function by(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Fr(t)}=${Fr(i)}`).join("&"):`${Fr(t)}=${Fr(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Ms(n){return encodeURI(n)}(e.fragment)}`:""}`}}const nr=new hi;function zi(n){return n.segments.map(e=>hc(e)).join("/")}function Or(n,e){if(!n.hasChildren())return zi(n);if(e){const t=n.children[xt]?Or(n.children[xt],!1):"",r=[];return wn(n.children,(i,a)=>{a!==xt&&r.push(`${a}:${Or(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ht(n,e){let t=[];return wn(n.children,(r,i)=>{i===xt&&(t=t.concat(e(r,i)))}),wn(n.children,(r,i)=>{i!==xt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===xt?[Or(n.children[xt],!1)]:[`${i}:${Or(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[xt]?`${zi(n)}/${t[0]}`:`${zi(n)}/(${t.join("//")})`}}function Rs(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fr(n){return Rs(n).replace(/%3B/gi,";")}function al(n){return Rs(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function au(n){return decodeURIComponent(n)}function ll(n){return au(n.replace(/\+/g,"%20"))}function hc(n){return`${al(n.path)}${function Cf(n){return Object.keys(n).map(e=>`;${al(e)}=${al(n[e])}`).join("")}(n.parameters)}`}const ul=/^[^\/()?;=#]+/;function Uo(n){const e=n.match(ul);return e?e[0]:""}const Cy=/^[^=?&#]+/,Sd=/^[^&#]+/;class ZE{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ie([],{}):new ie([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[xt]=new ie(e,t)),r}parseSegment(){const e=Uo(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new We(au(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Uo(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Uo(this.remaining);i&&(r=i,this.capture(r))}e[au(t)]=au(r)}parseQueryParam(e){const t=function jE(n){const e=n.match(Cy);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Iy(n){const e=n.match(Sd);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=ll(t),a=ll(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Uo(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=xt);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[xt]:new ie([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class xd{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=If(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=If(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Tf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Tf(e,this._root).map(t=>t.value)}}function If(n,e){if(n===e.value)return e;for(const t of e.children){const r=If(n,t);if(r)return r}return null}function Tf(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Tf(n,t);if(r.length)return r.unshift(e),r}return[]}class xi{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ka(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Vo extends xd{constructor(e,t){super(e),this.snapshot=t,pc(this,e)}toString(){return this.snapshot.toString()}}function fc(n,e){const t=function Df(n,e){const c=new uu([],{},{},"",{},xt,e,null,n.root,-1,{});return new kd("",new xi(c,[]))}(n,e),r=new Ai([new We("",{})]),i=new Ai({}),a=new Ai({}),c=new Ai({}),p=new Ai(""),_=new lu(r,i,c,p,a,xt,e,t.root);return _.snapshot=t.root,new Vo(new xi(_,[]),t)}class lu{constructor(e,t,r,i,a,c,p,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=p,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,at.U)(e=>Lo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,at.U)(e=>Lo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function cl(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Af(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class uu{constructor(e,t,r,i,a,c,p,_,E,T,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=p,this.routeConfig=_,this._urlSegment=E,this._lastPathIndex=T,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Lo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kd extends xd{constructor(e,t){super(t),this.url=e,pc(this,t)}toString(){return Sf(this._root)}}function pc(n,e){e.value._routerState=n,e.children.forEach(t=>pc(n,t))}function Sf(n){const e=n.children.length>0?` { ${n.children.map(Sf).join(", ")} } `:"";return`${n.value}${e}`}function Rd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Gi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Gi(e.params,t.params)||n.params.next(t.params),function Sa(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Gi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Gi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function gc(n,e){const t=Gi(n.params,e.params)&&function Dt(n,e){return pt(n,e)&&n.every((t,r)=>Gi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||gc(n.parent,e.parent))}function mc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Dy(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return mc(n,r,i);return mc(n,r)})}(n,e,t);return new xi(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>mc(n,p)),c}}const r=function uo(n){return new lu(new Ai(n.url),new Ai(n.params),new Ai(n.queryParams),new Ai(n.fragment),new Ai(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>mc(n,a));return new xi(r,i)}}function Md(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function yc(n){return"object"==typeof n&&null!=n&&n.outlets}function jg(n,e,t,r,i){let a={};return r&&wn(r,(c,p)=>{a[p]=Array.isArray(c)?c.map(_=>`${_}`):`${c}`}),new ne(t.root===n?e:Nd(t.root,n,e),a,i)}function Nd(n,e,t){const r={};return wn(n.children,(i,a)=>{r[a]=i===e?t:Nd(i,e,t)}),new ie(n.segments,r)}class Ay{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Md(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(yc);if(i&&i!==ks(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Pd{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Zg(n,e,t){if(n||(n=new ie([],{})),0===n.segments.length&&n.hasChildren())return xf(n,e,t);const r=function kf(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],p=t[r];if(yc(p))break;const _=`${p}`,E=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&E&&"object"==typeof E&&void 0===E.outlets){if(!du(_,E,c))return a;r+=2}else{if(!du(_,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new ie(n.segments.slice(0,r.pathIndex),{});return a.children[xt]=new ie(n.segments.slice(r.pathIndex),n.children),xf(a,0,i)}return r.match&&0===i.length?new ie(n.segments,{}):r.match&&!n.hasChildren()?cu(n,e,t):r.match?xf(n,0,i):cu(n,e,t)}function xf(n,e,t){if(0===t.length)return new ie(n.segments,{});{const r=function ky(n){return yc(n[0])?n[0].outlets:{[xt]:n}}(t),i={};return wn(r,(a,c)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[c]=Zg(n.children[c],e,a))}),wn(n.children,(a,c)=>{void 0===r[c]&&(i[c]=a)}),new ie(n.segments,i)}}function cu(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(yc(a)){const _=$g(a.outlets);return new ie(r,_)}if(0===i&&Md(t[0])){r.push(new We(n.segments[e].path,Ns(t[0]))),i++;continue}const c=yc(a)?a.outlets[xt]:`${a}`,p=i<t.length-1?t[i+1]:null;c&&p&&Md(p)?(r.push(new We(c,Ns(p))),i+=2):(r.push(new We(c,{})),i++)}return new ie(r,{})}function $g(n){const e={};return wn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=cu(new ie([],{}),0,t))}),e}function Ns(n){const e={};return wn(n,(t,r)=>e[r]=`${t}`),e}function du(n,e,t){return n==t.path&&Gi(e,t.parameters)}class Rf{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Rd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ka(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),wn(i,(a,c)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ka(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ka(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=ka(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Id(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Da(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Rd(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),Rd(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=function qg(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=p?p.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=_,c.outlet&&c.outlet.activateWith(i,_),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Gg{constructor(e,t){this.routes=e,this.module=t}}function dl(n){return"function"==typeof n}function Ps(n){return n instanceof ne}const hu=Symbol("INITIAL_VALUE");function hl(){return Dn(n=>function Oo(...n){const e=(0,Kn.yG)(n),t=(0,Kn.jO)(n),{args:r,keys:i}=Ss(n);if(0===r.length)return(0,an.D)([],e);const a=new tr.y(function us(n,e,t=qi.y){return r=>{eu(e,()=>{const{length:i}=n,a=new Array(i);let c=i,p=i;for(let _=0;_<i;_++)eu(e,()=>{const E=(0,an.D)(n[_],e);let T=!1;E.subscribe(new Un.Q(r,S=>{a[_]=S,T||(T=!0,p--),p||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>oo(i,c):qi.y));return t?a.pipe(ya(t)):a}(n.map(e=>e.pipe((0,sl.q)(1),ui(hu)))).pipe(Kr((e,t)=>{let r=!1;return t.reduce((i,a,c)=>i!==hu?i:(a===hu&&(r=!0),r||!1!==a&&c!==t.length-1&&!Ps(a)?i:a),e)},hu),ci(e=>e!==hu),(0,at.U)(e=>Ps(e)?e:!0===e),(0,sl.q)(1)))}class My{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new fu,this.attachRef=null}}class fu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new My,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Od=(()=>{class n{constructor(t,r,i,a,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.name=a||xt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,_=new Wg(t,p,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(fu),u.Y36(u.s_b),u.Y36(u._Vd),u.$8M("name"),u.Y36(u.sBO))},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Wg{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===lu?this.route:e===fu?this.childContexts:this.parent.get(e,t)}}let wc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"router-outlet")},directives:[Od],encapsulation:2}),n})();function zg(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Kg(r,fl(e,r))}}function Kg(n,e){n.children&&zg(n.children,e)}function fl(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Yn(n){const e=n.children&&n.children.map(Yn),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==xt&&(t.component=wc),t}function hs(n){return n.outlet||xt}function Fd(n,e){const t=n.filter(r=>hs(r)===e);return t.push(...n.filter(r=>hs(r)!==e)),t}const Ld={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function pl(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Ld):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(e.matcher||Dd)(t,n,e);if(!a)return Object.assign({},Ld);const c={};wn(a.posParams,(_,E)=>{c[E]=_.path});const p=a.consumed.length>0?Object.assign(Object.assign({},c),a.consumed[a.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:p,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function Ud(n,e,t,r,i="corrected"){if(t.length>0&&function Py(n,e,t){return t.some(r=>Ec(n,e,r)&&hs(r)!==xt)}(n,t,r)){const c=new ie(e,function Nf(n,e,t,r){const i={};i[xt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&hs(a)!==xt){const c=new ie([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[hs(a)]=c}return i}(n,e,r,new ie(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function Oy(n,e,t){return t.some(r=>Ec(n,e,r))}(n,t,r)){const c=new ie(n.segments,function Ny(n,e,t,r,i,a){const c={};for(const p of r)if(Ec(n,t,p)&&!i[hs(p)]){const _=new ie([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,c[hs(p)]=_}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const a=new ie(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Ec(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Fy(n,e,t,r){return!!(hs(n)===r||r!==xt&&Ec(e,t,n))&&("**"===n.path||pl(e,n,t).matched)}function pu(n,e,t){return 0===e.length&&!n.children[t]}class yr{constructor(e){this.segmentGroup=e||null}}class Vd{constructor(e){this.urlTree=e}}function bc(n){return new tr.y(e=>e.error(new yr(n)))}function Bd(n){return new tr.y(e=>e.error(new Vd(n)))}function xr(n){return new tr.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class Of{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(u.h0i)}apply(){const e=Ud(this.urlTree.root,[],[],this.config).segmentGroup,t=new ie(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,xt).pipe((0,at.U)(a=>this.createUrlTree(jd(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Si(a=>{if(a instanceof Vd)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof yr?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,xt).pipe((0,at.U)(i=>this.createUrlTree(jd(i),e.queryParams,e.fragment))).pipe(Si(i=>{throw i instanceof yr?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new ie([],{[xt]:e}):e;return new ne(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,at.U)(a=>new ie([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,an.D)(i).pipe(cs(a=>{const c=r.children[a],p=Fd(t,a);return this.expandSegmentGroup(e,p,c,a).pipe((0,at.U)(_=>({segment:_,outlet:a})))}),Kr((a,c)=>(a[c.outlet]=c.segment,a),{}),function Ef(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ci((i,a)=>n(i,a,r)):qi.y,ln(1),t?wf(e):yf(()=>new ao))}())}expandSegment(e,t,r,i,a,c){return(0,an.D)(r).pipe(cs(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,a,c).pipe(Si(E=>{if(E instanceof yr)return ft(null);throw E}))),Ca(p=>!!p),Si((p,_)=>{if(p instanceof ao||"EmptyError"===p.name){if(pu(t,i,a))return ft(new ie([],{}));throw new yr(t)}throw p}))}expandSegmentAgainstRoute(e,t,r,i,a,c,p){return Fy(i,t,a,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c):bc(t):bc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Bd(a):this.lineralizeSegments(r,a).pipe((0,xn.z)(c=>{const p=new ie(c,{});return this.expandSegment(e,p,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:p,consumedSegments:_,lastChild:E,positionalParamSegments:T}=pl(t,i,a);if(!p)return bc(t);const S=this.applyRedirectCommands(_,i.redirectTo,T);return i.redirectTo.startsWith("/")?Bd(S):this.lineralizeSegments(i,S).pipe((0,xn.z)(N=>this.expandSegment(e,t,r,N.concat(a.slice(E)),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?ft(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,at.U)(N=>(r._loadedConfig=N,new ie(i,{})))):ft(new ie(i,{}));const{matched:c,consumedSegments:p,lastChild:_}=pl(t,r,i);if(!c)return bc(t);const E=i.slice(_);return this.getChildConfig(e,r,i).pipe((0,xn.z)(S=>{const N=S.module,U=S.routes,{segmentGroup:Z,slicedSegments:ue}=Ud(t,p,E,U),be=new ie(Z.segments,Z.children);if(0===ue.length&&be.hasChildren())return this.expandChildren(N,U,be).pipe((0,at.U)(ze=>new ie(p,ze)));if(0===U.length&&0===ue.length)return ft(new ie(p,{}));const Ke=hs(r)===a;return this.expandSegment(N,be,U,ue,Ke?xt:a,!0).pipe((0,at.U)(ct=>new ie(p.concat(ct.segments),ct.children)))}))}getChildConfig(e,t,r){return t.children?ft(new Gg(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ft(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,xn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,at.U)(a=>(t._loadedConfig=a,a))):function Cc(n){return new tr.y(e=>e.error(bf(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):ft(new Gg([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?ft(i.map(c=>{const p=e.get(c);let _;if(function Mf(n){return n&&dl(n.canLoad)}(p))_=p.canLoad(t,r);else{if(!dl(p))throw new Error("Invalid CanLoad guard");_=p(t,r)}return Wi(_)})).pipe(hl(),(0,Nr.b)(c=>{if(!Ps(c))return;const p=bf(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw p.url=c,p}),(0,at.U)(c=>!0===c)):ft(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ft(r);if(i.numberOfChildren>1||!i.children[xt])return xr(e.redirectTo);i=i.children[xt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new ne(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return wn(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[a]=t[p]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return wn(t.children,(p,_)=>{c[_]=this.createSegmentGroup(e,p,r,i)}),new ie(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function jd(n){const e={};for(const r of Object.keys(n.children)){const a=jd(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function Ff(n){if(1===n.numberOfChildren&&n.children[xt]){const e=n.children[xt];return new ie(n.segments.concat(e.segments),e.children)}return n}(new ie(n.segments,e))}class gu{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Zd{constructor(e,t){this.component=e,this.route=t}}function Yg(n,e,t){const r=n._root;return gl(r,e?e._root:null,t,[r.value])}function Ic(n,e,t){const r=function Vy(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function gl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=ka(e);return n.children.forEach(c=>{(function By(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const _=function jy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!pt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!pt(n.url,e.url)||!Gi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!gc(n,e)||!Gi(n.queryParams,e.queryParams);default:return!gc(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new gu(r)):(a.data=c.data,a._resolvedData=c._resolvedData),gl(n,e,a.component?p?p.children:null:t,r,i),_&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new Zd(p.outlet.component,c))}else c&&ml(e,p,i),i.canActivateChecks.push(new gu(r)),gl(n,null,a.component?p?p.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),wn(a,(c,p)=>ml(c,t.getContext(p),i)),i}function ml(n,e,t){const r=ka(n),i=n.value;wn(r,(a,c)=>{ml(a,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new Zd(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Vf{}function $d(n){return new tr.y(e=>e.error(n))}class Bf{constructor(e,t,r,i,a,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=c}recognize(){const e=Ud(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,xt);if(null===t)return null;const r=new uu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},xt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new xi(r,t),a=new kd(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=cl(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const c=t.children[a],p=Fd(e,a),_=this.processSegmentGroup(p,c,a);if(null===_)return null;r.push(..._)}const i=jf(r);return function Gy(n){n.sort((e,t)=>e.value.outlet===xt?-1:t.value.outlet===xt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const c=this.processSegmentAgainstRoute(a,t,r,i);if(null!==c)return c}return pu(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Fy(e,t,r,i))return null;let a,c=[],p=[];if("**"===e.path){const U=r.length>0?ks(r).parameters:{};a=new uu(r,U,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Os(e),hs(e),e.component,e,Hd(t),Bo(t)+r.length,Xg(e))}else{const U=pl(t,e,r);if(!U.matched)return null;c=U.consumedSegments,p=r.slice(U.lastChild),a=new uu(c,U.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Os(e),hs(e),e.component,e,Hd(t),Bo(t)+c.length,Xg(e))}const _=function Ki(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:E,slicedSegments:T}=Ud(t,c,p,_.filter(U=>void 0===U.redirectTo),this.relativeLinkResolution);if(0===T.length&&E.hasChildren()){const U=this.processChildren(_,E);return null===U?null:[new xi(a,U)]}if(0===_.length&&0===T.length)return[new xi(a,[])];const S=hs(e)===i,N=this.processSegment(_,E,T,S?xt:i);return null===N?null:[new xi(a,N)]}}function mu(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function jf(n){const e=[],t=new Set;for(const r of n){if(!mu(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=jf(r.children);e.push(new xi(r.value,i))}return e.filter(r=>!t.has(r))}function Hd(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Bo(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Os(n){return n.data||{}}function Xg(n){return n.resolve||{}}function Dc(n){return Dn(e=>{const t=n(e);return t?(0,an.D)(t).pipe((0,at.U)(()=>e)):ft(e)})}class _l extends class fi{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const _u=new u.OlP("ROUTES");class $f{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,at.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=a.create(e);return new Gg(ru(c.injector.get(_u,void 0,u.XFs.Self|u.XFs.Optional)).map(Yn),c)}),Si(a=>{throw t._loader$=void 0,a}));return t._loader$=new Ed(i,()=>new Hi.x).pipe(mn()),t._loader$}loadModuleFactory(e){return Wi(e()).pipe((0,xn.z)(t=>t instanceof u.YKP?ft(t):(0,an.D)(this.compiler.compileModuleAsync(t))))}}class yl{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Hf(n){throw n}function zy(n,e,t){return e.parse("/")}function vl(n,e){return ft(null)}const Ac={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},tm={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let pi=(()=>{class n{constructor(t,r,i,a,c,p,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Hi.x,this.errorHandler=Hf,this.malformedUriErrorHandler=zy,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:vl,afterPreactivation:vl},this.urlHandlingStrategy=new yl,this.routeReuseStrategy=new _l,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(u.h0i),this.console=c.get(u.c2e);const S=c.get(u.R0b);this.isNgZoneEnabled=S instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function su(){return new ne(new ie([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new $f(c,p,N=>this.triggerEvent(new Ia(N)),N=>this.triggerEvent(new Ta(N))),this.routerState=fc(this.currentUrlTree,this.rootComponentType),this.transitions=new Ai({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ci(i=>0!==i.id),(0,at.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Dn(i=>{let a=!1,c=!1;return ft(i).pipe((0,Nr.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Dn(p=>{const _=this.browserUrlTree.toString(),E=!this.navigated||p.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||E)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return qd(p.source)&&(this.browserUrlTree=p.extractedUrl),ft(p).pipe(Dn(S=>{const N=this.transitions.getValue();return r.next(new Cd(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),N!==this.transitions.getValue()?Ea.E:Promise.resolve(S)}),function Ly(n,e,t,r){return Dn(i=>function Pf(n,e,t,r,i){return new Of(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,at.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Nr.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function WE(n,e,t,r,i){return(0,xn.z)(a=>function qy(n,e,t,r,i="emptyOnly",a="legacy"){try{const c=new Bf(n,e,t,r,i,a).recognize();return null===c?$d(new Vf):ft(c)}catch(c){return $d(c)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,at.U)(c=>Object.assign(Object.assign({},a),{targetSnapshot:c}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Nr.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(U,S)}this.browserUrlTree=S.urlAfterRedirects}const N=new Ug(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(N)}));if(E&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:N,extractedUrl:U,source:Z,restoredState:ue,extras:be}=p,Ke=new Cd(N,this.serializeUrl(U),Z,ue);r.next(Ke);const qe=fc(U,this.rootComponentType).snapshot;return ft(Object.assign(Object.assign({},p),{targetSnapshot:qe,urlAfterRedirects:U,extras:Object.assign(Object.assign({},be),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),Ea.E}),Dc(p=>{const{targetSnapshot:_,id:E,extractedUrl:T,rawUrl:S,extras:{skipLocationChange:N,replaceUrl:U}}=p;return this.hooks.beforePreactivation(_,{navigationId:E,appliedUrlTree:T,rawUrlTree:S,skipLocationChange:!!N,replaceUrl:!!U})}),(0,Nr.b)(p=>{const _=new Vg(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),(0,at.U)(p=>Object.assign(Object.assign({},p),{guards:Yg(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function Lf(n,e){return(0,xn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?ft(Object.assign(Object.assign({},t),{guardsResult:!0})):function Qg(n,e,t,r){return(0,an.D)(n).pipe((0,xn.z)(i=>function Uf(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?ft(a.map(p=>{const _=Ic(p,e,i);let E;if(function Ry(n){return n&&dl(n.canDeactivate)}(_))E=Wi(_.canDeactivate(n,e,t,r));else{if(!dl(_))throw new Error("Invalid CanDeactivate guard");E=Wi(_(n,e,t,r))}return E.pipe(Ca())})).pipe(hl()):ft(!0)}(i.component,i.route,t,e,r)),Ca(i=>!0!==i,!0))}(c,r,i,n).pipe((0,xn.z)(p=>p&&function HE(n){return"boolean"==typeof n}(p)?function Zy(n,e,t,r){return(0,an.D)(e).pipe(cs(i=>wa(function $y(n,e){return null!==n&&e&&e(new nu(n)),ft(!0)}(i.route.parent,r),function Tc(n,e){return null!==n&&e&&e(new cc(n)),ft(!0)}(i.route,r),function Jg(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function Uy(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>il(()=>ft(c.guards.map(_=>{const E=Ic(_,c.node,t);let T;if(function qE(n){return n&&dl(n.canActivateChild)}(E))T=Wi(E.canActivateChild(r,n));else{if(!dl(E))throw new Error("Invalid CanActivateChild guard");T=Wi(E(r,n))}return T.pipe(Ca())})).pipe(hl())));return ft(a).pipe(hl())}(n,i.path,t),function Hy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ft(!0);const i=r.map(a=>il(()=>{const c=Ic(a,e,t);let p;if(function vc(n){return n&&dl(n.canActivate)}(c))p=Wi(c.canActivate(e,n));else{if(!dl(c))throw new Error("Invalid CanActivate guard");p=Wi(c(e,n))}return p.pipe(Ca())}));return ft(i).pipe(hl())}(n,i.route,t))),Ca(i=>!0!==i,!0))}(r,a,n,e):ft(p)),(0,at.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,Nr.b)(p=>{if(Ps(p.guardsResult)){const E=bf(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw E.url=p.guardsResult,E}const _=new Yr(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(_)}),ci(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),Dc(p=>{if(p.guards.canActivateChecks.length)return ft(p).pipe((0,Nr.b)(_=>{const E=new ds(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(E)}),Dn(_=>{let E=!1;return ft(_).pipe(function jo(n,e){return(0,xn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ft(t);let a=0;return(0,an.D)(i).pipe(cs(c=>function Wy(n,e,t,r){return function co(n,e,t,r){const i=Object.keys(n);if(0===i.length)return ft({});const a={};return(0,an.D)(i).pipe((0,xn.z)(c=>function Zf(n,e,t,r){const i=Ic(n,e,r);return Wi(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,Nr.b)(p=>{a[c]=p}))),ln(1),(0,xn.z)(()=>Object.keys(a).length===i.length?ft(a):Ea.E))}(n._resolve,n,e,r).pipe((0,at.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),cl(n,t).resolve),null)))}(c.route,r,n,e)),(0,Nr.b)(()=>a++),ln(1),(0,xn.z)(c=>a===i.length?ft(t):Ea.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Nr.b)({next:()=>E=!0,complete:()=>{E||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,Nr.b)(_=>{const E=new tu(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(E)}))}),Dc(p=>{const{targetSnapshot:_,id:E,extractedUrl:T,rawUrl:S,extras:{skipLocationChange:N,replaceUrl:U}}=p;return this.hooks.afterPreactivation(_,{navigationId:E,appliedUrlTree:T,rawUrlTree:S,skipLocationChange:!!N,replaceUrl:!!U})}),(0,at.U)(p=>{const _=function Ty(n,e,t){const r=mc(n,e._root,t?t._root:void 0);return new Vo(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:_})}),(0,Nr.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,at.U)(r=>(new Rf(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,Nr.b)({next(){a=!0},complete(){a=!0}}),uc(()=>{var p;a||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===i.id&&(this.currentNavigation=null)}),Si(p=>{if(c=!0,function Td(n){return n&&n[Aa]}(p)){const _=Ps(p.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const E=new xs(i.id,this.serializeUrl(i.extractedUrl),p.message);r.next(E),_?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||qd(i.source)};this.scheduleNavigation(T,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new ol(i.id,this.serializeUrl(i.extractedUrl),p);r.next(_);try{i.resolve(this.errorHandler(p))}catch(E){i.reject(E)}}return Ea.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const _=Object.assign({},c);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const p=this.parseUrl(t.url);this.scheduleNavigation(p,r,c,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){zg(t),this.config=t.map(Yn),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:p,preserveFragment:_}=r,E=i||this.routerState.root,T=_?this.currentUrlTree.fragment:c;let S=null;switch(p){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),function _c(n,e,t,r,i){if(0===t.length)return jg(e.root,e.root,e,r,i);const a=function $E(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Ay(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const p={};return wn(a.outlets,(_,E)=>{p[E]="string"==typeof _?_.split("/"):_}),[...i,{outlets:p}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((p,_)=>{0==_&&"."===p||(0==_&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,a]},[]);return new Ay(t,e,r)}(t);if(a.toRoot())return jg(e.root,new ie([],{}),e,r,i);const c=function Sy(n,e,t){if(n.isAbsolute)return new Pd(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new Pd(a,a===e.root,0)}const r=Md(n.commands[0])?0:1;return function xy(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Pd(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),p=c.processChildren?xf(c.segmentGroup,c.index,a.commands):Zg(c.segmentGroup,c.index,a.commands);return jg(c.segmentGroup,p,e,r,i)}(E,this.currentUrlTree,t,S,null!=T?T:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ps(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function qf(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},Ac):!1===r?Object.assign({},tm):r,Ps(t))return ou(this.currentUrlTree,t,i);const a=this.parseUrl(t);return ou(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new kn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,c){var p,_,E;if(this.disposed)return Promise.resolve(!1);const T=this.transitions.value,S=qd(r)&&T&&!qd(T.source),N=T.rawUrl.toString()===t.toString(),U=T.id===(null===(p=this.currentNavigation)||void 0===p?void 0:p.id);if(S&&N&&U)return Promise.resolve(!0);let ue,be,Ke;c?(ue=c.resolve,be=c.reject,Ke=c.promise):Ke=new Promise((ze,Mt)=>{ue=ze,be=Mt});const qe=++this.navigationId;let ct;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),ct=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(_=this.browserPageId)&&void 0!==_?_:0:(null!==(E=this.browserPageId)&&void 0!==E?E:0)+1):ct=0,this.setTransition({id:qe,targetPageId:ct,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:ue,reject:be,promise:Ke,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ke.catch(ze=>Promise.reject(ze))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new xs(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function qd(n){return"imperative"!==n}let y=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=c,this.commands=null,this.onChanges=new Hi.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:g(this.skipLocationChange),replaceUrl:g(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:g(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(pi),u.Y36(lu),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&u.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),n})(),f=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Hi.x,this.subscription=t.events.subscribe(a=>{a instanceof kn&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,c){if(0!==t||r||i||a||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const p={skipLocationChange:g(this.skipLocationChange),replaceUrl:g(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:g(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(pi),u.Y36(lu),u.Y36(Fe))},n.\u0275dir=u.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&u.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&u.uIk("target",r.target)("href",r.href,u.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),n})();function g(n){return""===n||!!n}class k{}class J{preload(e,t){return ft(null)}}let Re=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new $f(i,r,_=>t.triggerEvent(new Ia(_)),_=>t.triggerEvent(new Ta(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(ci(t=>t instanceof kn),cs(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(u.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const c=a._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,an.D)(i).pipe((0,nl.J)(),(0,at.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?ft(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,xn.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pi),u.LFG(u.Sil),u.LFG(u.zs3),u.LFG(k))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Cd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof kn&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof dc&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new dc(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Xe=new u.OlP("ROUTER_CONFIGURATION"),qt=new u.OlP("ROUTER_FORROOT_GUARD"),Vn=[st,{provide:Ct,useClass:hi},{provide:pi,useFactory:function Wf(n,e,t,r,i,a,c={},p,_){const E=new pi(null,n,e,t,r,i,ru(a));return p&&(E.urlHandlingStrategy=p),_&&(E.routeReuseStrategy=_),function zf(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,E),c.enableTracing&&E.events.subscribe(T=>{var S,N;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${T.constructor.name}`),console.log(T.toString()),console.log(T),null===(N=console.groupEnd)||void 0===N||N.call(console)}),E},deps:[Ct,fu,st,u.zs3,u.Sil,_u,Xe,[class Fs{},new u.FiY],[class em{},new u.FiY]]},fu,{provide:lu,useFactory:function kc(n){return n.routerState.root},deps:[pi]},Re,J,class j{preload(e,t){return t().pipe(Si(()=>ft(null)))}},{provide:Xe,useValue:{enableTracing:!1}}];function Zo(){return new u.PXZ("Router",pi)}let yu=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Vn,xc(t),{provide:qt,useFactory:nm,deps:[[pi,new u.FiY,new u.tp0]]},{provide:Xe,useValue:r||{}},{provide:Fe,useFactory:Sc,deps:[ae,[new u.tBr(De),new u.FiY],Xe]},{provide:Se,useFactory:Gf,deps:[pi,cf,Xe]},{provide:k,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:J},{provide:u.PXZ,multi:!0,useFactory:Zo},[Rc,{provide:u.ip1,multi:!0,useFactory:Gd,deps:[Rc]},{provide:Kf,useFactory:vu,deps:[Rc]},{provide:u.tb,multi:!0,useExisting:Kf}]]}}static forChild(t){return{ngModule:n,providers:[xc(t)]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(qt,8),u.LFG(pi,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function Gf(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Se(n,e,t)}function Sc(n,e,t={}){return t.useHash?new Ne(n,e):new Le(n,e)}function nm(n){return"guarded"}function xc(n){return[{provide:u.deG,multi:!0,useValue:n},{provide:_u,multi:!0,useValue:n}]}let Rc=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Hi.x}appInitializer(){return this.injector.get(q,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(p=>r=p),a=this.injector.get(pi),c=this.injector.get(Xe);return"disabled"===c.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?ft(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Xe),i=this.injector.get(Re),a=this.injector.get(Se),c=this.injector.get(pi),p=this.injector.get(u.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),a.init(),c.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Gd(n){return n.appInitializer.bind(n)}function vu(n){return n.bootstrapListener.bind(n)}const Kf=new u.OlP("Router Initializer");var Mc=F(4986),Yf=F(3532);function RD(n,e){if(1&n&&u._UZ(0,"img",6),2&n){const t=u.oxw().$implicit;u.Q6J("src",t.src,u.LSH)}}function KE(n,e){if(1&n&&(u.TgZ(0,"div",7),u._UZ(1,"img",8),u.qZA()),2&n){const t=u.oxw().$implicit;u.xp6(1),u.Q6J("src",t.src,u.LSH)}}function Yy(n,e){if(1&n&&(u.ynx(0),u.TgZ(1,"div",3),u.YNc(2,RD,1,1,"img",4),u.qZA(),u.YNc(3,KE,2,1,"ng-template",null,5,u.W1O),u.BQk()),2&n){const t=e.index,r=u.MAs(4);u.xp6(2),u.Q6J("ngIf",0==t)("ngIfElse",r)}}let YE=(()=>{class n{constructor(){}ngOnInit(){this.observableCarousel$=function kD(n=0,e=Mc.z){return n<0&&(n=0),function zE(n=0,e,t=Mc.P){let r=-1;return null!=e&&((0,Yf.K)(e)?t=e:r=e),new tr.y(i=>{let a=function xD(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let c=0;return t.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},a)})}(n,n,e)}(3e3),this.observableCarousel$.subscribe(t=>{this.slides.push(this.slides.shift())})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-carousel"]],inputs:{slides:"slides"},decls:3,vars:1,consts:[[1,"flex","flex-1","items-center","justify-center","py-6","px-4"],[1,"relative","h-40","w-96","overflow-hidden","border-1"],[4,"ngFor","ngForOf"],[1,"duration-1000","ease-in-out"],["class","absolute w-full h-full top-0 left-0 object-scale-down border-1 hover:scale-105",3,"src",4,"ngIf","ngIfElse"],["hidden",""],[1,"absolute","w-full","h-full","top-0","left-0","object-scale-down","border-1","hover:scale-105",3,"src"],[1,"duration-700","ease-in-out"],[1,"shadow-md","absolute","hidden","w-full","h-full","top-0","left-0","object-scale-down","border-1","hover:scale-105",3,"src"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.YNc(2,Yy,5,2,"ng-container",2),u.qZA(),u.qZA()),2&t&&(u.xp6(2),u.Q6J("ngForOf",r.slides))},directives:[Cs,Gr],encapsulation:2}),n})(),AR=(()=>{class n{constructor(){this.slides=[{src:"/assets/images/greenMag.jpeg"},{src:"/assets/images/guyaMag.png"},{src:"/assets/images/greenMag.jpeg"},{src:"/assets/images/guyaMag.png"}]}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-about-page"]],decls:109,vars:1,consts:[[1,"container","min-w-full"],[1,"md:inline-flex","block","min-w-full","min-h-screen"],[1,"bg-primary-700","md:w-3/5","w-full","px-12"],[1,"flex","flex-col","justify-between","items-start","md:py-12"],[1,"text-7xl","font-title","font-extrabold","text-primary-50","leading-snug","md:mt-0","mt-12"],["routerLink","/"],[1,"my-6","text-left","text-2xl","font-sans","font-medium","text-primary-100","leading-snug"],["target","_blank","href","https://fr.wikipedia.org/wiki/Torreilles",1,"text-secondary-600","font-sans","font-medium"],[1,"inline-flex","justify-center","items-start","relative","mt-6"],[1,"text-2xl","md:text-3xl","font-sans","font-medium","text-primary-100","leading-snug","pr-2"],["xmlns","http://www.w3.org/2000/svg","width","52","height","52","fill","#fafafa","viewBox","0 0 256 256",1,"absolute","-top-2","-right-16"],["d","M128,216S28,160,28,92A52,52,0,0,1,128,72h0A52,52,0,0,1,228,92C228,160,128,216,128,216Z","opacity","0.2"],["points","32 128 72 128 88 104 120 152 136 128 160 128","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M28.1,96c-.1-1.3-.1-2.7-.1-4A52,52,0,0,1,128,72h0A52,52,0,0,1,228,92c0,68-100,124-100,124s-39.9-22.4-69.3-56","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"flex"],[1,"list-disc","list-inside","text-lg","text-sans","font-thin","text-primary-200","px-4","py-2"],[1,"py-2"],[1,"font-medium"],[1,"text-xl","text-left","font-sans","font-medium","text-primary-100","leading-snug","pr-2"],["xmlns","http://www.w3.org/2000/svg","width","52","height","52","fill","#fafafa","viewBox","0 0 256 256",1,"absolute","top-0","md:-right-0","-right-11"],["d","M132.5,181.2A64,64,0,1,0,194.7,69.9a8.6,8.6,0,0,1-4-4.2,68,68,0,0,0-125.4,0,8.6,8.6,0,0,1-4,4.2,64,64,0,1,0,62.2,111.3A8.2,8.2,0,0,1,132.5,181.2Z","opacity","0.2"],["x1","128","y1","232","x2","128","y2","88","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","128","y1","152","x2","80","y2","128","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","128","y1","128","x2","176","y2","104","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M132.5,181.2A64,64,0,1,0,194.7,69.9a8.6,8.6,0,0,1-4-4.2,68,68,0,0,0-125.4,0,8.6,8.6,0,0,1-4,4.2,64,64,0,1,0,62.2,111.3A8.2,8.2,0,0,1,132.5,181.2Z","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"flex","items-center","justify-center"],["routerLink","/contact",1,"my-16","py-6","px-8","bg-secondary-600","hover:bg-secondary-500","rounded-lg","leading-none","flex","items-center","text","divide-x","divide-secondary-50","text-xl","shadow-md"],[1,"text-secondary-50","pr-6","font-sans","transition","duration-200"],[1,"flex","items-center","space-x-5","pl-6","animate-tilt"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","#fafafa","viewBox","0 0 256 256"],["d","M192,120,136,64l26.3-26.3a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4Z","opacity","0.2"],["d","M96,216H48a8,8,0,0,1-8-8V163.3a7.9,7.9,0,0,1,2.3-5.6l120-120a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4Z","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","136","y1","64","x2","192","y2","120","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["points","216 216 96 216 40.5 160.5","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","164","y1","92","x2","68","y2","188","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"bg-primary-50","md:w-2/5","w-full","border-t-4","md:border-t-0","md:border-l-4","border-secondary-500","px-12","pb-12"],[1,"flex","flex-col","items-center","justify-center","mt-12"],[1,"inline-flex","justify-center","items-center","relative"],[1,"text-3xl","font-sans","font-medium","text-primary-400","leading-snug","pr-2"],["xmlns","http://www.w3.org/2000/svg","width","52","height","52","fill","#911011","viewBox","0 0 256 256",1,"absolute","-top-4","-right-16"],["d","M120,56,60.3,78.4a8.1,8.1,0,0,0-5.1,6.2L32,224l139.5-23.2a7.9,7.9,0,0,0,6.1-5.1L200,136Zm-4,104a20,20,0,1,1,20-20A20.1,20.1,0,0,1,116,160Z","opacity","0.2"],["cx","116","cy","140","r","20","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","32","y1","224","x2","101.9","y2","154.1","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M32,224l139.5-23.2a7.9,7.9,0,0,0,6.1-5.1L200,136,120,56,60.3,78.4a8.1,8.1,0,0,0-5.1,6.2Z","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M200,136l26.3-26.3a8,8,0,0,0,0-11.4L157.7,29.7a8,8,0,0,0-11.4,0L120,56","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"text-primary-700","text-lg","font-sans","font-normal","leading-snug","mt-4"],["href","/articles",1,"mt-8","inline-flex","justify-center","items-center","border-2","border-primary-700","border-dashed","px-8","py-4","rounded-full","hover:bg-primary-100","hover:border-solid"],[1,"w-64","text-2xl","text-center","font-sans","font-semibold","text-primary-700","leading-snug","pr-2"],["xmlns","http://www.w3.org/2000/svg","width","36","height","36","fill","#911011","viewBox","0 0 256 256",1,"hidden","md:block","w-8"],["cx","128","cy","128","r","96","opacity","0.2"],["cx","128","cy","128","r","96","fill","none","stroke","#911011","stroke-miterlimit","10","stroke-width","16"],["points","134.1 161.9 168 128 134.1 94.1","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","88","y1","128","x2","168","y2","128","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"flex","flex-col","items-center","justify-center","mt-16"],["d","M78,201.3,45.1,228.9A8,8,0,0,1,32,222.8V64a8,8,0,0,1,8-8H216a8,8,0,0,1,8,8V192a8,8,0,0,1-8,8H81.7Z","opacity","0.2"],["d","M77.4,201.9l-32.3,27A8,8,0,0,1,32,222.8V64a8,8,0,0,1,8-8H216a8,8,0,0,1,8,8V192a8,8,0,0,1-8,8H82.5A7.8,7.8,0,0,0,77.4,201.9Z","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"text-primary-600","text-lg","font-sans","font-normal","leading-snug","mt-4"],[1,"text-3xl","text-center","font-sans","font-medium","text-primary-400","leading-snug","pr-2"],["xmlns","http://www.w3.org/2000/svg","width","52","height","52","fill","#911011","viewBox","0 0 256 256",1,"absolute","md:top-0","md:-right-14","-right-5","top-4"],["d","M200,152.9l-36.8,36.8a8.5,8.5,0,0,1-7.6,2.1l-58-14.5a8,8,0,0,1-2.9-1.5L40,133.1,72.6,71.8l51.3-15a8,8,0,0,1,5.5.4L164,72.9H143.3a7.9,7.9,0,0,0-5.6,2.3L98.5,114.3a8.1,8.1,0,0,0,.9,12.1l5.4,4.1a32.1,32.1,0,0,0,38.4,0l12.8-9.6Z","opacity","0.2"],["d","M240.7,121.8,216,134.1,184,72.9l25-12.5a7.9,7.9,0,0,1,10.6,3.4l24.6,47.1A8,8,0,0,1,240.7,121.8Z","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M40,133.1,15.3,120.7a7.9,7.9,0,0,1-3.5-10.8L36.4,62.8A8,8,0,0,1,47,59.3L72,71.8Z","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M216,134.1l-16,18.8-36.8,36.8a8.5,8.5,0,0,1-7.6,2.1l-58-14.5a8,8,0,0,1-2.9-1.5L40,133.1","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M200,152.9l-44-32-12.8,9.6a32.1,32.1,0,0,1-38.4,0l-5.4-4.1a8.1,8.1,0,0,1-.9-12.1l39.2-39.1a7.9,7.9,0,0,1,5.6-2.3H184","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M72.6,71.8l51.3-15a8,8,0,0,1,5.5.4L164,72.9","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M112,212.9l-30.1-7.6a7.4,7.4,0,0,1-3.3-1.7L56,184","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"container"],[3,"slides"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"div",3),u.TgZ(4,"h1",4),u.TgZ(5,"a",5),u._uU(6,"SaCh'M"),u.qZA(),u._UZ(7,"br"),u.qZA(),u.TgZ(8,"h2",6),u._uU(9," Forte de 10 ann\xe9es d'exp\xe9rience, implant\xe9e \xe0 "),u.TgZ(10,"a",7),u._uU(11,"Torreilles (66)"),u.qZA(),u._uU(12," au pied des Pyr\xe9n\xe9es, l'agence accompagne ses clients dans la r\xe9alisation de leurs outils de communication interne ou externe ainsi que dans la r\xe9daction de leurs contenus. "),u.qZA(),u.TgZ(13,"div",8),u.TgZ(14,"h2",9),u._uU(15," Notre coeur de m\xe9tier "),u._UZ(16,"br"),u.qZA(),u.O4$(),u.TgZ(17,"svg",10),u._UZ(18,"path",11),u._UZ(19,"polyline",12),u._UZ(20,"path",13),u.qZA(),u.qZA(),u.kcU(),u.TgZ(21,"div",14),u.TgZ(22,"ul",15),u.TgZ(23,"li",16),u.TgZ(24,"span",17),u._uU(25," R\xe9daction de documents "),u.qZA(),u.qZA(),u.TgZ(26,"li",16),u.TgZ(27,"span",17),u._uU(28," Conseil en communication "),u.qZA(),u.qZA(),u.TgZ(29,"li",16),u.TgZ(30,"span",17),u._uU(31," Cr\xe9ation de site internet "),u.qZA(),u.qZA(),u.TgZ(32,"li",16),u.TgZ(33,"span",17),u._uU(34," Cr\xe9ation d'identit\xe9 visuelle "),u.qZA(),u.qZA(),u.TgZ(35,"li",16),u.TgZ(36,"span",17),u._uU(37," Edition publicitaire "),u.qZA(),u.qZA(),u.TgZ(38,"li",16),u.TgZ(39,"span",17),u._uU(40," Relecture et correction "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(41,"div",8),u.TgZ(42,"h2",18),u._uU(43," Les valeurs environnementales et humaines sont au coeur de notre projet d'entreprise. "),u._UZ(44,"br"),u.qZA(),u.O4$(),u.TgZ(45,"svg",19),u._UZ(46,"path",20),u._UZ(47,"line",21),u._UZ(48,"line",22),u._UZ(49,"line",23),u._UZ(50,"path",24),u.qZA(),u.qZA(),u.kcU(),u.TgZ(51,"div",25),u.TgZ(52,"button",26),u.TgZ(53,"span",27),u._uU(54,"Contactez nous"),u.qZA(),u.TgZ(55,"span",28),u.O4$(),u.TgZ(56,"svg",29),u._UZ(57,"path",30),u._UZ(58,"path",31),u._UZ(59,"line",32),u._UZ(60,"polyline",33),u._UZ(61,"line",34),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(62,"div",35),u.TgZ(63,"div",36),u.TgZ(64,"div",37),u.TgZ(65,"h2",38),u._uU(66," La r\xe9daction "),u._UZ(67,"br"),u.qZA(),u.O4$(),u.TgZ(68,"svg",39),u._UZ(69,"path",40),u._UZ(70,"circle",41),u._UZ(71,"line",42),u._UZ(72,"path",43),u._UZ(73,"path",44),u.qZA(),u.qZA(),u.kcU(),u.TgZ(74,"p",45),u._uU(75," Nous assurons la r\xe9daction de vos textes pour vous aider \xe0 vous d\xe9marquer. Nous sommes sp\xe9cialis\xe9s dans la r\xe9daction de contenu pour site web, d'articles de journaux ou encore de documents de communication interne ou externe. "),u.qZA(),u.TgZ(76,"a",46),u.TgZ(77,"h3",47),u._uU(78," D\xe9couvrez nos derniers articles "),u.qZA(),u.O4$(),u.TgZ(79,"svg",48),u._UZ(80,"circle",49),u._UZ(81,"circle",50),u._UZ(82,"polyline",51),u._UZ(83,"line",52),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(84,"div",53),u.TgZ(85,"div",37),u.TgZ(86,"h2",38),u._uU(87," La communication "),u._UZ(88,"br"),u.qZA(),u.O4$(),u.TgZ(89,"svg",39),u._UZ(90,"path",54),u._UZ(91,"path",55),u.qZA(),u.qZA(),u.kcU(),u.TgZ(92,"p",56),u._uU(93," Nous sommes \xe9galement sp\xe9cialis\xe9s dans la communication interne et externe. Nous sommes capables de vous aider \xe0 cr\xe9er une identit\xe9 visuelle, de vous accompagner dans la r\xe9alisation de votre site web ou encore de vous conseiller et vous former aux outils de communication. "),u.qZA(),u.qZA(),u.TgZ(94,"div",53),u.TgZ(95,"div",37),u.TgZ(96,"h2",57),u._uU(97," Ils nous ont fait confiance "),u._UZ(98,"br"),u.qZA(),u.O4$(),u.TgZ(99,"svg",58),u._UZ(100,"path",59),u._UZ(101,"path",60),u._UZ(102,"path",61),u._UZ(103,"path",62),u._UZ(104,"path",63),u._UZ(105,"path",64),u._UZ(106,"path",65),u.qZA(),u.qZA(),u.kcU(),u.TgZ(107,"div",66),u._UZ(108,"app-carousel",67),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(108),u.Q6J("slides",r.slides))},directives:[f,y,YE],encapsulation:2}),n})();var rm=F(6451),QE=F(3099);function Qy(n,e=qi.y){return n=null!=n?n:MD,(0,_r.e)((t,r)=>{let i,a=!0;t.subscribe(new Un.Q(r,c=>{const p=e(c);(a||!n(i,p))&&(a=!1,i=p,r.next(c))}))})}function MD(n,e){return n===e}var ND=F(5032),un=F(5813),Lr=F(2011),Jy=(F(1254),F(3942)),Ho=F(4859),ge=F(5861),Yi=F(9681),P=F(2090),qo=F(1877);const Pt="@firebase/database";let im="";function ev(n){im=n}class sm{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,P.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,P.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Go{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,P.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const tv=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new sm(e)}}catch(e){}return new Go},Nc=tv("localStorage"),Qf=tv("sessionStorage"),fs=new qo.Yd("@firebase/database"),om=function(){let n=1;return function(){return n++}}(),nv=function(n){const e=(0,P.dS)(n),t=new P.gQ;t.update(e);const r=t.digest();return P.US.encodeByteArray(r)},Pc=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Pc.apply(null,r):e+="object"==typeof r?(0,P.Pz)(r):r,e+=" "}return e};let Wd=null,rv=!0;const OD=function(n,e){(0,P.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(fs.logLevel=qo.in.VERBOSE,Wd=fs.log.bind(fs),e&&Qf.set("logging_enabled",!0)):"function"==typeof n?Wd=n:(Wd=null,Qf.remove("logging_enabled"))},vr=function(...n){if(!0===rv&&(rv=!1,null===Wd&&!0===Qf.get("logging_enabled")&&OD(!0)),Wd){const e=Pc.apply(null,n);Wd(e)}},wu=function(n){return function(...e){vr(n,...e)}},Jf=function(...n){const e="FIREBASE INTERNAL ERROR: "+Pc(...n);fs.error(e)},ho=function(...n){const e=`FIREBASE FATAL ERROR: ${Pc(...n)}`;throw fs.error(e),new Error(e)},gi=function(...n){const e="FIREBASE WARNING: "+Pc(...n);fs.warn(e)},am=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},wl="[MIN_NAME]",Ra="[MAX_NAME]",Eu=function(n,e){if(n===e)return 0;if(n===wl||e===Ra)return-1;if(e===wl||n===Ra)return 1;{const t=ov(n),r=ov(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},kR=function(n,e){return n===e?0:n<e?-1:1},Xf=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,P.Pz)(e))},JE=function(n){if("object"!=typeof n||null===n)return(0,P.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,P.Pz)(e[r]),t+=":",t+=JE(n[e[r]]);return t+="}",t},iv=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ur(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const XE=function(n){(0,P.hu)(!am(n),"Invalid JSON number");const r=1023;let i,a,c,p,_;0===n?(a=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(p=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=p+r,c=Math.round(n*Math.pow(2,52-p)-Math.pow(2,52))):(a=0,c=Math.round(n/Math.pow(2,-1074))));const E=[];for(_=52;_;_-=1)E.push(c%2?1:0),c=Math.floor(c/2);for(_=11;_;_-=1)E.push(a%2?1:0),a=Math.floor(a/2);E.push(i?1:0),E.reverse();const T=E.join("");let S="";for(_=0;_<64;_+=8){let N=parseInt(T.substr(_,8),2).toString(16);1===N.length&&(N="0"+N),S+=N}return S.toLowerCase()},NR=new RegExp("^-?(0*)\\d{1,10}$"),LD=-2147483648,eb=2147483647,ov=function(n){if(NR.test(n)){const e=Number(n);if(e>=LD&&e<=eb)return e}return null},ep=function(n){try{n()}catch(e){setTimeout(()=>{throw gi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},lm=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class OR{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){gi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class bu{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(vr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gi(e)}}let Oc=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const tb=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,hm="websocket",rb="long_polling";class fm{constructor(e,t,r,i,a=!1,c="",p=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Nc.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Nc.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function ib(n,e,t){let r;if((0,P.hu)("string"==typeof e,"typeof type must == string"),(0,P.hu)("object"==typeof t,"typeof params must == object"),e===hm)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==rb)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function UD(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ur(t,(a,c)=>{i.push(a+"="+c)}),r+i.join("&")}class tp{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,P.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,P.p$)(this.counters_)}}const Cu={},np={};function Iu(n){const e=n.toString();return Cu[e]||(Cu[e]=new tp),Cu[e]}class zd{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ep(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Kd{constructor(e,t,r,i,a,c,p){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=c,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=wu(e),this.stats_=Iu(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),ib(t,rb,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new zd(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,P.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new fv((...a)=>{const[c,p,_,E,T]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=p,this.password=_;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[c,p]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,p)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&tb.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Kd.forceAllow_=!0}static forceDisallow(){Kd.forceDisallow_=!0}static isAvailable(){return!((0,P.Yr)()||!Kd.forceAllow_&&(Kd.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,P.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,P.h$)(t),i=iv(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,P.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,P.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class fv{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=om(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=fv.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(p){vr("frame writing exception"),p.stack&&vr(p.stack),vr(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||vr("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,P.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{vr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Yd=null;"undefined"!=typeof MozWebSocket?Yd=MozWebSocket:"undefined"!=typeof WebSocket&&(Yd=WebSocket);let gm=(()=>{class n{constructor(t,r,i,a,c,p,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=wu(this.connId),this.stats_=Iu(r),this.connURL=n.connectionURL_(r,p,_,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a){const c={v:"5"};return!(0,P.Yr)()&&"undefined"!=typeof location&&location.hostname&&tb.test(location.hostname)&&(c.r="f"),r&&(c.s=r),i&&(c.ls=i),a&&(c.ac=a),ib(t,hm,c)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Nc.set("previous_websocket_failure",!0);try{if((0,P.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${im}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,p=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;p&&(a.proxy={origin:p}),this.mySock=new Yd(this.connURL,[],a)}else this.mySock=new Yd(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Yd&&!n.forceDisallow_}static previouslyFailed(){return Nc.isInMemoryStorage||!0===Nc.get("previous_websocket_failure")}markConnectionHealthy(){Nc.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,P.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,P.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=iv(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class pv{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Kd,gm]}initTransports_(e){const t=gm&&gm.isAvailable();let r=t&&!gm.previouslyFailed();if(e.webSocketOnly&&(t||gi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[gm];else{const i=this.transports_=[];for(const a of pv.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class mm{constructor(e,t,r,i,a,c,p,_,E,T){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=c,this.onReady_=p,this.onDisconnect_=_,this.onKill_=E,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=wu("c:"+this.id+":"),this.transportManager_=new pv(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=lm(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Xf("t",e),r=Xf("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Xf("t",e),r=Xf("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Xf("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Jf("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Jf("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&gi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),lm(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):lm(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Nc.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class gb{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class mb{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,P.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,P.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Ev extends mb{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,P.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ev}getInitialEvent(e){return(0,P.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class En{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function hn(){return new En("")}function $t(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Tu(n){return n.pieces_.length-n.pieceNum_}function Rn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new En(n.pieces_,e)}function Qd(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function sp(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function _m(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new En(e,0)}function Bn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof En)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new En(t,0)}function Gt(n){return n.pieceNum_>=n.pieces_.length}function Qi(n,e){const t=$t(n),r=$t(e);if(null===t)return e;if(t===r)return Qi(Rn(n),Rn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function GD(n,e){const t=sp(n,0),r=sp(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Eu(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function op(n,e){if(Tu(n)!==Tu(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Wo(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Tu(n)>Tu(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class WD{constructor(e,t){this.errorPrefix_=t,this.parts_=sp(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,P.ug)(this.parts_[r]);Iv(this)}}function Iv(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Du(n))}function Du(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class ym extends mb{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new ym}getInitialEvent(e){return(0,P.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Us=1e3;let ap,zo=(()=>{class n extends gb{constructor(t,r,i,a,c,p,_,E){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=p,this.appCheckTokenProvider_=_,this.authOverride_=E,this.id=n.nextPersistentConnectionId_++,this.log_=wu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Us,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,E&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ym.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Ev.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,c={r:a,a:t,b:r};this.log_((0,P.Pz)(c)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new P.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:p=>{const _=p.d;"ok"===p.s?(this.onDataUpdate_(i.p,_,!1,null),r.resolve(_)):r.reject(_)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const p=this.outstandingGets_[c];void 0===p||a!==p||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(t,r,i,a){this.initConnection_();const c=t._queryIdentifier,p=t._path.toString();this.log_("Listen called for "+p+" "+c),this.listens.has(p)||this.listens.set(p,new Map),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(p).has(c),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(p).set(c,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,_=>{const E=_.d,T=_.s;n.warnOnListenWarnings_(E,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==T&&this.removeListen_(i,a),t.onComplete&&t.onComplete(T,E))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,P.r3)(t,"w")){const i=(0,P.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();gi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,P.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,P.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const c=a.s,p=a.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,p))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const c={p:t};a&&(c.q=i,c.t=a),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,p=>{a&&setTimeout(()=>{a(p.s,p.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,c){this.initConnection_();const p={p:r,d:i};void 0!==c&&(p.h=c),this.outstandingPuts_.push({action:t,request:p,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,P.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Jf("Unrecognized action received from server: "+(0,P.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Us,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Us,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Us),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ge.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,p=t.lastSessionId;let _=!1,E=null;const T=function(){E?E.close():(_=!0,a())};t.realtime_={close:T,sendRequest:function(U){(0,P.hu)(E,"sendRequest call when we're not connected not allowed."),E.sendRequest(U)}};const N=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[U,Z]=yield Promise.all([t.authTokenProvider_.getToken(N),t.appCheckTokenProvider_.getToken(N)]);_?vr("getToken() completed but was canceled"):(vr("getToken() completed. Creating connection."),t.authToken_=U&&U.accessToken,t.appCheckToken_=Z&&Z.token,E=new mm(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ue=>{gi(ue+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},p))}catch(U){t.log_("Failed to get token: "+U),_||(t.repoInfo_.nodeAdmin&&gi(U),T())}}})()}interrupt(t){vr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){vr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Us,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>JE(c)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new En(t).toString();let a;if(this.listens.has(i)){const c=this.listens.get(i);a=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){vr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){vr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,P.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+im.replace(/\./g,"-")]=1,(0,P.uI)()?t["framework.cordova"]=1:(0,P.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Ev.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Wt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Wt(e,t)}}class Jd{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Wt(wl,e),i=new Wt(wl,t);return 0!==this.compare(r,i)}minPost(){return Wt.MIN}}class Dv extends Jd{static get __EMPTY_NODE(){return ap}static set __EMPTY_NODE(e){ap=e}compare(e,t){return Eu(e.name,t.name)}isDefinedOn(e){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Wt.MIN}maxPost(){return new Wt(Ra,ap)}makePost(e,t){return(0,P.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Wt(e,ap)}toString(){return".key"}}const Ko=new Dv;class Em{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let bm,Vs=(()=>{class n{constructor(t,r,i,a,c){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:ps.EMPTY_NODE,this.right=null!=c?c:ps.EMPTY_NODE}copy(t,r,i,a,c){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const c=i(t,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===c?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return ps.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return ps.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ps{constructor(e,t=ps.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ps(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Vs.BLACK,null,null))}remove(e){return new ps(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Vs.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Em(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Em(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Em(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Em(this.root_,null,this.comparator_,!0,e)}}function bb(n,e){return Eu(n.name,e.name)}function Au(n,e){return Eu(n,e)}ps.EMPTY_NODE=new class KD{copy(e,t,r,i,a){return this}insert(e,t,r){return new Vs(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Cb=function(n){return"number"==typeof n?"number:"+XE(n):"string:"+n},Fc=function(n){if(n.isLeafNode()){const e=n.val();(0,P.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,P.r3)(e,".sv"),"Priority must be a string or number.")}else(0,P.hu)(n===bm||n.isEmpty(),"priority of unexpected type.");(0,P.hu)(n===bm||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ib,Tb,Db,Xd=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Fc(this.priorityNode_)}static set __childrenNodeConstructor(t){Ib=t}static get __childrenNodeConstructor(){return Ib}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Gt(t)?this:".priority"===$t(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=$t(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,P.hu)(".priority"!==i||1===Tu(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Rn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Cb(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?XE(this.value_):this.value_,this.lazyHash_=nv(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,P.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,P.hu)(a>=0,"Unknown leaf type: "+r),(0,P.hu)(c>=0,"Unknown leaf type: "+i),a===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Mn=new class Ab extends Jd{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Eu(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Wt.MIN}maxPost(){return new Wt(Ra,new Xd("[PRIORITY-POST]",Db))}makePost(e,t){const r=Tb(e);return new Wt(t,new Xd("[PRIORITY-POST]",r))}toString(){return".priority"}},Sb=Math.log(2);class xb{constructor(e){this.count=parseInt(Math.log(e+1)/Sb,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Cm=function(n,e,t,r){n.sort(e);const i=function(_,E){const T=E-_;let S,N;if(0===T)return null;if(1===T)return S=n[_],N=t?t(S):S,new Vs(N,S.node,Vs.BLACK,null,null);{const U=parseInt(T/2,10)+_,Z=i(_,U),ue=i(U+1,E);return S=n[U],N=t?t(S):S,new Vs(N,S.node,Vs.BLACK,Z,ue)}},p=function(_){let E=null,T=null,S=n.length;const N=function(Z,ue){const be=S-Z,Ke=S;S-=Z;const qe=i(be+1,Ke),ct=n[be],ze=t?t(ct):ct;U(new Vs(ze,ct.node,ue,null,qe))},U=function(Z){E?(E.left=Z,E=Z):(T=Z,E=Z)};for(let Z=0;Z<_.count;++Z){const ue=_.nextBitIsOne(),be=Math.pow(2,_.count-(Z+1));ue?N(be,Vs.BLACK):(N(be,Vs.BLACK),N(be,Vs.RED))}return T}(new xb(n.length));return new ps(r||e,p)};let Sv;const eh={};class bl{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,P.hu)(eh&&Mn,"ChildrenNode.ts has not been loaded"),Sv=Sv||new bl({".priority":eh},{".priority":Mn}),Sv}get(e){const t=(0,P.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ps?t:null}hasIndex(e){return(0,P.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,P.hu)(e!==Ko,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Wt.Wrap);let p,c=a.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=a.getNext();p=i?Cm(r,e.getCompare()):eh;const _=e.toString(),E=Object.assign({},this.indexSet_);E[_]=e;const T=Object.assign({},this.indexes_);return T[_]=p,new bl(T,E)}addToIndexes(e,t){const r=(0,P.UI)(this.indexes_,(i,a)=>{const c=(0,P.DV)(this.indexSet_,a);if((0,P.hu)(c,"Missing index implementation for "+a),i===eh){if(c.isDefinedOn(e.node)){const p=[],_=t.getIterator(Wt.Wrap);let E=_.getNext();for(;E;)E.name!==e.name&&p.push(E),E=_.getNext();return p.push(e),Cm(p,c.getCompare())}return eh}{const p=t.get(e.name);let _=i;return p&&(_=_.remove(new Wt(e.name,p))),_.insert(e,e.node)}});return new bl(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,P.UI)(this.indexes_,i=>{if(i===eh)return i;{const a=t.get(e.name);return a?i.remove(new Wt(e.name,a)):i}});return new bl(r,this.indexSet_)}}let th,Zt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Fc(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return th||(th=new n(new ps(Au),null,bl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||th}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?th:r}}getChild(t){const r=$t(t);return null===r?this:this.getImmediateChild(r).getChild(Rn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,P.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Wt(t,r);let a,c;r.isEmpty()?(a=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const p=a.isEmpty()?th:this.priorityNode_;return new n(a,p,c)}}updateChild(t,r){const i=$t(t);if(null===i)return r;{(0,P.hu)(".priority"!==$t(t)||1===Tu(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Rn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,c=!0;if(this.forEachChild(Mn,(p,_)=>{r[p]=_.val(t),i++,c&&n.INTEGER_REGEXP_.test(p)?a=Math.max(a,Number(p)):c=!1}),!t&&c&&a<2*i){const p=[];for(const _ in r)p[_]=r[_];return p}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Cb(this.getPriority().val())+":"),this.forEachChild(Mn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":nv(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const c=a.getPredecessorKey(new Wt(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Wt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Wt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Wt.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Wt.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)>0;)a.getNext(),c=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===lp?-1:0}withIndex(t){if(t===Ko||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ko||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Mn),a=r.getIterator(Mn);let c=i.getNext(),p=a.getNext();for(;c&&p;){if(c.name!==p.name||!c.node.equals(p.node))return!1;c=i.getNext(),p=a.getNext()}return null===c&&null===p}return!1}return!1}}resolveIndex_(t){return t===Ko?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const lp=new class kb extends Zt{constructor(){super(new ps(Au),Zt.EMPTY_NODE,bl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Zt.EMPTY_NODE}isEmpty(){return!1}};function lr(n,e=null){if(null===n)return Zt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,P.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Xd(n,lr(e));if(n instanceof Array){let t=Zt.EMPTY_NODE;return Ur(n,(r,i)=>{if((0,P.r3)(n,r)&&"."!==r.substring(0,1)){const a=lr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(lr(e))}{const t=[];let r=!1;if(Ur(n,(c,p)=>{if("."!==c.substring(0,1)){const _=lr(p);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new Wt(c,_)))}}),0===t.length)return Zt.EMPTY_NODE;const a=Cm(t,bb,c=>c.name,Au);if(r){const c=Cm(t,Mn.getCompare());return new Zt(a,lr(e),new bl({".priority":c},{".priority":Mn}))}return new Zt(a,lr(e),bl.Default)}}Object.defineProperties(Wt,{MIN:{value:new Wt(wl,Zt.EMPTY_NODE)},MAX:{value:new Wt(Ra,lp)}}),Dv.__EMPTY_NODE=Zt.EMPTY_NODE,Xd.__childrenNodeConstructor=Zt,function YD(n){bm=n}(lp),function Av(n){Db=n}(lp),function fo(n){Tb=n}(lr);class Rb extends Jd{constructor(e){super(),this.indexPath_=e,(0,P.hu)(!Gt(e)&&".priority"!==$t(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Eu(e.name,t.name):a}makePost(e,t){const r=lr(e),i=Zt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Wt(t,i)}maxPost(){const e=Zt.EMPTY_NODE.updateChild(this.indexPath_,lp);return new Wt(Ra,e)}toString(){return sp(this.indexPath_,0).join("/")}}const kv=new class xv extends Jd{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Eu(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Wt.MIN}maxPost(){return Wt.MAX}makePost(e,t){const r=lr(e);return new Wt(t,r)}toString(){return".value"}},Lc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",BR=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=Lc.charAt(t%64),t=Math.floor(t/64);(0,P.hu)(0===t,"Cannot push at time == 0");let c=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=Lc.charAt(e[i]);return(0,P.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),XD=function(n){if(n===""+eb)return"-";const e=ov(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Ra;const a=Lc.charAt(Lc.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},Rv=function(n){if(n===""+LD)return wl;const e=ov(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+eb:(delete t[t.length-1],t.join("")):(t[t.length-1]=Lc.charAt(Lc.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function Mv(n){return{type:"value",snapshotNode:n}}function Uc(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function up(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Tm(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class cp{constructor(e){this.index_=e}updateChild(e,t,r,i,a,c){(0,P.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(t);return p.getChild(i).equals(r.getChild(i))&&p.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(up(t,p)):(0,P.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?c.trackChildChange(Uc(t,r)):c.trackChildChange(Tm(t,r,p))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Mn,(i,a)=>{t.hasChild(i)||r.trackChildChange(up(i,a))}),t.isLeafNode()||t.forEachChild(Mn,(i,a)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(a)||r.trackChildChange(Tm(i,a,c))}else r.trackChildChange(Uc(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Zt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class dp{constructor(e){this.indexedFilter_=new cp(e.getIndex()),this.index_=e.getIndex(),this.startPost_=dp.getStartPost_(e),this.endPost_=dp.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,c){return this.matches(new Wt(t,r))||(r=Zt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Zt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Zt.EMPTY_NODE);const a=this;return t.forEachChild(Mn,(c,p)=>{a.matches(new Wt(c,p))||(i=i.updateImmediateChild(c,Zt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Nv{constructor(e){this.rangedFilter_=new dp(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,c){return this.rangedFilter_.matches(new Wt(t,r))||(r=Zt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,c):this.fullLimitUpdateChild_(e,t,r,a,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Zt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const p=a.getNext();let _;if(_=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),p)<=0:this.index_.compare(p,this.rangedFilter_.getEndPost())<=0,!_)break;i=i.updateImmediateChild(p.name,p.node),c++}}else{let a,c,p,_;if(i=t.withIndex(this.index_),i=i.updatePriority(Zt.EMPTY_NODE),this.reverse_){_=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();p=(N,U)=>S(U,N)}else _=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),p=this.index_.getCompare();let E=0,T=!1;for(;_.hasNext();){const S=_.getNext();!T&&p(a,S)<=0&&(T=!0),T&&E<this.limit_&&p(S,c)<=0?E++:i=i.updateImmediateChild(S.name,Zt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let c;if(this.reverse_){const S=this.index_.getCompare();c=(N,U)=>S(U,N)}else c=this.index_.getCompare();const p=e;(0,P.hu)(p.numChildren()===this.limit_,"");const _=new Wt(t,r),E=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),T=this.rangedFilter_.matches(_);if(p.hasChild(t)){const S=p.getImmediateChild(t);let N=i.getChildAfterChild(this.index_,E,this.reverse_);for(;null!=N&&(N.name===t||p.hasChild(N.name));)N=i.getChildAfterChild(this.index_,N,this.reverse_);const U=null==N?1:c(N,_);if(T&&!r.isEmpty()&&U>=0)return null!=a&&a.trackChildChange(Tm(t,r,S)),p.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(up(t,S));const ue=p.updateImmediateChild(t,Zt.EMPTY_NODE);return null!=N&&this.rangedFilter_.matches(N)?(null!=a&&a.trackChildChange(Uc(N.name,N.node)),ue.updateImmediateChild(N.name,N.node)):ue}}return r.isEmpty()?e:T&&c(E,_)>=0?(null!=a&&(a.trackChildChange(up(E.name,E.node)),a.trackChildChange(Uc(t,r))),p.updateImmediateChild(t,r).updateImmediateChild(E.name,Zt.EMPTY_NODE)):e}}class Dm{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Mn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:wl}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ra}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Mn}copy(){const e=new Dm;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Pv(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function nh(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Am(n,e){const t=n.copy();return t.index_=e,t}function ih(n){const e={};if(n.isDefault())return e;let t;return n.index_===Mn?t="$priority":n.index_===kv?t="$value":n.index_===Ko?t="$key":((0,P.hu)(n.index_ instanceof Rb,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,P.Pz)(t),n.startSet_&&(e.startAt=(0,P.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,P.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,P.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,P.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Nb(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Mn&&(e.i=n.index_.toString()),e}class Sm extends gb{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=wu("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,P.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=Sm.getListenId_(e,r),p={};this.listens_[c]=p;const _=ih(e._queryParams);this.restRequest_(a+".json",_,(E,T)=>{let S=T;if(404===E&&(S=null,E=null),null===E&&this.onDataUpdate_(a,S,!1,r),(0,P.DV)(this.listens_,c)===p){let N;N=E?401===E?"permission_denied":"rest_error:"+E:"ok",i(N,null)}})}unlisten(e,t){const r=Sm.getListenId_(e,t);delete this.listens_[r]}get(e){const t=ih(e._queryParams),r=e._path.toString(),i=new P.BH;return this.restRequest_(r+".json",t,(a,c)=>{let p=c;404===a&&(p=null,a=null),null===a?(this.onDataUpdate_(r,p,!1,null),i.resolve(p)):i.reject(new Error(p))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,P.xO)(t);this.log_("Sending REST request for "+c);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(r&&4===p.readyState){this.log_("REST Response for "+c+" received. status:",p.status,"response:",p.responseText);let _=null;if(p.status>=200&&p.status<300){try{_=(0,P.cI)(p.responseText)}catch(E){gi("Failed to parse JSON response for "+c+": "+p.responseText)}r(null,_)}else 401!==p.status&&404!==p.status&&gi("Got unsuccessful REST response for "+c+" Status: "+p.status),r(p.status);r=null}},p.open("GET",c,!0),p.send()})}}class Ov{constructor(){this.rootNode_=Zt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Bs(){return{value:null,children:new Map}}function Na(n,e,t){if(Gt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=$t(e);n.children.has(r)||n.children.set(r,Bs()),Na(n.children.get(r),e=Rn(e),t)}}function Qr(n,e){if(Gt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Mn,(r,i)=>{Na(n,new En(r),i)}),Qr(n,e)}}if(n.children.size>0){const t=$t(e);return e=Rn(e),n.children.has(t)&&Qr(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Cl(n,e,t){null!==n.value?t(e,n.value):function xm(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Cl(i,new En(e.toString()+"/"+r),t)})}class go{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ur(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class ah{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new go(e);const r=1e4+2e4*Math.random();lm(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ur(e,(i,a)=>{a>0&&(0,P.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),lm(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var mi=(()=>{return(n=mi||(mi={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",mi;var n})();function ku(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Il{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=mi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Gt(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new En(e));return new Il(hn(),t,this.revert)}}return(0,P.hu)($t(this.path)===e,"operationForChild called for unrelated child."),new Il(Rn(this.path),this.affectedTree,this.revert)}}class Pa{constructor(e,t){this.source=e,this.path=t,this.type=mi.LISTEN_COMPLETE}operationForChild(e){return Gt(this.path)?new Pa(this.source,hn()):new Pa(this.source,Rn(this.path))}}class Ru{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=mi.OVERWRITE}operationForChild(e){return Gt(this.path)?new Ru(this.source,hn(),this.snap.getImmediateChild(e)):new Ru(this.source,Rn(this.path),this.snap)}}class Vc{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=mi.MERGE}operationForChild(e){if(Gt(this.path)){const t=this.children.subtree(new En(e));return t.isEmpty()?null:t.value?new Ru(this.source,hn(),t.value):new Vc(this.source,hn(),t)}return(0,P.hu)($t(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Vc(this.source,Rn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Tl{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Gt(e))return this.isFullyInitialized()&&!this.filtered_;const t=$t(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Pb{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function lh(n,e,t,r,i,a){const c=r.filter(p=>p.type===t);c.sort((p,_)=>function Lb(n,e,t){if(null==e.childName||null==t.childName)throw(0,P.g5)("Should only compare child_ events.");const r=new Wt(e.childName,e.snapshotNode),i=new Wt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,p,_)),c.forEach(p=>{const _=function Fb(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,p,a);i.forEach(E=>{E.respondsTo(p.type)&&e.push(E.createEvent(_,n.query_))})})}function hp(n,e){return{eventCache:n,serverCache:e}}function fp(n,e,t,r){return hp(new Tl(e,t,r),n.serverCache)}function Fv(n,e,t,r){return hp(n.eventCache,new Tl(e,t,r))}function Rm(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Mu(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Mm;class jn{constructor(e,t=(()=>(Mm||(Mm=new ps(kR)),Mm))()){this.value=e,this.children=t}static fromObject(e){let t=new jn(null);return Ur(e,(r,i)=>{t=t.set(new En(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:hn(),value:this.value};if(Gt(e))return null;{const r=$t(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Rn(e),t);return null!=a?{path:Bn(new En(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Gt(e))return this;{const t=$t(e),r=this.children.get(t);return null!==r?r.subtree(Rn(e)):new jn(null)}}set(e,t){if(Gt(e))return new jn(t,this.children);{const r=$t(e),a=(this.children.get(r)||new jn(null)).set(Rn(e),t),c=this.children.insert(r,a);return new jn(this.value,c)}}remove(e){if(Gt(e))return this.children.isEmpty()?new jn(null):new jn(null,this.children);{const t=$t(e),r=this.children.get(t);if(r){const i=r.remove(Rn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new jn(null):new jn(this.value,a)}return this}}get(e){if(Gt(e))return this.value;{const t=$t(e),r=this.children.get(t);return r?r.get(Rn(e)):null}}setTree(e,t){if(Gt(e))return t;{const r=$t(e),a=(this.children.get(r)||new jn(null)).setTree(Rn(e),t);let c;return c=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new jn(this.value,c)}}fold(e){return this.fold_(hn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Bn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,hn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Gt(e))return null;{const a=$t(e),c=this.children.get(a);return c?c.findOnPath_(Rn(e),Bn(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,hn(),t)}foreachOnPath_(e,t,r){if(Gt(e))return this;{this.value&&r(t,this.value);const i=$t(e),a=this.children.get(i);return a?a.foreachOnPath_(Rn(e),Bn(t,i),r):new jn(null)}}foreach(e){this.foreach_(hn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Bn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class mo{constructor(e){this.writeTree_=e}static empty(){return new mo(new jn(null))}}function pp(n,e,t){if(Gt(e))return new mo(new jn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const c=Qi(i,e);return a=a.updateChild(c,t),new mo(n.writeTree_.set(i,a))}{const i=new jn(t),a=n.writeTree_.setTree(e,i);return new mo(a)}}}function Nm(n,e,t){let r=n;return Ur(t,(i,a)=>{r=pp(r,Bn(e,i),a)}),r}function Ub(n,e){if(Gt(e))return mo.empty();{const t=n.writeTree_.setTree(e,new jn(null));return new mo(t)}}function Lv(n,e){return null!=uh(n,e)}function uh(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Qi(t.path,e)):null}function Vb(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Mn,(r,i)=>{e.push(new Wt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Wt(r,i.value))}),e}function Oa(n,e){if(Gt(e))return n;{const t=uh(n,e);return new mo(null!=t?new jn(t):n.writeTree_.subtree(e))}}function gp(n){return n.writeTree_.isEmpty()}function ch(n,e){return sA(hn(),n.writeTree_,e)}function sA(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,P.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=sA(Bn(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Bn(n,".priority"),r)),t}}function Uv(n,e){return Lm(e,n)}function aA(n,e){if(n.snap)return Wo(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Wo(Bn(n.path,t),e))return!0;return!1}function lA(n){return n.visible}function Vv(n,e,t){let r=mo.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const c=a.path;let p;if(a.snap)Wo(t,c)?(p=Qi(t,c),r=pp(r,p,a.snap)):Wo(c,t)&&(p=Qi(c,t),r=pp(r,hn(),a.snap.getChild(p)));else{if(!a.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(Wo(t,c))p=Qi(t,c),r=Nm(r,p,a.children);else if(Wo(c,t))if(p=Qi(c,t),Gt(p))r=Nm(r,hn(),a.children);else{const _=(0,P.DV)(a.children,$t(p));if(_){const E=_.getChild(Rn(p));r=pp(r,hn(),E)}}}}}return r}function jb(n,e,t,r,i){if(r||i){const a=Oa(n.visibleWrites,e);return!i&&gp(a)?t:i||null!=t||Lv(a,hn())?ch(Vv(n.allWrites,function(E){return(E.visible||i)&&(!r||!~r.indexOf(E.writeId))&&(Wo(E.path,e)||Wo(e,E.path))},e),t||Zt.EMPTY_NODE):null}{const a=uh(n.visibleWrites,e);if(null!=a)return a;{const c=Oa(n.visibleWrites,e);return gp(c)?t:null!=t||Lv(c,hn())?ch(c,t||Zt.EMPTY_NODE):null}}}function Om(n,e,t,r){return jb(n.writeTree,n.treePath,e,t,r)}function Bv(n,e){return function Zb(n,e,t){let r=Zt.EMPTY_NODE;const i=uh(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Mn,(a,c)=>{r=r.updateImmediateChild(a,c)}),r;if(t){const a=Oa(n.visibleWrites,e);return t.forEachChild(Mn,(c,p)=>{const _=ch(Oa(a,new En(c)),p);r=r.updateImmediateChild(c,_)}),Vb(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return Vb(Oa(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function Hb(n,e,t,r){return function Pm(n,e,t,r,i){(0,P.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Bn(e,t);if(Lv(n.visibleWrites,a))return null;{const c=Oa(n.visibleWrites,a);return gp(c)?i.getChild(t):ch(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function mp(n,e){return function $b(n,e){return uh(n.visibleWrites,e)}(n.writeTree,Bn(n.treePath,e))}function Fm(n,e,t){return function uA(n,e,t,r){const i=Bn(e,t),a=uh(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?ch(Oa(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function jv(n,e){return Lm(Bn(n.treePath,e),n.writeTree)}function Lm(n,e){return{treePath:n,writeTree:e}}class $R{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,P.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,Tm(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,up(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Uc(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,P.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Tm(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const qb=new class Zv{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Gb{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Tl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Fm(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Mu(this.viewCache_),a=function hA(n,e,t,r,i,a){return function cA(n,e,t,r,i,a,c){let p;const _=Oa(n.visibleWrites,e),E=uh(_,hn());if(null!=E)p=E;else{if(null==t)return[];p=ch(_,t)}if(p=p.withIndex(c),p.isEmpty()||p.isLeafNode())return[];{const T=[],S=c.getCompare(),N=a?p.getReverseIteratorFrom(r,c):p.getIteratorFrom(r,c);let U=N.getNext();for(;U&&T.length<i;)0!==S(U,r)&&T.push(U),U=N.getNext();return T}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function zb(n,e,t,r,i,a){const c=e.eventCache;if(null!=mp(r,t))return e;{let p,_;if(Gt(t))if((0,P.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const E=Mu(e),S=Bv(r,E instanceof Zt?E:Zt.EMPTY_NODE);p=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const E=Om(r,Mu(e));p=n.filter.updateFullNode(e.eventCache.getNode(),E,a)}else{const E=$t(t);if(".priority"===E){(0,P.hu)(1===Tu(t),"Can't have a priority with additional path components");const T=c.getNode();_=e.serverCache.getNode();const S=Hb(r,t,T,_);p=null!=S?n.filter.updatePriority(T,S):c.getNode()}else{const T=Rn(t);let S;if(c.isCompleteForChild(E)){_=e.serverCache.getNode();const N=Hb(r,t,c.getNode(),_);S=null!=N?c.getNode().getImmediateChild(E).updateChild(T,N):c.getNode().getImmediateChild(E)}else S=Fm(r,E,e.serverCache);p=null!=S?n.filter.updateChild(c.getNode(),E,S,T,i,a):c.getNode()}}return fp(e,p,c.isFullyInitialized()||Gt(t),n.filter.filtersNodes())}}function hh(n,e,t,r,i,a,c,p){const _=e.serverCache;let E;const T=c?n.filter:n.filter.getIndexedFilter();if(Gt(t))E=T.updateFullNode(_.getNode(),r,null);else if(T.filtersNodes()&&!_.isFiltered()){const U=_.getNode().updateChild(t,r);E=T.updateFullNode(_.getNode(),U,null)}else{const U=$t(t);if(!_.isCompleteForPath(t)&&Tu(t)>1)return e;const Z=Rn(t),be=_.getNode().getImmediateChild(U).updateChild(Z,r);E=".priority"===U?T.updatePriority(_.getNode(),be):T.updateChild(_.getNode(),U,be,Z,qb,null)}const S=Fv(e,E,_.isFullyInitialized()||Gt(t),T.filtersNodes());return zb(n,S,t,i,new Gb(i,S,a),p)}function yp(n,e,t,r,i,a,c){const p=e.eventCache;let _,E;const T=new Gb(i,e,a);if(Gt(t))E=n.filter.updateFullNode(e.eventCache.getNode(),r,c),_=fp(e,E,!0,n.filter.filtersNodes());else{const S=$t(t);if(".priority"===S)E=n.filter.updatePriority(e.eventCache.getNode(),r),_=fp(e,E,p.isFullyInitialized(),p.isFiltered());else{const N=Rn(t),U=p.getNode().getImmediateChild(S);let Z;if(Gt(N))Z=r;else{const ue=T.getCompleteChild(S);Z=null!=ue?".priority"===Qd(N)&&ue.getChild(_m(N)).isEmpty()?ue:ue.updateChild(N,r):Zt.EMPTY_NODE}_=U.equals(Z)?e:fp(e,n.filter.updateChild(p.getNode(),S,Z,N,T,c),p.isFullyInitialized(),n.filter.filtersNodes())}}return _}function qv(n,e){return n.eventCache.isCompleteForChild(e)}function Kb(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function vp(n,e,t,r,i,a,c,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let E,_=e;E=Gt(t)?r:new jn(null).setTree(t,r);const T=e.serverCache.getNode();return E.children.inorderTraversal((S,N)=>{if(T.hasChild(S)){const Z=Kb(0,e.serverCache.getNode().getImmediateChild(S),N);_=hh(n,_,new En(S),Z,i,a,c,p)}}),E.children.inorderTraversal((S,N)=>{const U=!e.serverCache.isCompleteForChild(S)&&void 0===N.value;if(!T.hasChild(S)&&!U){const ue=Kb(0,e.serverCache.getNode().getImmediateChild(S),N);_=hh(n,_,new En(S),ue,i,a,c,p)}}),_}class Wv{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new cp(r.getIndex()),a=function eA(n){return n.loadsAllData()?new cp(n.getIndex()):n.hasLimit()?new Nv(n):new dp(n)}(r);this.processor_=function _p(n){return{filter:n}}(a);const c=t.serverCache,p=t.eventCache,_=i.updateFullNode(Zt.EMPTY_NODE,c.getNode(),null),E=a.updateFullNode(Zt.EMPTY_NODE,p.getNode(),null),T=new Tl(_,c.isFullyInitialized(),i.filtersNodes()),S=new Tl(E,p.isFullyInitialized(),a.filtersNodes());this.viewCache_=hp(S,T),this.eventGenerator_=new Pb(this.query_)}get query(){return this.query_}}function zv(n,e){const t=Mu(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Gt(e)&&!t.getImmediateChild($t(e)).isEmpty())?t.getChild(e):null}function Kv(n){return 0===n.eventRegistrations_.length}function Yv(n,e,t){const r=[];if(t){(0,P.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const c=n.eventRegistrations_[a];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function Qv(n,e,t,r){e.type===mi.MERGE&&null!==e.source.queryId&&((0,P.hu)(Mu(n.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(Rm(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function $v(n,e,t,r,i){const a=new $R;let c,p;if(t.type===mi.OVERWRITE){const E=t;E.source.fromUser?c=yp(n,e,E.path,E.snap,r,i,a):((0,P.hu)(E.source.fromServer,"Unknown source."),p=E.source.tagged||e.serverCache.isFiltered()&&!Gt(E.path),c=hh(n,e,E.path,E.snap,r,i,p,a))}else if(t.type===mi.MERGE){const E=t;E.source.fromUser?c=function HR(n,e,t,r,i,a,c){let p=e;return r.foreach((_,E)=>{const T=Bn(t,_);qv(e,$t(T))&&(p=yp(n,p,T,E,i,a,c))}),r.foreach((_,E)=>{const T=Bn(t,_);qv(e,$t(T))||(p=yp(n,p,T,E,i,a,c))}),p}(n,e,E.path,E.children,r,i,a):((0,P.hu)(E.source.fromServer,"Unknown source."),p=E.source.tagged||e.serverCache.isFiltered(),c=vp(n,e,E.path,E.children,r,i,p,a))}else if(t.type===mi.ACK_USER_WRITE){const E=t;c=E.revert?function Yb(n,e,t,r,i,a){let c;if(null!=mp(r,t))return e;{const p=new Gb(r,e,i),_=e.eventCache.getNode();let E;if(Gt(t)||".priority"===$t(t)){let T;if(e.serverCache.isFullyInitialized())T=Om(r,Mu(e));else{const S=e.serverCache.getNode();(0,P.hu)(S instanceof Zt,"serverChildren would be complete if leaf node"),T=Bv(r,S)}T=T,E=n.filter.updateFullNode(_,T,a)}else{const T=$t(t);let S=Fm(r,T,e.serverCache);null==S&&e.serverCache.isCompleteForChild(T)&&(S=_.getImmediateChild(T)),E=null!=S?n.filter.updateChild(_,T,S,Rn(t),p,a):e.eventCache.getNode().hasChild(T)?n.filter.updateChild(_,T,Zt.EMPTY_NODE,Rn(t),p,a):_,E.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=Om(r,Mu(e)),c.isLeafNode()&&(E=n.filter.updateFullNode(E,c,a)))}return c=e.serverCache.isFullyInitialized()||null!=mp(r,hn()),fp(e,E,c,n.filter.filtersNodes())}}(n,e,E.path,r,i,a):function Gv(n,e,t,r,i,a,c){if(null!=mp(i,t))return e;const p=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(Gt(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return hh(n,e,t,_.getNode().getChild(t),i,a,p,c);if(Gt(t)){let E=new jn(null);return _.getNode().forEachChild(Ko,(T,S)=>{E=E.set(new En(T),S)}),vp(n,e,t,E,i,a,p,c)}return e}{let E=new jn(null);return r.foreach((T,S)=>{const N=Bn(t,T);_.isCompleteForPath(N)&&(E=E.set(T,_.getNode().getChild(N)))}),vp(n,e,t,E,i,a,p,c)}}(n,e,E.path,E.affectedTree,r,i,a)}else{if(t.type!==mi.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+t.type);c=function fA(n,e,t,r,i){const a=e.serverCache;return zb(n,Fv(e,a.getNode(),a.isFullyInitialized()||Gt(t),a.isFiltered()),t,r,qb,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function Hv(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Rm(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(Mv(Rm(e)))}}(e,c,_),{viewCache:c,changes:_}}(n.processor_,i,e,t,r);return function Wb(n,e){(0,P.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,P.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,Xv(n,a.changes,a.viewCache.eventCache.getNode(),null)}function Xv(n,e,t,r){return function Ob(n,e,t,r){const i=[],a=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(function Mb(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),lh(n,i,"child_removed",e,r,t),lh(n,i,"child_added",e,r,t),lh(n,i,"child_moved",a,r,t),lh(n,i,"child_changed",e,r,t),lh(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let Um,jm;class Xb{constructor(){this.views=new Map}}function Vm(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,P.hu)(null!=a,"SyncTree gave us an op for an invalid query."),Qv(a,e,t,r)}{let a=[];for(const c of n.views.values())a=a.concat(Qv(c,e,t,r));return a}}function n0(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let p=Om(t,i?r:null),_=!1;p?_=!0:r instanceof Zt?(p=Bv(t,r),_=!1):(p=Zt.EMPTY_NODE,_=!1);const E=hp(new Tl(p,_,!1),new Tl(r,i,!1));return new Wv(e,E)}return c}function r0(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Dl(n,e){let t=null;for(const r of n.views.values())t=t||zv(r,e);return t}function s0(n,e){return e._queryParams.loadsAllData()?Bm(n):n.views.get(e._queryIdentifier)}function o0(n,e){return null!=s0(n,e)}function Bc(n){return null!=Bm(n)}function Bm(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Vr=1;class a0{constructor(e){this.listenProvider_=e,this.syncPointTree_=new jn(null),this.pendingWriteTree_=function dA(){return{visibleWrites:mo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function l0(n,e,t,r,i){return function jR(n,e,t,r,i){(0,P.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=pp(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?jc(n,new Ru({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Al(n,e,t=!1){const r=function Bb(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function ZR(n,e){const t=n.allWrites.findIndex(p=>p.writeId===e);(0,P.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const p=n.allWrites[c];p.visible&&(c>=t&&aA(p,r.path)?i=!1:Wo(r.path,p.path)&&(a=!0)),c--}return!!i&&(a?(function dh(n){n.visibleWrites=Vv(n.allWrites,lA,hn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=Ub(n.visibleWrites,r.path):Ur(r.children,_=>{n.visibleWrites=Ub(n.visibleWrites,Bn(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new jn(null);return null!=r.snap?a=a.set(hn(),!0):Ur(r.children,c=>{a=a.set(new En(c),!0)}),jc(n,new Il(r.path,a,t))}return[]}function wp(n,e,t){return jc(n,new Ru({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function u0(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let c=[];if(a&&("default"===e._queryIdentifier||o0(a,e))){const p=function tC(n,e,t,r){const i=e._queryIdentifier,a=[];let c=[];const p=Bc(n);if("default"===i)for(const[_,E]of n.views.entries())c=c.concat(Yv(E,t,r)),Kv(E)&&(n.views.delete(_),E.query._queryParams.loadsAllData()||a.push(E.query));else{const _=n.views.get(i);_&&(c=c.concat(Yv(_,t,r)),Kv(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return p&&!Bc(n)&&a.push(new(function e0(){return(0,P.hu)(Um,"Reference.ts has not been loaded"),Um}())(e._repo,e._path)),{removed:a,events:c}}(a,e,t,r);(function t0(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const _=p.removed;c=p.events;const E=-1!==_.findIndex(S=>S._queryParams.loadsAllData()),T=n.syncPointTree_.findOnPath(i,(S,N)=>Bc(N));if(E&&!T){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const N=function lC(n){return n.fold((e,t,r)=>{if(t&&Bc(t))return[Bm(t)];{let i=[];return t&&(i=r0(t)),Ur(r,(a,c)=>{i=i.concat(c)}),i}})}(S);for(let U=0;U<N.length;++U){const Z=N[U],ue=Z.query,be=aC(n,Z);n.listenProvider_.startListening(bp(ue),$m(n,ue),be.hashFn,be.onComplete)}}}!T&&_.length>0&&!r&&(E?n.listenProvider_.stopListening(bp(e),null):_.forEach(S=>{const N=n.queryToTagMap.get(js(S));n.listenProvider_.stopListening(bp(S),N)})),function vA(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=js(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,_)}return c}function oC(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(S,N)=>{const U=Qi(S,r);i=i||Dl(N,U),a=a||Bc(N)});let p,c=n.syncPointTree_.get(r);c?(a=a||Bc(c),i=i||Dl(c,hn())):(c=new Xb,n.syncPointTree_=n.syncPointTree_.set(r,c)),null!=i?p=!0:(p=!1,i=Zt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((N,U)=>{const Z=Dl(U,hn());Z&&(i=i.updateImmediateChild(N,Z))}));const _=o0(c,e);if(!_&&!e._queryParams.loadsAllData()){const S=js(e);(0,P.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const N=function wA(){return Vr++}();n.queryToTagMap.set(S,N),n.tagToQueryMap.set(N,S)}let T=function eC(n,e,t,r,i,a){const c=n0(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function pA(n,e){n.eventRegistrations_.push(e)}(c,t),function Jv(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Mn,(a,c)=>{r.push(Uc(a,c))}),t.isFullyInitialized()&&r.push(Mv(t.getNode())),Xv(n,r,t.getNode(),e)}(c,t)}(c,e,t,Uv(n.pendingWriteTree_,r),i,p);if(!_&&!a){const S=s0(c,e);T=T.concat(function EA(n,e,t){const r=e._path,i=$m(n,e),a=aC(n,t),c=n.listenProvider_.startListening(bp(e),i,a.hashFn,a.onComplete),p=n.syncPointTree_.subtree(r);if(i)(0,P.hu)(!Bc(p.value),"If we're adding a query, it shouldn't be shadowed");else{const _=p.fold((E,T,S)=>{if(!Gt(E)&&T&&Bc(T))return[Bm(T).query];{let N=[];return T&&(N=N.concat(r0(T).map(U=>U.query))),Ur(S,(U,Z)=>{N=N.concat(Z)}),N}});for(let E=0;E<_.length;++E){const T=_[E];n.listenProvider_.stopListening(bp(T),$m(n,T))}}return c}(n,e,S))}return T}function Ep(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,p)=>{const E=Dl(p,Qi(c,e));if(E)return E});return jb(i,e,a,t,!0)}function jc(n,e){return Zm(e,n.syncPointTree_,null,Uv(n.pendingWriteTree_,hn()))}function Zm(n,e,t,r){if(Gt(n.path))return Yo(n,e,t,r);{const i=e.get(hn());null==t&&null!=i&&(t=Dl(i,hn()));let a=[];const c=$t(n.path),p=n.operationForChild(c),_=e.children.get(c);if(_&&p){const E=t?t.getImmediateChild(c):null,T=jv(r,c);a=a.concat(Zm(p,_,E,T))}return i&&(a=a.concat(Vm(i,n,r,t))),a}}function Yo(n,e,t,r){const i=e.get(hn());null==t&&null!=i&&(t=Dl(i,hn()));let a=[];return e.children.inorderTraversal((c,p)=>{const _=t?t.getImmediateChild(c):null,E=jv(r,c),T=n.operationForChild(c);T&&(a=a.concat(Yo(T,p,_,E)))}),i&&(a=a.concat(Vm(i,n,r,t))),a}function aC(n,e){const t=e.query,r=$m(n,t);return{hashFn:()=>(function Qb(n){return n.viewCache_.serverCache.getNode()}(e)||Zt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function fh(n,e,t){const r=Zs(n,t);if(r){const i=$s(r),a=i.path,c=i.queryId,p=Qi(a,e);return Hm(n,a,new Pa(ku(c),p))}return[]}(n,t._path,r):function iC(n,e){return jc(n,new Pa({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function MR(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return u0(n,t,null,a)}}}}function $m(n,e){const t=js(e);return n.queryToTagMap.get(t)}function js(n){return n._path.toString()+"$"+n._queryIdentifier}function Zs(n,e){return n.tagToQueryMap.get(e)}function $s(n){const e=n.indexOf("$");return(0,P.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new En(n.substr(0,e))}}function Hm(n,e,t){const r=n.syncPointTree_.get(e);return(0,P.hu)(r,"Missing sync point for query tag that we're tracking"),Vm(r,t,Uv(n.pendingWriteTree_,e),null)}function bp(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function mA(){return(0,P.hu)(jm,"Reference.ts has not been loaded"),jm}())(n._repo,n._path):n}class Cp{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Cp(t)}node(){return this.node_}}class Zc{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Bn(this.path_,e);return new Zc(this.syncTree_,t)}node(){return Ep(this.syncTree_,this.path_)}}const c0=function(n,e,t){return n&&"object"==typeof n?((0,P.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?CA(n[".sv"],e,t):"object"==typeof n[".sv"]?uC(n[".sv"],e):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},CA=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,P.hu)(!1,"Unexpected server value: "+n)},uC=function(n,e,t){n.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,P.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,P.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},d0=function(n,e,t,r){return h0(e,new Zc(t,n),r)},ph=function(n,e,t){return h0(n,new Cp(e),t)};function h0(n,e,t){const r=n.getPriority().val(),i=c0(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,p=c0(c.getValue(),e,t);return p!==c.getValue()||i!==c.getPriority().val()?new Xd(p,lr(i)):n}{const c=n;return a=c,i!==c.getPriority().val()&&(a=a.updatePriority(new Xd(i))),c.forEachChild(Mn,(p,_)=>{const E=h0(_,e.getImmediateChild(p),t);E!==_&&(a=a.updateImmediateChild(p,E))}),a}}class qm{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Ip(n,e){let t=e instanceof En?e:new En(e),r=n,i=$t(t);for(;null!==i;){const a=(0,P.DV)(r.node.children,i)||{children:{},childCount:0};r=new qm(i,r,a),t=Rn(t),i=$t(t)}return r}function Sl(n){return n.node.value}function gh(n,e){n.node.value=e,Gm(n)}function f0(n){return n.node.childCount>0}function Tp(n,e){Ur(n.node.children,(t,r)=>{e(new qm(t,n,r))})}function p0(n,e,t,r){t&&!r&&e(n),Tp(n,i=>{p0(i,e,!0,r)}),t&&r&&e(n)}function mh(n){return new En(null===n.parent?n.name:mh(n.parent)+"/"+n.name)}function Gm(n){null!==n.parent&&function hC(n,e,t){const r=function cC(n){return void 0===Sl(n)&&!f0(n)}(t),i=(0,P.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Gm(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Gm(n))}(n.parent,n.name,n)}const IA=/[\[\].#$\/\u0000-\u001F\u007F]/,TA=/[\[\].#$\u0000-\u001F\u007F]/,g0=10485760,Wm=function(n){return"string"==typeof n&&0!==n.length&&!IA.test(n)},fC=function(n){return"string"==typeof n&&0!==n.length&&!TA.test(n)},Dp=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!am(n)||n&&"object"==typeof n&&(0,P.r3)(n,".sv")},Fa=function(n,e,t,r){r&&void 0===e||Ap((0,P.gK)(n,"value"),e,t)},Ap=function(n,e,t){const r=t instanceof En?new WD(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Du(r));if("function"==typeof e)throw new Error(n+"contains a function "+Du(r)+" with contents = "+e.toString());if(am(e))throw new Error(n+"contains "+e.toString()+" "+Du(r));if("string"==typeof e&&e.length>g0/3&&(0,P.ug)(e)>g0)throw new Error(n+"contains a string greater than "+g0+" utf8 bytes "+Du(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Ur(e,(c,p)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(a=!0,!Wm(c)))throw new Error(n+" contains an invalid key ("+c+") "+Du(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function yb(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,P.ug)(e),Iv(n)})(r,c),Ap(n,p,r),function vb(n){const e=n.parts_.pop();n.byteLength_-=(0,P.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Du(r)+" in addition to actual children.")}},pC=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,P.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Ur(e,(c,p)=>{const _=new En(c);if(Ap(i,p,Bn(t,_)),".priority"===Qd(_)&&!Dp(p))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=sp(r);for(let c=0;c<a.length;c++)if((".priority"!==a[c]||c!==a.length-1)&&!Wm(a[c]))throw new Error(n+"contains an invalid key ("+a[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(GD);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Wo(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},m0=function(n,e,t){if(!t||void 0!==e){if(am(e))throw new Error((0,P.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Dp(e))throw new Error((0,P.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Sp=function(n,e,t,r){if(!(r&&void 0===t||Wm(t)))throw new Error((0,P.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},xp=function(n,e,t,r){if(!(r&&void 0===t||fC(t)))throw new Error((0,P.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},_o=function(n,e){if(".info"===$t(e))throw new Error(n+" failed = Can't modify data under /.info/")},gC=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Wm(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),fC(n)}(t))throw new Error((0,P.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class xA{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function kp(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!op(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function zm(n,e,t){kp(n,t),_0(n,r=>op(r,e))}function Hs(n,e,t){kp(n,t),_0(n,r=>Wo(r,e)||Wo(e,r))}function _0(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(mC(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function mC(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Wd&&vr("event: "+t.toString()),ep(r)}}}const y0="repo_interrupt";class yC{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new xA,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Bs(),this.transactionQueueTree_=new qm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function v0(n){const t=n.infoData_.getNode(new En(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function _h(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:v0(n)})}function Nu(n,e,t,r,i){n.dataUpdateCount++;const a=new En(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const _=(0,P.UI)(t,E=>lr(E));c=function sC(n,e,t,r){const i=Zs(n,r);if(i){const a=$s(i),c=a.path,p=a.queryId,_=Qi(c,e),E=jn.fromObject(t);return Hm(n,c,new Vc(ku(p),_,E))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=lr(t);c=function yA(n,e,t,r){const i=Zs(n,r);if(null!=i){const a=$s(i),c=a.path,p=a.queryId,_=Qi(c,e);return Hm(n,c,new Ru(ku(p),_,t))}return[]}(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,P.UI)(t,E=>lr(E));c=function rC(n,e,t){const r=jn.fromObject(t);return jc(n,new Vc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=lr(t);c=wp(n.serverSyncTree_,a,_)}let p=a;c.length>0&&(p=$c(n,a)),Hs(n.eventQueue_,p,c)}function wC(n,e){Pu(n,"connected",e),!1===e&&function CC(n){xl(n,"onDisconnectEvents");const e=_h(n),t=Bs();Cl(n.onDisconnect_,hn(),(i,a)=>{const c=d0(i,a,n.serverSyncTree_,e);Na(t,i,c)});let r=[];Cl(t,hn(),(i,a)=>{r=r.concat(wp(n.serverSyncTree_,i,a));const c=I0(n,i);$c(n,c)}),n.onDisconnect_=Bs(),Hs(n.eventQueue_,hn(),r)}(n)}function Pu(n,e,t){const r=new En("/.info/"+e),i=lr(t);n.infoData_.updateSnapshot(r,i);const a=wp(n.infoSyncTree_,r,i);Hs(n.eventQueue_,r,a)}function w0(n){return n.nextWriteId_++}function EC(n,e,t,r,i){xl(n,"set",{path:e.toString(),value:t,priority:r});const a=_h(n),c=lr(t,r),p=Ep(n.serverSyncTree_,e),_=ph(c,p,a),E=w0(n),T=l0(n.serverSyncTree_,e,_,E,!0);kp(n.eventQueue_,T),n.server_.put(e.toString(),c.val(!0),(N,U)=>{const Z="ok"===N;Z||gi("set at "+e+" failed: "+N);const ue=Al(n.serverSyncTree_,E,!Z);Hs(n.eventQueue_,e,ue),Cn(0,i,N,U)});const S=I0(n,e);$c(n,S),Hs(n.eventQueue_,S,[])}function GR(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Qr(n.onDisconnect_,e),Cn(0,t,r,i)})}function yt(n,e,t,r){const i=lr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,c)=>{"ok"===a&&Na(n.onDisconnect_,e,i),Cn(0,r,a,c)})}function yh(n,e,t){let r;r=".info"===$t(e._path)?u0(n.infoSyncTree_,e,t):u0(n.serverSyncTree_,e,t),zm(n.eventQueue_,e._path,r)}function IC(n){n.persistentConnection_&&n.persistentConnection_.interrupt(y0)}function xl(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),vr(t,...e)}function Cn(n,e,t,r){e&&ep(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const c=new Error(a);c.code=i,e(c)}})}function Ym(n,e,t){return Ep(n.serverSyncTree_,e,t)||Zt.EMPTY_NODE}function Qm(n,e=n.transactionQueueTree_){if(e||Jm(n,e),Sl(e)){const t=C0(n,e);(0,P.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function PA(n,e,t){const r=t.map(E=>E.currentWriteId),i=Ym(n,e,r);let a=i;const c=i.hash();for(let E=0;E<t.length;E++){const T=t[E];(0,P.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const S=Qi(e,T.path);a=a.updateChild(S,T.currentOutputSnapshotRaw)}const p=a.val(!0),_=e;n.server_.put(_.toString(),p,E=>{xl(n,"transaction put response",{path:_.toString(),status:E});let T=[];if("ok"===E){const S=[];for(let N=0;N<t.length;N++)t[N].status=2,T=T.concat(Al(n.serverSyncTree_,t[N].currentWriteId)),t[N].onComplete&&S.push(()=>t[N].onComplete(null,!0,t[N].currentOutputSnapshotResolved)),t[N].unwatcher();Jm(n,Ip(n.transactionQueueTree_,e)),Qm(n,n.transactionQueueTree_),Hs(n.eventQueue_,e,T);for(let N=0;N<S.length;N++)ep(S[N])}else{if("datastale"===E)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{gi("transaction at "+_.toString()+" failed: "+E);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=E}$c(n,e)}},c)}(n,mh(e),t)}else f0(e)&&Tp(e,t=>{Qm(n,t)})}function $c(n,e){const t=b0(n,e),r=mh(t);return function TC(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(p=>0===p.status).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const _=e[p],E=Qi(t,_.path);let S,T=!1;if((0,P.hu)(null!==E,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)T=!0,S=_.abortReason,i=i.concat(Al(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)T=!0,S="maxretry",i=i.concat(Al(n.serverSyncTree_,_.currentWriteId,!0));else{const N=Ym(n,_.path,c);_.currentInputSnapshot=N;const U=e[p].update(N.val());if(void 0!==U){Ap("transaction failed: Data returned ",U,_.path);let Z=lr(U);"object"==typeof U&&null!=U&&(0,P.r3)(U,".priority")||(Z=Z.updatePriority(N.getPriority()));const be=_.currentWriteId,Ke=_h(n),qe=ph(Z,N,Ke);_.currentOutputSnapshotRaw=Z,_.currentOutputSnapshotResolved=qe,_.currentWriteId=w0(n),c.splice(c.indexOf(be),1),i=i.concat(l0(n.serverSyncTree_,_.path,qe,_.currentWriteId,_.applyLocally)),i=i.concat(Al(n.serverSyncTree_,be,!0))}else T=!0,S="nodata",i=i.concat(Al(n.serverSyncTree_,_.currentWriteId,!0))}Hs(n.eventQueue_,t,i),i=[],T&&(e[p].status=2,setTimeout(e[p].unwatcher,Math.floor(0)),e[p].onComplete&&r.push("nodata"===S?()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot):()=>e[p].onComplete(new Error(S),!1,null)))}Jm(n,n.transactionQueueTree_);for(let p=0;p<r.length;p++)ep(r[p]);Qm(n,n.transactionQueueTree_)}(n,C0(n,t),r),r}function b0(n,e){let t,r=n.transactionQueueTree_;for(t=$t(e);null!==t&&void 0===Sl(r);)r=Ip(r,t),t=$t(e=Rn(e));return r}function C0(n,e){const t=[];return DC(n,e,t),t.sort((r,i)=>r.order-i.order),t}function DC(n,e,t){const r=Sl(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Tp(e,i=>{DC(n,i,t)})}function Jm(n,e){const t=Sl(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,gh(e,t.length>0?t:void 0)}Tp(e,r=>{Jm(n,r)})}function I0(n,e){const t=mh(b0(n,e)),r=Ip(n.transactionQueueTree_,e);return function dC(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Hc(n,i)}),Hc(n,r),p0(r,i=>{Hc(n,i)}),t}function Hc(n,e){const t=Sl(e);if(t){const r=[];let i=[],a=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,P.hu)(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):((0,P.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(Al(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===a?gh(e,void 0):t.length=a+1,Hs(n.eventQueue_,mh(e),i);for(let c=0;c<r.length;c++)ep(r[c])}}const T0=function(n,e){const t=Xm(n),r=t.namespace;return"firebase.com"===t.domain&&ho(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ho("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&gi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new fm(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new En(t.pathString)}},Xm=function(n){let e="",t="",r="",i="",a="",c=!0,p="https",_=443;if("string"==typeof n){let E=n.indexOf("//");E>=0&&(p=n.substring(0,E-1),n=n.substring(E+2));let T=n.indexOf("/");-1===T&&(T=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(T,S)),T<S&&(i=function OA(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(T,S)));const N=function FA(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):gi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));E=e.indexOf(":"),E>=0?(c="https"===p||"wss"===p,_=parseInt(e.substring(E+1),10)):E=e.length;const U=e.slice(0,E);if("localhost"===U.toLowerCase())t="localhost";else if(U.split(".").length<=2)t=U;else{const Z=e.indexOf(".");r=e.substring(0,Z).toLowerCase(),t=e.substring(Z+1),a=r}"ns"in N&&(a=N.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:c,scheme:p,pathString:i,namespace:a}};class D0{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,P.Pz)(this.snapshot.exportVal())}}class A0{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class S0{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,P.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class AC{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new P.BH;return GR(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){_o("OnDisconnect.remove",this._path);const e=new P.BH;return yt(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){_o("OnDisconnect.set",this._path),Fa("OnDisconnect.set",e,this._path,!1);const t=new P.BH;return yt(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){_o("OnDisconnect.setWithPriority",this._path),Fa("OnDisconnect.setWithPriority",e,this._path,!1),m0("OnDisconnect.setWithPriority",t,!1);const r=new P.BH;return function RA(n,e,t,r,i){const a=lr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(c,p)=>{"ok"===c&&Na(n.onDisconnect_,e,a),Cn(0,i,c,p)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){_o("OnDisconnect.update",this._path),pC("OnDisconnect.update",e,this._path,!1);const t=new P.BH;return function MA(n,e,t,r){if((0,P.xb)(t))return vr("onDisconnect().update() called with empty data.  Don't do anything."),void Cn(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Ur(t,(c,p)=>{const _=lr(p);Na(n.onDisconnect_,Bn(e,c),_)}),Cn(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Jr{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Gt(this._path)?null:Qd(this._path)}get ref(){return new yo(this._repo,this._path)}get _queryIdentifier(){const e=Nb(this._queryParams),t=JE(e);return"{}"===t?"default":t}get _queryObject(){return Nb(this._queryParams)}isEqual(e){if(!((e=(0,P.m9)(e))instanceof Jr))return!1;const t=this._repo===e._repo,r=op(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Cv(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Ou(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Fu(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ko){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==wl)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Ra)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Mn){if(null!=e&&!Dp(e)||null!=t&&!Dp(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,P.hu)(n.getIndex()instanceof Rb||n.getIndex()===kv,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function e_(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class yo extends Jr{constructor(e,t){super(e,t,new Dm,!1)}get parent(){const e=_m(this._path);return null===e?null:new yo(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Lu{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new En(e),r=qc(this.ref,e);return new Lu(this._node.getChild(t),r,Mn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Lu(i,qc(this.ref,r),Mn)))}hasChild(e){const t=new En(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function x0(n,e){return(n=(0,P.m9)(n))._checkNotDeleted("ref"),void 0!==e?qc(n._root,e):n._root}function k0(n,e){(n=(0,P.m9)(n))._checkNotDeleted("refFromURL");const t=T0(e,n._repo.repoInfo_.nodeAdmin);gC("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ho("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),x0(n,t.path.toString())}function qc(n,e){return null===$t((n=(0,P.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),xp("child","path",t,!1)):xp("child","path",e,!1),new yo(n._repo,Bn(n._path,e));var t}function SC(n,e){n=(0,P.m9)(n),_o("set",n._path),Fa("set",e,n._path,!1);const t=new P.BH;return EC(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function YR(n,e){pC("update",e,n._path,!1);const t=new P.BH;return function bC(n,e,t,r){xl(n,"update",{path:e.toString(),value:t});let i=!0;const a=_h(n),c={};if(Ur(t,(p,_)=>{i=!1,c[p]=d0(Bn(e,p),lr(_),n.serverSyncTree_,a)}),i)vr("update() called with empty data.  Don't do anything."),Cn(0,r,"ok",void 0);else{const p=w0(n),_=function _A(n,e,t,r){!function oA(n,e,t,r){(0,P.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Nm(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=jn.fromObject(t);return jc(n,new Vc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,p);kp(n.eventQueue_,_),n.server_.merge(e.toString(),t,(E,T)=>{const S="ok"===E;S||gi("update at "+e+" failed: "+E);const N=Al(n.serverSyncTree_,p,!S),U=N.length>0?$c(n,e):e;Hs(n.eventQueue_,U,N),Cn(0,r,E,T)}),Ur(t,E=>{const T=I0(n,Bn(e,E));$c(n,T)}),Hs(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function xC(n){return function E0(n,e){const t=function qR(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(E,T)=>{const S=Qi(E,t);r=r||Dl(T,S)});let i=n.syncPointTree_.get(t);i?r=r||Dl(i,hn()):(i=new Xb,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,c=a?new Tl(r,!0,!1):null;return function Jb(n){return Rm(n.viewCache_)}(n0(i,e,Uv(n.pendingWriteTree_,e._path),a?c.getNode():Zt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=lr(r).withIndex(e._queryParams.getIndex()),a=wp(n.serverSyncTree_,e._path,i);return zm(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(xl(n,"get for query "+(0,P.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,P.m9)(n))._repo,n).then(e=>new Lu(e,new yo(n._repo,n._path),n._queryParams.getIndex()))}class Gc{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new D0("value",this,new Lu(e.snapshotNode,new yo(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new A0(this,e,t):null}matches(e){return e instanceof Gc&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class t_{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new A0(this,e,t):null}createEvent(e,t){(0,P.hu)(null!=e.childName,"Child events should have a childName.");const r=qc(new yo(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new D0(e.type,this,new Lu(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t_&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Rp(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,E=(T,S)=>{yh(n._repo,n,p),_(T,S)};E.userCallback=t.userCallback,E.context=t.context,t=E}const c=new S0(t,a||void 0),p="value"===e?new Gc(c):new t_(e,c);return function NA(n,e,t){let r;r=".info"===$t(e._path)?oC(n.infoSyncTree_,e,t):oC(n.serverSyncTree_,e,t),zm(n.eventQueue_,e._path,r)}(n._repo,n,p),()=>yh(n._repo,n,p)}function n_(n,e,t,r){return Rp(n,"value",e,t,r)}function vh(n,e,t,r){return Rp(n,"child_added",e,t,r)}function kC(n,e,t,r){return Rp(n,"child_changed",e,t,r)}function RC(n,e,t,r){return Rp(n,"child_moved",e,t,r)}function MC(n,e,t,r){return Rp(n,"child_removed",e,t,r)}function NC(n,e,t){let r=null;const i=t?new S0(t):null;"value"===e?r=new Gc(i):e&&(r=new t_(e,i)),yh(n._repo,n,r)}class Qo{}class R0 extends Qo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fa("endAt",this._value,e._path,!0);const t=nh(e._queryParams,this._value,this._key);if(e_(t),Fu(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Jr(e._repo,e._path,t,e._orderByCalled)}}class jA extends Qo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fa("endBefore",this._value,e._path,!1);const t=function rh(n,e,t){let r,i;return n.index_===Ko?("string"==typeof e&&(e=Rv(e)),i=nh(n,e,t)):(r=null==t?wl:Rv(t),i=nh(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(e_(t),Fu(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Jr(e._repo,e._path,t,e._orderByCalled)}}class PC extends Qo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fa("startAt",this._value,e._path,!0);const t=Pv(e._queryParams,this._value,this._key);if(e_(t),Fu(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Jr(e._repo,e._path,t,e._orderByCalled)}}class ZA extends Qo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fa("startAfter",this._value,e._path,!1);const t=function rA(n,e,t){let r;if(n.index_===Ko)"string"==typeof e&&(e=XD(e)),r=Pv(n,e,t);else{let i;i=null==t?Ra:XD(t),r=Pv(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(e_(t),Fu(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Jr(e._repo,e._path,t,e._orderByCalled)}}class $A extends Qo{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Jr(e._repo,e._path,function tA(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class HA extends Qo{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Jr(e._repo,e._path,function nA(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class qA extends Qo{constructor(e){super(),this._path=e}_apply(e){Ou(e,"orderByChild");const t=new En(this._path);if(Gt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Rb(t),i=Am(e._queryParams,r);return Fu(i),new Jr(e._repo,e._path,i,!0)}}class VC extends Qo{_apply(e){Ou(e,"orderByKey");const t=Am(e._queryParams,Ko);return Fu(t),new Jr(e._repo,e._path,t,!0)}}class WA extends Qo{_apply(e){Ou(e,"orderByPriority");const t=Am(e._queryParams,Mn);return Fu(t),new Jr(e._repo,e._path,t,!0)}}class N0 extends Qo{_apply(e){Ou(e,"orderByValue");const t=Am(e._queryParams,kv);return Fu(t),new Jr(e._repo,e._path,t,!0)}}class BC extends Qo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Fa("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new R0(this._value,this._key)._apply(new PC(this._value,this._key)._apply(e))}}function Jo(n,...e){let t=(0,P.m9)(n);for(const r of e)t=r._apply(t);return t}(function gA(n){(0,P.hu)(!Um,"__referenceConstructor has already been defined"),Um=n})(yo),function nC(n){(0,P.hu)(!jm,"__referenceConstructor has already been defined"),jm=n}(yo);const P0={};function ZC(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||ho("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),vr("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,E,c=T0(a,i),p=c.repoInfo;"undefined"!=typeof process&&(E=process.env.FIREBASE_DATABASE_EMULATOR_HOST),E?(_=!0,a=`http://${E}?ns=${p.namespace}`,c=T0(a,i),p=c.repoInfo):_=!c.repoInfo.secure;const T=i&&_?new Oc(Oc.OWNER):new bu(n.name,n.options,e);gC("Invalid Firebase Database URL",c),Gt(c.path)||ho("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function $C(n,e,t,r){let i=P0[e.name];i||(i={},P0[e.name]=i);let a=i[n.toURLString()];return a&&ho("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new yC(n,false,t,r),i[n.toURLString()]=a,a}(p,n,T,new OR(n.name,t));return new e1(S,n)}class e1{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function vC(n,e,t){if(n.stats_=Iu(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Sm(n.repoInfo_,(r,i,a,c)=>{Nu(n,r,i,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>wC(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new zo(n.repoInfo_,e,(r,i,a,c)=>{Nu(n,r,i,a,c)},r=>{wC(n,r)},r=>{!function kA(n,e){Ur(e,(t,r)=>{Pu(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function rp(n,e){const t=n.toString();return np[t]||(np[t]=e()),np[t]}(n.repoInfo_,()=>new ah(n.stats_,n.server_)),n.infoData_=new Ov,n.infoSyncTree_=new a0({startListening:(r,i,a,c)=>{let p=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(p=wp(n.infoSyncTree_,r._path,_),setTimeout(()=>{c("ok")},0)),p},stopListening:()=>{}}),Pu(n,"connected",!1),n.serverSyncTree_=new a0({startListening:(r,i,a,c)=>(n.server_.listen(r,a,i,(p,_)=>{const E=c(p,_);Hs(n.eventQueue_,r._path,E)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new yo(this._repo,hn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function XA(n,e){const t=P0[e];(!t||t[n.key]!==n)&&ho(`Database ${e}(${n.repoInfo_}) has already been deleted.`),IC(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ho("Cannot call "+e+" on a deleted database.")}}function r1(n,e){OD(n,e)}const F0={".sv":"timestamp"};class i1{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}zo.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},zo.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function O0(n){ev(Yi.SDK_VERSION),(0,Yi._registerComponent)(new Ho.wA("database",(e,{instanceIdentifier:t})=>ZC(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Yi.registerVersion)(Pt,"0.12.7",n),(0,Yi.registerVersion)(Pt,"0.12.7","esm2017")}();const KC=new qo.Yd("@firebase/database-compat"),YC=function(n){KC.warn("FIREBASE WARNING: "+n)};class a1{constructor(e){this._delegate=e}cancel(e){(0,P.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,P.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,P.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,P.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,P.Dv)("OnDisconnect.set",1,2,arguments.length),(0,P.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,P.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,P.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,YC("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,P.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class Mp{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,P.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Uu{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,P.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,P.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,P.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,P.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,P.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),xp("DataSnapshot.child","path",e,!1),new Uu(this._database,this._delegate.child(e))}hasChild(e){return(0,P.Dv)("DataSnapshot.hasChild",1,1,arguments.length),xp("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,P.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,P.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,P.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Uu(this._database,t)))}hasChildren(){return(0,P.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,P.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,P.Dv)("DataSnapshot.ref",0,0,arguments.length),new _i(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ur{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,P.Dv)("Query.on",2,4,arguments.length),(0,P.Wj)("Query.on","callback",t,!1);const c=ur.getCancelAndContextArgs_("Query.on",r,i),p=(E,T)=>{t.call(c.context,new Uu(this.database,E),T)};p.userCallback=t,p.context=c.context;const _=null===(a=c.cancel)||void 0===a?void 0:a.bind(c.context);switch(e){case"value":return n_(this._delegate,p,_),t;case"child_added":return vh(this._delegate,p,_),t;case"child_removed":return MC(this._delegate,p,_),t;case"child_changed":return kC(this._delegate,p,_),t;case"child_moved":return RC(this._delegate,p,_),t;default:throw new Error((0,P.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,P.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,P.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,P.Wj)("Query.off","callback",t,!0),(0,P.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,NC(this._delegate,e,i)}else NC(this._delegate,e)}get(){return xC(this._delegate).then(e=>new Uu(this.database,e))}once(e,t,r,i){(0,P.Dv)("Query.once",1,4,arguments.length),(0,P.Wj)("Query.once","callback",t,!0);const a=ur.getCancelAndContextArgs_("Query.once",r,i),c=new P.BH,p=(E,T)=>{const S=new Uu(this.database,E);t&&t.call(a.context,S,T),c.resolve(S)};p.userCallback=t,p.context=a.context;const _=E=>{a.cancel&&a.cancel.call(a.context,E),c.reject(E)};switch(e){case"value":n_(this._delegate,p,_,{onlyOnce:!0});break;case"child_added":vh(this._delegate,p,_,{onlyOnce:!0});break;case"child_removed":MC(this._delegate,p,_,{onlyOnce:!0});break;case"child_changed":kC(this._delegate,p,_,{onlyOnce:!0});break;case"child_moved":RC(this._delegate,p,_,{onlyOnce:!0});break;default:throw new Error((0,P.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,P.Dv)("Query.limitToFirst",1,1,arguments.length),new ur(this.database,Jo(this._delegate,function LC(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new $A(n)}(e)))}limitToLast(e){return(0,P.Dv)("Query.limitToLast",1,1,arguments.length),new ur(this.database,Jo(this._delegate,function M0(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new HA(n)}(e)))}orderByChild(e){return(0,P.Dv)("Query.orderByChild",1,1,arguments.length),new ur(this.database,Jo(this._delegate,function UC(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return xp("orderByChild","path",n,!1),new qA(n)}(e)))}orderByKey(){return(0,P.Dv)("Query.orderByKey",0,0,arguments.length),new ur(this.database,Jo(this._delegate,function GA(){return new VC}()))}orderByPriority(){return(0,P.Dv)("Query.orderByPriority",0,0,arguments.length),new ur(this.database,Jo(this._delegate,function zA(){return new WA}()))}orderByValue(){return(0,P.Dv)("Query.orderByValue",0,0,arguments.length),new ur(this.database,Jo(this._delegate,function KA(){return new N0}()))}startAt(e=null,t){return(0,P.Dv)("Query.startAt",0,2,arguments.length),new ur(this.database,Jo(this._delegate,function OC(n=null,e){return Sp("startAt","key",e,!0),new PC(n,e)}(e,t)))}startAfter(e=null,t){return(0,P.Dv)("Query.startAfter",0,2,arguments.length),new ur(this.database,Jo(this._delegate,function FC(n,e){return Sp("startAfter","key",e,!0),new ZA(n,e)}(e,t)))}endAt(e=null,t){return(0,P.Dv)("Query.endAt",0,2,arguments.length),new ur(this.database,Jo(this._delegate,function BA(n,e){return Sp("endAt","key",e,!0),new R0(n,e)}(e,t)))}endBefore(e=null,t){return(0,P.Dv)("Query.endBefore",0,2,arguments.length),new ur(this.database,Jo(this._delegate,function wh(n,e){return Sp("endBefore","key",e,!0),new jA(n,e)}(e,t)))}equalTo(e,t){return(0,P.Dv)("Query.equalTo",1,2,arguments.length),new ur(this.database,Jo(this._delegate,function YA(n,e){return Sp("equalTo","key",e,!0),new BC(n,e)}(e,t)))}toString(){return(0,P.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,P.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,P.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ur))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,P.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,P.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,P.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new _i(this.database,new yo(this._delegate._repo,this._delegate._path))}}class _i extends ur{constructor(e,t){super(e,new Jr(t._repo,t._path,new Dm,!1)),this.database=e,this._delegate=t}getKey(){return(0,P.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,P.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new _i(this.database,qc(this._delegate,e))}getParent(){(0,P.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new _i(this.database,e):null}getRoot(){return(0,P.Dv)("Reference.root",0,0,arguments.length),new _i(this.database,this._delegate.root)}set(e,t){(0,P.Dv)("Reference.set",1,2,arguments.length),(0,P.Wj)("Reference.set","onComplete",t,!0);const r=SC(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,P.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,YC("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}_o("Reference.update",this._delegate._path),(0,P.Wj)("Reference.update","onComplete",t,!0);const r=YR(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,P.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function KR(n,e,t){if(_o("setWithPriority",n._path),Fa("setWithPriority",e,n._path,!1),m0("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new P.BH;return EC(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,P.Dv)("Reference.remove",0,1,arguments.length),(0,P.Wj)("Reference.remove","onComplete",e,!0);const t=function VA(n){return _o("remove",n._path),SC(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,P.Dv)("Reference.transaction",1,3,arguments.length),(0,P.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,P.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,P.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function s1(n,e,t){var r;if(n=(0,P.m9)(n),_o("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new P.BH,p=n_(n,()=>{});return function WR(n,e,t,r,i,a){xl(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:om(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},p=Ym(n,e,void 0);c.currentInputSnapshot=p;const _=c.update(p.val());if(void 0===_)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Ap("transaction failed: Data returned ",_,c.path),c.status=0;const E=Ip(n.transactionQueueTree_,e),T=Sl(E)||[];let S;T.push(c),gh(E,T),"object"==typeof _&&null!==_&&(0,P.r3)(_,".priority")?(S=(0,P.DV)(_,".priority"),(0,P.hu)(Dp(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(Ep(n.serverSyncTree_,e)||Zt.EMPTY_NODE).getPriority().val();const N=_h(n),U=lr(_,S),Z=ph(U,p,N);c.currentOutputSnapshotRaw=U,c.currentOutputSnapshotResolved=Z,c.currentWriteId=w0(n);const ue=l0(n.serverSyncTree_,e,Z,c.currentWriteId,c.applyLocally);Hs(n.eventQueue_,e,ue),Qm(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,E,T)=>{let S=null;_?a.reject(_):(S=new Lu(T,new yo(n._repo,n._path),Mn),a.resolve(new i1(E,S)))},p,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new Mp(a.committed,new Uu(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,P.Dv)("Reference.setPriority",1,2,arguments.length),(0,P.Wj)("Reference.setPriority","onComplete",t,!0);const r=function zR(n,e){n=(0,P.m9)(n),_o("setPriority",n._path),m0("setPriority",e,!1);const t=new P.BH;return EC(n._repo,Bn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,P.Dv)("Reference.push",0,2,arguments.length),(0,P.Wj)("Reference.push","onComplete",t,!0);const r=function UA(n,e){n=(0,P.m9)(n),_o("push",n._path),Fa("push",e,n._path,!0);const t=v0(n._repo),r=BR(t),i=qc(n,r),a=qc(n,r);let c;return c=null!=e?SC(a,e).then(()=>a):Promise.resolve(a),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new _i(this.database,c));t&&i.then(()=>t(null),c=>t(c));const a=new _i(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return _o("Reference.onDisconnect",this._delegate._path),new a1(new AC(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Np{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function qC(n,e,t,r={}){(n=(0,P.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ho("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ho('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Oc(Oc.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,P.Sg)(r.mockUserToken,n.app.options.projectId);a=new Oc(c)}!function JA(n,e,t,r){n.repoInfo_=new fm(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,P.Dv)("database.ref",0,1,arguments.length),e instanceof _i){const t=k0(this._delegate,e.toString());return new _i(this,t)}{const t=x0(this._delegate,e);return new _i(this,t)}}refFromURL(e){(0,P.Dv)("database.refFromURL",1,1,arguments.length);const r=k0(this._delegate,e);return new _i(this,r)}goOffline(){return(0,P.Dv)("database.goOffline",0,0,arguments.length),function t1(n){(n=(0,P.m9)(n))._checkNotDeleted("goOffline"),IC(n._repo)}(this._delegate)}goOnline(){return(0,P.Dv)("database.goOnline",0,0,arguments.length),function n1(n){(n=(0,P.m9)(n))._checkNotDeleted("goOnline"),function Km(n){n.persistentConnection_&&n.persistentConnection_.resume(y0)}(n._repo)}(this._delegate)}}Np.ServerValue={TIMESTAMP:function GC(){return F0}(),increment:n=>function L0(n){return{".sv":{increment:n}}}(n)};var JC=Object.freeze({__proto__:null,initStandalone:function eM({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){ev(t);const c=new Ho.zt("auth-internal",new Ho.H0("database-standalone"));return c.setComponent(new Ho.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Np(ZC(n,c,void 0,e,a),n),namespace:i}}});const l1=Np.ServerValue;!function u1(n){n.INTERNAL.registerComponent(new Ho.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Np(i,r)},"PUBLIC").setServiceProps({Reference:_i,Query:ur,Database:Np,DataSnapshot:Uu,enableLogging:r1,INTERNAL:JC,ServerValue:l1}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.7")}(Jy.Z);var r_=F(5363),c1=F(6063);class XC extends Hi.x{constructor(e=1/0,t=1/0,r=c1.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let p=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)p=_;p&&r.splice(0,p+1)}}}function U0(n,e,t){var r,i;let a,c=!1;return n&&"object"==typeof n?(a=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,c=!!n.refCount,t=n.scheduler):a=null!=n?n:1/0,(0,QE.B)({connector:()=>new XC(a,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}function i_(n,e){return(0,bd.m)(e)?Dn(()=>n,e):Dn(()=>n)}var Eh=F(9468);F(5867);const m1=new Map,nI={activated:!1,tokenObservers:[]},oM={initialized:!1,enabled:!1};function Br(n){return m1.get(n)||nI}function qs(n,e){m1.set(n,e)}function o_(){return oM}class E1{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ge.Z)(function*(){t.stop();try{t.pending=new P.BH,yield function b1(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new P.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const jr=new P.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function j0(n){if(!Br(n).activated)throw jr.create("use-before-activation",{appName:n.name})}function l_(n,e){return Z0.apply(this,arguments)}function Z0(){return(Z0=(0,ge.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(e),headers:r};let c,p;try{c=yield fetch(n,a)}catch(S){throw jr.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==c.status)throw jr.create("fetch-status-error",{httpStatus:c.status});try{p=yield c.json()}catch(S){throw jr.create("fetch-parse-error",{originalErrorMessage:S.message})}const _=p.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw jr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const E=1e3*Number(_[1]),T=Date.now();return{token:p.attestationToken,expireTimeMillis:T+E,issuedAtTimeMillis:T}})).apply(this,arguments)}function I1(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const kl="firebase-app-check-store";let Ch=null;function Xo(){return Ch||(Ch=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(jr.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(kl,{keyPath:"compositeKey"})}}catch(t){e(jr.create("storage-open",{originalErrorMessage:t.message}))}}),Ch)}function H0(){return(H0=(0,ge.Z)(function*(n,e){const r=(yield Xo()).transaction(kl,"readwrite"),a=r.objectStore(kl).put({compositeKey:n,value:e});return new Promise((c,p)=>{a.onsuccess=_=>{c()},r.onerror=_=>{var E;p(jr.create("storage-set",{originalErrorMessage:null===(E=_.target.error)||void 0===E?void 0:E.message}))}})})).apply(this,arguments)}const Bp=new qo.Yd("@firebase/app-check");function c_(n,e){return(0,P.hl)()?function $0(n,e){return function lI(n,e){return H0.apply(this,arguments)}(function uI(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Bp.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function hI(){return o_().enabled}function x1(){return jp.apply(this,arguments)}function jp(){return(jp=(0,ge.Z)(function*(){const n=o_();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const fI={error:"UNKNOWN_ERROR"};function W0(n){return P.US.encodeString(JSON.stringify(n),!1)}function Th(n){return z0.apply(this,arguments)}function z0(){return(z0=(0,ge.Z)(function*(n,e=!1){const t=n.app;j0(t);const r=Br(t);let a,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&Zp(_)&&(i=_)}if(!e&&i&&Zp(i))return{token:i.token};let p,c=!1;if(hI()){r.exchangeTokenPromise||(r.exchangeTokenPromise=l_(I1(t,yield x1()),n.heartbeatServiceProvider).then(E=>(r.exchangeTokenPromise=void 0,E)),c=!0);const _=yield r.exchangeTokenPromise;return yield c_(t,_),qs(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),c=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Bp.warn(_.message):Bp.error(_),a=_}return i?(p={token:i.token},qs(t,Object.assign(Object.assign({},r),{token:i})),yield c_(t,i)):p=k1(a),c&&d_(t,p),p})).apply(this,arguments)}function Y0(n,e){const t=Br(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),qs(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function pI(n){const{app:e}=n,t=Br(e);let r=t.tokenRefresher;r||(r=function gI(n){const{app:e}=n;return new E1((0,ge.Z)(function*(){let r;if(r=Br(e).token?yield Th(n,!0):yield Th(n),r.error)throw r.error}),()=>!0,()=>{const t=Br(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),qs(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function d_(n,e){const t=Br(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function Zp(n){return n.expireTimeMillis-Date.now()>0}function k1(n){return{token:W0(fI),error:n}}class mI{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Br(this.app);for(const t of e)Y0(this.app,t.next);return Promise.resolve()}}const ew="app-check-internal";!function f_(){(0,Yi._registerComponent)(new Ho.wA("app-check",n=>function _I(n,e){return new mI(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(ew).initialize()})),(0,Yi._registerComponent)(new Ho.wA(ew,n=>function R1(n){return{getToken:e=>Th(n,e),addTokenListener:e=>function K0(n,e,t,r){const{app:i}=n,a=Br(i),c={next:t,error:r,type:e};if(qs(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,c]})),a.token&&Zp(a.token)){const p=a.token;Promise.resolve().then(()=>{t({token:p.token}),pI(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>pI(n))}(n,"INTERNAL",e),removeTokenListener:e=>Y0(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Yi.registerVersion)("@firebase/app-check","0.5.5")}();class Wc{constructor(){return(0,un.vb)("app-check")}}"undefined"!=typeof window&&window;var Hp=F(127);const rw=new u.OlP("angularfire2.auth.use-emulator"),iw=new u.OlP("angularfire2.auth.settings"),OI=new u.OlP("angularfire2.auth.tenant-id"),p_=new u.OlP("angularfire2.auth.langugage-code"),FI=new u.OlP("angularfire2.auth.use-device-language"),LI=new u.OlP("angularfire.auth.persistence"),UI=(n,e,t,r,i,a,c,p)=>(0,Lr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),c)for(const[E,T]of Object.entries(c))_.settings[E]=T;return p&&_.setPersistence(p),_},[t,r,i,a,c,p]);let g_=(()=>{class n{constructor(t,r,i,a,c,p,_,E,T,S,N,U){const Z=new Hi.x,ue=ft(void 0).pipe((0,r_.Q)(c.outsideAngular),Dn(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,1254)))),(0,at.U)(()=>(0,Lr.on)(t,a,r)),(0,at.U)(be=>UI(be,a,p,E,T,S,_,N)),U0({bufferSize:1,refCount:!1}));if(Ar(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ft(null);else{ue.pipe(Ca()).subscribe();const Ke=ue.pipe(Dn(ze=>ze.getRedirectResult().then(Mt=>Mt,()=>null)),un.iC,U0({bufferSize:1,refCount:!1})),qe=ue.pipe(Dn(ze=>new tr.y(Mt=>({unsubscribe:a.runOutsideAngular(()=>ze.onAuthStateChanged(Ut=>Mt.next(Ut),Ut=>Mt.error(Ut),()=>Mt.complete()))})))),ct=ue.pipe(Dn(ze=>new tr.y(Mt=>({unsubscribe:a.runOutsideAngular(()=>ze.onIdTokenChanged(Ut=>Mt.next(Ut),Ut=>Mt.error(Ut),()=>Mt.complete()))}))));this.authState=Ke.pipe(i_(qe),(0,Eh.R)(c.outsideAngular),(0,r_.Q)(c.insideAngular)),this.user=Ke.pipe(i_(ct),(0,Eh.R)(c.outsideAngular),(0,r_.Q)(c.insideAngular)),this.idToken=this.user.pipe(Dn(ze=>ze?(0,an.D)(ze.getIdToken()):ft(null))),this.idTokenResult=this.user.pipe(Dn(ze=>ze?(0,an.D)(ze.getIdTokenResult()):ft(null))),this.credential=(0,rm.T)(Ke,Z,this.authState.pipe(ci(ze=>!ze))).pipe((0,at.U)(ze=>(null==ze?void 0:ze.user)?ze:null),(0,Eh.R)(c.outsideAngular),(0,r_.Q)(c.insideAngular))}return(0,Lr.pX)(this,ue,a,{spy:{apply:(be,Ke,qe)=>{(be.startsWith("signIn")||be.startsWith("createUser"))&&qe.then(ct=>Z.next(ct))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Lr.Dh),u.LFG(Lr.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(un.HU),u.LFG(rw,8),u.LFG(iw,8),u.LFG(OI,8),u.LFG(p_,8),u.LFG(FI,8),u.LFG(LI,8),u.LFG(Wc,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),cM=(()=>{class n{constructor(){Hp.Z.registerVersion("angularfire",un.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[g_]}),n})();function G1(n){return null==n}function qp(n){return"function"==typeof n.set}function W1(n,e){return qp(e)?e:n.ref(e)}function m_(n,e){if(function dM(n){return"string"==typeof n}(n))return e.stringCase();if(qp(n))return e.firebaseCase();if(function hM(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function La(n,e,t="on",r=Mc.z){return new tr.y(i=>{let a=null;return a=n[t](e,(c,p)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:p})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,at.U)(i=>{const{snapshot:a,prevKey:c}=i;let p=null;return a.exists()&&(p=a.key),{type:e,payload:a,prevKey:c,key:p}}),(0,QE.B)())}function BI(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function sw(n,e){const{payload:t,prevKey:r,key:i}=e,a=BI(n,i),c=function z1(n,e){if(G1(e))return 0;{const t=BI(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let p=null;e.payload.forEach(_=>{const E={payload:_,type:"value",prevKey:p,key:_.key};return p=_.key,n=[...n,E],!1})}return n;case"child_added":if(a>-1){const p=n[a-1];(p&&p.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(p=>p.payload.key!==t.key);case"child_changed":return n.map(p=>p.payload.key===i?e:p);case"child_moved":if(a>-1){const p=n.splice(a,1)[0];return(n=n.slice()).splice(c,0,p),n}return n;default:return n}}function ow(n){return(G1(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function aw(n,e,t){return function VI(n,e,t){return La(n,"value","once",t).pipe(Dn(r=>{const i=[ft(r)];return e.forEach(a=>i.push(La(n,a,"on",t))),(0,rm.T)(...i).pipe(Kr(sw,[]))}),Qy())}(n,e=ow(e),t)}function lw(n,e,t){const r=(e=ow(e)).map(i=>La(n,i,"on",t));return(0,rm.T)(...r)}function uw(n,e){return function(r,i){return m_(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function pM(n){return function(t){return t?m_(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function K1(n,e){return function(){return La(n,"value","on",e)}}const cw=new u.OlP("angularfire2.realtimeDatabaseURL"),Q1=new u.OlP("angularfire2.database.use-emulator");let ZI=(()=>{class n{constructor(t,r,i,a,c,p,_,E,T,S,N,U,Z,ue,be){this.schedulers=p;const Ke=_,qe=(0,Lr.on)(t,c,r);E&&UI(qe,c,T,N,U,Z,S,ue),this.database=(0,Lr.cc)(`${qe.name}.database.${i}`,"AngularFireDatabase",qe.name,()=>{const ct=c.runOutsideAngular(()=>qe.database(i||void 0));return Ke&&ct.useEmulator(...Ke),ct},[Ke])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>W1(this.database,t));let a=i;return r&&(a=r(i)),function gM(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:uw(r,"update"),set:uw(r,"set"),push:i=>r.push(i),remove:pM(r),snapshotChanges:i=>aw(n,i,t).pipe(un.iC),stateChanges:i=>lw(n,i,t).pipe(un.iC),auditTrail:i=>function fM(n,e,t){return function __(n,e,t){return function jI(n,e){return La(n,"value","on",e).pipe((0,at.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function $o(...n){const e=(0,Kn.jO)(n);return(0,_r.e)((t,r)=>{const i=n.length,a=new Array(i);let c=n.map(()=>!1),p=!1;for(let _=0;_<i;_++)(0,mr.Xf)(n[_]).subscribe(new Un.Q(r,E=>{a[_]=E,!p&&!c[_]&&(c[_]=!0,(p=c.every(qi.y))&&(c=null))},ND.Z));t.subscribe(new Un.Q(r,_=>{if(p){const E=[_,...a];r.next(e?e(...E):E)}}))})}(e),(0,at.U)(([i,a])=>{const c=i.lastKeyToLoad,p=a.map(_=>_.key);return{actions:a,lastKeyToLoad:c,loadedKeys:p}}),function PD(n){return(0,_r.e)((e,t)=>{let r=!1,i=0;e.subscribe(new Un.Q(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,at.U)(i=>i.actions))}(n,lw(n,e).pipe(Kr((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(un.iC),valueChanges:(i,a)=>aw(n,i,t).pipe((0,at.U)(p=>p.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),un.iC)}}(a,this)}object(t){return function Y1(n,e){return{query:n,snapshotChanges:()=>K1(n,e.schedulers.outsideAngular)().pipe(un.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>K1(n,e.schedulers.outsideAngular)().pipe(un.iC,(0,at.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>W1(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Lr.Dh),u.LFG(Lr.xv,8),u.LFG(cw,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(un.HU),u.LFG(Q1,8),u.LFG(g_,8),u.LFG(rw,8),u.LFG(iw,8),u.LFG(OI,8),u.LFG(p_,8),u.LFG(FI,8),u.LFG(LI,8),u.LFG(Wc,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),J1=(()=>{class n{constructor(){Hp.Z.registerVersion("angularfire",un.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[ZI]}),n})();function Gp(){return(0,_r.e)((n,e)=>{let t,r=!1;n.subscribe(new Un.Q(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var it,X1="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},wr={},Wp=Wp||{},Ot=X1||self;function y_(){}function zp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Dh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var dw="closure_uid_"+(1e9*Math.random()>>>0),HI=0;function qI(n,e,t){return n.call.apply(n.bind,arguments)}function eS(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function yi(n,e,t){return(yi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qI:eS).apply(null,arguments)}function Ah(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Nn(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[i].apply(r,c)}}function Vu(){this.s=this.s,this.o=this.o}var tS={};Vu.prototype.s=!1,Vu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function $I(n){return Object.prototype.hasOwnProperty.call(n,dw)&&n[dw]||(n[dw]=++HI)}(this);delete tS[n]}},Vu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const hw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},GI=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function fw(n){return Array.prototype.concat.apply([],arguments)}function pw(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function gw(n){return/^[\s\xa0]*$/.test(n)}var Xi,mw=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ki(n,e){return-1!=n.indexOf(e)}function _w(n,e){return n<e?-1:n>e?1:0}e:{var yw=Ot.navigator;if(yw){var Sh=yw.userAgent;if(Sh){Xi=Sh;break e}}Xi=""}function Kp(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function vw(n){const e={};for(const t in n)e[t]=n[t];return e}var WI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ww(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<WI.length;a++)t=WI[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function v_(n){return v_[" "](n),n}v_[" "]=y_;var Ew,n,iS=ki(Xi,"Opera"),Yp=ki(Xi,"Trident")||ki(Xi,"MSIE"),sS=ki(Xi,"Edge"),w_=sS||Yp,zI=ki(Xi,"Gecko")&&!(ki(Xi.toLowerCase(),"webkit")&&!ki(Xi,"Edge"))&&!(ki(Xi,"Trident")||ki(Xi,"MSIE"))&&!ki(Xi,"Edge"),oS=ki(Xi.toLowerCase(),"webkit")&&!ki(Xi,"Edge");function KI(){var n=Ot.document;return n?n.documentMode:void 0}e:{var YI="",QI=(n=Xi,zI?/rv:([^\);]+)(\)|;)/.exec(n):sS?/Edge\/([\d\.]+)/.exec(n):Yp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):oS?/WebKit\/(\S+)/.exec(n):iS?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(QI&&(YI=QI?QI[1]:""),Yp){var JI=KI();if(null!=JI&&JI>parseFloat(YI)){Ew=String(JI);break e}}Ew=YI}var _M={};var lS=Ot.document&&Yp&&(KI()||parseInt(Ew,10))||void 0,eT=function(){if(!Ot.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ot.addEventListener("test",y_,e),Ot.removeEventListener("test",y_,e)}catch(t){}return n}();function cr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function kh(n,e){if(cr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(zI){e:{try{v_(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:bw[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&kh.Z.h.call(this)}}cr.prototype.h=function(){this.defaultPrevented=!0},Nn(kh,cr);var bw={2:"touch",3:"pen",4:"mouse"};kh.prototype.h=function(){kh.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var zc="closure_listenable_"+(1e6*Math.random()|0),uS=0;function Cw(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++uS,this.ca=this.fa=!1}function Rh(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Qp(n){this.src=n,this.g={},this.h=0}function E_(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=hw(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Rh(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function tT(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}Qp.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=tT(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new Cw(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var nT="closure_lm_"+(1e6*Math.random()|0),rT={};function cS(n,e,t,r,i){if(r&&r.once)return hS(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)cS(n,e[a],t,r,i);return null}return t=C_(t),n&&n[zc]?n.N(e,t,Dh(r)?!!r.capture:!!r,i):dS(n,e,t,!1,r,i)}function dS(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=Dh(i)?!!i.capture:!!i,p=Dw(n);if(p||(n[nT]=p=new Qp(n)),(t=p.add(e,t,r,c,a)).proxy)return t;if(r=function yM(){var e=fS;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)eT||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(iT(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function hS(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)hS(n,e[a],t,r,i);return null}return t=C_(t),n&&n[zc]?n.O(e,t,Dh(r)?!!r.capture:!!r,i):dS(n,e,t,!0,r,i)}function Iw(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Iw(n,e[a],t,r,i);else r=Dh(r)?!!r.capture:!!r,t=C_(t),n&&n[zc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=tT(a=n.g[e],t,r,i))&&(Rh(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Dw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=tT(e,t,r,i)),(t=-1<n?e[n]:null)&&Tw(t))}function Tw(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[zc])E_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(iT(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Dw(e))?(E_(t,n),0==t.h&&(t.src=null,e[nT]=null)):Rh(n)}}}function iT(n){return n in rT?rT[n]:rT[n]="on"+n}function fS(n,e){if(n.ca)n=!0;else{e=new kh(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Tw(n),n=t.call(r,e)}return n}function Dw(n){return(n=n[nT])instanceof Qp?n:null}var b_="__closure_events_fn_"+(1e9*Math.random()>>>0);function C_(n){return"function"==typeof n?n:(n[b_]||(n[b_]=function(e){return n.handleEvent(e)}),n[b_])}function Zr(){Vu.call(this),this.i=new Qp(this),this.P=this,this.I=null}function vi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new cr(e,n);else if(e instanceof cr)e.target=e.target||n;else{var i=e;ww(e=new cr(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=I_(c,r,!0,e)&&i}if(i=I_(c=e.g=n,r,!0,e)&&i,i=I_(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=I_(c=e.g=t[a],r,!1,e)&&i}function I_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.ca&&c.capture==t){var p=c.listener,_=c.ia||c.src;c.fa&&E_(n.i,c),i=!1!==p.call(_,r)&&i}}return i&&!r.defaultPrevented}Nn(Zr,Vu),Zr.prototype[zc]=!0,Zr.prototype.removeEventListener=function(n,e,t,r){Iw(this,n,e,t,r)},Zr.prototype.M=function(){if(Zr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Rh(t[r]);delete n.g[e],n.h--}}this.I=null},Zr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Zr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var T_=Ot.JSON.stringify;function D_(){var n=oT;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var xw,Aw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new A_,n=>n.reset());class A_{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function gS(n){Ot.setTimeout(()=>{throw n},0)}function Sw(n,e){xw||function mS(){var n=Ot.Promise.resolve(void 0);xw=function(){n.then(_S)}}(),sT||(xw(),sT=!0),oT.add(n,e)}var sT=!1,oT=new class pS{constructor(){this.h=this.g=null}add(e,t){const r=Aw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function _S(){for(var n;n=D_();){try{n.h.call(n.g)}catch(t){gS(t)}var e=Aw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}sT=!1}function S_(n,e){Zr.call(this),this.h=n||1,this.g=e||Ot,this.j=yi(this.kb,this),this.l=Date.now()}function kw(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Rw(n,e,t){if("function"==typeof n)t&&(n=yi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=yi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ot.setTimeout(n,e||0)}function aT(n){n.g=Rw(()=>{n.g=null,n.i&&(n.i=!1,aT(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Nn(S_,Zr),(it=S_.prototype).da=!1,it.S=null,it.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),vi(this,"tick"),this.da&&(kw(this),this.start()))}},it.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},it.M=function(){S_.Z.M.call(this),kw(this),delete this.g};class yS extends Vu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:aT(this)}M(){super.M(),this.g&&(Ot.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jp(n){Vu.call(this),this.h=n,this.g={}}Nn(Jp,Vu);var vS=[];function wS(n,e,t,r){Array.isArray(t)||(t&&(vS[0]=t.toString()),t=vS);for(var i=0;i<t.length;i++){var a=cS(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function ES(n){Kp(n.g,function(e,t){this.g.hasOwnProperty(t)&&Tw(e)},n),n.g={}}function Mw(){this.g=!0}function Xp(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function EM(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return T_(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}Jp.prototype.M=function(){Jp.Z.M.call(this),ES(this)},Jp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Mw.prototype.Aa=function(){this.g=!1},Mw.prototype.info=function(){};var Mh={},s=null;function o(){return s=s||new Zr}function l(n){cr.call(this,Mh.Ma,n)}function d(n){const e=o();vi(e,new l(e,n))}function h(n,e){cr.call(this,Mh.STAT_EVENT,n),this.stat=e}function m(n){const e=o();vi(e,new h(e,n))}function v(n,e){cr.call(this,Mh.Na,n),this.size=e}function b(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ot.setTimeout(function(){n()},e)}Mh.Ma="serverreachability",Nn(l,cr),Mh.STAT_EVENT="statevent",Nn(h,cr),Mh.Na="timingevent",Nn(v,cr);var C={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},x={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function R(){}function $(){}R.prototype.h=null;var Be,K={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function me(){cr.call(this,"d")}function Me(){cr.call(this,"c")}function tt(){}function ve(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Jp(this),this.P=Yt,this.W=new S_(n=w_?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new gt}function gt(){this.i=null,this.g="",this.h=!1}Nn(me,cr),Nn(Me,cr),Nn(tt,R),tt.prototype.g=function(){return new XMLHttpRequest},tt.prototype.i=function(){return{}},Be=new tt;var Yt=45e3,fn={},Ri={};function Ml(n,e,t){n.K=1,n.v=dT(Qc(e)),n.s=t,n.U=!0,x_(n,null)}function x_(n,e){n.F=Date.now(),Kc(n),n.A=Qc(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),AM(t.h,"t",r),n.C=0,t=n.l.H,n.h=new gt,n.g=YM(n.l,t?e:null,!n.s),0<n.O&&(n.L=new yS(yi(n.Ia,n,n.g),n.O)),wS(n.V,n.g,"readystatechange",n.gb),e=n.H?vw(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),d(1),function vM(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",p=a.split("&"),_=0;_<p.length;_++){var E=p[_].split("=");if(1<E.length){var T=E[0];E=E[1];var S=T.split("_");c=2<=S.length&&"type"==S[1]?c+(T+"=")+E+"&":c+(T+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function k_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function R_(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Nw(n,t),i==Ri){4==e&&(n.o=4,m(14),r=!1),Xp(n.j,n.m,null,"[Incomplete Response]");break}if(i==fn){n.o=4,m(15),Xp(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Xp(n.j,n.m,i,null),CS(n,i)}k_(n)&&i!=Ri&&i!=fn&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,m(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),PS(e),e.L=!0,m(11))):(Xp(n.j,n.m,t,"[Invalid Chunked Response]"),Nl(n),Yc(n))}function Nw(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ri:(t=Number(e.substring(t,r)),isNaN(t)?fn:(r+=1)+t>e.length?Ri:(e=e.substr(r,t),n.C=r+t,e))}function Kc(n){n.Y=Date.now()+n.P,M_(n,n.P)}function M_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=b(yi(n.eb,n),e)}function Nh(n){n.B&&(Ot.clearTimeout(n.B),n.B=null)}function Yc(n){0==n.l.G||n.I||GM(n.l,n)}function Nl(n){Nh(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,kw(n.W),ES(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function CS(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||DS(t.i,n)))if(t.I=n.N,!n.J&&DS(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(E){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=b(yi(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;_T(t),gT(t)}NS(t),m(18)}if(1>=kM(t.i)&&t.ka){try{t.ka()}catch(E){}t.ka=void 0}}else ng(t,11)}else if((n.J||t.g==n)&&_T(t),!gw(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let E=i[e];if(t.U=E[0],E=E[1],2==t.G)if("c"==E[0]){t.J=E[1],t.la=E[2];const T=E[3];null!=T&&(t.ma=T,t.h.info("VER="+t.ma));const S=E[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const N=E[5];null!=N&&"number"==typeof N&&0<N&&(t.K=r=1.5*N,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const Z=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var a=r.i;!a.g&&(ki(Z,"spdy")||ki(Z,"quic")||ki(Z,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(AS(a,a.h),a.h=null))}if(r.D){const ue=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;ue&&(r.sa=ue,dr(r.F,r.D,ue))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=KM(r,r.H?r.la:null,r.W),c.J){RM(r.i,c);var p=c,_=r.K;_&&p.setTimeout(_),p.B&&(Nh(p),Kc(p)),r.g=c}else HM(r);0<t.l.length&&mT(t)}else"stop"!=E[0]&&"close"!=E[0]||ng(t,7);else 3==t.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?ng(t,7):RS(t):"noop"!=E[0]&&t.j&&t.j.wa(E),t.A=0)}d(4)}catch(E){}}function IS(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(zp(n)||"string"==typeof n)GI(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(zp(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function f2(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(zp(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function N_(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof N_)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function TS(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];eg(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)eg(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function eg(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(it=ve.prototype).setTimeout=function(n){this.P=n},it.gb=function(n){n=n.target;const e=this.L;e&&3==Jc(n)?e.l():this.Ia(n)},it.Ia=function(n){try{if(n==this.g)e:{const T=Jc(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>T)&&(3!=T||w_||this.g&&(this.h.h||this.g.ga()||VM(this.g)))){this.I||4!=T||7==e||d(8==e||0>=S?3:2),Nh(this);var t=this.g.ba();this.N=t;t:if(k_(this)){var r=VM(this.g);n="";var i=r.length,a=4==Jc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Nl(this),Yc(this);var c="";break t}this.h.i=new Ot.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function bS(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.X,T,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,_=this.g;if((p=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!gw(p)){var E=p;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,m(12),Nl(this),Yc(this);break e}Xp(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,CS(this,t)}this.U?(R_(this,T,c),w_&&this.i&&3==T&&(wS(this.V,this.W,"tick",this.fb),this.W.start())):(Xp(this.j,this.m,c,null),CS(this,c)),4==T&&Nl(this),this.i&&!this.I&&(4==T?GM(this.l,this):(this.i=!1,Kc(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,m(12)):(this.o=0,m(13)),Nl(this),Yc(this)}}}catch(T){}},it.fb=function(){if(this.g){var n=Jc(this.g),e=this.g.ga();this.C<e.length&&(Nh(this),R_(this,n,e),this.i&&4!=n&&Kc(this))}},it.cancel=function(){this.I=!0,Nl(this)},it.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function wM(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(d(3),m(17)),Nl(this),this.o=2,Yc(this)):M_(this,this.Y-n)},(it=N_.prototype).R=function(){TS(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},it.T=function(){return TS(this),this.g.concat()},it.get=function(n,e){return eg(this.h,n)?this.h[n]:e},it.set=function(n,e){eg(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},it.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var bM=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function tg(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof tg){this.g=void 0!==e?e:n.g,lT(this,n.j),this.s=n.s,uT(this,n.i),cT(this,n.m),this.l=n.l,e=n.h;var t=new Fw;t.i=e.i,e.g&&(t.g=new N_(e.g),t.h=e.h),CM(this,t),this.o=n.o}else n&&(t=String(n).match(bM))?(this.g=!!e,lT(this,t[1]||"",!0),this.s=Pw(t[2]||""),uT(this,t[3]||"",!0),cT(this,t[4]),this.l=Pw(t[5]||"",!0),CM(this,t[6]||"",!0),this.o=Pw(t[7]||"")):(this.g=!!e,this.h=new Fw(null,this.g))}function Qc(n){return new tg(n)}function lT(n,e,t){n.j=t?Pw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function uT(n,e,t){n.i=t?Pw(e,!0):e}function cT(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function CM(n,e,t){e instanceof Fw?(n.h=e,function b2(n,e){e&&!n.j&&(Ph(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(TM(this,r),AM(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Ow(e,w2)),n.h=new Fw(e,n.g))}function dr(n,e,t){n.h.set(e,t)}function dT(n){return dr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Pw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ow(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,_2),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function _2(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}tg.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ow(e,IM,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ow(e,IM,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ow(t,"/"==t.charAt(0)?v2:y2,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ow(t,E2)),n.join("")};var IM=/[#\/\?@]/g,y2=/[#\?:]/g,v2=/[#\?]/g,w2=/[#\?@]/g,E2=/#/g;function Fw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ph(n){n.g||(n.g=new N_,n.h=0,n.i&&function p2(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function TM(n,e){Ph(n),e=P_(n,e),eg(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,eg((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&TS(n)))}function DM(n,e){return Ph(n),e=P_(n,e),eg(n.g.h,e)}function AM(n,e,t){TM(n,e),0<t.length&&(n.i=null,n.g.set(P_(n,e),pw(t)),n.h+=t.length)}function P_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function SM(n){this.l=n||I2,n=Ot.PerformanceNavigationTiming?0<(n=Ot.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ot.g&&Ot.g.Ea&&Ot.g.Ea()&&Ot.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(it=Fw.prototype).add=function(n,e){Ph(this),this.i=null,n=P_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},it.forEach=function(n,e){Ph(this),this.g.forEach(function(t,r){GI(t,function(i){n.call(e,i,r,this)},this)},this)},it.T=function(){Ph(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},it.R=function(n){Ph(this);var e=[];if("string"==typeof n)DM(this,n)&&(e=fw(e,this.g.get(P_(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=fw(e,n[t])}return e},it.set=function(n,e){return Ph(this),this.i=null,DM(this,n=P_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},it.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},it.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var c=i;""!==r[a]&&(c+="="+encodeURIComponent(String(r[a]))),n.push(c)}}return this.i=n.join("&")};var I2=10;function xM(n){return!!n.h||!!n.g&&n.g.size>=n.j}function kM(n){return n.h?1:n.g?n.g.size:0}function DS(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function AS(n,e){n.g?n.g.add(e):n.h=e}function RM(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function MM(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return pw(n.i)}function SS(){}function T2(){this.g=new SS}function D2(n,e,t){const r=t||"";try{IS(n,function(i,a){let c=i;Dh(i)&&(c=T_(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function hT(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function Lw(n){this.l=n.$b||null,this.j=n.ib||!1}function fT(n,e){Zr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=xS,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}SM.prototype.cancel=function(){if(this.i=MM(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},SS.prototype.stringify=function(n){return Ot.JSON.stringify(n,void 0)},SS.prototype.parse=function(n){return Ot.JSON.parse(n,void 0)},Nn(Lw,R),Lw.prototype.g=function(){return new fT(this.l,this.j)},Lw.prototype.i=function(n){return function(){return n}}({}),Nn(fT,Zr);var xS=0;function NM(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Uw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Vw(n)}function Vw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(it=fT.prototype).open=function(n,e){if(this.readyState!=xS)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Vw(this)},it.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ot).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},it.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Uw(this)),this.readyState=xS},it.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Vw(this)),this.g&&(this.readyState=3,Vw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ot.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;NM(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},it.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Uw(this):Vw(this),3==this.readyState&&NM(this)}},it.Ua=function(n){this.g&&(this.response=this.responseText=n,Uw(this))},it.Ta=function(n){this.g&&(this.response=n,Uw(this))},it.ha=function(){this.g&&Uw(this)},it.setRequestHeader=function(n,e){this.v.append(n,e)},it.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},it.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(fT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var S2=Ot.JSON.parse;function Xr(n){Zr.call(this),this.headers=new N_,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=PM,this.K=this.L=!1}Nn(Xr,Zr);var PM="",x2=/^https?$/i,k2=["POST","PUT"];function M2(n){return"content-type"==n.toLowerCase()}function OM(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,FM(n),pT(n)}function FM(n){n.D||(n.D=!0,vi(n,"complete"),vi(n,"error"))}function LM(n){if(n.h&&void 0!==Wp&&(!n.C[1]||4!=Jc(n)||2!=n.ba()))if(n.v&&4==Jc(n))Rw(n.Fa,0,n);else if(vi(n,"readystatechange"),4==Jc(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(bM)[1]||null;if(!i&&Ot.self&&Ot.self.location){var a=Ot.self.location.protocol;i=a.substr(0,a.length-1)}r=!x2.test(i?i.toLowerCase():"")}t=r}if(t)vi(n,"complete"),vi(n,"success");else{n.m=6;try{var c=2<Jc(n)?n.g.statusText:""}catch(_){c=""}n.j=c+" ["+n.ba()+"]",FM(n)}}finally{pT(n)}}}function pT(n,e){if(n.g){UM(n);const t=n.g,r=n.C[0]?y_:null;n.g=null,n.C=null,e||vi(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function UM(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ot.clearTimeout(n.A),n.A=null)}function Jc(n){return n.g?n.g.readyState:0}function VM(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case PM:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function kS(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function N2(n){let e="";return Kp(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):dr(n,e,t))}function Bw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function BM(n){this.za=0,this.l=[],this.h=new Mw,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Bw("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Bw("baseRetryDelayMs",5e3,n),this.$a=Bw("retryDelaySeedMs",1e4,n),this.Ya=Bw("forwardChannelMaxRetries",2,n),this.ra=Bw("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new SM(n&&n.concurrentRequestLimit),this.Ca=new T2,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function RS(n){if(jM(n),3==n.G){var e=n.V++,t=Qc(n.F);dr(t,"SID",n.J),dr(t,"RID",e),dr(t,"TYPE","terminate"),jw(n,t),(e=new ve(n,n.h,e,void 0)).K=2,e.v=dT(Qc(t)),t=!1,Ot.navigator&&Ot.navigator.sendBeacon&&(t=Ot.navigator.sendBeacon(e.v.toString(),"")),!t&&Ot.Image&&((new Image).src=e.v,t=!0),t||(e.g=YM(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Kc(e)}zM(n)}function gT(n){n.g&&(PS(n),n.g.cancel(),n.g=null)}function jM(n){gT(n),n.u&&(Ot.clearTimeout(n.u),n.u=null),_T(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ot.clearTimeout(n.m),n.m=null)}function MS(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&mT(n)}function mT(n){xM(n.i)||n.m||(n.m=!0,Sw(n.Ha,n),n.C=0)}function ZM(n,e){var t;t=e?e.m:n.V++;const r=Qc(n.F);dr(r,"SID",n.J),dr(r,"RID",t),dr(r,"AID",n.U),jw(n,r),n.o&&n.s&&kS(r,n.o,n.s),t=new ve(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=$M(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),AS(n.i,t),Ml(t,r,e)}function jw(n,e){n.j&&IS({},function(t,r){dr(e,r,t)})}function $M(n,e,t){t=Math.min(n.l.length,t);var r=n.j?yi(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].h,c.push("ofs="+a)):a=0:c.push("ofs="+a);let p=!0;for(let _=0;_<t;_++){let E=i[_].h;const T=i[_].g;if(E-=a,0>E)a=Math.max(0,i[_].h-100),p=!1;else try{D2(T,c,"req"+E+"_")}catch(S){r&&r(T)}}if(p){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function HM(n){n.g||n.u||(n.Y=1,Sw(n.Ga,n),n.A=0)}function NS(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=b(yi(n.Ga,n),WM(n,n.A)),n.A++,0))}function PS(n){null!=n.B&&(Ot.clearTimeout(n.B),n.B=null)}function qM(n){n.g=new ve(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Qc(n.oa);dr(e,"RID","rpc"),dr(e,"SID",n.J),dr(e,"CI",n.N?"0":"1"),dr(e,"AID",n.U),jw(n,e),dr(e,"TYPE","xmlhttp"),n.o&&n.s&&kS(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=dT(Qc(e)),t.s=null,t.U=!0,x_(t,n)}function _T(n){null!=n.v&&(Ot.clearTimeout(n.v),n.v=null)}function GM(n,e){var t=null;if(n.g==e){_T(n),PS(n),n.g=null;var r=2}else{if(!DS(n.i,e))return;t=e.D,RM(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;vi(r=o(),new v(r,t,e,i)),mT(n)}else HM(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function P2(n,e){return!(kM(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=b(yi(n.Ha,n,e),WM(n,n.C)),n.C++,0)))}(n,e)||2==r&&NS(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:ng(n,5);break;case 4:ng(n,10);break;case 3:ng(n,6);break;default:ng(n,2)}}function WM(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function ng(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=yi(n.jb,n);t||(t=new tg("//www.google.com/images/cleardot.gif"),Ot.location&&"http"==Ot.location.protocol||lT(t,"https"),dT(t)),function A2(n,e){const t=new Mw;if(Ot.Image){const r=new Image;r.onload=Ah(hT,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ah(hT,t,r,"TestLoadImage: error",!1,e),r.onabort=Ah(hT,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ah(hT,t,r,"TestLoadImage: timeout",!1,e),Ot.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else m(2);n.G=0,n.j&&n.j.va(e),zM(n),jM(n)}function zM(n){n.G=0,n.I=-1,n.j&&((0!=MM(n.i).length||0!=n.l.length)&&(n.i.i.length=0,pw(n.l),n.l.length=0),n.j.ua())}function KM(n,e,t){let r=function g2(n){return n instanceof tg?Qc(n):new tg(n,void 0)}(t);if(""!=r.i)e&&uT(r,e+"."+r.i),cT(r,r.m);else{const i=Ot.location;r=function m2(n,e,t,r){var i=new tg(null,void 0);return n&&lT(i,n),e&&uT(i,e),t&&cT(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Kp(n.aa,function(i,a){dr(r,a,i)}),t=n.sa,(e=n.D)&&t&&dr(r,e,t),dr(r,"VER",n.ma),jw(n,r),r}function YM(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Xr(t&&n.Ba&&!n.qa?new Lw({ib:!0}):n.qa)).L=n.H,e}function QM(){}function yT(){if(Yp&&!(10<=Number(lS)))throw Error("Environmental error: no available transport.")}function ea(n,e){Zr.call(this),this.g=new BM(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!gw(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!gw(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new O_(this)}function JM(n){me.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function XM(){Me.call(this),this.status=1}function O_(n){this.g=n}(it=Xr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Be.g(),this.C=function L(n){return n.h||(n.h=n.i())}(this.u?this.u:Be),this.g.onreadystatechange=yi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void OM(this,a)}n=t||"";const i=new N_(this.headers);r&&IS(r,function(a,c){i.set(c,a)}),r=function nS(n){e:{var e=M2;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Ot.FormData&&n instanceof Ot.FormData,!(0<=hw(k2,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,c){this.g.setRequestHeader(c,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{UM(this),0<this.B&&((this.K=function R2(n){return Yp&&function aS(){return function rS(n){var e=_M;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=mw(String(Ew)).split("."),t=mw("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",a=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=_w(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||_w(0==i[2].length,0==a[2].length)||_w(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=yi(this.pa,this)):this.A=Rw(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){OM(this,a)}},it.pa=function(){void 0!==Wp&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vi(this,"timeout"),this.abort(8))},it.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,vi(this,"complete"),vi(this,"abort"),pT(this))},it.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pT(this,!0)),Xr.Z.M.call(this)},it.Fa=function(){this.s||(this.F||this.v||this.l?LM(this):this.cb())},it.cb=function(){LM(this)},it.ba=function(){try{return 2<Jc(this)?this.g.status:-1}catch(n){return-1}},it.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},it.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),S2(e)}},it.Da=function(){return this.m},it.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(it=BM.prototype).ma=8,it.G=1,it.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},it.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new ve(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=vw(a),ww(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=$M(this,i,e),dr(t=Qc(this.F),"RID",n),dr(t,"CVER",22),this.D&&dr(t,"X-HTTP-Session-Id",this.D),jw(this,t),this.o&&a&&kS(t,this.o,a),AS(this.i,i),this.Ra&&dr(t,"TYPE","init"),this.ja?(dr(t,"$req",e),dr(t,"SID","null"),i.$=!0,Ml(i,t,null)):Ml(i,t,e),this.G=2}}else 3==this.G&&(n?ZM(this,n):0==this.l.length||xM(this.i)||ZM(this))},it.Ga=function(){if(this.u=null,qM(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=b(yi(this.bb,this),n)}},it.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,m(10),gT(this),qM(this))},it.ab=function(){null!=this.v&&(this.v=null,gT(this),NS(this),m(19))},it.jb=function(n){n?(this.h.info("Successfully pinged google.com"),m(2)):(this.h.info("Failed to ping google.com"),m(1))},(it=QM.prototype).xa=function(){},it.wa=function(){},it.va=function(){},it.ua=function(){},it.Oa=function(){},yT.prototype.g=function(n,e){return new ea(n,e)},Nn(ea,Zr),ea.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Sw(yi(n.hb,n,e))),m(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=KM(n,null,n.W),mT(n)},ea.prototype.close=function(){RS(this.g)},ea.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,MS(this.g,e)}else this.v?((e={}).__data__=T_(n),MS(this.g,e)):MS(this.g,n)},ea.prototype.M=function(){this.g.j=null,delete this.j,RS(this.g),delete this.g,ea.Z.M.call(this)},Nn(JM,me),Nn(XM,Me),Nn(O_,QM),O_.prototype.xa=function(){vi(this.g,"a")},O_.prototype.wa=function(n){vi(this.g,new JM(n))},O_.prototype.va=function(n){vi(this.g,new XM(n))},O_.prototype.ua=function(){vi(this.g,"b")},yT.prototype.createWebChannel=yT.prototype.g,ea.prototype.send=ea.prototype.u,ea.prototype.open=ea.prototype.m,ea.prototype.close=ea.prototype.close,C.NO_ERROR=0,C.TIMEOUT=8,C.HTTP_ERROR=6,x.COMPLETE="complete",$.EventType=K,K.OPEN="a",K.CLOSE="b",K.ERROR="c",K.MESSAGE="d",Zr.prototype.listen=Zr.prototype.N,Xr.prototype.listenOnce=Xr.prototype.O,Xr.prototype.getLastError=Xr.prototype.La,Xr.prototype.getLastErrorCode=Xr.prototype.Da,Xr.prototype.getStatus=Xr.prototype.ba,Xr.prototype.getResponseJson=Xr.prototype.Qa,Xr.prototype.getResponseText=Xr.prototype.ga,Xr.prototype.send=Xr.prototype.ea;var O2=wr.createWebChannelTransport=function(){return new yT},F2=wr.getStatEventTarget=function(){return o()},OS=wr.ErrorCode=C,L2=wr.EventType=x,U2=wr.Event=Mh,eN=wr.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},V2=wr.FetchXmlHttpFactory=Lw,vT=wr.WebChannel=$,B2=wr.XhrIo=Xr;const tN="@firebase/firestore";class es{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}es.UNAUTHENTICATED=new es(null),es.GOOGLE_CREDENTIALS=new es("google-credentials-uid"),es.FIRST_PARTY=new es("first-party-uid"),es.MOCK_USER=new es("mock-user");let F_="9.6.10";const Oh=new qo.Yd("@firebase/firestore");function FS(){return Oh.logLevel}function Oe(n,...e){if(Oh.logLevel<=qo.in.DEBUG){const t=e.map(LS);Oh.debug(`Firestore (${F_}): ${n}`,...t)}}function ei(n,...e){if(Oh.logLevel<=qo.in.ERROR){const t=e.map(LS);Oh.error(`Firestore (${F_}): ${n}`,...t)}}function Zw(n,...e){if(Oh.logLevel<=qo.in.WARN){const t=e.map(LS);Oh.warn(`Firestore (${F_}): ${n}`,...t)}}function LS(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function lt(n="Unexpected state"){const e=`FIRESTORE (${F_}) INTERNAL ASSERTION FAILED: `+n;throw ei(e),new Error(e)}function Ft(n,e){n||lt()}function Ye(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends P.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class nN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(es.UNAUTHENTICATED))}shutdown(){}}class H2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class q2{constructor(e){this.t=e,this.currentUser=es.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=E=>this.i!==i?(i=this.i,t(E)):Promise.resolve();let c=new Mi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Mi,e.enqueueRetryable(()=>a(this.currentUser))};const p=()=>{const E=c;e.enqueueRetryable((0,ge.Z)(function*(){yield E.promise,yield a(r.currentUser)}))},_=E=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(E=>_(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?_(E):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Mi)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ft("string"==typeof r.accessToken),new nN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ft(null===e||"string"==typeof e),new es(e)}}class G2{constructor(e,t,r){this.type="FirstParty",this.user=es.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class W2{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new G2(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(es.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class z2{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.p;return this.p=a.token,Oe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ft("string"==typeof t.token),this.p=t.token,new rN(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ta{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function K2(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ta.A=-1;class iN{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=K2(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Jt(n,e){return n<e?-1:n>e?1:0}function L_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function sN(n){return n+"\0"}class $r{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $r.fromMillis(Date.now())}static fromDate(e){return $r.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new $r(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Jt(this.nanoseconds,e.nanoseconds):Jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(e){this.timestamp=e}static fromTimestamp(e){return new At(e)}static min(){return new At(new $r(0,0))}static max(){return new At(new $r(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function oN(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function rg(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function aN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class $w{constructor(e,t,r){void 0===t?t=0:t>e.length&&lt(),void 0===r?r=e.length-t:r>e.length-t&&lt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===$w.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $w?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class pn extends $w{construct(e,t,r){return new pn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new pn(t)}static emptyPath(){return new pn([])}}const Y2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ni extends $w{construct(e,t,r){return new Ni(e,t,r)}static isValidIdentifier(e){return Y2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ni.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ni(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new xe(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new xe(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new xe(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===p?(c=!c,i++):"."!==p||c?(r+=p,i++):(a(),i++)}if(a(),c)throw new xe(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ni(t)}static emptyPath(){return new Ni([])}}class U_{constructor(e){this.fields=e,e.sort(Ni.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return L_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class wi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new wi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new wi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wi.EMPTY_BYTE_STRING=new wi("");const J2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fh(n){if(Ft(!!n),"string"==typeof n){let e=0;const t=J2.exec(n);if(Ft(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:kr(n.seconds),nanos:kr(n.nanos)}}function kr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ig(n){return"string"==typeof n?wi.fromBase64String(n):wi.fromUint8Array(n)}function US(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function lN(n){const e=n.mapValue.fields.__previous_value__;return US(e)?lN(e):e}function Hw(n){const e=Fh(n.mapValue.fields.__local_write_time__.timestampValue);return new $r(e.seconds,e.nanos)}class X2{constructor(e,t,r,i,a,c,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=_}}class Xc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Xc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Xc&&e.projectId===this.projectId&&e.database===this.database}}function sg(n){return null==n}function qw(n){return 0===n&&1/n==-1/0}function uN(n){return"number"==typeof n&&Number.isInteger(n)&&!qw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(pn.fromString(e))}static fromName(e){return new Ze(pn.fromString(e).popFirst(5))}static empty(){return new Ze(pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===pn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return pn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new pn(e.slice()))}}const cN={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},dN={nullValue:"NULL_VALUE"};function og(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?US(n)?4:gN(n)?9:10:lt()}function Bu(n,e){if(n===e)return!0;const t=og(n);if(t!==og(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Hw(n).isEqual(Hw(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Fh(r.timestampValue),c=Fh(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,ig(n.bytesValue).isEqual(ig(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return kr(r.geoPointValue.latitude)===kr(i.geoPointValue.latitude)&&kr(r.geoPointValue.longitude)===kr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return kr(r.integerValue)===kr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=kr(r.doubleValue),c=kr(i.doubleValue);return a===c?qw(a)===qw(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return L_(n.arrayValue.values||[],e.arrayValue.values||[],Bu);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(oN(a)!==oN(c))return!1;for(const p in a)if(a.hasOwnProperty(p)&&(void 0===c[p]||!Bu(a[p],c[p])))return!1;return!0}(n,e);default:return lt()}var i}function Gw(n,e){return void 0!==(n.values||[]).find(t=>Bu(t,e))}function Lh(n,e){if(n===e)return 0;const t=og(n),r=og(e);if(t!==r)return Jt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Jt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=kr(i.integerValue||i.doubleValue),p=kr(a.integerValue||a.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return hN(n.timestampValue,e.timestampValue);case 4:return hN(Hw(n),Hw(e));case 5:return Jt(n.stringValue,e.stringValue);case 6:return function(i,a){const c=ig(i),p=ig(a);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),p=a.split("/");for(let _=0;_<c.length&&_<p.length;_++){const E=Jt(c[_],p[_]);if(0!==E)return E}return Jt(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=Jt(kr(i.latitude),kr(a.latitude));return 0!==c?c:Jt(kr(i.longitude),kr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],p=a.values||[];for(let _=0;_<c.length&&_<p.length;++_){const E=Lh(c[_],p[_]);if(E)return E}return Jt(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const c=i.fields||{},p=Object.keys(c),_=a.fields||{},E=Object.keys(_);p.sort(),E.sort();for(let T=0;T<p.length&&T<E.length;++T){const S=Jt(p[T],E[T]);if(0!==S)return S;const N=Lh(c[p[T]],_[E[T]]);if(0!==N)return N}return Jt(p.length,E.length)}(n.mapValue,e.mapValue);default:throw lt()}}function hN(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Jt(n,e);const t=Fh(n),r=Fh(e),i=Jt(t.seconds,r.seconds);return 0!==i?i:Jt(t.nanos,r.nanos)}function V_(n){return VS(n)}function VS(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Fh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ig(n.bytesValue).toBase64():"referenceValue"in n?Ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=VS(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const p of i)c?c=!1:a+=",",a+=`${p}:${VS(r.fields[p])}`;return a+"}"}(n.mapValue):lt();var e}function B_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function BS(n){return!!n&&"integerValue"in n}function Ww(n){return!!n&&"arrayValue"in n}function fN(n){return!!n&&"nullValue"in n}function pN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wT(n){return!!n&&"mapValue"in n}function zw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return rg(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=zw(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function gN(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function mN(n,e){return void 0===n?e:void 0===e||Lh(n,e)>0?n:e}function _N(n,e){return void 0===n?e:void 0===e||Lh(n,e)<0?n:e}class gs{constructor(e){this.value=e}static empty(){return new gs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!wT(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zw(t)}setAll(e){let t=Ni.emptyPath(),r={},i=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=p.popLast()}c?r[p.lastSegment()]=zw(c):i.push(p.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());wT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];wT(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){rg(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new gs(zw(this.value))}}function yN(n){const e=[];return rg(n.fields,(t,r)=>{const i=new Ni([t]);if(wT(r)){const a=yN(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new U_(e)}class rr{constructor(e,t,r,i,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new rr(e,0,At.min(),At.min(),gs.empty(),0)}static newFoundDocument(e,t,r){return new rr(e,1,t,At.min(),r,0)}static newNoDocument(e,t){return new rr(e,2,t,At.min(),gs.empty(),0)}static newUnknownDocument(e,t){return new rr(e,3,t,At.min(),gs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof rr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ET{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function jS(n){return n.fields.find(e=>2===e.kind)}function j_(n){return n.fields.filter(e=>2!==e.kind)}ET.UNKNOWN_ID=-1;class bT{constructor(e,t){this.fieldPath=e,this.kind=t}}class Kw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Kw(0,ed.min())}}function vN(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=At.fromTimestamp(1e9===r?new $r(t+1,0):new $r(t,r));return new ed(i,Ze.empty(),e)}function eU(n){return new ed(n.readTime,n.key,-1)}class ed{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ed(At.min(),Ze.empty(),-1)}static max(){return new ed(At.max(),Ze.empty(),-1)}}function tU(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ze.comparator(n.documentKey,e.documentKey),0!==t?t:Jt(n.largestBatchId,e.largestBatchId))}class nU{constructor(e,t=null,r=[],i=[],a=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=p,this.P=null}}function wN(n,e=null,t=[],r=[],i=null,a=null,c=null){return new nU(n,e,t,r,i,a,c)}function ag(n){const e=Ye(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+V_(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),sg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>V_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>V_(r)).join(",")),e.P=t}return e.P}function Yw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!dU(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Bu(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!CN(n.startAt,e.startAt)&&CN(n.endAt,e.endAt)}function CT(n){return Ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function IT(n,e){return n.filters.filter(t=>t instanceof ts&&t.field.isEqual(e))}class ts extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new iU(e,t,r):"array-contains"===t?new aU(e,r):"in"===t?new lU(e,r):"not-in"===t?new uU(e,r):"array-contains-any"===t?new cU(e,r):new ts(e,t,r)}static V(e,t,r){return"in"===t?new sU(e,r):new oU(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Lh(t,this.value)):null!==t&&og(this.value)===og(t)&&this.v(Lh(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class iU extends ts{constructor(e,t,r){super(e,t,r),this.key=Ze.fromName(r.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.v(t)}}class sU extends ts{constructor(e,t){super(e,"in",t),this.keys=EN(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class oU extends ts{constructor(e,t){super(e,"not-in",t),this.keys=EN(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function EN(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ze.fromName(r.referenceValue))}class aU extends ts{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ww(t)&&Gw(t.arrayValue,this.value)}}class lU extends ts{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Gw(this.value.arrayValue,t)}}class uU extends ts{constructor(e,t){super(e,"not-in",t)}matches(e){if(Gw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Gw(this.value.arrayValue,t)}}class cU extends ts{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ww(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Gw(this.value.arrayValue,r))}}class Uh{constructor(e,t){this.position=e,this.inclusive=t}}class Z_{constructor(e,t="asc"){this.field=e,this.dir=t}}function dU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function bN(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?Ze.comparator(Ze.fromName(c.referenceValue),t.key):Lh(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function CN(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Bu(n.position[t],e.position[t]))return!1;return!0}class td{constructor(e,t=null,r=[],i=[],a=null,c="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=p,this.endAt=_,this.D=null,this.C=null}}function IN(n,e,t,r,i,a,c,p){return new td(n,e,t,r,i,a,c,p)}function $_(n){return new td(n)}function TT(n){return!sg(n.limit)&&"F"===n.limitType}function DT(n){return!sg(n.limit)&&"L"===n.limitType}function ZS(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function $S(n){for(const e of n.filters)if(e.S())return e.field;return null}function HS(n){return null!==n.collectionGroup}function H_(n){const e=Ye(n);if(null===e.D){e.D=[];const t=$S(e),r=ZS(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Z_(t)),e.D.push(new Z_(Ni.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Z_(Ni.keyField(),a))}}}return e.D}function Ua(n){const e=Ye(n);if(!e.C)if("F"===e.limitType)e.C=wN(e.path,e.collectionGroup,H_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of H_(e))t.push(new Z_(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Uh(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new Uh(e.startAt.position,!e.startAt.inclusive):null;e.C=wN(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function TN(n,e,t){return new td(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qw(n,e){return Yw(Ua(n),Ua(e))&&n.limitType===e.limitType}function DN(n){return`${ag(Ua(n))}|lt:${n.limitType}`}function qS(n){return`Query(target=${function rU(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${V_(r.value)}`;var r}).join(", ")}]`),sg(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>V_(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>V_(t)).join(",")),`Target(${e})`}(Ua(n))}; limitType=${n.limitType})`}function GS(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ze.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const p=bN(i,a,c);return i.inclusive?p<=0:p<0}(t.startAt,H_(t),r)||t.endAt&&!function(i,a,c){const p=bN(i,a,c);return i.inclusive?p>=0:p>0}(t.endAt,H_(t),r)));var t,r}function AN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function SN(n){return(e,t)=>{let r=!1;for(const i of H_(n)){const a=hU(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function hU(n,e,t){const r=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(i,a,c){const p=a.data.field(i),_=c.data.field(i);return null!==p&&null!==_?Lh(p,_):lt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return lt()}}function xN(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qw(e)?"-0":e}}function kN(n){return{integerValue:""+n}}function RN(n,e){return uN(e)?kN(e):xN(n,e)}class AT{constructor(){this._=void 0}}function fU(n,e,t){return n instanceof q_?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof lg?NN(n,e):n instanceof ug?PN(n,e):function(r,i){const a=MN(r,i),c=ON(a)+ON(r.k);return BS(a)&&BS(r.k)?kN(c):xN(r.M,c)}(n,e)}function pU(n,e,t){return n instanceof lg?NN(n,e):n instanceof ug?PN(n,e):t}function MN(n,e){return n instanceof G_?BS(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class q_ extends AT{}class lg extends AT{constructor(e){super(),this.elements=e}}function NN(n,e){const t=FN(e);for(const r of n.elements)t.some(i=>Bu(i,r))||t.push(r);return{arrayValue:{values:t}}}class ug extends AT{constructor(e){super(),this.elements=e}}function PN(n,e){let t=FN(e);for(const r of n.elements)t=t.filter(i=>!Bu(i,r));return{arrayValue:{values:t}}}class G_ extends AT{constructor(e,t){super(),this.M=e,this.k=t}}function ON(n){return kr(n.integerValue||n.doubleValue)}function FN(n){return Ww(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Jw{constructor(e,t){this.field=e,this.transform=t}}class mU{constructor(e,t){this.version=e,this.transformResults=t}}class ti{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ti}static exists(e){return new ti(void 0,e)}static updateTime(e){return new ti(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ST(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class xT{}function _U(n,e,t){n instanceof Xw?function(r,i,a){const c=r.value.clone(),p=BN(r.fieldTransforms,i,a.transformResults);c.setAll(p),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof cg?function(r,i,a){if(!ST(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=BN(r.fieldTransforms,i,a.transformResults),p=i.data;p.setAll(VN(r)),p.setAll(c),i.convertToFoundDocument(a.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function WS(n,e,t){var i;n instanceof Xw?function(r,i,a){if(!ST(r.precondition,i))return;const c=r.value.clone(),p=jN(r.fieldTransforms,a,i);c.setAll(p),i.convertToFoundDocument(UN(i),c).setHasLocalMutations()}(n,e,t):n instanceof cg?function(r,i,a){if(!ST(r.precondition,i))return;const c=jN(r.fieldTransforms,a,i),p=i.data;p.setAll(VN(r)),p.setAll(c),i.convertToFoundDocument(UN(i),p).setHasLocalMutations()}(n,e,t):ST(n.precondition,i=e)&&i.convertToNoDocument(At.min())}function yU(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=MN(r.transform,i||null);null!=a&&(null==t&&(t=gs.empty()),t.set(r.field,a))}return t||null}function LN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&L_(t,r,(i,a)=>function gU(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof lg&&r instanceof lg||t instanceof ug&&r instanceof ug?L_(t.elements,r.elements,Bu):t instanceof G_&&r instanceof G_?Bu(t.k,r.k):t instanceof q_&&r instanceof q_);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function UN(n){return n.isFoundDocument()?n.version:At.min()}class Xw extends xT{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class cg extends xT{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function VN(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function BN(n,e,t){const r=new Map;Ft(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,p=e.data.field(a.field);r.set(a.field,pU(c,p,t[i]))}return r}function jN(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,fU(a,c,e))}return r}class eE extends xT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class zS extends xT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class vU{constructor(e){this.count=e}}var ni,gn;function ZN(n){switch(n){default:return lt();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function $N(n){if(void 0===n)return ei("GRPC error has no .code"),le.UNKNOWN;switch(n){case ni.OK:return le.OK;case ni.CANCELLED:return le.CANCELLED;case ni.UNKNOWN:return le.UNKNOWN;case ni.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case ni.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case ni.INTERNAL:return le.INTERNAL;case ni.UNAVAILABLE:return le.UNAVAILABLE;case ni.UNAUTHENTICATED:return le.UNAUTHENTICATED;case ni.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case ni.NOT_FOUND:return le.NOT_FOUND;case ni.ALREADY_EXISTS:return le.ALREADY_EXISTS;case ni.PERMISSION_DENIED:return le.PERMISSION_DENIED;case ni.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case ni.ABORTED:return le.ABORTED;case ni.OUT_OF_RANGE:return le.OUT_OF_RANGE;case ni.UNIMPLEMENTED:return le.UNIMPLEMENTED;case ni.DATA_LOSS:return le.DATA_LOSS;default:return lt()}}(gn=ni||(ni={}))[gn.OK=0]="OK",gn[gn.CANCELLED=1]="CANCELLED",gn[gn.UNKNOWN=2]="UNKNOWN",gn[gn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gn[gn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gn[gn.NOT_FOUND=5]="NOT_FOUND",gn[gn.ALREADY_EXISTS=6]="ALREADY_EXISTS",gn[gn.PERMISSION_DENIED=7]="PERMISSION_DENIED",gn[gn.UNAUTHENTICATED=16]="UNAUTHENTICATED",gn[gn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gn[gn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gn[gn.ABORTED=10]="ABORTED",gn[gn.OUT_OF_RANGE=11]="OUT_OF_RANGE",gn[gn.UNIMPLEMENTED=12]="UNIMPLEMENTED",gn[gn.INTERNAL=13]="INTERNAL",gn[gn.UNAVAILABLE=14]="UNAVAILABLE",gn[gn.DATA_LOSS=15]="DATA_LOSS";class Vh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){rg(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return aN(this.inner)}size(){return this.innerSize}}class Hr{constructor(e,t){this.comparator=e,this.root=t||ns.EMPTY}insert(e,t){return new Hr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ns.BLACK,null,null))}remove(e){return new Hr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ns.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kT(this.root,e,this.comparator,!1)}getReverseIterator(){return new kT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kT(this.root,e,this.comparator,!0)}}class kT{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ns{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:ns.RED,this.left=null!=i?i:ns.EMPTY,this.right=null!=a?a:ns.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ns(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ns.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ns.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ns.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ns.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}ns.EMPTY=null,ns.RED=!0,ns.BLACK=!1,ns.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ns(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ir{constructor(e){this.comparator=e,this.data=new Hr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new HN(this.data.getIterator())}getIteratorFrom(e){return new HN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ir)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ir(this.comparator);return t.data=e,t}}class HN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function W_(n){return n.hasNext()?n.getNext():void 0}const wU=new Hr(Ze.comparator);function Va(){return wU}const EU=new Hr(Ze.comparator);function KS(){return EU}function tE(){return new Vh(n=>n.toString(),(n,e)=>n.isEqual(e))}const bU=new Hr(Ze.comparator),CU=new ir(Ze.comparator);function An(...n){let e=CU;for(const t of n)e=e.add(t);return e}const IU=new ir(Jt);function RT(){return IU}class nE{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,rE.createSynthesizedTargetChangeForCurrentChange(e,t)),new nE(At.min(),r,RT(),Va(),An())}}class rE{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new rE(wi.EMPTY_BYTE_STRING,t,An(),An(),An())}}class MT{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class qN{constructor(e,t){this.targetId=e,this.$=t}}class GN{constructor(e,t,r=wi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class WN{constructor(){this.B=0,this.L=KN(),this.U=wi.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=An(),t=An(),r=An();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:lt()}}),new rE(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=KN()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class TU{constructor(e){this.nt=e,this.st=new Map,this.it=Va(),this.rt=zN(),this.ot=new ir(Jt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:lt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const a=i.target;if(CT(a))if(0===r){const c=new Ze(a.path);this.ct(t,c,rr.newNoDocument(c,At.min()))}else Ft(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,c)=>{const p=this.wt(c);if(p){if(a.current&&CT(p.target)){const _=new Ze(p.target.path);null!==this.it.get(_)||this.It(c,_)||this.ct(c,_,rr.newNoDocument(_,e))}a.j&&(t.set(c,a.H()),a.J())}});let r=An();this.rt.forEach((a,c)=>{let p=!0;c.forEachWhile(_=>{const E=this.wt(_);return!E||2===E.purpose||(p=!1,!1)}),p&&(r=r.add(a))}),this.it.forEach((a,c)=>c.setReadTime(e));const i=new nE(e,t,this.ot,this.it,r);return this.it=Va(),this.rt=zN(),this.ot=new ir(Jt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new WN,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new ir(Jt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new WN),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function zN(){return new Hr(Ze.comparator)}function KN(){return new Hr(Ze.comparator)}const DU={asc:"ASCENDING",desc:"DESCENDING"},AU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class SU{constructor(e,t){this.databaseId=e,this.N=t}}function iE(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YN(n,e){return n.N?e.toBase64():e.toUint8Array()}function xU(n,e){return iE(n,e.toTimestamp())}function Pi(n){return Ft(!!n),At.fromTimestamp(function(e){const t=Fh(e);return new $r(t.seconds,t.nanos)}(n))}function YS(n,e){return(t=n,new pn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function QN(n){const e=pn.fromString(n);return Ft(oP(e)),e}function sE(n,e){return YS(n.databaseId,e.path)}function ju(n,e){const t=QN(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze(XN(t))}function QS(n,e){return YS(n.databaseId,e)}function JN(n){const e=QN(n);return 4===e.length?pn.emptyPath():XN(e)}function oE(n){return new pn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function XN(n){return Ft(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function eP(n,e,t){return{name:sE(n,e),fields:t.value.mapValue.fields}}function tP(n,e,t){const r=ju(n,e.name),i=Pi(e.updateTime),a=new gs({mapValue:{fields:e.fields}}),c=rr.newFoundDocument(r,i,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function aE(n,e){let t;if(e instanceof Xw)t={update:eP(n,e.key,e.value)};else if(e instanceof eE)t={delete:sE(n,e.key)};else if(e instanceof cg)t={update:eP(n,e.key,e.data),updateMask:UU(e.fieldMask)};else{if(!(e instanceof zS))return lt();t={verify:sE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof q_)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof lg)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ug)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof G_)return{fieldPath:a.field.canonicalString(),increment:c.k};throw lt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:xU(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:lt()),t;var i}function JS(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ti.updateTime(Pi(i.updateTime)):void 0!==i.exists?ti.exists(i.exists):ti.none():ti.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let p=null;"setToServerValue"in c?(Ft("REQUEST_TIME"===c.setToServerValue),p=new q_):"appendMissingElements"in c?p=new lg(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new ug(c.removeAllFromArray.values||[]):"increment"in c?p=new G_(a,c.increment):lt();const _=Ni.fromServerFormat(c.fieldPath);return new Jw(_,p)}(n,i)):[];var i;if(e.update){const i=ju(n,e.update.name),a=new gs({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new U_((e.updateMask.fieldPaths||[]).map(E=>Ni.fromServerFormat(E)));return new cg(i,a,c,t,r)}return new Xw(i,a,t,r)}if(e.delete){const i=ju(n,e.delete);return new eE(i,t)}if(e.verify){const i=ju(n,e.verify);return new zS(i,t)}return lt()}function nP(n,e){return{documents:[QS(n,e.path)]}}function rP(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=QS(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=QS(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const E=_.map(T=>function(S){if("=="===S.op){if(pN(S.value))return{unaryFilter:{field:z_(S.field),op:"IS_NAN"}};if(fN(S.value))return{unaryFilter:{field:z_(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(pN(S.value))return{unaryFilter:{field:z_(S.field),op:"IS_NOT_NAN"}};if(fN(S.value))return{unaryFilter:{field:z_(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:z_(S.field),op:OU(S.op),value:S.value}}}(T));return 1===E.length?E[0]:{compositeFilter:{op:"AND",filters:E}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(E=>{return{field:z_((T=E).field),direction:PU(T.dir)};var T})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=(E=e.limit,n.N||sg(E)?E:{value:E});var E,p,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function iP(n){let e=JN(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ft(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let a=[];t.where&&(a=sP(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(T=>{return new Z_(K_((S=T).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let p=null;t.limit&&(p=function(T){let S;return S="object"==typeof T?T.value:T,sg(S)?null:S}(t.limit));let _=null;var T;t.startAt&&(_=new Uh((T=t.startAt).values||[],!!T.before));let E=null;return t.endAt&&(E=function(T){return new Uh(T.values||[],!T.before)}(t.endAt)),IN(e,i,c,a,p,"F",_,E)}function sP(n){return n?void 0!==n.unaryFilter?[LU(n)]:void 0!==n.fieldFilter?[FU(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>sP(e)).reduce((e,t)=>e.concat(t)):lt():[]}function PU(n){return DU[n]}function OU(n){return AU[n]}function z_(n){return{fieldPath:n.canonicalString()}}function K_(n){return Ni.fromServerFormat(n.fieldPath)}function FU(n){return ts.create(K_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(n.fieldFilter.op),n.fieldFilter.value)}function LU(n){switch(n.unaryFilter.op){case"IS_NAN":const e=K_(n.unaryFilter.field);return ts.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=K_(n.unaryFilter.field);return ts.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=K_(n.unaryFilter.field);return ts.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=K_(n.unaryFilter.field);return ts.create(i,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}function UU(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function oP(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Oi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=aP(e)),e=VU(n.get(t),e);return aP(e)}function VU(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function aP(n){return n+"\x01\x01"}function Pl(n){const e=n.length;if(Ft(e>=2),2===e)return Ft("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),pn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&lt(),n.charAt(c+1)){case"\x01":const p=n.substring(a,c);let _;0===i.length?_=p:(i+=p,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:lt()}a=c+2}return new pn(r)}const lP=["userId","batchId"];function NT(n,e){return[n,Oi(e)]}function uP(n,e,t){return[n,Oi(e),t]}const BU={},jU=["prefixPath","collectionGroup","readTime","documentId"],ZU=["prefixPath","collectionGroup","documentId"],$U=["collectionGroup","readTime","prefixPath","documentId"],HU=["canonicalId","targetId"],qU=["targetId","path"],GU=["path","targetId"],WU=["collectionId","parent"],zU=["indexId","uid"],KU=["uid","sequenceNumber"],YU=["indexId","uid","arrayValue","directionalValue","documentKey"],QU=["indexId","uid","documentKey"],JU=["userId","collectionPath","documentId"],XU=["userId","collectionPath","largestBatchId"],eV=["userId","collectionGroup","largestBatchId"],cP=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tV=[...cP,"documentOverlays"],dP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],nV=[...dP,"indexConfiguration","indexState","indexEntries"],hP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.reject(t)}static resolve(e){return new pe((t,r)=>{t(e)})}static reject(e){return new pe((t,r)=>{r(e)})}static waitFor(e){return new pe((t,r)=>{let i=0,a=0,c=!1;e.forEach(p=>{++i,p.next(()=>{++a,c&&a===i&&t()},_=>r(_))}),c=!0,a===i&&t()})}static or(e){let t=pe.resolve(!1);for(const r of e)t=t.next(i=>i?pe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class PT{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Mi,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new lE(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=XS(r.target.error);this.At.reject(new lE(e,i))}}static open(e,t,r,i){try{return new PT(t,e.transaction(i,r))}catch(a){throw new lE(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new iV(t)}}class Ol{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Ol.Vt((0,P.z$)())&&ei("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),hg(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,P.hl)())return!1;if(Ol.St())return!0;const e=(0,P.z$)(),t=Ol.Vt(e),r=0<t&&t<10,i=Ol.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ge.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new lE(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const p=c.target.error;i("VersionError"===p.name?new xe(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new xe(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new lE(e,p))},a.onupgradeneeded=c=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ge.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{a.db=yield a.Nt(e);const _=PT.open(a.db,e,c?"readonly":"readwrite",r),E=i(_).next(T=>(_.bt(),T)).catch(T=>(_.abort(T),pe.reject(T))).toPromise();return E.catch(()=>{}),yield _.Rt,E}catch(_){const E="FirebaseError"!==_.name&&p<3;if(Oe("SimpleDb","Transaction failed with error:",_.message,"Retrying:",E),a.close(),!E)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class rV{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return hg(this.Ft.delete())}}class lE extends xe{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function dg(n){return"IndexedDbTransactionError"===n.name}class iV{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),hg(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),hg(this.store.add(e))}get(e){return hg(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),hg(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),hg(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Gt(i,(c,p)=>{a.push(p)}).next(()=>a)}{const i=this.store.getAll(r.range);return new pe((a,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{a(p.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new pe((i,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Gt(i,(a,c,p)=>p.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Gt(i,t)}zt(e){const t=this.cursor({});return new pe((r,i)=>{t.onerror=a=>{const c=XS(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}Gt(e,t){const r=[];return new pe((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void i();const _=new rV(p),E=t(p.primaryKey,p.value,_);if(E instanceof pe){const T=E.catch(S=>(_.done(),pe.reject(S)));r.push(T)}_.isDone?i():null===_.Lt?p.continue():p.continue(_.Lt)}}).next(()=>pe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function hg(n){return new pe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=XS(r.target.error);t(i)}})}let pP=!1;function XS(n){const e=Ol.Vt((0,P.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return pP||(pP=!0,setTimeout(()=>{throw r},0)),r}}return n}class gP extends fP{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Fi(n,e){const t=Ye(n);return Ol.xt(t.Ht,e)}class ex{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&_U(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&WS(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&WS(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(At.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),An())}isEqual(e){return this.batchId===e.batchId&&L_(this.mutations,e.mutations,(t,r)=>LN(t,r))&&L_(this.baseMutations,e.baseMutations,(t,r)=>LN(t,r))}}class tx{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ft(e.mutations.length===r.length);let i=bU;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new tx(e,t,r,i)}}class nx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Bh{constructor(e,t,r,i,a=At.min(),c=At.min(),p=wi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new Bh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Bh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Bh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class mP{constructor(e){this.Jt=e}}function _P(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:OT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:sE(i=n.Jt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:iE(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:fg(e.version)};else{if(!e.isUnknownDocument())return lt();r.unknownDocument={path:t.path.toArray(),version:fg(e.version)}}var i,a;return r}function OT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function fg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function pg(n){const e=new $r(n.seconds,n.nanoseconds);return At.fromTimestamp(e)}function Y_(n,e){const t=(e.baseMutations||[]).map(a=>JS(n.Jt,a));for(let a=0;a<e.mutations.length-1;++a){const c=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(c.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>JS(n.Jt,a)),i=$r.fromMillis(e.localWriteTimeMs);return new ex(e.batchId,i,t,r)}function uE(n){const e=pg(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?pg(n.lastLimboFreeSnapshotVersion):At.min();let r;var i;return void 0!==n.query.documents?(Ft(1===(i=n.query).documents.length),r=Ua($_(JN(i.documents[0])))):r=Ua(iP(n.query)),new Bh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,wi.fromBase64String(n.resumeToken))}function yP(n,e){const t=fg(e.snapshotVersion),r=fg(e.lastLimboFreeSnapshotVersion);let i;i=CT(e.target)?nP(n.Jt,e.target):rP(n.Jt,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ag(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function rx(n){const e=iP({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?TN(e,e.limit,"L"):e}function ix(n,e){return new nx(e.largestBatchId,JS(n.Jt,e.overlayMutation))}function vP(n,e){const t=e.path.lastSegment();return[n,Oi(e.path.popLast()),t]}class oV{getBundleMetadata(e,t){return wP(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:pg(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return wP(e).put({bundleId:(r=t).id,createTime:fg(Pi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return EP(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:rx(i.bundledQuery),readTime:pg(i.readTime)};var i})}saveNamedQuery(e,t){return EP(e).put({name:(r=t).name,readTime:fg(Pi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function wP(n){return Fi(n,"bundles")}function EP(n){return Fi(n,"namedQueries")}class sx{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new sx(e,t.uid||"")}getOverlay(e,t){return cE(e).get(vP(this.userId,t)).next(r=>r?ix(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((a,c)=>{const p=new nx(t,c);i.push(this.Xt(e,p))}),pe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Oi(c.getCollectionPath())));const a=[];return i.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(cE(e).Qt("collectionPathOverlayIndex",p))}),pe.waitFor(a)}getOverlaysForCollection(e,t,r){const i=tE(),a=Oi(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return cE(e).qt("collectionPathOverlayIndex",c).next(p=>{for(const _ of p){const E=ix(this.M,_);i.set(E.getKey(),E)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=tE();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return cE(e).Wt({index:"collectionGroupOverlayIndex",range:p},(_,E,T)=>{const S=ix(this.M,E);a.size()<i||S.largestBatchId===c?(a.set(S.getKey(),S),c=S.largestBatchId):T.done()}).next(()=>a)}Xt(e,t){return cE(e).put(function(r,i,a){const[c,p,_]=vP(i,a.mutation.key);return{userId:i,collectionPath:p,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:aE(r.Jt,a.mutation)}}(this.M,this.userId,t))}}function cE(n){return Fi(n,"documentOverlays")}class Q_{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(kr(e.integerValue));else if("doubleValue"in e){const r=kr(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),qw(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(ig(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?gN(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):lt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),Ze.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function aV(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function bP(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=aV(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Q_.fe=new Q_;class lV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=bP(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=bP(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class uV{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class cV{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class FT{constructor(){this.De=new lV,this.Ce=new uV(this.De),this.xe=new cV(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class jh{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new jh(this.indexId,this.documentKey,this.arrayValue,r)}}function gg(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=CP(n.arrayValue,e.arrayValue),0!==t?t:(t=CP(n.directionalValue,e.directionalValue),0!==t?t:Ze.comparator(n.documentKey,e.documentKey)))}function CP(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class dV{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=jS(e);if(void 0!==t&&!this.Be(t))return!1;const r=j_(e);let i=0,a=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[a++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(a>=this.Me.length||!this.Ue(this.Me[a++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class hV{constructor(){this.qe=new ox}addToCollectionParentIndex(e,t){return this.qe.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getFieldIndex(e,t){return pe.resolve(null)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}updateCollectionGroup(e,t,r){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class ox{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ir(pn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ir(pn.comparator)).toArray()}}const LT=new Uint8Array(0);class fV{constructor(e){this.user=e,this.Ge=new ox,this.Ke=new Vh(t=>ag(t),(t,r)=>Yw(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const a={collectionId:r,parent:Oi(i)};return IP(e).put(a)}return pe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[sN(t),""],!1,!0);return IP(e).qt(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(Pl(c.parent))}return r})}addFieldIndex(e,t){const r=UT(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=UT(e),i=VT(e),a=dE(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=dE(e);let i=!0;const a=new Map;return pe.forEach(this.Qe(t),c=>this.getFieldIndex(e,c).next(p=>{i&&(i=!!p),a.set(c,p)})).next(()=>{if(i){let c=An();return pe.forEach(a,(p,_)=>{var E;Oe("IndexedDbIndexManager",`Using index ${E=p,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(qe=>`${qe.fieldPath}:${qe.kind}`).join(",")}`} to execute ${ag(t)}`);const T=function(qe,ct){const ze=jS(ct);if(void 0===ze)return null;for(const Mt of IT(qe,ze.fieldPath))switch(Mt.op){case"array-contains-any":return Mt.value.arrayValue.values||[];case"array-contains":return[Mt.value]}return null}(_,p),S=function(qe,ct){const ze=new Map;for(const Mt of j_(ct))for(const Ut of IT(qe,Mt.fieldPath))switch(Ut.op){case"==":case"in":ze.set(Mt.fieldPath.canonicalString(),Ut.value);break;case"not-in":case"!=":return ze.set(Mt.fieldPath.canonicalString(),Ut.value),Array.from(ze.values())}return null}(_,p),N=function(qe,ct){const ze=[];let Mt=!0;for(const wo of j_(ct)){let Ei,Ll=!0;for(const bi of IT(qe,wo.fieldPath)){let Er,yy=!0;switch(bi.op){case"<":case"<=":Er="nullValue"in(Ut=bi.value)?dN:"booleanValue"in Ut?{booleanValue:!1}:"integerValue"in Ut||"doubleValue"in Ut?{doubleValue:NaN}:"timestampValue"in Ut?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in Ut?{stringValue:""}:"bytesValue"in Ut?{bytesValue:""}:"referenceValue"in Ut?B_(Xc.empty(),Ze.empty()):"geoPointValue"in Ut?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in Ut?{arrayValue:{}}:"mapValue"in Ut?{mapValue:{}}:lt();break;case"==":case"in":case">=":Er=bi.value;break;case">":Er=bi.value,yy=!1;break;case"!=":case"not-in":Er=dN}mN(Ei,Er)===Er&&(Ei=Er,Ll=yy)}if(null!==qe.startAt)for(let bi=0;bi<qe.orderBy.length;++bi)if(qe.orderBy[bi].field.isEqual(wo.fieldPath)){const Er=qe.startAt.position[bi];mN(Ei,Er)===Er&&(Ei=Er,Ll=qe.startAt.inclusive);break}if(void 0===Ei)return null;ze.push(Ei),Mt&&(Mt=Ll)}var Ut;return new Uh(ze,Mt)}(_,p),U=function(qe,ct){const ze=[];let Mt=!0;for(const wo of j_(ct)){let Ei,Ll=!0;for(const bi of IT(qe,wo.fieldPath)){let Er,yy=!0;switch(bi.op){case">=":case">":Er="nullValue"in(Ut=bi.value)?{booleanValue:!1}:"booleanValue"in Ut?{doubleValue:NaN}:"integerValue"in Ut||"doubleValue"in Ut?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in Ut?{stringValue:""}:"stringValue"in Ut?{bytesValue:""}:"bytesValue"in Ut?B_(Xc.empty(),Ze.empty()):"referenceValue"in Ut?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in Ut?{arrayValue:{}}:"arrayValue"in Ut?{mapValue:{}}:"mapValue"in Ut?cN:lt(),yy=!1;break;case"==":case"in":case"<=":Er=bi.value;break;case"<":Er=bi.value,yy=!1;break;case"!=":case"not-in":Er=cN}_N(Ei,Er)===Er&&(Ei=Er,Ll=yy)}if(null!==qe.endAt)for(let bi=0;bi<qe.orderBy.length;++bi)if(qe.orderBy[bi].field.isEqual(wo.fieldPath)){const Er=qe.endAt.position[bi];_N(Ei,Er)===Er&&(Ei=Er,Ll=qe.endAt.inclusive);break}if(void 0===Ei)return null;ze.push(Ei),Mt&&(Mt=Ll)}var Ut;return new Uh(ze,Mt)}(_,p),Z=this.je(p,_,N),ue=this.je(p,_,U),be=this.We(p,_,S),Ke=this.ze(p.indexId,T,Z,!!N&&N.inclusive,ue,!!U&&U.inclusive,be);return pe.forEach(Ke,qe=>r.Kt(qe,t.limit).next(ct=>{ct.forEach(ze=>{c=c.add(new Ze(Pl(ze.documentKey)))})}))}).next(()=>c)}return pe.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,i,a,c,p){const _=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=a?a.length:1),E=_/(null!=t?t.length:1),T=[];for(let S=0;S<_;++S){const N=t?this.He(t[S/E]):LT,U=r?this.Je(e,N,r[S%E],i):this.Ye(e),Z=a?this.Xe(e,N,a[S%E],c):this.Ye(e+1);T.push(...this.createRange(U,Z,p.map(ue=>this.Je(e,N,ue,!0))))}return T}Je(e,t,r,i){const a=new jh(e,Ze.empty(),t,r);return i?a:a.ke()}Xe(e,t,r,i){const a=new jh(e,Ze.empty(),t,r);return i?a.ke():a}Ye(e){return new jh(e,Ze.empty(),LT,LT)}getFieldIndex(e,t){const r=new dV(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{const c=a.filter(p=>r.$e(p));return c.sort((p,_)=>_.fields.length-p.fields.length),c.length>0?c[0]:null})}Ze(e,t){const r=new FT;for(const i of j_(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.Ne(i.kind);Q_.fe.Zt(a,c)}return r.Se()}He(e){const t=new FT;return Q_.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new FT);let a=0;for(const c of j_(e)){const p=r[a++];for(const _ of i)if(this.tn(t,c.fieldPath)&&Ww(p))i=this.en(i,c,p);else{const E=_.Ne(c.kind);Q_.fe.Zt(p,E)}}return this.nn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const i=[...e],a=[];for(const c of r.arrayValue.values||[])for(const p of i){const _=new FT;_.seed(p.Se()),Q_.fe.Zt(c,_.Ne(t.kind)),a.push(_)}return a}tn(e,t){return!!e.filters.find(r=>r instanceof ts&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=UT(e),i=VT(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const c=[];return pe.forEach(a,p=>i.get([p.indexId,this.uid]).next(_=>{c.push(function(E,T){const S=T?new Kw(T.sequenceNumber,new ed(pg(T.readTime),new Ze(Pl(T.documentKey)),T.largestBatchId)):Kw.empty(),N=E.fields.map(([U,Z])=>new bT(Ni.fromServerFormat(U),Z));return new ET(E.indexId,E.collectionGroup,N,S)}(p,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Jt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=UT(e),a=VT(e);return this.sn(e).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>pe.forEach(p,_=>{return a.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:fg((N=r).readTime),documentKey:Oi(N.documentKey.path),largestBatchId:N.largestBatchId});var N})))}updateIndexEntries(e,t){const r=new Map;return pe.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?pe.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),pe.forEach(p,_=>this.rn(e,i,_).next(E=>{const T=this.on(a,_);return E.isEqual(T)?pe.resolve():this.un(e,a,E,T)}))))})}an(e,t,r){return dE(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:Oi(t.key.path)})}cn(e,t,r){return dE(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,Oi(t.key.path)])}rn(e,t,r){const i=dE(e);let a=new ir(gg);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,Oi(t.path)])},(c,p)=>{a=a.add(new jh(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>a)}on(e,t){let r=new ir(gg);const i=this.Ze(t,e);if(null==i)return r;const a=jS(t);if(null!=a){const c=e.data.field(a.fieldPath);if(Ww(c))for(const p of c.arrayValue.values||[])r=r.add(new jh(t.indexId,e.key,this.He(p),i))}else r=r.add(new jh(t.indexId,e.key,LT,i));return r}un(e,t,r,i){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(c,p,_,E,T){const S=c.getIterator(),N=p.getIterator();let U=W_(S),Z=W_(N);for(;U||Z;){let ue=!1,be=!1;if(U&&Z){const Ke=_(U,Z);Ke<0?be=!0:Ke>0&&(ue=!0)}else null!=U?be=!0:ue=!0;ue?(E(Z),Z=W_(N)):be?(T(U),U=W_(S)):(U=W_(S),Z=W_(N))}}(r,i,gg,c=>{a.push(this.an(e,t,c))},c=>{a.push(this.cn(e,t,c))}),pe.waitFor(a)}sn(e){let t=1;return VT(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>gg(c,p)).filter((c,p,_)=>!p||0!==gg(c,_[p-1]));const i=[];i.push(e);for(const c of r){const p=gg(c,e),_=gg(c,t);if(0===p)i[0]=e.ke();else if(p>0&&_<0)i.push(c),i.push(c.ke());else if(_>0)break}i.push(t);const a=[];for(let c=0;c<i.length;c+=2)a.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,""],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,""]));return a}}function IP(n){return Fi(n,"collectionParents")}function dE(n){return Fi(n,"indexEntries")}function UT(n){return Fi(n,"indexConfiguration")}function VT(n){return Fi(n,"indexState")}const TP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class vo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new vo(e,vo.DEFAULT_COLLECTION_PERCENTILE,vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function DP(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let p=0;const _=r.Wt({range:c},(T,S,N)=>(p++,N.delete()));a.push(_.next(()=>{Ft(1===p)}));const E=[];for(const T of t.mutations){const S=uP(e,T.key.path,t.batchId);a.push(i.delete(S)),E.push(T.key)}return pe.waitFor(a).next(()=>E)}function BT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw lt();e=n.noDocument}return JSON.stringify(e).length}vo.DEFAULT_COLLECTION_PERCENTILE=10,vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vo.DEFAULT=new vo(41943040,vo.DEFAULT_COLLECTION_PERCENTILE,vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vo.DISABLED=new vo(-1,0,0);class ax{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.hn={}}static Yt(e,t,r,i){Ft(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new ax(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zh(e).Wt({index:"userMutationsIndex",range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=J_(e),c=Zh(e);return c.add({}).next(p=>{Ft("number"==typeof p);const _=new ex(p,t,r,i),E=function(N,U,Z){const ue=Z.baseMutations.map(Ke=>aE(N.Jt,Ke)),be=Z.mutations.map(Ke=>aE(N.Jt,Ke));return{userId:U,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:ue,mutations:be}}(this.M,this.userId,_),T=[];let S=new ir((N,U)=>Jt(N.canonicalString(),U.canonicalString()));for(const N of i){const U=uP(this.userId,N.key.path,p);S=S.add(N.key.path.popLast()),T.push(c.put(E)),T.push(a.put(U,BU))}return S.forEach(N=>{T.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.hn[p]=_.keys()}),pe.waitFor(T).next(()=>_)})}lookupMutationBatch(e,t){return Zh(e).get(t).next(r=>r?(Ft(r.userId===this.userId),Y_(this.M,r)):null)}ln(e,t){return this.hn[t]?pe.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.hn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Zh(e).Wt({index:"userMutationsIndex",range:i},(c,p,_)=>{p.userId===this.userId&&(Ft(p.batchId>=r),a=Y_(this.M,p)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Zh(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zh(e).qt("userMutationsIndex",t).next(r=>r.map(i=>Y_(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=NT(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return J_(e).Wt({range:i},(c,p,_)=>{const[E,T,S]=c,N=Pl(T);if(E===this.userId&&t.path.isEqual(N))return Zh(e).get(S).next(U=>{if(!U)throw lt();Ft(U.userId===this.userId),a.push(Y_(this.M,U))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ir(Jt);const i=[];return t.forEach(a=>{const c=NT(this.userId,a.path),p=IDBKeyRange.lowerBound(c),_=J_(e).Wt({range:p},(E,T,S)=>{const[N,U,Z]=E,ue=Pl(U);N===this.userId&&a.path.isEqual(ue)?r=r.add(Z):S.done()});i.push(_)}),pe.waitFor(i).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=NT(this.userId,r),c=IDBKeyRange.lowerBound(a);let p=new ir(Jt);return J_(e).Wt({range:c},(_,E,T)=>{const[S,N,U]=_,Z=Pl(N);S===this.userId&&r.isPrefixOf(Z)?Z.length===i&&(p=p.add(U)):T.done()}).next(()=>this.fn(e,p))}fn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Zh(e).get(a).next(c=>{if(null===c)throw lt();Ft(c.userId===this.userId),r.push(Y_(this.M,c))}))}),pe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return DP(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),pe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return pe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return J_(e).Wt({range:r},(a,c,p)=>{if(a[0]===this.userId){const _=Pl(a[1]);i.push(_)}else p.done()}).next(()=>{Ft(0===i.length)})})}containsKey(e,t){return AP(e,this.userId,t)}_n(e){return SP(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function AP(n,e,t){const r=NT(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return J_(n).Wt({range:a,jt:!0},(p,_,E)=>{const[T,S,N]=p;T===e&&S===i&&(c=!0),E.done()}).next(()=>c)}function Zh(n){return Fi(n,"mutations")}function J_(n){return Fi(n,"documentMutations")}function SP(n){return Fi(n,"mutationQueues")}class mg{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new mg(0)}static gn(){return new mg(-1)}}class pV{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new mg(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>At.fromTimestamp(new $r(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.pn(e,i)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>X_(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(Ft(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return X_(e).Wt((c,p)=>{const _=uE(p);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>pe.waitFor(a)).next(()=>i)}forEachTarget(e,t){return X_(e).Wt((r,i)=>{const a=uE(i);t(a)})}yn(e){return xP(e).get("targetGlobalKey").next(t=>(Ft(null!==t),t))}pn(e,t){return xP(e).put("targetGlobalKey",t)}In(e,t){return X_(e).put(yP(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ag(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return X_(e).Wt({range:i,index:"queryTargetsIndex"},(c,p,_)=>{const E=uE(p);Yw(t,E.target)&&(a=E,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=$h(e);return t.forEach(c=>{const p=Oi(c.path);i.push(a.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,c))}),pe.waitFor(i)}removeMatchingKeys(e,t,r){const i=$h(e);return pe.forEach(t,a=>{const c=Oi(a.path);return pe.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=$h(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=$h(e);let a=An();return i.Wt({range:r,jt:!0},(c,p,_)=>{const E=Pl(c[1]),T=new Ze(E);a=a.add(T)}).next(()=>a)}containsKey(e,t){const r=Oi(t.path),i=IDBKeyRange.bound([r],[sN(r)],!1,!0);let a=0;return $h(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,p],_,E)=>{0!==c&&(a++,E.done())}).next(()=>a>0)}Et(e,t){return X_(e).get(t).next(r=>r?uE(r):null)}}function X_(n){return Fi(n,"targets")}function xP(n){return Fi(n,"targetGlobal")}function $h(n){return Fi(n,"targetDocuments")}function _g(n){return lx.apply(this,arguments)}function lx(){return lx=(0,ge.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==hP)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),lx.apply(this,arguments)}function kP([n,e],[t,r]){const i=Jt(n,t);return 0===i?Jt(e,r):i}class gV{constructor(e){this.En=e,this.buffer=new ir(kP),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();kP(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class mV{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;Oe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ge.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){dg(i)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield _g(i)}yield t.vn(e)}))}}class _V{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return pe.resolve(ta.A);const r=new gV(t);return this.Sn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Sn.Cn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(TP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),TP):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,i,a,c,p,_,E;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,c=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,p=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(E=Date.now(),FS()<=qo.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-T}ms\n\tDetermined least recently used ${i} in `+(p-c)+`ms\n\tRemoved ${a} targets in `+(_-p)+`ms\n\tRemoved ${S} documents in `+(E-_)+`ms\nTotal Duration: ${E-T}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class yV{constructor(e,t){this.db=e,this.garbageCollector=new _V(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,i)=>t(i))}addReference(e,t,r){return jT(e,r)}removeReference(e,t,r){return jT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return jT(e,t)}Mn(e,t){return function(r,i){let a=!1;return SP(r).zt(c=>AP(r,c,i).next(p=>(p&&(a=!0),pe.resolve(!p)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.kn(e,(c,p)=>{if(p<=t){const _=this.Mn(e,c).next(E=>{if(!E)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,At.min()),$h(e).delete([0,Oi(c.path)])))});i.push(_)}}).next(()=>pe.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return jT(e,t)}kn(e,t){const r=$h(e);let i,a=ta.A;return r.Wt({index:"documentTargetsIndex"},([c,p],{path:_,sequenceNumber:E})=>{0===c?(a!==ta.A&&t(new Ze(Pl(i)),a),a=E,i=_):a=ta.A}).next(()=>{a!==ta.A&&t(new Ze(Pl(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function jT(n,e){return $h(n).put((r=n.currentSequenceNumber,{targetId:0,path:Oi(e.path),sequenceNumber:r}));var r}class RP{constructor(){this.changes=new Vh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?pe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class vV{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return yg(e).put(r)}removeEntry(e,t,r){return yg(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],OT(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=rr.newInvalidDocument(t);return yg(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(hE(t))},(i,a)=>{r=this.Fn(t,a)}).next(()=>r)}$n(e,t){let r={size:0,document:rr.newInvalidDocument(t)};return yg(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(hE(t))},(i,a)=>{r={document:this.Fn(t,a),size:BT(a)}}).next(()=>r)}getEntries(e,t){let r=Va();return this.Bn(e,t,(i,a)=>{const c=this.Fn(i,a);r=r.insert(i,c)}).next(()=>r)}Ln(e,t){let r=Va(),i=new Hr(Ze.comparator);return this.Bn(e,t,(a,c)=>{const p=this.Fn(a,c);r=r.insert(a,p),i=i.insert(a,BT(c))}).next(()=>({documents:r,Un:i}))}Bn(e,t,r){if(t.isEmpty())return pe.resolve();let i=new ir(PP);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(hE(i.first()),hE(i.last())),c=i.getIterator();let p=c.getNext();return yg(e).Wt({index:"documentKeyIndex",range:a},(_,E,T)=>{const S=Ze.fromSegments([...E.prefixPath,E.collectionGroup,E.documentId]);for(;p&&PP(p,S)<0;)r(p,null),p=c.getNext();p&&p.isEqual(S)&&(r(p,E),p=c.hasNext()?c.getNext():null),p?T.Ut(hE(p)):T.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),OT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yg(e).qt(IDBKeyRange.bound(i,a,!0)).next(c=>{let p=Va();for(const _ of c){const E=this.Fn(Ze.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);p=p.insert(E.key,E)}return p})}getAllFromCollectionGroup(e,t,r,i){let a=Va();const c=NP(t,r),p=NP(t,ed.max());return yg(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(_,E,T)=>{const S=this.Fn(Ze.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);a=a.insert(S.key,S),a.size===i&&T.done()}).next(()=>a)}newChangeBuffer(e){return new wV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return MP(e).get("remoteDocumentGlobalKey").next(t=>(Ft(!!t),t))}On(e,t){return MP(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function sV(n,e){let t;if(e.document)t=tP(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ze.fromSegments(e.noDocument.path),i=pg(e.noDocument.readTime);t=rr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return lt();{const r=Ze.fromSegments(e.unknownDocument.path),i=pg(e.unknownDocument.version);t=rr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new $r(r[0],r[1]);return At.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(At.min()))return r}return rr.newInvalidDocument(e)}}class wV extends RP{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new Vh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new ir((a,c)=>Jt(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const p=this.Gn.get(a);if(t.push(this.qn.removeEntry(e,a,p.readTime)),c.isValidDocument()){const _=_P(this.qn.M,c);i=i.add(a.path.popLast()),r+=BT(_)-p.size,t.push(this.qn.addEntry(e,a,_))}else if(r-=p.size,this.trackRemovals){const _=_P(this.qn.M,c.convertToNoDocument(At.min()));t.push(this.qn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.qn.updateMetadata(e,r)),pe.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:i})=>(i.forEach((a,c)=>{this.Gn.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function MP(n){return Fi(n,"remoteDocumentGlobal")}function yg(n){return Fi(n,"remoteDocumentsV14")}function hE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function NP(n,e){const t=e.documentKey.path.toArray();return[n,OT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function PP(n,e){const t=n.path.length-e.path.length;return 0!==t?t:Ze.comparator(n,e)}class EV{constructor(e){this.M=e}kt(e,t,r,i){const a=new PT("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lP,{unique:!0}),p.createObjectStore("documentMutations"),OP(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=pe.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),OP(e)),c=c.next(()=>function(p){const _=p.store("targetGlobal"),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:At.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",E)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(p,_){return _.store("mutations").qt().next(E=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lP,{unique:!0});const T=_.store("mutations"),S=E.map(N=>T.put(N));return pe.waitFor(S)})}(e,a))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Kn(a))),r<6&&i>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(a)))),r<7&&i>=7&&(c=c.next(()=>this.jn(a))),r<8&&i>=8&&(c=c.next(()=>this.Wn(e,a))),r<9&&i>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.zn(a))),r<11&&i>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(p){const _=p.createObjectStore("documentOverlays",{keyPath:JU});_.createIndex("collectionPathOverlayIndex",XU,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",eV,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(p){const _=p.createObjectStore("remoteDocumentsV14",{keyPath:jU});_.createIndex("documentKeyIndex",ZU),_.createIndex("collectionGroupIndex",$U)}(e)).next(()=>this.Hn(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:zU}).createIndex("sequenceNumberIndex",KU,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:YU}).createIndex("documentKeyIndex",QU,{unique:!1})}(e)})),c}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=BT(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>pe.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(p=>pe.forEach(p,_=>{Ft(_.userId===a.userId);const E=Y_(this.M,_);return DP(e,a.userId,E).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Wt((c,p)=>{const _=new pn(c),E=[0,Oi(_)];a.push(t.get(E).next(T=>T?pe.resolve():t.put({targetId:0,path:Oi(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>pe.waitFor(a))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:WU});const r=t.store("collectionParents"),i=new ox,a=c=>{if(i.add(c)){const p=c.lastSegment(),_=c.popLast();return r.put({collectionId:p,parent:Oi(_)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,p)=>{const _=new pn(c);return a(_.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,p,_],E)=>{const T=Pl(p);return a(T.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,i)=>{const a=uE(i),c=yP(this.M,a);return t.put(c)})}Hn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((a,c)=>{const p=t.store("remoteDocumentsV14"),_=(E=c,E.document?new Ze(pn.fromString(E.document.name).popFirst(5)):E.noDocument?Ze.fromSegments(E.noDocument.path):E.unknownDocument?Ze.fromSegments(E.unknownDocument.path):lt()).path.toArray();var E;const T={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(p.put(T))}).next(()=>pe.waitFor(i))}}function OP(n){n.createObjectStore("targetDocuments",{keyPath:qU}).createIndex("documentTargetsIndex",GU,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",HU,{unique:!0}),n.createObjectStore("targetGlobal")}const ux="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class cx{constructor(e,t,r,i,a,c,p,_,E,T,S=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=a,this.window=c,this.document=p,this.Yn=E,this.Xn=T,this.Zn=S,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=N=>Promise.resolve(),!cx.vt())throw new xe(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yV(this,i),this.cs=t+"main",this.M=new mP(_),this.hs=new Ol(this.cs,this.Zn,new EV(this.M)),this.ls=new pV(this.referenceDelegate,this.M),this.fs=new vV(this.M),this.ds=new oV,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===T&&ei("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(le.FAILED_PRECONDITION,ux);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new ta(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,ge.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,ge.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,ge.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ZT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(dg(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return fE(e).get("owner").next(t=>pe.resolve(this.bs(t)))}Ps(e){return ZT(e).delete(this.clientId)}Vs(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Fi(r,"clientMetadata");return i.qt().next(a=>{const c=e.Ss(a,18e5),p=a.filter(_=>-1===c.indexOf(_));return pe.forEach(p,_=>i.delete(_.clientId)).next(()=>p)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?pe.resolve(!0):fE(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new xe(le.FAILED_PRECONDITION,ux);return!1}}return!(!this.networkEnabled||!this.inForeground)||ZT(e).qt().next(r=>void 0===this.Ss(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new gP(t,ta.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>ZT(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return ax.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new fV(e)}getDocumentOverlayCache(e){return sx.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=14===(c=this.Zn)?nV:13===c?dP:12===c?tV:11===c?cP:void lt();var c;let p;return this.hs.runTransaction(e,i,a,_=>(p=new gP(_,this.ts?this.ts.next():ta.A),"readwrite-primary"===t?this.Ts(p).next(E=>!!E||this.Es(p)).next(E=>{if(!E)throw ei(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new xe(le.FAILED_PRECONDITION,hP);return r(p)}).next(E=>this.Rs(p).next(()=>E)):this.Fs(p).next(()=>r(p)))).then(_=>(p.raiseOnCommittedEvent(),_))}Fs(e){return fE(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(le.FAILED_PRECONDITION,ux)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return fE(e).put("owner",t)}static vt(){return Ol.vt()}As(e){const t=fE(e);return t.get("owner").next(r=>this.bs(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):pe.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(ei(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,P.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ei("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){ei("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function fE(n){return Fi(n,"owner")}function ZT(n){return Fi(n,"clientMetadata")}function dx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class bV{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}Us(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return Ze.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Qs(e,t.path):HS(t)?this.js(e,t,r):this.Ws(e,t,r);var i}Qs(e,t){return this.Bs(e,new Ze(t)).next(r=>{let i=KS();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}js(e,t,r){const i=t.collectionGroup;let a=KS();return this.indexManager.getCollectionParents(e,i).next(c=>pe.forEach(c,p=>{const _=(E=t,T=p.child(i),new td(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,T;return this.Ws(e,_,r).next(E=>{E.forEach((T,S)=>{a=a.insert(T,S)})})}).next(()=>a))}Ws(e,t,r){let i;return this.fs.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const c of a)for(const p of c.mutations){const _=p.key;let E=i.get(_);null==E&&(E=rr.newInvalidDocument(_),i=i.insert(_,E)),WS(p,E,c.localWriteTime),E.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((a,c)=>{GS(t,c)||(i=i.remove(a))}),i))}}class hx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=i}static Js(e,t){let r=An(),i=An();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new hx(e,t.fromCache,r,i)}}class FP{Ys(e){this.Xs=e}Ks(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(At.min())?this.Zs(e,t):this.Xs.qs(e,i).next(a=>{const c=this.ti(t,a);return(TT(t)||DT(t))&&this.ei(t.limitType,c,i,r)?this.Zs(e,t):(FS()<=qo.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),qS(t)),this.Xs.Ks(e,t,vN(r,-1)).next(p=>(c.forEach(_=>{p=p.insert(_.key,_)}),p)))});var a}ti(e,t){let r=new ir(SN(e));return t.forEach((i,a)=>{GS(e,a)&&(r=r.add(a))}),r}ei(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Zs(e,t){return FS()<=qo.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",qS(t)),this.Xs.Ks(e,t,ed.min())}}class CV{constructor(e,t,r,i){this.persistence=e,this.ni=t,this.M=i,this.si=new Hr(Jt),this.ii=new Vh(a=>ag(a),Yw),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new bV(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function LP(n,e,t,r){return new CV(n,e,t,r)}function UP(n,e){return fx.apply(this,arguments)}function fx(){return fx=(0,ge.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.$s.getAllMutationBatches(r).next(a=>(i=a,t.ui(e),t.$s.getAllMutationBatches(r))).next(a=>{const c=[],p=[];let _=An();for(const E of i){c.push(E.batchId);for(const T of E.mutations)_=_.add(T.key)}for(const E of a){p.push(E.batchId);for(const T of E.mutations)_=_.add(T.key)}return t.ai.qs(r,_).next(E=>({ci:E,removedBatchIds:c,addedBatchIds:p}))})})}),fx.apply(this,arguments)}function IV(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.oi.newChangeBuffer({trackRemovals:!0});return function(c,p,_,E){const T=_.batch,S=T.keys();let N=pe.resolve();return S.forEach(U=>{N=N.next(()=>E.getEntry(p,U)).next(Z=>{const ue=_.docVersions.get(U);Ft(null!==ue),Z.version.compareTo(ue)<0&&(T.applyToRemoteDocument(Z,_),Z.isValidDocument()&&(Z.setReadTime(_.commitVersion),E.addEntry(Z)))})}),N.next(()=>c.$s.removeMutationBatch(p,T))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,i))})}function VP(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function TV(n,e){const t=Ye(n),r=e.snapshotVersion;let i=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.oi.newChangeBuffer({trackRemovals:!0});i=t.si;const p=[];e.targetChanges.forEach((E,T)=>{const S=i.get(T);if(!S)return;p.push(t.ls.removeMatchingKeys(a,E.removedDocuments,T).next(()=>t.ls.addMatchingKeys(a,E.addedDocuments,T)));let N=S.withSequenceNumber(a.currentSequenceNumber);var U,Z,ue;e.targetMismatches.has(T)?N=N.withResumeToken(wi.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):E.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(E.resumeToken,r)),i=i.insert(T,N),Z=N,ue=E,(0===(U=S).resumeToken.approximateByteSize()||Z.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||ue.addedDocuments.size+ue.modifiedDocuments.size+ue.removedDocuments.size>0)&&p.push(t.ls.updateTargetData(a,N))});let _=Va();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(a,E))}),p.push(BP(a,c,e.documentUpdates).next(E=>{_=E})),!r.isEqual(At.min())){const E=t.ls.getLastRemoteSnapshotVersion(a).next(T=>t.ls.setTargetsMetadata(a,a.currentSequenceNumber,r));p.push(E)}return pe.waitFor(p).next(()=>c.apply(a)).next(()=>t.ai.Gs(a,_)).next(()=>_)}).then(a=>(t.si=i,a))}function BP(n,e,t){let r=An();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=Va();return t.forEach((c,p)=>{const _=i.get(c);p.isNoDocument()&&p.version.isEqual(At.min())?(e.removeEntry(c,p.readTime),a=a.insert(c,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(p),a=a.insert(c,p)):Oe("LocalStore","Ignoring outdated watch update for ",c,". Current version:",_.version," Watch version:",p.version)}),a})}function DV(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function ey(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ls.getTargetData(r,e).next(a=>a?(i=a,pe.resolve(i)):t.ls.allocateTargetId(r).next(c=>(i=new Bh(e,c,0,r.currentSequenceNumber),t.ls.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.si.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function ty(n,e,t){return px.apply(this,arguments)}function px(){return px=(0,ge.Z)(function*(n,e,t){const r=Ye(n),i=r.si.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!dg(c))throw c;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.si=r.si.remove(e),r.ii.delete(i.target)}),px.apply(this,arguments)}function $T(n,e,t){const r=Ye(n);let i=At.min(),a=An();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,_,E){const T=Ye(p),S=T.ii.get(E);return void 0!==S?pe.resolve(T.si.get(S)):T.ls.getTargetData(_,E)}(r,c,Ua(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(c,p.targetId).next(_=>{a=_})}).next(()=>r.ni.Ks(c,e,t?i:At.min(),t?a:An())).next(p=>($P(r,AN(e),p),{documents:p,hi:a})))}function jP(n,e){const t=Ye(n),r=Ye(t.ls),i=t.si.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(c=>c?c.target:null))}function ZP(n,e){const t=Ye(n),r=t.ri.get(e)||At.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.oi.getAllFromCollectionGroup(i,e,vN(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>($P(t,e,i),i))}function $P(n,e,t){let r=At.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.ri.set(e,r)}function gx(){return gx=(0,ge.Z)(function*(n,e,t,r){const i=Ye(n);let a=An(),c=Va();for(const E of t){const T=e.li(E.metadata.name);E.document&&(a=a.add(T));const S=e.fi(E);S.setReadTime(e.di(E.metadata.readTime)),c=c.insert(T,S)}const p=i.oi.newChangeBuffer({trackRemovals:!0}),_=yield ey(i,(E=r,Ua($_(pn.fromString(`__bundle__/docs/${E}`)))));var E;return i.persistence.runTransaction("Apply bundle documents","readwrite",E=>BP(E,p,c).next(T=>(p.apply(E),T)).next(T=>i.ls.removeMatchingKeysForTargetId(E,_.targetId).next(()=>i.ls.addMatchingKeys(E,a,_.targetId)).next(()=>i.ai.Gs(E,T)).next(()=>T)))}),gx.apply(this,arguments)}function SV(n,e){return mx.apply(this,arguments)}function mx(){return mx=(0,ge.Z)(function*(n,e,t=An()){const r=yield ey(n,Ua(rx(e.bundledQuery))),i=Ye(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=Pi(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.ds.saveNamedQuery(a,e);const p=r.withResumeToken(wi.EMPTY_BYTE_STRING,c);return i.si=i.si.insert(p.targetId,p),i.ls.updateTargetData(a,p).next(()=>i.ls.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.ls.addMatchingKeys(a,t,r.targetId)).next(()=>i.ds.saveNamedQuery(a,e))})}),mx.apply(this,arguments)}class xV{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return pe.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:Pi(r.createTime)}),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:rx(r.bundledQuery),readTime:Pi(r.readTime)}),pe.resolve();var r}}class kV{constructor(){this.overlays=new Hr(Ze.comparator),this.mi=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.Xt(e,t,a)}),pe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.mi.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.mi.delete(r)),pe.resolve()}getOverlaysForCollection(e,t,r){const i=tE(),a=t.length+1,c=new Ze(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const _=p.getNext().value,E=_.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return pe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Hr((E,T)=>E-T);const c=this.overlays.getIterator();for(;c.hasNext();){const E=c.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>r){let T=a.get(E.largestBatchId);null===T&&(T=tE(),a=a.insert(E.largestBatchId,T)),T.set(E.getKey(),E)}}const p=tE(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((E,T)=>p.set(E,T)),!(p.size()>=i)););return pe.resolve(p)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.mi.get(i.largestBatchId).delete(r.key);this.mi.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new nx(t,r));let a=this.mi.get(t);void 0===a&&(a=An(),this.mi.set(t,a)),this.mi.set(t,a.add(r.key))}}class _x{constructor(){this.gi=new ir(Li.yi),this.pi=new ir(Li.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new Li(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new Li(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new Ze(new pn([])),r=new Li(t,e),i=new Li(t,e+1),a=[];return this.pi.forEachInRange([r,i],c=>{this.Ei(c),a.push(c.key)}),a}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new Ze(new pn([])),r=new Li(t,e),i=new Li(t,e+1);let a=An();return this.pi.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Li(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Li{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return Ze.comparator(e.key,t.key)||Jt(e.Vi,t.Vi)}static Ii(e,t){return Jt(e.Vi,t.Vi)||Ze.comparator(e.key,t.key)}}class RV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new ir(Li.yi)}checkEmpty(e){return pe.resolve(0===this.$s.length)}addMutationBatch(e,t,r,i){const a=this.vi;this.vi++;const c=new ex(a,t,r,i);this.$s.push(c);for(const p of i)this.Si=this.Si.add(new Li(p.key,a)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return pe.resolve(c)}lookupMutationBatch(e,t){return pe.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ci(t+1),a=i<0?0:i;return pe.resolve(this.$s.length>a?this.$s[a]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return pe.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Li(t,0),i=new Li(t,Number.POSITIVE_INFINITY),a=[];return this.Si.forEachInRange([r,i],c=>{const p=this.Di(c.Vi);a.push(p)}),pe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ir(Jt);return t.forEach(i=>{const a=new Li(i,0),c=new Li(i,Number.POSITIVE_INFINITY);this.Si.forEachInRange([a,c],p=>{r=r.add(p.Vi)})}),pe.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ze.isDocumentKey(a)||(a=a.child(""));const c=new Li(new Ze(a),0);let p=new ir(Jt);return this.Si.forEachWhile(_=>{const E=_.key.path;return!!r.isPrefixOf(E)&&(E.length===i&&(p=p.add(_.Vi)),!0)},c),pe.resolve(this.xi(p))}xi(e){const t=[];return e.forEach(r=>{const i=this.Di(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ft(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return pe.forEach(t.mutations,i=>{const a=new Li(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new Li(t,0),i=this.Si.firstAfterOrEqual(r);return pe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return pe.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class MV{constructor(e){this.ki=e,this.docs=new Hr(Ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return pe.resolve(r?r.document.mutableCopy():rr.newInvalidDocument(t))}getEntries(e,t){let r=Va();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():rr.newInvalidDocument(i))}),pe.resolve(r)}getAllFromCollection(e,t,r){let i=Va();const a=new Ze(t.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:p,value:{document:_}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||tU(eU(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return pe.resolve(i)}getAllFromCollectionGroup(e,t,r,i){lt()}Mi(e,t){return pe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new NV(this)}getSize(e){return pe.resolve(this.size)}}class NV extends RP{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.qn.addEntry(e,i)):this.qn.removeEntry(r)}),pe.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class PV{constructor(e){this.persistence=e,this.Oi=new Vh(t=>ag(t),Yw),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.Fi=0,this.$i=new _x,this.targetCount=0,this.Bi=mg.mn()}forEachTarget(e,t){return this.Oi.forEach((r,i)=>t(i)),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),pe.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new mg(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.In(t),pe.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Oi.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Oi.delete(c),a.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),pe.waitFor(a).next(()=>i)}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return pe.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),pe.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),pe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return pe.resolve(r)}containsKey(e,t){return pe.resolve(this.$i.containsKey(t))}}class OV{constructor(e,t){this.Li={},this.overlays={},this.ts=new ta(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new PV(this),this.indexManager=new hV,this.fs=new MV(r=>this.referenceDelegate.Ui(r)),this.M=new mP(t),this.ds=new xV(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new RV(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const i=new FV(this.ts.next());return this.referenceDelegate.qi(),r(i).next(a=>this.referenceDelegate.Gi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ki(e,t){return pe.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class FV extends fP{constructor(e){super(),this.currentSequenceNumber=e}}class yx{constructor(e){this.persistence=e,this.Qi=new _x,this.ji=null}static Wi(e){return new yx(e)}get zi(){if(this.ji)return this.ji;throw lt()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),pe.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),pe.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(i=>this.zi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.zi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.zi,r=>{const i=Ze.fromPath(r);return this.Hi(e,i).next(a=>{a||t.removeEntry(i,At.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return pe.or([()=>pe.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function HP(n,e){return`firestore_clients_${n}_${e}`}function qP(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function vx(n,e){return`firestore_targets_${n}_${e}`}class HT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new xe(i.error.code,i.error.message))),c?new HT(e,t,i.state,a):(ei("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class pE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new xe(r.error.code,r.error.message))),a?new pE(e,r.state,i):(ei("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=RT();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=uN(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new qT(e,a):(ei("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class wx{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new wx(t.clientId,t.onlineState):(ei("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ex{constructor(){this.activeTargetIds=RT()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bx{constructor(e,t,r,i,a){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Hr(Jt),this.started=!1,this.ir=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=HP(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new Ex),this.ar=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const t=yield e.syncEngine.Os();for(const i of t){if(i===e.tr)continue;const a=e.getItem(HP(e.persistenceKey,i));if(a){const c=qT.Ji(i,a);c&&(e.sr=e.sr.insert(c.clientId,c))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(vx(this.persistenceKey,e));if(r){const i=pE.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(vx(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void ei("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,ge.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const i=t.Vr(r.key,r.newValue);if(i)return t.vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(a){let c=ta.A;if(null!=a)try{const p=JSON.parse(a);Ft("number"==typeof p),c=p}catch(p){ei("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);i!==ta.A&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Nr(a)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new HT(this.currentUser,e,t,r),a=qP(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Yi())}pr(e){const t=qP(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=vx(this.persistenceKey,e),a=new pE(e,t,r);this.setItem(i,a.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return qT.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),i=Number(r[1]);return HT.Ji(new es(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return pE.Ji(i,t)}wr(e){return wx.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),c=[],p=[];return a.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{a.has(_)||p.push(_)}),this.syncEngine.Or(c,p).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=RT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class GP{constructor(){this.Fr=new Ex,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Ex,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class LV{Br(e){}shutdown(){}}class WP{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const UV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class VV{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class BV extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,a){const c=this.oo(e,t);Oe("RestConnection","Sending: ",c,r);const p={};return this.uo(p,i,a),this.ao(e,c,p,r).then(_=>(Oe("RestConnection","Received: ",_),_),_=>{throw Zw("RestConnection",`${e} failed with error: `,_,"url: ",c,"request:",r),_})}co(e,t,r,i,a){return this.ro(e,t,r,i,a)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+F_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}oo(e,t){return`${this.so}/v1/${t}:${UV[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,i){return new Promise((a,c)=>{const p=new B2;p.listenOnce(L2.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case OS.NO_ERROR:const E=p.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(E)),a(E);break;case OS.TIMEOUT:Oe("Connection",'RPC "'+e+'" timed out'),c(new xe(le.DEADLINE_EXCEEDED,"Request time out"));break;case OS.HTTP_ERROR:const T=p.getStatus();if(Oe("Connection",'RPC "'+e+'" failed with status:',T,"response text:",p.getResponseText()),T>0){const S=p.getResponseJson().error;if(S&&S.status&&S.message){const N=function(U){const Z=U.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(Z)>=0?Z:le.UNKNOWN}(S.status);c(new xe(N,S.message))}else c(new xe(le.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new xe(le.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{Oe("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);p.send(t,"POST",_,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=O2(),c=F2(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new V2({})),this.uo(p.initMessageHeaders,t,r),(0,P.uI)()||(0,P.b$)()||(0,P.d)()||(0,P.w1)()||(0,P.Mn)()||(0,P.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");Oe("Connection","Creating WebChannel: "+_,p);const E=a.createWebChannel(_,p);let T=!1,S=!1;const N=new VV({jr:Z=>{S?Oe("Connection","Not sending because WebChannel is closed:",Z):(T||(Oe("Connection","Opening WebChannel transport."),E.open(),T=!0),Oe("Connection","WebChannel sending:",Z),E.send(Z))},Wr:()=>E.close()}),U=(Z,ue,be)=>{Z.listen(ue,Ke=>{try{be(Ke)}catch(qe){setTimeout(()=>{throw qe},0)}})};return U(E,vT.EventType.OPEN,()=>{S||Oe("Connection","WebChannel transport opened.")}),U(E,vT.EventType.CLOSE,()=>{S||(S=!0,Oe("Connection","WebChannel transport closed"),N.eo())}),U(E,vT.EventType.ERROR,Z=>{S||(S=!0,Zw("Connection","WebChannel transport errored:",Z),N.eo(new xe(le.UNAVAILABLE,"The operation could not be completed")))}),U(E,vT.EventType.MESSAGE,Z=>{var ue;if(!S){const be=Z.data[0];Ft(!!be);const Ke=be,qe=Ke.error||(null===(ue=Ke[0])||void 0===ue?void 0:ue.error);if(qe){Oe("Connection","WebChannel received error:",qe);const ct=qe.status;let ze=function(Ut){const wo=ni[Ut];if(void 0!==wo)return $N(wo)}(ct),Mt=qe.message;void 0===ze&&(ze=le.INTERNAL,Mt="Unknown error status: "+ct+" with message "+qe.message),S=!0,N.eo(new xe(ze,Mt)),E.close()}else Oe("Connection","WebChannel received:",be),N.no(be)}}),U(c,U2.STAT_EVENT,Z=>{Z.stat===eN.PROXY?Oe("Connection","Detected buffering proxy"):Z.stat===eN.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.Zr()},0),N}}function zP(){return"undefined"!=typeof window?window:null}function GT(){return"undefined"!=typeof document?document:null}function gE(n){return new SU(n,!0)}class Cx{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class KP{constructor(e,t,r,i,a,c,p,_){this.Jn=e,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new Cx(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ge.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,ge.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,ge.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(ei(t.toString()),ei("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new xe(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,ge.Z)(function*(){e.state=0,e.start()}))}qo(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jV extends KP{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.M=a}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function RU(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:lt(),i=e.targetChange.targetIds||[],a=function(_,E){return _.N?(Ft(void 0===E||"string"==typeof E),wi.fromBase64String(E||"")):(Ft(void 0===E||E instanceof Uint8Array),wi.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(_){const E=void 0===_.code?le.UNKNOWN:$N(_.code);return new xe(E,_.message||"")}(c);t=new GN(r,i,a,p||null)}else if("documentChange"in e){const r=e.documentChange,i=ju(n,r.document.name),a=Pi(r.document.updateTime),c=new gs({mapValue:{fields:r.document.fields}}),p=rr.newFoundDocument(i,a,c);t=new MT(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=ju(n,r.document),a=r.readTime?Pi(r.readTime):At.min(),c=rr.newNoDocument(i,a);t=new MT([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=ju(n,r.document);t=new MT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return lt();{const r=e.filter,a=new vU(r.count||0);t=new qN(r.targetId,a)}}var _;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return At.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?At.min():a.readTime?Pi(a.readTime):At.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=oE(this.M),t.addTarget=function(i,a){let c;const p=a.target;return c=CT(p)?{documents:nP(i,p)}:{query:rP(i,p)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=YN(i,a.resumeToken):a.snapshotVersion.compareTo(At.min())>0&&(c.readTime=iE(i,a.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function NU(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return lt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=oE(this.M),t.removeTarget=e,this.Oo(t)}}class ZV extends KP{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.M=a,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Ft(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function MU(n,e){return n&&n.length>0?(Ft(void 0!==e),n.map(t=>function(r,i){let a=Pi(r.updateTime?r.updateTime:i);return a.isEqual(At.min())&&(a=Pi(i)),new mU(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Pi(e.commitTime);return this.listener.Jo(r,t)}return Ft(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=oE(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>aE(this.M,r))};this.Oo(t)}}class $V extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.Zo=!1}tu(){if(this.Zo)throw new xe(le.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ro(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new xe(le.UNKNOWN,i.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new xe(le.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class HV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(ei(t),this.su=!1):Oe("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class qV{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br(p=>{r.enqueueAndForget((0,ge.Z)(function*(){var _;Hh(c)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,ge.Z)(function*(E){const T=Ye(E);T.lu.add(4),yield ny(T),T._u.set("Unknown"),T.lu.delete(4),yield mE(T)}),function(E){return _.apply(this,arguments)})(c))}))}),this._u=new HV(r,i)}}function mE(n){return Ix.apply(this,arguments)}function Ix(){return Ix=(0,ge.Z)(function*(n){if(Hh(n))for(const e of n.fu)yield e(!0)}),Ix.apply(this,arguments)}function ny(n){return Tx.apply(this,arguments)}function Tx(){return Tx=(0,ge.Z)(function*(n){for(const e of n.fu)yield e(!1)}),Tx.apply(this,arguments)}function WT(n,e){const t=Ye(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),Sx(t)?Ax(t):iy(t).Co()&&Dx(t,e))}function _E(n,e){const t=Ye(n),r=iy(t);t.hu.delete(e),r.Co()&&YP(t,e),0===t.hu.size&&(r.Co()?r.ko():Hh(t)&&t._u.set("Unknown"))}function Dx(n,e){n.wu.Z(e.targetId),iy(n).Qo(e)}function YP(n,e){n.wu.Z(e),iy(n).jo(e)}function Ax(n){n.wu=new TU({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),iy(n).start(),n._u.iu()}function Sx(n){return Hh(n)&&!iy(n).Do()&&n.hu.size>0}function Hh(n){return 0===Ye(n).lu.size}function QP(n){n.wu=void 0}function GV(n){return xx.apply(this,arguments)}function xx(){return xx=(0,ge.Z)(function*(n){n.hu.forEach((e,t)=>{Dx(n,e)})}),xx.apply(this,arguments)}function WV(n,e){return kx.apply(this,arguments)}function kx(){return kx=(0,ge.Z)(function*(n,e){QP(n),Sx(n)?(n._u.uu(e),Ax(n)):n._u.set("Unknown")}),kx.apply(this,arguments)}function zV(n,e,t){return Rx.apply(this,arguments)}function Rx(){return Rx=(0,ge.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof GN&&2===e.state&&e.cause)try{yield(r=(0,ge.Z)(function*(i,a){const c=a.cause;for(const p of a.targetIds)i.hu.has(p)&&(yield i.remoteSyncer.rejectListen(p,c),i.hu.delete(p),i.wu.removeTarget(p))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield zT(n,r)}else if(e instanceof MT?n.wu.ut(e):e instanceof qN?n.wu._t(e):n.wu.ht(e),!t.isEqual(At.min()))try{const r=yield VP(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.wu.yt(a);return c.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const E=i.hu.get(_);E&&i.hu.set(_,E.withResumeToken(p.resumeToken,a))}}),c.targetMismatches.forEach(p=>{const _=i.hu.get(p);if(!_)return;i.hu.set(p,_.withResumeToken(wi.EMPTY_BYTE_STRING,_.snapshotVersion)),YP(i,p);const E=new Bh(_.target,p,1,_.sequenceNumber);Dx(i,E)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield zT(n,r)}var r}),Rx.apply(this,arguments)}function zT(n,e,t){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,ge.Z)(function*(n,e,t){if(!dg(e))throw e;n.lu.add(1),yield ny(n),n._u.set("Offline"),t||(t=()=>VP(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield mE(n)}))}),Mx.apply(this,arguments)}function JP(n,e){return e().catch(t=>zT(n,t,e))}function ry(n){return Nx.apply(this,arguments)}function Nx(){return Nx=(0,ge.Z)(function*(n){const e=Ye(n),t=qh(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;KV(e);)try{const i=yield DV(e.localStore,r);if(null===i){0===e.cu.length&&t.ko();break}r=i.batchId,YV(e,i)}catch(i){yield zT(e,i)}XP(e)&&eO(e)}),Nx.apply(this,arguments)}function KV(n){return Hh(n)&&n.cu.length<10}function YV(n,e){n.cu.push(e);const t=qh(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function XP(n){return Hh(n)&&!qh(n).Do()&&n.cu.length>0}function eO(n){qh(n).start()}function QV(n){return Px.apply(this,arguments)}function Px(){return Px=(0,ge.Z)(function*(n){qh(n).Xo()}),Px.apply(this,arguments)}function JV(n){return Ox.apply(this,arguments)}function Ox(){return Ox=(0,ge.Z)(function*(n){const e=qh(n);for(const t of n.cu)e.Ho(t.mutations)}),Ox.apply(this,arguments)}function XV(n,e,t){return Fx.apply(this,arguments)}function Fx(){return Fx=(0,ge.Z)(function*(n,e,t){const r=n.cu.shift(),i=tx.from(r,e,t);yield JP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ry(n)}),Fx.apply(this,arguments)}function eB(n,e){return Lx.apply(this,arguments)}function Lx(){return Lx=(0,ge.Z)(function*(n,e){var t;e&&qh(n).zo&&(yield(t=(0,ge.Z)(function*(r,i){if(ZN(a=i.code)&&a!==le.ABORTED){const c=r.cu.shift();qh(r).No(),yield JP(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield ry(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),XP(n)&&eO(n)}),Lx.apply(this,arguments)}function tO(n,e){return Ux.apply(this,arguments)}function Ux(){return Ux=(0,ge.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=Hh(t);t.lu.add(3),yield ny(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield mE(t)}),Ux.apply(this,arguments)}function Vx(n,e){return Bx.apply(this,arguments)}function Bx(){return Bx=(0,ge.Z)(function*(n,e){const t=Ye(n);e?(t.lu.delete(2),yield mE(t)):e||(t.lu.add(2),yield ny(t),t._u.set("Unknown"))}),Bx.apply(this,arguments)}function iy(n){return n.mu||(n.mu=function(e,t,r){const i=Ye(e);return i.tu(),new jV(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:GV.bind(null,n),Jr:WV.bind(null,n),Ko:zV.bind(null,n)}),n.fu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.mu.No(),Sx(n)?Ax(n):n._u.set("Unknown")):(yield n.mu.stop(),QP(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function qh(n){return n.gu||(n.gu=function(e,t,r){const i=Ye(e);return i.tu(),new ZV(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:QV.bind(null,n),Jr:eB.bind(null,n),Yo:JV.bind(null,n),Jo:XV.bind(null,n)}),n.fu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.gu.No(),yield ry(n)):(yield n.gu.stop(),n.cu.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class jx{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,p=new jx(e,t,c,i,a);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sy(n,e){if(ei("AsyncQueue",`${e}: ${n}`),dg(n))return new xe(le.UNAVAILABLE,`${e}: ${n}`);throw n}class oy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ze.comparator(t.key,r.key):(t,r)=>Ze.comparator(t.key,r.key),this.keyedMap=KS(),this.sortedSet=new Hr(this.comparator)}static emptySet(e){return new oy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof oy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new oy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class nO{constructor(){this.yu=new Hr(Ze.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):lt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class ay{constructor(e,t,r,i,a,c,p,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new ay(e,t,oy.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class tB{constructor(){this.Iu=void 0,this.listeners=[]}}class nB{constructor(){this.queries=new Vh(e=>DN(e),Qw),this.onlineState="Unknown",this.Tu=new Set}}function Zx(n,e){return $x.apply(this,arguments)}function $x(){return $x=(0,ge.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new tB),i)try{a.Iu=yield t.onListen(r)}catch(c){const p=sy(c,`Initialization of query '${qS(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,a),a.listeners.push(e),e.Eu(t.onlineState),a.Iu&&e.Au(a.Iu)&&Gx(t)}),$x.apply(this,arguments)}function Hx(n,e){return qx.apply(this,arguments)}function qx(){return qx=(0,ge.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),qx.apply(this,arguments)}function rB(n,e){const t=Ye(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const p of c.listeners)p.Au(i)&&(r=!0);c.Iu=i}}r&&Gx(t)}function iB(n,e,t){const r=Ye(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function Gx(n){n.Tu.forEach(e=>{e.next()})}class Wx{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new ay(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=ay.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class sB{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class rO{constructor(e){this.M=e}li(e){return ju(this.M,e)}fi(e){return e.metadata.exists?tP(this.M,e.document,!1):rr.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return Pi(e)}}class oB{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=iO(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=pn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new rO(this.M);for(const i of e)if(i.metadata.queries){const a=r.li(i.metadata.name);for(const c of i.metadata.queries){const p=(t.get(c)||An()).add(a);t.set(c,p)}}return t}complete(){var e=this;return(0,ge.Z)(function*(){const t=yield function AV(n,e,t,r){return gx.apply(this,arguments)}(e.localStore,new rO(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield SV(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function iO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class sO{constructor(e){this.key=e}}class oO{constructor(e){this.key=e}}class aO{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=An(),this.mutatedKeys=An(),this.Lu=SN(e),this.Uu=new oy(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new nO,i=t?t.Uu:this.Uu;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,p=!1;const _=TT(this.query)&&i.size===this.query.limit?i.last():null,E=DT(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,S)=>{const N=i.get(T),U=GS(this.query,S)?S:null,Z=!!N&&this.mutatedKeys.has(N.key),ue=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let be=!1;N&&U?N.data.isEqual(U.data)?Z!==ue&&(r.track({type:3,doc:U}),be=!0):this.Qu(N,U)||(r.track({type:2,doc:U}),be=!0,(_&&this.Lu(U,_)>0||E&&this.Lu(U,E)<0)&&(p=!0)):!N&&U?(r.track({type:0,doc:U}),be=!0):N&&!U&&(r.track({type:1,doc:N}),be=!0,(_||E)&&(p=!0)),be&&(U?(c=c.add(U),a=ue?a.add(T):a.delete(T)):(c=c.delete(T),a=a.delete(T)))}),TT(this.query)||DT(this.query))for(;c.size>this.query.limit;){const T=TT(this.query)?c.last():c.first();c=c.delete(T.key),a=a.delete(T.key),r.track({type:1,doc:T})}return{Uu:c,Ku:r,ei:p,mutatedKeys:a}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const a=e.Ku.pu();a.sort((E,T)=>function(S,N){const U=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return U(S)-U(N)}(E.type,T.type)||this.Lu(E.doc,T.doc)),this.ju(r);const c=t?this.Wu():[],p=0===this.Bu.size&&this.current?1:0,_=p!==this.$u;return this.$u=p,0!==a.length||_?{snapshot:new ay(this.query,e.Uu,i,a,e.mutatedKeys,0===p,_,!1),zu:c}:{zu:c}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new nO,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=An(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new oO(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new sO(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=An();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return ay.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class aB{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class lB{constructor(e){this.key=e,this.Xu=!1}}class uB{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Zu={},this.ta=new Vh(p=>DN(p),Qw),this.ea=new Map,this.na=new Set,this.sa=new Hr(Ze.comparator),this.ia=new Map,this.ra=new _x,this.oa={},this.ua=new Map,this.aa=mg.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function cB(n,e){return zx.apply(this,arguments)}function zx(){return zx=(0,ge.Z)(function*(n,e){const t=_k(n);let r,i;const a=t.ta.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Yu();else{const c=yield ey(t.localStore,Ua(e));t.isPrimaryClient&&WT(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield Kx(t,e,r,"current"===p)}return i}),zx.apply(this,arguments)}function Kx(n,e,t,r){return Yx.apply(this,arguments)}function Yx(){return Yx=(0,ge.Z)(function*(n,e,t,r){n.ha=(T,S,N)=>{return(U=(0,ge.Z)(function*(Z,ue,be,Ke){let qe=ue.view.Gu(be);qe.ei&&(qe=yield $T(Z.localStore,ue.query,!1).then(({documents:Mt})=>ue.view.Gu(Mt,qe)));const ct=Ke&&Ke.targetChanges.get(ue.targetId),ze=ue.view.applyChanges(qe,Z.isPrimaryClient,ct);return ok(Z,ue.targetId,ze.zu),ze.snapshot}),function(Z,ue,be,Ke){return U.apply(this,arguments)})(n,T,S,N);var U};const i=yield $T(n.localStore,e,!0),a=new aO(e,i.hi),c=a.Gu(i.documents),p=rE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=a.applyChanges(c,n.isPrimaryClient,p);ok(n,t,_.zu);const E=new aB(e,t,a);return n.ta.set(e,E),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),_.snapshot}),Yx.apply(this,arguments)}function dB(n,e){return Qx.apply(this,arguments)}function Qx(){return Qx=(0,ge.Z)(function*(n,e){const t=Ye(n),r=t.ta.get(e),i=t.ea.get(r.targetId);if(i.length>1)return t.ea.set(r.targetId,i.filter(a=>!Qw(a,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ty(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),_E(t.remoteStore,r.targetId),ly(t,r.targetId)}).catch(_g))):(ly(t,r.targetId),yield ty(t.localStore,r.targetId,!0))}),Qx.apply(this,arguments)}function Jx(){return Jx=(0,ge.Z)(function*(n,e,t){const r=yk(n);try{const i=yield function(a,c){const p=Ye(a),_=$r.now(),E=c.reduce((S,N)=>S.add(N.key),An());let T;return p.persistence.runTransaction("Locally write mutations","readwrite",S=>p.ai.qs(S,E).next(N=>{T=N;const U=[];for(const Z of c){const ue=yU(Z,T.get(Z.key));null!=ue&&U.push(new cg(Z.key,ue,yN(ue.value.mapValue),ti.exists(!0)))}return p.$s.addMutationBatch(S,_,U,c)})).then(S=>(S.applyToLocalDocumentSet(T),{batchId:S.batchId,changes:T}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,p){let _=a.oa[a.currentUser.toKey()];_||(_=new Hr(Jt)),_=_.insert(c,p),a.oa[a.currentUser.toKey()]=_}(r,i.batchId,t),yield nd(r,i.changes),yield ry(r.remoteStore)}catch(i){const a=sy(i,"Failed to persist write");t.reject(a)}}),Jx.apply(this,arguments)}function lO(n,e){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,ge.Z)(function*(n,e){const t=Ye(n);try{const r=yield TV(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.ia.get(a);c&&(Ft(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Xu=!0:i.modifiedDocuments.size>0?Ft(c.Xu):i.removedDocuments.size>0&&(Ft(c.Xu),c.Xu=!1))}),yield nd(t,r,e)}catch(r){yield _g(r)}}),Xx.apply(this,arguments)}function uO(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ta.forEach((a,c)=>{const p=c.view.Eu(e);p.snapshot&&i.push(p.snapshot)}),function(a,c){const p=Ye(a);p.onlineState=c;let _=!1;p.queries.forEach((E,T)=>{for(const S of T.listeners)S.Eu(c)&&(_=!0)}),_&&Gx(p)}(r.eventManager,e),i.length&&r.Zu.Ko(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function fB(n,e,t){return ek.apply(this,arguments)}function ek(){return ek=(0,ge.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ia.get(e),a=i&&i.key;if(a){let c=new Hr(Ze.comparator);c=c.insert(a,rr.newNoDocument(a,At.min()));const p=An().add(a),_=new nE(At.min(),new Map,new ir(Jt),c,p);yield lO(r,_),r.sa=r.sa.remove(a),r.ia.delete(e),ak(r)}else yield ty(r.localStore,e,!1).then(()=>ly(r,e,t)).catch(_g)}),ek.apply(this,arguments)}function pB(n,e){return tk.apply(this,arguments)}function tk(){return tk=(0,ge.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const i=yield IV(t.localStore,e);sk(t,r,null),ik(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield nd(t,i)}catch(i){yield _g(i)}}),tk.apply(this,arguments)}function gB(n,e,t){return nk.apply(this,arguments)}function nk(){return nk=(0,ge.Z)(function*(n,e,t){const r=Ye(n);try{const i=yield function(a,c){const p=Ye(a);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let E;return p.$s.lookupMutationBatch(_,c).next(T=>(Ft(null!==T),E=T.keys(),p.$s.removeMutationBatch(_,T))).next(()=>p.$s.performConsistencyCheck(_)).next(()=>p.ai.qs(_,E))})}(r.localStore,e);sk(r,e,t),ik(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield nd(r,i)}catch(i){yield _g(i)}}),nk.apply(this,arguments)}function rk(){return rk=(0,ge.Z)(function*(n,e){const t=Ye(n);Hh(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=Ye(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.$s.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ua.get(r)||[];i.push(e),t.ua.set(r,i)}catch(r){const i=sy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),rk.apply(this,arguments)}function ik(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function sk(n,e,t){const r=Ye(n);let i=r.oa[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.oa[r.currentUser.toKey()]=i}}function ly(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||cO(n,r)})}function cO(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(_E(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),ak(n))}function ok(n,e,t){for(const r of t)r instanceof sO?(n.ra.addReference(r.key,e),_B(n,r)):r instanceof oO?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||cO(n,r.key)):lt()}function _B(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.na.add(r),ak(n))}function ak(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new Ze(pn.fromString(e)),r=n.aa.next();n.ia.set(r,new lB(t)),n.sa=n.sa.insert(t,r),WT(n.remoteStore,new Bh(Ua($_(t.path)),r,2,ta.A))}}function nd(n,e,t){return lk.apply(this,arguments)}function lk(){return lk=(0,ge.Z)(function*(n,e,t){const r=Ye(n),i=[],a=[],c=[];var p;r.ta.isEmpty()||(r.ta.forEach((p,_)=>{c.push(r.ha(_,e,t).then(E=>{if(E){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,E.fromCache?"not-current":"current"),i.push(E);const T=hx.Js(_.targetId,E);a.push(T)}}))}),yield Promise.all(c),r.Zu.Ko(i),yield(p=(0,ge.Z)(function*(_,E){const T=Ye(_);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>pe.forEach(E,N=>pe.forEach(N.zs,U=>T.persistence.referenceDelegate.addReference(S,N.targetId,U)).next(()=>pe.forEach(N.Hs,U=>T.persistence.referenceDelegate.removeReference(S,N.targetId,U)))))}catch(S){if(!dg(S))throw S;Oe("LocalStore","Failed to update sequence numbers: "+S)}for(const S of E){const N=S.targetId;if(!S.fromCache){const U=T.si.get(N),ue=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);T.si=T.si.insert(N,ue)}}}),function(_,E){return p.apply(this,arguments)})(r.localStore,a))}),lk.apply(this,arguments)}function yB(n,e){return uk.apply(this,arguments)}function uk(){return uk=(0,ge.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield UP(t.localStore,e);t.currentUser=e,(i=t).ua.forEach(c=>{c.forEach(p=>{p.reject(new xe(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield nd(t,r.ci)}var i}),uk.apply(this,arguments)}function vB(n,e){const t=Ye(n),r=t.ia.get(e);if(r&&r.Xu)return An().add(r.key);{let i=An();const a=t.ea.get(e);if(!a)return i;for(const c of a){const p=t.ta.get(c);i=i.unionWith(p.view.qu)}return i}}function wB(n,e){return ck.apply(this,arguments)}function ck(){return ck=(0,ge.Z)(function*(n,e){const t=Ye(n),r=yield $T(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&ok(t,e.targetId,i.zu),i}),ck.apply(this,arguments)}function EB(n,e){return dk.apply(this,arguments)}function dk(){return dk=(0,ge.Z)(function*(n,e){const t=Ye(n);return ZP(t.localStore,e).then(r=>nd(t,r))}),dk.apply(this,arguments)}function bB(n,e,t,r){return hk.apply(this,arguments)}function hk(){return hk=(0,ge.Z)(function*(n,e,t,r){const i=Ye(n),a=yield function(c,p){const _=Ye(c),E=Ye(_.$s);return _.persistence.runTransaction("Lookup mutation documents","readonly",T=>E.ln(T,p).next(S=>S?_.ai.qs(T,S):pe.resolve(null)))}(i.localStore,e);var p;null!==a?("pending"===t?yield ry(i.remoteStore):"acknowledged"===t||"rejected"===t?(sk(i,e,r||null),ik(i,e),p=e,Ye(Ye(i.localStore).$s).dn(p)):lt(),yield nd(i,a)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),hk.apply(this,arguments)}function fk(){return fk=(0,ge.Z)(function*(n,e){const t=Ye(n);if(_k(t),yk(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield dO(t,r.toArray());t.ca=!0,yield Vx(t.remoteStore,!0);for(const a of i)WT(t.remoteStore,a)}else if(!1===e&&!1!==t.ca){const r=[];let i=Promise.resolve();t.ea.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(ly(t,c),ty(t.localStore,c,!0))),_E(t.remoteStore,c)}),yield i,yield dO(t,r),function(a){const c=Ye(a);c.ia.forEach((p,_)=>{_E(c.remoteStore,_)}),c.ra.bi(),c.ia=new Map,c.sa=new Hr(Ze.comparator)}(t),t.ca=!1,yield Vx(t.remoteStore,!1)}}),fk.apply(this,arguments)}function dO(n,e,t){return pk.apply(this,arguments)}function pk(){return pk=(0,ge.Z)(function*(n,e,t){const r=Ye(n),i=[],a=[];for(const c of e){let p;const _=r.ea.get(c);if(_&&0!==_.length){p=yield ey(r.localStore,Ua(_[0]));for(const E of _){const T=r.ta.get(E),S=yield wB(r,T);S.snapshot&&a.push(S.snapshot)}}else{const E=yield jP(r.localStore,c);p=yield ey(r.localStore,E),yield Kx(r,hO(E),c,!1)}i.push(p)}return r.Zu.Ko(a),i}),pk.apply(this,arguments)}function hO(n){return IN(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function IB(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).Os()}function TB(n,e,t,r){return gk.apply(this,arguments)}function gk(){return gk=(0,ge.Z)(function*(n,e,t,r){const i=Ye(n);if(i.ca)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const a=i.ea.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=yield ZP(i.localStore,AN(a[0])),p=nE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield nd(i,c,p);break}case"rejected":yield ty(i.localStore,e,!0),ly(i,e,r);break;default:lt()}}),gk.apply(this,arguments)}function DB(n,e,t){return mk.apply(this,arguments)}function mk(){return mk=(0,ge.Z)(function*(n,e,t){const r=_k(n);if(r.ca){for(const i of e){if(r.ea.has(i)){Oe("SyncEngine","Adding an already active target "+i);continue}const a=yield jP(r.localStore,i),c=yield ey(r.localStore,a);yield Kx(r,hO(a),c.targetId,!1),WT(r.remoteStore,c)}for(const i of t)r.ea.has(i)&&(yield ty(r.localStore,i,!1).then(()=>{_E(r.remoteStore,i),ly(r,i)}).catch(_g))}}),mk.apply(this,arguments)}function _k(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=lO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fB.bind(null,e),e.Zu.Ko=rB.bind(null,e.eventManager),e.Zu.la=iB.bind(null,e.eventManager),e}function yk(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gB.bind(null,e),e}class fO{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.M=gE(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return LP(this.persistence,new FP,e.initialUser,this.M)}_a(e){return new OV(yx.Wi,this.M)}da(e){return new GP}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class pO extends fO{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield yk(r.ga.syncEngine),yield ry(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return LP(this.persistence,new FP,e.initialUser,this.M)}wa(e){return new mV(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=dx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?vo.withCacheSize(this.cacheSizeBytes):vo.DEFAULT;return new cx(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,zP(),GT(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new GP}}class SB extends pO{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e);const i=r.ga.syncEngine;r.sharedClientState instanceof bx&&(r.sharedClientState.syncEngine={kr:bB.bind(null,i),Mr:TB.bind(null,i),Or:DB.bind(null,i),Os:IB.bind(null,i),Nr:EB.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var a=(0,ge.Z)(function*(c){yield function CB(n,e){return fk.apply(this,arguments)}(r.ga.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}da(e){const t=zP();if(!bx.vt(t))throw new xe(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=dx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new bx(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class vk{initialize(e,t){var r=this;return(0,ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>uO(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=yB.bind(null,r.syncEngine),yield Vx(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new nB}createDatastore(e){const t=gE(e.databaseInfo.databaseId),r=new BV(e.databaseInfo);return new $V(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=p=>uO(this.syncEngine,p,0),c=WP.vt()?new WP:new LV,new qV(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,p,_,E){const T=new uB(r,i,a,c,p,_);return E&&(T.ca=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const r=Ye(t);Oe("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield ny(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function gO(n,e=10240){let t=0;return{read:()=>(0,ge.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class KT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class xB{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new Mi,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),i=Number(r);isNaN(i)&&e.Ra(`length string (${r}) is not valid number`);const a=yield e.ba(i);return new sB(JSON.parse(a),t.length+i)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,ge.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class kB{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ge.Z)(function*(a,c){const p=Ye(a),_=oE(p.M)+"/documents",E={documents:c.map(U=>sE(p.M,U))},T=yield p.co("BatchGetDocuments",_,E),S=new Map;T.forEach(U=>{const Z=function kU(n,e){return"found"in e?function(t,r){Ft(!!r.found);const i=ju(t,r.found.name),a=Pi(r.found.updateTime),c=new gs({mapValue:{fields:r.found.fields}});return rr.newFoundDocument(i,a,c)}(n,e):"missing"in e?function(t,r){Ft(!!r.missing),Ft(!!r.readTime);const i=ju(t,r.missing),a=Pi(r.readTime);return rr.newNoDocument(i,a)}(n,e):lt()}(p.M,U);S.set(Z.key.toString(),Z)});const N=[];return c.forEach(U=>{const Z=S.get(U.toString());Ft(!!Z),N.push(Z)}),N}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new eE(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Ze.fromPath(i);e.mutations.push(new zS(a,e.precondition(a)))}),yield(r=(0,ge.Z)(function*(i,a){const c=Ye(i),p=oE(c.M)+"/documents",_={writes:a.map(E=>aE(c.M,E))};yield c.ro("Commit",p,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw lt();t=At.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ti.updateTime(t):ti.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(At.min()))throw new xe(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ti.updateTime(t)}return ti.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class RB{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.va=5,this.So=new Cx(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,ge.Z)(function*(){const t=new kB(e.datastore),r=e.Da(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Ca(a)}))}).catch(i=>{e.Ca(i)})}))}Da(e){try{const t=this.updateFunction(e);return!sg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!ZN(t)}return!1}}class MB{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=es.UNAUTHENTICATED,this.clientId=iN.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ge.Z)(function*(p){Oe("FirestoreClient","Received user=",p.uid),yield a.authCredentialListener(p),a.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Oe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=sy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function mO(n,e){return wk.apply(this,arguments)}function wk(){return wk=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ge.Z)(function*(a){r.isEqual(a)||(yield UP(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),wk.apply(this,arguments)}function _O(n,e){return Ek.apply(this,arguments)}function Ek(){return Ek=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield bk(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>tO(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>tO(e.remoteStore,a)),n.onlineComponents=e}),Ek.apply(this,arguments)}function bk(n){return Ck.apply(this,arguments)}function Ck(){return Ck=(0,ge.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield mO(n,new fO)),n.offlineComponents}),Ck.apply(this,arguments)}function YT(n){return Ik.apply(this,arguments)}function Ik(){return Ik=(0,ge.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield _O(n,new vk)),n.onlineComponents}),Ik.apply(this,arguments)}function yO(n){return bk(n).then(e=>e.persistence)}function Tk(n){return bk(n).then(e=>e.localStore)}function vO(n){return YT(n).then(e=>e.remoteStore)}function Dk(n){return YT(n).then(e=>e.syncEngine)}function uy(n){return Ak.apply(this,arguments)}function Ak(){return Ak=(0,ge.Z)(function*(n){const e=yield YT(n),t=e.eventManager;return t.onListen=cB.bind(null,e.syncEngine),t.onUnlisten=dB.bind(null,e.syncEngine),t}),Ak.apply(this,arguments)}function wO(n,e,t={}){const r=new Mi;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(i,a,c,p,_){const E=new KT({next:S=>{a.enqueueAndForget(()=>Hx(i,T));const N=S.docs.has(c);!N&&S.fromCache?_.reject(new xe(le.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&p&&"server"===p.source?_.reject(new xe(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),T=new Wx($_(c.path),E,{includeMetadataChanges:!0,Du:!0});return Zx(i,T)}(yield uy(n),n.asyncQueue,e,t,r)})),r.promise}function EO(n,e,t={}){const r=new Mi;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(i,a,c,p,_){const E=new KT({next:S=>{a.enqueueAndForget(()=>Hx(i,T)),S.fromCache&&"server"===p.source?_.reject(new xe(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),T=new Wx(c,E,{includeMetadataChanges:!0,Du:!0});return Zx(i,T)}(yield uy(n),n.asyncQueue,e,t,r)})),r.promise}const bO=new Map;function Sk(n,e,t){if(!t)throw new xe(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function CO(n,e,t,r){if(!0===e&&!0===r)throw new xe(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function IO(n){if(!Ze.isDocumentKey(n))throw new xe(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TO(n){if(Ze.isDocumentKey(n))throw new xe(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function QT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":lt()}function cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=QT(n);throw new xe(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function DO(n,e){if(e<=0)throw new xe(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class AO{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,CO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yE{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new AO({}),this._settingsFrozen=!1,e instanceof Xc?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new xe(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xc(i.options.projectId)}(e))}get app(){if(!this._app)throw new xe(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new AO(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new $2;switch(t.type){case"gapi":const r=t.client;return Ft(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new W2(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xe(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=bO.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),bO.delete(e),t.terminate())}(this),Promise.resolve()}}class sr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sr(this.firestore,e,this._key)}}class ms{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ms(this.firestore,e,this._query)}}class Zu extends ms{constructor(e,t,r){super(e,t,$_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sr(this.firestore,null,new Ze(e))}withConverter(e){return new Zu(this.firestore,e,this._path)}}function SO(n,e,...t){if(n=(0,P.m9)(n),Sk("collection","path",e),n instanceof yE){const r=pn.fromString(e,...t);return TO(r),new Zu(n,null,r)}{if(!(n instanceof sr||n instanceof Zu))throw new xe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pn.fromString(e,...t));return TO(r),new Zu(n.firestore,null,r)}}function JT(n,e,...t){if(n=(0,P.m9)(n),1===arguments.length&&(e=iN.R()),Sk("doc","path",e),n instanceof yE){const r=pn.fromString(e,...t);return IO(r),new sr(n,null,new Ze(r))}{if(!(n instanceof sr||n instanceof Zu))throw new xe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pn.fromString(e,...t));return IO(r),new sr(n.firestore,n instanceof Zu?n.converter:null,new Ze(r))}}function xO(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),(n instanceof sr||n instanceof Zu)&&(e instanceof sr||e instanceof Zu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function kO(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),n instanceof ms&&e instanceof ms&&n.firestore===e.firestore&&Qw(n._query,e._query)&&n.converter===e.converter}class $B{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new Cx(this,"async_queue_retry"),this.Ua=()=>{const t=GT();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=GT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=GT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new Mi;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,ge.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!dg(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,ei("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const i=jx.createAndSchedule(this,e,t,r,a=>this.Qa(a));return this.Oa.push(i),i}qa(){this.Fa&&lt()}verifyOperationInProgress(){}ja(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function xk(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class HB{constructor(){this._progressObserver={},this._taskCompletionResolver=new Mi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class hr extends yE{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new $B,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||RO(this),this._firestoreClient.terminate()}}function ri(n){return n._firestoreClient||RO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function RO(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new X2(n._databaseId,a,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var a,p;n._firestoreClient=new MB(n._authCredentials,n._appCheckCredentials,n._queue,r)}function MO(n,e,t){const r=new Mi;return n.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield mO(n,t),yield _O(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===le.FAILED_PRECONDITION||a.code===le.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function NO(n){if(n._initialized||n._terminated)throw new xe(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class rd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ni(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class $u{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $u(wi.fromBase64String(e))}catch(t){throw new xe(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $u(wi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class vg{constructor(e){this._methodName=e}}class XT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Jt(this._lat,e._lat)||Jt(this._long,e._long)}}const ej=/^__.*__$/;class tj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new cg(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xw(e,this.data,t,this.fieldTransforms)}}class PO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new cg(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function OO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class eD{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ja(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new eD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.ec(e),i}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.Ja(),i}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return rD(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(OO(this.Ya)&&ej.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class nj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||gE(e)}uc(e,t,r,i=!1){return new eD({Ya:e,methodName:t,oc:r,path:Ni.emptyPath(),tc:!1,rc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function wg(n){const e=n._freezeSettings(),t=gE(n._databaseId);return new nj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tD(n,e,t,r,i,a={}){const c=n.uc(a.merge||a.mergeFields?2:0,e,t,i);Nk("Data must be an object, but it was:",c,r);const p=UO(r,c);let _,E;if(a.merge)_=new U_(c.fieldMask),E=c.fieldTransforms;else if(a.mergeFields){const T=[];for(const S of a.mergeFields){const N=Pk(e,S,t);if(!c.contains(N))throw new xe(le.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);BO(T,N)||T.push(N)}_=new U_(T),E=c.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,E=c.fieldTransforms;return new tj(new gs(p),_,E)}class vE extends vg{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vE}}function FO(n,e,t){return new eD({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class kk extends vg{_toFieldTransform(e){return new Jw(e.path,new q_)}isEqual(e){return e instanceof kk}}class rj extends vg{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=FO(this,e,!0),r=this.ac.map(a=>Eg(a,t)),i=new lg(r);return new Jw(e.path,i)}isEqual(e){return this===e}}class ij extends vg{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=FO(this,e,!0),r=this.ac.map(a=>Eg(a,t)),i=new ug(r);return new Jw(e.path,i)}isEqual(e){return this===e}}class sj extends vg{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new G_(e.M,RN(e.M,this.cc));return new Jw(e.path,t)}isEqual(e){return this===e}}function Rk(n,e,t,r){const i=n.uc(1,e,t);Nk("Data must be an object, but it was:",i,r);const a=[],c=gs.empty();rg(r,(_,E)=>{const T=nD(e,_,t);E=(0,P.m9)(E);const S=i.nc(T);if(E instanceof vE)a.push(T);else{const N=Eg(E,S);null!=N&&(a.push(T),c.set(T,N))}});const p=new U_(a);return new PO(c,p,i.fieldTransforms)}function Mk(n,e,t,r,i,a){const c=n.uc(1,e,t),p=[Pk(e,r,t)],_=[i];if(a.length%2!=0)throw new xe(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<a.length;N+=2)p.push(Pk(e,a[N])),_.push(a[N+1]);const E=[],T=gs.empty();for(let N=p.length-1;N>=0;--N)if(!BO(E,p[N])){const U=p[N];let Z=_[N];Z=(0,P.m9)(Z);const ue=c.nc(U);if(Z instanceof vE)E.push(U);else{const be=Eg(Z,ue);null!=be&&(E.push(U),T.set(U,be))}}const S=new U_(E);return new PO(T,S,c.fieldTransforms)}function LO(n,e,t,r=!1){return Eg(t,n.uc(r?4:3,e))}function Eg(n,e){if(VO(n=(0,P.m9)(n)))return Nk("Unsupported field value:",e,n),UO(n,e);if(n instanceof vg)return function(t,r){if(!OO(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let p=Eg(c,r.sc(a));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,P.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return RN(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=$r.fromDate(t);return{timestampValue:iE(r.M,i)}}if(t instanceof $r){const i=new $r(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:iE(r.M,i)}}if(t instanceof XT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof $u)return{bytesValue:YN(r.M,t._byteString)};if(t instanceof sr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ic(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:YS(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${QT(t)}`)}(n,e)}function UO(n,e){const t={};return aN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rg(n,(r,i)=>{const a=Eg(i,e.Za(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function VO(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof $r||n instanceof XT||n instanceof $u||n instanceof sr||n instanceof vg)}function Nk(n,e,t){if(!VO(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=QT(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function Pk(n,e,t){if((e=(0,P.m9)(e))instanceof rd)return e._internalPath;if("string"==typeof e)return nD(n,e);throw rD("Field path arguments must be of type string or ",n,!1,void 0,t)}const oj=new RegExp("[~\\*/\\[\\]]");function nD(n,e,t){if(e.search(oj)>=0)throw rD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new rd(...e.split("."))._internalPath}catch(r){throw rD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function rD(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(a||c)&&(_+=" (found",a&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new xe(le.INVALID_ARGUMENT,p+n+_)}function BO(n,e){return n.some(t=>t.isEqual(e))}class wE{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new sr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new aj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(iD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class aj extends wE{data(){return super.data()}}function iD(n,e){return"string"==typeof e?nD(n,e):e instanceof rd?e._internalPath:e._delegate._internalPath}class bg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class id extends wE{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new EE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(iD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class EE extends id{data(e={}){return super.data(e)}}class Gh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new bg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new EE(this._firestore,this._userDataWriter,r.key,r,new bg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new EE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new bg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const p=new EE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new bg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,E=-1;return 0!==c.type&&(_=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),E=a.indexOf(c.doc.key)),{type:lj(c.type),doc:p,oldIndex:_,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function lj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}function jO(n,e){return n instanceof id&&e instanceof id?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Gh&&e instanceof Gh&&n._firestore===e._firestore&&kO(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function ZO(n){if(DT(n)&&0===n.explicitOrderBy.length)throw new xe(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bE{}function Wh(n,...e){for(const t of e)n=t._apply(n);return n}class uj extends bE{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=wg(e.firestore),r=function(i,a,c,p,_,E,T){let S;if(_.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){zO(T,E);const U=[];for(const Z of T)U.push(WO(p,i,Z));S={arrayValue:{values:U}}}else S=WO(p,i,T)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||zO(T,E),S=LO(c,"where",T,"in"===E||"not-in"===E);const N=ts.create(_,E,S);return function(U,Z){if(Z.S()){const be=$S(U);if(null!==be&&!be.isEqual(Z.field))throw new xe(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${be.toString()}' and '${Z.field.toString()}'`);const Ke=ZS(U);null!==Ke&&KO(0,Z.field,Ke)}const ue=function(be,Ke){for(const qe of be.filters)if(Ke.indexOf(qe.op)>=0)return qe.op;return null}(U,function(be){switch(be){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Z.op));if(null!==ue)throw new xe(le.INVALID_ARGUMENT,ue===Z.op?`Invalid query. You cannot use more than one '${Z.op.toString()}' filter.`:`Invalid query. You cannot use '${Z.op.toString()}' filters with '${ue.toString()}' filters.`)}(i,N),N}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new ms(e.firestore,e.converter,function(i,a){const c=i.filters.concat([a]);return new td(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class dj extends bE{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new xe(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Z_(i,a);return function(p,_){if(null===ZS(p)){const E=$S(p);null!==E&&KO(0,E,_.field)}}(r,c),c}(e._query,this.hc,this.dc);return new ms(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new td(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class $O extends bE{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new ms(e.firestore,e.converter,TN(e._query,this._c,this.wc))}}class HO extends bE{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=GO(e,this.type,this.mc,this.gc);return new ms(e.firestore,e.converter,(i=t,new td((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class qO extends bE{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=GO(e,this.type,this.mc,this.gc);return new ms(e.firestore,e.converter,(i=t,new td((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function GO(n,e,t,r){if(t[0]=(0,P.m9)(t[0]),t[0]instanceof wE)return function(i,a,c,p,_){if(!p)throw new xe(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const E=[];for(const T of H_(i))if(T.field.isKeyField())E.push(B_(a,p.key));else{const S=p.data.field(T.field);if(US(S))throw new xe(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const N=T.field.canonicalString();throw new xe(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}E.push(S)}return new Uh(E,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=wg(n.firestore);return function(a,c,p,_,E,T){const S=a.explicitOrderBy;if(E.length>S.length)throw new xe(le.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let U=0;U<E.length;U++){const Z=E[U];if(S[U].field.isKeyField()){if("string"!=typeof Z)throw new xe(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof Z}`);if(!HS(a)&&-1!==Z.indexOf("/"))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${Z}' contains a slash.`);const ue=a.path.child(pn.fromString(Z));if(!Ze.isDocumentKey(ue))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ue}' is not because it contains an odd number of segments.`);const be=new Ze(ue);N.push(B_(c,be))}else{const ue=LO(p,_,Z);N.push(ue)}}return new Uh(N,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function WO(n,e,t){if("string"==typeof(t=(0,P.m9)(t))){if(""===t)throw new xe(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HS(e)&&-1!==t.indexOf("/"))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(pn.fromString(t));if(!Ze.isDocumentKey(r))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return B_(n,new Ze(r))}if(t instanceof sr)return B_(n,t._key);throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${QT(t)}.`)}function zO(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function KO(n,e,t){if(!t.isEqual(e))throw new xe(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Ok{convertValue(e,t="none"){switch(og(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ig(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw lt()}}convertObject(e,t){const r={};return rg(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new XT(kr(e.latitude),kr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=lN(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Hw(e));default:return null}}convertTimestamp(e){const t=Fh(e);return new $r(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=pn.fromString(e);Ft(oP(r));const i=new Xc(r.get(1),r.get(3)),a=new Ze(r.popFirst(5));return i.isEqual(t)||ei(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function sD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class vj extends Ok{constructor(e){super(),this.firestore=e}convertBytes(e){return new $u(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sr(this.firestore,null,t)}}class YO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=wg(e)}set(e,t,r){this._verifyNotCommitted();const i=zh(e,this._firestore),a=sD(i.converter,t,r),c=tD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,ti.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=zh(e,this._firestore);let c;return c="string"==typeof(t=(0,P.m9)(t))||t instanceof rd?Mk(this._dataReader,"WriteBatch.update",a._key,t,r,i):Rk(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,ti.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=zh(e,this._firestore);return this._mutations=this._mutations.concat(new eE(t._key,ti.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zh(n,e){if((n=(0,P.m9)(n)).firestore!==e)throw new xe(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Cg extends Ok{constructor(e){super(),this.firestore=e}convertBytes(e){return new $u(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sr(this.firestore,null,t)}}function QO(n,e,t){n=cn(n,sr);const r=cn(n.firestore,hr),i=sD(n.converter,e,t);return cy(r,[tD(wg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ti.none())])}function JO(n,e,t,...r){n=cn(n,sr);const i=cn(n.firestore,hr),a=wg(i);let c;return c="string"==typeof(e=(0,P.m9)(e))||e instanceof rd?Mk(a,"updateDoc",n._key,e,t,r):Rk(a,"updateDoc",n._key,e),cy(i,[c.toMutation(n._key,ti.exists(!0))])}function XO(n,...e){var t,r,i;n=(0,P.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||xk(e[c])||(a=e[c],c++);const p={includeMetadataChanges:a.includeMetadataChanges};if(xk(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[c+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let _,E,T;if(n instanceof sr)E=cn(n.firestore,hr),T=$_(n._key.path),_={next:S=>{e[c]&&e[c](Fk(E,n,S))},error:e[c+1],complete:e[c+2]};else{const S=cn(n,ms);E=cn(S.firestore,hr),T=S._query;const N=new Cg(E);_={next:U=>{e[c]&&e[c](new Gh(E,N,S,U))},error:e[c+1],complete:e[c+2]},ZO(n._query)}return function(S,N,U,Z){const ue=new KT(Z),be=new Wx(N,ue,U);return S.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return Zx(yield uy(S),be)})),()=>{ue.pa(),S.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return Hx(yield uy(S),be)}))}}(ri(E),T,p,_)}function cy(n,e){return function(t,r){const i=new Mi;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function hB(n,e,t){return Jx.apply(this,arguments)}(yield Dk(t),r,i)})),i.promise}(ri(n),e)}function Fk(n,e,t){const r=t.docs.get(e._key),i=new Cg(n);return new id(n,i,e._key,r,new bg(t.hasPendingWrites,t.fromCache),e.converter)}class xj extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=wg(e)}get(e){const t=zh(e,this._firestore),r=new vj(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return lt();const a=i[0];if(a.isFoundDocument())return new wE(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new wE(this._firestore,r,t._key,null,t.converter);throw lt()})}set(e,t,r){const i=zh(e,this._firestore),a=sD(i.converter,t,r),c=tD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=zh(e,this._firestore);let c;return c="string"==typeof(t=(0,P.m9)(t))||t instanceof rd?Mk(this._dataReader,"Transaction.update",a._key,t,r,i):Rk(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=zh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=zh(e,this._firestore),r=new Cg(this._firestore);return super.get(e).then(i=>new id(this._firestore,r,t._key,i._document,new bg(!1,!1),t.converter))}}function Lk(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function tF(){if("undefined"==typeof Uint8Array)throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function nF(){if(!function Q2(){return"undefined"!=typeof atob}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){F_=Yi.SDK_VERSION,(0,Yi._registerComponent)(new Ho.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new hr(i,new q2(t.getProvider("auth-internal")),new z2(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,Yi.registerVersion)(tN,"3.4.7",n),(0,Yi.registerVersion)(tN,"3.4.7","esm2017")}();class CE{constructor(e){this._delegate=e}static fromBase64String(e){return nF(),new CE($u.fromBase64String(e))}static fromUint8Array(e){return tF(),new CE($u.fromUint8Array(e))}toBase64(){return nF(),this._delegate.toBase64()}toUint8Array(){return tF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Uk(n){return function Uj(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Vj{enableIndexedDbPersistence(e,t){return function GB(n,e){NO(n=cn(n,hr));const t=ri(n),r=n._freezeSettings(),i=new vk;return MO(t,i,new pO(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function WB(n){NO(n=cn(n,hr));const e=ri(n),t=n._freezeSettings(),r=new vk;return MO(e,r,new SB(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function zB(n){if(n._initialized&&!n._terminated)throw new xe(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Mi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(t=(0,ge.Z)(function*(r){if(!Ol.vt())return Promise.resolve();const i=r+"main";yield Ol.delete(i)}),function(r){return t.apply(this,arguments)})(dx(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class rF{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Xc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Zw("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function jB(n,e,t,r={}){var i;const a=(n=cn(n,yE))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Zw("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=es.MOCK_USER;else{c=(0,P.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new xe(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new es(_)}n._authCredentials=new H2(new nN(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function YB(n){return function NB(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield yO(n),t=yield vO(n);return e.setNetworkEnabled(!0),function(r){const i=Ye(r);return i.lu.delete(0),mE(i)}(t)}))}(ri(n=cn(n,hr)))}(this._delegate)}disableNetwork(){return function QB(n){return function PB(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield yO(n),t=yield vO(n);return e.setNetworkEnabled(!1),(r=(0,ge.Z)(function*(i){const a=Ye(i);a.lu.add(0),yield ny(a),a._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ri(n=cn(n,hr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,CO("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function KB(n){return function(e){const t=new Mi;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function mB(n,e){return rk.apply(this,arguments)}(yield Dk(e),t)})),t.promise}(ri(n=cn(n,hr)))}(this._delegate)}onSnapshotsInSync(e){return function Sj(n,e){return function LB(n,e){const t=new KT(e);return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield uy(n),i=t,Ye(r).Tu.add(i),void i.next();var r,i})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield uy(n),i=t,void Ye(r).Tu.delete(i);var r,i}))}}(ri(n=cn(n,hr)),xk(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new dy(this,SO(this._delegate,e))}catch(t){throw Gs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ba(this,JT(this._delegate,e))}catch(t){throw Gs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ws(this,function ZB(n,e){if(n=cn(n,yE),Sk("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ms(n,null,(t=e,new td(pn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Gs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function kj(n,e){return function UB(n,e){const t=new Mi;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const r=yield(i=n,YT(i).then(a=>a.datastore));var i;new RB(n.asyncQueue,r,e,t).run()})),t.promise}(ri(n=cn(n,hr)),t=>e(new xj(n,t)))}(this._delegate,t=>e(new iF(this,t)))}batch(){return ri(this._delegate),new sF(new YO(this._delegate,e=>cy(this._delegate,e)))}loadBundle(e){return function JB(n,e){const t=ri(n=cn(n,hr)),r=new HB;return function VB(n,e,t,r){const i=function(a,c){let p;return p="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,E){if(_ instanceof Uint8Array)return gO(_,E);if(_ instanceof ArrayBuffer)return gO(new Uint8Array(_),E);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new xB(_,c);var _}(t,gE(e));n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function AB(n,e,t){const r=Ye(n);var i;(i=(0,ge.Z)(function*(a,c,p){try{const _=yield c.getMetadata();if(yield function(N,U){const Z=Ye(N),ue=Pi(U.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",be=>Z.ds.getBundleMetadata(be,U.id)).then(be=>!!be&&be.createTime.compareTo(ue)>=0)}(a.localStore,_))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(N=_).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);p._updateProgress(iO(_));const E=new oB(_,a.localStore,c.M);let T=yield c.fa();for(;T;){const N=yield E.Nu(T);N&&p._updateProgress(N),T=yield c.fa()}const S=yield E.complete();return yield nd(a,S.Ou,void 0),yield function(N,U){const Z=Ye(N);return Z.persistence.runTransaction("Save bundle","readwrite",ue=>Z.ds.saveBundleMetadata(ue,U))}(a.localStore,_),p._completeWith(S.progress),Promise.resolve(S.Mu)}catch(_){return Zw("SyncEngine",`Loading bundle failed with ${_}`),p._failWith(_),Promise.resolve(new Set)}var N}),function(a,c,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Dk(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function XB(n,e){return function BB(n,e){return n.asyncQueue.enqueue((0,ge.Z)(function*(){return function(t,r){const i=Ye(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.ds.getNamedQuery(a,r))}(yield Tk(n),e)}))}(ri(n=cn(n,hr)),e).then(t=>t?new ms(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ws(this,t):null)}}class oD extends Ok{constructor(e){super(),this.firestore=e}convertBytes(e){return new CE(new $u(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ba.forKey(t,this.firestore,null)}}class iF{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new oD(e)}get(e){const t=Tg(e);return this._delegate.get(t).then(r=>new IE(this._firestore,new id(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Tg(e);return r?(Lk("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Tg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Tg(e);return this._delegate.delete(t),this}}class sF{constructor(e){this._delegate=e}set(e,t,r){const i=Tg(e);return r?(Lk("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Tg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Tg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ig{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new EE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new TE(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ig.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Ig(e,new oD(e),t),i.set(t,a)),a}}Ig.INSTANCES=new WeakMap;class Ba{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ba(t,new sr(t._delegate,r,new Ze(e)))}static forKey(e,t,r){return new Ba(t,new sr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new dy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new dy(this.firestore,SO(this._delegate,e))}catch(t){throw Gs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,P.m9)(e))instanceof sr&&xO(this._delegate,e)}set(e,t){t=Lk("DocumentReference.set",t);try{return t?QO(this._delegate,e,t):QO(this._delegate,e)}catch(r){throw Gs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?JO(this._delegate,e):JO(this._delegate,e,t,...r)}catch(i){throw Gs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Dj(n){return cy(cn(n.firestore,hr),[new eE(n._key,ti.none())])}(this._delegate)}onSnapshot(...e){const t=oF(e),r=aF(e,i=>new IE(this.firestore,new id(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return XO(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Ej(n){n=cn(n,sr);const e=cn(n.firestore,hr),t=ri(e),r=new Cg(e);return function OB(n,e){const t=new Mi;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(i,a,c){try{const p=yield function(_,E){const T=Ye(_);return T.persistence.runTransaction("read document","readonly",S=>T.ai.Bs(S,E))}(i,a);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new xe(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const _=sy(p,`Failed to get document '${a} from cache`);c.reject(_)}}),function(i,a,c){return r.apply(this,arguments)})(yield Tk(n),e,t);var r})),t.promise}(t,n._key).then(i=>new id(e,r,n._key,i,new bg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function bj(n){n=cn(n,sr);const e=cn(n.firestore,hr);return wO(ri(e),n._key,{source:"server"}).then(t=>Fk(e,n,t))}(this._delegate):function wj(n){n=cn(n,sr);const e=cn(n.firestore,hr);return wO(ri(e),n._key).then(t=>Fk(e,n,t))}(this._delegate),t.then(r=>new IE(this.firestore,new id(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ba(this.firestore,this._delegate.withConverter(e?Ig.getInstance(this.firestore,e):null))}}function Gs(n,e,t){return n.message=n.message.replace(e,t),n}function oF(n){for(const e of n)if("object"==typeof e&&!Uk(e))return e;return{}}function aF(n,e){var t,r;let i;return i=Uk(n[0])?n[0]:Uk(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class IE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ba(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return jO(this._delegate,e._delegate)}}class TE extends IE{data(e){const t=this._delegate.data(e);return function Z2(n,e){n||lt()}(void 0!==t),t}}class Ws{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oD(e)}where(e,t,r){try{return new Ws(this.firestore,Wh(this._delegate,function cj(n,e,t){const r=e,i=iD("where",n);return new uj(i,r,t)}(e,t,r)))}catch(i){throw Gs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ws(this.firestore,Wh(this._delegate,function hj(n,e="asc"){const t=e,r=iD("orderBy",n);return new dj(r,t)}(e,t)))}catch(r){throw Gs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ws(this.firestore,Wh(this._delegate,function fj(n){return DO("limit",n),new $O("limit",n,"F")}(e)))}catch(t){throw Gs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ws(this.firestore,Wh(this._delegate,function pj(n){return DO("limitToLast",n),new $O("limitToLast",n,"L")}(e)))}catch(t){throw Gs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ws(this.firestore,Wh(this._delegate,function gj(...n){return new HO("startAt",n,!0)}(...e)))}catch(t){throw Gs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ws(this.firestore,Wh(this._delegate,function mj(...n){return new HO("startAfter",n,!1)}(...e)))}catch(t){throw Gs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ws(this.firestore,Wh(this._delegate,function _j(...n){return new qO("endBefore",n,!1)}(...e)))}catch(t){throw Gs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ws(this.firestore,Wh(this._delegate,function yj(...n){return new qO("endAt",n,!0)}(...e)))}catch(t){throw Gs(t,"endAt()","Query.endAt()")}}isEqual(e){return kO(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Ij(n){n=cn(n,ms);const e=cn(n.firestore,hr),t=ri(e),r=new Cg(e);return function FB(n,e){const t=new Mi;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(i,a,c){try{const p=yield $T(i,a,!0),_=new aO(a,p.hi),E=_.Gu(p.documents),T=_.applyChanges(E,!1);c.resolve(T.snapshot)}catch(p){const _=sy(p,`Failed to execute query '${a} against cache`);c.reject(_)}}),function(i,a,c){return r.apply(this,arguments)})(yield Tk(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Gh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function Tj(n){n=cn(n,ms);const e=cn(n.firestore,hr),t=ri(e),r=new Cg(e);return EO(t,n._query,{source:"server"}).then(i=>new Gh(e,r,n,i))}(this._delegate):function Cj(n){n=cn(n,ms);const e=cn(n.firestore,hr),t=ri(e),r=new Cg(e);return ZO(n._query),EO(t,n._query).then(i=>new Gh(e,r,n,i))}(this._delegate),t.then(r=>new Vk(this.firestore,new Gh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=oF(e),r=aF(e,i=>new Vk(this.firestore,new Gh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return XO(this._delegate,t,r)}withConverter(e){return new Ws(this.firestore,this._delegate.withConverter(e?Ig.getInstance(this.firestore,e):null))}}class jj{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new TE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Vk{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ws(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new TE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new jj(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new TE(this._firestore,r))})}isEqual(e){return jO(this._delegate,e._delegate)}}class dy extends Ws{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ba(this.firestore,e):null}doc(e){try{return new Ba(this.firestore,void 0===e?JT(this._delegate):JT(this._delegate,e))}catch(t){throw Gs(t,"doc()","CollectionReference.doc()")}}add(e){return function Aj(n,e){const t=cn(n.firestore,hr),r=JT(n),i=sD(n.converter,e);return cy(t,[tD(wg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ti.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ba(this.firestore,t))}isEqual(e){return xO(this._delegate,e._delegate)}withConverter(e){return new dy(this.firestore,this._delegate.withConverter(e?Ig.getInstance(this.firestore,e):null))}}function Tg(n){return cn(n,sr)}class Bk{constructor(...e){this._delegate=new rd(...e)}static documentId(){return new Bk(Ni.keyField().canonicalString())}isEqual(e){return(e=(0,P.m9)(e))instanceof rd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Dg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Mj(){return new kk("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Dg(e)}static delete(){const e=function Rj(){return new vE("deleteField")}();return e._methodName="FieldValue.delete",new Dg(e)}static arrayUnion(...e){const t=function Nj(...n){return new rj("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Dg(t)}static arrayRemove(...e){const t=function Pj(...n){return new ij("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Dg(t)}static increment(e){const t=function Oj(n){return new sj("increment",n)}(e);return t._methodName="FieldValue.increment",new Dg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Zj={Firestore:rF,GeoPoint:XT,Timestamp:$r,Blob:CE,Transaction:iF,WriteBatch:sF,DocumentReference:Ba,DocumentSnapshot:IE,Query:Ws,QueryDocumentSnapshot:TE,QuerySnapshot:Vk,CollectionReference:dy,FieldPath:Bk,FieldValue:Dg,setLogLevel:function Bj(n){!function j2(n){Oh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function lF(n,e){return function qj(n,e=Mc.z){return new tr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function jk(n,e){return lF(n,e).pipe((0,at.U)(t=>({payload:t,type:"query"})))}function aD(n,e){return jk(n,e).pipe(ui(void 0),Gp(),(0,at.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const _=i.find(T=>T.doc.ref.isEqual(c.ref)),E=null==t?void 0:t.payload.docs.find(T=>T.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&E&&JSON.stringify(E.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),a}))}function uF(n,e,t){return aD(n,t).pipe(Kr((r,i)=>function Wj(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function zj(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Zk(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Zk(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Zk(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Qy(),(0,at.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Zk(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function cF(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function Hj(n){(function $j(n,e){n.INTERNAL.registerComponent(new Ho.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Zj)))})(n,(e,t)=>new rF(e,t,new Vj)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(Jy.Z);class dF{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=aD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,at.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ui(void 0),Gp(),ci(([r,i])=>i.length>0||!r),(0,at.U)(([r,i])=>i),un.iC)}auditTrail(e){return this.stateChanges(e).pipe(Kr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=cF(e);return uF(this.query,t,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return jk(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),un.iC)}get(e){return(0,an.D)(this.query.get(e)).pipe(un.iC)}add(e){return this.ref.add(e)}doc(e){return new hF(this.ref.doc(e),this.afs)}}class hF{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=gF(r,t);return new dF(i,a,this.afs)}snapshotChanges(){return function Gj(n,e){return lF(n,e).pipe(ui(void 0),Gp(),(0,at.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,at.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,an.D)(this.ref.get(e)).pipe(un.iC)}}class Kj{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?aD(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ci(t=>t.length>0),un.iC):aD(this.query,this.afs.schedulers.outsideAngular).pipe(un.iC)}auditTrail(e){return this.stateChanges(e).pipe(Kr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=cF(e);return uF(this.query,t,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return jk(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),un.iC)}get(e){return(0,an.D)(this.query.get(e)).pipe(un.iC)}}const fF=new u.OlP("angularfire2.enableFirestorePersistence"),pF=new u.OlP("angularfire2.firestore.persistenceSettings"),Yj=new u.OlP("angularfire2.firestore.settings"),Qj=new u.OlP("angularfire2.firestore.use-emulator");function gF(n,e=(t=>t)){return{query:e(n),ref:n}}let mF=(()=>{class n{constructor(t,r,i,a,c,p,_,E,T,S,N,U,Z,ue,be,Ke,qe){this.schedulers=_;const ct=(0,Lr.on)(t,p,r),ze=T;S&&UI(ct,p,N,Z,ue,be,U,Ke),[this.firestore,this.persistenceEnabled$]=(0,Lr.cc)(`${ct.name}.firestore`,"AngularFirestore",ct.name,()=>{const Mt=p.runOutsideAngular(()=>ct.firestore());if(a&&Mt.settings(a),ze&&Mt.useEmulator(...ze),i&&!Ar(c)){const Ut=()=>{try{return(0,an.D)(Mt.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(wo){return"undefined"!=typeof console&&console.warn(wo),ft(!1)}};return[Mt,p.runOutsideAngular(Ut)]}return[Mt,ft(!1)]},[a,ze,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=gF(i,r),p=this.schedulers.ngZone.run(()=>a);return new dF(p,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new Kj(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new hF(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Lr.Dh),u.LFG(Lr.xv,8),u.LFG(fF,8),u.LFG(Yj,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(un.HU),u.LFG(pF,8),u.LFG(Qj,8),u.LFG(g_,8),u.LFG(rw,8),u.LFG(iw,8),u.LFG(OI,8),u.LFG(p_,8),u.LFG(FI,8),u.LFG(LI,8),u.LFG(Wc,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Jj=(()=>{class n{constructor(){Hp.Z.registerVersion("angularfire",un.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:fF,useValue:!0},{provide:pF,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[mF]}),n})(),DE=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.user={email:null,idToken:null},this.subject=new Ai(null),this.user$=this.subject.asObservable(),this.afAuth.authState.subscribe(c=>{c?(this.user.email=c.email,c.getIdToken().then(p=>{this.user.idToken=p,this.subject.next(this.user)})):this.subject.next(null)}),this.isLogIn$=this.user$.pipe((0,at.U)(c=>!!c)),this.isLogOut$=this.isLogIn$.pipe((0,at.U)(c=>!c))}signIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{var a;return(null===(a=i.user)||void 0===a?void 0:a.email)&&(this.user.email=i.user.email,i.user.getIdToken().then(c=>{this.user.idToken=c,this.subject.next(this.user)})),i}).catch(i=>{window.alert(i.message)})}signOut(){this.afAuth.signOut(),this.subject.next(null)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(mF),u.LFG(g_),u.LFG(pi),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hy=(()=>{class n{constructor(t,r){this.auth=t,this.db=r,this.sendCurrentNumberPage=new Hi.x,this.auth.user$.subscribe(i=>{this.idToken=null==i?void 0:i.idToken})}currentPage(t){return this.sendCurrentNumberPage.next(t)}getArticles(){return this.db.list("articles").valueChanges().pipe((0,at.U)(t=>t.sort((r,i)=>new Date(i.creationDate).getTime()-new Date(r.creationDate).getTime())))}getArticle(t){return this.db.object(`articles/${t}`).valueChanges().pipe((0,at.U)(r=>r))}getCountArticles(){return this.db.list("articles").valueChanges().pipe((0,at.U)(t=>t.length))}getLastArticle(){return this.db.list("articles").valueChanges().pipe((0,at.U)(t=>t.sort((r,i)=>new Date(i.creationDate).getTime()-new Date(r.creationDate).getTime())[0]))}search(t){return this.db.list("articles").valueChanges().pipe((0,at.U)(r=>r.filter(i=>!(t.length>0)||i.title.toLowerCase().includes(t.toLowerCase())).sort((i,a)=>new Date(a.creationDate).getTime()-new Date(i.creationDate).getTime())))}paginate(t,r,i){return t.slice((r-1)*i,r*i)}deleteArticle(t){this.db.list("articles").remove(t.title)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(DE),u.LFG(ZI))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_F=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),Ag=(()=>{class n extends _F{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const Hu=new u.OlP("NgValueAccessor"),t6={provide:Hu,useExisting:(0,u.Gpc)(()=>fy),multi:!0},r6=new u.OlP("CompositionEventMode");let fy=(()=>{class n extends _F{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function n6(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(r6,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[u._Bn([t6]),u.qOj]}),n})();function Kh(n){return null==n||0===n.length}function vF(n){return null!=n&&"number"==typeof n.length}const _s=new u.OlP("NgValidators"),Yh=new u.OlP("NgAsyncValidators"),i6=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function AE(n){return null}function SF(n){return null!=n}function xF(n){const e=(0,u.QGY)(n)?(0,an.D)(n):n;return(0,u.CqO)(e),e}function kF(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function RF(n,e){return e.map(t=>t(n))}function MF(n){return n.map(e=>function s6(n){return!n.validate}(e)?e:t=>e.validate(t))}function $k(n){return null!=n?function NF(n){if(!n)return null;const e=n.filter(SF);return 0==e.length?null:function(t){return kF(RF(t,e))}}(MF(n)):null}function Hk(n){return null!=n?function PF(n){if(!n)return null;const e=n.filter(SF);return 0==e.length?null:function(t){return function Xj(...n){const e=(0,Kn.jO)(n),{args:t,keys:r}=Ss(n),i=new tr.y(a=>{const{length:c}=t;if(!c)return void a.complete();const p=new Array(c);let _=c,E=c;for(let T=0;T<c;T++){let S=!1;(0,mr.Xf)(t[T]).subscribe(new Un.Q(a,N=>{S||(S=!0,E--),p[T]=N},()=>_--,void 0,()=>{(!_||!S)&&(E||a.next(r?oo(r,p):p),a.complete())}))}});return e?i.pipe(ya(e)):i}(RF(t,e).map(xF)).pipe((0,at.U)(kF))}}(MF(n)):null}function OF(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function qk(n){return n?Array.isArray(n)?n:[n]:[]}function lD(n,e){return Array.isArray(n)?n.includes(e):n===e}function UF(n,e){const t=qk(e);return qk(n).forEach(i=>{lD(t,i)||t.push(i)}),t}function VF(n,e){return qk(e).filter(t=>!lD(n,t))}class BF{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=$k(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Hk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Qh extends BF{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class zs extends BF{get formDirective(){return null}get path(){return null}}class jF{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let uD=(()=>{class n extends jF{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Qh,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[u.qOj]}),n})(),SE=(()=>{class n extends jF{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(zs,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[u.qOj]}),n})();function xE(n,e){zk(n,e),e.valueAccessor.writeValue(n.value),function c6(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&ZF(n,e)})}(n,e),function h6(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function d6(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&ZF(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function u6(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function fD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function zk(n,e){const t=function FF(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(OF(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function LF(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(OF(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();fD(e._rawValidators,i),fD(e._rawAsyncValidators,i)}function ZF(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function gD(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const kE="VALID",mD="INVALID",py="PENDING",RE="DISABLED";function Qk(n){return(Xk(n)?n.validators:n)||null}function qF(n){return Array.isArray(n)?$k(n):n||null}function Jk(n,e){return(Xk(e)?e.asyncValidators:n)||null}function GF(n){return Array.isArray(n)?Hk(n):n||null}function Xk(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class eR{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=qF(this._rawValidators),this._composedAsyncValidatorFn=GF(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===kE}get invalid(){return this.status===mD}get pending(){return this.status==py}get disabled(){return this.status===RE}get enabled(){return this.status!==RE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=qF(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=GF(e)}addValidators(e){this.setValidators(UF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(UF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(VF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(VF(e,this._rawAsyncValidators))}hasValidator(e){return lD(this._rawValidators,e)}hasAsyncValidator(e){return lD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=py,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=RE,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=kE,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===kE||this.status===py)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?RE:kE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=py,this._hasOwnPendingAsyncValidator=!0;const t=xF(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function m6(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=r instanceof tR?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof _6&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?RE:this.errors?mD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(py)?py:this._anyControlsHaveStatus(mD)?mD:kE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Xk(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class _D extends eR{constructor(e=null,t,r){super(Qk(t),Jk(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){gD(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){gD(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class tR extends eR{constructor(e,t,r){super(Qk(t),Jk(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof _D?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class _6 extends eR{constructor(e,t,r){super(Qk(t),Jk(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof _D?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const y6={provide:zs,useExisting:(0,u.Gpc)(()=>Sg)},ME=(()=>Promise.resolve(null))();let Sg=(()=>{class n extends zs{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new u.vpe,this.form=new tR({},$k(t),Hk(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ME.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),xE(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ME.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),gD(this._directives,t)})}addFormGroup(t){ME.then(()=>{const r=this._findContainer(t.path),i=new tR({});(function $F(n,e){zk(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ME.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ME.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function HF(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(_s,10),u.Y36(Yh,10))},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([y6]),u.qOj]}),n})();const w6={provide:Qh,useExisting:(0,u.Gpc)(()=>NE)},KF=(()=>Promise.resolve(null))();let NE=(()=>{class n extends Qh{constructor(t,r,i,a){super(),this.control=new _D,this._registered=!1,this.update=new u.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Yk(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===fy?t=a:function g6(n){return Object.getPrototypeOf(n.constructor)===Ag}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function Kk(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function dD(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){xE(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){KF.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;KF.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(zs,9),u.Y36(_s,10),u.Y36(Yh,10),u.Y36(Hu,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([w6]),u.qOj,u.TTD]}),n})(),PE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),QF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function oL(n){return"number"==typeof n?n:parseInt(n,10)}let yD=(()=>{class n{constructor(){this._validator=AE}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._validator=this.enabled()?this.createValidator(r):AE,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(){return null!=this[this.inputName]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,features:[u.TTD]}),n})();const U6={provide:_s,useExisting:(0,u.Gpc)(()=>OE),multi:!0};let OE=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?function bF(n){return Kh(n.value)?{required:!0}:null}(t):null}registerOnValidatorChange(t){this._onChange=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("required",r.required?"":null)},inputs:{required:"required"},features:[u._Bn([U6])]}),n})();const B6={provide:_s,useExisting:(0,u.Gpc)(()=>aR),multi:!0};let aR=(()=>{class n{constructor(){this._enabled=!1}set email(t){this._enabled=""===t||!0===t||"true"===t,this._onChange&&this._onChange()}validate(t){return this._enabled?function IF(n){return Kh(n.value)||i6.test(n.value)?null:{email:!0}}(t):null}registerOnValidatorChange(t){this._onChange=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[u._Bn([B6])]}),n})();const j6={provide:_s,useExisting:(0,u.Gpc)(()=>lR),multi:!0};let lR=(()=>{class n extends yD{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=t=>oL(t),this.createValidator=t=>function TF(n){return e=>Kh(e.value)||!vF(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("minlength",r.enabled()?r.minlength:null)},inputs:{minlength:"minlength"},features:[u._Bn([j6]),u.qOj]}),n})();const Z6={provide:_s,useExisting:(0,u.Gpc)(()=>vD),multi:!0};let vD=(()=>{class n extends yD{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>oL(t),this.createValidator=t=>function DF(n){return e=>vF(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("maxlength",r.enabled()?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[u._Bn([Z6]),u.qOj]}),n})(),H6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[QF]]}),n})(),q6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[H6]}),n})();const hL="firebasestorage.googleapis.com",fL="storageBucket";class Rr extends P.ZR{constructor(e,t){super(uR(e),`Firebase Storage: ${t} (${uR(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Rr.prototype)}_codeEquals(e){return uR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function uR(n){return"storage/"+n}function cR(){return new Rr("unknown","An unknown error occurred, please check the error payload for server response.")}function pL(){return new Rr("canceled","User canceled the upload/download.")}function gL(){return new Rr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function gy(n){return new Rr("invalid-argument",n)}function mL(){return new Rr("app-deleted","The Firebase app was deleted.")}function _L(n){return new Rr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function FE(n,e){return new Rr("invalid-format","String does not match format '"+n+"': "+e)}function LE(n){throw new Rr("internal-error","Internal error: "+n)}class ys{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ys.makeFromUrl(e,t)}catch(i){return new ys(e,"")}if(""===r.path)return r;throw function n3(n){return new Rr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",p=new RegExp("^gs://"+i+"(/(.*))?$","i");function E(ze){ze.path_=decodeURIComponent(ze.path)}const S=t.replace(/[.]/g,"\\."),ct=[{regex:p,indices:{bucket:1,path:3},postModify:function a(ze){"/"===ze.path.charAt(ze.path.length-1)&&(ze.path_=ze.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:E},{regex:new RegExp(`^https?://${t===hL?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:E}];for(let ze=0;ze<ct.length;ze++){const Mt=ct[ze],Ut=Mt.regex.exec(e);if(Ut){let Ei=Ut[Mt.indices.path];Ei||(Ei=""),r=new ys(Ut[Mt.indices.bucket],Ei),Mt.postModify(r);break}}if(null==r)throw function t3(n){return new Rr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class o3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function wD(n){return"string"==typeof n||n instanceof String}function yL(n){return dR()&&n instanceof Blob}function dR(){return"undefined"!=typeof Blob}function hR(n,e,t,r){if(r<e)throw gy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw gy(`Invalid value for '${n}'. Expected ${t} or less.`)}function sd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function vL(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Jh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Jh||(Jh={})),Jh))();class h3{constructor(e,t,r,i,a,c,p,_,E,T,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=p,this.errorCallback_=_,this.timeout_=E,this.progressCallback_=T,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,U)=>{this.resolve_=N,this.reject_=U,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,c=this.reject_,p=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(p,p.getResponse());!function u3(n){return void 0!==n}(_)?a():a(_)}catch(_){c(_)}else if(null!==p){const _=cR();_.serverResponse=p.getErrorText(),c(this.errorCallback_?this.errorCallback_(p,_):_)}else c(i.canceled?this.appDelete_?mL():pL():function e3(){return new Rr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new ED(!1,null,!0)):this.backoffId_=function a3(n,e,t){let r=1,i=null,a=null,c=!1,p=0;function _(){return 2===p}let E=!1;function T(...be){E||(E=!0,e.apply(null,be))}function S(be){i=setTimeout(()=>{i=null,n(U,_())},be)}function N(){a&&clearTimeout(a)}function U(be,...Ke){if(E)return void N();if(be)return N(),void T.call(null,be,...Ke);if(_()||c)return N(),void T.call(null,be,...Ke);let ct;r<64&&(r*=2),1===p?(p=2,ct=0):ct=1e3*(r+Math.random()),S(ct)}let Z=!1;function ue(be){Z||(Z=!0,N(),!E&&(null!==i?(be||(p=2),clearTimeout(i),S(0)):be||(p=1)))}return S(0),a=setTimeout(()=>{c=!0,ue(!0)},t),ue}((r,i)=>{if(i)return void r(!1,new ED(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const c=p=>{null!==this.progressCallback_&&this.progressCallback_(p.loaded,p.lengthComputable?p.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const p=a.getErrorCode()===Jh.NO_ERROR,_=a.getStatus();if(!p||this.isRetryStatusCode_(_)){const T=a.getErrorCode()===Jh.ABORT;return void r(!1,new ED(!1,null,T))}const E=-1!==this.successCodes_.indexOf(_);r(!0,new ED(E,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function l3(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class ED{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function v3(...n){const e=function y3(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(dR())return new Blob(n);throw new Rr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const na={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class fR{constructor(e,t){this.data=e,this.contentType=t||null}}function pR(n,e){switch(n){case na.RAW:return new fR(wL(e));case na.BASE64:case na.BASE64URL:return new fR(EL(n,e));case na.DATA_URL:return new fR(function C3(n){const e=new bL(n);return e.base64?EL(na.BASE64,e.rest):function b3(n){let e;try{e=decodeURIComponent(n)}catch(t){throw FE(na.DATA_URL,"Malformed data URL.")}return wL(e)}(e.rest)}(e),function I3(n){return new bL(n).contentType}(e))}throw cR()}function wL(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function EL(n,e){switch(n){case na.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw FE(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case na.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw FE(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function E3(n){return atob(n)}(e)}catch(i){throw FE(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class bL{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw FE(na.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function T3(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class qu{constructor(e,t){let r=0,i="";yL(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(yL(this.data_)){const i=function w3(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new qu(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new qu(r,!0)}}static getBlob(...e){if(dR()){const t=e.map(r=>r instanceof qu?r.data_:r);return new qu(v3.apply(null,t))}{const t=e.map(c=>wD(c)?pR(na.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(c=>{for(let p=0;p<c.length;p++)i[a++]=c[p]}),new qu(i,!0)}}uploadData(){return this.data_}}function gR(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function d3(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function CL(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function S3(n,e){return e}class Ks{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||S3}}let bD=null;function UE(){if(bD)return bD;const n=[];n.push(new Ks("bucket")),n.push(new Ks("generation")),n.push(new Ks("metageneration")),n.push(new Ks("name","fullPath",!0));const t=new Ks("name");t.xform=function e(a,c){return function x3(n){return!wD(n)||n.length<2?n:CL(n)}(c)},n.push(t);const i=new Ks("size");return i.xform=function r(a,c){return void 0!==c?Number(c):c},n.push(i),n.push(new Ks("timeCreated")),n.push(new Ks("updated")),n.push(new Ks("md5Hash",null,!0)),n.push(new Ks("cacheControl",null,!0)),n.push(new Ks("contentDisposition",null,!0)),n.push(new Ks("contentEncoding",null,!0)),n.push(new Ks("contentLanguage",null,!0)),n.push(new Ks("contentType",null,!0)),n.push(new Ks("metadata","customMetadata",!0)),bD=n,bD}function IL(n,e,t){const r=gR(e);return null===r?null:function R3(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const c=t[a];r[c.local]=c.xform(r,e[c.server])}return function k3(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new ys(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function mR(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const TL="prefixes";class Gu{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Wu(n){if(!n)throw cR()}function CD(n,e){return function t(r,i){const a=IL(n,i,e);return Wu(null!==a),a}}function my(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function J6(){return new Rr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Q6(){return new Rr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Y6(n){return new Rr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function X6(n){return new Rr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function VE(n){const e=my(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function K6(n){return new Rr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function AL(n,e,t){const i=sd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new Gu(i,"GET",CD(n,t),c);return p.errorHandler=VE(e),p}function L3(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const p=sd(e.bucketOnlyServerUrl(),n.host,n._protocol),E=n.maxOperationRetryTime,T=new Gu(p,"GET",function O3(n,e){return function t(r,i){const a=function P3(n,e,t){const r=gR(t);return null===r?null:function N3(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[TL])for(const i of t[TL]){const a=i.replace(/\/$/,""),c=n._makeStorageReference(new ys(e,a));r.prefixes.push(c)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new ys(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Wu(null!==a),a}}(n,e.bucket),E);return T.urlParams=a,T.errorHandler=my(e),T}function xL(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function j3(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class ID{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function _R(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Wu(!1)}return Wu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const q3={STATE_CHANGED:"state_changed"},Ys={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function yR(n){switch(n){case"running":case"pausing":case"canceling":return Ys.RUNNING;case"paused":return Ys.PAUSED;case"success":return Ys.SUCCESS;case"canceled":return Ys.CANCELED;default:return Ys.ERROR}}class G3{constructor(e,t,r){if(function c3(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function _y(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class z3 extends class W3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Jh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Jh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Jh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw LE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw LE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw LE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw LE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw LE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Fl(){return new z3}class NL{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=UE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function Z3(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c=xL(e,r,i),p={name:c.fullPath},_=sd(a,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},S=mR(c,t),Z=new Gu(_,"POST",function U(ue){let be;_R(ue);try{be=ue.getResponseHeader("X-Goog-Upload-URL")}catch(Ke){Wu(!1)}return Wu(wD(be)),be},n.maxUploadRetryTime);return Z.urlParams=p,Z.headers=T,Z.body=S,Z.errorHandler=my(e),Z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Fl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function $3(n,e,t,r){const _=new Gu(t,"POST",function a(E){const T=_R(E,["active","final"]);let S=null;try{S=E.getResponseHeader("X-Goog-Upload-Size-Received")}catch(U){Wu(!1)}S||Wu(!1);const N=Number(S);return Wu(!isNaN(N)),new ID(N,r.size(),"final"===T)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=my(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Fl,t,r);this._request=a,a.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new ID(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let c;try{c=function H3(n,e,t,r,i,a,c,p){const _=new ID(0,0);if(c?(_.current=c.current,_.total=c.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function i3(){return new Rr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const E=_.total-_.current;let T=E;i>0&&(T=Math.min(T,i));const S=_.current,Z={"X-Goog-Upload-Command":T===E?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},ue=r.slice(S,S+T);if(null===ue)throw gL();const ct=new Gu(t,"POST",function be(ze,Mt){const Ut=_R(ze,["active","final"]),wo=_.current+T,Ei=r.size();let Ll;return Ll="final"===Ut?CD(e,a)(ze,Mt):null,new ID(wo,Ei,"final"===Ut,Ll)},e.maxUploadRetryTime);return ct.headers=Z,ct.body=ue.uploadData(),ct.progressCallback=p||null,ct.errorHandler=my(n),ct}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const p=this._ref.storage._makeRequest(c,Fl,i,a);this._request=p,p.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=AL(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Fl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function kL(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},_=function p(){let ct="";for(let ze=0;ze<2;ze++)ct+=Math.random().toString().slice(2);return ct}();c["Content-Type"]="multipart/related; boundary="+_;const E=xL(e,r,i),T=mR(E,t),U=qu.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+_+"\r\nContent-Type: "+E.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===U)throw gL();const Z={name:E.fullPath},ue=sd(a,n.host,n._protocol),Ke=n.maxUploadRetryTime,qe=new Gu(ue,"POST",CD(n,t),Ke);return qe.urlParams=Z,qe.headers=c,qe.body=U.uploadData(),qe.errorHandler=my(e),qe}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Fl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=pL(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=yR(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new G3(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(yR(this._state)){case Ys.SUCCESS:_y(this._resolve.bind(null,this.snapshot))();break;case Ys.CANCELED:case Ys.ERROR:_y(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(yR(this._state)){case Ys.RUNNING:case Ys.PAUSED:e.next&&_y(e.next.bind(e,this.snapshot))();break;case Ys.SUCCESS:e.complete&&_y(e.complete.bind(e))();break;default:e.error&&_y(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class xg{constructor(e,t){this._service=e,this._location=t instanceof ys?t:ys.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new xg(e,t)}get root(){const e=new ys(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return CL(this._location.path)}get storage(){return this._service}get parent(){const e=function D3(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ys(this._location.bucket,e);return new xg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw _L(e)}}function OL(n,e,t){return vR.apply(this,arguments)}function vR(){return vR=(0,ge.Z)(function*(n,e,t){const i=yield FL(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield OL(n,e,i.nextPageToken))}),vR.apply(this,arguments)}function FL(n,e){null!=e&&"number"==typeof e.maxResults&&hR("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=L3(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Fl)}function o8(n){n._throwIfRoot("getDownloadURL");const e=function U3(n,e,t){const i=sd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new Gu(i,"GET",function F3(n,e){return function t(r,i){const a=IL(n,i,e);return Wu(null!==a),function M3(n,e,t,r){const i=gR(e);if(null===i||!wD(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const c=encodeURIComponent;return a.split(",").map(E=>{const S=n.fullPath;return sd("/b/"+c(n.bucket)+"/o/"+c(S),t,r)+vL({alt:"media",token:E})})[0]}(a,i,n.host,n._protocol)}}(n,t),c);return p.errorHandler=VE(e),p}(n.storage,n._location,UE());return n.storage.makeRequestWithTokens(e,Fl).then(t=>{if(null===t)throw function s3(){return new Rr("no-download-url","The given file does not have any download URLs.")}();return t})}function LL(n,e){const t=function A3(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ys(n._location.bucket,t);return new xg(n.storage,r)}function UL(n,e){if(n instanceof wR){const t=n;if(null==t._bucket)throw function r3(){return new Rr("no-default-bucket","No default bucket found. Did you set the '"+fL+"' property when initializing the app?")}();const r=new xg(t,t._bucket);return null!=e?UL(r,e):r}return void 0!==e?LL(n,e):n}function c8(n,e){if(e&&function l8(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof wR)return function u8(n,e){return new xg(n,e)}(n,e);throw gy("To use ref(service, url), the first argument must be a Storage instance.")}return UL(n,e)}function VL(n,e){const t=null==e?void 0:e[fL];return null==t?null:ys.makeFromBucketSpec(t,n)}class wR{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=hL,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ys.makeFromBucketSpec(i,this._host):VL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ys.makeFromBucketSpec(this._url,e):VL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){hR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){hR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ge.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ge.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xg(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new o3(mL());{const a=function _3(n,e,t,r,i,a){const c=vL(n.urlParams),p=n.url+c,_=Object.assign({},n.headers);return function g3(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function f3(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function p3(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(_,a),function m3(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new h3(p,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,ge.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const BL="@firebase/storage";function $L(n,e){return c8(n=(0,P.m9)(n),e)}function E8(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new wR(t,r,i,e,Yi.SDK_VERSION)}!function b8(){(0,Yi._registerComponent)(new Ho.wA("storage",E8,"PUBLIC").setMultipleInstances(!0)),(0,Yi.registerVersion)(BL,"0.9.4",""),(0,Yi.registerVersion)(BL,"0.9.4","esm2017")}();class TD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class HL{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new TD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new TD(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?c=>t(new TD(c,this,this._ref)):{next:t.next?c=>t.next(new TD(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class qL{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new od(e,this._service))}get items(){return this._delegate.items.map(e=>new od(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class od{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function v8(n,e){return LL(n,e)}(this._delegate,e);return new od(t,this.storage)}get root(){return new od(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new od(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new HL(function h8(n,e,t){return function t8(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new NL(n,new qu(e),t)}(n=(0,P.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=na.RAW,r){this._throwIfRoot("putString");const i=pR(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new HL(new NL(this._delegate,new qu(i.data,!0),a),this)}listAll(){return function m8(n){return function r8(n){const e={prefixes:[],items:[]};return OL(n,e).then(()=>e)}(n=(0,P.m9)(n))}(this._delegate).then(e=>new qL(e,this.storage))}list(e){return function g8(n,e){return FL(n=(0,P.m9)(n),e)}(this._delegate,e||void 0).then(t=>new qL(t,this.storage))}getMetadata(){return function f8(n){return function i8(n){n._throwIfRoot("getMetadata");const e=AL(n.storage,n._location,UE());return n.storage.makeRequestWithTokens(e,Fl)}(n=(0,P.m9)(n))}(this._delegate)}updateMetadata(e){return function p8(n,e){return function s8(n,e){n._throwIfRoot("updateMetadata");const t=function V3(n,e,t,r){const a=sd(e.fullServerUrl(),n.host,n._protocol),p=mR(t,r),E=n.maxOperationRetryTime,T=new Gu(a,"PATCH",CD(n,r),E);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=p,T.errorHandler=VE(e),T}(n.storage,n._location,e,UE());return n.storage.makeRequestWithTokens(t,Fl)}(n=(0,P.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function _8(n){return o8(n=(0,P.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function y8(n){return function a8(n){n._throwIfRoot("deleteObject");const e=function B3(n,e){const r=sd(e.fullServerUrl(),n.host,n._protocol),p=new Gu(r,"DELETE",function c(_,E){},n.maxOperationRetryTime);return p.successCodes=[200,204],p.errorHandler=VE(e),p}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Fl)}(n=(0,P.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw _L(e)}}class GL{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(WL(e))throw gy("ref() expected a child path but got a URL, use refFromURL instead.");return new od($L(this._delegate,e),this)}refFromURL(e){if(!WL(e))throw gy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ys.makeFromUrl(e,this._delegate.host)}catch(t){throw gy("refFromUrl() expected a valid full URL but got an invalid one.")}return new od($L(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function w8(n,e,t,r={}){!function d8(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,P.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function WL(n){return/^[A-Za-z]+:\/\//.test(n)}function D8(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new GL(t,r)}function zL(n){const e=function S8(n){return new tr.y(e=>{const t=c=>e.next(c);t(n.snapshot);const a=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){a()}}).pipe(function G6(n,e=Mc.z){return(0,_r.e)((t,r)=>{let i=null,a=null,c=null;const p=()=>{if(i){i.unsubscribe(),i=null;const E=a;a=null,r.next(E)}};function _(){const E=c+n,T=e.now();if(T<E)return i=this.schedule(void 0,E-T),void r.add(i);p()}t.subscribe(new Un.Q(r,E=>{a=E,c=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{p(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,at.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function DD(n){return{getDownloadURL:()=>ft(void 0).pipe(un.fc,Dn(()=>n.getDownloadURL()),un.iC),getMetadata:()=>ft(void 0).pipe(un.fc,Dn(()=>n.getMetadata()),un.iC),delete:()=>(0,an.D)(n.delete()),child:e=>DD(n.child(e)),updateMetadata:e=>(0,an.D)(n.updateMetadata(e)),put:(e,t)=>zL(n.put(e,t)),putString:(e,t,r)=>zL(n.putString(e,t,r)),list:e=>(0,an.D)(n.list(e)),listAll:()=>(0,an.D)(n.listAll())}}!function A8(n){const e={TaskState:Ys,TaskEvent:q3,StringFormat:na,Storage:GL,Reference:od};n.INTERNAL.registerComponent(new Ho.wA("storage-compat",D8,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.12")}(Jy.Z);const x8=new u.OlP("angularfire2.storageBucket"),k8=new u.OlP("angularfire2.storage.maxUploadRetryTime"),R8=new u.OlP("angularfire2.storage.maxOperationRetryTime"),M8=new u.OlP("angularfire2.storage.use-emulator");let KL=(()=>{class n{constructor(t,r,i,a,c,p,_,E,T,S){const N=(0,Lr.on)(t,c,r);this.storage=(0,Lr.cc)(`${N.name}.storage.${i}`,"AngularFireStorage",N.name,()=>{const U=c.runOutsideAngular(()=>N.storage(i||void 0)),Z=T;return Z&&U.useEmulator(...Z),_&&U.setMaxUploadRetryTime(_),E&&U.setMaxOperationRetryTime(E),U},[_,E])}ref(t){return DD(this.storage.ref(t))}refFromURL(t){return DD(this.storage.refFromURL(t))}upload(t,r,i){return DD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Lr.Dh),u.LFG(Lr.xv,8),u.LFG(x8,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(un.HU),u.LFG(k8,8),u.LFG(R8,8),u.LFG(M8,8),u.LFG(Wc,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),N8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),P8=(()=>{class n{constructor(){Hp.Z.registerVersion("angularfire",un.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[KL],imports:[N8]}),n})();function O8(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"label",3),u.TgZ(2,"div",4),u.O4$(),u.TgZ(3,"svg",5),u._UZ(4,"path",6),u.qZA(),u.qZA(),u.kcU(),u.TgZ(5,"span",7),u._uU(6),u.qZA(),u.TgZ(7,"input",8),u.NdJ("change",function(i){return u.CHM(t),u.oxw().upload(i)}),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=u.oxw();u.xp6(6),u.hij("Ajouter ",t.displayName,"")}}function F8(n,e){if(1&n&&(u.TgZ(0,"div",9),u.TgZ(1,"div",4),u.O4$(),u.TgZ(2,"svg",10),u._UZ(3,"circle",11),u._UZ(4,"polyline",12),u._UZ(5,"circle",13),u.qZA(),u.qZA(),u.kcU(),u.TgZ(6,"span",7),u._uU(7),u.qZA(),u.qZA()),2&n){const t=u.oxw();u.xp6(7),u.Oqu(t.name)}}let L8=(()=>{class n{constructor(t){this.afStorage=t,this.uploadFileName=new u.vpe,this.progress=new u.vpe}ngOnInit(){"image"===this.type?this.displayName="une image":"file"===this.type&&(this.displayName="un fichier")}upload(t){this.name=t.target.files[0].name,"image"===this.type?this.ref=this.afStorage.ref(`images/${this.name}`):"file"===this.type&&(this.ref=this.afStorage.ref("/files/"+this.name)),this.task=this.ref.put(t.target.files[0]),this.progress.emit(this.uploadProgress=this.task.snapshotChanges().pipe((0,at.U)(r=>r.bytesTransferred/r.totalBytes*100))),this.task.snapshotChanges().pipe(uc(()=>{this.ref.getDownloadURL().pipe((0,at.U)(r=>{this.uploadFileName.emit(r)})).subscribe()})).subscribe()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(KL))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-upload-file"]],inputs:{type:"type"},outputs:{uploadFileName:"uploadFileName",progress:"progress"},decls:5,vars:4,consts:[[1,"flex","justify-between","py-2"],[4,"ngIf","ngIfElse"],["uploadSucess",""],[1,"block","md:w-56","w-36","px-4","py-6","bg-primary-50","text-primary-700","rounded-lg","shadow-lg","tracking-wide","uppercase","border","border-primary-800","cursor-pointer","hover:bg-primary-100","hover:text-primary-600"],[1,"flex","items-center","justify-center","mb-2"],["fill","currentColor","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20",1,"w-8","h-8"],["d","M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z"],[1,"mt-2","text-base","leading-normal"],["type","file",1,"hidden",3,"change"],[1,"block","truncate","md:w-56","w-36","items-center","px-4","py-6","bg-primary-50","text-primary-700","rounded-lg","shadow-lg","tracking-wide","uppercase","border","border-primary-800"],["xmlns","http://www.w3.org/2000/svg","width","36","height","36","fill","#911011","viewBox","0 0 256 256"],["cx","128","cy","128","r","96","opacity","0.2"],["points","172 104 113.3 160 84 132","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["cx","128","cy","128","r","96","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"]],template:function(t,r){if(1&t&&(u.TgZ(0,"div",0),u.YNc(1,O8,8,1,"div",1),u.ALo(2,"async"),u.YNc(3,F8,8,1,"ng-template",null,2,u.W1O),u.qZA()),2&t){const i=u.MAs(4);u.xp6(1),u.Q6J("ngIf",100!==u.lcZ(2,2,r.uploadProgress))("ngIfElse",i)}},directives:[Gr],pipes:[ca],styles:[""]}),n})(),U8=(()=>{class n{constructor(t,r,i){this.db=t,this.articleService=r,this.datePipe=i,this.id="",this.status="",this.title="",this.description="",this.creationDate=new Date,this.fileName="",this.imageName="",this.progressUploadImage=new tr.y,this.progressUploadFile=new tr.y,this.articleAdded=new u.vpe}ngOnInit(){this.datePipe.transform(this.creationDate,"dd/MM/yyyy")}onSubmit(t){const r={title:t.value.title,description:t.value.description,creationDate:t.value.creationDate,imageName:this.imageName,fileName:this.fileName};this.db.object(`articles/${this.title}`).set(r).finally(()=>{this.articleAdded.emit(!0)})}onUploadImage(t){this.imageName=t}onUploadFile(t){this.fileName=t}onProgressUploadImage(t){this.progressUploadImage=t}onProgressUploadFile(t){this.progressUploadFile=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ZI),u.Y36(hy),u.Y36(da))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-add-article"]],outputs:{articleAdded:"articleAdded"},decls:44,vars:11,consts:[[1,"flex","items-center","justify-center","mb-4"],[1,"text-primary-700","text-3xl","font-bold"],[1,"flex","justify-center","items-center","ml-8"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","#911011","viewBox","0 0 256 256"],["cx","128","cy","128","r","96","opacity","0.2"],["cx","128","cy","128","r","96","fill","none","stroke","#911011","stroke-miterlimit","10","stroke-width","16"],["x1","88","y1","128","x2","168","y2","128","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","128","y1","88","x2","128","y2","168","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[3,"ngSubmit"],["formSearch","ngForm"],[1,"mb-4"],["for","username",1,"block","text-primary-700","text-sm","font-bold","mb-2"],["name","title","id","title","type","text","maxlength","100","placeholder","Titre","aria-label","Tilte","required","",1,"w-full","focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","bg-white","rounded","placeholder-primary-100",3,"ngModel","ngModelChange"],["for","password",1,"block","text-primary-700","text-sm","font-bold","mb-2"],["name","description","required","","id","description","type","description","maxlength","350","placeholder","Entrer une description de votre article","aria-label","Description",1,"justify-start","w-full","focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","bg-white","rounded","placeholder-primary-100","h-56","overflow-y-scroll",3,"ngModel","ngModelChange"],["name","creationDate","required","","id","creationDate","min","2018-01-01","max","2030-12-31","type","date","aria-label","CreationDate",1,"w-full","focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","bg-white","rounded","placeholder-primary-100",3,"ngModel","ngModelChange"],[1,"mb-4","flex","justify-between","items-center"],[3,"type","uploadFileName","progress"],[1,"flex","items-center","justify-center","my-8"],["type","submit",1,"relative","py-4","px-6","disabled:bg-primary-100","disabled:hover:bg-primary-100","bg-secondary-600","hover:bg-secondary-500","rounded-lg","leading-none","flex","items-center","text","divide-x","divide-secondary-50",3,"disabled"],[1,"text-secondary-50","pr-6","font-sans","transition","duration-200"],[1,"flex","items-center","space-x-5","pl-6"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","#fafafa","viewBox","0 0 256 256"],["width","256","height","256","fill","none"],["points","172 104 113.3 160 84 132","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["cx","128","cy","128","r","96","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["routerLink","/login",1,"underline","text-primary-500","hover:text-primary-600","inline-flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","fill","#ba2525","viewBox","0 0 256 256",1,"mr-1"],["x1","216","y1","128","x2","40","y2","128","fill","none","stroke","#ba2525","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["points","112 56 40 128 112 200","fill","none","stroke","#ba2525","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"]],template:function(t,r){if(1&t){const i=u.EpF();u.TgZ(0,"div",0),u.TgZ(1,"h1",1),u._uU(2,"Ajouter un article"),u.qZA(),u.TgZ(3,"div",2),u.O4$(),u.TgZ(4,"svg",3),u._UZ(5,"circle",4),u._UZ(6,"circle",5),u._UZ(7,"line",6),u._UZ(8,"line",7),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(9,"form",8,9),u.NdJ("ngSubmit",function(){u.CHM(i);const c=u.MAs(10);return r.onSubmit(c)}),u.TgZ(11,"div",10),u.TgZ(12,"label",11),u._uU(13," Titre * "),u.qZA(),u.TgZ(14,"input",12),u.NdJ("ngModelChange",function(c){return r.title=c}),u.qZA(),u.qZA(),u.TgZ(15,"div",10),u.TgZ(16,"label",13),u._uU(17," Description * "),u.qZA(),u.TgZ(18,"textarea",14),u.NdJ("ngModelChange",function(c){return r.description=c}),u.qZA(),u.qZA(),u.TgZ(19,"div",10),u.TgZ(20,"label",13),u._uU(21," Date de creation * "),u.qZA(),u.TgZ(22,"input",15),u.NdJ("ngModelChange",function(c){return r.creationDate=c}),u.ALo(23,"date"),u.qZA(),u.qZA(),u.TgZ(24,"div",16),u.TgZ(25,"app-upload-file",17),u.NdJ("uploadFileName",function(c){return r.onUploadImage(c)})("progress",function(c){return r.onProgressUploadImage(c)}),u.qZA(),u.TgZ(26,"app-upload-file",17),u.NdJ("uploadFileName",function(c){return r.onUploadFile(c)})("progress",function(c){return r.onProgressUploadFile(c)}),u.qZA(),u.qZA(),u.TgZ(27,"div",18),u.TgZ(28,"button",19),u.ALo(29,"async"),u.TgZ(30,"span",20),u._uU(31," Ajouter"),u.qZA(),u.TgZ(32,"span",21),u.O4$(),u.TgZ(33,"svg",22),u._UZ(34,"rect",23),u._UZ(35,"circle",4),u._UZ(36,"polyline",24),u._UZ(37,"circle",25),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(38,"a",26),u.O4$(),u.TgZ(39,"svg",27),u._UZ(40,"rect",23),u._UZ(41,"line",28),u._UZ(42,"polyline",29),u.qZA(),u._uU(43," Back "),u.qZA()}if(2&t){const i=u.MAs(10);u.xp6(14),u.Q6J("ngModel",r.title),u.xp6(4),u.Q6J("ngModel",r.description),u.xp6(4),u.Q6J("ngModel",u.xi3(23,6,r.creationDate,"yyyy-MM-dd")),u.xp6(3),u.Q6J("type","image"),u.xp6(1),u.Q6J("type","file"),u.xp6(2),u.Q6J("disabled",i.invalid||u.lcZ(29,9,r.progressUploadImage)<100&&""!==r.imageName)}},directives:[PE,SE,Sg,fy,vD,OE,uD,NE,L8,f],pipes:[da,ca],encapsulation:2}),n})(),V8=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-success-add-article-page"]],decls:14,vars:0,consts:[[1,"container","w-full"],[1,"flex","flex-col","justify-center","items-center"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","#911011","viewBox","0 0 256 256"],["cx","128","cy","128","r","96","opacity","0.2"],["points","172 104 113.3 160 84 132","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["cx","128","cy","128","r","96","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"text-primary-700","text-3xl","font-bold","mt-4"],["routerLink","/login",1,"underline","text-primary-500","hover:text-primary-600","inline-flex","items-center","justify-center","mt-4"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","fill","#ba2525","viewBox","0 0 256 256",1,"mr-1"],["width","256","height","256","fill","none"],["x1","216","y1","128","x2","40","y2","128","fill","none","stroke","#ba2525","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["points","112 56 40 128 112 200","fill","none","stroke","#ba2525","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.O4$(),u.TgZ(2,"svg",2),u._UZ(3,"circle",3),u._UZ(4,"polyline",4),u._UZ(5,"circle",5),u.qZA(),u.kcU(),u.TgZ(6,"h1",6),u._uU(7," Article ajout\xe9e avec succ\xe8s "),u.qZA(),u.TgZ(8,"a",7),u.O4$(),u.TgZ(9,"svg",8),u._UZ(10,"rect",9),u._UZ(11,"line",10),u._UZ(12,"polyline",11),u.qZA(),u._uU(13," Back "),u.qZA(),u.qZA(),u.qZA())},directives:[f],encapsulation:2}),n})();function B8(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",5),u.TgZ(1,"app-add-article",6),u.NdJ("articleAdded",function(i){return u.CHM(t),u.oxw().onArticleAdded(i)}),u.qZA(),u.qZA()}}function j8(n,e){1&n&&u._UZ(0,"app-success-add-article-page")}let Z8=(()=>{class n{constructor(){this.articleAdded=!1}onArticleAdded(t){this.articleAdded=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-add-article-page"]],decls:6,vars:2,consts:[[1,"container","max-w-full","max-h-full","bg-primary-300"],[1,"bg-primary-50","py-8","px-4","flex","flex-col","items-center","justify-center","min-h-screen"],[1,"bg-primary-50","border-dashed","border-primary-700","border-2","rounded-xl","py-12","lg:px-28","px-8","shadow-xl","md:w-246"],["class","container w-full",4,"ngIf","ngIfElse"],["articleAddedSuccess",""],[1,"container","w-full"],[3,"articleAdded"]],template:function(t,r){if(1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.YNc(3,B8,2,0,"div",3),u.YNc(4,j8,1,0,"ng-template",null,4,u.W1O),u.qZA(),u.qZA(),u.qZA()),2&t){const i=u.MAs(5);u.xp6(3),u.Q6J("ngIf",!r.articleAdded)("ngIfElse",i)}},directives:[Gr,U8,V8],encapsulation:2}),n})();function $8(n,e){if(1&n&&(u.O4$(),u.kcU(),u.TgZ(0,"div"),u.TgZ(1,"div",13),u.TgZ(2,"h2",14),u._uU(3),u.qZA(),u.qZA(),u.qZA()),2&n){const t=u.oxw();u.xp6(3),u.hij(" ",t.searchFound," articles trouv\xe9s ")}}function H8(n,e){1&n&&(u.O4$(),u.kcU(),u.TgZ(0,"div",13),u.TgZ(1,"h2",14),u._uU(2," Aucun article trouv\xe9s "),u.qZA(),u.qZA())}let q8=(()=>{class n{constructor(t){this.articleService=t,this.articles=new u.vpe,this.updateCurrentPage=new u.vpe,this.actualPage=1,this.searchFound=0,this.searchWord=""}ngOnInit(){this.articleService.getArticles().subscribe(t=>{this.articles.emit(t),this.searchFound=t.length})}onTyping(t){this.searchWord=t.target.value,this.actualPage=1,this.updateCurrentPage.emit(this.actualPage),this.articleService.search(this.searchWord).subscribe(r=>{this.articles.emit(r),this.searchFound=r.length})}onSubmit(t){this.searchWord=t.value.word,this.searchWord.length>0?this.articleService.search(this.searchWord).subscribe(r=>{this.articles.emit(r),this.searchFound=r.length}):this.articleService.getArticles().subscribe(r=>{this.articles.emit(r),this.searchFound=r.length})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(hy))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-search-articles"]],outputs:{articles:"articles",updateCurrentPage:"updateCurrentPage"},decls:14,vars:3,consts:[[1,"flex","flex-col","items-center","justify-center","pt-2","px-4"],[1,"inline-flex",3,"ngSubmit"],["formSearch","ngForm"],["name","word","type","text","placeholder","Search","aria-label","Search",1,"font-thin","text-secondary-600","px-2","py-2","outline-none","focus:ring-primary-200","focus:ring-1","rounded-l-md","placeholder-primary-200","bg-white",3,"keyup"],["type","submit",1,"relative","py-2","px-4","bg-secondary-600","hover:bg-secondary-500","rounded-r-md","ring-1","ring-secondary-500","leading-none","flex","items-center",3,"disabled"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","#fafafa","viewBox","0 0 256 256"],["width","256","height","256","fill","none"],["cx","116","cy","116","r","84","opacity","0.2"],["cx","116","cy","116","r","84","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","175.4","y1","175.4","x2","224","y2","224","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[4,"ngIf","ngIfElse"],["nothingFound",""],[1,"flex","items-center","justify-center","py-4","px-4"],[1,"font-sans","font-bold","text-center","text-primary-700"]],template:function(t,r){if(1&t){const i=u.EpF();u.TgZ(0,"div",0),u.TgZ(1,"form",1,2),u.NdJ("ngSubmit",function(){u.CHM(i);const c=u.MAs(2);return r.onSubmit(c)}),u.TgZ(3,"input",3),u.NdJ("keyup",function(c){return r.onTyping(c)}),u.qZA(),u.TgZ(4,"button",4),u.TgZ(5,"span",5),u.O4$(),u.TgZ(6,"svg",6),u._UZ(7,"rect",7),u._UZ(8,"circle",8),u._UZ(9,"circle",9),u._UZ(10,"line",10),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(11,$8,4,1,"div",11),u.YNc(12,H8,3,0,"ng-template",null,12,u.W1O),u.qZA()}if(2&t){const i=u.MAs(2),a=u.MAs(13);u.xp6(4),u.Q6J("disabled",i.invalid),u.xp6(7),u.Q6J("ngIf",r.searchFound>0)("ngIfElse",a)}},directives:[PE,SE,Sg,Gr],encapsulation:2}),n})();function G8(n,e){if(1&n&&(u.TgZ(0,"a",10),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.s9C("href",t.article.fileName,u.LSH),u.xp6(1),u.hij(" ",t.article.title," ")}}function W8(n,e){1&n&&(u.TgZ(0,"span",4),u._uU(1,"Pas de fichier associ\xe9"),u.qZA())}let z8=(()=>{class n{constructor(){this.hasFile=!0}set inputArticle(t){t.fileName||(this.hasFile=!1),t.imageName||(t.imageName="assets/images/default-image.png"),this.article=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-article-card"]],inputs:{inputArticle:"inputArticle"},decls:21,vars:9,consts:[[1,"container","md:w-138","bg-primary-50","rounded-lg","shadow-xl"],["alt","Syncing",1,"md:object-cover","object-center","md:w-138","md:h-[288px]","rounded-t-lg","bg-primary-50",3,"src"],[1,"block","md:w-138","md:h-92","bg-primary-800","opacity-40","text-left","rounded-b-lg","px-4","py-8"],[1,"md:h-12","px-1","py-2","font-bold","text-white"],[1,"font-thin","text-white","text-left"],[1,"md:h-36","px-1","py-2","font-bold","text-white"],[1,"px-1","py-2","font-bold","text-white"],[1,"md:h-14","px-1","py-2","font-bold","text-white"],["class","font-thin text-primary-100 underline","target","_blank","download","",3,"href",4,"ngIf","ngIfElse"],["hasNoFile",""],["target","_blank","download","",1,"font-thin","text-primary-100","underline",3,"href"]],template:function(t,r){if(1&t&&(u.TgZ(0,"div",0),u._UZ(1,"img",1),u.TgZ(2,"div",2),u.TgZ(3,"h2",3),u._uU(4," Titre: "),u.TgZ(5,"span",4),u._uU(6),u.qZA(),u.qZA(),u.TgZ(7,"h2",5),u._uU(8," Description: "),u.TgZ(9,"span",4),u._uU(10),u.qZA(),u.qZA(),u.TgZ(11,"h2",6),u._uU(12," Date de publication: "),u.TgZ(13,"span",4),u._uU(14),u.ALo(15,"date"),u.qZA(),u.qZA(),u.TgZ(16,"h2",7),u._uU(17," T\xe9l\xe9charger l'article complet: "),u.YNc(18,G8,2,2,"a",8),u.YNc(19,W8,2,0,"ng-template",null,9,u.W1O),u.qZA(),u.qZA(),u.qZA()),2&t){const i=u.MAs(20);u.xp6(1),u.s9C("src",r.article.imageName,u.LSH),u.xp6(5),u.Oqu(r.article.title),u.xp6(4),u.Oqu(r.article.description),u.xp6(4),u.Oqu(u.xi3(15,6,r.article.creationDate,"dd/MM/YYYY")),u.xp6(4),u.Q6J("ngIf",r.hasFile)("ngIfElse",i)}},directives:[Gr],pipes:[da],encapsulation:2}),n})();function K8(n,e){if(1&n&&(u.TgZ(0,"li",4),u._UZ(1,"app-article-card",5),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.Q6J("inputArticle",t)}}let Y8=(()=>{class n{constructor(t){this.articleService=t,this.perPage=2,this.currentPage=1,this.articlesOnPage=[],this.articles=[]}set inputCurrentPage(t){this.currentPage=t,this.articlesOnPage=this.articleService.paginate(this.articles,this.currentPage,this.perPage)}set inputArticles(t){this.articles=t,this.articlesOnPage=this.articleService.paginate(this.articles,this.currentPage,this.perPage)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(hy))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-articles"]],inputs:{inputCurrentPage:"inputCurrentPage",inputArticles:"inputArticles"},decls:4,vars:1,consts:[[1,"container","max-w-screen-2xl","mx-auto"],[1,"flex","items-center","justify-center"],[1,"grid","md:grid-cols-2","grid-cols-1","grid-rows-1","gap-20","place-content-evenly","max-w-screen-xl"],["class","col-span-1 row-span-1 bg-transparent px-4",4,"ngFor","ngForOf"],[1,"col-span-1","row-span-1","bg-transparent","px-4"],[3,"inputArticle"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"ul",2),u.YNc(3,K8,2,1,"li",3),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(3),u.Q6J("ngForOf",r.articlesOnPage))},directives:[Cs,z8],encapsulation:2}),n})(),Q8=(()=>{class n{constructor(t){this.articleService=t,this.perPage=2,this.page=1,this.max_page=0,this.currentPage=new u.vpe,t.sendCurrentNumberPage.subscribe(r=>{})}set inputCurrentPage(t){this.page=t}set currentMaxPage(t){this.max_page=Math.ceil(t/this.perPage)}ngOnInit(){this.articleService.getCountArticles().subscribe(t=>this.max_page=Math.ceil(t/this.perPage))}next(){this.page=this.page<this.max_page?this.page+1:1,this.currentPage.emit(this.page)}previous(){this.page=this.page>1?this.page-1:this.max_page,this.currentPage.emit(this.page)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(hy))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-paginate"]],inputs:{inputCurrentPage:"inputCurrentPage",currentMaxPage:"currentMaxPage"},outputs:{currentPage:"currentPage"},decls:12,vars:0,consts:[[1,"flex","items-center","justify-center","px-4","py-8"],["aria-label","Pagination",1,"relative","z-0","inline-flex","rounded-md","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-primary-100","bg-white","text-sm","font-medium","text-primary-800","hover:bg-primary-50",3,"click"],[1,"sr-only"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"h-5","w-5"],["fill-rule","evenodd","d","M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule","evenodd"],[1,"outline-none","relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-primary-100","bg-white","text-sm","font-medium","text-primary-800","hover:bg-primary-50",3,"click"],["fill-rule","evenodd","d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule","evenodd"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"nav",1),u.TgZ(2,"button",2),u.NdJ("click",function(){return r.previous()}),u.TgZ(3,"span",3),u._uU(4,"Previous"),u.qZA(),u.O4$(),u.TgZ(5,"svg",4),u._UZ(6,"path",5),u.qZA(),u.qZA(),u.kcU(),u.TgZ(7,"button",6),u.NdJ("click",function(){return r.next()}),u.TgZ(8,"span",3),u._uU(9,"Next"),u.qZA(),u.O4$(),u.TgZ(10,"svg",4),u._UZ(11,"path",7),u.qZA(),u.qZA(),u.qZA(),u.qZA())},encapsulation:2}),n})(),J8=(()=>{class n{constructor(){this.currentArticlePage=1,this.articles=[]}setCurrentArticlePage(t){this.currentArticlePage=t}onSearchArticles(t){this.articles=t,this.currentCountArticles=t.length}onUpdateCurrentPage(t){this.currentArticlePage=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-articles-page"]],decls:5,vars:4,consts:[[1,"bg-primary-50","min-w-full","min-h-screen","p-8"],[1,"flex","flex-col","items-center","justify-center","min-h-screen"],[3,"articles","updateCurrentPage"],[3,"inputCurrentPage","inputArticles"],[1,"mt-4",3,"inputCurrentPage","currentMaxPage","currentPage"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"app-search-articles",2),u.NdJ("articles",function(a){return r.onSearchArticles(a)})("updateCurrentPage",function(a){return r.onUpdateCurrentPage(a)}),u.qZA(),u._UZ(3,"app-articles",3),u.TgZ(4,"app-paginate",4),u.NdJ("currentPage",function(a){return r.setCurrentArticlePage(a)}),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(3),u.Q6J("inputCurrentPage",r.currentArticlePage)("inputArticles",r.articles),u.xp6(1),u.Q6J("inputCurrentPage",r.currentArticlePage)("currentMaxPage",r.currentCountArticles))},directives:[q8,Y8,Q8],encapsulation:2}),n})();class YL{}class QL{}class ad{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(c):this.headers.set(a,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ad?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ad;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ad?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let c=this.headers.get(t);if(!c)return;c=c.filter(p=>-1===a.indexOf(p)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class X8{encodeKey(e){return JL(e)}encodeValue(e){return JL(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const t4=/%(\d[a-f0-9])/gi,n4={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function JL(n){return encodeURIComponent(n).replace(t4,(e,t)=>{var r;return null!==(r=n4[t])&&void 0!==r?r:e})}function XL(n){return`${n}`}class Xh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new X8,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function e4(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[c,p]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],_=t.get(c)||[];_.push(p),t.set(c,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Xh({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(XL(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(XL(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class r4{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function e2(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function t2(n){return"undefined"!=typeof Blob&&n instanceof Blob}function n2(n){return"undefined"!=typeof FormData&&n instanceof FormData}class BE{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function i4(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new ad),this.context||(this.context=new r4),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+c}}else this.params=new Xh,this.urlWithParams=t}serializeBody(){return null===this.body?null:e2(this.body)||t2(this.body)||n2(this.body)||function s4(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Xh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||n2(this.body)?null:t2(this.body)?this.body.type||null:e2(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Xh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,a=e.responseType||this.responseType,c=void 0!==e.body?e.body:this.body,p=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,_=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let E=e.headers||this.headers,T=e.params||this.params;const S=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(E=Object.keys(e.setHeaders).reduce((N,U)=>N.set(U,e.setHeaders[U]),E)),e.setParams&&(T=Object.keys(e.setParams).reduce((N,U)=>N.set(U,e.setParams[U]),T)),new BE(r,i,c,{params:T,headers:E,context:S,reportProgress:_,responseType:a,withCredentials:p})}}var ii=(()=>((ii=ii||{})[ii.Sent=0]="Sent",ii[ii.UploadProgress=1]="UploadProgress",ii[ii.ResponseHeader=2]="ResponseHeader",ii[ii.DownloadProgress=3]="DownloadProgress",ii[ii.Response=4]="Response",ii[ii.User=5]="User",ii))();class ER{constructor(e,t=200,r="OK"){this.headers=e.headers||new ad,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class bR extends ER{constructor(e={}){super(e),this.type=ii.ResponseHeader}clone(e={}){return new bR({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class AD extends ER{constructor(e={}){super(e),this.type=ii.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new AD({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class r2 extends ER{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function CR(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let i2=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof BE)a=t;else{let _,E;_=i.headers instanceof ad?i.headers:new ad(i.headers),i.params&&(E=i.params instanceof Xh?i.params:new Xh({fromObject:i.params})),a=new BE(t,r,void 0!==i.body?i.body:null,{headers:_,context:i.context,params:E,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=ft(a).pipe(cs(_=>this.handler.handle(_)));if(t instanceof BE||"events"===i.observe)return c;const p=c.pipe(ci(_=>_ instanceof AD));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return p.pipe((0,at.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return p.pipe((0,at.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return p.pipe((0,at.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return p.pipe((0,at.U)(_=>_.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Xh).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,CR(i,r))}post(t,r,i={}){return this.request("POST",t,CR(i,r))}put(t,r,i={}){return this.request("PUT",t,CR(i,r))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(YL))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class s2{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const o2=new u.OlP("HTTP_INTERCEPTORS");let o4=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const a4=/^\)\]\}',?\n/;let a2=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new tr.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((U,Z)=>i.setRequestHeader(U,Z.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const U=t.detectContentTypeHeader();null!==U&&i.setRequestHeader("Content-Type",U)}if(t.responseType){const U=t.responseType.toLowerCase();i.responseType="json"!==U?U:"text"}const a=t.serializeBody();let c=null;const p=()=>{if(null!==c)return c;const U=1223===i.status?204:i.status,Z=i.statusText||"OK",ue=new ad(i.getAllResponseHeaders()),be=function l4(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return c=new bR({headers:ue,status:U,statusText:Z,url:be}),c},_=()=>{let{headers:U,status:Z,statusText:ue,url:be}=p(),Ke=null;204!==Z&&(Ke=void 0===i.response?i.responseText:i.response),0===Z&&(Z=Ke?200:0);let qe=Z>=200&&Z<300;if("json"===t.responseType&&"string"==typeof Ke){const ct=Ke;Ke=Ke.replace(a4,"");try{Ke=""!==Ke?JSON.parse(Ke):null}catch(ze){Ke=ct,qe&&(qe=!1,Ke={error:ze,text:Ke})}}qe?(r.next(new AD({body:Ke,headers:U,status:Z,statusText:ue,url:be||void 0})),r.complete()):r.error(new r2({error:Ke,headers:U,status:Z,statusText:ue,url:be||void 0}))},E=U=>{const{url:Z}=p(),ue=new r2({error:U,status:i.status||0,statusText:i.statusText||"Unknown Error",url:Z||void 0});r.error(ue)};let T=!1;const S=U=>{T||(r.next(p()),T=!0);let Z={type:ii.DownloadProgress,loaded:U.loaded};U.lengthComputable&&(Z.total=U.total),"text"===t.responseType&&!!i.responseText&&(Z.partialText=i.responseText),r.next(Z)},N=U=>{let Z={type:ii.UploadProgress,loaded:U.loaded};U.lengthComputable&&(Z.total=U.total),r.next(Z)};return i.addEventListener("load",_),i.addEventListener("error",E),i.addEventListener("timeout",E),i.addEventListener("abort",E),t.reportProgress&&(i.addEventListener("progress",S),null!==a&&i.upload&&i.upload.addEventListener("progress",N)),i.send(a),r.next({type:ii.Sent}),()=>{i.removeEventListener("error",E),i.removeEventListener("abort",E),i.removeEventListener("load",_),i.removeEventListener("timeout",E),t.reportProgress&&(i.removeEventListener("progress",S),null!==a&&i.upload&&i.upload.removeEventListener("progress",N)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ao))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const IR=new u.OlP("XSRF_COOKIE_NAME"),TR=new u.OlP("XSRF_HEADER_NAME");class l2{}let u4=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Tt(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe),u.LFG(u.Lbi),u.LFG(IR))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),DR=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(l2),u.LFG(TR))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),c4=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(o2,[]);this.chain=r.reduceRight((i,a)=>new s2(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(QL),u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),d4=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:DR,useClass:o4}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:IR,useValue:t.cookieName}:[],t.headerName?{provide:TR,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[DR,{provide:o2,useExisting:DR,multi:!0},{provide:l2,useClass:u4},{provide:IR,useValue:"XSRF-TOKEN"},{provide:TR,useValue:"X-XSRF-TOKEN"}]}),n})(),h4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[i2,{provide:YL,useClass:c4},a2,{provide:QL,useExisting:a2}],imports:[[d4.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),u2=(()=>{class n{constructor(t){this.httpCLient=t,this.aliasMailThis="https://mailthis.to/lchop"}postMessageContact(t){return this.httpCLient.post(this.aliasMailThis,t,{responseType:"text"}).pipe((0,at.U)(r=>r,r=>r))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(i2))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function f4(n,e){1&n&&(u.TgZ(0,"label",38),u._uU(1," Nom *"),u.qZA())}function p4(n,e){1&n&&(u.TgZ(0,"label",39),u._uU(1," Nom *"),u.qZA())}function g4(n,e){1&n&&(u.TgZ(0,"label",40),u._uU(1," Mail *"),u.qZA())}function m4(n,e){1&n&&(u.TgZ(0,"label",41),u._uU(1," Mail *"),u.qZA())}function _4(n,e){1&n&&(u.TgZ(0,"label",42),u._uU(1," Entreprise *"),u.qZA())}function y4(n,e){1&n&&(u.TgZ(0,"label",43),u._uU(1," Entreprise *"),u.qZA())}function v4(n,e){1&n&&(u.TgZ(0,"label",44),u._uU(1," Message *"),u.qZA())}function w4(n,e){1&n&&(u.TgZ(0,"label",45),u._uU(1," Message *"),u.qZA())}function E4(n,e){if(1&n&&(u.TgZ(0,"button",46),u.TgZ(1,"span",47),u._uU(2," Envoyez"),u.qZA(),u.TgZ(3,"span",48),u.O4$(),u.TgZ(4,"svg",49),u._UZ(5,"rect",5),u._UZ(6,"path",50),u._UZ(7,"path",51),u._UZ(8,"path",52),u._UZ(9,"line",53),u._UZ(10,"path",54),u.qZA(),u.qZA(),u.qZA()),2&n){const t=u.oxw(),r=u.MAs(13);u.Q6J("disabled",r.invalid||t.waitResponse||t.isDisabled)}}function b4(n,e){1&n&&(u.TgZ(0,"div",55),u.O4$(),u.TgZ(1,"svg",56),u._UZ(2,"path",57),u._UZ(3,"path",58),u.qZA(),u.qZA())}function C4(n,e){1&n&&(u.TgZ(0,"div",59),u._uU(1," * Veuillez compl\xe8ter votre nom "),u.qZA())}function I4(n,e){1&n&&(u.TgZ(0,"div",59),u._uU(1," * Veuillez utiliser un email valide "),u.qZA())}function T4(n,e){1&n&&(u.TgZ(0,"div",59),u._uU(1," * Veuillez compl\xe8ter votre message "),u.qZA())}function D4(n,e){1&n&&(u.TgZ(0,"div",59),u._uU(1," * Veuillez compl\xe8ter votre entreprise "),u.qZA())}let A4=(()=>{class n{constructor(t){this.contact=t,this.company="",this.email="",this.name="",this.message="",this.waitResponse=!1,this.isDisabled=!0,this.correctMail=!0,this.correctName=!0,this.correctCompany=!0,this.correctMessage=!0}ngOnInit(){}onKeyUp(t){this.checkInput(t)}checkInput(t){switch(t){case"name":this.correctName=!!/^[a-zA-Z_ -]{2,}$/.test(this.name);break;case"email":this.correctMail=!!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email);break;case"company":this.correctCompany=!!/^[\w_ -]{2,}$/.test(this.company);break;case"message":this.correctMessage=this.message.length>=2}return this.correctMessage&&this.correctCompany&&this.correctName&&this.correctMail?(this.isDisabled=!1,!0):(this.isDisabled=!0,!1)}onSubmit(t){this.checkInput("email")&&this.checkInput("name")&&this.checkInput("company")&&this.checkInput("message")&&(this.waitResponse=!0,this.contact.postMessageContact(t.value).subscribe(r=>{location.href="https://mailthis.to/confirm",this.waitResponse=!1},r=>{console.log({error:r})}))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u2))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-contact-page"]],decls:48,vars:18,consts:[[1,"container","min-h-screen","max-w-full","bg-primary-50"],[1,"flex","items-center","justify-center","min-h-screen"],[1,"bg-primary-50","border-dashed","border-primary-700","border-2","rounded-xl","py-8","px-12","shadow-xl","md:m-4","m-6"],[1,"md:text-3xl","mb-6","text-xl","font-bold","leading-snug","text-center","text-primary-700","inline-flex","justify-center","items-center"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","#911011","viewBox","0 0 256 256",1,"ml-8"],["width","256","height","256","fill","none"],["points","224 96 145.5 152 110.5 152 32 96 128 32 224 96","opacity","0.2"],["d","M32,96V200a8,8,0,0,0,8,8H216a8,8,0,0,0,8-8V96L128,32Z","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","110.5","y1","152","x2","34.5","y2","205.7","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","221.5","y1","205.7","x2","145.5","y2","152","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["points","224 96 145.5 152 110.5 152 32 96","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[3,"ngSubmit"],["formContact","ngForm"],[1,"md:flex","items-center"],[1,"md:w-72","flex","flex-col"],["for","name","class","text-base font-semibold leading-none text-primary-800",4,"ngIf","ngIfElse"],["wrongName",""],["name","name","id","name","type","text","maxlength","25","minlength","2","placeholder","Compl\xe9ter votre nom","arial-label","name","required","",1,"focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","mt-4","bg-white","rounded","placeholder-primary-100",3,"ngModel","keyup","ngModelChange"],["prmName","ngModel"],[1,"md:w-72","flex","flex-col","md:ml-6","md:mt-0","mt-4"],["for","mail","class","text-base font-semibold leading-none text-primary-800",4,"ngIf","ngIfElse"],["wrongMail",""],["name","email","id","email","type","email","minlength","5","maxlength","100","placeholder","Compl\xe9ter votre email","arial-label","email","required","","email","",1,"focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","mt-4","bg-white","rounded","placeholder-primary-100",3,"ngModel","keyup","ngModelChange"],["prmEmail","ngModel"],[1,"md:flex","items-center","mt-8"],["for","company","class","text-base font-semibold leading-none text-primary-800",4,"ngIf","ngIfElse"],["wrongCompany",""],["name","company","id","company","type","text","minlength","2","maxlength","100","placeholder","Nom de votre entreprise","arial-label","company","required","",1,"focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","mt-4","bg-white","rounded","placeholder-primary-100",3,"ngModel","keyup","ngModelChange"],["prmCompany","ngModel"],[1,"w-full","flex","flex-col","mt-8"],["for","prmMessage","class","text-base font-semibold leading-none text-primary-800",4,"ngIf","ngIfElse"],["wrongMessage",""],["name","message","required","","id","message","type","text","minlength","2","maxlength","500","placeholder","Entrer votre message","aria-label","Message",1,"outline-none","h-36","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","mt-4","rounded","focus:ring-2","focus:ring-primary-700","border-primary-200","placeholder-primary-100","resize-none","bg-white",3,"ngModel","keyup","ngModelChange"],["prmMessage","ngModel"],[1,"flex","items-center","justify-center","w-full","mt-12"],["type","submit","class","relative py-4 px-6 disabled:bg-primary-100 disabled:hover:bg-primary-100 bg-secondary-600 hover:bg-secondary-500 rounded-lg leading-none flex items-center text divide-x divide-secondary-50",3,"disabled",4,"ngIf"],["class","mr-4",4,"ngIf"],["class","text-base font-thin text-primary-800 leading-none mt-8",4,"ngIf"],["for","name",1,"text-base","font-semibold","leading-none","text-primary-800"],["for","name",1,"text-base","leading-none","text-red-500","font-extrabold","italic"],["for","mail",1,"text-base","font-semibold","leading-none","text-primary-800"],["for","mail",1,"text-base","leading-none","text-red-500","font-extrabold"],["for","company",1,"text-base","font-semibold","leading-none","text-primary-800"],["for","company",1,"text-base","leading-none","text-red-500","font-extrabold","italic"],["for","prmMessage",1,"text-base","font-semibold","leading-none","text-primary-800"],["for","message",1,"text-base","leading-none","text-red-500","font-extrabold","italic"],["type","submit",1,"relative","py-4","px-6","disabled:bg-primary-100","disabled:hover:bg-primary-100","bg-secondary-600","hover:bg-secondary-500","rounded-lg","leading-none","flex","items-center","text","divide-x","divide-secondary-50",3,"disabled"],[1,"text-secondary-50","pr-6","font-sans","transition","duration-200"],[1,"flex","items-center","space-x-5","pl-6","animate-tilt"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","#fafafa","viewBox","0 0 256 256"],["d","M88,134.9,224.1,36.6h0a7.8,7.8,0,0,0-6.2-.2L33.3,108.9c-7.4,2.9-6.4,13.7,1.4,15.3Z","opacity","0.2"],["d","M132.9,174.4l-31.2,31.2A8,8,0,0,1,88,200V134.9Z","opacity","0.2"],["d","M88,134.9,177.9,214a8,8,0,0,0,13.1-4.2L228.6,45.6a8,8,0,0,0-10.7-9.2L33.3,108.9c-7.4,2.9-6.4,13.7,1.4,15.3Z","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","88","y1","134.9","x2","224.1","y2","36.6","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M132.9,174.4l-31.2,31.2A8,8,0,0,1,88,200V134.9","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"mr-4"],["role","status","viewBox","0 0 100 101","fill","none","xmlns","http://www.w3.org/2000/svg",1,"w-8","h-8","mr-2","text-primary-100","animate-spin","fill-primary-800"],["d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z","fill","currentColor"],["d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z","fill","currentFill"],[1,"text-base","font-thin","text-primary-800","leading-none","mt-8"]],template:function(t,r){if(1&t){const i=u.EpF();u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"p",3),u._uU(4," Envie de travailler avec nous "),u.O4$(),u.TgZ(5,"svg",4),u._UZ(6,"rect",5),u._UZ(7,"polygon",6),u._UZ(8,"path",7),u._UZ(9,"line",8),u._UZ(10,"line",9),u._UZ(11,"polyline",10),u.qZA(),u.qZA(),u.kcU(),u.TgZ(12,"form",11,12),u.NdJ("ngSubmit",function(){u.CHM(i);const c=u.MAs(13);return r.onSubmit(c)}),u.TgZ(14,"div",13),u.TgZ(15,"div",14),u.YNc(16,f4,2,0,"label",15),u.YNc(17,p4,2,0,"ng-template",null,16,u.W1O),u.TgZ(19,"input",17,18),u.NdJ("keyup",function(){return r.onKeyUp("name")})("ngModelChange",function(c){return r.name=c}),u.qZA(),u.qZA(),u.TgZ(21,"div",19),u.YNc(22,g4,2,0,"label",20),u.YNc(23,m4,2,0,"ng-template",null,21,u.W1O),u.TgZ(25,"input",22,23),u.NdJ("keyup",function(){return r.onKeyUp("email")})("ngModelChange",function(c){return r.email=c}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(27,"div",24),u.TgZ(28,"div",14),u.YNc(29,_4,2,0,"label",25),u.YNc(30,y4,2,0,"ng-template",null,26,u.W1O),u.TgZ(32,"input",27,28),u.NdJ("keyup",function(){return r.onKeyUp("company")})("ngModelChange",function(c){return r.company=c}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(34,"div"),u.TgZ(35,"div",29),u.YNc(36,v4,2,0,"label",30),u.YNc(37,w4,2,0,"ng-template",null,31,u.W1O),u.TgZ(39,"textarea",32,33),u.NdJ("keyup",function(){return r.onKeyUp("message")})("ngModelChange",function(c){return r.message=c}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(41,"div",34),u.YNc(42,E4,11,1,"button",35),u.YNc(43,b4,4,0,"div",36),u.qZA(),u.YNc(44,C4,2,0,"div",37),u.YNc(45,I4,2,0,"div",37),u.YNc(46,T4,2,0,"div",37),u.YNc(47,D4,2,0,"div",37),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&t){const i=u.MAs(18),a=u.MAs(20),c=u.MAs(24),p=u.MAs(26),_=u.MAs(31),E=u.MAs(33),T=u.MAs(38),S=u.MAs(40);u.xp6(16),u.Q6J("ngIf",r.correctName)("ngIfElse",i),u.xp6(3),u.Q6J("ngModel",r.name),u.xp6(3),u.Q6J("ngIf",r.correctMail)("ngIfElse",c),u.xp6(3),u.Q6J("ngModel",r.email),u.xp6(4),u.Q6J("ngIf",r.correctCompany)("ngIfElse",_),u.xp6(3),u.Q6J("ngModel",r.company),u.xp6(4),u.Q6J("ngIf",r.correctMessage)("ngIfElse",T),u.xp6(3),u.Q6J("ngModel",r.message),u.xp6(3),u.Q6J("ngIf",!r.waitResponse),u.xp6(1),u.Q6J("ngIf",r.waitResponse),u.xp6(1),u.Q6J("ngIf",(null==a.errors?null:a.errors.minlength)&&a.touched),u.xp6(1),u.Q6J("ngIf",(null==p.errors?null:p.errors.email)&&p.touched),u.xp6(1),u.Q6J("ngIf",(null==S.errors?null:S.errors.minlength)&&S.touched),u.xp6(1),u.Q6J("ngIf",(null==E.errors?null:E.errors.minlength)&&E.touched)}},directives:[PE,SE,Sg,Gr,fy,vD,lR,OE,uD,NE,aR],encapsulation:2}),n})();function S4(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",12),u.TgZ(1,"div",13),u._UZ(2,"input",14),u.TgZ(3,"header",15),u.TgZ(4,"span",16),u._uU(5),u.qZA(),u.TgZ(6,"div",17),u.O4$(),u.TgZ(7,"svg",18),u._UZ(8,"polyline",19),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(9,"div",20),u.TgZ(10,"div",21),u.TgZ(11,"p"),u._uU(12),u.qZA(),u.TgZ(13,"button",22),u.NdJ("click",function(){const a=u.CHM(t).$implicit;return u.oxw().onDeleteArticleClick(a)}),u._uU(14," Supprimer "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=e.$implicit;u.xp6(5),u.hij(" ",t.title," "),u.xp6(7),u.Oqu(t.description)}}let x4=(()=>{class n{constructor(t){this.articleService=t,this.articles$=this.articleService.getArticles()}ngOnInit(){}onDeleteArticleClick(t){this.articleService.deleteArticle(t),this.articles$=this.articleService.getArticles()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(hy))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-delete-article"]],decls:15,vars:3,consts:[[1,"container","max-w-full","max-h-full","bg-primary-300"],[1,"bg-primary-50","py-8","px-4","flex","flex-col","min-w-screen","min-h-screen","items-center","justify-center"],[1,"container","max-w-xl","place-content-center"],[1,"text-primary-700","text-2xl","font-bold","mb-8"],[1,"shadow","row"],[1,"tabs"],["class","border-b tab",4,"ngFor","ngForOf"],["routerLink","/login",1,"underline","text-primary-500","hover:text-primary-600","inline-flex","items-center","justify-center","mt-4"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","fill","#ba2525","viewBox","0 0 256 256",1,"mr-1"],["width","256","height","256","fill","none"],["x1","216","y1","128","x2","40","y2","128","fill","none","stroke","#ba2525","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["points","112 56 40 128 112 200","fill","none","stroke","#ba2525","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"border-b","tab"],[1,"border-l-2","border-transparent","relative"],["type","checkbox","id","chck1",1,"w-full","absolute","z-10","cursor-pointer","opacity-0","h-5","top-6"],["for","chck1",1,"flex","justify-between","items-center","p-5","pl-8","pr-8","cursor-pointer","select-none","tab-label"],[1,"text-neutral-800","font-thin","text-xl"],[1,"rounded-full","border","border-neutral-300","w-7","h-7","flex","items-center","justify-center","test"],["aria-hidden","true","data-reactid","266","fill","none","height","24","stroke","#606F7B","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewbox","0 0 24 24","width","24","xmlns","http://www.w3.org/2000/svg",1,""],["points","6 9 12 15 18 9"],[1,"tab-content"],[1,"flex","justify-between","items-center","pl-8","pr-8","pb-5","text-neutral-800"],[1,"bg-primary-500","hover:bg-primary-600","text-white","font-thin","py-2","px-4","rounded-xl","ml-4",3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"h1",3),u._uU(4," Veuillez selectionner l'article \xe0 supprimer. "),u.qZA(),u.TgZ(5,"section",4),u.TgZ(6,"div",5),u.YNc(7,S4,15,2,"div",6),u.ALo(8,"async"),u.qZA(),u.qZA(),u.TgZ(9,"a",7),u.O4$(),u.TgZ(10,"svg",8),u._UZ(11,"rect",9),u._UZ(12,"line",10),u._UZ(13,"polyline",11),u.qZA(),u._uU(14," Back "),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(7),u.Q6J("ngForOf",u.lcZ(8,1,r.articles$)))},directives:[Cs,f],pipes:[ca],styles:[".tab[_ngcontent-%COMP%]{overflow:hidden}.tab-content[_ngcontent-%COMP%]{max-height:0;transition:all .5s}input[_ngcontent-%COMP%]:checked + .tab-label[_ngcontent-%COMP%]   .test[_ngcontent-%COMP%]{background-color:#000}input[_ngcontent-%COMP%]:checked + .tab-label[_ngcontent-%COMP%]   .test[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:rotate(180deg);stroke:#fff}input[_ngcontent-%COMP%]:checked + .tab-label[_ngcontent-%COMP%]:after{transform:rotate(90deg)}input[_ngcontent-%COMP%]:checked ~ .tab-content[_ngcontent-%COMP%]{max-height:100vh}"]}),n})();function k4(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",5),u.TgZ(1,"p",6),u._uU(2," Login "),u.O4$(),u.TgZ(3,"svg",7),u._UZ(4,"rect",8),u._UZ(5,"polyline",9),u._UZ(6,"line",10),u._UZ(7,"path",11),u.qZA(),u.qZA(),u.kcU(),u.TgZ(8,"form",12,13),u.NdJ("ngSubmit",function(){u.CHM(t);const i=u.MAs(9);return u.oxw().onSubmit(i)}),u.TgZ(10,"div",14),u.TgZ(11,"label",15),u._uU(12," Username "),u.qZA(),u.TgZ(13,"input",16),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().username=i}),u.qZA(),u.qZA(),u.TgZ(14,"div",17),u.TgZ(15,"label",18),u._uU(16," Password "),u.qZA(),u.TgZ(17,"input",19),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().password=i}),u.qZA(),u.qZA(),u.TgZ(18,"div",20),u.TgZ(19,"button",21),u._uU(20," Log In "),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=u.MAs(9),r=u.oxw();u.xp6(13),u.Q6J("ngModel",r.username),u.xp6(4),u.Q6J("ngModel",r.password),u.xp6(2),u.Q6J("disabled",t.invalid)}}function R4(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",22),u.TgZ(1,"p",6),u._uU(2),u.ALo(3,"async"),u.O4$(),u.TgZ(4,"svg",7),u._UZ(5,"rect",8),u._UZ(6,"circle",23),u._UZ(7,"circle",24),u._UZ(8,"path",25),u.qZA(),u.qZA(),u.kcU(),u.TgZ(9,"div",26),u.TgZ(10,"button",27),u.TgZ(11,"span",28),u._uU(12," Ajouter un article"),u.qZA(),u.TgZ(13,"span",29),u.O4$(),u.TgZ(14,"svg",30),u._UZ(15,"rect",8),u._UZ(16,"polygon",31),u._UZ(17,"path",32),u._UZ(18,"polyline",33),u._UZ(19,"line",34),u._UZ(20,"line",35),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(21,"button",36),u.TgZ(22,"span",28),u._uU(23," Supprimer un article"),u.qZA(),u.TgZ(24,"span",29),u.O4$(),u.TgZ(25,"svg",30),u._UZ(26,"rect",8),u._UZ(27,"path",37),u._UZ(28,"line",38),u._UZ(29,"line",39),u._UZ(30,"line",40),u._UZ(31,"path",41),u._UZ(32,"path",42),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(33,"a",43),u.NdJ("click",function(){return u.CHM(t),u.oxw().onLogout()}),u.TgZ(34,"p",44),u._uU(35," Log Out "),u.qZA(),u.qZA()}if(2&n){const t=u.oxw();let r;u.xp6(2),u.hij(" ",null==(r=u.lcZ(3,1,t.user$))?null:r.email.split("@")[0]," ")}}let M4=(()=>{class n{constructor(t){this.auth=t,this.username="",this.password="",this.loginSucess$=this.auth.isLogIn$,this.user$=this.auth.user$}onSubmit(t){this.auth.signIn(t.value.username,t.value.password),this.username="",this.password=""}onLogout(){this.auth.signOut()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(DE))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-login-page"]],decls:7,vars:4,consts:[[1,"container","max-w-full","max-h-full","bg-primary-50"],[1,"bg-primary-50","flex","flex-col","min-w-screen","min-h-screen","items-center","justify-center"],[1,"flex","flex-col","items-center","justify-center","px-4"],["class","bg-primary-50 border-dashed border-primary-700 border-2 rounded-xl py-12 lg:px-28 px-20 shadow-xl",4,"ngIf","ngIfElse"],["logIn",""],[1,"bg-primary-50","border-dashed","border-primary-700","border-2","rounded-xl","py-12","lg:px-28","px-20","shadow-xl"],[1,"md:text-3xl","text-xl","font-bold","leading-7","text-center","text-primary-700","inline-flex","justify-center","items-center"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","#911011","viewBox","0 0 256 256",1,"ml-8"],["width","256","height","256","fill","none"],["points","94 170 136 128 94 86","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","24","y1","128","x2","136","y2","128","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M136,40h56a8,8,0,0,1,8,8V208a8,8,0,0,1-8,8H136","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[3,"ngSubmit"],["formSearch","ngForm"],[1,"mb-8","mt-12"],["for","username",1,"w-24","text-primary-700","text-sm","font-bold","mb-4"],["name","username","id","username","type","text","placeholder","Username","aria-label","Username",1,"w-full","focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","bg-white","rounded","placeholder-primary-100",3,"ngModel","ngModelChange"],[1,"mb-4"],["for","password",1,"text-primary-700","text-sm","font-bold","mb-2"],["name","password","id","password","type","password","placeholder","******************","aria-label","Password",1,"w-full","focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","bg-white","rounded","placeholder-primary-100",3,"ngModel","ngModelChange"],[1,"flex","items-center","justify-center","mt-8"],["type","submit",1,"bg-primary-500","hover:bg-primary-600","text-white","font-thin","py-2","px-4","rounded-xl",3,"disabled"],[1,"bg-primary-50","border-dashed","border-primary-700","border-2","rounded-xl","py-12","lg:px-28","px-8","shadow-xl"],["cx","128","cy","96","r","64","opacity","0.2"],["cx","128","cy","96","r","64","fill","none","stroke","#911011","stroke-miterlimit","10","stroke-width","16"],["d","M31,216a112,112,0,0,1,194,0","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"md:flex","block","items-center","justify-between","mt-12"],["routerLink","/add-article",1,"w-52","md:mb-0","mb-4","mr-8","relative","py-4","px-6","bg-secondary-600","hover:bg-secondary-500","rounded-lg","leading-none","flex","items-center","text","divide-x","divide-secondary-50"],[1,"text-secondary-50","pr-6","font-sans","transition","duration-200"],[1,"flex","items-center","space-x-5","pl-6"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","#fafafa","viewBox","0 0 256 256"],["points","152 32 152 88 208 88 152 32","opacity","0.2"],["d","M200,224H56a8,8,0,0,1-8-8V40a8,8,0,0,1,8-8h96l56,56V216A8,8,0,0,1,200,224Z","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["points","152 32 152 88 208 88","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","104","y1","152","x2","152","y2","152","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","128","y1","128","x2","128","y2","176","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["routerLink","/delete-article",1,"w-52","relative","py-4","px-6","bg-secondary-600","hover:bg-secondary-500","rounded-lg","leading-none","flex","items-center","text","divide-x","divide-secondary-50"],["d","M200,56V208a8,8,0,0,1-8,8H64a8,8,0,0,1-8-8V56Z","opacity","0.2"],["x1","216","y1","56","x2","40","y2","56","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","104","y1","104","x2","104","y2","168","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","152","y1","104","x2","152","y2","168","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M200,56V208a8,8,0,0,1-8,8H64a8,8,0,0,1-8-8V56","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M168,56V40a16,16,0,0,0-16-16H104A16,16,0,0,0,88,40V56","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"text-primary-500","hover:text-primary-400","font-thin","underline","cursor-pointer",3,"click"],[1,"text-center","mt-4"]],template:function(t,r){if(1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.YNc(3,k4,21,3,"div",3),u.ALo(4,"async"),u.YNc(5,R4,36,3,"ng-template",null,4,u.W1O),u.qZA(),u.qZA(),u.qZA()),2&t){const i=u.MAs(6);u.xp6(3),u.Q6J("ngIf",!u.lcZ(4,2,r.loginSucess$))("ngIfElse",i)}},directives:[Gr,PE,SE,Sg,fy,uD,NE,y],pipes:[ca],encapsulation:2}),n})();class N4{}let c2=(()=>{class n{constructor(t){this.articleService=t,this.lastArticle=new N4,this.slides=[{src:"/assets/images/greenMag.jpeg"},{src:"/assets/images/guyaMag.png"},{src:"/assets/images/Elle.png"},{src:"/assets/images/ewag.webp"},{src:"/assets/images/resto-avenue.png"},{src:"/assets/images/shopping-fr.png"}]}ngOnInit(){this.articleService.getLastArticle().subscribe(t=>{this.lastArticle=t})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(hy))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-main-page"]],decls:112,vars:0,consts:[[1,"container","min-w-full"],[1,"md:inline-flex","block","min-w-full","min-h-screen","bg-primary-50"],[1,"bg-primary-50","md:w-3/5","w-full","px-12"],[1,"flex","flex-col","justify-between","items-start","md:py-12"],[1,"text-7xl","font-title","font-extrabold","text-primary-700","leading-snug","md:mt-0","mt-12"],["routerLink","/sachem"],[1,"inline-flex","justify-center","items-center","relative"],[1,"md:text-center","text-4xl","font-sans","font-bold","text-primary-400","leading-snug"],["xmlns","http://www.w3.org/2000/svg","width","72","height","72","fill","#911011","viewBox","0 0 256 256",1,"absolute","bottom-8","-right-12","md:-top-8","md:-right-20"],["d","M78,201.3,45.1,228.9A8,8,0,0,1,32,222.8V64a8,8,0,0,1,8-8H216a8,8,0,0,1,8,8V192a8,8,0,0,1-8,8H81.7Z","opacity","0.2"],["d","M77.4,201.9l-32.3,27A8,8,0,0,1,32,222.8V64a8,8,0,0,1,8-8H216a8,8,0,0,1,8,8V192a8,8,0,0,1-8,8H82.5A7.8,7.8,0,0,0,77.4,201.9Z","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"inline-flex","typewriter","my-4"],[1,"text-2xl","text-left","font-sans","font-semibold","text-primary-400","leading-snug","pr-2"],[1,"text-2xl","text-left","font-sans","font-medium","text-primary-300","leading-snug"],["target","_blank","href","https://fr.wikipedia.org/wiki/Torreilles",1,"text-secondary-600","font-sans","font-medium"],["href","/articles"],[1,"flex","items-center","justify-center"],["routerLink","/contact",1,"my-16","py-6","px-8","bg-secondary-600","hover:bg-secondary-500","rounded-lg","leading-none","flex","items-center","text","divide-x","divide-secondary-50","text-xl","shadow-md"],[1,"text-secondary-50","pr-6","font-sans","transition","duration-200"],[1,"flex","items-center","space-x-5","pl-6","animate-tilt"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","#fafafa","viewBox","0 0 256 256"],["d","M192,120,136,64l26.3-26.3a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4Z","opacity","0.2"],["d","M96,216H48a8,8,0,0,1-8-8V163.3a7.9,7.9,0,0,1,2.3-5.6l120-120a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4Z","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","136","y1","64","x2","192","y2","120","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["points","216 216 96 216 40.5 160.5","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","164","y1","92","x2","68","y2","188","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"block","mb-4","md:mb-0"],[1,"inline-flex"],["href","https://www.facebook.com/Sachem.pro/?pnref=lhc","target","_blank",1,"mr-6"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","#911011","viewBox","0 0 256 256"],["cx","128","cy","128","r","96","opacity","0.2"],["cx","128","cy","128","r","96","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M168,88H152a23.9,23.9,0,0,0-24,24V224","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","96","y1","144","x2","160","y2","144","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["href","https://www.linkedin.com/in/sandrine-chopot-90831b162/","target","_blank",1,"mr-6"],["x","36","y","36","width","184","height","184","rx","8","opacity","0.2"],["x","36","y","36","width","184","height","184","rx","8","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","120","y1","112","x2","120","y2","176","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","88","y1","112","x2","88","y2","176","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M120,140a28,28,0,0,1,56,0v36","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["cx","88","cy","80","r","12"],[1,"bg-primary-700","md:w-2/5","w-full","border-t-4","md:border-t-0","md:border-l-4","border-secondary-500","px-12","pb-12"],[1,"flex","flex-col","items-center","justify-center","mt-12"],["src","assets/images/portrait.jpeg","alt","greenmag",1,"mt-4","md:mt-0","w-36","rounded-full","shadow-md"],[1,"flex","py-4"],[1,"flex","items-start","justify-start","mr-4"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","fill","#fafafa","viewBox","0 0 256 256"],["d","M108,144H40a8,8,0,0,1-8-8V72a8,8,0,0,1,8-8h60a8,8,0,0,1,8,8Z","opacity","0.2"],["d","M224,144H156a8,8,0,0,1-8-8V72a8,8,0,0,1,8-8h60a8,8,0,0,1,8,8Z","opacity","0.2"],["d","M108,144H40a8,8,0,0,1-8-8V72a8,8,0,0,1,8-8h60a8,8,0,0,1,8,8v88a40,40,0,0,1-40,40","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M224,144H156a8,8,0,0,1-8-8V72a8,8,0,0,1,8-8h60a8,8,0,0,1,8,8v88a40,40,0,0,1-40,40","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"text-left","text-lg","font-sans","font-medium","text-primary-100","leading-snug"],[1,"flex","items-end","justify-end","ml-4"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","fill","#fafafa","viewBox","0 0 256 256",1,""],[1,"mr-4","text-2xl","font-sans","font-semibold","text-primary-50","leading-snug"],["href","https://www.linkedin.com/in/sandrine-chopot-90831b162/","target","_blank",1,"inline-flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","width","36","height","36","fill","#fafafa","viewBox","0 0 256 256",1,"mr-2"],["x","36","y","36","width","184","height","184","rx","8","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","120","y1","112","x2","120","y2","176","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","88","y1","112","x2","88","y2","176","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M120,140a28,28,0,0,1,56,0v36","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"text-lg","font-sans","font-light","text-primary-100","leading-snug","text-center"],[1,"mt-12","flex","items-center","justify-center"],["href","/sachem",1,"inline-flex","justify-center","items-center","border-2","border-primary-50","border-dashed","px-8","py-4","rounded-full","hover:bg-primary-600","hover:border-solid"],[1,"w-64","text-2xl","text-center","font-sans","font-semibold","text-primary-50","leading-snug","pr-2"],["xmlns","http://www.w3.org/2000/svg","width","36","height","36","fill","#fafafa","viewBox","0 0 256 256",1,"hidden","md:block","w-8","h-8"],["cx","128","cy","128","r","96","fill","none","stroke","#fafafa","stroke-miterlimit","10","stroke-width","16"],["points","134.1 161.9 168 128 134.1 94.1","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","88","y1","128","x2","168","y2","128","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["href","/articles",1,"inline-flex","justify-center","items-center","border-2","border-primary-50","border-dashed","px-8","py-4","rounded-full","hover:bg-primary-600","hover:border-solid"],[1,"w-64","text-2xl","text-center","font-sans","font-semibold","text-primary-50","leading-snug","mr-2"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"div",3),u.TgZ(4,"h1",4),u.TgZ(5,"a",5),u._uU(6,"SaCh'M"),u.qZA(),u._UZ(7,"br"),u.qZA(),u.TgZ(8,"div",6),u.TgZ(9,"h2",7),u._uU(10," Agence de communication "),u._UZ(11,"br"),u.qZA(),u.O4$(),u.TgZ(12,"svg",8),u._UZ(13,"path",9),u._UZ(14,"path",10),u.qZA(),u.qZA(),u.kcU(),u.TgZ(15,"div",11),u.TgZ(16,"h2",12),u._uU(17," Sp\xe9cialis\xe9e dans la r\xe9daction de contenu "),u._UZ(18,"br"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(19,"h3",13),u._uU(20," 10 ann\xe9es d'exp\xe9rience, implant\xe9e \xe0 "),u.TgZ(21,"a",14),u._uU(22,"Torreilles (66)"),u.qZA(),u._uU(23,","),u._UZ(24,"br"),u.qZA(),u.TgZ(25,"h3",13),u._uU(26," plus de 500 "),u.TgZ(27,"a",15),u._uU(28,"articles"),u.qZA(),u._uU(29," publi\xe9s,"),u._UZ(30,"br"),u.qZA(),u.TgZ(31,"h3",13),u._uU(32," \xe0 travers la France metropolitaine et les Outre-Mer. "),u.qZA(),u.TgZ(33,"div",16),u.TgZ(34,"button",17),u.TgZ(35,"span",18),u._uU(36,"Contactez nous"),u.qZA(),u.TgZ(37,"span",19),u.O4$(),u.TgZ(38,"svg",20),u._UZ(39,"path",21),u._UZ(40,"path",22),u._UZ(41,"line",23),u._UZ(42,"polyline",24),u._UZ(43,"line",25),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(44,"div",26),u.TgZ(45,"div",27),u.TgZ(46,"a",28),u.O4$(),u.TgZ(47,"svg",29),u._UZ(48,"circle",30),u._UZ(49,"circle",31),u._UZ(50,"path",32),u._UZ(51,"line",33),u.qZA(),u.qZA(),u.kcU(),u.TgZ(52,"a",34),u.O4$(),u.TgZ(53,"svg",29),u._UZ(54,"rect",35),u._UZ(55,"rect",36),u._UZ(56,"line",37),u._UZ(57,"line",38),u._UZ(58,"path",39),u._UZ(59,"circle",40),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(60,"div",41),u.TgZ(61,"div",42),u._UZ(62,"img",43),u.TgZ(63,"div",44),u.TgZ(64,"div",45),u.O4$(),u.TgZ(65,"svg",46),u._UZ(66,"path",47),u._UZ(67,"path",48),u._UZ(68,"path",49),u._UZ(69,"path",50),u.qZA(),u.qZA(),u.kcU(),u.TgZ(70,"p",51),u._uU(71," Journaux nationaux ou r\xe9gionaux, formation en communication ou en r\xe9daction, web ou print."),u._UZ(72,"br"),u._uU(73," Nous sommes \xe0 votre disposition pour vous aider \xe0 cr\xe9er votre contenu. "),u.qZA(),u.TgZ(74,"div",52),u.O4$(),u.TgZ(75,"svg",53),u._UZ(76,"path",47),u._UZ(77,"path",48),u._UZ(78,"path",49),u._UZ(79,"path",50),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(80,"div"),u.TgZ(81,"h1",54),u.TgZ(82,"a",55),u.O4$(),u.TgZ(83,"svg",56),u._UZ(84,"rect",35),u._UZ(85,"rect",57),u._UZ(86,"line",58),u._UZ(87,"line",59),u._UZ(88,"path",60),u._UZ(89,"circle",40),u.qZA(),u._uU(90," Sandrine CHOPOT "),u.kcU(),u._UZ(91,"br"),u.qZA(),u.qZA(),u.TgZ(92,"h2",61),u._uU(93," Directrice de Sachem. "),u.qZA(),u.qZA(),u.qZA(),u.TgZ(94,"div",62),u.TgZ(95,"a",63),u.TgZ(96,"h3",64),u._uU(97," A propos de SaCh'M "),u.qZA(),u.O4$(),u.TgZ(98,"svg",65),u._UZ(99,"circle",30),u._UZ(100,"circle",66),u._UZ(101,"polyline",67),u._UZ(102,"line",68),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(103,"div",62),u.TgZ(104,"a",69),u.TgZ(105,"h3",70),u._uU(106," D\xe9couvrez nos derniers articles "),u.qZA(),u.O4$(),u.TgZ(107,"svg",65),u._UZ(108,"circle",30),u._UZ(109,"circle",66),u._UZ(110,"polyline",67),u._UZ(111,"line",68),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA())},directives:[f,y],styles:[".typewriter[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{overflow:hidden;border-right:.15em solid orange;animation:blink-caret .75s step-end infinite}@keyframes blink-caret{0%,to{border-color:transparent}50%{border-color:orange}}"]}),n})();const P4=[{path:"",component:c2},{path:"login",component:M4},{path:"sachem",component:AR},{path:"articles",component:J8},{path:"contact",component:A4},{path:"add-article",component:Z8},{path:"delete-article",component:x4},{path:"**",component:c2}];let O4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[yu.forRoot(P4)],yu]}),n})();function F4(n,e){1&n&&(u.TgZ(0,"li",20),u.TgZ(1,"a",21),u._uU(2,"Accueil"),u.qZA(),u.qZA())}function L4(n,e){1&n&&(u.TgZ(0,"li",20),u.TgZ(1,"a",22),u._uU(2,"Accueil"),u.qZA(),u.qZA())}function U4(n,e){1&n&&(u.TgZ(0,"li",20),u.TgZ(1,"a",23),u._uU(2,"SaCh'm"),u.qZA(),u.qZA())}function V4(n,e){1&n&&(u.TgZ(0,"li",20),u.TgZ(1,"a",24),u._uU(2,"SaCh'm"),u.qZA(),u.qZA())}function B4(n,e){1&n&&(u.TgZ(0,"li",20),u.TgZ(1,"a",25),u._uU(2,"Articles"),u.qZA(),u.qZA())}function j4(n,e){1&n&&(u.TgZ(0,"li",20),u.TgZ(1,"a",26),u._uU(2,"Articles"),u.qZA(),u.qZA())}function Z4(n,e){1&n&&(u.TgZ(0,"a",27),u.O4$(),u.TgZ(1,"svg",28),u._UZ(2,"rect",13),u._UZ(3,"circle",29),u._UZ(4,"circle",30),u._UZ(5,"path",31),u.qZA(),u.qZA())}function $4(n,e){1&n&&(u.TgZ(0,"li"),u.TgZ(1,"a",32),u.O4$(),u.TgZ(2,"svg",28),u._UZ(3,"rect",13),u._UZ(4,"circle",29),u._UZ(5,"circle",30),u._UZ(6,"path",31),u.qZA(),u.qZA(),u.qZA())}let H4=(()=>{class n{constructor(t,r){this.auth=t,this.router=r,this.loggedIn=!1,this.mainClicked=!1,this.aboutClicked=!1,this.articlesClicked=!1,this.loginClicked=!1,this.auth.isLogIn$.subscribe(i=>{this.loggedIn=i})}ngOnInit(){this.router.events.pipe(ci(t=>t instanceof kn)).subscribe(t=>{switch(t.url){case"/":case"":this.mainClicked=!0,this.aboutClicked=!1,this.articlesClicked=!1,this.loginClicked=!1;break;case"/sachem":this.articlesClicked=!1,this.mainClicked=!1,this.aboutClicked=!0,this.loginClicked=!1;break;case"/articles":this.articlesClicked=!0,this.mainClicked=!1,this.aboutClicked=!1,this.loginClicked=!1;break;case"/login":this.loginClicked=!0,this.mainClicked=!1,this.aboutClicked=!1,this.articlesClicked=!1;break;default:this.mainClicked=!1,this.aboutClicked=!1,this.articlesClicked=!1,this.loginClicked=!1}})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(DE),u.Y36(pi))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-nav-bar"]],decls:28,vars:8,consts:[[1,"bg-secondary-600","px-8","py-2","min-w-full","h-20","md:h-16"],[1,"flex","items-center","justify-between","mt-0","text-sm","font-medium"],[1,"flex","justify-center","items-center"],["class","mr-2",4,"ngIf","ngIfElse"],["mainClickedElse",""],["aboutClickedElse",""],["articlesClickedElse",""],[1,"inline-flex","items-center","justify-center","ml-2"],[1,"mr-4"],["routerLink","/contact",1,"py-2","px-4","bg-primary-600","hover:bg-primary-500","rounded-lg","leading-none","flex","items-center","text","divide-x","divide-secondary-50","text-xl","shadow-md"],[1,"text-secondary-50","md:pr-6","text-sm","font-sans","transition","duration-200"],[1,"hidden","md:flex","items-center","space-x-5","pl-6","animate-tilt"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","#fafafa","viewBox","0 0 256 256",1,"hidden","md:block","w-8"],["width","256","height","256","fill","none"],["cx","128","cy","128","r","96","opacity","0.2"],["cx","128","cy","128","r","96","fill","none","stroke","#fafafa","stroke-miterlimit","10","stroke-width","16"],["points","134.1 161.9 168 128 134.1 94.1","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","88","y1","128","x2","168","y2","128","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["routerLink","/login","class","block text-md py-2 px-2 font-sans border-transparent text-primary-50 hover:text-primary-600 border-2 border-dashed hover:border-b-primary-600 bg-transparent",4,"ngIf","ngIfElse"],["loginClickedElse",""],[1,"mr-2"],["routerLink","/",1,"block","text-md","py-2","md:px-4","px-2","font-sans","border-transparent","text-primary-50","hover:text-primary-600","border-2","border-dashed","hover:border-b-primary-600","bg-transparent"],["routerLink","/",1,"block","text-md","py-2","md:px-4","px-2","font-sans","text-primary-600","border-2","rounded-lg","border-dashed","border-primary-600","bg-transparent"],["routerLink","/sachem",1,"block","text-md","py-2","md:px-4","px-2","font-sans","border-transparent","text-primary-50","hover:text-primary-600","border-2","border-dashed","hover:border-b-primary-600","bg-transparent"],["routerLink","/sachem",1,"block","text-md","py-2","md:px-4","px-2","font-sans","text-primary-600","border-2","rounded-lg","border-dashed","border-primary-600","bg-transparent"],["routerLink","/articles",1,"block","text-md","py-2","md:px-4","px-2","font-sans","border-transparent","text-primary-50","hover:text-primary-600","border-2","border-dashed","hover:border-b-primary-600","bg-transparent"],["routerLink","/articles",1,"block","text-md","py-2","md:px-4","px-2","font-sans","text-primary-600","border-2","rounded-lg","border-dashed","border-primary-600","bg-transparent"],["routerLink","/login",1,"block","text-md","py-2","px-2","font-sans","border-transparent","text-primary-50","hover:text-primary-600","border-2","border-dashed","hover:border-b-primary-600","bg-transparent"],["xmlns","http://www.w3.org/2000/svg","width","26","height","26","fill","#911011","viewBox","0 0 256 256",1,"hidden","md:block"],["cx","128","cy","96","r","64","opacity","0.2"],["cx","128","cy","96","r","64","fill","none","stroke","#911011","stroke-miterlimit","10","stroke-width","16"],["d","M31,216a112,112,0,0,1,194,0","fill","none","stroke","#911011","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["routerLink","/login",1,"hidden","md:block","text-md","py-2","px-2","font-sans","text-primary-600","border-2","rounded-lg","border-dashed","border-primary-600","bg-transparent"]],template:function(t,r){if(1&t&&(u.TgZ(0,"nav",0),u.TgZ(1,"ul",1),u.TgZ(2,"div",2),u.YNc(3,F4,3,0,"li",3),u.YNc(4,L4,3,0,"ng-template",null,4,u.W1O),u.YNc(6,U4,3,0,"li",3),u.YNc(7,V4,3,0,"ng-template",null,5,u.W1O),u.YNc(9,B4,3,0,"li",3),u.YNc(10,j4,3,0,"ng-template",null,6,u.W1O),u.qZA(),u.TgZ(12,"div",7),u.TgZ(13,"li",8),u.TgZ(14,"button",9),u.TgZ(15,"span",10),u._uU(16,"Contactez nous"),u.qZA(),u.TgZ(17,"span",11),u.O4$(),u.TgZ(18,"svg",12),u._UZ(19,"rect",13),u._UZ(20,"circle",14),u._UZ(21,"circle",15),u._UZ(22,"polyline",16),u._UZ(23,"line",17),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.kcU(),u.TgZ(24,"li"),u.YNc(25,Z4,6,0,"a",18),u.qZA(),u.YNc(26,$4,7,0,"ng-template",null,19,u.W1O),u.qZA(),u.qZA(),u.qZA()),2&t){const i=u.MAs(5),a=u.MAs(8),c=u.MAs(11),p=u.MAs(27);u.xp6(3),u.Q6J("ngIf",!r.mainClicked)("ngIfElse",i),u.xp6(3),u.Q6J("ngIf",!r.aboutClicked)("ngIfElse",a),u.xp6(3),u.Q6J("ngIf",!r.articlesClicked)("ngIfElse",c),u.xp6(16),u.Q6J("ngIf",r.loggedIn&&!r.loginClicked)("ngIfElse",p)}},directives:[Gr,y,f],encapsulation:2}),n})(),q4=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-footer"]],decls:25,vars:0,consts:[[1,"bg-secondary-600","px-8","py-2","min-w-full"],[1,"flex","items-center","justify-between"],[1,"text-sm","text-primary-50","text-center"],["routerLink","/main",1,"hover:underline"],[1,"block","px-12"],[1,"inline-flex","mt-2"],["href","https://www.facebook.com/Sachem.pro/?pnref=lhc","target","_blank",1,"mr-4"],["xmlns","http://www.w3.org/2000/svg","width","26","height","26","fill","#fafafa","viewBox","0 0 256 256"],["width","256","height","256","fill","none"],["cx","128","cy","128","r","96","opacity","0.2"],["cx","128","cy","128","r","96","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M168,88H152a23.9,23.9,0,0,0-24,24V224","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","96","y1","144","x2","160","y2","144","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["href","https://www.linkedin.com/in/sandrine-chopot-90831b162/","target","_blank",1,"mr-4"],["x","36","y","36","width","184","height","184","rx","8","opacity","0.2"],["x","36","y","36","width","184","height","184","rx","8","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","120","y1","112","x2","120","y2","176","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","88","y1","112","x2","88","y2","176","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["d","M120,140a28,28,0,0,1,56,0v36","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["cx","88","cy","80","r","12"]],template:function(t,r){1&t&&(u.TgZ(0,"footer",0),u.TgZ(1,"div",1),u.TgZ(2,"span",2),u._uU(3,"\xa9 2022 "),u.TgZ(4,"a",3),u._uU(5,"Sandrine CHOPOT"),u.qZA(),u._uU(6,". All Rights Reserved. "),u.qZA(),u.TgZ(7,"div",4),u.TgZ(8,"div",5),u.TgZ(9,"a",6),u.O4$(),u.TgZ(10,"svg",7),u._UZ(11,"rect",8),u._UZ(12,"circle",9),u._UZ(13,"circle",10),u._UZ(14,"path",11),u._UZ(15,"line",12),u.qZA(),u.qZA(),u.kcU(),u.TgZ(16,"a",13),u.O4$(),u.TgZ(17,"svg",7),u._UZ(18,"rect",8),u._UZ(19,"rect",14),u._UZ(20,"rect",15),u._UZ(21,"line",16),u._UZ(22,"line",17),u._UZ(23,"path",18),u._UZ(24,"circle",19),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA())},directives:[f],encapsulation:2}),n})(),G4=(()=>{class n{constructor(t){this.auth=t,this.title="app-articles"}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(DE))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"w-full","h-full"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u._UZ(1,"app-nav-bar"),u._UZ(2,"router-outlet"),u._UZ(3,"app-footer"),u.qZA())},directives:[H4,Od,q4],styles:[""]}),n})();const d2_firebaseConfig={apiKey:"AIzaSyA_qMTzXvNHhR4FQlPuazr5NC9Cmo4gwlw",authDomain:"sachem-fcd12.firebaseapp.com",databaseURL:"https://sachem-fcd12-default-rtdb.europe-west1.firebasedatabase.app",projectId:"sachem-fcd12",storageBucket:"sachem-fcd12.appspot.com",messagingSenderId:"44609888106",appId:"1:44609888106:web:390916816d50e3e5cd0f13",measurementId:"G-QVNQXHPHDS"};let W4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[G4]}),n.\u0275inj=u.cJS({providers:[DE,da,u2],imports:[[Ro,O4,q6,h4,Lr.hO.initializeApp(d2_firebaseConfig),cM,Jj,P8,J1]]}),n})();(0,u.G48)(),ko().bootstrapModule(W4).catch(n=>console.error(n))},5867:(ut,Ee,F)=>{F.d(Ee,{C6:()=>u.getApps,Mq:()=>u.getApp});var u=F(9681);(0,u.registerVersion)("firebase","9.6.10","app")},127:(ut,Ee,F)=>{F.d(Ee,{Z:()=>u.Z});var u=F(3942);u.Z.registerVersion("firebase","9.6.10","app-compat")},1254:(ut,Ee,F)=>{F.r(Ee);var u=F(5861),Y=F(3942),O=F(2090),se=F(9681);function ae(y,f){var g={};for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&f.indexOf(w)<0&&(g[w]=y[w]);if(null!=y&&"function"==typeof Object.getOwnPropertySymbols){var A=0;for(w=Object.getOwnPropertySymbols(y);A<w.length;A++)f.indexOf(w[A])<0&&Object.prototype.propertyIsEnumerable.call(y,w[A])&&(g[w[A]]=y[w[A]])}return g}var Pe=F(1877),de=F(4859);const rs=function vt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},qr=function _n(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},yn=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),$n=new Pe.Yd("@firebase/auth");function or(y,...f){$n.logLevel<=Pe.in.ERROR&&$n.error(`Auth (${se.SDK_VERSION}): ${y}`,...f)}function rn(y,...f){throw br(y,...f)}function Pn(y,...f){return br(y,...f)}function ra(y,f,g){const w=Object.assign(Object.assign({},qr()),{[f]:g});return new O.LL("auth","Firebase",w).create(f,{appName:y.name})}function Ui(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&rn(y,"argument-error"),ra(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function br(y,...f){if("string"!=typeof y){const g=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(g,...w)}return yn.create(y,...f)}function Ae(y,f,...g){if(!y)throw br(f,...g)}function fr(y){const f="INTERNAL ASSERTION FAILED: "+y;throw or(f),new Error(f)}function Hn(y,f){y||fr(f)}const mt=new Map;function en(y){Hn(y instanceof Function,"Expected a class definition");let f=mt.get(y);return f?(Hn(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,mt.set(y,f),f)}function Ci(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Mr(){return"http:"===Cr()||"https:"===Cr()}function Cr(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class dn{constructor(f,g){this.shortDelay=f,this.longDelay=g,Hn(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function qn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Mr()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function et(y,f){Hn(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class wt{static initialize(f,g,w){this.fetchImpl=f,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qs={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ws=new dn(3e4,6e4);function tn(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Et(y,f,g,w){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,u.Z)(function*(y,f,g,w,A={}){return bo(y,A,(0,u.Z)(function*(){let k={},j={};w&&("GET"===f?j=w:k={body:JSON.stringify(w)});const J=(0,O.xO)(Object.assign({key:y.config.apiKey},j)).slice(1),Re=yield y._getAdditionalHeaders();return Re["Content-Type"]="application/json",y.languageCode&&(Re["X-Firebase-Locale"]=y.languageCode),wt.fetch()(Je(y,y.config.apiHost,g,J),Object.assign({method:f,headers:Re,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function bo(y,f,g){return nn.apply(this,arguments)}function nn(){return(nn=(0,u.Z)(function*(y,f,g){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},Qs),f);try{const A=new Ce(y),k=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const j=yield k.json();if("needConfirmation"in j)throw ot(y,"account-exists-with-different-credential",j);if(k.ok&&!("errorMessage"in j))return j;{const J=k.ok?j.errorMessage:j.error.message,[Re,Se]=J.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Re)throw ot(y,"credential-already-in-use",j);if("EMAIL_EXISTS"===Re)throw ot(y,"email-already-in-use",j);const rt=w[Re]||Re.toLowerCase().replace(/[_\s]+/g,"-");if(Se)throw ra(y,rt,Se);rn(y,rt)}}catch(A){if(A instanceof O.ZR)throw A;rn(y,"network-request-failed")}})).apply(this,arguments)}function bt(y,f,g,w){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,u.Z)(function*(y,f,g,w,A={}){const k=yield Et(y,f,g,w,A);return"mfaPendingCredential"in k&&rn(y,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function Je(y,f,g,w){const A=`${f}${g}?${w}`;return y.config.emulator?et(y.config,A):`${y.config.apiScheme}://${A}`}class Ce{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(Pn(this.auth,"network-request-failed")),ws.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ot(y,f,g){const w={appName:y.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const A=Pn(y,f,w);return A.customData._tokenResponse=g,A}function Bt(){return(Bt=(0,u.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function sn(y,f){return H.apply(this,arguments)}function H(){return(H=(0,u.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function B(y,f){return W.apply(this,arguments)}function W(){return(W=(0,u.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function he(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function _t(){return(_t=(0,u.Z)(function*(y,f=!1){const g=(0,O.m9)(y),w=yield g.getIdToken(f),A=pr(w);Ae(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const k="object"==typeof A.firebase?A.firebase:void 0,j=null==k?void 0:k.sign_in_provider;return{claims:A,token:w,authTime:he(Qt(A.auth_time)),issuedAtTime:he(Qt(A.iat)),expirationTime:he(Qt(A.exp)),signInProvider:j||null,signInSecondFactor:(null==k?void 0:k.sign_in_second_factor)||null}})).apply(this,arguments)}function Qt(y){return 1e3*Number(y)}function pr(y){const[f,g,w]=y.split(".");if(void 0===f||void 0===g||void 0===w)return or("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,O.tV)(g);return A?JSON.parse(A):(or("Failed to decode base64 JWT payload"),null)}catch(A){return or("Caught error parsing JWT payload as JSON",A),null}}function zt(y,f){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,u.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(w){throw w instanceof O.ZR&&Gn(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function Gn({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Wn{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,u.Z)(function*(){yield g.iteration()}),w)}iteration(){var f=this;return(0,u.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class Es{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=he(this.lastLoginAt),this.creationTime=he(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ia(y){return Js.apply(this,arguments)}function Js(){return(Js=(0,u.Z)(function*(y){var f;const g=y.auth,w=yield y.getIdToken(),A=yield zt(y,B(g,{idToken:w}));Ae(null==A?void 0:A.users.length,g,"internal-error");const k=A.users[0];y._notifyReloadListener(k);const j=(null===(f=k.providerUserInfo)||void 0===f?void 0:f.length)?ef(k.providerUserInfo):[],J=Xn(y.providerData,j),rt=!!y.isAnonymous&&!(y.email&&k.passwordHash||(null==J?void 0:J.length)),Xe={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:J,metadata:new Es(k.createdAt,k.lastLoginAt),isAnonymous:rt};Object.assign(y,Xe)})).apply(this,arguments)}function Vi(){return(Vi=(0,u.Z)(function*(y){const f=(0,O.m9)(y);yield ia(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Xn(y,f){return[...y.filter(w=>!f.some(A=>A.providerId===w.providerId)),...f]}function ef(y){return y.map(f=>{var{providerId:g}=f,w=ae(f,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function je(){return(je=(0,u.Z)(function*(y,f){const g=yield bo(y,{},(0,u.Z)(function*(){const w=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:k}=y.config,j=Je(y,A,"/v1/token",`key=${k}`),J=yield y._getAdditionalHeaders();return J["Content-Type"]="application/x-www-form-urlencoded",wt.fetch()(j,{method:"POST",headers:J,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class It{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Ae(f.idToken,"internal-error"),Ae(void 0!==f.idToken,"internal-error"),Ae(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function Jn(y){const f=pr(y);return Ae(f,"internal-error"),Ae(void 0!==f.exp,"internal-error"),Ae(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var w=this;return(0,u.Z)(function*(){return Ae(!w.accessToken||w.refreshToken,f,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var w=this;return(0,u.Z)(function*(){const{accessToken:A,refreshToken:k,expiresIn:j}=yield function Ii(y,f){return je.apply(this,arguments)}(f,g);w.updateTokensAndExpiration(A,k,Number(j))})()}updateTokensAndExpiration(f,g,w){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,g){const{refreshToken:w,accessToken:A,expirationTime:k}=g,j=new It;return w&&(Ae("string"==typeof w,"internal-error",{appName:f}),j.refreshToken=w),A&&(Ae("string"==typeof A,"internal-error",{appName:f}),j.accessToken=A),k&&(Ae("number"==typeof k,"internal-error",{appName:f}),j.expirationTime=k),j}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new It,this.toJSON())}_performRefresh(){return fr("not implemented")}}function Kt(y,f){Ae("string"==typeof y||void 0===y,"internal-error",{appName:f})}class zn{constructor(f){var{uid:g,auth:w,stsTokenManager:A}=f,k=ae(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new Es(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,u.Z)(function*(){const w=yield zt(g,g.stsTokenManager.getToken(g.auth,f));return Ae(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(f){return function Ve(y){return _t.apply(this,arguments)}(this,f)}reload(){return function ja(y){return Vi.apply(this,arguments)}(this)}_assign(f){this!==f&&(Ae(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new zn(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var w=this;return(0,u.Z)(function*(){let A=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),A=!0),g&&(yield ia(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,u.Z)(function*(){const g=yield f.getIdToken();return yield zt(f,function dt(y,f){return Bt.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var w,A,k,j,J,Re,Se,rt;const Xe=null!==(w=g.displayName)&&void 0!==w?w:void 0,qt=null!==(A=g.email)&&void 0!==A?A:void 0,Vn=null!==(k=g.phoneNumber)&&void 0!==k?k:void 0,Zo=null!==(j=g.photoURL)&&void 0!==j?j:void 0,yu=null!==(J=g.tenantId)&&void 0!==J?J:void 0,Gf=null!==(Re=g._redirectEventId)&&void 0!==Re?Re:void 0,Sc=null!==(Se=g.createdAt)&&void 0!==Se?Se:void 0,nm=null!==(rt=g.lastLoginAt)&&void 0!==rt?rt:void 0,{uid:xc,emailVerified:Wf,isAnonymous:zf,providerData:kc,stsTokenManager:Rc}=g;Ae(xc&&Rc,f,"internal-error");const Gd=It.fromJSON(this.name,Rc);Ae("string"==typeof xc,f,"internal-error"),Kt(Xe,f.name),Kt(qt,f.name),Ae("boolean"==typeof Wf,f,"internal-error"),Ae("boolean"==typeof zf,f,"internal-error"),Kt(Vn,f.name),Kt(Zo,f.name),Kt(yu,f.name),Kt(Gf,f.name),Kt(Sc,f.name),Kt(nm,f.name);const vu=new zn({uid:xc,auth:f,email:qt,emailVerified:Wf,displayName:Xe,isAnonymous:zf,photoURL:Zo,phoneNumber:Vn,tenantId:yu,stsTokenManager:Gd,createdAt:Sc,lastLoginAt:nm});return kc&&Array.isArray(kc)&&(vu.providerData=kc.map(Kf=>Object.assign({},Kf))),Gf&&(vu._redirectEventId=Gf),vu}static _fromIdTokenResponse(f,g,w=!1){return(0,u.Z)(function*(){const A=new It;A.updateFromServerResponse(g);const k=new zn({uid:g.localId,auth:f,stsTokenManager:A,isAnonymous:w});return yield ia(k),k})()}}const vn=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(g,w){var A=this;return(0,u.Z)(function*(){A.storage[g]=w})()}_get(g){var w=this;return(0,u.Z)(function*(){const A=w.storage[g];return void 0===A?null:A})()}_remove(g){var w=this;return(0,u.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return y.type="NONE",y})();function Tr(y,f,g){return`firebase:${y}:${f}:${g}`}class Lt{constructor(f,g,w){this.persistence=f,this.auth=g,this.userKey=w;const{config:A,name:k}=this.auth;this.fullUserKey=Tr(this.userKey,A.apiKey,k),this.fullPersistenceKey=Tr("persistence",A.apiKey,k),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,u.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?zn._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,u.Z)(function*(){if(g.persistence===f)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,w="authUser"){return(0,u.Z)(function*(){if(!g.length)return new Lt(en(vn),f,w);const A=(yield Promise.all(g.map(function(){var Se=(0,u.Z)(function*(rt){if(yield rt._isAvailable())return rt});return function(rt){return Se.apply(this,arguments)}}()))).filter(Se=>Se);let k=A[0]||en(vn);const j=Tr(w,f.config.apiKey,f.name);let J=null;for(const Se of g)try{const rt=yield Se._get(j);if(rt){const Xe=zn._fromJSON(f,rt);Se!==k&&(J=Xe),k=Se;break}}catch(rt){}const Re=A.filter(Se=>Se._shouldAllowMigration);return k._shouldAllowMigration&&Re.length?(k=Re[0],J&&(yield k._set(j,J.toJSON())),yield Promise.all(g.map(function(){var Se=(0,u.Z)(function*(rt){if(rt!==k)try{yield rt._remove(j)}catch(Xe){}});return function(rt){return Se.apply(this,arguments)}}())),new Lt(k,f,w)):new Lt(k,f,w)})()}}function oa(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Co(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(aa(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Cs(f))return"Blackberry";if(Dr(f))return"Webos";if(Tt(f))return"Safari";if((f.includes("chrome/")||la(f))&&!f.includes("edge/"))return"Chrome";if(bs(f))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function aa(y=(0,O.z$)()){return/firefox\//i.test(y)}function Tt(y=(0,O.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function la(y=(0,O.z$)()){return/crios\//i.test(y)}function Co(y=(0,O.z$)()){return/iemobile/i.test(y)}function bs(y=(0,O.z$)()){return/android/i.test(y)}function Cs(y=(0,O.z$)()){return/blackberry/i.test(y)}function Dr(y=(0,O.z$)()){return/webos/i.test(y)}function Ti(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function zu(y=(0,O.z$)()){return Ti(y)||bs(y)||Dr(y)||Cs(y)||/windows phone/i.test(y)||Co(y)}function is(y,f=[]){let g;switch(y){case"Browser":g=oa((0,O.z$)());break;case"Worker":g=`${oa((0,O.z$)())}-${y}`;break;default:g=y}const w=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${se.SDK_VERSION}/${w}`}class ss{constructor(f,g,w){this.app=f,this.heartbeatServiceProvider=g,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Za(this),this.idTokenSubscription=new Za(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,g){var w=this;return g&&(this._popupRedirectResolver=en(g)),this._initializationPromise=this.queue((0,u.Z)(function*(){var A,k;if(!w._deleted&&(w.persistenceManager=yield Lt.create(w,f),!w._deleted)){if(null===(A=w._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(j){}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(k=w.currentUser)||void 0===k?void 0:k.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,u.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g)}})()}initializeCurrentUser(f){var g=this;return(0,u.Z)(function*(){var w;let A=yield g.assertedPersistence.getCurrentUser();if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const k=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,j=null==A?void 0:A._redirectEventId,J=yield g.tryRedirectSignIn(f);(!k||k===j)&&(null==J?void 0:J.user)&&(A=J.user)}return A?A._redirectEventId?(Ae(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===A._redirectEventId?g.directlySetCurrentUser(A):g.reloadAndSetCurrentUserOrClear(A)):g.reloadAndSetCurrentUserOrClear(A):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var g=this;return(0,u.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(A){yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,u.Z)(function*(){try{yield ia(f)}catch(w){if("auth/network-request-failed"!==w.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Ul(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,u.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,u.Z)(function*(){const w=f?(0,O.m9)(f):null;return w&&Ae(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(f){var g=this;return(0,u.Z)(function*(){if(!g._deleted)return f&&Ae(g.tenantId===f.tenantId,g,"tenant-id-mismatch"),g.queue((0,u.Z)(function*(){yield g.directlySetCurrentUser(f),g.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,u.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var g=this;return this.queue((0,u.Z)(function*(){yield g.assertedPersistence.setPersistence(en(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,g,w){return this.registerStateListener(this.authStateSubscription,f,g,w)}onIdTokenChanged(f,g,w){return this.registerStateListener(this.idTokenSubscription,f,g,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var w=this;return(0,u.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(g);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,u.Z)(function*(){if(!g.redirectPersistenceManager){const w=f&&en(f)||g._popupRedirectResolver;Ae(w,g,"argument-error"),g.redirectPersistenceManager=yield Lt.create(g,[en(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,u.Z)(function*(){var w,A;return g._isInitialized&&(yield g.queue((0,u.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===f?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,u.Z)(function*(){if(f===g.currentUser)return g.queue((0,u.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,w,A){if(this._deleted)return()=>{};const k="function"==typeof g?g:g.next.bind(g),j=this._isInitialized?Promise.resolve():this._initializationPromise;return Ae(j,this,"internal-error"),j.then(()=>k(this.currentUser)),"function"==typeof g?f.addObserver(g,w,A):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,u.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=is(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,u.Z)(function*(){var g;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return A&&(w["X-Firebase-Client"]=A),w})()}}function On(y){return(0,O.m9)(y)}class Za{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Di(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function kg(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class ua{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return fr("not implemented")}_getIdTokenResponse(f){return fr("not implemented")}_linkToIdToken(f,g){return fr("not implemented")}_getReauthenticationResolver(f){return fr("not implemented")}}function nf(y,f){return ud.apply(this,arguments)}function ud(){return(ud=(0,u.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:resetPassword",tn(y,f))})).apply(this,arguments)}function rf(y,f){return ca.apply(this,arguments)}function ca(){return(ca=(0,u.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ku(y,f){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,u.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:update",tn(y,f))})).apply(this,arguments)}function cd(){return(cd=(0,u.Z)(function*(y,f){return bt(y,"POST","/v1/accounts:signInWithPassword",tn(y,f))})).apply(this,arguments)}function Yu(y,f){return da.apply(this,arguments)}function da(){return(da=(0,u.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:sendOobCode",tn(y,f))})).apply(this,arguments)}function Mg(y,f){return dd.apply(this,arguments)}function dd(){return(dd=(0,u.Z)(function*(y,f){return Yu(y,f)})).apply(this,arguments)}function vy(y,f){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,u.Z)(function*(y,f){return Yu(y,f)})).apply(this,arguments)}function hd(y,f){return Io.apply(this,arguments)}function Io(){return(Io=(0,u.Z)(function*(y,f){return Yu(y,f)})).apply(this,arguments)}function sf(y,f){return fd.apply(this,arguments)}function fd(){return(fd=(0,u.Z)(function*(y,f){return Yu(y,f)})).apply(this,arguments)}function Is(){return(Is=(0,u.Z)(function*(y,f){return bt(y,"POST","/v1/accounts:signInWithEmailLink",tn(y,f))})).apply(this,arguments)}function To(){return(To=(0,u.Z)(function*(y,f){return bt(y,"POST","/v1/accounts:signInWithEmailLink",tn(y,f))})).apply(this,arguments)}class ha extends ua{constructor(f,g,w,A=null){super("password",w),this._email=f,this._password=g,this._tenantId=A}static _fromEmailAndPassword(f,g){return new ha(f,g,"password")}static _fromEmailAndCode(f,g,w=null){return new ha(f,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,u.Z)(function*(){switch(g.signInMethod){case"password":return function Rg(y,f){return cd.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function af(y,f){return Is.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:rn(f,"internal-error")}})()}_linkToIdToken(f,g){var w=this;return(0,u.Z)(function*(){switch(w.signInMethod){case"password":return rf(f,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function jl(y,f){return To.apply(this,arguments)}(f,{idToken:g,email:w._email,oobCode:w._password});default:rn(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function eo(y,f){return pd.apply(this,arguments)}function pd(){return(pd=(0,u.Z)(function*(y,f){return bt(y,"POST","/v1/accounts:signInWithIdp",tn(y,f))})).apply(this,arguments)}class er extends ua{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new er(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):rn("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A}=g,k=ae(g,["providerId","signInMethod"]);if(!w||!A)return null;const j=new er(w,A);return j.idToken=k.idToken||void 0,j.accessToken=k.accessToken||void 0,j.secret=k.secret,j.nonce=k.nonce,j.pendingToken=k.pendingToken||null,j}_getIdTokenResponse(f){return eo(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,eo(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,eo(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,O.xO)(g)}return f}}function lf(y,f){return Do.apply(this,arguments)}function Do(){return(Do=(0,u.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:sendVerificationCode",tn(y,f))})).apply(this,arguments)}function Ar(){return(Ar=(0,u.Z)(function*(y,f){return bt(y,"POST","/v1/accounts:signInWithPhoneNumber",tn(y,f))})).apply(this,arguments)}function $a(){return($a=(0,u.Z)(function*(y,f){const g=yield bt(y,"POST","/v1/accounts:signInWithPhoneNumber",tn(y,f));if(g.temporaryProof)throw ot(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const gd={USER_NOT_FOUND:"user-not-found"};function Ha(){return(Ha=(0,u.Z)(function*(y,f){return bt(y,"POST","/v1/accounts:signInWithPhoneNumber",tn(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),gd)})).apply(this,arguments)}class si extends ua{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new si({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new si({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function Ng(y,f){return Ar.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function uf(y,f){return $a.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function cf(y,f){return Ha.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:w,verificationCode:A}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:w,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:w,phoneNumber:A,temporaryProof:k}=f;return w||g||A||k?new si({verificationId:g,verificationCode:w,phoneNumber:A,temporaryProof:k}):null}}class Ao{constructor(f){var g,w,A,k,j,J;const Re=(0,O.zd)((0,O.pd)(f)),Se=null!==(g=Re.apiKey)&&void 0!==g?g:null,rt=null!==(w=Re.oobCode)&&void 0!==w?w:null,Xe=function In(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Re.mode)&&void 0!==A?A:null);Ae(Se&&rt&&Xe,"argument-error"),this.apiKey=Se,this.operation=Xe,this.code=rt,this.continueUrl=null!==(k=Re.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(j=Re.languageCode)&&void 0!==j?j:null,this.tenantId=null!==(J=Re.tenantId)&&void 0!==J?J:null}static parseLink(f){const g=function Qu(y){const f=(0,O.zd)((0,O.pd)(y)).link,g=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,w=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(w?(0,O.zd)((0,O.pd)(w)).link:null)||w||g||f||y}(f);try{return new Ao(g)}catch(w){return null}}}let So=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,w){return ha._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const A=Ao.parseLink(w);return Ae(A,"argument-error"),ha._fromEmailAndCode(g,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Wr{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Ts extends Wr{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Fn extends Ts{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return Ae("providerId"in g&&"signInMethod"in g,"argument-error"),er._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Ae(f.idToken||f.accessToken,"argument-error"),er._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Fn.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Fn.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:k,nonce:j,providerId:J}=f;if(!w&&!A&&!g&&!k||!J)return null;try{return new Fn(J)._credential({idToken:g,accessToken:w,nonce:j,pendingToken:k})}catch(Re){return null}}}let Zl=(()=>{class y extends Ts{constructor(){super("facebook.com")}static credential(g){return er._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(w){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),qa=(()=>{class y extends Ts{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return er._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:A}=g;if(!w&&!A)return null;try{return y.credential(w,A)}catch(k){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Sn=(()=>{class y extends Ts{constructor(){super("github.com")}static credential(g){return er._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(w){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Zi extends ua{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return eo(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,eo(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,eo(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A,pendingToken:k}=g;return w&&A&&k&&w===A?new Zi(w,k):null}static _create(f,g){return new Zi(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ds extends Wr{constructor(f){Ae(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Ds.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Ds.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Zi.fromJSON(f);return Ae(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:w}=f;if(!g||!w)return null;try{return Zi._create(w,g)}catch(A){return null}}}let ai=(()=>{class y extends Ts{constructor(){super("twitter.com")}static credential(g,w){return er._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=g;if(!w||!A)return null;try{return y.credential(w,A)}catch(k){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function fa(y,f){return no.apply(this,arguments)}function no(){return(no=(0,u.Z)(function*(y,f){return bt(y,"POST","/v1/accounts:signUp",tn(y,f))})).apply(this,arguments)}class nt{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,w,A=!1){return(0,u.Z)(function*(){const k=yield zn._fromIdTokenResponse(f,w,A),j=$l(w);return new nt({user:k,providerId:j,_tokenResponse:w,operationType:g})})()}static _forOperation(f,g,w){return(0,u.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const A=$l(w);return new nt({user:f,providerId:A,_tokenResponse:w,operationType:g})})()}}function $l(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Ga(){return(Ga=(0,u.Z)(function*(y){var f;const g=On(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new nt({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield fa(g,{returnSecureToken:!0}),A=yield nt._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Wa extends O.ZR{constructor(f,g,w,A){var k;super(g.code,g.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,Wa.prototype),this.customData={appName:f.name,tenantId:null!==(k=f.tenantId)&&void 0!==k?k:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,g,w,A){return new Wa(f,g,w,A)}}function pa(y,f,g,w){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?Wa._fromErrorAndOperation(y,k,f,w):k})}function Xu(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function Ie(){return(Ie=(0,u.Z)(function*(y,f){const g=(0,O.m9)(y);yield bn(!0,g,f);const{providerUserInfo:w}=yield sn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),A=Xu(w||[]);return g.providerData=g.providerData.filter(k=>A.has(k.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function jt(y,f){return ro.apply(this,arguments)}function ro(){return(ro=(0,u.Z)(function*(y,f,g=!1){const w=yield zt(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return nt._forOperation(y,"link",w)})).apply(this,arguments)}function bn(y,f,g){return tc.apply(this,arguments)}function tc(){return(tc=(0,u.Z)(function*(y,f,g){yield ia(f);const A=!1===y?"provider-already-linked":"no-such-provider";Ae(Xu(f.providerData).has(g)===y,f.auth,A)})).apply(this,arguments)}function os(y,f){return zr.apply(this,arguments)}function zr(){return(zr=(0,u.Z)(function*(y,f,g=!1){const{auth:w}=y,A="reauthenticate";try{const k=yield zt(y,pa(w,A,f,y),g);Ae(k.idToken,w,"internal-error");const j=pr(k.idToken);Ae(j,w,"internal-error");const{sub:J}=j;return Ae(y.uid===J,w,"user-mismatch"),nt._forOperation(y,A,k)}catch(k){throw"auth/user-not-found"===(null==k?void 0:k.code)&&rn(w,"user-mismatch"),k}})).apply(this,arguments)}function za(y,f){return ga.apply(this,arguments)}function ga(){return(ga=(0,u.Z)(function*(y,f,g=!1){const w="signIn",A=yield pa(y,w,f),k=yield nt._fromIdTokenResponse(y,w,A);return g||(yield y._updateCurrentUser(k.user)),k})).apply(this,arguments)}function nc(y,f){return rc.apply(this,arguments)}function rc(){return(rc=(0,u.Z)(function*(y,f){return za(On(y),f)})).apply(this,arguments)}function Ka(y,f){return io.apply(this,arguments)}function io(){return(io=(0,u.Z)(function*(y,f){const g=(0,O.m9)(y);return yield bn(!1,g,f.providerId),jt(g,f)})).apply(this,arguments)}function Sr(y,f){return li.apply(this,arguments)}function li(){return(li=(0,u.Z)(function*(y,f){return os((0,O.m9)(y),f)})).apply(this,arguments)}function ic(y,f){return As.apply(this,arguments)}function As(){return(As=(0,u.Z)(function*(y,f){return bt(y,"POST","/v1/accounts:signInWithCustomToken",tn(y,f))})).apply(this,arguments)}function sc(){return(sc=(0,u.Z)(function*(y,f){const g=On(y),w=yield ic(g,{token:f,returnSecureToken:!0}),A=yield nt._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class xo{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?oc._fromServerResponse(f,g):rn(f,"internal-error")}}class oc extends xo{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new oc(g)}}function ma(y,f,g){var w;Ae((null===(w=g.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),Ae(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Ae(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(Ae(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function ko(){return(ko=(0,u.Z)(function*(y,f,g){const w=(0,O.m9)(y),A={requestType:"PASSWORD_RESET",email:f};g&&ma(w,A,g),yield vy(w,A)})).apply(this,arguments)}function Ro(){return(Ro=(0,u.Z)(function*(y,f,g){yield nf((0,O.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Gl(){return(Gl=(0,u.Z)(function*(y,f){yield Ku((0,O.m9)(y),{oobCode:f})})).apply(this,arguments)}function _a(y,f){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,u.Z)(function*(y,f){const g=(0,O.m9)(y),w=yield nf(g,{oobCode:f}),A=w.requestType;switch(Ae(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ae(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ae(w.mfaInfo,g,"internal-error");default:Ae(w.email,g,"internal-error")}let k=null;return w.mfaInfo&&(k=xo._fromServerResponse(On(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:k},operation:A}})).apply(this,arguments)}function zl(){return(zl=(0,u.Z)(function*(y,f){const{data:g}=yield _a((0,O.m9)(y),f);return g.email})).apply(this,arguments)}function Ya(){return(Ya=(0,u.Z)(function*(y,f,g){const w=On(y),A=yield fa(w,{returnSecureToken:!0,email:f,password:g}),k=yield nt._fromIdTokenResponse(w,"signIn",A);return yield w._updateCurrentUser(k.user),k})).apply(this,arguments)}function Tn(){return(Tn=(0,u.Z)(function*(y,f,g){const w=(0,O.m9)(y),A={requestType:"EMAIL_SIGNIN",email:f};Ae(g.handleCodeInApp,w,"argument-error"),g&&ma(w,A,g),yield hd(w,A)})).apply(this,arguments)}function Qa(){return(Qa=(0,u.Z)(function*(y,f,g){const w=(0,O.m9)(y),A=So.credentialWithLink(f,g||Ci());return Ae(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),nc(w,A)})).apply(this,arguments)}function hf(y,f){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,u.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:createAuthUri",tn(y,f))})).apply(this,arguments)}function ff(){return(ff=(0,u.Z)(function*(y,f){const w={identifier:f,continueUri:Mr()?Ci():"http://localhost"},{signinMethods:A}=yield hf((0,O.m9)(y),w);return A||[]})).apply(this,arguments)}function Xa(){return(Xa=(0,u.Z)(function*(y,f){const g=(0,O.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&ma(g.auth,A,f);const{email:k}=yield Mg(g.auth,A);k!==y.email&&(yield y.reload())})).apply(this,arguments)}function el(){return(el=(0,u.Z)(function*(y,f,g){const w=(0,O.m9)(y),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&ma(w.auth,k,g);const{email:j}=yield sf(w.auth,k);j!==y.email&&(yield y.reload())})).apply(this,arguments)}function yd(y,f){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,u.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ls(){return(ls=(0,u.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const w=(0,O.m9)(y),k={idToken:yield w.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},j=yield zt(w,yd(w.auth,k));w.displayName=j.displayName||null,w.photoURL=j.photoUrl||null;const J=w.providerData.find(({providerId:Re})=>"password"===Re);J&&(J.displayName=w.displayName,J.photoURL=w.photoURL),yield w._updateTokensIfNecessary(j)})).apply(this,arguments)}function pf(y,f,g){return so.apply(this,arguments)}function so(){return(so=(0,u.Z)(function*(y,f,g){const{auth:w}=y,k={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(k.email=f),g&&(k.password=g);const j=yield zt(y,rf(w,k));yield y._updateTokensIfNecessary(j,!0)})).apply(this,arguments)}class Mo{constructor(f,g,w={}){this.isNewUser=f,this.providerId=g,this.profile=w}}class gf extends Mo{constructor(f,g,w,A){super(f,g,w),this.username=A}}class Fg extends Mo{constructor(f,g){super(f,"facebook.com",g)}}class Ey extends gf{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class an extends Mo{constructor(f,g){super(f,"google.com",g)}}class Kn extends gf{constructor(f,g,w){super(f,"twitter.com",g,w)}}function ft(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function vd(y){var f,g;if(!y)return null;const{providerId:w}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},k=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&(null==y?void 0:y.idToken)){const j=null===(g=null===(f=pr(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(j)return new Mo(k,"anonymous"!==j&&"custom"!==j?j:null)}if(!w)return null;switch(w){case"facebook.com":return new Fg(k,A);case"github.com":return new Ey(k,A);case"google.com":return new an(k,A);case"twitter.com":return new Kn(k,A,y.screenName||null);case"custom":case"anonymous":return new Mo(k,null);default:return new Mo(k,w,A)}}(g)}class Po{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new Po("enroll",f)}static _fromMfaPendingCredential(f){return new Po("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,w;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return Po._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(w=f.multiFactorSession)||void 0===w?void 0:w.idToken)return Po._fromIdtoken(f.multiFactorSession.idToken)}return null}}class qi{constructor(f,g,w){this.session=f,this.hints=g,this.signInResolver=w}static _fromError(f,g){const w=On(f),A=g.customData._serverResponse,k=(A.mfaInfo||[]).map(J=>xo._fromServerResponse(w,J));Ae(A.mfaPendingCredential,w,"internal-error");const j=Po._fromMfaPendingCredential(A.mfaPendingCredential);return new qi(j,k,function(){var J=(0,u.Z)(function*(Re){const Se=yield Re._process(w,j);delete A.mfaInfo,delete A.mfaPendingCredential;const rt=Object.assign(Object.assign({},A),{idToken:Se.idToken,refreshToken:Se.refreshToken});switch(g.operationType){case"signIn":const Xe=yield nt._fromIdTokenResponse(w,g.operationType,rt);return yield w._updateCurrentUser(Xe.user),Xe;case"reauthenticate":return Ae(g.user,w,"internal-error"),nt._forOperation(g.user,g.operationType,rt);default:rn(w,"internal-error")}});return function(Re){return J.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,u.Z)(function*(){return g.signInResolver(f)})()}}function mf(y,f){return Et(y,"POST","/v2/accounts/mfaEnrollment:start",tn(y,f))}class oo{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>xo._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new oo(f)}getSession(){var f=this;return(0,u.Z)(function*(){return Po._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var w=this;return(0,u.Z)(function*(){const A=f,k=yield w.getSession(),j=yield zt(w.user,A._process(w.user.auth,k,g));return yield w.user._updateTokensIfNecessary(j),w.user.reload()})()}unenroll(f){var g=this;return(0,u.Z)(function*(){const w="string"==typeof f?f:f.uid,A=yield g.user.getIdToken(),k=yield zt(g.user,function ya(y,f){return Et(y,"POST","/v2/accounts/mfaEnrollment:withdraw",tn(y,f))}(g.user.auth,{idToken:A,mfaEnrollmentId:w}));g.enrolledFactors=g.enrolledFactors.filter(({uid:j})=>j!==w),yield g.user._updateTokensIfNecessary(k);try{yield g.user.reload()}catch(j){if("auth/user-token-expired"!==j.code)throw j}})()}}const Un=new WeakMap,Oo="__sak";class us{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Oo,"1"),this.storage.removeItem(Oo),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const rl=(()=>{class y extends us{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function eu(){const y=(0,O.z$)();return Tt(y)||Ti(y)}()&&function ld(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=zu(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),k=this.localCache[w];A!==k&&g(w,k,A)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((J,Re,Se)=>{this.notifyListeners(J,Se)});const A=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const J=this.storage.getItem(A);if(g.newValue!==J)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!w)return}const k=()=>{const J=this.storage.getItem(A);!w&&this.localCache[A]===J||this.notifyListeners(A,J)},j=this.storage.getItem(A);!function on(){return(0,O.w1)()&&10===document.documentMode}()||j===g.newValue||g.newValue===g.oldValue?k():setTimeout(k,10)}notifyListeners(g,w){this.localCache[g]=w;const A=this.listeners[g];if(A)for(const k of Array.from(A))k(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var A=()=>super._set,k=this;return(0,u.Z)(function*(){yield A().call(k,g,w),k.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,A=this;return(0,u.Z)(function*(){const k=yield w().call(A,g);return A.localCache[g]=JSON.stringify(k),k})()}_remove(g){var w=()=>super._remove,A=this;return(0,u.Z)(function*(){yield w().call(A,g),delete A.localCache[g]})()}}return y.type="LOCAL",y})(),mr=(()=>{class y extends us{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return y.type="SESSION",y})();let Ea=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(k=>k.isListeningto(g));if(w)return w;const A=new y(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,u.Z)(function*(){const A=g,{eventId:k,eventType:j,data:J}=A.data,Re=w.handlersMap[j];if(!(null==Re?void 0:Re.size))return;A.ports[0].postMessage({status:"ack",eventId:k,eventType:j});const Se=Array.from(Re).map(function(){var Xe=(0,u.Z)(function*(qt){return qt(A.origin,J)});return function(qt){return Xe.apply(this,arguments)}}()),rt=yield function il(y){return Promise.all(y.map(function(){var f=(0,u.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return f.apply(this,arguments)}}()))}(Se);A.ports[0].postMessage({status:"done",eventId:k,eventType:j,response:rt})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Fo(y="",f=10){let g="";for(let w=0;w<f;w++)g+=Math.floor(10*Math.random());return y+g}class _r{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,w=50){var A=this;return(0,u.Z)(function*(){const k="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let j,J;return new Promise((Re,Se)=>{const rt=Fo("",20);k.port1.start();const Xe=setTimeout(()=>{Se(new Error("unsupported_event"))},w);J={messageChannel:k,onMessage(qt){const Vn=qt;if(Vn.data.eventId===rt)switch(Vn.data.status){case"ack":clearTimeout(Xe),j=setTimeout(()=>{Se(new Error("timeout"))},3e3);break;case"done":clearTimeout(j),Re(Vn.data.response);break;default:clearTimeout(Xe),clearTimeout(j),Se(new Error("invalid_response"))}}},A.handlers.add(J),k.port1.addEventListener("message",J.onMessage),A.target.postMessage({eventType:f,eventId:rt,data:g},[k.port2])}).finally(()=>{J&&A.removeMessageHandler(J)})})()}}function mn(){return window}function Dn(){return void 0!==mn().WorkerGlobalScope&&"function"==typeof mn().importScripts}function ui(){return(ui=(0,u.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const ci="firebaseLocalStorageDb",xn="firebaseLocalStorage",bd="fbase_key";class cs{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function ln(y,f){return y.transaction([xn],f?"readwrite":"readonly").objectStore(xn)}function vf(){const y=indexedDB.open(ci,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(xn,{keyPath:bd})}catch(A){g(A)}}),y.addEventListener("success",(0,u.Z)(function*(){const w=y.result;w.objectStoreNames.contains(xn)?f(w):(w.close(),yield function yf(){const y=indexedDB.deleteDatabase(ci);return new cs(y).toPromise()}(),f(yield vf()))}))})}function wf(y,f,g){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,u.Z)(function*(y,f,g){const w=ln(y,!0).put({[bd]:f,value:g});return new cs(w).toPromise()})).apply(this,arguments)}function Nr(){return(Nr=(0,u.Z)(function*(y,f){const g=ln(y,!1).get(f),w=yield new cs(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function uc(y,f){const g=ln(y,!0).delete(f);return new cs(g).toPromise()}const xs=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,u.Z)(function*(){return g.db||(g.db=yield vf()),g.db})()}_withRetries(g){var w=this;return(0,u.Z)(function*(){let A=0;for(;;)try{const k=yield w._openDb();return yield g(k)}catch(k){if(A++>3)throw k;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,u.Z)(function*(){return Dn()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,u.Z)(function*(){g.receiver=Ea._getInstance(function Kr(){return Dn()?self:null}()),g.receiver._subscribe("keyChanged",function(){var w=(0,u.Z)(function*(A,k){return{keyProcessed:(yield g._poll()).includes(k.key)}});return function(A,k){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,u.Z)(function*(A,k){return["keyChanged"]});return function(A,k){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,u.Z)(function*(){var w,A;if(g.activeServiceWorker=yield function sl(){return ui.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new _r(g.activeServiceWorker);const k=yield g.sender._send("ping",{},800);!k||(null===(w=k[0])||void 0===w?void 0:w.fulfilled)&&(null===(A=k[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,u.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function ba(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const g=yield vf();return yield wf(g,Oo,"1"),yield uc(g,Oo),!0}catch(g){}return!1})()}_withPendingWrite(g){var w=this;return(0,u.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var A=this;return(0,u.Z)(function*(){return A._withPendingWrite((0,u.Z)(function*(){return yield A._withRetries(k=>wf(k,g,w)),A.localCache[g]=w,A.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,u.Z)(function*(){const A=yield w._withRetries(k=>function Ca(y,f){return Nr.apply(this,arguments)}(k,g));return w.localCache[g]=A,A})()}_remove(g){var w=this;return(0,u.Z)(function*(){return w._withPendingWrite((0,u.Z)(function*(){return yield w._withRetries(A=>uc(A,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,u.Z)(function*(){const w=yield g._withRetries(j=>{const J=ln(j,!1).getAll();return new cs(J).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const A=[],k=new Set;for(const{fbase_key:j,value:J}of w)k.add(j),JSON.stringify(g.localCache[j])!==JSON.stringify(J)&&(g.notifyListeners(j,J),A.push(j));for(const j of Object.keys(g.localCache))g.localCache[j]&&!k.has(j)&&(g.notifyListeners(j,null),A.push(j));return A})()}notifyListeners(g,w){this.localCache[g]=w;const A=this.listeners[g];if(A)for(const k of Array.from(A))k(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function ol(y,f){return Et(y,"POST","/v2/accounts/mfaSignIn:start",tn(y,f))}function Yr(){return(Yr=(0,u.Z)(function*(y){return(yield Et(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function tu(y){return new Promise((f,g)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=f,w.onerror=A=>{const k=Pn("internal-error");k.customData=A,g(k)},w.type="text/javascript",w.charset="UTF-8",function ds(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(w)})}function Ia(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Da=1e12;class cc{constructor(f){this.auth=f,this.counter=Da,this._widgets=new Map}render(f,g){const w=this.counter;return this._widgets.set(w,new Id(f,this.auth.name,g||{})),this.counter++,w}reset(f){var g;const w=f||Da;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(f){var g;return(null===(g=this._widgets.get(f||Da))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,u.Z)(function*(){var w;return null===(w=g._widgets.get(f||Da))||void 0===w||w.execute(),""})()}}class Id{constructor(f,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;Ae(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function dc(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const xt=Ia("rcb"),Pr=new dn(3e4,6e4);class Aa{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!mn().grecaptcha}load(f,g=""){return Ae(function bf(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(mn().grecaptcha):new Promise((w,A)=>{const k=mn().setTimeout(()=>{A(Pn(f,"network-request-failed"))},Pr.get());mn()[xt]=()=>{mn().clearTimeout(k),delete mn()[xt];const J=mn().grecaptcha;if(!J)return void A(Pn(f,"internal-error"));const Re=J.render;J.render=(Se,rt)=>{const Xe=Re(Se,rt);return this.counter++,Xe},this.hostLanguage=g,w(J)},tu(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:xt,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(k),A(Pn(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!mn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Td{load(f){return(0,u.Z)(function*(){return new cc(f)})()}clearedOneInstance(){}}const Dd="recaptcha",Sa={theme:"light",type:"image"};class Gi{constructor(f,g=Object.assign({},Sa),w){this.parameters=g,this.type=Dd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=On(w),this.isInvisible="invisible"===this.parameters.size,Ae("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;Ae(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Td:new Aa,this.validateStartingState()}verify(){var f=this;return(0,u.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(g)||new Promise(k=>{const j=J=>{!J||(f.tokenChangeListeners.delete(j),k(J))};f.tokenChangeListeners.add(j),f.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Ae(!this.parameters.sitekey,this.auth,"argument-error"),Ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ae("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof f)f(g);else if("string"==typeof f){const w=mn()[f];"function"==typeof w&&w(g)}}}assertNotDestroyed(){Ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,u.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,u.Z)(function*(){Ae(Mr()&&!Dn(),f.auth,"internal-error"),yield function Ad(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Vg(y){return Yr.apply(this,arguments)}(f.auth);Ae(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return Ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ru{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=si._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function iu(){return(iu=(0,u.Z)(function*(y,f,g){const w=On(y),A=yield lo(w,f,(0,O.m9)(g));return new ru(A,k=>nc(w,k))})).apply(this,arguments)}function Wi(){return(Wi=(0,u.Z)(function*(y,f,g){const w=(0,O.m9)(y);yield bn(!1,w,"phone");const A=yield lo(w.auth,f,(0,O.m9)(g));return new ru(A,k=>Ka(w,k))})).apply(this,arguments)}function xa(){return(xa=(0,u.Z)(function*(y,f,g){const w=(0,O.m9)(y),A=yield lo(w.auth,f,(0,O.m9)(g));return new ru(A,k=>Sr(w,k))})).apply(this,arguments)}function lo(y,f,g){return ou.apply(this,arguments)}function ou(){return(ou=(0,u.Z)(function*(y,f,g){var w;const A=yield g.verify();try{let k;if(Ae("string"==typeof A,y,"argument-error"),Ae(g.type===Dd,y,"argument-error"),k="string"==typeof f?{phoneNumber:f}:f,"session"in k){const j=k.session;if("phoneNumber"in k)return Ae("enroll"===j.type,y,"internal-error"),(yield mf(y,{idToken:j.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{Ae("signin"===j.type,y,"internal-error");const J=(null===(w=k.multiFactorHint)||void 0===w?void 0:w.uid)||k.multiFactorUid;return Ae(J,y,"missing-multi-factor-info"),(yield ol(y,{mfaPendingCredential:j.credential,mfaEnrollmentId:J,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:j}=yield lf(y,{phoneNumber:k.phoneNumber,recaptchaToken:A});return j}}finally{g._reset()}})).apply(this,arguments)}function I(){return(I=(0,u.Z)(function*(y,f){yield jt((0,O.m9)(y),f)})).apply(this,arguments)}let D=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=On(g)}verifyPhoneNumber(g,w){return lo(this.auth,g,(0,O.m9)(w))}static credential(g,w){return si._fromVerification(g,w)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:A}=g;return w&&A?si._fromTokenResponse(w,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function M(y,f){return f?en(f):(Ae(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class V extends ua{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return eo(f,this._buildIdpRequest())}_linkToIdToken(f,g){return eo(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return eo(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function z(y){return za(y.auth,new V(y),y.bypassAuthState)}function ne(y){const{auth:f,user:g}=y;return Ae(g,f,"internal-error"),os(g,new V(y),y.bypassAuthState)}function ie(y){return We.apply(this,arguments)}function We(){return(We=(0,u.Z)(function*(y){const{auth:f,user:g}=y;return Ae(g,f,"internal-error"),jt(g,new V(y),y.bypassAuthState)})).apply(this,arguments)}class Dt{constructor(f,g,w,A,k=!1){this.auth=f,this.resolver=w,this.user=A,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,u.Z)(function*(w,A){f.pendingPromise={resolve:w,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(k){f.reject(k)}});return function(w,A){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,u.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:k,tenantId:j,error:J,type:Re}=f;if(J)return void g.reject(J);const Se={auth:g.auth,requestUri:w,sessionId:A,tenantId:j||void 0,postBody:k||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Re)(Se))}catch(rt){g.reject(rt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return z;case"linkViaPopup":case"linkViaRedirect":return ie;case"reauthViaPopup":case"reauthViaRedirect":return ne;default:rn(this.auth,"internal-error")}}resolve(f){Hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const pt=new dn(2e3,1e4);function Ct(){return(Ct=(0,u.Z)(function*(y,f,g){const w=On(y);Ui(y,f,Wr);const A=M(w,g);return new Rs(w,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function nr(){return(nr=(0,u.Z)(function*(y,f,g){const w=(0,O.m9)(y);Ui(w.auth,f,Wr);const A=M(w.auth,g);return new Rs(w.auth,"reauthViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}function Or(){return(Or=(0,u.Z)(function*(y,f,g){const w=(0,O.m9)(y);Ui(w.auth,f,Wr);const A=M(w.auth,g);return new Rs(w.auth,"linkViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}let Rs=(()=>{class y extends Dt{constructor(g,w,A,k,j){super(g,w,k,j),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,u.Z)(function*(){const w=yield g.execute();return Ae(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,u.Z)(function*(){Hn(1===g.filter.length,"Popup operations only handle one event");const w=Fo();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(Pn(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Pn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,A;this.pollId=(null===(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Pn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,pt.get())};g()}}return y.currentPopupAction=null,y})();const Ms=new Map;class al extends Dt{constructor(f,g,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,u.Z)(function*(){let w=Ms.get(g.auth._key());if(!w){try{const k=(yield function au(y,f){return ll.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;w=()=>Promise.resolve(k)}catch(A){w=()=>Promise.reject(A)}Ms.set(g.auth._key(),w)}return g.bypassAuthState||Ms.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,w=this;return(0,u.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(w,f);if("unknown"!==f.type){if(f.eventId){const A=yield w.auth._redirectUserForId(f.eventId);if(A)return w.user=A,g().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function ll(){return(ll=(0,u.Z)(function*(y,f){const g=Uo(f),w=ul(y);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(g));return yield w._remove(g),A})).apply(this,arguments)}function hc(y,f){return Cf.apply(this,arguments)}function Cf(){return(Cf=(0,u.Z)(function*(y,f){return ul(y)._set(Uo(f),"true")})).apply(this,arguments)}function ul(y){return en(y._redirectPersistence)}function Uo(y){return Tr("pendingRedirect",y.config.apiKey,y.name)}function Sd(){return(Sd=(0,u.Z)(function*(y,f,g){const w=On(y);Ui(y,f,Wr);const A=M(w,g);return yield hc(A,w),A._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function xd(){return(xd=(0,u.Z)(function*(y,f,g){const w=(0,O.m9)(y);Ui(w.auth,f,Wr);const A=M(w.auth,g);yield hc(A,w.auth);const k=yield lu(w);return A._openRedirect(w.auth,f,"reauthViaRedirect",k)})).apply(this,arguments)}function xi(){return(xi=(0,u.Z)(function*(y,f,g){const w=(0,O.m9)(y);Ui(w.auth,f,Wr);const A=M(w.auth,g);yield bn(!1,w,f.providerId),yield hc(A,w.auth);const k=yield lu(w);return A._openRedirect(w.auth,f,"linkViaRedirect",k)})).apply(this,arguments)}function Vo(){return(Vo=(0,u.Z)(function*(y,f){return yield On(y)._initializationPromise,fc(y,f,!1)})).apply(this,arguments)}function fc(y,f){return Df.apply(this,arguments)}function Df(){return(Df=(0,u.Z)(function*(y,f,g=!1){const w=On(y),A=M(w,f),j=yield new al(w,A,g).execute();return j&&!g&&(delete j.user._redirectEventId,yield w._persistUserIfCurrent(j.user),yield w._setRedirectUser(null,f)),j})).apply(this,arguments)}function lu(y){return cl.apply(this,arguments)}function cl(){return(cl=(0,u.Z)(function*(y){const f=Fo(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class uu{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(g=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Sf(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pc(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var w;if(f.error&&!pc(f)){const A=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(Pn(this.auth,A))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const w=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(kd(f))}saveEventToCache(f){this.cachedEventUids.add(kd(f)),this.lastProcessedEventTime=Date.now()}}function kd(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function pc({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Rd(y){return gc.apply(this,arguments)}function gc(){return(gc=(0,u.Z)(function*(y,f={}){return Et(y,"GET","/v1/projects",f)})).apply(this,arguments)}const Ty=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mc=/^https?/;function uo(){return(uo=(0,u.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Rd(y);for(const g of f)try{if(_c(g))return}catch(w){}rn(y,"unauthorized-domain")})).apply(this,arguments)}function _c(y){const f=Ci(),{protocol:g,hostname:w}=new URL(f);if(y.startsWith("chrome-extension://")){const j=new URL(y);return""===j.hostname&&""===w?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&j.hostname===w}if(!mc.test(g))return!1;if(Ty.test(y))return w===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const Md=new dn(3e4,6e4);function yc(){const y=mn().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Nd=null;function Ay(y){return Nd=Nd||function jg(y){return new Promise((f,g)=>{var w,A,k;function j(){yc(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{yc(),g(Pn(y,"network-request-failed"))},timeout:Md.get()})}if(null===(A=null===(w=mn().gapi)||void 0===w?void 0:w.iframes)||void 0===A?void 0:A.Iframe)f(gapi.iframes.getContext());else{if(!(null===(k=mn().gapi)||void 0===k?void 0:k.load)){const J=Ia("iframefcb");return mn()[J]=()=>{gapi.load?j():g(Pn(y,"network-request-failed"))},tu(`https://apis.google.com/js/api.js?onload=${J}`).catch(Re=>g(Re))}j()}}).catch(f=>{throw Nd=null,f})}(y),Nd}const $E=new dn(5e3,15e3),xy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ky=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zg(y){const f=y.config;Ae(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?et(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:y.name,v:se.SDK_VERSION},A=ky.get(y.config.apiHost);A&&(w.eid=A);const k=y._getFrameworks();return k.length&&(w.fw=k.join(",")),`${g}?${(0,O.xO)(w).slice(1)}`}function kf(){return kf=(0,u.Z)(function*(y){const f=yield Ay(y),g=mn().gapi;return Ae(g,y,"internal-error"),f.open({where:document.body,url:Zg(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xy,dontclear:!0},w=>new Promise(function(){var A=(0,u.Z)(function*(k,j){yield w.restyle({setHideOnLeave:!1});const J=Pn(y,"network-request-failed"),Re=mn().setTimeout(()=>{j(J)},$E.get());function Se(){mn().clearTimeout(Re),k(w)}w.ping(Se).then(Se,()=>{j(J)})});return function(k,j){return A.apply(this,arguments)}}()))}),kf.apply(this,arguments)}const cu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Rf{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Ps(y,f,g,w,A,k){Ae(y.config.authDomain,y,"auth-domain-config-required"),Ae(y.config.apiKey,y,"invalid-api-key");const j={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:w,v:se.SDK_VERSION,eventId:A};if(f instanceof Wr){f.setDefaultLanguage(y.languageCode),j.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(j.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Re,Se]of Object.entries(k||{}))j[Re]=Se}if(f instanceof Ts){const Re=f.getScopes().filter(Se=>""!==Se);Re.length>0&&(j.scopes=Re.join(","))}y.tenantId&&(j.tid=y.tenantId);const J=j;for(const Re of Object.keys(J))void 0===J[Re]&&delete J[Re];return`${function Mf({config:y}){return y.emulator?et(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(J).slice(1)}`}const vc="webStorageSupport";class hl extends class hu{constructor(f){this.factorId=f}_process(f,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,w);case"signin":return this._finalizeSignIn(f,g.credential);default:return fr("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new hl(f)}_finalizeEnroll(f,g,w){return function _f(y,f){return Et(y,"POST","/v2/accounts/mfaEnrollment:finalize",tn(y,f))}(f,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function Ug(y,f){return Et(y,"POST","/v2/accounts/mfaSignIn:finalize",tn(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let My=(()=>{class y{constructor(){}static assertion(g){return hl._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var fu="@firebase/auth",Od="0.19.11";class Wg{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,u.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(w=>{var A;f((null===(A=w)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function fl(){return window}function Fd(){return(Fd=(0,u.Z)(function*(y,f,g){var w;const{BuildInfo:A}=fl();Hn(f.sessionId,"AuthEvent did not contain a session ID");const k=yield Oy(f.sessionId),j={};return Ti()?j.ibi=A.packageName:bs()?j.apn=A.packageName:rn(y,"operation-not-supported-in-this-environment"),A.displayName&&(j.appDisplayName=A.displayName),j.sessionId=k,Ps(y,g,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,j)})).apply(this,arguments)}function pl(){return(pl=(0,u.Z)(function*(y){const{BuildInfo:f}=fl(),g={};Ti()?g.iosBundleId=f.packageName:bs()?g.androidPackageName=f.packageName:rn(y,"operation-not-supported-in-this-environment"),yield Rd(y,g)})).apply(this,arguments)}function Nf(){return(Nf=(0,u.Z)(function*(y,f,g){const{cordova:w}=fl();let A=()=>{};try{yield new Promise((k,j)=>{let J=null;function Re(){var Xe;k();const qt=null===(Xe=w.plugins.browsertab)||void 0===Xe?void 0:Xe.close;"function"==typeof qt&&qt(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Se(){J||(J=window.setTimeout(()=>{j(Pn(y,"redirect-cancelled-by-user"))},2e3))}function rt(){"visible"===(null==document?void 0:document.visibilityState)&&Se()}f.addPassiveListener(Re),document.addEventListener("resume",Se,!1),bs()&&document.addEventListener("visibilitychange",rt,!1),A=()=>{f.removePassiveListener(Re),document.removeEventListener("resume",Se,!1),document.removeEventListener("visibilitychange",rt,!1),J&&window.clearTimeout(J)}})}finally{A()}})).apply(this,arguments)}function Oy(y){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,u.Z)(function*(y){const f=Fy(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Fy(y){if(Hn(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let w=0;w<y.length;w++)g[w]=y.charCodeAt(w);return g}!function zg(y){(0,se._registerComponent)(new de.wA("auth",(f,{options:g})=>{const w=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),{apiKey:k,authDomain:j}=w.options;return((J,Re)=>{Ae(k&&!k.includes(":"),"invalid-api-key",{appName:J.name}),Ae(!(null==j?void 0:j.includes(":")),"argument-error",{appName:J.name});const Se={apiKey:k,authDomain:j,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:is(y)},rt=new ss(J,Re,Se);return function ar(y,f){const g=(null==f?void 0:f.persistence)||[],w=(Array.isArray(g)?g:[g]).map(en);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(w,null==f?void 0:f.popupRedirectResolver)}(rt,g),rt})(w,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,w)=>{f.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new de.wA("auth-internal",f=>{const g=On(f.getProvider("auth").getImmediate());return new Wg(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(fu,Od,function wc(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,se.registerVersion)(fu,Od,"esm2017")}("Browser");class yr extends uu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,u.Z)(function*(){yield f.initPromise})()}}function Bd(y){return xr.apply(this,arguments)}function xr(){return(xr=(0,u.Z)(function*(y){const f=yield Of()._get(Ff(y));return f&&(yield Of()._remove(Ff(y))),f})).apply(this,arguments)}function Pf(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*f.length);y.push(f.charAt(w))}return y.join("")}function Of(){return en(rl)}function Ff(y){return Tr("authEvent",y.config.apiKey,y.name)}function gu(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,O.zd)(g.join("?"))}function Ic(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Pn("no-auth-event")}}function ml(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Qg(y=(0,O.z$)()){return!("file:"!==ml()&&"ionic:"!==ml()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Jg(){try{const y=self.localStorage,f=Fo();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Hy(y=(0,O.z$)()){return function Tc(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function $y(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return Uf()&&(0,O.hl)()}return!1}function Uf(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vf(){return(function Lf(){return"http:"===ml()||"https:"===ml()}()||(0,O.ru)()||Qg())&&!function Zy(){return(0,O.b$)()||(0,O.UG)()}()&&Jg()&&!Uf()}function $d(){return Qg()&&"undefined"!=typeof document}function Bf(){return(Bf=(0,u.Z)(function*(){return!!$d()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Ki={LOCAL:"local",NONE:"none",SESSION:"session"},mu=Ae,jf="persistence";function Hd(y){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,u.Z)(function*(y){yield y._initializationPromise;const f=Xg(),g=Tr(jf,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function Xg(){var y;try{return(null===(y=function Gy(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const WE=Ae;class jo{constructor(){this.browserResolver=en(class qE{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mr,this._completeRedirectFn=fc}_openPopup(f,g,w,A){var k=this;return(0,u.Z)(function*(){var j;Hn(null===(j=k.eventManagers[f._key()])||void 0===j?void 0:j.manager,"_initialize() not called before _openPopup()");const J=Ps(f,g,w,Ci(),A);return function qg(y,f,g,w=500,A=600){const k=Math.max((window.screen.availHeight-A)/2,0).toString(),j=Math.max((window.screen.availWidth-w)/2,0).toString();let J="";const Re=Object.assign(Object.assign({},cu),{width:w.toString(),height:A.toString(),top:k,left:j}),Se=(0,O.z$)().toLowerCase();g&&(J=la(Se)?"_blank":g),aa(Se)&&(f=f||"http://localhost",Re.scrollbars="yes");const rt=Object.entries(Re).reduce((qt,[Vn,Zo])=>`${qt}${Vn}=${Zo},`,"");if(function Bi(y=(0,O.z$)()){var f;return Ti(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Se)&&"_self"!==J)return function Gg(y,f){const g=document.createElement("a");g.href=y,g.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(f||"",J),new Rf(null);const Xe=window.open(f||"",J,rt);Ae(Xe,y,"popup-blocked");try{Xe.focus()}catch(qt){}return new Rf(Xe)}(f,J,Fo())})()}_openRedirect(f,g,w,A){var k=this;return(0,u.Z)(function*(){return yield k._originValidation(f),function Ed(y){mn().location.href=y}(Ps(f,g,w,Ci(),A)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:A,promise:k}=this.eventManagers[g];return A?Promise.resolve(A):(Hn(k,"If manager is not set, promise should be"),k)}const w=this.initAndGetManager(f);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(f){var g=this;return(0,u.Z)(function*(){const w=yield function xf(y){return kf.apply(this,arguments)}(f),A=new uu(f);return w.register("authEvent",k=>(Ae(null==k?void 0:k.authEvent,f,"invalid-auth-event"),{status:A.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:A},g.iframes[f._key()]=w,A})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(vc,{type:vc},A=>{var k;const j=null===(k=null==A?void 0:A[0])||void 0===k?void 0:k[vc];void 0!==j&&g(!!j),rn(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Dy(y){return uo.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return zu()||Tt()||Ti()}}),this.cordovaResolver=en(class Yg{constructor(){this._redirectPersistence=mr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=fc}_initialize(f){var g=this;return(0,u.Z)(function*(){const w=f._key();let A=g.eventManagers.get(w);return A||(A=new yr(f),g.eventManagers.set(w,A),g.attachCallbackListeners(f,A)),A})()}_openPopup(f){rn(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,w,A){var k=this;return(0,u.Z)(function*(){!function Py(y){var f,g,w,A,k,j,J,Re,Se,rt;const Xe=fl();Ae("function"==typeof(null===(f=null==Xe?void 0:Xe.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ae(void 0!==(null===(g=null==Xe?void 0:Xe.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ae("function"==typeof(null===(k=null===(A=null===(w=null==Xe?void 0:Xe.cordova)||void 0===w?void 0:w.plugins)||void 0===A?void 0:A.browsertab)||void 0===k?void 0:k.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ae("function"==typeof(null===(Re=null===(J=null===(j=null==Xe?void 0:Xe.cordova)||void 0===j?void 0:j.plugins)||void 0===J?void 0:J.browsertab)||void 0===Re?void 0:Re.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ae("function"==typeof(null===(rt=null===(Se=null==Xe?void 0:Xe.cordova)||void 0===Se?void 0:Se.InAppBrowser)||void 0===rt?void 0:rt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const j=yield k._initialize(f);yield j.initialized(),j.resetRedirect(),function by(){Ms.clear()}(),yield k._originValidation(f);const J=function Vd(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Pf(),postBody:null,tenantId:y.tenantId,error:Pn(y,"no-auth-event")}}(f,w,A);yield function bc(y,f){return Of()._set(Ff(y),f)}(f,J);const Re=yield function hs(y,f,g){return Fd.apply(this,arguments)}(f,J,g),Se=yield function Ud(y){const{cordova:f}=fl();return new Promise(g=>{f.plugins.browsertab.isAvailable(w=>{let A=null;w?f.plugins.browsertab.openUrl(y):A=f.InAppBrowser.open(y,function Gr(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(A)})})}(Re);return function Ny(y,f,g){return Nf.apply(this,arguments)}(f,j,Se)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Ld(y){return pl.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:w,handleOpenURL:A,BuildInfo:k}=fl(),j=setTimeout((0,u.Z)(function*(){yield Bd(f),g.onEvent(Ic())}),500),J=function(){var rt=(0,u.Z)(function*(Xe){clearTimeout(j);const qt=yield Bd(f);let Vn=null;qt&&(null==Xe?void 0:Xe.url)&&(Vn=function Cc(y,f){var g,w;const A=function Ly(y){const f=gu(y),g=f.link?decodeURIComponent(f.link):void 0,w=gu(g).link,A=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return gu(A).link||A||w||g||y}(f);if(A.includes("/__/auth/callback")){const k=gu(A),j=k.firebaseError?function jd(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(k.firebaseError)):null,J=null===(w=null===(g=null==j?void 0:j.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],Re=J?Pn(J):null;return Re?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Re,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(qt,Xe.url)),g.onEvent(Vn||Ic())});return function(qt){return rt.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,J);const Re=A,Se=`${k.packageName.toLowerCase()}://`;fl().handleOpenURL=function(){var rt=(0,u.Z)(function*(Xe){if(Xe.toLowerCase().startsWith(Se)&&J({url:Xe}),"function"==typeof Re)try{Re(Xe)}catch(qt){console.error(qt)}});return function(Xe){return rt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=mr,this._completeRedirectFn=fc}_initialize(f){var g=this;return(0,u.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,w,A){var k=this;return(0,u.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openPopup(f,g,w,A)})()}_openRedirect(f,g,w,A){var k=this;return(0,u.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openRedirect(f,g,w,A)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return $d()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return WE(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,u.Z)(function*(){if(f.underlyingResolver)return;const g=yield function qy(){return Bf.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function Wy(y){return y.unwrap()}function Zf(y){return em(y)}function em(y){const{_tokenResponse:f}=y instanceof O.ZR?y.customData:y;if(!f)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return D.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=qa;break;case"facebook.com":w=Zl;break;case"github.com":w=Sn;break;case"twitter.com":w=ai;break;default:const{oauthIdToken:A,oauthAccessToken:k,oauthTokenSecret:j,pendingToken:J,nonce:Re}=f;return k||j||A||J?J?g.startsWith("saml.")?Zi._create(g,J):er._fromParams({providerId:g,signInMethod:g,pendingToken:J,idToken:A,accessToken:k}):new Fn(g).credential({idToken:A,accessToken:k,rawNonce:Re}):null}return y instanceof O.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function fi(y,f){return f.catch(g=>{throw g instanceof O.ZR&&function Dc(y,f){var g;const w=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new $f(y,function at(y,f){var g;const w=(0,O.m9)(y),A=f;return Ae(f.customData.operationType,w,"argument-error"),Ae(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),qi._fromError(w,A)}(y,f));else if(w){const A=em(f),k=f;A&&(k.credential=A,k.tenantId=w.tenantId||void 0,k.email=w.email||void 0,k.phoneNumber=w.phoneNumber||void 0)}}(y,g),g}).then(g=>{const A=g.user;return{operationType:g.operationType,credential:Zf(g),additionalUserInfo:ft(g),user:Fs.getOrCreate(A)}})}function _l(y,f){return _u.apply(this,arguments)}function _u(){return(_u=(0,u.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:w=>fi(y,g.confirm(w))}})).apply(this,arguments)}class $f{constructor(f,g){this.resolver=g,this.auth=function co(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return fi(Wy(this.auth),this.resolver.resolveSignIn(f))}}class Fs{constructor(f){this._delegate=f,this.multiFactor=function va(y){const f=(0,O.m9)(y);return Un.has(f)||Un.set(f,oo._fromUser(f)),Un.get(f)}(f)}static getOrCreate(f){return Fs.USER_MAP.has(f)||Fs.USER_MAP.set(f,new Fs(f)),Fs.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,u.Z)(function*(){return fi(g.auth,Ka(g._delegate,f))})()}linkWithPhoneNumber(f,g){var w=this;return(0,u.Z)(function*(){return _l(w.auth,function wn(y,f,g){return Wi.apply(this,arguments)}(w._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,u.Z)(function*(){return fi(g.auth,function zi(y,f,g){return Or.apply(this,arguments)}(g._delegate,f,jo))})()}linkWithRedirect(f){var g=this;return(0,u.Z)(function*(){return yield Hd(On(g.auth)),function If(y,f,g){return function Tf(y,f,g){return xi.apply(this,arguments)}(y,f,g)}(g._delegate,f,jo)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,u.Z)(function*(){return fi(g.auth,Sr(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return _l(this.auth,function su(y,f,g){return xa.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return fi(this.auth,function hi(y,f,g){return nr.apply(this,arguments)}(this._delegate,f,jo))}reauthenticateWithRedirect(f){var g=this;return(0,u.Z)(function*(){return yield Hd(On(g.auth)),function Iy(y,f,g){return function ZE(y,f,g){return xd.apply(this,arguments)}(y,f,g)}(g._delegate,f,jo)})()}sendEmailVerification(f){return function Yl(y,f){return Xa.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,u.Z)(function*(){return yield function ec(y,f){return Ie.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function Xl(y,f){return pf((0,O.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Og(y,f){return pf((0,O.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Bg(y,f){return I.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function gr(y,f){return ls.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function Ql(y,f,g){return el.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Fs.USER_MAP=new WeakMap;const yl=Ae;let Hf=(()=>{class y{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=g.options;yl(A,"invalid-api-key",{appName:g.name}),yl(A,"invalid-api-key",{appName:g.name});const k="undefined"!=typeof window?jo:void 0;this._delegate=w.initialize({options:{persistence:vl(A,g.name),popupRedirectResolver:k}}),this._delegate._updateErrorMap(rs),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Fs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function Vl(y,f,g){const w=On(y);Ae(w._canInitEmulator,w,"emulator-config-failed"),Ae(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const A=!!(null==g?void 0:g.disableWarnings),k=Di(f),{host:j,port:J}=function tf(y){const f=Di(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const k=A[1];return{host:k,port:kg(w.substr(k.length+1))}}{const[k,j]=w.split(":");return{host:k,port:kg(j)}}}(f);w.config.emulator={url:`${k}//${j}${null===J?"":`:${J}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:j,port:J,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function ji(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,w)}applyActionCode(g){return function Pg(y,f){return Gl.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return _a(this._delegate,g)}confirmPasswordReset(g,w){return function md(y,f,g){return Ro.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var A=this;return(0,u.Z)(function*(){return fi(A._delegate,function _d(y,f,g){return Ya.apply(this,arguments)}(A._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function wy(y,f){return ff.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function as(y,f){const g=Ao.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,u.Z)(function*(){yl(Vf(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function ka(y,f){return Vo.apply(this,arguments)}(g._delegate,jo);return w?fi(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Vy(y,f){On(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,w,A){const{next:k,error:j,complete:J}=zy(g,w,A);return this._delegate.onAuthStateChanged(k,j,J)}onIdTokenChanged(g,w,A){const{next:k,error:j,complete:J}=zy(g,w,A);return this._delegate.onIdTokenChanged(k,j,J)}sendSignInLinkToEmail(g,w){return function Kl(y,f,g){return Tn.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function ql(y,f,g){return ko.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,u.Z)(function*(){let A;switch(function GE(y,f){mu(Object.values(Ki).includes(f),y,"invalid-persistence-type"),(0,O.b$)()?mu(f!==Ki.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?mu(f===Ki.NONE,y,"unsupported-persistence-type"):Uf()?mu(f===Ki.NONE||f===Ki.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):mu(f===Ki.NONE||Jg(),y,"unsupported-persistence-type")}(w._delegate,g),g){case Ki.SESSION:A=mr;break;case Ki.LOCAL:A=(yield en(xs)._isAvailable())?xs:rl;break;case Ki.NONE:A=vn;break;default:return rn("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return fi(this._delegate,function Hl(y){return Ga.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return fi(this._delegate,nc(this._delegate,g))}signInWithCustomToken(g){return fi(this._delegate,function $i(y,f){return sc.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return fi(this._delegate,function df(y,f,g){return nc((0,O.m9)(y),So.credential(f,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return fi(this._delegate,function Ln(y,f,g){return Qa.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return _l(this._delegate,function ks(y,f,g){return iu.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,u.Z)(function*(){return yl(Vf(),w._delegate,"operation-not-supported-in-this-environment"),fi(w._delegate,function Ht(y,f,g){return Ct.apply(this,arguments)}(w._delegate,g,jo))})()}signInWithRedirect(g){var w=this;return(0,u.Z)(function*(){return yl(Vf(),w._delegate,"operation-not-supported-in-this-environment"),yield Hd(w._delegate),function Cy(y,f,g){return function jE(y,f,g){return Sd.apply(this,arguments)}(y,f,g)}(w._delegate,g,jo)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function ac(y,f){return zl.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ki,y})();function zy(y,f,g){let w=y;"function"!=typeof y&&({next:w,error:f,complete:g}=y);const A=w;return{next:j=>A(j&&Fs.getOrCreate(j)),error:f,complete:g}}function vl(y,f){const g=function Os(y,f){const g=Xg();if(!g)return[];const w=Tr(jf,y,f);switch(g.getItem(w)){case Ki.NONE:return[vn];case Ki.LOCAL:return[xs,mr];case Ki.SESSION:return[mr];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(xs)&&g.push(xs),"undefined"!=typeof window)for(const w of[rl,mr])g.includes(w)||g.push(w);return g.includes(vn)||g.push(vn),g}class Ac{constructor(){this.providerId="phone",this._delegate=new D(Wy(Y.Z.auth()))}static credential(f,g){return D.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Ac.PHONE_SIGN_IN_METHOD=D.PHONE_SIGN_IN_METHOD,Ac.PROVIDER_ID=D.PROVIDER_ID;const tm=Ae;class pi{constructor(f,g,w=Y.Z.app()){var A;tm(null===(A=w.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Gi(f,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function qd(y){y.INTERNAL.registerComponent(new de.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new Hf(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:So,FacebookAuthProvider:Zl,GithubAuthProvider:Sn,GoogleAuthProvider:qa,OAuthProvider:Fn,SAMLAuthProvider:Ds,PhoneAuthProvider:Ac,PhoneMultiFactorGenerator:My,RecaptchaVerifier:pi,TwitterAuthProvider:ai,Auth:Hf,AuthCredential:ua,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.11")}(Y.Z)},8306:(ut,Ee,F)=>{F.d(Ee,{y:()=>q});var u=F(930),Y=F(727),O=F(8822),se=F(4671);var oe=F(2416),ae=F(576),fe=F(2806);let q=(()=>{class Te{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const Fe=new Te;return Fe.source=this,Fe.operator=Ue,Fe}subscribe(Ue,Fe,X){const De=function $e(Te){return Te&&Te instanceof u.Lv||function te(Te){return Te&&(0,ae.m)(Te.next)&&(0,ae.m)(Te.error)&&(0,ae.m)(Te.complete)}(Te)&&(0,Y.Nn)(Te)}(Ue)?Ue:new u.Hp(Ue,Fe,X);return(0,fe.x)(()=>{const{operator:Le,source:Ne}=this;De.add(Le?Le.call(De,Ne):Ne?this._subscribe(De):this._trySubscribe(De))}),De}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(Fe){Ue.error(Fe)}}forEach(Ue,Fe){return new(Fe=G(Fe))((X,De)=>{let Le;Le=this.subscribe(Ne=>{try{Ue(Ne)}catch(st){De(st),null==Le||Le.unsubscribe()}},De,X)})}_subscribe(Ue){var Fe;return null===(Fe=this.source)||void 0===Fe?void 0:Fe.subscribe(Ue)}[O.L](){return this}pipe(...Ue){return function ye(Te){return 0===Te.length?se.y:1===Te.length?Te[0]:function(Ue){return Te.reduce((Fe,X)=>X(Fe),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=G(Ue))((Fe,X)=>{let De;this.subscribe(Le=>De=Le,Le=>X(Le),()=>Fe(De))})}}return Te.create=He=>new Te(He),Te})();function G(Te){var He;return null!==(He=null!=Te?Te:oe.v.Promise)&&void 0!==He?He:Promise}},7579:(ut,Ee,F)=>{F.d(Ee,{x:()=>oe});var u=F(8306),Y=F(727);const se=(0,F(3888).d)(fe=>function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=F(8737),ye=F(2806);let oe=(()=>{class fe extends u.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const te=new ae(this,this);return te.operator=G,te}_throwIfClosed(){if(this.closed)throw new se}next(G){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const te=this.observers.slice();for(const $e of te)$e.next(G)}})}error(G){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:te}=this;for(;te.length;)te.shift().error(G)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:te,isStopped:$e,observers:Te}=this;return te||$e?Y.Lc:(Te.push(G),new Y.w0(()=>(0,re.P)(Te,G)))}_checkFinalizedStatuses(G){const{hasError:te,thrownError:$e,isStopped:Te}=this;te?G.error($e):Te&&G.complete()}asObservable(){const G=new u.y;return G.source=this,G}}return fe.create=(q,G)=>new ae(q,G),fe})();class ae extends oe{constructor(q,G){super(),this.destination=q,this.source=G}next(q){var G,te;null===(te=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===te||te.call(G,q)}error(q){var G,te;null===(te=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===te||te.call(G,q)}complete(){var q,G;null===(G=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===G||G.call(q)}_subscribe(q){var G,te;return null!==(te=null===(G=this.source)||void 0===G?void 0:G.subscribe(q))&&void 0!==te?te:Y.Lc}}},930:(ut,Ee,F)=>{F.d(Ee,{Hp:()=>$e,Lv:()=>te});var u=F(576),Y=F(727),O=F(2416),se=F(7849),re=F(5032);const ye=fe("C",void 0,void 0);function fe(X,De,Le){return{kind:X,value:De,error:Le}}var q=F(3410),G=F(2806);class te extends Y.w0{constructor(De){super(),this.isStopped=!1,De?(this.destination=De,(0,Y.Nn)(De)&&De.add(this)):this.destination=Fe}static create(De,Le,Ne){return new $e(De,Le,Ne)}next(De){this.isStopped?Ue(function ae(X){return fe("N",X,void 0)}(De),this):this._next(De)}error(De){this.isStopped?Ue(function oe(X){return fe("E",void 0,X)}(De),this):(this.isStopped=!0,this._error(De))}complete(){this.isStopped?Ue(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(De){this.destination.next(De)}_error(De){try{this.destination.error(De)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class $e extends te{constructor(De,Le,Ne){let st;if(super(),(0,u.m)(De))st=De;else if(De){let ke;({next:st,error:Le,complete:Ne}=De),this&&O.v.useDeprecatedNextContext?(ke=Object.create(De),ke.unsubscribe=()=>this.unsubscribe()):ke=De,st=null==st?void 0:st.bind(ke),Le=null==Le?void 0:Le.bind(ke),Ne=null==Ne?void 0:Ne.bind(ke)}this.destination={next:st?Te(st):re.Z,error:Te(null!=Le?Le:He),complete:Ne?Te(Ne):re.Z}}}function Te(X,De){return(...Le)=>{try{X(...Le)}catch(Ne){O.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Ne):(0,se.h)(Ne)}}}function He(X){throw X}function Ue(X,De){const{onStoppedNotification:Le}=O.v;Le&&q.z.setTimeout(()=>Le(X,De))}const Fe={closed:!0,next:re.Z,error:He,complete:re.Z}},727:(ut,Ee,F)=>{F.d(Ee,{Lc:()=>ye,w0:()=>re,Nn:()=>oe});var u=F(576);const O=(0,F(3888).d)(fe=>function(G){fe(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((te,$e)=>`${$e+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var se=F(8737);class re{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Te of G)Te.remove(this);else G.remove(this);const{initialTeardown:te}=this;if((0,u.m)(te))try{te()}catch(Te){q=Te instanceof O?Te.errors:[Te]}const{_teardowns:$e}=this;if($e){this._teardowns=null;for(const Te of $e)try{ae(Te)}catch(He){q=null!=q?q:[],He instanceof O?q=[...q,...He.errors]:q.push(He)}}if(q)throw new O(q)}}add(q){var G;if(q&&q!==this)if(this.closed)ae(q);else{if(q instanceof re){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._teardowns=null!==(G=this._teardowns)&&void 0!==G?G:[]).push(q)}}_hasParent(q){const{_parentage:G}=this;return G===q||Array.isArray(G)&&G.includes(q)}_addParent(q){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(q),G):G?[G,q]:q}_removeParent(q){const{_parentage:G}=this;G===q?this._parentage=null:Array.isArray(G)&&(0,se.P)(G,q)}remove(q){const{_teardowns:G}=this;G&&(0,se.P)(G,q),q instanceof re&&q._removeParent(this)}}re.EMPTY=(()=>{const fe=new re;return fe.closed=!0,fe})();const ye=re.EMPTY;function oe(fe){return fe instanceof re||fe&&"closed"in fe&&(0,u.m)(fe.remove)&&(0,u.m)(fe.add)&&(0,u.m)(fe.unsubscribe)}function ae(fe){(0,u.m)(fe)?fe():fe.unsubscribe()}},2416:(ut,Ee,F)=>{F.d(Ee,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ut,Ee,F)=>{F.d(Ee,{E:()=>Y});const Y=new(F(8306).y)(re=>re.complete())},8996:(ut,Ee,F)=>{F.d(Ee,{D:()=>st});var u=F(8421),Y=F(5363),O=F(9468),ye=F(8306),ae=F(2202),fe=F(576),q=F(9672);function te(ke,Ge){if(!ke)throw new Error("Iterable cannot be null");return new ye.y(Qe=>{(0,q.f)(Qe,Ge,()=>{const ht=ke[Symbol.asyncIterator]();(0,q.f)(Qe,Ge,()=>{ht.next().then(ee=>{ee.done?Qe.complete():Qe.next(ee.value)})},0,!0)})})}var $e=F(3670),Te=F(8239),He=F(1144),Ue=F(6495),Fe=F(2206),X=F(4532),De=F(3260);function st(ke,Ge){return Ge?function Ne(ke,Ge){if(null!=ke){if((0,$e.c)(ke))return function se(ke,Ge){return(0,u.Xf)(ke).pipe((0,O.R)(Ge),(0,Y.Q)(Ge))}(ke,Ge);if((0,He.z)(ke))return function oe(ke,Ge){return new ye.y(Qe=>{let ht=0;return Ge.schedule(function(){ht===ke.length?Qe.complete():(Qe.next(ke[ht++]),Qe.closed||this.schedule())})})}(ke,Ge);if((0,Te.t)(ke))return function re(ke,Ge){return(0,u.Xf)(ke).pipe((0,O.R)(Ge),(0,Y.Q)(Ge))}(ke,Ge);if((0,Fe.D)(ke))return te(ke,Ge);if((0,Ue.T)(ke))return function G(ke,Ge){return new ye.y(Qe=>{let ht;return(0,q.f)(Qe,Ge,()=>{ht=ke[ae.h](),(0,q.f)(Qe,Ge,()=>{let ee,ce;try{({value:ee,done:ce}=ht.next())}catch(_e){return void Qe.error(_e)}ce?Qe.complete():Qe.next(ee)},0,!0)}),()=>(0,fe.m)(null==ht?void 0:ht.return)&&ht.return()})}(ke,Ge);if((0,De.L)(ke))return function Le(ke,Ge){return te((0,De.Q)(ke),Ge)}(ke,Ge)}throw(0,X.z)(ke)}(ke,Ge):(0,u.Xf)(ke)}},8421:(ut,Ee,F)=>{F.d(Ee,{Xf:()=>$e});var u=F(5987),Y=F(1144),O=F(8239),se=F(8306),re=F(3670),ye=F(2206),oe=F(4532),ae=F(6495),fe=F(3260),q=F(576),G=F(7849),te=F(8822);function $e(Ne){if(Ne instanceof se.y)return Ne;if(null!=Ne){if((0,re.c)(Ne))return function Te(Ne){return new se.y(st=>{const ke=Ne[te.L]();if((0,q.m)(ke.subscribe))return ke.subscribe(st);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ne);if((0,Y.z)(Ne))return function He(Ne){return new se.y(st=>{for(let ke=0;ke<Ne.length&&!st.closed;ke++)st.next(Ne[ke]);st.complete()})}(Ne);if((0,O.t)(Ne))return function Ue(Ne){return new se.y(st=>{Ne.then(ke=>{st.closed||(st.next(ke),st.complete())},ke=>st.error(ke)).then(null,G.h)})}(Ne);if((0,ye.D)(Ne))return X(Ne);if((0,ae.T)(Ne))return function Fe(Ne){return new se.y(st=>{for(const ke of Ne)if(st.next(ke),st.closed)return;st.complete()})}(Ne);if((0,fe.L)(Ne))return function De(Ne){return X((0,fe.Q)(Ne))}(Ne)}throw(0,oe.z)(Ne)}function X(Ne){return new se.y(st=>{(function Le(Ne,st){var ke,Ge,Qe,ht;return(0,u.mG)(this,void 0,void 0,function*(){try{for(ke=(0,u.KL)(Ne);!(Ge=yield ke.next()).done;)if(st.next(Ge.value),st.closed)return}catch(ee){Qe={error:ee}}finally{try{Ge&&!Ge.done&&(ht=ke.return)&&(yield ht.call(ke))}finally{if(Qe)throw Qe.error}}st.complete()})})(Ne,st).catch(ke=>st.error(ke))})}},6451:(ut,Ee,F)=>{F.d(Ee,{T:()=>ye});var u=F(8189),Y=F(8421),O=F(515),se=F(3269),re=F(8996);function ye(...oe){const ae=(0,se.yG)(oe),fe=(0,se._6)(oe,1/0),q=oe;return q.length?1===q.length?(0,Y.Xf)(q[0]):(0,u.J)(fe)((0,re.D)(q,ae)):O.E}},5403:(ut,Ee,F)=>{F.d(Ee,{Q:()=>Y});var u=F(930);class Y extends u.Lv{constructor(se,re,ye,oe,ae){super(se),this.onFinalize=ae,this._next=re?function(fe){try{re(fe)}catch(q){se.error(q)}}:super._next,this._error=oe?function(fe){try{oe(fe)}catch(q){se.error(q)}finally{this.unsubscribe()}}:super._error,this._complete=ye?function(){try{ye()}catch(fe){se.error(fe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;const{closed:re}=this;super.unsubscribe(),!re&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}},4004:(ut,Ee,F)=>{F.d(Ee,{U:()=>O});var u=F(4482),Y=F(5403);function O(se,re){return(0,u.e)((ye,oe)=>{let ae=0;ye.subscribe(new Y.Q(oe,fe=>{oe.next(se.call(re,fe,ae++))}))})}},8189:(ut,Ee,F)=>{F.d(Ee,{J:()=>O});var u=F(5577),Y=F(4671);function O(se=1/0){return(0,u.z)(Y.y,se)}},5577:(ut,Ee,F)=>{F.d(Ee,{z:()=>ae});var u=F(4004),Y=F(8421),O=F(4482),se=F(9672),re=F(5403),oe=F(576);function ae(fe,q,G=1/0){return(0,oe.m)(q)?ae((te,$e)=>(0,u.U)((Te,He)=>q(te,Te,$e,He))((0,Y.Xf)(fe(te,$e))),G):("number"==typeof q&&(G=q),(0,O.e)((te,$e)=>function ye(fe,q,G,te,$e,Te,He,Ue){const Fe=[];let X=0,De=0,Le=!1;const Ne=()=>{Le&&!Fe.length&&!X&&q.complete()},st=Ge=>X<te?ke(Ge):Fe.push(Ge),ke=Ge=>{Te&&q.next(Ge),X++;let Qe=!1;(0,Y.Xf)(G(Ge,De++)).subscribe(new re.Q(q,ht=>{null==$e||$e(ht),Te?st(ht):q.next(ht)},()=>{Qe=!0},void 0,()=>{if(Qe)try{for(X--;Fe.length&&X<te;){const ht=Fe.shift();He?(0,se.f)(q,He,()=>ke(ht)):ke(ht)}Ne()}catch(ht){q.error(ht)}}))};return fe.subscribe(new re.Q(q,st,()=>{Le=!0,Ne()})),()=>{null==Ue||Ue()}}(te,$e,fe,G)))}},5363:(ut,Ee,F)=>{F.d(Ee,{Q:()=>se});var u=F(9672),Y=F(4482),O=F(5403);function se(re,ye=0){return(0,Y.e)((oe,ae)=>{oe.subscribe(new O.Q(ae,fe=>(0,u.f)(ae,re,()=>ae.next(fe),ye),()=>(0,u.f)(ae,re,()=>ae.complete(),ye),fe=>(0,u.f)(ae,re,()=>ae.error(fe),ye)))})}},3099:(ut,Ee,F)=>{F.d(Ee,{B:()=>ye});var u=F(8996),Y=F(5698),O=F(7579),se=F(930),re=F(4482);function ye(ae={}){const{connector:fe=(()=>new O.x),resetOnError:q=!0,resetOnComplete:G=!0,resetOnRefCountZero:te=!0}=ae;return $e=>{let Te=null,He=null,Ue=null,Fe=0,X=!1,De=!1;const Le=()=>{null==He||He.unsubscribe(),He=null},Ne=()=>{Le(),Te=Ue=null,X=De=!1},st=()=>{const ke=Te;Ne(),null==ke||ke.unsubscribe()};return(0,re.e)((ke,Ge)=>{Fe++,!De&&!X&&Le();const Qe=Ue=null!=Ue?Ue:fe();Ge.add(()=>{Fe--,0===Fe&&!De&&!X&&(He=oe(st,te))}),Qe.subscribe(Ge),Te||(Te=new se.Hp({next:ht=>Qe.next(ht),error:ht=>{De=!0,Le(),He=oe(Ne,q,ht),Qe.error(ht)},complete:()=>{X=!0,Le(),He=oe(Ne,G),Qe.complete()}}),(0,u.D)(ke).subscribe(Te))})($e)}}function oe(ae,fe,...q){return!0===fe?(ae(),null):!1===fe?null:fe(...q).pipe((0,Y.q)(1)).subscribe(()=>ae())}},9468:(ut,Ee,F)=>{F.d(Ee,{R:()=>Y});var u=F(4482);function Y(O,se=0){return(0,u.e)((re,ye)=>{ye.add(O.schedule(()=>re.subscribe(ye),se))})}},5698:(ut,Ee,F)=>{F.d(Ee,{q:()=>se});var u=F(515),Y=F(4482),O=F(5403);function se(re){return re<=0?()=>u.E:(0,Y.e)((ye,oe)=>{let ae=0;ye.subscribe(new O.Q(oe,fe=>{++ae<=re&&(oe.next(fe),re<=ae&&oe.complete())}))})}},8505:(ut,Ee,F)=>{F.d(Ee,{b:()=>re});var u=F(576),Y=F(4482),O=F(5403),se=F(4671);function re(ye,oe,ae){const fe=(0,u.m)(ye)||oe||ae?{next:ye,error:oe,complete:ae}:ye;return fe?(0,Y.e)((q,G)=>{var te;null===(te=fe.subscribe)||void 0===te||te.call(fe);let $e=!0;q.subscribe(new O.Q(G,Te=>{var He;null===(He=fe.next)||void 0===He||He.call(fe,Te),G.next(Te)},()=>{var Te;$e=!1,null===(Te=fe.complete)||void 0===Te||Te.call(fe),G.complete()},Te=>{var He;$e=!1,null===(He=fe.error)||void 0===He||He.call(fe,Te),G.error(Te)},()=>{var Te,He;$e&&(null===(Te=fe.unsubscribe)||void 0===Te||Te.call(fe)),null===(He=fe.finalize)||void 0===He||He.call(fe)}))}):se.y}},4408:(ut,Ee,F)=>{F.d(Ee,{o:()=>re});var u=F(727);class Y extends u.w0{constructor(oe,ae){super()}schedule(oe,ae=0){return this}}const O={setInterval(...ye){const{delegate:oe}=O;return((null==oe?void 0:oe.setInterval)||setInterval)(...ye)},clearInterval(ye){const{delegate:oe}=O;return((null==oe?void 0:oe.clearInterval)||clearInterval)(ye)},delegate:void 0};var se=F(8737);class re extends Y{constructor(oe,ae){super(oe,ae),this.scheduler=oe,this.work=ae,this.pending=!1}schedule(oe,ae=0){if(this.closed)return this;this.state=oe;const fe=this.id,q=this.scheduler;return null!=fe&&(this.id=this.recycleAsyncId(q,fe,ae)),this.pending=!0,this.delay=ae,this.id=this.id||this.requestAsyncId(q,this.id,ae),this}requestAsyncId(oe,ae,fe=0){return O.setInterval(oe.flush.bind(oe,this),fe)}recycleAsyncId(oe,ae,fe=0){if(null!=fe&&this.delay===fe&&!1===this.pending)return ae;O.clearInterval(ae)}execute(oe,ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(oe,ae);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,ae){let q,fe=!1;try{this.work(oe)}catch(G){fe=!0,q=G||new Error("Scheduled action threw falsy error")}if(fe)return this.unsubscribe(),q}unsubscribe(){if(!this.closed){const{id:oe,scheduler:ae}=this,{actions:fe}=ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(fe,this),null!=oe&&(this.id=this.recycleAsyncId(ae,oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(ut,Ee,F)=>{F.d(Ee,{v:()=>O});var u=F(6063);class Y{constructor(re,ye=Y.now){this.schedulerActionCtor=re,this.now=ye}schedule(re,ye=0,oe){return new this.schedulerActionCtor(this,re).schedule(oe,ye)}}Y.now=u.l.now;class O extends Y{constructor(re,ye=Y.now){super(re,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:ye}=this;if(this._active)return void ye.push(re);let oe;this._active=!0;do{if(oe=re.execute(re.state,re.delay))break}while(re=ye.shift());if(this._active=!1,oe){for(;re=ye.shift();)re.unsubscribe();throw oe}}}},4986:(ut,Ee,F)=>{F.d(Ee,{P:()=>se,z:()=>O});var u=F(4408);const O=new(F(7565).v)(u.o),se=O},6063:(ut,Ee,F)=>{F.d(Ee,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},3410:(ut,Ee,F)=>{F.d(Ee,{z:()=>u});const u={setTimeout(...Y){const{delegate:O}=u;return((null==O?void 0:O.setTimeout)||setTimeout)(...Y)},clearTimeout(Y){const{delegate:O}=u;return((null==O?void 0:O.clearTimeout)||clearTimeout)(Y)},delegate:void 0}},2202:(ut,Ee,F)=>{F.d(Ee,{h:()=>Y});const Y=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ut,Ee,F)=>{F.d(Ee,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ut,Ee,F)=>{F.d(Ee,{_6:()=>ye,jO:()=>se,yG:()=>re});var u=F(576),Y=F(3532);function O(oe){return oe[oe.length-1]}function se(oe){return(0,u.m)(O(oe))?oe.pop():void 0}function re(oe){return(0,Y.K)(O(oe))?oe.pop():void 0}function ye(oe,ae){return"number"==typeof O(oe)?oe.pop():ae}},8737:(ut,Ee,F)=>{function u(Y,O){if(Y){const se=Y.indexOf(O);0<=se&&Y.splice(se,1)}}F.d(Ee,{P:()=>u})},3888:(ut,Ee,F)=>{function u(Y){const se=Y(re=>{Error.call(re),re.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}F.d(Ee,{d:()=>u})},2806:(ut,Ee,F)=>{F.d(Ee,{O:()=>se,x:()=>O});var u=F(2416);let Y=null;function O(re){if(u.v.useDeprecatedSynchronousErrorHandling){const ye=!Y;if(ye&&(Y={errorThrown:!1,error:null}),re(),ye){const{errorThrown:oe,error:ae}=Y;if(Y=null,oe)throw ae}}else re()}function se(re){u.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=re)}},9672:(ut,Ee,F)=>{function u(Y,O,se,re=0,ye=!1){const oe=O.schedule(function(){se(),ye?Y.add(this.schedule(null,re)):this.unsubscribe()},re);if(Y.add(oe),!ye)return oe}F.d(Ee,{f:()=>u})},4671:(ut,Ee,F)=>{function u(Y){return Y}F.d(Ee,{y:()=>u})},1144:(ut,Ee,F)=>{F.d(Ee,{z:()=>u});const u=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(ut,Ee,F)=>{F.d(Ee,{D:()=>Y});var u=F(576);function Y(O){return Symbol.asyncIterator&&(0,u.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(ut,Ee,F)=>{function u(Y){return"function"==typeof Y}F.d(Ee,{m:()=>u})},3670:(ut,Ee,F)=>{F.d(Ee,{c:()=>O});var u=F(8822),Y=F(576);function O(se){return(0,Y.m)(se[u.L])}},6495:(ut,Ee,F)=>{F.d(Ee,{T:()=>O});var u=F(2202),Y=F(576);function O(se){return(0,Y.m)(null==se?void 0:se[u.h])}},8239:(ut,Ee,F)=>{F.d(Ee,{t:()=>Y});var u=F(576);function Y(O){return(0,u.m)(null==O?void 0:O.then)}},3260:(ut,Ee,F)=>{F.d(Ee,{L:()=>se,Q:()=>O});var u=F(5987),Y=F(576);function O(re){return(0,u.FC)(this,arguments,function*(){const oe=re.getReader();try{for(;;){const{value:ae,done:fe}=yield(0,u.qq)(oe.read());if(fe)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(ae)}}finally{oe.releaseLock()}})}function se(re){return(0,Y.m)(null==re?void 0:re.getReader)}},3532:(ut,Ee,F)=>{F.d(Ee,{K:()=>Y});var u=F(576);function Y(O){return O&&(0,u.m)(O.schedule)}},4482:(ut,Ee,F)=>{F.d(Ee,{A:()=>Y,e:()=>O});var u=F(576);function Y(se){return(0,u.m)(null==se?void 0:se.lift)}function O(se){return re=>{if(Y(re))return re.lift(function(ye){try{return se(ye,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ut,Ee,F)=>{function u(){}F.d(Ee,{Z:()=>u})},7849:(ut,Ee,F)=>{F.d(Ee,{h:()=>O});var u=F(2416),Y=F(3410);function O(se){Y.z.setTimeout(()=>{const{onUnhandledError:re}=u.v;if(!re)throw se;re(se)})}},4532:(ut,Ee,F)=>{function u(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ee,{z:()=>u})},5987:(ut,Ee,F)=>{function ae(ee,ce,_e,we){return new(_e||(_e=Promise))(function(de,Nt){function Xt(St){try{kt(we.next(St))}catch(vt){Nt(vt)}}function Qn(St){try{kt(we.throw(St))}catch(vt){Nt(vt)}}function kt(St){St.done?de(St.value):function Pe(de){return de instanceof _e?de:new _e(function(Nt){Nt(de)})}(St.value).then(Xt,Qn)}kt((we=we.apply(ee,ce||[])).next())})}function Fe(ee){return this instanceof Fe?(this.v=ee,this):new Fe(ee)}function X(ee,ce,_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,we=_e.apply(ee,ce||[]),de=[];return Pe={},Nt("next"),Nt("throw"),Nt("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe;function Nt(_n){we[_n]&&(Pe[_n]=function(rs){return new Promise(function(qr,yn){de.push([_n,rs,qr,yn])>1||Xt(_n,rs)})})}function Xt(_n,rs){try{!function Qn(_n){_n.value instanceof Fe?Promise.resolve(_n.value.v).then(kt,St):vt(de[0][2],_n)}(we[_n](rs))}catch(qr){vt(de[0][3],qr)}}function kt(_n){Xt("next",_n)}function St(_n){Xt("throw",_n)}function vt(_n,rs){_n(rs),de.shift(),de.length&&Xt(de[0][0],de[0][1])}}function Le(ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _e,ce=ee[Symbol.asyncIterator];return ce?ce.call(ee):(ee=function te(ee){var ce="function"==typeof Symbol&&Symbol.iterator,_e=ce&&ee[ce],we=0;if(_e)return _e.call(ee);if(ee&&"number"==typeof ee.length)return{next:function(){return ee&&we>=ee.length&&(ee=void 0),{value:ee&&ee[we++],done:!ee}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(ee),_e={},we("next"),we("throw"),we("return"),_e[Symbol.asyncIterator]=function(){return this},_e);function we(de){_e[de]=ee[de]&&function(Nt){return new Promise(function(Xt,Qn){!function Pe(de,Nt,Xt,Qn){Promise.resolve(Qn).then(function(kt){de({value:kt,done:Xt})},Nt)}(Xt,Qn,(Nt=ee[de](Nt)).done,Nt.value)})}}}F.d(Ee,{FC:()=>X,KL:()=>Le,mG:()=>ae,qq:()=>Fe})},5e3:(ut,Ee,F)=>{F.d(Ee,{$8M:()=>sl,$Z:()=>Wb,AFp:()=>VI,ALo:()=>l_,AaK:()=>ae,BQk:()=>Gv,CHM:()=>ro,CRH:()=>_I,CZH:()=>La,CqO:()=>Jb,EJc:()=>uw,EpF:()=>Yb,F4k:()=>Qb,FYo:()=>JC,FiY:()=>Or,G48:()=>iS,GfV:()=>XC,Gpc:()=>G,JOm:()=>co,LFG:()=>ie,LSH:()=>Ld,Lbi:()=>aw,MAs:()=>Mu,NdJ:()=>zv,O4$:()=>Qa,OlP:()=>ln,Oqu:()=>Sl,PXZ:()=>GI,Q6J:()=>$v,QGY:()=>Wv,Qsj:()=>l1,R0b:()=>wr,RDi:()=>cf,Rgc:()=>Up,SBq:()=>_i,Sil:()=>cw,Suo:()=>mI,TTD:()=>To,TgZ:()=>hh,VLi:()=>yi,W1O:()=>EI,X6Q:()=>rS,XFs:()=>mt,Xpm:()=>H,Y36:()=>_p,YKP:()=>p1,YNc:()=>Fv,Yjl:()=>Jn,Yz7:()=>yn,ZZ4:()=>D_,_Bn:()=>zC,_UZ:()=>qv,_Vd:()=>Mp,_c5:()=>oT,_uU:()=>Ip,aQg:()=>A_,c2e:()=>jI,cJS:()=>$n,cg1:()=>E0,dDg:()=>HI,deG:()=>yf,dqk:()=>Et,eFA:()=>fw,ekj:()=>Zm,g9A:()=>ow,h0i:()=>Pp,hGG:()=>Jp,hij:()=>gh,iGM:()=>Zp,ifc:()=>et,ip1:()=>m_,kL8:()=>bC,kcU:()=>Ja,lG2:()=>pr,lcZ:()=>sI,n5z:()=>Ed,oAB:()=>Ve,oxw:()=>Xv,q4F:()=>U0,qLn:()=>Tc,qOj:()=>cp,qZA:()=>yp,s9C:()=>e0,sBO:()=>zI,sIi:()=>ih,s_b:()=>Ih,soG:()=>__,tBr:()=>zi,tb:()=>lw,tp0:()=>Fr,uIk:()=>km,vHH:()=>He,vpe:()=>Xo,wAp:()=>yt,xi3:()=>oI,xp6:()=>Xy,ynx:()=>vp,z2F:()=>Sh,zSh:()=>wm,zs3:()=>fo});var u=F(7579),Y=F(727),O=F(8306),se=F(6451),re=F(3099);function ye(s){for(let o in s)if(s[o]===ye)return o;throw Error("Could not find renamed property on target object.")}function oe(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function ae(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ae).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function fe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const q=ye({__forward_ref__:ye});function G(s){return s.__forward_ref__=G,s.toString=function(){return ae(this())},s}function te(s){return $e(s)?s():s}function $e(s){return"function"==typeof s&&s.hasOwnProperty(q)&&s.__forward_ref__===G}class He extends Error{constructor(o,l){super(function Fe(s,o){return`${s?`NG0${s}: `:""}${o}`}(o,l)),this.code=o}}function X(s){return"string"==typeof s?s:null==s?"":String(s)}function De(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():X(s)}function ke(s,o){const l=o?` in ${o}`:"";throw new He("201",`No provider for ${De(s)} found${l}`)}function St(s,o){null==s&&function vt(s,o,l,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${l} ${d} ${o} <=Actual]`))}(o,s,null,"!=")}function yn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function $n(s){return{providers:s.providers||[],imports:s.imports||[]}}function or(s){return rn(s,br)||rn(s,fr)}function rn(s,o){return s.hasOwnProperty(o)?s[o]:null}function Ui(s){return s&&(s.hasOwnProperty(Ae)||s.hasOwnProperty(Hn))?s[Ae]:null}const br=ye({\u0275prov:ye}),Ae=ye({\u0275inj:ye}),fr=ye({ngInjectableDef:ye}),Hn=ye({ngInjectorDef:ye});var mt=(()=>((mt=mt||{})[mt.Default=0]="Default",mt[mt.Host=1]="Host",mt[mt.Self=2]="Self",mt[mt.SkipSelf=4]="SkipSelf",mt[mt.Optional=8]="Optional",mt))();let en;function ar(s){const o=en;return en=s,o}function Ci(s,o,l){const d=or(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&mt.Optional?null:void 0!==o?o:void ke(ae(s),"Injector")}function Cr(s){return{toString:s}.toString()}var qn=(()=>((qn=qn||{})[qn.OnPush=0]="OnPush",qn[qn.Default=1]="Default",qn))(),et=(()=>{return(s=et||(et={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",et;var s})();const wt="undefined"!=typeof globalThis&&globalThis,Qs="undefined"!=typeof window&&window,ws="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Et=wt||"undefined"!=typeof global&&global||Qs||ws,nn={},bt=[],Vt=ye({\u0275cmp:ye}),Je=ye({\u0275dir:ye}),Ce=ye({\u0275pipe:ye}),ot=ye({\u0275mod:ye}),dt=ye({\u0275fac:ye}),Bt=ye({__NG_ELEMENT_ID__:ye});let sn=0;function H(s){return Cr(()=>{const l={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===qn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||bt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||et.Emulated,id:"c",styles:s.styles||bt,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,m=s.features,v=s.pipes;return d.id+=sn++,d.inputs=Qt(s.inputs,l),d.outputs=Qt(s.outputs),m&&m.forEach(b=>b(d)),d.directiveDefs=h?()=>("function"==typeof h?h():h).map(W):null,d.pipeDefs=v?()=>("function"==typeof v?v():v).map(he):null,d})}function W(s){return zt(s)||function Rt(s){return s[Je]||null}(s)}function he(s){return function Gn(s){return s[Ce]||null}(s)}const Q={};function Ve(s){return Cr(()=>{const o={type:s.type,bootstrap:s.bootstrap||bt,declarations:s.declarations||bt,imports:s.imports||bt,exports:s.exports||bt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Q[s.id]=s.type),o})}function Qt(s,o){if(null==s)return nn;const l={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),l[h]=d,o&&(o[h]=m)}return l}const pr=H;function Jn(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function zt(s){return s[Vt]||null}function Wn(s,o){const l=s[ot]||null;if(!l&&!0===o)throw new Error(`Type ${ae(s)} does not have '\u0275mod' property.`);return l}function is(s){return Array.isArray(s)&&"object"==typeof s[1]}function ss(s){return Array.isArray(s)&&!0===s[1]}function On(s){return 0!=(8&s.flags)}function Za(s){return 2==(2&s.flags)}function Vl(s){return 1==(1&s.flags)}function Di(s){return null!==s.template}function tf(s){return 0!=(512&s[2])}function Is(s,o){return s.hasOwnProperty(dt)?s[dt]:null}class jl{constructor(o,l,d){this.previousValue=o,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function To(){return ha}function ha(s){return s.type.prototype.ngOnChanges&&(s.setInput=pd),eo}function eo(){const s=er(this),o=null==s?void 0:s.current;if(o){const l=s.previous;if(l===nn)s.previous=o;else for(let d in o)l[d]=o[d];s.current=null,this.ngOnChanges(o)}}function pd(s,o,l,d){const h=er(s)||function lf(s,o){return s[to]=o}(s,{previous:nn,current:null}),m=h.current||(h.current={}),v=h.previous,b=this.declaredInputs[l],C=v[b];m[b]=new jl(C&&C.currentValue,o,v===nn),s[d]=o}To.ngInherit=!0;const to="__ngSimpleChanges__";function er(s){return s[to]||null}const uf="http://www.w3.org/2000/svg";let gd;function cf(s){gd=s}function In(s){return!!s.listen}const Qu={createRenderer:(s,o)=>function Ha(){return void 0!==gd?gd:"undefined"!=typeof document?document:void 0}()};function Zn(s){for(;Array.isArray(s);)s=s[0];return s}function Ts(s,o){return Zn(o[s])}function Fn(s,o){return Zn(o[s.index])}function qa(s,o){return s.data[o]}function Sn(s,o){return s[o]}function oi(s,o){const l=o[s];return is(l)?l:l[0]}function Zi(s){return 4==(4&s[2])}function Ju(s){return 128==(128&s[2])}function ai(s,o){return null==o?null:s[o]}function fa(s){s[18]=0}function no(s,o){s[5]+=o;let l=s,d=s[3];for(;null!==d&&(1===o&&1===l[5]||-1===o&&0===l[5]);)d[5]+=o,l=d,d=d[3]}const nt={lFrame:ac(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function pa(){return nt.bindingsEnabled}function Ie(){return nt.lFrame.lView}function jt(){return nt.lFrame.tView}function ro(s){return nt.lFrame.contextLView=s,s[8]}function bn(){let s=tc();for(;null!==s&&64===s.type;)s=s.parent;return s}function tc(){return nt.lFrame.currentTNode}function zr(s,o){const l=nt.lFrame;l.currentTNode=s,l.isParent=o}function za(){return nt.lFrame.isParent}function ga(){nt.lFrame.isParent=!1}function Ka(){return nt.isInCheckNoChangesMode}function io(s){nt.isInCheckNoChangesMode=s}function Sr(){const s=nt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function As(){return nt.lFrame.bindingIndex++}function oc(s,o){const l=nt.lFrame;l.bindingIndex=l.bindingRootIndex=s,ql(o)}function ql(s){nt.lFrame.currentDirectiveIndex=s}function md(){return nt.lFrame.currentQueryIndex}function Ro(s){nt.lFrame.currentQueryIndex=s}function Pg(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Gl(s,o,l){if(l&mt.SkipSelf){let h=o,m=s;for(;!(h=h.parent,null!==h||l&mt.Host||(h=Pg(m),null===h||(m=m[15],10&h.type))););if(null===h)return!1;o=h,s=m}const d=nt.lFrame=Wl();return d.currentTNode=o,d.lView=s,!0}function _a(s){const o=Wl(),l=s[1];nt.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function Wl(){const s=nt.lFrame,o=null===s?null:s.child;return null===o?ac(s):o}function ac(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function zl(){const s=nt.lFrame;return nt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const _d=zl;function Ya(){const s=zl();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Tn(){return nt.lFrame.selectedIndex}function as(s){nt.lFrame.selectedIndex=s}function Ln(){const s=nt.lFrame;return qa(s.tView,s.selectedIndex)}function Qa(){nt.lFrame.currentNamespace=uf}function Ja(){!function wy(){nt.lFrame.currentNamespace=null}()}function Xa(s,o){for(let l=o.directiveStart,d=o.directiveEnd;l<d;l++){const m=s.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:b,ngAfterViewInit:C,ngAfterViewChecked:x,ngOnDestroy:R}=m;v&&(s.contentHooks||(s.contentHooks=[])).push(-l,v),b&&((s.contentHooks||(s.contentHooks=[])).push(l,b),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,b)),C&&(s.viewHooks||(s.viewHooks=[])).push(-l,C),x&&((s.viewHooks||(s.viewHooks=[])).push(l,x),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,x)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(l,R)}}function Ql(s,o,l){Jl(s,o,3,l)}function el(s,o,l,d){(3&s[2])===l&&Jl(s,o,l,d)}function yd(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function Jl(s,o,l,d){const m=null!=d?d:-1,v=o.length-1;let b=0;for(let C=void 0!==d?65535&s[18]:0;C<v;C++)if("number"==typeof o[C+1]){if(b=o[C],null!=d&&b>=d)break}else o[C]<0&&(s[18]+=65536),(b<m||-1==m)&&(gr(s,l,o,C),s[18]=(4294901760&s[18])+C+2),C++}function gr(s,o,l,d){const h=l[d]<0,m=l[d+1],b=s[h?-l[d]:l[d]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{m.call(b)}finally{}}}else try{m.call(b)}finally{}}class Xl{constructor(o,l,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function an(s,o,l){const d=In(s);let h=0;for(;h<l.length;){const m=l[h];if("number"==typeof m){if(0!==m)break;h++;const v=l[h++],b=l[h++],C=l[h++];d?s.setAttribute(o,b,C,v):o.setAttributeNS(v,b,C)}else{const v=m,b=l[++h];ft(v)?d&&s.setProperty(o,v,b):d?s.setAttribute(o,v,b):o.setAttribute(v,b),h++}}return h}function Kn(s){return 3===s||4===s||6===s}function ft(s){return 64===s.charCodeAt(0)}function Hi(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let d=0;d<o.length;d++){const h=o[d];"number"==typeof h?l=h:0===l||Ai(s,l,h,null,-1===l||2===l?o[++d]:null)}}return s}function Ai(s,o,l,d,h){let m=0,v=s.length;if(-1===o)v=-1;else for(;m<s.length;){const b=s[m++];if("number"==typeof b){if(b===o){v=-1;break}if(b>o){v=m-1;break}}}for(;m<s.length;){const b=s[m];if("number"==typeof b)break;if(b===l){if(null===d)return void(null!==h&&(s[m+1]=h));if(d===s[m+1])return void(s[m+2]=h)}m++,null!==d&&m++,null!==h&&m++}-1!==v&&(s.splice(v,0,o),m=v+1),s.splice(m++,0,l),null!==d&&s.splice(m++,0,d),null!==h&&s.splice(m++,0,h)}function tr(s){return-1!==s}function tl(s){return 32767&s}function No(s,o){let l=function Lg(s){return s>>16}(s),d=o;for(;l>0;)d=d[15],l--;return d}let wd=!0;function Ss(s){const o=wd;return wd=s,o}let mf=0;function ya(s,o){const l=Un(s,o);if(-1!==l)return l;const d=o[1];d.firstCreatePass&&(s.injectorIndex=o.length,oo(d.data,s),oo(o,null),oo(d.blueprint,null));const h=va(s,o),m=s.injectorIndex;if(tr(h)){const v=tl(h),b=No(h,o),C=b[1].data;for(let x=0;x<8;x++)o[m+x]=b[v+x]|C[v+x]}return o[m+8]=h,m}function oo(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Un(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function va(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,d=null,h=o;for(;null!==h;){const m=h[1],v=m.type;if(d=2===v?m.declTNode:1===v?h[6]:null,null===d)return-1;if(l++,h=h[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function Oo(s,o,l){!function _f(s,o,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(Bt)&&(d=l[Bt]),null==d&&(d=l[Bt]=mf++);const h=255&d;o.data[s+(h>>5)]|=1<<h}(s,o,l)}function eu(s,o,l){if(l&mt.Optional)return s;ke(o,"NodeInjector")}function lc(s,o,l,d){if(l&mt.Optional&&void 0===d&&(d=null),0==(l&(mt.Self|mt.Host))){const h=s[9],m=ar(void 0);try{return h?h.get(o,d,l&mt.Optional):Ci(o,d,l&mt.Optional)}finally{ar(m)}}return eu(d,o,l)}function ao(s,o,l,d=mt.Default,h){if(null!==s){const m=function Ea(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Bt)?s[Bt]:void 0;return"number"==typeof o?o>=0?255&o:rl:o}(l);if("function"==typeof m){if(!Gl(o,s,d))return d&mt.Host?eu(h,l,d):lc(o,l,d,h);try{const v=m(d);if(null!=v||d&mt.Optional)return v;ke(l)}finally{_d()}}else if("number"==typeof m){let v=null,b=Un(s,o),C=-1,x=d&mt.Host?o[16][6]:null;for((-1===b||d&mt.SkipSelf)&&(C=-1===b?va(s,o):o[b+8],-1!==C&&_r(d,!1)?(v=o[1],b=tl(C),o=No(C,o)):b=-1);-1!==b;){const R=o[1];if(Fo(m,b,R.data)){const L=wa(b,o,l,v,d,x);if(L!==nl)return L}C=o[b+8],-1!==C&&_r(d,o[1].data[b+8]===x)&&Fo(m,b,o)?(v=R,b=tl(C),o=No(C,o)):b=-1}}}return lc(o,l,d,h)}const nl={};function rl(){return new mn(bn(),Ie())}function wa(s,o,l,d,h,m){const v=o[1],b=v.data[s+8],R=mr(b,v,l,null==d?Za(b)&&wd:d!=v&&0!=(3&b.type),h&mt.Host&&m===b);return null!==R?il(o,v,R,b):nl}function mr(s,o,l,d,h){const m=s.providerIndexes,v=o.data,b=1048575&m,C=s.directiveStart,R=m>>20,$=h?b+R:s.directiveEnd;for(let K=d?b:b+R;K<$;K++){const me=v[K];if(K<C&&l===me||K>=C&&me.type===l)return K}if(h){const K=v[C];if(K&&Di(K)&&K.type===l)return C}return null}function il(s,o,l,d){let h=s[l];const m=o.data;if(function Og(s){return s instanceof Xl}(h)){const v=h;v.resolving&&function Le(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new He("200",`Circular dependency in DI detected for ${s}${l}`)}(De(m[l]));const b=Ss(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?ar(v.injectImpl):null;Gl(s,d,mt.Default);try{h=s[l]=v.factory(void 0,m,s,d),o.firstCreatePass&&l>=d.directiveStart&&function Yl(s,o,l){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:m}=o.type.prototype;if(d){const v=ha(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,v)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),m&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,m),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,m))}(l,m[l],o)}finally{null!==C&&ar(C),Ss(b),v.resolving=!1,_d()}}return h}function Fo(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function _r(s,o){return!(s&mt.Self||s&mt.Host&&o)}class mn{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,d){return ao(this._tNode,this._lView,o,d,l)}}function Ed(s){return Cr(()=>{const o=s.prototype.constructor,l=o[dt]||Dn(o),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const m=h[dt]||Dn(h);if(m&&m!==l)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function Dn(s){return $e(s)?()=>{const o=Dn(te(s));return o&&o()}:Is(s)}function sl(s){return function us(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const d=l.length;let h=0;for(;h<d;){const m=l[h];if(Kn(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<d&&"string"==typeof l[h];)h++;else{if(m===o)return l[h+1];h+=2}}}return null}(bn(),s)}const ba="__parameters__";function xn(s,o,l){return Cr(()=>{const d=function Si(s){return function(...l){if(s){const d=s(...l);for(const h in d)this[h]=d[h]}}}(o);function h(...m){if(this instanceof h)return d.apply(this,m),this;const v=new h(...m);return b.annotation=v,b;function b(C,x,R){const L=C.hasOwnProperty(ba)?C[ba]:Object.defineProperty(C,ba,{value:[]})[ba];for(;L.length<=R;)L.push(null);return(L[R]=L[R]||[]).push(v),C}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class ln{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=yn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const yf=new ln("AnalyzeForEntryComponents");function Yr(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let d=s[l];Array.isArray(d)?(o===s&&(o=s.slice(0,l)),Yr(d,o)):o!==s&&o.push(d)}return o}function ds(s,o){s.forEach(l=>Array.isArray(l)?ds(l,o):o(l))}function tu(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function Ia(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Pr(s,o,l){let d=Aa(s,o);return d>=0?s[1|d]=l:(d=~d,function cc(s,o,l,d){let h=s.length;if(h==o)s.push(l,d);else if(1===h)s.push(d,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=d}}(s,d,o,l)),d}function Lo(s,o){const l=Aa(s,o);if(l>=0)return s[1|l]}function Aa(s,o){return function Td(s,o,l){let d=0,h=s.length>>l;for(;h!==d;){const m=d+(h-d>>1),v=s[m<<l];if(o===v)return m<<l;v>o?h=m:d=m+1}return~(h<<l)}(s,o,1)}const su={},xa="__NG_DI_FLAG__",lo="ngTempTokenPath",Bg=/\n/gm,D="__source",M=ye({provide:String,useValue:ye});let V;function z(s){const o=V;return V=s,o}function ne(s,o=mt.Default){if(void 0===V)throw new Error("inject() must be called from an injection context");return null===V?Ci(s,void 0,o):V.get(s,o&mt.Optional?null:void 0,o)}function ie(s,o=mt.Default){return(function vs(){return en}()||ne)(te(s),o)}function pt(s){const o=[];for(let l=0;l<s.length;l++){const d=te(s[l]);if(Array.isArray(d)){if(0===d.length)throw new Error("Arguments array must have arguments.");let h,m=mt.Default;for(let v=0;v<d.length;v++){const b=d[v],C=Ct(b);"number"==typeof C?-1===C?h=b.token:m|=C:h=b}o.push(ie(h,m))}else o.push(ie(d))}return o}function Ht(s,o){return s[xa]=o,s.prototype[xa]=o,s}function Ct(s){return s[xa]}const zi=Ht(xn("Inject",s=>({token:s})),-1),Or=Ht(xn("Optional"),8),Fr=Ht(xn("SkipSelf"),4);class Sf{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function uo(s){return s instanceof Sf?s.changingThisBreaksApplicationSecurity:s}const Zg=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,kf=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Yn=(()=>((Yn=Yn||{})[Yn.NONE=0]="NONE",Yn[Yn.HTML=1]="HTML",Yn[Yn.STYLE=2]="STYLE",Yn[Yn.SCRIPT=3]="SCRIPT",Yn[Yn.URL=4]="URL",Yn[Yn.RESOURCE_URL=5]="RESOURCE_URL",Yn))();function Ld(s){const o=function pu(){const s=Ie();return s&&s[12]}();return o?o.sanitize(Yn.URL,s)||"":function _c(s,o){const l=function Md(s){return s instanceof Sf&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}(s,"URL")?uo(s):function cu(s){return(s=String(s)).match(Zg)||s.match(kf)?s:"unsafe:"+s}(X(s))}const Bd="__ngContext__";function xr(s,o){s[Bd]=o}function Pf(s){const o=function Cc(s){return s[Bd]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Lf(s){return s.ngOriginalError}function Zy(s,...o){s.error(...o)}class Tc{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o),d=function Qg(s){return s&&s.ngErrorLogger||Zy}(o);d(this._console,"ERROR",o),l&&d(this._console,"ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&Lf(o);for(;l&&Lf(l);)l=Lf(l);return l||null}}const mu=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Et))();function Os(s){return s instanceof Function?s():s}var co=(()=>((co=co||{})[co.Important=1]="Important",co[co.DashCase=2]="DashCase",co))();function Dc(s,o){return undefined(s,o)}function _l(s){const o=s[3];return ss(o)?o[3]:o}function Fs(s){return Hf(s[13])}function yl(s){return Hf(s[4])}function Hf(s){for(;null!==s&&!ss(s);)s=s[4];return s}function vl(s,o,l,d,h){if(null!=d){let m,v=!1;ss(d)?m=d:is(d)&&(v=!0,d=d[0]);const b=Zn(d);0===s&&null!==l?null==h?Zo(o,l,b):Vn(o,l,b,h||null,!0):1===s&&null!==l?Vn(o,l,b,h||null,!0):2===s?function SD(s,o,l){const d=Sc(s,o);d&&function Gf(s,o,l,d){In(s)?s.removeChild(o,l,d):o.removeChild(l)}(s,d,o,l)}(o,b,v):3===s&&o.destroyNode(b),null!=m&&function kD(s,o,l,d,h){const m=l[7];m!==Zn(l)&&vl(o,s,d,m,h);for(let b=10;b<l.length;b++){const C=l[b];Yf(C[1],C,s,o,d,m)}}(o,s,m,l,h)}}function qf(s,o,l){return In(s)?s.createElement(o,l):null===l?s.createElement(o):s.createElementNS(l,o)}function k(s,o){const l=s[9],d=l.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,no(h,-1)),l.splice(d,1)}function j(s,o){if(s.length<=10)return;const l=10+o,d=s[l];if(d){const h=d[17];null!==h&&h!==s&&k(h,d),o>0&&(s[l-1][4]=d[4]);const m=Ia(s,10+o);!function qd(s,o){Yf(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(d[1],d);const v=m[19];null!==v&&v.detachView(m[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function J(s,o){if(!(256&o[2])){const l=o[11];In(l)&&l.destroyNode&&Yf(s,o,l,3,null,null),function g(s){let o=s[13];if(!o)return Re(s[1],s);for(;o;){let l=null;if(is(o))l=o[13];else{const d=o[10];d&&(l=d)}if(!l){for(;o&&!o[4]&&o!==s;)is(o)&&Re(o[1],o),o=o[3];null===o&&(o=s),is(o)&&Re(o[1],o),l=o&&o[4]}o=l}}(o)}}function Re(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function rt(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let d=0;d<l.length;d+=2){const h=o[l[d]];if(!(h instanceof Xl)){const m=l[d+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const b=h[m[v]],C=m[v+1];try{C.call(b)}finally{}}else try{m.call(h)}finally{}}}}(s,o),function Se(s,o){const l=s.cleanup,d=o[7];let h=-1;if(null!==l)for(let m=0;m<l.length-1;m+=2)if("string"==typeof l[m]){const v=l[m+1],b="function"==typeof v?v(o):Zn(o[v]),C=d[h=l[m+2]],x=l[m+3];"boolean"==typeof x?b.removeEventListener(l[m],C,x):x>=0?d[h=x]():d[h=-x].unsubscribe(),m+=2}else{const v=d[h=l[m+1]];l[m].call(v)}if(null!==d){for(let m=h+1;m<d.length;m++)d[m]();o[7]=null}}(s,o),1===o[1].type&&In(o[11])&&o[11].destroy();const l=o[17];if(null!==l&&ss(o[3])){l!==o[3]&&k(l,o);const d=o[19];null!==d&&d.detachView(s)}}}function Xe(s,o,l){return function qt(s,o,l){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return l[0];if(2&d.flags){const h=s.data[d.directiveStart].encapsulation;if(h===et.None||h===et.Emulated)return null}return Fn(d,l)}(s,o.parent,l)}function Vn(s,o,l,d,h){In(s)?s.insertBefore(o,l,d,h):o.insertBefore(l,d,h)}function Zo(s,o,l){In(s)?s.appendChild(o,l):o.appendChild(l)}function yu(s,o,l,d,h){null!==d?Vn(s,o,l,d,h):Zo(s,o,l)}function Sc(s,o){return In(s)?s.parentNode(o):o.parentNode}let zf=function Wf(s,o,l){return 40&s.type?Fn(s,l):null};function Gd(s,o,l,d){const h=Xe(s,d,o),m=o[11],b=function xc(s,o,l){return zf(s,o,l)}(d.parent||o[6],d,o);if(null!=h)if(Array.isArray(l))for(let C=0;C<l.length;C++)yu(m,h,l[C],b,!1);else yu(m,h,l,b,!1)}function vu(s,o){if(null!==o){const l=o.type;if(3&l)return Fn(o,s);if(4&l)return Ky(-1,s[o.index]);if(8&l){const d=o.child;if(null!==d)return vu(s,d);{const h=s[o.index];return ss(h)?Ky(-1,h):Zn(h)}}if(32&l)return Dc(o,s)()||Zn(s[o.index]);{const d=Kf(s,o);return null!==d?Array.isArray(d)?d[0]:vu(_l(s[16]),d):vu(s,o.next)}}return null}function Kf(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Ky(s,o){const l=10+s+1;if(l<o.length){const d=o[l],h=d[1].firstChild;if(null!==h)return vu(d,h)}return o[7]}function Mc(s,o,l,d,h,m,v){for(;null!=l;){const b=d[l.index],C=l.type;if(v&&0===o&&(b&&xr(Zn(b),d),l.flags|=4),64!=(64&l.flags))if(8&C)Mc(s,o,l.child,d,h,m,!1),vl(o,s,h,b,m);else if(32&C){const x=Dc(l,d);let R;for(;R=x();)vl(o,s,h,R,m);vl(o,s,h,b,m)}else 16&C?zE(s,o,d,l,h,m):vl(o,s,h,b,m);l=v?l.projectionNext:l.next}}function Yf(s,o,l,d,h,m){Mc(l,d,s.firstChild,o,h,m,!1)}function zE(s,o,l,d,h,m){const v=l[16],C=v[6].projection[d.projection];if(Array.isArray(C))for(let x=0;x<C.length;x++)vl(o,s,h,C[x],m);else Mc(s,o,C,v[3],h,m,!0)}function KE(s,o,l){In(s)?s.setAttribute(o,"style",l):o.style.cssText=l}function Yy(s,o,l){In(s)?""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l):o.className=l}function YE(s,o,l){let d=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const m=o.length;if(h+m===d||s.charCodeAt(h+m)<=32)return h}l=h+1}}const rm="ng-template";function QE(s,o,l){let d=0;for(;d<s.length;){let h=s[d++];if(l&&"class"===h){if(h=s[d],-1!==YE(h.toLowerCase(),o,0))return!0}else if(1===h){for(;d<s.length&&"string"==typeof(h=s[d++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function Qy(s){return 4===s.type&&s.value!==rm}function MD(s,o,l){return o===(4!==s.type||l?s.value:rm)}function ND(s,o,l){let d=4;const h=s.attrs||[],m=function SR(s){for(let o=0;o<s.length;o++)if(Kn(s[o]))return o;return s.length}(h);let v=!1;for(let b=0;b<o.length;b++){const C=o[b];if("number"!=typeof C){if(!v)if(4&d){if(d=2|1&d,""!==C&&!MD(s,C,l)||""===C&&1===o.length){if($o(d))return!1;v=!0}}else{const x=8&d?C:o[++b];if(8&d&&null!==s.attrs){if(!QE(s.attrs,x,l)){if($o(d))return!1;v=!0}continue}const L=PD(8&d?"class":C,h,Qy(s),l);if(-1===L){if($o(d))return!1;v=!0;continue}if(""!==x){let $;$=L>m?"":h[L+1].toLowerCase();const K=8&d?$:null;if(K&&-1!==YE(K,x,0)||2&d&&x!==$){if($o(d))return!1;v=!0}}}}else{if(!v&&!$o(d)&&!$o(C))return!1;if(v&&$o(C))continue;v=!1,d=C|1&d}}return $o(d)||v}function $o(s){return 0==(1&s)}function PD(s,o,l,d){if(null===o)return-1;let h=0;if(d||!l){let m=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)m=!0;else{if(1===v||2===v){let b=o[++h];for(;"string"==typeof b;)b=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=m?1:2}return-1}return function Jy(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const d=s[l];if("number"==typeof d)return-1;if(d===o)return l;l++}return-1}(o,s)}function un(s,o,l=!1){for(let d=0;d<o.length;d++)if(ND(s,o[d],l))return!0;return!1}function ge(s,o){return s?":not("+o.trim()+")":o}function Yi(s){let o=s[0],l=1,d=2,h="",m=!1;for(;l<s.length;){let v=s[l];if("string"==typeof v)if(2&d){const b=s[++l];h+="["+v+(b.length>0?'="'+b+'"':"")+"]"}else 8&d?h+="."+v:4&d&&(h+=" "+v);else""!==h&&!$o(v)&&(o+=ge(m,h),h=""),d=v,m=m||!$o(d);l++}return""!==h&&(o+=ge(m,h)),o}const Pt={};function Xy(s){im(jt(),Ie(),Tn()+s,Ka())}function im(s,o,l,d){if(!d)if(3==(3&o[2])){const m=s.preOrderCheckHooks;null!==m&&Ql(o,m,l)}else{const m=s.preOrderHooks;null!==m&&el(o,m,0,l)}as(l)}function sm(s,o){return s<<17|o<<2}function Go(s){return s>>17&32767}function Qf(s){return 2|s}function fs(s){return(131068&s)>>2}function om(s,o){return-131069&s|o<<2}function Pc(s){return 1|s}function fm(s,o){const l=s.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const h=l[d],m=l[d+1];if(-1!==m){const v=s.data[m];Ro(h),v.contentQueries(2,o[m],m)}}}function tp(s,o,l,d,h,m,v,b,C,x){const R=o.blueprint.slice();return R[0]=h,R[2]=140|d,fa(R),R[3]=R[15]=s,R[8]=l,R[10]=v||s&&s[10],R[11]=b||s&&s[11],R[12]=C||s&&s[12]||null,R[9]=x||s&&s[9]||null,R[6]=m,R[16]=2==o.type?s[16]:R,R}function Cu(s,o,l,d,h){let m=s.data[o];if(null===m)m=function np(s,o,l,d,h){const m=tc(),v=za(),C=s.data[o]=function db(s,o,l,d,h,m){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,l,o,d,h);return null===s.firstChild&&(s.firstChild=C),null!==m&&(v?null==m.child&&null!==C.parent&&(m.child=C):null===m.next&&(m.next=C)),C}(s,o,l,d,h),function sc(){return nt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=l,m.value=d,m.attrs=h;const v=function os(){const s=nt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return zr(m,!0),m}function Iu(s,o,l,d){if(0===l)return-1;const h=o.length;for(let m=0;m<l;m++)o.push(d),s.blueprint.push(d),s.data.push(null);return h}function rp(s,o,l){_a(o);try{const d=s.viewQuery;null!==d&&op(1,d,l);const h=s.template;null!==h&&ob(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&fm(s,o),s.staticViewQueries&&op(2,s.viewQuery,l);const m=s.components;null!==m&&function ib(s,o){for(let l=0;l<o.length;l++)Tu(s,o[l])}(o,m)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[2]&=-5,Ya()}}function zd(s,o,l,d){const h=o[2];if(256==(256&h))return;_a(o);const m=Ka();try{fa(o),function ic(s){return nt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&ob(s,o,l,2,d);const v=3==(3&h);if(!m)if(v){const x=s.preOrderCheckHooks;null!==x&&Ql(o,x,null)}else{const x=s.preOrderHooks;null!==x&&el(o,x,0,null),yd(o,0)}if(function En(s){for(let o=Fs(s);null!==o;o=yl(o)){if(!o[2])continue;const l=o[9];for(let d=0;d<l.length;d++){const h=l[d],m=h[3];0==(1024&h[2])&&no(m,1),h[2]|=1024}}}(o),function _b(s){for(let o=Fs(s);null!==o;o=yl(o))for(let l=10;l<o.length;l++){const d=o[l],h=d[1];Ju(d)&&zd(h,d,h.template,d[8])}}(o),null!==s.contentQueries&&fm(s,o),!m)if(v){const x=s.contentCheckHooks;null!==x&&Ql(o,x)}else{const x=s.contentHooks;null!==x&&el(o,x,1),yd(o,1)}!function rb(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const h=l[d];if(h<0)as(~h);else{const m=h,v=l[++d],b=l[++d];oc(v,m),b(2,o[m])}}}finally{as(-1)}}(s,o);const b=s.components;null!==b&&function UD(s,o){for(let l=0;l<o.length;l++)hn(s,o[l])}(o,b);const C=s.viewQuery;if(null!==C&&op(2,C,d),!m)if(v){const x=s.viewCheckHooks;null!==x&&Ql(o,x)}else{const x=s.viewHooks;null!==x&&el(o,x,2),yd(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),m||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,no(o[3],-1))}finally{Ya()}}function sb(s,o,l,d){const h=o[10],m=!Ka(),v=Zi(o);try{m&&!v&&h.begin&&h.begin(),v&&rp(s,o,d),zd(s,o,l,d)}finally{m&&!v&&h.end&&h.end()}}function ob(s,o,l,d,h){const m=Tn(),v=2&d;try{as(-1),v&&o.length>20&&im(s,o,20,Ka()),l(d,h)}finally{as(m)}}function ab(s,o,l){if(On(o)){const h=o.directiveEnd;for(let m=o.directiveStart;m<h;m++){const v=s.data[m];v.contentQueries&&v.contentQueries(1,l[m],m)}}}function cv(s,o,l){!pa()||(function $D(s,o,l,d){const h=l.directiveStart,m=l.directiveEnd;s.firstCreatePass||ya(l,o),xr(d,o);const v=l.initialInputs;for(let b=h;b<m;b++){const C=s.data[b],x=Di(C);x&&pb(o,l,C);const R=il(o,s,b,l);xr(R,o),null!==v&&gb(0,b-h,R,C,0,v),x&&(oi(l.index,o)[8]=R)}}(s,o,l,Fn(l,o)),128==(128&l.flags)&&function mv(s,o,l){const d=l.directiveStart,h=l.directiveEnd,v=l.index,b=function ma(){return nt.lFrame.currentDirectiveIndex}();try{as(v);for(let C=d;C<h;C++){const x=s.data[C],R=o[C];ql(C),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&_v(x,R)}}finally{as(-1),ql(b)}}(s,o,l))}function pm(s,o,l=Fn){const d=o.localNames;if(null!==d){let h=o.index+1;for(let m=0;m<d.length;m+=2){const v=d[m+1],b=-1===v?l(o,s):s[v];s[h++]=b}}}function dv(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=ip(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function ip(s,o,l,d,h,m,v,b,C,x){const R=20+d,L=R+h,$=function VD(s,o){const l=[];for(let d=0;d<o;d++)l.push(d<s?null:Pt);return l}(R,L),K="function"==typeof x?x():x;return $[1]={type:s,blueprint:$,template:l,queries:null,viewQuery:b,declTNode:o,data:$.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:K,incompleteFirstPass:!1}}function cb(s,o,l,d){const h=yb(o);null===l?h.push(d):(h.push(l),s.firstCreatePass&&vb(s).push(d,h.length-1))}function hv(s,o,l){for(let d in s)if(s.hasOwnProperty(d)){const h=s[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(o,h):l[d]=[o,h]}return l}function Ls(s,o,l,d,h,m,v,b){const C=Fn(o,l);let R,x=o.inputs;!b&&null!=x&&(R=x[d])?(ym(s,l,R,d,h),Za(o)&&function Kd(s,o){const l=oi(o,s);16&l[2]||(l[2]|=64)}(l,o.index)):3&o.type&&(d=function jD(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=v?v(h,o.value||"",d):h,In(m)?m.setProperty(C,d,h):ft(d)||(C.setProperty?C.setProperty(d,h):C[d]=h))}function gv(s,o,l,d){let h=!1;if(pa()){const m=function HD(s,o,l){const d=s.directiveRegistry;let h=null;if(d)for(let m=0;m<d.length;m++){const v=d[m];un(l,v.selectors,!1)&&(h||(h=[]),Oo(ya(l,o),s,v.type),Di(v)?(yv(s,l),h.unshift(v)):h.push(v))}return h}(s,o,l),v=null===d?null:{"":-1};if(null!==m){h=!0,vv(l,s.data.length,m.length);for(let R=0;R<m.length;R++){const L=m[R];L.providersResolver&&L.providersResolver(L)}let b=!1,C=!1,x=Iu(s,o,m.length,null);for(let R=0;R<m.length;R++){const L=m[R];l.mergedAttrs=Hi(l.mergedAttrs,L.hostAttrs),wv(s,l,o,x,L),fb(x,L,v),null!==L.contentQueries&&(l.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(l.flags|=128);const $=L.type.prototype;!b&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),b=!0),!C&&($.ngOnChanges||$.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),C=!0),x++}!function BD(s,o){const d=o.directiveEnd,h=s.data,m=o.attrs,v=[];let b=null,C=null;for(let x=o.directiveStart;x<d;x++){const R=h[x],L=R.inputs,$=null===m||Qy(o)?null:mb(L,m);v.push($),b=hv(L,x,b),C=hv(R.outputs,x,C)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=16),b.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=b,o.outputs=C}(s,l)}v&&function qD(s,o,l){if(o){const d=s.localNames=[];for(let h=0;h<o.length;h+=2){const m=l[o[h+1]];if(null==m)throw new He("301",`Export of name '${o[h+1]}' not found!`);d.push(o[h],m)}}}(l,d,v)}return l.mergedAttrs=Hi(l.mergedAttrs,l.attrs),h}function hb(s,o,l,d,h,m){const v=m.hostBindings;if(v){let b=s.hostBindingOpCodes;null===b&&(b=s.hostBindingOpCodes=[]);const C=~o.index;(function ZD(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(b)!=C&&b.push(C),b.push(d,h,v)}}function _v(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function yv(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function fb(s,o,l){if(l){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)l[o.exportAs[d]]=s;Di(o)&&(l[""]=s)}}function vv(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function wv(s,o,l,d,h){s.data[d]=h;const m=h.factory||(h.factory=Is(h.type)),v=new Xl(m,Di(h),null);s.blueprint[d]=v,l[d]=v,hb(s,o,0,d,Iu(s,l,h.hostVars,Pt),h)}function pb(s,o,l){const d=Fn(o,s),h=dv(l),m=s[10],v=Qd(s,tp(s,h,null,l.onPush?64:16,d,o,m,m.createRenderer(d,l),null,null));s[o.index]=v}function Ma(s,o,l,d,h,m){const v=Fn(s,o);!function mm(s,o,l,d,h,m,v){if(null==m)In(s)?s.removeAttribute(o,h,l):o.removeAttribute(h);else{const b=null==v?X(m):v(m,d||"",h);In(s)?s.setAttribute(o,h,b,l):l?o.setAttributeNS(l,h,b):o.setAttribute(h,b)}}(o[11],v,m,s.value,l,d,h)}function gb(s,o,l,d,h,m){const v=m[o];if(null!==v){const b=d.setInput;for(let C=0;C<v.length;){const x=v[C++],R=v[C++],L=v[C++];null!==b?d.setInput(l,L,x,R):l[R]=L}}}function mb(s,o){let l=null,d=0;for(;d<o.length;){const h=o[d];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],o[d+1])),d+=2}else d+=2;else d+=4}return l}function bv(s,o,l,d){return new Array(s,!0,!1,o,null,0,d,l,null,null)}function hn(s,o){const l=oi(o,s);if(Ju(l)){const d=l[1];80&l[2]?zd(d,l,d.template,l[8]):l[5]>0&&$t(l)}}function $t(s){for(let d=Fs(s);null!==d;d=yl(d))for(let h=10;h<d.length;h++){const m=d[h];if(1024&m[2]){const v=m[1];zd(v,m,v.template,m[8])}else m[5]>0&&$t(m)}const l=s[1].components;if(null!==l)for(let d=0;d<l.length;d++){const h=oi(l[d],s);Ju(h)&&h[5]>0&&$t(h)}}function Tu(s,o){const l=oi(o,s),d=l[1];(function Rn(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(d,l),rp(d,l,l[8])}function Qd(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Cv(s){for(;s;){s[2]|=64;const o=_l(s);if(tf(s)&&!o)return s;s=o}return null}function Bn(s,o,l){const d=o[10];d.begin&&d.begin();try{zd(s,o,s.template,l)}catch(h){throw Du(o,h),h}finally{d.end&&d.end()}}function Gt(s){!function _m(s){for(let o=0;o<s.components.length;o++){const l=s.components[o],d=Pf(l),h=d[1];sb(h,d,h.template,l)}}(s[8])}function op(s,o,l){Ro(0),o(s,l)}const WD=(()=>Promise.resolve(null))();function yb(s){return s[7]||(s[7]=[])}function vb(s){return s.cleanup||(s.cleanup=[])}function Du(s,o){const l=s[9],d=l?l.get(Tc,null):null;d&&d.handleError(o)}function ym(s,o,l,d,h){for(let m=0;m<l.length;){const v=l[m++],b=l[m++],C=o[v],x=s.data[v];null!==x.setInput?x.setInput(C,h,d,b):C[b]=h}}function Us(s,o,l){const d=Ts(o,s);!function tm(s,o,l){In(s)?s.setValue(o,l):o.textContent=l}(s[11],d,l)}function vm(s,o,l){let d=l?s.styles:null,h=l?s.classes:null,m=0;if(null!==o)for(let v=0;v<o.length;v++){const b=o[v];"number"==typeof b?m=b:1==m?h=fe(h,b):2==m&&(d=fe(d,b+": "+o[++v]+";"))}l?s.styles=d:s.stylesWithoutHost=d,l?s.classes=h:s.classesWithoutHost=h}const Tv=new ln("INJECTOR",-1);class Eb{get(o,l=su){if(l===su){const d=new Error(`NullInjectorError: No provider for ${ae(o)}!`);throw d.name="NullInjectorError",d}return l}}const wm=new ln("Set Injector scope."),zo={},Wt={};let Jd;function ap(){return void 0===Jd&&(Jd=new Eb),Jd}function Dv(s,o=null,l=null,d){const h=Ko(s,o,l,d);return h._resolveInjectorDefTypes(),h}function Ko(s,o=null,l=null,d){return new Em(s,l,o||ap(),d)}class Em{constructor(o,l,d,h=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];l&&ds(l,b=>this.processProvider(b,o,l)),ds([o],b=>this.processInjectorType(b,[],m)),this.records.set(Tv,Au(void 0,this));const v=this.records.get(wm);this.scope=null!=v?v.value:null,this.source=h||("object"==typeof o?null:ae(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,l=su,d=mt.Default){this.assertNotDestroyed();const h=z(this),m=ar(void 0);try{if(!(d&mt.SkipSelf)){let b=this.records.get(o);if(void 0===b){const C=function Db(s){return"function"==typeof s||"object"==typeof s&&s instanceof ln}(o)&&or(o);b=C&&this.injectableDefInScope(C)?Au(Vs(o),zo):null,this.records.set(o,b)}if(null!=b)return this.hydrate(o,b)}return(d&mt.Self?ap():this.parent).get(o,l=d&mt.Optional&&l===su?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[lo]=v[lo]||[]).unshift(ae(o)),h)throw v;return function hi(s,o,l,d){const h=s[lo];throw o[D]&&h.unshift(o[D]),s.message=function nr(s,o,l,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=ae(o);if(Array.isArray(o))h=o.map(ae).join(" -> ");else if("object"==typeof o){let m=[];for(let v in o)if(o.hasOwnProperty(v)){let b=o[v];m.push(v+":"+("string"==typeof b?JSON.stringify(b):ae(b)))}h=`{${m.join(", ")}}`}return`${l}${d?"("+d+")":""}[${h}]: ${s.replace(Bg,"\n  ")}`}("\n"+s.message,h,l,d),s.ngTokenPath=h,s[lo]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{ar(m),z(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((d,h)=>o.push(ae(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(o,l,d){if(!(o=te(o)))return!1;let h=Ui(o);const m=null==h&&o.ngModule||void 0,v=void 0===m?o:m,b=-1!==d.indexOf(v);if(void 0!==m&&(h=Ui(m)),null==h)return!1;if(null!=h.imports&&!b){let R;d.push(v);try{ds(h.imports,L=>{this.processInjectorType(L,l,d)&&(void 0===R&&(R=[]),R.push(L))})}finally{}if(void 0!==R)for(let L=0;L<R.length;L++){const{ngModule:$,providers:K}=R[L];ds(K,me=>this.processProvider(me,$,K||bt))}}this.injectorDefTypes.add(v);const C=Is(v)||(()=>new v);this.records.set(v,Au(C,zo));const x=h.providers;if(null!=x&&!b){const R=o;ds(x,L=>this.processProvider(L,R,x))}return void 0!==m&&void 0!==o.providers}processProvider(o,l,d){let h=Fc(o=te(o))?o:te(o&&o.provide);const m=function ps(s,o,l){return bm(s)?Au(void 0,s.useValue):Au(bb(s),zo)}(o);if(Fc(o)||!0!==o.multi)this.records.get(h);else{let v=this.records.get(h);v||(v=Au(void 0,zo,!0),v.factory=()=>pt(v.multi),this.records.set(h,v)),h=o,v.multi.push(o)}this.records.set(h,m)}hydrate(o,l){return l.value===zo&&(l.value=Wt,l.value=l.factory()),"object"==typeof l.value&&l.value&&function Tb(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this.onDestroy.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=te(o.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function Vs(s){const o=or(s),l=null!==o?o.factory:Is(s);if(null!==l)return l;if(s instanceof ln)throw new Error(`Token ${ae(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function KD(s){const o=s.length;if(o>0){const d=function Ta(s,o){const l=[];for(let d=0;d<s;d++)l.push(o);return l}(o,"?");throw new Error(`Can't resolve all parameters for ${ae(s)}: (${d.join(", ")}).`)}const l=function Pn(s){const o=s&&(s[br]||s[fr]);if(o){const l=function ra(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Error("unreachable")}function bb(s,o,l){let d;if(Fc(s)){const h=te(s);return Is(h)||Vs(h)}if(bm(s))d=()=>te(s.useValue);else if(function Cb(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...pt(s.deps||[]));else if(function YD(s){return!(!s||!s.useExisting)}(s))d=()=>ie(te(s.useExisting));else{const h=te(s&&(s.useClass||s.provide));if(!function Xd(s){return!!s.deps}(s))return Is(h)||Vs(h);d=()=>new h(...pt(s.deps))}return d}function Au(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function bm(s){return null!==s&&"object"==typeof s&&M in s}function Fc(s){return"function"==typeof s}let fo=(()=>{class s{static create(l,d){var h;if(Array.isArray(l))return Dv({name:""},d,l,"");{const m=null!==(h=l.name)&&void 0!==h?h:"";return Dv({name:m},l.parent,l.providers,m)}}}return s.THROW_IF_NOT_FOUND=su,s.NULL=new Eb,s.\u0275prov=yn({token:s,providedIn:"any",factory:()=>ie(Tv)}),s.__NG_ELEMENT_ID__=-1,s})();function up(s,o){Xa(Pf(s)[1],bn())}function cp(s){let o=function Mb(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const d=[s];for(;o;){let h;if(Di(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Error("Directives cannot inherit Components");h=o.\u0275dir}if(h){if(l){d.push(h);const v=s;v.inputs=Nv(s.inputs),v.declaredInputs=Nv(s.declaredInputs),v.outputs=Nv(s.outputs);const b=h.hostBindings;b&&tA(s,b);const C=h.viewQuery,x=h.contentQueries;if(C&&Dm(s,C),x&&eA(s,x),oe(s.inputs,h.inputs),oe(s.declaredInputs,h.declaredInputs),oe(s.outputs,h.outputs),Di(h)&&h.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let v=0;v<m.length;v++){const b=m[v];b&&b.ngInherit&&b(s),b===cp&&(l=!1)}}o=Object.getPrototypeOf(o)}!function dp(s){let o=0,l=null;for(let d=s.length-1;d>=0;d--){const h=s[d];h.hostVars=o+=h.hostVars,h.hostAttrs=Hi(h.hostAttrs,l=Hi(l,h.hostAttrs))}}(d)}function Nv(s){return s===nn?{}:s===bt?[]:s}function Dm(s,o){const l=s.viewQuery;s.viewQuery=l?(d,h)=>{o(d,h),l(d,h)}:o}function eA(s,o){const l=s.contentQueries;s.contentQueries=l?(d,h,m)=>{o(d,h,m),l(d,h,m)}:o}function tA(s,o){const l=s.hostBindings;s.hostBindings=l?(d,h)=>{o(d,h),l(d,h)}:o}let nh=null;function rh(){if(!nh){const s=Et.Symbol;if(s&&s.iterator)nh=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const d=o[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(nh=d)}}}return nh}function ih(s){return!!Ov(s)&&(Array.isArray(s)||!(s instanceof Map)&&rh()in s)}function Ov(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Bs(s,o,l){return s[o]=l}function Qr(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function km(s,o,l,d){const h=Ie();return Qr(h,As(),o)&&(jt(),Ma(Ln(),h,s,o,l,d)),km}function oh(s,o,l,d){return Qr(s,As(),l)?o+X(l)+d:Pt}function Fv(s,o,l,d,h,m,v,b){const C=Ie(),x=jt(),R=s+20,L=x.firstCreatePass?function fp(s,o,l,d,h,m,v,b,C){const x=o.consts,R=Cu(o,s,4,v||null,ai(x,b));gv(o,l,R,ai(x,C)),Xa(o,R);const L=R.tViews=ip(2,R,d,h,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,R),L.queries=o.queries.embeddedTView(R)),R}(R,x,C,o,l,d,h,m,v):x.data[R];zr(L,!1);const $=C[11].createComment("");Gd(x,C,$,L),xr($,C),Qd(C,C[R]=bv($,C,$,L)),Vl(L)&&cv(x,C,L),null!=v&&pm(C,L,b)}function Mu(s){return Sn(function rc(){return nt.lFrame.contextLView}(),20+s)}function _p(s,o=mt.Default){const l=Ie();return null===l?ie(s,o):ao(bn(),l,te(s),o)}function Wb(){throw new Error("invalid")}function $v(s,o,l){const d=Ie();return Qr(d,As(),o)&&Ls(jt(),Ln(),d,s,o,d[11],l,!1),$v}function Hv(s,o,l,d,h){const v=h?"class":"style";ym(s,l,o.inputs[v],v,d)}function hh(s,o,l,d){const h=Ie(),m=jt(),v=20+s,b=h[11],C=h[v]=qf(b,o,function ff(){return nt.lFrame.currentNamespace}()),x=m.firstCreatePass?function zb(s,o,l,d,h,m,v){const b=o.consts,x=Cu(o,s,2,h,ai(b,m));return gv(o,l,x,ai(b,v)),null!==x.attrs&&vm(x,x.attrs,!1),null!==x.mergedAttrs&&vm(x,x.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,x),x}(v,m,h,0,o,l,d):m.data[v];zr(x,!0);const R=x.mergedAttrs;null!==R&&an(b,C,R);const L=x.classes;null!==L&&Yy(b,C,L);const $=x.styles;null!==$&&KE(b,C,$),64!=(64&x.flags)&&Gd(m,h,C,x),0===function Hl(){return nt.lFrame.elementDepthCount}()&&xr(C,h),function Ga(){nt.lFrame.elementDepthCount++}(),Vl(x)&&(cv(m,h,x),ab(m,x,h)),null!==d&&pm(h,x)}function yp(){let s=bn();za()?ga():(s=s.parent,zr(s,!1));const o=s;!function Wa(){nt.lFrame.elementDepthCount--}();const l=jt();l.firstCreatePass&&(Xa(l,s),On(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Mo(s){return 0!=(16&s.flags)}(o)&&Hv(l,o,Ie(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function gf(s){return 0!=(32&s.flags)}(o)&&Hv(l,o,Ie(),o.stylesWithoutHost,!1)}function qv(s,o,l,d){hh(s,o,l,d),yp()}function vp(s,o,l){const d=Ie(),h=jt(),m=s+20,v=h.firstCreatePass?function Kb(s,o,l,d,h){const m=o.consts,v=ai(m,d),b=Cu(o,s,8,"ng-container",v);return null!==v&&vm(b,v,!0),gv(o,l,b,ai(m,h)),null!==o.queries&&o.queries.elementStart(o,b),b}(m,h,d,o,l):h.data[m];zr(v,!0);const b=d[m]=d[11].createComment("");Gd(h,d,b,v),xr(b,d),Vl(v)&&(cv(h,d,v),ab(h,v,d)),null!=l&&pm(d,v)}function Gv(){let s=bn();const o=jt();za()?ga():(s=s.parent,zr(s,!1)),o.firstCreatePass&&(Xa(o,s),On(s)&&o.queries.elementEnd(s))}function Yb(){return Ie()}function Wv(s){return!!s&&"function"==typeof s.then}function Qb(s){return!!s&&"function"==typeof s.subscribe}const Jb=Qb;function zv(s,o,l,d){const h=Ie(),m=jt(),v=bn();return function Yv(s,o,l,d,h,m,v,b){const C=Vl(d),R=s.firstCreatePass&&vb(s),L=o[8],$=yb(o);let K=!0;if(3&d.type||b){const Be=Fn(d,o),tt=b?b(Be):Be,ve=$.length,gt=b?Yt=>b(Zn(Yt[d.index])):d.index;if(In(l)){let Yt=null;if(!b&&C&&(Yt=function pA(s,o,l,d){const h=s.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const v=h[m];if(v===l&&h[m+1]===d){const b=o[7],C=h[m+2];return b.length>C?b[C]:null}"string"==typeof v&&(m+=2)}return null}(s,o,h,d.index)),null!==Yt)(Yt.__ngLastListenerFn__||Yt).__ngNextListenerFn__=m,Yt.__ngLastListenerFn__=m,K=!1;else{m=Jv(d,o,L,m,!1);const fn=l.listen(tt,h,m);$.push(m,fn),R&&R.push(h,gt,ve,ve+1)}}else m=Jv(d,o,L,m,!0),tt.addEventListener(h,m,v),$.push(m),R&&R.push(h,gt,ve,v)}else m=Jv(d,o,L,m,!1);const me=d.outputs;let Me;if(K&&null!==me&&(Me=me[h])){const Be=Me.length;if(Be)for(let tt=0;tt<Be;tt+=2){const Ri=o[Me[tt]][Me[tt+1]].subscribe(m),Ml=$.length;$.push(m,Ri),R&&R.push(h,d.index,Ml,-(Ml+1))}}}(m,h,h[11],v,s,o,!!l,d),zv}function Qv(s,o,l,d){try{return!1!==l(d)}catch(h){return Du(s,h),!1}}function Jv(s,o,l,d,h){return function m(v){if(v===Function)return d;const b=2&s.flags?oi(s.index,o):o;0==(32&o[2])&&Cv(b);let C=Qv(o,0,d,v),x=m.__ngNextListenerFn__;for(;x;)C=Qv(o,0,x,v)&&C,x=x.__ngNextListenerFn__;return h&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function Xv(s=1){return function df(s){return(nt.lFrame.contextLView=function Kl(s,o){for(;s>0;)o=o[15],s--;return o}(s,nt.lFrame.contextLView))[8]}(s)}function e0(s,o,l){return t0(s,"",o,"",l),e0}function t0(s,o,l,d,h){const m=Ie(),v=oh(m,o,l,d);return v!==Pt&&Ls(jt(),Ln(),m,s,v,m[11],h,!1),t0}function nC(s,o,l,d,h){const m=s[l+1],v=null===o;let b=d?Go(m):fs(m),C=!1;for(;0!==b&&(!1===C||v);){const R=s[b+1];mA(s[b],o)&&(C=!0,s[b+1]=d?Pc(R):Qf(R)),b=d?Go(R):fs(R)}C&&(s[l+1]=d?Qf(m):Pc(m))}function mA(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Aa(s,o)>=0}function Zm(s,o){return function Zs(s,o,l,d){const h=Ie(),m=jt(),v=function $i(s){const o=nt.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}(2);m.firstUpdatePass&&function lC(s,o,l,d){const h=s.data;if(null===h[l+1]){const m=h[Tn()],v=function Hm(s,o){return o>=s.expandoStartIndex}(s,l);(function qm(s,o){return 0!=(s.flags&(o?16:32))})(m,d)&&null===o&&!v&&(o=!1),o=function bp(s,o,l,d){const h=function ko(s){const o=nt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let m=d?o.residualClasses:o.residualStyles;if(null===h)0===(d?o.classBindings:o.styleBindings)&&(l=Zc(l=Cp(null,s,o,l,d),o.attrs,d),m=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(l=Cp(h,s,o,l,d),null===m){let C=function vA(s,o,l){const d=l?o.classBindings:o.styleBindings;if(0!==fs(d))return s[Go(d)]}(s,o,d);void 0!==C&&Array.isArray(C)&&(C=Cp(null,s,o,C[1],d),C=Zc(C,o.attrs,d),function wA(s,o,l,d){s[Go(l?o.classBindings:o.styleBindings)]=d}(s,o,d,C))}else m=function EA(s,o,l){let d;const h=o.directiveEnd;for(let m=1+o.directiveStylingLast;m<h;m++)d=Zc(d,s[m].hostAttrs,l);return Zc(d,o.attrs,l)}(s,o,d)}return void 0!==m&&(d?o.residualClasses=m:o.residualStyles=m),l}(h,m,o,d),function Bm(s,o,l,d,h,m){let v=m?o.classBindings:o.styleBindings,b=Go(v),C=fs(v);s[d]=l;let R,x=!1;if(Array.isArray(l)){const L=l;R=L[1],(null===R||Aa(L,R)>0)&&(x=!0)}else R=l;if(h)if(0!==C){const $=Go(s[b+1]);s[d+1]=sm($,b),0!==$&&(s[$+1]=om(s[$+1],d)),s[b+1]=function Nc(s,o){return 131071&s|o<<17}(s[b+1],d)}else s[d+1]=sm(b,0),0!==b&&(s[b+1]=om(s[b+1],d)),b=d;else s[d+1]=sm(C,0),0===b?b=d:s[C+1]=om(s[C+1],d),C=d;x&&(s[d+1]=Qf(s[d+1])),nC(s,R,d,!0),nC(s,R,d,!1),function jm(s,o,l,d,h){const m=h?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof o&&Aa(m,o)>=0&&(l[d+1]=Pc(l[d+1]))}(o,R,s,d,m),v=sm(b,C),m?o.classBindings=v:o.styleBindings=v}(h,m,o,l,v,d)}}(m,s,v,d),o!==Pt&&Qr(h,v,o)&&function uC(s,o,l,d,h,m,v,b){if(!(3&o.type))return;const C=s.data,x=C[b+1];ph(function nv(s){return 1==(1&s)}(x)?d0(C,o,l,h,fs(x),v):void 0)||(ph(m)||function tv(s){return 2==(2&s)}(x)&&(m=d0(C,null,l,h,b,v)),function RD(s,o,l,d,h){const m=In(s);if(o)h?m?s.addClass(l,d):l.classList.add(d):m?s.removeClass(l,d):l.classList.remove(d);else{let v=-1===d.indexOf("-")?void 0:co.DashCase;if(null==h)m?s.removeStyle(l,d,v):l.style.removeProperty(d);else{const b="string"==typeof h&&h.endsWith("!important");b&&(h=h.slice(0,-10),v|=co.Important),m?s.setStyle(l,d,h,v):l.style.setProperty(d,h,b?"important":"")}}}(d,v,Ts(Tn(),l),h,m))}(m,m.data[Tn()],h,h[11],s,h[v+1]=function h0(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ae(uo(s)))),s}(o,l),d,v)}(s,o,null,!0),Zm}function Cp(s,o,l,d,h){let m=null;const v=l.directiveEnd;let b=l.directiveStylingLast;for(-1===b?b=l.directiveStart:b++;b<v&&(m=o[b],d=Zc(d,m.hostAttrs,h),m!==s);)b++;return null!==s&&(l.directiveStylingLast=b),d}function Zc(s,o,l){const d=l?1:2;let h=-1;if(null!==o)for(let m=0;m<o.length;m++){const v=o[m];"number"==typeof v?h=v:h===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Pr(s,v,!!l||o[++m]))}return void 0===s?null:s}function d0(s,o,l,d,h,m){const v=null===o;let b;for(;h>0;){const C=s[h],x=Array.isArray(C),R=x?C[1]:C,L=null===R;let $=l[h+1];$===Pt&&($=L?bt:void 0);let K=L?Lo($,d):R===d?$:void 0;if(x&&!ph(K)&&(K=Lo(C,d)),ph(K)&&(b=K,v))return b;const me=s[h+1];h=v?Go(me):fs(me)}if(null!==o){let C=m?o.residualClasses:o.residualStyles;null!=C&&(b=Lo(C,d))}return b}function ph(s){return void 0!==s}function Ip(s,o=""){const l=Ie(),d=jt(),h=s+20,m=d.firstCreatePass?Cu(d,h,1,o,null):d.data[h],v=l[h]=function Ac(s,o){return In(s)?s.createText(o):s.createTextNode(o)}(l[11],o);Gd(d,l,v,m),zr(m,!1)}function Sl(s){return gh("",s,""),Sl}function gh(s,o,l){const d=Ie(),h=oh(d,s,o,l);return h!==Pt&&Us(d,Tn(),h),gh}const Nu=void 0;var kA=["en",[["a","p"],["AM","PM"],Nu],[["AM","PM"],Nu,Nu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Nu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Nu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Nu,"{1} 'at' {0}",Nu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function wC(s){const l=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let Pu={};function E0(s){const o=function RA(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=CC(o);if(l)return l;const d=o.split("-")[0];if(l=CC(d),l)return l;if("en"===d)return kA;throw new Error(`Missing locale data for the locale "${s}".`)}function bC(s){return E0(s)[yt.PluralCase]}function CC(s){return s in Pu||(Pu[s]=Et.ng&&Et.ng.common&&Et.ng.common.locales&&Et.ng.common.locales[s]),Pu[s]}var yt=(()=>((yt=yt||{})[yt.LocaleId=0]="LocaleId",yt[yt.DayPeriodsFormat=1]="DayPeriodsFormat",yt[yt.DayPeriodsStandalone=2]="DayPeriodsStandalone",yt[yt.DaysFormat=3]="DaysFormat",yt[yt.DaysStandalone=4]="DaysStandalone",yt[yt.MonthsFormat=5]="MonthsFormat",yt[yt.MonthsStandalone=6]="MonthsStandalone",yt[yt.Eras=7]="Eras",yt[yt.FirstDayOfWeek=8]="FirstDayOfWeek",yt[yt.WeekendRange=9]="WeekendRange",yt[yt.DateFormat=10]="DateFormat",yt[yt.TimeFormat=11]="TimeFormat",yt[yt.DateTimeFormat=12]="DateTimeFormat",yt[yt.NumberSymbols=13]="NumberSymbols",yt[yt.NumberFormats=14]="NumberFormats",yt[yt.CurrencyCode=15]="CurrencyCode",yt[yt.CurrencySymbol=16]="CurrencySymbol",yt[yt.CurrencyName=17]="CurrencyName",yt[yt.Currencies=18]="Currencies",yt[yt.Directionality=19]="Directionality",yt[yt.PluralCase=20]="PluralCase",yt[yt.ExtraData=21]="ExtraData",yt))();const yh="en-US";let Ym=yh;function O0(s,o,l,d,h){if(s=te(s),Array.isArray(s))for(let m=0;m<s.length;m++)O0(s[m],o,l,d,h);else{const m=jt(),v=Ie();let b=Fc(s)?s:te(s.provide),C=bb(s);const x=bn(),R=1048575&x.providerIndexes,L=x.directiveStart,$=x.providerIndexes>>20;if(Fc(s)||!s.multi){const K=new Xl(C,h,_p),me=L0(b,o,h?R:R+$,L);-1===me?(Oo(ya(x,v),m,b),F0(m,s,o.length),o.push(b),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),l.push(K),v.push(K)):(l[me]=K,v[me]=K)}else{const K=L0(b,o,R+$,L),me=L0(b,o,R,R+$),Me=K>=0&&l[K],Be=me>=0&&l[me];if(h&&!Be||!h&&!Me){Oo(ya(x,v),m,b);const tt=function JR(s,o,l,d,h){const m=new Xl(s,l,_p);return m.multi=[],m.index=o,m.componentProviders=0,GC(m,h,d&&!l),m}(h?s1:i1,l.length,h,d,C);!h&&Be&&(l[me].providerFactory=tt),F0(m,s,o.length,0),o.push(b),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),l.push(tt),v.push(tt)}else F0(m,s,K>-1?K:me,GC(l[h?me:K],C,!h&&d));!h&&d&&Be&&l[me].componentProviders++}}}function F0(s,o,l,d){const h=Fc(o),m=function Ib(s){return!!s.useClass}(o);if(h||m){const C=(m?te(o.useClass):o).prototype.ngOnDestroy;if(C){const x=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const R=x.indexOf(l);-1===R?x.push(l,[d,C]):x[R+1].push(d,C)}else x.push(l,C)}}}function GC(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function L0(s,o,l,d){for(let h=l;h<d;h++)if(o[h]===s)return h;return-1}function i1(s,o,l,d){return WC(this.multi,[])}function s1(s,o,l,d){const h=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,b=il(l,l[1],this.providerFactory.index,d);m=b.slice(0,v),WC(h,m);for(let C=v;C<b.length;C++)m.push(b[C])}else m=[],WC(h,m);return m}function WC(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function zC(s,o=[]){return l=>{l.providersResolver=(d,h)=>function r1(s,o,l){const d=jt();if(d.firstCreatePass){const h=Di(s);O0(l,d.data,d.blueprint,h,!0),O0(o,d.data,d.blueprint,h,!1)}}(d,h?h(s):s,o)}}class KC{}class a1{resolveComponentFactory(o){throw function YC(s){const o=Error(`No component factory found for ${ae(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Mp=(()=>{class s{}return s.NULL=new a1,s})();function Uu(){return ur(bn(),Ie())}function ur(s,o){return new _i(Fn(s,o))}let _i=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=Uu,s})();function Np(s){return s instanceof _i?s.nativeElement:s}class JC{}let l1=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function r_(){const s=Ie(),l=oi(bn().index,s);return function u1(s){return s[11]}(is(l)?l:s)}(),s})(),c1=(()=>{class s{}return s.\u0275prov=yn({token:s,providedIn:"root",factory:()=>null}),s})();class XC{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const U0=new XC("13.0.3"),i_={};function Eh(s,o,l,d,h=!1){for(;null!==l;){const m=o[l.index];if(null!==m&&d.push(Zn(m)),ss(m))for(let b=10;b<m.length;b++){const C=m[b],x=C[1].firstChild;null!==x&&Eh(C[1],C,x,d)}const v=l.type;if(8&v)Eh(s,o,l.child,d);else if(32&v){const b=Dc(l,o);let C;for(;C=b();)d.push(C)}else if(16&v){const b=Kf(o,l);if(Array.isArray(b))d.push(...b);else{const C=_l(o[16]);Eh(C[1],C,b,d,!0)}}l=h?l.projectionNext:l.next}return d}class bh{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return Eh(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ss(o)){const l=o[8],d=l?l.indexOf(this):-1;d>-1&&(j(o,d),Ia(l,d))}this._attachedToViewContainer=!1}J(this._lView[1],this._lView)}onDestroy(o){cb(this._lView[1],this._lView,null,o)}markForCheck(){Cv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Bn(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Qi(s,o,l){io(!0);try{Bn(s,o,l)}finally{io(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function f(s,o){Yf(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=o}}class s_ extends bh{constructor(o){super(o),this._view=o}detectChanges(){Gt(this._view)}checkNoChanges(){!function GD(s){io(!0);try{Gt(s)}finally{io(!1)}}(this._view)}get context(){return null}}class eI extends Mp{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=zt(o);return new tI(l,this.ngModule)}}function d1(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}const V0=new ln("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>mu});class tI extends KC{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function P(s){return s.map(Yi).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return d1(this.componentDef.inputs)}get outputs(){return d1(this.componentDef.outputs)}create(o,l,d,h){const m=(h=h||this.ngModule)?function tM(s,o){return{get:(l,d,h)=>{const m=s.get(l,i_,h);return m!==i_||d===i_?m:o.get(l,d,h)}}}(o,h.injector):o,v=m.get(JC,Qu),b=m.get(c1,null),C=v.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",R=d?function ub(s,o,l){if(In(s))return s.selectRootElement(o,l===et.ShadowDom);let d="string"==typeof o?s.querySelector(o):o;return d.textContent="",d}(C,d,this.componentDef.encapsulation):qf(v.createRenderer(null,this.componentDef),x,function h1(s){const o=s.toLowerCase();return"svg"===o?uf:"math"===o?"http://www.w3.org/1998/MathML/":null}(x)),L=this.componentDef.onPush?576:528,$=function Uc(s,o){return{components:[],scheduler:s||mu,clean:WD,playerHandler:o||null,flags:0}}(),K=ip(0,null,null,1,0,null,null,null,null,null),me=tp(null,K,$,L,null,null,v,C,b,m);let Me,Be;_a(me);try{const tt=function Rv(s,o,l,d,h,m){const v=l[1];l[20]=s;const C=Cu(v,20,2,"#host",null),x=C.mergedAttrs=o.hostAttrs;null!==x&&(vm(C,x,!0),null!==s&&(an(h,s,x),null!==C.classes&&Yy(h,s,C.classes),null!==C.styles&&KE(h,s,C.styles)));const R=d.createRenderer(s,o),L=tp(l,dv(o),null,o.onPush?64:16,l[20],C,d,R,m||null,null);return v.firstCreatePass&&(Oo(ya(C,l),v,o.type),yv(v,C),vv(C,l.length,1)),Qd(l,L),l[20]=L}(R,this.componentDef,me,v,C);if(R)if(d)an(C,R,["ng-version",U0.full]);else{const{attrs:ve,classes:gt}=function qo(s){const o=[],l=[];let d=1,h=2;for(;d<s.length;){let m=s[d];if("string"==typeof m)2===h?""!==m&&o.push(m,s[++d]):8===h&&l.push(m);else{if(!$o(h))break;h=m}d++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);ve&&an(C,R,ve),gt&&gt.length>0&&Yy(C,R,gt.join(" "))}if(Be=qa(K,20),void 0!==l){const ve=Be.projection=[];for(let gt=0;gt<this.ngContentSelectors.length;gt++){const Yt=l[gt];ve.push(null!=Yt?Array.from(Yt):null)}}Me=function Mv(s,o,l,d,h){const m=l[1],v=function pv(s,o,l){const d=bn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),wv(s,d,o,Iu(s,o,1,null),l));const h=il(o,s,d.directiveStart,d);xr(h,o);const m=Fn(d,o);return m&&xr(m,o),h}(m,l,o);if(d.components.push(v),s[8]=v,h&&h.forEach(C=>C(v,o)),o.contentQueries){const C=bn();o.contentQueries(1,v,C.directiveStart)}const b=bn();return!m.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(as(b.index),hb(l[1],b,0,b.directiveStart,b.directiveEnd,o),_v(o,v)),v}(tt,this.componentDef,me,$,[up]),rp(K,me,null)}finally{Ya()}return new rM(this.componentType,Me,ur(Be,me),me,Be)}}class rM extends class o1{}{constructor(o,l,d,h,m){super(),this.location=d,this._rootLView=h,this._tNode=m,this.instance=l,this.hostView=this.changeDetectorRef=new s_(h),this.componentType=o}get injector(){return new mn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Pp{}class p1{}const Op=new Map;class Br extends Pp{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new eI(this);const d=Wn(o);this._bootstrapComponents=Os(d.bootstrap),this._r3Injector=Ko(o,l,[{provide:Pp,useValue:this},{provide:Mp,useValue:this.componentFactoryResolver}],ae(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,l=fo.THROW_IF_NOT_FOUND,d=mt.Default){return o===fo||o===Pp||o===Tv?this:this._r3Injector.get(o,l,d)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class qs extends p1{constructor(o){super(),this.moduleType=o,null!==Wn(o)&&function sM(s){const o=new Set;!function l(d){const h=Wn(d,!0),m=h.id;null!==m&&(function g1(s,o,l){if(o&&o!==l)throw new Error(`Duplicate module registered for ${s} - ${ae(o)} vs ${ae(o.name)}`)}(m,Op.get(m),d),Op.set(m,d));const v=Os(h.imports);for(const b of v)o.has(b)||(o.add(b),l(b))}(s)}(o)}create(o){return new Br(this.moduleType,o)}}function jr(s,o){const l=s[o];return l===Pt?void 0:l}function j0(s,o,l,d,h,m,v){const b=o+l;return function Cl(s,o,l,d){const h=Qr(s,o,l);return Qr(s,o+1,d)||h}(s,b,h,m)?Bs(s,b+2,v?d.call(v,h,m):d(h,m)):jr(s,b+2)}function l_(s,o){const l=jt();let d;const h=s+20;l.firstCreatePass?(d=function Z0(s,o){if(o)for(let l=o.length-1;l>=0;l--){const d=o[l];if(s===d.name)return d}}(o,l.pipeRegistry),l.data[h]=d,d.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(h,d.onDestroy)):d=l.data[h];const m=d.factory||(d.factory=Is(d.type)),v=ar(_p);try{const b=Ss(!1),C=m();return Ss(b),function Rm(s,o,l,d){l>=s.data.length&&(s.data[l]=null,s.blueprint[l]=null),o[l]=d}(l,Ie(),h,C),C}finally{ar(v)}}function sI(s,o,l){const d=s+20,h=Ie(),m=Sn(h,d);return kl(h,d)?function Fp(s,o,l,d,h,m){const v=o+l;return Qr(s,v,h)?Bs(s,v+1,m?d.call(m,h):d(h)):jr(s,v+1)}(h,Sr(),o,m.transform,l,m):m.transform(l)}function oI(s,o,l,d){const h=s+20,m=Ie(),v=Sn(m,h);return kl(m,h)?j0(m,Sr(),o,v.transform,l,d,v):v.transform(l,d)}function kl(s,o){return s[1].data[o].pure}function Ch(s){return o=>{setTimeout(s,void 0,o)}}const Xo=class aI extends u.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,d){var h,m,v;let b=o,C=l||(()=>null),x=d;if(o&&"object"==typeof o){const L=o;b=null===(h=L.next)||void 0===h?void 0:h.bind(L),C=null===(m=L.error)||void 0===m?void 0:m.bind(L),x=null===(v=L.complete)||void 0===v?void 0:v.bind(L)}this.__isAsync&&(C=Ch(C),b&&(b=Ch(b)),x&&(x=Ch(x)));const R=super.subscribe({next:b,error:C,complete:x});return o instanceof Y.w0&&o.add(R),R}};function A1(){return this._results[rh()]()}class $0{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=rh(),d=$0.prototype;d[l]||(d[l]=A1)}get changes(){return this._changes||(this._changes=new Xo)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const d=this;d.dirty=!1;const h=Yr(o);(this._changesDetected=!function Vg(s,o,l){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],m=o[d];if(l&&(h=l(h),m=l(m)),m!==h)return!1}return!0}(d._results,h,l))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Up=(()=>{class s{}return s.__NG_ELEMENT_ID__=H0,s})();const S1=Up,lI=class extends S1{constructor(o,l,d){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(o){const l=this._declarationTContainer.tViews,d=tp(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(d[19]=m.createEmbeddedView(l)),rp(l,d,o),new bh(d)}};function H0(){return Vp(bn(),Ie())}function Vp(s,o){return 4&s.type?new lI(o,s,ur(s,o)):null}let Ih=(()=>{class s{}return s.__NG_ELEMENT_ID__=uI,s})();function uI(){return dI(bn(),Ie())}const Bp=Ih,cI=class extends Bp{constructor(o,l,d){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=d}get element(){return ur(this._hostTNode,this._hostLView)}get injector(){return new mn(this._hostTNode,this._hostLView)}get parentInjector(){const o=va(this._hostTNode,this._hostLView);if(tr(o)){const l=No(o,this._hostLView),d=tl(o);return new mn(l[1].data[d+8],l)}return new mn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=u_(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,d){const h=o.createEmbeddedView(l||{});return this.insert(h,d),h}createComponent(o,l,d,h,m){const v=o&&!function ol(s){return"function"==typeof s}(o);let b;if(v)b=l;else{const L=l||{};b=L.index,d=L.injector,h=L.projectableNodes,m=L.ngModuleRef}const C=v?o:new tI(zt(o)),x=d||this.parentInjector;if(!m&&null==C.ngModule&&x){const L=x.get(Pp,null);L&&(m=L)}const R=C.create(x,h,void 0,m);return this.insert(R.hostView,b),R}insert(o,l){const d=o._lView,h=d[1];if(function Ds(s){return ss(s[3])}(d)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const L=d[3],$=new cI(L,L[6],L[3]);$.detach($.indexOf(o))}}const m=this._adjustIndex(l),v=this._lContainer;!function w(s,o,l,d){const h=10+d,m=l.length;d>0&&(l[h-1][4]=o),d<m-10?(o[4]=l[h],tu(l,10+d,o)):(l.push(o),o[4]=null),o[3]=l;const v=o[17];null!==v&&l!==v&&function A(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(v,o);const b=o[19];null!==b&&b.insertView(s),o[2]|=128}(h,d,v,m);const b=Ky(m,v),C=d[11],x=Sc(C,v[7]);return null!==x&&function y(s,o,l,d,h,m){d[0]=h,d[6]=o,Yf(s,d,l,1,h,m)}(h,v[6],C,d,x,b),o.attachToViewContainerRef(),tu(c_(v),m,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=u_(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),d=j(this._lContainer,l);d&&(Ia(c_(this._lContainer),l),J(d[1],d))}detach(o){const l=this._adjustIndex(o,-1),d=j(this._lContainer,l);return d&&null!=Ia(c_(this._lContainer),l)?new bh(d):null}_adjustIndex(o,l=0){return null==o?this.length+l:o}};function u_(s){return s[8]}function c_(s){return s[8]||(s[8]=[])}function dI(s,o){let l;const d=o[s.index];if(ss(d))l=d;else{let h;if(8&s.type)h=Zn(d);else{const m=o[11];h=m.createComment("");const v=Fn(s,o);Vn(m,Sc(m,v),h,function nm(s,o){return In(s)?s.nextSibling(o):o.nextSibling}(m,v),!1)}o[s.index]=l=bv(d,o,h,s),Qd(o,l)}return new cI(l,s,o)}class jp{constructor(o){this.queryList=o,this.matches=null}clone(){return new jp(this.queryList)}setDirty(){this.queryList.setDirty()}}class G0{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const d=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let m=0;m<d;m++){const v=l.getByIndex(m);h.push(this.queries[v.indexInDeclarationView].clone())}return new G0(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==wI(o,l).matches&&this.queries[l].setDirty()}}class fI{constructor(o,l,d=null){this.predicate=o,this.flags=l,this.read=d}}class W0{constructor(o=[]){this.queries=o}elementStart(o,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let d=0;d<this.length;d++){const h=null!==l?l.length:0,m=this.getByIndex(d).embeddedTView(o,h);m&&(m.indexInDeclarationView=d,null!==l?l.push(m):l=[m])}return null!==l?new W0(l):null}template(o,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Th{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new Th(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const m=d[h];this.matchTNodeWithReadOption(o,l,z0(l,m)),this.matchTNodeWithReadOption(o,l,mr(l,o,m,!1,!1))}else d===Up?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,mr(l,o,d,!1,!1))}matchTNodeWithReadOption(o,l,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===_i||h===Ih||h===Up&&4&l.type)this.addMatch(l.index,-2);else{const m=mr(l,o,h,!1,!1);null!==m&&this.addMatch(l.index,m)}else this.addMatch(l.index,d)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function z0(s,o){const l=s.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===o)return l[d+1];return null}function Y0(s,o,l,d){return-1===l?function K0(s,o){return 11&s.type?ur(s,o):4&s.type?Vp(s,o):null}(o,s):-2===l?function pI(s,o,l){return l===_i?ur(o,s):l===Up?Vp(o,s):l===Ih?dI(o,s):void 0}(s,o,d):il(s,s[1],l,o)}function gI(s,o,l,d){const h=o[19].queries[d];if(null===h.matches){const m=s.data,v=l.matches,b=[];for(let C=0;C<v.length;C+=2){const x=v[C];b.push(x<0?null:Y0(o,m[x],v[C+1],l.metadata.read))}h.matches=b}return h.matches}function d_(s,o,l,d){const h=s.queries.getByIndex(l),m=h.matches;if(null!==m){const v=gI(s,o,h,l);for(let b=0;b<m.length;b+=2){const C=m[b];if(C>0)d.push(v[b/2]);else{const x=m[b+1],R=o[-C];for(let L=10;L<R.length;L++){const $=R[L];$[17]===$[3]&&d_($[1],$,x,d)}if(null!==R[9]){const L=R[9];for(let $=0;$<L.length;$++){const K=L[$];d_(K[1],K,x,d)}}}}}return d}function Zp(s){const o=Ie(),l=jt(),d=md();Ro(d+1);const h=wI(l,d);if(s.dirty&&Zi(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const m=h.crossesNgTemplate?d_(l,o,d,[]):gI(l,o,h,d);s.reset(m,Np),s.notifyOnChanges()}return!0}return!1}function mI(s,o,l,d){const h=jt();if(h.firstCreatePass){const m=bn();(function vI(s,o,l){null===s.queries&&(s.queries=new W0),s.queries.track(new Th(o,l))})(h,new fI(o,l,d),m.index),function M1(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}!function yI(s,o,l){const d=new $0(4==(4&l));cb(s,o,d,d.destroy),null===o[19]&&(o[19]=new G0),o[19].queries.push(new jp(d))}(h,Ie(),l)}function _I(){return function R1(s,o){return s[19].queries[o].queryList}(Ie(),md())}function wI(s,o){return s.queries.getByIndex(o)}function EI(s,o){return Vp(s,o)}function qp(...s){}const m_=new ln("Application Initializer");let La=(()=>{class s{constructor(l){this.appInits=l,this.resolve=qp,this.reject=qp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,h)=>{this.resolve=d,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(Wv(m))l.push(m);else if(Jb(m)){const v=new Promise((b,C)=>{m.subscribe({complete:b,error:C})});l.push(v)}}Promise.all(l).then(()=>{d()}).catch(h=>{this.reject(h)}),0===l.length&&d(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(ie(m_,8))},s.\u0275prov=yn({token:s,factory:s.\u0275fac}),s})();const VI=new ln("AppId"),z1={provide:VI,useFactory:function BI(){return`${sw()}${sw()}${sw()}`},deps:[]};function sw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ow=new ln("Platform Initializer"),aw=new ln("Platform ID"),lw=new ln("appBootstrapListener");let jI=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=yn({token:s,factory:s.\u0275fac}),s})();const __=new ln("LocaleId"),uw=new ln("DefaultCurrencyCode");class Y1{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let cw=(()=>{class s{compileModuleSync(l){return new qs(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),m=Os(Wn(l).declarations).reduce((v,b)=>{const C=zt(b);return C&&v.push(new tI(C)),v},[]);return new Y1(d,m)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=yn({token:s,factory:s.\u0275fac}),s})();const J1=(()=>Promise.resolve(0))();function Gp(s){"undefined"==typeof Zone?J1.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class wr{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xo(!1),this.onMicrotaskEmpty=new Xo(!1),this.onStable=new Xo(!1),this.onError=new Xo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&l,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function X1(){let s=Et.requestAnimationFrame,o=Et.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function y_(s){const o=()=>{!function Ot(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Et,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,zp(s),s.isCheckStableRunning=!0,Wp(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),zp(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,h,m,v,b)=>{try{return Dh(s),l.invokeTask(h,m,v,b)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),$I(s)}},onInvoke:(l,d,h,m,v,b,C)=>{try{return Dh(s),l.invoke(h,m,v,b,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),$I(s)}},onHasTask:(l,d,h,m)=>{l.hasTask(h,m),d===h&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,zp(s),Wp(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(l,d,h,m)=>(l.handleError(h,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!wr.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(wr.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,l,d){return this._inner.run(o,l,d)}runTask(o,l,d,h){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+h,o,it,qp,qp);try{return m.runTask(v,l,d)}finally{m.cancelTask(v)}}runGuarded(o,l,d){return this._inner.runGuarded(o,l,d)}runOutsideAngular(o){return this._outer.run(o)}}const it={};function Wp(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function zp(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Dh(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function $I(s){s._nesting--,Wp(s)}class dw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xo,this.onMicrotaskEmpty=new Xo,this.onStable=new Xo,this.onError=new Xo}run(o,l,d){return o.apply(l,d)}runGuarded(o,l,d){return o.apply(l,d)}runOutsideAngular(o){return o()}runTask(o,l,d,h){return o.apply(l,d)}}let HI=(()=>{class s{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{wr.assertNotInAngularZone(),Gp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Gp(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,h){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:m,updateCb:h})}whenStable(l,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,d,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(ie(wr))},s.\u0275prov=yn({token:s,factory:s.\u0275fac}),s})(),qI=(()=>{class s{constructor(){this._applications=new Map,Ah.addToWindow(this)}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return Ah.findTestabilityInTree(this,l,d)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=yn({token:s,factory:s.\u0275fac}),s})();class eS{addToWindow(o){}findTestabilityInTree(o,l,d){return null}}function yi(s){Ah=s}let Nn,Ah=new eS;const hw=new ln("AllowMultipleToken");class GI{constructor(o,l){this.name=o,this.token=l}}function fw(s,o,l=[]){const d=`Platform: ${o}`,h=new ln(d);return(m=[])=>{let v=mw();if(!v||v.injector.get(hw,!1))if(s)s(l.concat(m).concat({provide:h,useValue:!0}));else{const b=l.concat(m).concat({provide:h,useValue:!0},{provide:wm,useValue:"platform"});!function nS(s){if(Nn&&!Nn.destroyed&&!Nn.injector.get(hw,!1))throw new He("400","");Nn=s.get(ki);const o=s.get(ow,null);o&&o.forEach(l=>l())}(fo.create({providers:b,name:d}))}return function pw(s){const o=mw();if(!o)throw new He("401","");return o}()}}function mw(){return Nn&&!Nn.destroyed?Nn:null}let ki=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const b=function _w(s,o){let l;return l="noop"===s?new dw:("zone.js"===s?void 0:s)||new wr({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),l}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),C=[{provide:wr,useValue:b}];return b.run(()=>{const x=fo.create({providers:C,parent:this.injector,name:l.moduleType.name}),R=l.create(x),L=R.injector.get(Tc,null);if(!L)throw new He("402","");return b.runOutsideAngular(()=>{const $=b.onError.subscribe({next:K=>{L.handleError(K)}});R.onDestroy(()=>{Kp(this._modules,R),$.unsubscribe()})}),function Xi(s,o,l){try{const d=l();return Wv(d)?d.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}(L,b,()=>{const $=R.injector.get(La);return $.runInitializers(),$.donePromise.then(()=>(function Qm(s){St(s,"Expected localeId to be defined"),"string"==typeof s&&(Ym=s.toLowerCase().replace(/_/g,"-"))}(R.injector.get(__,yh)||yh),this._moduleDoBootstrap(R),R))})})}bootstrapModule(l,d=[]){const h=yw({},d);return function Vu(s,o,l){const d=new qs(l);return Promise.resolve(d)}(0,0,l).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(l){const d=l.injector.get(Sh);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new He("403","");l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new He("404","");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(ie(fo))},s.\u0275prov=yn({token:s,factory:s.\u0275fac}),s})();function yw(s,o){return Array.isArray(o)?o.reduce(yw,s):Object.assign(Object.assign({},s),o)}let Sh=(()=>{class s{constructor(l,d,h,m,v){this._zone=l,this._injector=d,this._exceptionHandler=h,this._componentFactoryResolver=m,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const b=new O.y(x=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{x.next(this._stable),x.complete()})}),C=new O.y(x=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{wr.assertNotInAngularZone(),Gp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,x.next(!0))})})});const L=this._zone.onUnstable.subscribe(()=>{wr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{x.next(!1)}))});return()=>{R.unsubscribe(),L.unsubscribe()}});this.isStable=(0,se.T)(b,C.pipe((0,re.B)()))}bootstrap(l,d){if(!this._initStatus.done)throw new He("405","");let h;h=l instanceof KC?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(h.componentType);const m=function tS(s){return s.isBoundToModule}(h)?void 0:this._injector.get(Pp),b=h.create(fo.NULL,[],d||h.selector,m),C=b.location.nativeElement,x=b.injector.get(HI,null),R=x&&b.injector.get(qI);return x&&R&&R.registerApplication(C,x),b.onDestroy(()=>{this.detachView(b.hostView),Kp(this.components,b),R&&R.unregisterApplication(C)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new He("101","");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;Kp(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(lw,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(l){return new(l||s)(ie(wr),ie(fo),ie(Tc),ie(Mp),ie(La))},s.\u0275prov=yn({token:s,factory:s.\u0275fac}),s})();function Kp(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let ww=!0,v_=!1;function rS(){return v_=!0,ww}function iS(){if(v_)throw new Error("Cannot enable prod mode after platform setup.");ww=!1}let zI=(()=>{class s{}return s.__NG_ELEMENT_ID__=oS,s})();function oS(s){return function KI(s,o,l){if(Za(s)&&!l){const d=oi(s.index,o);return new bh(d,d)}return 47&s.type?new bh(o[16],o):null}(bn(),Ie(),16==(16&s))}class Iw{constructor(){}supports(o){return ih(o)}create(o){return new iT(o)}}const Tw=(s,o)=>o;class iT{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Tw}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,d=this._removalsHead,h=0,m=null;for(;l||d;){const v=!d||l&&l.currentIndex<C_(d,h,m)?l:d,b=C_(v,h,m),C=v.currentIndex;if(v===d)h--,d=d._nextRemoved;else if(l=l._next,null==v.previousIndex)h++;else{m||(m=[]);const x=b-h,R=C-h;if(x!=R){for(let $=0;$<x;$++){const K=$<m.length?m[$]:m[$]=0,me=K+$;R<=me&&me<x&&(m[$]=K+1)}m[v.previousIndex]=R-x}}b!==C&&o(v,b,C)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!ih(o))throw new Error(`Error trying to diff '${ae(o)}'. Only arrays and iterables are allowed`);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,m,v,l=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let b=0;b<this.length;b++)m=o[b],v=this._trackByFn(b,m),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,m,v,b)),Object.is(l.item,m)||this._addIdentityChange(l,m)):(l=this._mismatch(l,m,v,b),d=!0),l=l._next}else h=0,function Sm(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[rh()]();let d;for(;!(d=l.next()).done;)o(d.value)}}(o,b=>{v=this._trackByFn(h,b),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,b,v,h)),Object.is(l.item,b)||this._addIdentityChange(l,b)):(l=this._mismatch(l,b,v,h),d=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,d,h){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,m,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,m,h)):o=this._addAfter(new fS(l,d),m,h),o}_verifyReinsertion(o,l,d,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?o=this._reinsertAfter(m,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,m=o._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(o,l,d),this._addToMoves(o,d),o}_moveAfter(o,l,d){return this._unlink(o),this._insertAfter(o,l,d),this._addToMoves(o,d),o}_addAfter(o,l,d){return this._insertAfter(o,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,d){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new b_),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,d=o._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new b_),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class fS{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Dw{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const l=o._prevDup,d=o._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class b_{constructor(){this.map=new Map}put(o){const l=o.trackById;let d=this.map.get(l);d||(d=new Dw,this.map.set(l,d)),d.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function C_(s,o,l){const d=s.previousIndex;if(null===d)return d;let h=0;return l&&d<l.length&&(h=l[d]),d+o+h}class Zr{constructor(){}supports(o){return o instanceof Map||Ov(o)}create(){return new vi}}class vi{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||Ov(o)))throw new Error(`Error trying to diff '${ae(o)}'. Only maps and objects are allowed`)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const m=this._getOrCreateRecordForKey(h,d);l=this._insertBeforeOrAppend(l,m)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const d=o._prev;return l._next=o,l._prev=d,o._prev=l,d&&(d._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const m=h._prev,v=h._next;return m&&(m._next=v),v&&(v._prev=m),h._next=null,h._prev=null,h}const d=new I_(o);return this._records.set(o,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(d=>l(o[d],d))}}class I_{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function T_(){return new D_([new Iw])}let D_=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(null!=d){const h=d.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||T_()),deps:[[s,new Fr,new Or]]}}find(l){const d=this.factories.find(h=>h.supports(l));if(null!=d)return d;throw new Error(`Cannot find a differ supporting object '${l}' of type '${function pS(s){return s.name||typeof s}(l)}'`)}}return s.\u0275prov=yn({token:s,providedIn:"root",factory:T_}),s})();function Aw(){return new A_([new Zr])}let A_=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(d){const h=d.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||Aw()),deps:[[s,new Fr,new Or]]}}find(l){const d=this.factories.find(h=>h.supports(l));if(d)return d;throw new Error(`Cannot find a differ supporting object '${l}'`)}}return s.\u0275prov=yn({token:s,providedIn:"root",factory:Aw}),s})();const gS=[new Zr],xw=new D_([new Iw]),mS=new A_(gS),oT=fw(null,"core",[{provide:aw,useValue:"unknown"},{provide:ki,deps:[fo]},{provide:qI,deps:[]},{provide:jI,deps:[]}]),aT=[{provide:Sh,useClass:Sh,deps:[wr,fo,Tc,Mp,La]},{provide:V0,deps:[wr],useFactory:function yS(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(l){o.push(l)}}},{provide:La,useClass:La,deps:[[new Or,m_]]},{provide:cw,useClass:cw,deps:[]},z1,{provide:D_,useFactory:function _S(){return xw},deps:[]},{provide:A_,useFactory:function S_(){return mS},deps:[]},{provide:__,useFactory:function kw(s){return s||function Rw(){return"undefined"!=typeof $localize&&$localize.locale||yh}()},deps:[[new zi(__),new Or,new Fr]]},{provide:uw,useValue:"USD"}];let Jp=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(ie(Sh))},s.\u0275mod=Ve({type:s}),s.\u0275inj=$n({providers:aT}),s})()},3942:(ut,Ee,F)=>{F.d(Ee,{Z:()=>He});var u=F(2090),Y=F(4859),O=F(9681),se=F(1877);class re{constructor(Fe,X){this._delegate=Fe,this.firebase=X,(0,O._addComponent)(Fe,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=Fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Fe){this._delegate.automaticDataCollectionEnabled=Fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Fe=>{this._delegate.checkDestroyed(),Fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(Fe,X=O._DEFAULT_ENTRY_NAME){var De;this._delegate.checkDestroyed();const Le=this._delegate.container.getProvider(Fe);return!Le.isInitialized()&&"EXPLICIT"===(null===(De=Le.getComponent())||void 0===De?void 0:De.instantiationMode)&&Le.initialize(),Le.getImmediate({identifier:X})}_removeServiceInstance(Fe,X=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Fe).clearInstance(X)}_addComponent(Fe){(0,O._addComponent)(this._delegate,Fe)}_addOrOverwriteComponent(Fe){(0,O._addOrOverwriteComponent)(this._delegate,Fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const oe=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function fe(){const Ue=function ae(Ue){const Fe={},X={__esModule:!0,initializeApp:function Ne(Qe,ht={}){const ee=O.initializeApp(Qe,ht);if((0,u.r3)(Fe,ee.name))return Fe[ee.name];const ce=new Ue(ee,X);return Fe[ee.name]=ce,ce},app:Le,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function ke(Qe){const ht=Qe.name,ee=ht.replace("-compat","");if(O._registerComponent(Qe)&&"PUBLIC"===Qe.type){const ce=(_e=Le())=>{if("function"!=typeof _e[ee])throw oe.create("invalid-app-argument",{appName:ht});return _e[ee]()};void 0!==Qe.serviceProps&&(0,u.ZB)(ce,Qe.serviceProps),X[ee]=ce,Ue.prototype[ee]=function(..._e){return this._getService.bind(this,ht).apply(this,Qe.multipleInstances?_e:[])}}return"PUBLIC"===Qe.type?X[ee]:null},removeApp:function De(Qe){delete Fe[Qe]},useAsService:function Ge(Qe,ht){return"serverAuth"===ht?null:ht},modularAPIs:O}};function Le(Qe){if(!(0,u.r3)(Fe,Qe=Qe||O._DEFAULT_ENTRY_NAME))throw oe.create("no-app",{appName:Qe});return Fe[Qe]}return X.default=X,Object.defineProperty(X,"apps",{get:function st(){return Object.keys(Fe).map(Qe=>Fe[Qe])}}),Le.App=Ue,X}(re);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:fe,extendNamespace:function Fe(X){(0,u.ZB)(Ue,X)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),Ue}(),G=new se.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const He=q;!function Te(Ue){(0,O.registerVersion)("@firebase/app-compat","0.1.21",Ue)}()},9681:(ut,Ee,F)=>{F.r(Ee),F.d(Ee,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>ra,_DEFAULT_ENTRY_NAME:()=>Qn,_addComponent:()=>_n,_addOrOverwriteComponent:()=>rs,_apps:()=>St,_clearComponents:()=>$n,_components:()=>vt,_getProvider:()=>yn,_registerComponent:()=>qr,_removeServiceInstance:()=>Eo,deleteApp:()=>fr,getApp:()=>br,getApps:()=>Ae,initializeApp:()=>Ui,onLog:()=>en,registerVersion:()=>mt,setLogLevel:()=>vs});var u=F(5861),Y=F(4859),O=F(1877),se=F(2090);class re{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(ot=>{if(function ye(Je){const Ce=Je.getComponent();return"VERSION"===(null==Ce?void 0:Ce.type)}(ot)){const dt=ot.getImmediate();return`${dt.library}/${dt.version}`}return null}).filter(ot=>ot).join(" ")}}const oe="@firebase/app",fe=new O.Yd("@firebase/app"),Qn="[DEFAULT]",kt={[oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},St=new Map,vt=new Map;function _n(Je,Ce){try{Je.container.addComponent(Ce)}catch(ot){fe.debug(`Component ${Ce.name} failed to register with FirebaseApp ${Je.name}`,ot)}}function rs(Je,Ce){Je.container.addOrOverwriteComponent(Ce)}function qr(Je){const Ce=Je.name;if(vt.has(Ce))return fe.debug(`There were multiple attempts to register component ${Ce}.`),!1;vt.set(Ce,Je);for(const ot of St.values())_n(ot,Je);return!0}function yn(Je,Ce){const ot=Je.container.getProvider("heartbeat").getImmediate({optional:!0});return ot&&ot.triggerHeartbeat(),Je.container.getProvider(Ce)}function Eo(Je,Ce,ot=Qn){yn(Je,Ce).clearInstance(ot)}function $n(){vt.clear()}const rn=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Pn{constructor(Ce,ot,dt){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},ot),this._name=ot.name,this._automaticDataCollectionEnabled=ot.automaticDataCollectionEnabled,this._container=dt,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw rn.create("app-deleted",{appName:this._name})}}const ra="9.6.10";function Ui(Je,Ce={}){"object"!=typeof Ce&&(Ce={name:Ce});const ot=Object.assign({name:Qn,automaticDataCollectionEnabled:!1},Ce),dt=ot.name;if("string"!=typeof dt||!dt)throw rn.create("bad-app-name",{appName:String(dt)});const Bt=St.get(dt);if(Bt){if((0,se.vZ)(Je,Bt.options)&&(0,se.vZ)(ot,Bt.config))return Bt;throw rn.create("duplicate-app",{appName:dt})}const sn=new Y.H0(dt);for(const B of vt.values())sn.addComponent(B);const H=new Pn(Je,ot,sn);return St.set(dt,H),H}function br(Je=Qn){const Ce=St.get(Je);if(!Ce)throw rn.create("no-app",{appName:Je});return Ce}function Ae(){return Array.from(St.values())}function fr(Je){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,u.Z)(function*(Je){const Ce=Je.name;St.has(Ce)&&(St.delete(Ce),yield Promise.all(Je.container.getProviders().map(ot=>ot.delete())),Je.isDeleted=!0)})).apply(this,arguments)}function mt(Je,Ce,ot){var dt;let Bt=null!==(dt=kt[Je])&&void 0!==dt?dt:Je;ot&&(Bt+=`-${ot}`);const sn=Bt.match(/\s|\//),H=Ce.match(/\s|\//);if(sn||H){const B=[`Unable to register library "${Bt}" with version "${Ce}":`];return sn&&B.push(`library name "${Bt}" contains illegal characters (whitespace or "/")`),sn&&H&&B.push("and"),H&&B.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void fe.warn(B.join(" "))}qr(new Y.wA(`${Bt}-version`,()=>({library:Bt,version:Ce}),"VERSION"))}function en(Je,Ce){if(null!==Je&&"function"!=typeof Je)throw rn.create("invalid-log-argument");(0,O.Am)(Je,Ce)}function vs(Je){(0,O.Ub)(Je)}const Mr="firebase-heartbeat-store";let Cr=null;function qn(){return Cr||(Cr=(0,se.X3)("firebase-heartbeat-database",1,(Je,Ce)=>{0===Ce&&Je.createObjectStore(Mr)}).catch(Je=>{throw rn.create("storage-open",{originalErrorMessage:Je.message})})),Cr}function dn(){return(dn=(0,u.Z)(function*(Je){try{return(yield qn()).transaction(Mr).objectStore(Mr).get(Qs(Je))}catch(Ce){throw rn.create("storage-get",{originalErrorMessage:Ce.message})}})).apply(this,arguments)}function et(Je,Ce){return wt.apply(this,arguments)}function wt(){return(wt=(0,u.Z)(function*(Je,Ce){try{const dt=(yield qn()).transaction(Mr,"readwrite");return yield dt.objectStore(Mr).put(Ce,Qs(Je)),dt.complete}catch(ot){throw rn.create("storage-set",{originalErrorMessage:ot.message})}})).apply(this,arguments)}function Qs(Je){return`${Je.name}!${Je.options.appId}`}class Et{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const ot=this.container.getProvider("app").getImmediate();this._storage=new nn(ot),this._heartbeatsCachePromise=this._storage.read().then(dt=>(this._heartbeatsCache=dt,dt))}triggerHeartbeat(){var Ce=this;return(0,u.Z)(function*(){const dt=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Bt=Ir();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==Bt&&!Ce._heartbeatsCache.heartbeats.some(sn=>sn.date===Bt))return Ce._heartbeatsCache.heartbeats.push({date:Bt,agent:dt}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(sn=>{const H=new Date(sn.date).valueOf();return Date.now()-H<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,u.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const ot=Ir(),{heartbeatsToSend:dt,unsentEntries:Bt}=function bo(Je,Ce=1024){const ot=[];let dt=Je.slice();for(const Bt of Je){const sn=ot.find(H=>H.agent===Bt.agent);if(sn){if(sn.dates.push(Bt.date),bt(ot)>Ce){sn.dates.pop();break}}else if(ot.push({agent:Bt.agent,dates:[Bt.date]}),bt(ot)>Ce){ot.pop();break}dt=dt.slice(1)}return{heartbeatsToSend:ot,unsentEntries:dt}}(Ce._heartbeatsCache.heartbeats),sn=(0,se.L)(JSON.stringify({version:2,heartbeats:dt}));return Ce._heartbeatsCache.lastSentHeartbeatDate=ot,Bt.length>0?(Ce._heartbeatsCache.heartbeats=Bt,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),sn})()}}function Ir(){return(new Date).toISOString().substring(0,10)}class nn{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,u.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function Ul(Je){return dn.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var ot=this;return(0,u.Z)(function*(){var dt;if(yield ot._canUseIndexedDBPromise){const sn=yield ot.read();return et(ot.app,{lastSentHeartbeatDate:null!==(dt=Ce.lastSentHeartbeatDate)&&void 0!==dt?dt:sn.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var ot=this;return(0,u.Z)(function*(){var dt;if(yield ot._canUseIndexedDBPromise){const sn=yield ot.read();return et(ot.app,{lastSentHeartbeatDate:null!==(dt=Ce.lastSentHeartbeatDate)&&void 0!==dt?dt:sn.lastSentHeartbeatDate,heartbeats:[...sn.heartbeats,...Ce.heartbeats]})}})()}}function bt(Je){return(0,se.L)(JSON.stringify({version:2,heartbeats:Je})).length}!function Vt(Je){qr(new Y.wA("platform-logger",Ce=>new re(Ce),"PRIVATE")),qr(new Y.wA("heartbeat",Ce=>new Et(Ce),"PRIVATE")),mt(oe,"0.7.20",Je),mt(oe,"0.7.20","esm2017"),mt("fire-js","")}("")},4859:(ut,Ee,F)=>{F.d(Ee,{H0:()=>ae,wA:()=>O,zt:()=>re});var u=F(5861),Y=F(2090);class O{constructor(q,G,te){this.name=q,this.instanceFactory=G,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const se="[DEFAULT]";class re{constructor(q,G){this.name=q,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const G=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has(G)){const te=new Y.BH;if(this.instancesDeferred.set(G,te),this.isInitialized(G)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:G});$e&&te.resolve($e)}catch($e){}}return this.instancesDeferred.get(G).promise}getImmediate(q){var G;const te=this.normalizeInstanceIdentifier(null==q?void 0:q.identifier),$e=null!==(G=null==q?void 0:q.optional)&&void 0!==G&&G;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Te){if($e)return null;throw Te}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if(function oe(fe){return"EAGER"===fe.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:se})}catch(G){}for(const[G,te]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(G);try{const Te=this.getOrInitializeService({instanceIdentifier:$e});te.resolve(Te)}catch(Te){}}}}clearInstance(q=se){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,u.Z)(function*(){const G=Array.from(q.instances.values());yield Promise.all([...G.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...G.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=se){return this.instances.has(q)}getOptions(q=se){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:G={}}=q,te=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:te,options:G});for(const[Te,He]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Te)&&He.resolve($e);return $e}onInit(q,G){var te;const $e=this.normalizeInstanceIdentifier(G),Te=null!==(te=this.onInitCallbacks.get($e))&&void 0!==te?te:new Set;Te.add(q),this.onInitCallbacks.set($e,Te);const He=this.instances.get($e);return He&&q(He,$e),()=>{Te.delete(q)}}invokeOnInitCallbacks(q,G){const te=this.onInitCallbacks.get(G);if(te)for(const $e of te)try{$e(q,G)}catch(Te){}}getOrInitializeService({instanceIdentifier:q,options:G={}}){let te=this.instances.get(q);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(fe=q,fe===se?void 0:fe),options:G}),this.instances.set(q,te),this.instancesOptions.set(q,G),this.invokeOnInitCallbacks(te,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,te)}catch($e){}var fe;return te||null}normalizeInstanceIdentifier(q=se){return this.component?this.component.multipleInstances?q:se:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ae{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const G=this.getProvider(q.name);if(G.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);G.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const G=new re(q,this);return this.providers.set(q,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(ut,Ee,F)=>{F.d(Ee,{Am:()=>fe,Ub:()=>ae,Yd:()=>oe,in:()=>Y});const u=[];var Y=(()=>{return(q=Y||(Y={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",Y;var q})();const O={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},se=Y.INFO,re={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},ye=(q,G,...te)=>{if(G<q.logLevel)return;const $e=(new Date).toISOString(),Te=re[G];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Te](`[${$e}]  ${q.name}:`,...te)};class oe{constructor(G){this.name=G,this._logLevel=se,this._logHandler=ye,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in Y))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?O[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...G),this._logHandler(this,Y.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...G),this._logHandler(this,Y.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...G),this._logHandler(this,Y.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...G),this._logHandler(this,Y.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...G),this._logHandler(this,Y.ERROR,...G)}}function ae(q){u.forEach(G=>{G.setLogLevel(q)})}function fe(q,G){for(const te of u){let $e=null;G&&G.level&&($e=O[G.level]),te.userLogHandler=null===q?null:(Te,He,...Ue)=>{const Fe=Ue.map(X=>{if(null==X)return null;if("string"==typeof X)return X;if("number"==typeof X||"boolean"==typeof X)return X.toString();if(X instanceof Error)return X.message;try{return JSON.stringify(X)}catch(De){return null}}).filter(X=>X).join(" ");He>=(null!=$e?$e:Te.logLevel)&&q({level:Y[He].toLowerCase(),message:Fe,args:Ue,type:Te.name})}}}},5861:(ut,Ee,F)=>{function u(O,se,re,ye,oe,ae,fe){try{var q=O[ae](fe),G=q.value}catch(te){return void re(te)}q.done?se(G):Promise.resolve(G).then(ye,oe)}function Y(O){return function(){var se=this,re=arguments;return new Promise(function(ye,oe){var ae=O.apply(se,re);function fe(G){u(ae,ye,oe,fe,q,"next",G)}function q(G){u(ae,ye,oe,fe,q,"throw",G)}fe(void 0)})}}F.d(Ee,{Z:()=>Y})}},ut=>{ut(ut.s=46)}]);