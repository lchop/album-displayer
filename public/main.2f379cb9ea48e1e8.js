"use strict";(self.webpackChunkapp_music=self.webpackChunkapp_music||[]).push([[179],{2011:(ut,we,F)=>{F.d(we,{Dh:()=>ue,GT:()=>ye,cc:()=>Te,hO:()=>$e,on:()=>q,pX:()=>re,xv:()=>pe});var d=F(5e3),Y=F(127),O=F(5813);ut=F.hmd(ut);const se=["ngOnDestroy"],re=(X,De,Le,Ne={})=>new Proxy(X,{get:(ot,Re)=>Le.runOutsideAngular(()=>{var We;if(X[Re])return(null===(We=null==Ne?void 0:Ne.spy)||void 0===We?void 0:We.get)&&Ne.spy.get(Re,X[Re]),X[Re];if(se.indexOf(Re)>-1)return()=>{};const Qe=De.toPromise().then(ht=>{const ee=ht&&ht[Re];return"function"==typeof ee?ee.bind(ht):ee&&ee.then?ee.then(ce=>Le.run(()=>ce)):Le.run(()=>ee)});return new Proxy(()=>{},{get:(ht,ee)=>Qe[ee],apply:(ht,ee,ce)=>Qe.then(_e=>{var ve;const Pe=_e&&_e(...ce);return(null===(ve=null==Ne?void 0:Ne.spy)||void 0===ve?void 0:ve.apply)&&Ne.spy.apply(Re,ce,Pe),Pe})})})}),ye=(X,De)=>{De.forEach(Le=>{Object.getOwnPropertyNames(Le.prototype||Le).forEach(Ne=>{Object.defineProperty(X.prototype,Ne,Object.getOwnPropertyDescriptor(Le.prototype||Le,Ne))})})};class oe{constructor(De){return De}}const ue=new d.OlP("angularfire2.app.options"),pe=new d.OlP("angularfire2.app.name");function q(X,De,Le){const ot="object"==typeof Le&&Le||{};ot.name=ot.name||"string"==typeof Le&&Le||"[DEFAULT]";const We=Y.Z.apps.filter(Qe=>Qe&&Qe.name===ot.name)[0]||De.runOutsideAngular(()=>Y.Z.initializeApp(X,ot));try{JSON.stringify(X)!==JSON.stringify(We.options)&&W("error",`${We.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Qe){}return new oe(We)}const W=(X,...De)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[X](...De)},te={provide:oe,useFactory:q,deps:[ue,d.R0b,[new d.FiY,pe]]};let $e=(()=>{class X{constructor(Le){Y.Z.registerVersion("angularfire",O.q4.full,"core"),Y.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Y.Z.registerVersion("angular",d.q4F.full,Le.toString())}static initializeApp(Le,Ne){return{ngModule:X,providers:[{provide:ue,useValue:Le},{provide:pe,useValue:Ne}]}}}return X.\u0275fac=function(Le){return new(Le||X)(d.LFG(d.Lbi))},X.\u0275mod=d.oAB({type:X}),X.\u0275inj=d.cJS({providers:[te]}),X})();function Te(X,De,Le,Ne,ot){const[,Re,We]=globalThis.\u0275AngularfireInstanceCache.find(Qe=>Qe[0]===X)||[];if(Re)return function Ge(X,De){try{return X.toString()===De.toString()}catch(Le){return X===De}}(ot,We)||(Fe("error",`${De} was already initialized on the ${Le} Firebase App with different settings.${Ve?" You may need to reload as Firebase is not HMR aware.":""}`),Fe("warn",{is:ot,was:We})),Re;{const Qe=Ne();return globalThis.\u0275AngularfireInstanceCache.push([X,Qe,ot]),Qe}}const Ve=!!ut.hot,Fe=(X,...De)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[X](...De)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ut,we,F)=>{F.d(we,{q4:()=>wa,iC:()=>Ia,fc:()=>zi,HU:()=>al,vb:()=>Qd,JM:()=>Yd});var d=F(5e3),Y=F(5867),O=F(5861),se=F(9681),re=F(2090),ye=F(4859),oe=F(1877);const ue="@firebase/installations",W="w:0.5.7",te="FIS_v2",X=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function De(I){return I instanceof re.ZR&&I.code.includes("request-failed")}function Le({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Ne(I){return{token:I.token,requestStatus:2,expiresIn:ce(I.expiresIn),creationTime:Date.now()}}function ot(I,T){return Re.apply(this,arguments)}function Re(){return(Re=(0,O.Z)(function*(I,T){const U=(yield T.json()).error;return X.create("request-failed",{requestName:I,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function We({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Qe(I,{refreshToken:T}){const N=We(I);return N.append("Authorization",function _e(I){return`${te} ${I}`}(T)),N}function ht(I){return ee.apply(this,arguments)}function ee(){return(ee=(0,O.Z)(function*(I){const T=yield I();return T.status>=500&&T.status<600?I():T})).apply(this,arguments)}function ce(I){return Number(I.replace("s","000"))}function ve(I,T){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:T},{fid:N}){const U=Le(I),Z=We(I),ne=T.getImmediate({optional:!0});if(ne){const pt=yield ne.getHeartbeatsHeader();pt&&Z.append("x-firebase-client",pt)}const ze={method:"POST",headers:Z,body:JSON.stringify({fid:N,authVersion:te,appId:I.appId,sdkVersion:W})},At=yield ht(()=>fetch(U,ze));if(At.ok){const pt=yield At.json();return{fid:pt.fid||N,registrationStatus:2,refreshToken:pt.refreshToken,authToken:Ne(pt.authToken)}}throw yield ot("Create Installation",At)})).apply(this,arguments)}function de(I){return new Promise(T=>{setTimeout(T,I)})}const tn=/^[cdef][\w-]{21}$/;function Mt(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const N=function St(I){return function kt(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return tn.test(N)?N:""}catch(I){return""}}function yt(I){return`${I.appName}!${I.appId}`}const _n=new Map;function ns(I,T){const N=yt(I);Eo(N,T),function Bn(I,T){const N=function an(){return!sr&&"BroadcastChannel"in self&&(sr=new BroadcastChannel("[Firebase] FID Change"),sr.onmessage=I=>{Eo(I.data.key,I.data.fid)}),sr}();N&&N.postMessage({key:I,fid:T}),function xn(){0===_n.size&&sr&&(sr.close(),sr=null)}()}(N,T)}function Eo(I,T){const N=_n.get(I);if(N)for(const U of N)U(T)}let sr=null;const Ir="firebase-installations-store";let Ae=null;function cr(){return Ae||(Ae=(0,re.X3)("firebase-installations-database",1,(I,T)=>{0===T&&I.createObjectStore(Ir)})),Ae}function jn(I,T){return gt.apply(this,arguments)}function gt(){return(gt=(0,O.Z)(function*(I,T){const N=yt(I),Z=(yield cr()).transaction(Ir,"readwrite"),ne=Z.objectStore(Ir),ie=yield ne.get(N);return yield ne.put(T,N),yield Z.complete,(!ie||ie.fid!==T.fid)&&ns(I,T.fid),T})).apply(this,arguments)}function nn(I){return ws.apply(this,arguments)}function ws(){return(ws=(0,O.Z)(function*(I){const T=yt(I),U=(yield cr()).transaction(Ir,"readwrite");yield U.objectStore(Ir).delete(T),yield U.complete})).apply(this,arguments)}function or(I,T){return bi.apply(this,arguments)}function bi(){return(bi=(0,O.Z)(function*(I,T){const N=yt(I),Z=(yield cr()).transaction(Ir,"readwrite"),ne=Z.objectStore(Ir),ie=yield ne.get(N),ze=T(ie);return void 0===ze?yield ne.delete(N):yield ne.put(ze,N),yield Z.complete,ze&&(!ie||ie.fid!==ze.fid)&&ns(I,ze.fid),ze})).apply(this,arguments)}function Vr(I){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,O.Z)(function*(I){let T;const N=yield or(I.appConfig,U=>{const Z=Hn(U),ne=Hu(I,Z);return T=ne.registrationPromise,ne.installationEntry});return""===N.fid?{installationEntry:yield T}:{installationEntry:N,registrationPromise:T}})).apply(this,arguments)}function Hn(I){return rn(I||{fid:Mt(),registrationStatus:0})}function Hu(I,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(X.create("app-offline"))};const N={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},U=function pn(I,T){return et.apply(this,arguments)}(I,N);return{installationEntry:N,registrationPromise:U}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:vt(I)}:{installationEntry:T}}function et(){return(et=(0,O.Z)(function*(I,T){try{const N=yield ve(I,T);return jn(I.appConfig,N)}catch(N){throw De(N)&&409===N.customData.serverCode?yield nn(I.appConfig):yield jn(I.appConfig,{fid:T.fid,registrationStatus:0}),N}})).apply(this,arguments)}function vt(I){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,O.Z)(function*(I){let T=yield Es(I.appConfig);for(;1===T.registrationStatus;)yield de(100),T=yield Es(I.appConfig);if(0===T.registrationStatus){const{installationEntry:N,registrationPromise:U}=yield Vr(I);return U||N}return T})).apply(this,arguments)}function Es(I){return or(I,T=>{if(!T)throw X.create("installation-not-found");return rn(T)})}function rn(I){return function Et(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Dr(I,T){return bo.apply(this,arguments)}function bo(){return(bo=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:T},N){const U=sn(I,N),Z=Qe(I,N),ne=T.getImmediate({optional:!0});if(ne){const pt=yield ne.getHeartbeatsHeader();pt&&Z.append("x-firebase-client",pt)}const ze={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:W,appId:I.appId}})},At=yield ht(()=>fetch(U,ze));if(At.ok)return Ne(yield At.json());throw yield ot("Generate Auth Token",At)})).apply(this,arguments)}function sn(I,{fid:T}){return`${Le(I)}/${T}/authTokens:generate`}function bt(I){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,O.Z)(function*(I,T=!1){let N;const U=yield or(I.appConfig,ne=>{if(!un(ne))throw X.create("not-registered");const ie=ne.authToken;if(!T&&G(ie))return ne;if(1===ie.requestStatus)return N=Je(I,T),ne;{if(!navigator.onLine)throw X.create("app-offline");const ze=z(ne);return N=dt(I,ze),ze}});return N?yield N:U.authToken})).apply(this,arguments)}function Je(I,T){return be.apply(this,arguments)}function be(){return(be=(0,O.Z)(function*(I,T){let N=yield at(I.appConfig);for(;1===N.authToken.requestStatus;)yield de(100),N=yield at(I.appConfig);const U=N.authToken;return 0===U.requestStatus?bt(I,T):U})).apply(this,arguments)}function at(I){return or(I,T=>{if(!un(T))throw X.create("not-registered");return function he(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function dt(I,T){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,O.Z)(function*(I,T){try{const N=yield Dr(I,T),U=Object.assign(Object.assign({},T),{authToken:N});return yield jn(I.appConfig,U),N}catch(N){if(!De(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const U=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield jn(I.appConfig,U)}else yield nn(I.appConfig);throw N}})).apply(this,arguments)}function un(I){return void 0!==I&&2===I.registrationStatus}function G(I){return 2===I.requestStatus&&!function B(I){const T=Date.now();return T<I.creationTime||I.creationTime+I.expiresIn<T+36e5}(I)}function z(I){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:T})}function Ue(){return(Ue=(0,O.Z)(function*(I){const T=I,{installationEntry:N,registrationPromise:U}=yield Vr(T);return U?U.catch(console.error):bt(T).catch(console.error),N.fid})).apply(this,arguments)}function Jt(){return(Jt=(0,O.Z)(function*(I,T=!1){const N=I;return yield dr(N),(yield bt(N,T)).token})).apply(this,arguments)}function dr(I){return er.apply(this,arguments)}function er(){return(er=(0,O.Z)(function*(I){const{registrationPromise:T}=yield Vr(I);T&&(yield T)})).apply(this,arguments)}function Vi(I){return X.create("missing-app-config-values",{valueName:I})}const tr="installations",Ci=I=>{const T=I.getProvider("app").getImmediate(),N=function Ua(I){if(!I||!I.options)throw Vi("App Configuration");if(!I.name)throw Vi("App Name");const T=["projectId","apiKey","appId"];for(const N of T)if(!I.options[N])throw Vi(N);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(T);return{app:T,appConfig:N,heartbeatServiceProvider:(0,se._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},He=I=>{const T=I.getProvider("app").getImmediate(),N=(0,se._getProvider)(T,tr).getImmediate();return{getId:()=>function Q(I){return Ue.apply(this,arguments)}(N),getToken:Z=>function _t(I){return Jt.apply(this,arguments)}(N,Z)}};(function Tt(){(0,se._registerComponent)(new ye.wA(tr,Ci,"PUBLIC")),(0,se._registerComponent)(new ye.wA("installations-internal",He,"PRIVATE"))})(),(0,se.registerVersion)(ue,"0.5.7"),(0,se.registerVersion)(ue,"0.5.7","esm2017");const Zt="@firebase/remote-config",Ft=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ti{constructor(T,N,U,Z){this.client=T,this.storage=N,this.storageCache=U,this.logger=Z}isCachedDataFresh(T,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-N,Z=U<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Z}.`),Z}fetch(T){var N=this;return(0,O.Z)(function*(){const[U,Z]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(Z&&N.isCachedDataFresh(T.cacheMaxAgeMillis,U))return Z;T.eTag=Z&&Z.eTag;const ne=yield N.client.fetch(T),ie=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ne.status&&ie.push(N.storage.setLastSuccessfulFetchResponse(ne)),yield Promise.all(ie),ne})()}}function Hf(I=navigator){return I.languages&&I.languages[0]||I.language}class pm{constructor(T,N,U,Z,ne,ie){this.firebaseInstallations=T,this.sdkVersion=N,this.namespace=U,this.projectId=Z,this.apiKey=ne,this.appId=ie}fetch(T){var N=this;return(0,O.Z)(function*(){const[U,Z]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),ie=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},At={sdk_version:N.sdkVersion,app_instance_id:U,app_instance_id_token:Z,app_id:N.appId,language_code:Hf()},pt={method:"POST",headers:ze,body:JSON.stringify(At)},$t=fetch(ie,pt),It=new Promise((Hr,Ns)=>{T.signal.addEventListener(()=>{const su=new Error("The operation was aborted.");su.name="AbortError",Ns(su)})});let fi;try{yield Promise.race([$t,It]),fi=yield $t}catch(Hr){let Ns="fetch-client-network";throw"AbortError"===Hr.name&&(Ns="fetch-timeout"),Ft.create(Ns,{originalErrorMessage:Hr.message})}let rr=fi.status;const Zi=fi.headers.get("ETag")||void 0;let jr,Ms;if(200===fi.status){let Hr;try{Hr=yield fi.json()}catch(Ns){throw Ft.create("fetch-client-parse",{originalErrorMessage:Ns.message})}jr=Hr.entries,Ms=Hr.state}if("INSTANCE_STATE_UNSPECIFIED"===Ms?rr=500:"NO_CHANGE"===Ms?rr=304:("NO_TEMPLATE"===Ms||"EMPTY_CONFIG"===Ms)&&(jr={}),304!==rr&&200!==rr)throw Ft.create("fetch-status",{httpStatus:rr});return{status:rr,eTag:Zi,config:jr}})()}}class $f{constructor(T,N){this.client=T,this.storage=N}fetch(T){var N=this;return(0,O.Z)(function*(){const U=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(T,U)})()}attemptFetch(T,{throttleEndTimeMillis:N,backoffCount:U}){var Z=this;return(0,O.Z)(function*(){yield function ji(I,T){return new Promise((N,U)=>{const Z=Math.max(T-Date.now(),0),ne=setTimeout(N,Z);I.addEventListener(()=>{clearTimeout(ne),U(Ft.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,N);try{const ne=yield Z.client.fetch(T);return yield Z.storage.deleteThrottleMetadata(),ne}catch(ne){if(!function sa(I){if(!(I instanceof re.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ne))throw ne;const ie={throttleEndTimeMillis:Date.now()+(0,re.$s)(U),backoffCount:U+1};return yield Z.storage.setThrottleMetadata(ie),Z.attemptFetch(T,ie)}})()}}class ac{constructor(T,N,U,Z,ne){this.app=T,this._client=N,this._storageCache=U,this._storage=Z,this._logger=ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function uc(I,T){const N=I.target.error||void 0;return Ft.create(T,{originalErrorMessage:N&&N.message})}const Js="app_namespace_store";class oa{constructor(T,N,U,Z=function lc(){return new Promise((I,T)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=U=>{T(uc(U,"storage-open"))},N.onsuccess=U=>{I(U.target.result)},N.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(Js,{keyPath:"compositeKey"})}}catch(N){T(Ft.create("storage-open",{originalErrorMessage:N}))}})}()){this.appId=T,this.appName=N,this.namespace=U,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var N=this;return(0,O.Z)(function*(){const U=yield N.openDbPromise;return new Promise((Z,ne)=>{const ze=U.transaction([Js],"readonly").objectStore(Js),At=N.createCompositeKey(T);try{const pt=ze.get(At);pt.onerror=$t=>{ne(uc($t,"storage-get"))},pt.onsuccess=$t=>{const It=$t.target.result;Z(It?It.value:void 0)}}catch(pt){ne(Ft.create("storage-get",{originalErrorMessage:pt&&pt.message}))}})})()}set(T,N){var U=this;return(0,O.Z)(function*(){const Z=yield U.openDbPromise;return new Promise((ne,ie)=>{const At=Z.transaction([Js],"readwrite").objectStore(Js),pt=U.createCompositeKey(T);try{const $t=At.put({compositeKey:pt,value:N});$t.onerror=It=>{ie(uc(It,"storage-set"))},$t.onsuccess=()=>{ne()}}catch($t){ie(Ft.create("storage-set",{originalErrorMessage:$t&&$t.message}))}})})()}delete(T){var N=this;return(0,O.Z)(function*(){const U=yield N.openDbPromise;return new Promise((Z,ne)=>{const ze=U.transaction([Js],"readwrite").objectStore(Js),At=N.createCompositeKey(T);try{const pt=ze.delete(At);pt.onerror=$t=>{ne(uc($t,"storage-delete"))},pt.onsuccess=()=>{Z()}}catch(pt){ne(Ft.create("storage-delete",{originalErrorMessage:pt&&pt.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class mm{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,O.Z)(function*(){const N=T.storage.getLastFetchStatus(),U=T.storage.getLastSuccessfulFetchTimestampMillis(),Z=T.storage.getActiveConfig(),ne=yield N;ne&&(T.lastFetchStatus=ne);const ie=yield U;ie&&(T.lastSuccessfulFetchTimestampMillis=ie);const ze=yield Z;ze&&(T.activeConfig=ze)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Fd(){return Io.apply(this,arguments)}function Io(){return(Io=(0,O.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(I){return!1}})).apply(this,arguments)}!function Od(){(0,se._registerComponent)(new ye.wA("remote-config",function I(T,{instanceIdentifier:N}){const U=T.getProvider("app").getImmediate(),Z=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Ft.create("registration-window");if(!(0,re.hl)())throw Ft.create("indexed-db-unavailable");const{projectId:ne,apiKey:ie,appId:ze}=U.options;if(!ne)throw Ft.create("registration-project-id");if(!ie)throw Ft.create("registration-api-key");if(!ze)throw Ft.create("registration-app-id");const At=new oa(ze,U.name,N=N||"firebase"),pt=new mm(At),$t=new oe.Yd(Zt);$t.logLevel=oe.in.ERROR;const It=new pm(Z,se.SDK_VERSION,N,ne,ie,ze),fi=new $f(It,At),rr=new Ti(fi,At,pt,$t),Zi=new ac(U,rr,pt,At,$t);return function Ui(I){const T=(0,re.m9)(I);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Zi),Zi},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Zt,"0.3.6"),(0,se.registerVersion)(Zt,"0.3.6","esm2017")}();const qf="/firebase-messaging-sw.js",Ld="/firebase-cloud-messaging-push-scope",Wf="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",qu="google.c.a.c_id",To="google.c.a.c_l",aa="google.c.a.ts",Xs="google.c.a.e";var eo=(()=>{return(I=eo||(eo={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",eo;var I})();function nr(I){const T=new Uint8Array(I);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function zf(I){const N=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(N),Z=new Uint8Array(U.length);for(let ne=0;ne<U.length;++ne)Z[ne]=U.charCodeAt(ne);return Z}const Do="fcm_token_details_db",xr="fcm_token_object_Store";function Zf(I){return ja.apply(this,arguments)}function ja(){return ja=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ne=>ne.name).includes(Do))return null;let T=null;return(yield(0,re.X3)(Do,5,function(){var U=(0,O.Z)(function*(Z,ne,ie,ze){var At;if(ne<2||!Z.objectStoreNames.contains(xr))return;const pt=ze.objectStore(xr),$t=yield pt.index("fcmSenderId").get(I);if(yield pt.clear(),$t)if(2===ne){const It=$t;if(!It.auth||!It.p256dh||!It.endpoint)return;T={token:It.fcmToken,createTime:null!==(At=It.createTime)&&void 0!==At?At:Date.now(),subscriptionOptions:{auth:It.auth,p256dh:It.p256dh,endpoint:It.endpoint,swScope:It.swScope,vapidKey:"string"==typeof It.vapidKey?It.vapidKey:nr(It.vapidKey)}}}else if(3===ne){const It=$t;T={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:nr(It.auth),p256dh:nr(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:nr(It.vapidKey)}}}else if(4===ne){const It=$t;T={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:nr(It.auth),p256dh:nr(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:nr(It.vapidKey)}}}});return function(Z,ne,ie,ze){return U.apply(this,arguments)}}())).close(),yield(0,re.Lj)(Do),yield(0,re.Lj)("fcm_vapid_details_db"),yield(0,re.Lj)("undefined"),Ud(T)?T:null}),ja.apply(this,arguments)}function Ud(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:T}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const ai="firebase-messaging-store";let Cn=null;function cc(){return Cn||(Cn=(0,re.X3)("firebase-messaging-database",1,(I,T)=>{0===T&&I.createObjectStore(ai)})),Cn}function Ao(I){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,O.Z)(function*(I){const T=Wu(I),U=yield(yield cc()).transaction(ai).objectStore(ai).get(T);if(U)return U;{const Z=yield Zf(I.appConfig.senderId);if(Z)return yield So(I,Z),Z}})).apply(this,arguments)}function So(I,T){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,O.Z)(function*(I,T){const N=Wu(I),Z=(yield cc()).transaction(ai,"readwrite");return yield Z.objectStore(ai).put(T,N),yield Z.complete,T})).apply(this,arguments)}function Ts(I){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,O.Z)(function*(I){const T=Wu(I),U=(yield cc()).transaction(ai,"readwrite");yield U.objectStore(ai).delete(T),yield U.complete})).apply(this,arguments)}function Wu({appConfig:I}){return I.appId}const An=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ui(I,T){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,O.Z)(function*(I,T){const N=yield tt(I),U=Zu(T),Z={method:"POST",headers:N,body:JSON.stringify(U)};let ne;try{ne=yield(yield fetch(to(I.appConfig),Z)).json()}catch(ie){throw An.create("token-subscribe-failed",{errorInfo:ie})}if(ne.error)throw An.create("token-subscribe-failed",{errorInfo:ne.error.message});if(!ne.token)throw An.create("token-subscribe-no-token");return ne.token})).apply(this,arguments)}function dc(I,T){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,O.Z)(function*(I,T){const N=yield tt(I),U=Zu(T.subscriptionOptions),Z={method:"PATCH",headers:N,body:JSON.stringify(U)};let ne;try{ne=yield(yield fetch(`${to(I.appConfig)}/${T.token}`,Z)).json()}catch(ie){throw An.create("token-update-failed",{errorInfo:ie})}if(ne.error)throw An.create("token-update-failed",{errorInfo:ne.error.message});if(!ne.token)throw An.create("token-update-no-token");return ne.token})).apply(this,arguments)}function li(I,T){return ua.apply(this,arguments)}function ua(){return(ua=(0,O.Z)(function*(I,T){const U={method:"DELETE",headers:yield tt(I)};try{const ne=yield(yield fetch(`${to(I.appConfig)}/${T}`,U)).json();if(ne.error)throw An.create("token-unsubscribe-failed",{errorInfo:ne.error.message})}catch(Z){throw An.create("token-unsubscribe-failed",{errorInfo:Z})}})).apply(this,arguments)}function to({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function tt(I){return zu.apply(this,arguments)}function zu(){return(zu=(0,O.Z)(function*({appConfig:I,installations:T}){const N=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function Zu({p256dh:I,auth:T,endpoint:N,vapidKey:U}){const Z={web:{endpoint:N,auth:T,p256dh:I}};return U!==Wf&&(Z.web.applicationPubKey=U),Z}const Ga=6048e5;function qa(I){return la.apply(this,arguments)}function la(){return(la=(0,O.Z)(function*(I){const T=yield pc(I.swRegistration,I.vapidKey),N={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:T.endpoint,auth:nr(T.getKey("auth")),p256dh:nr(T.getKey("p256dh"))},U=yield Ao(I.firebaseDependencies);if(U){if(Kr(U.subscriptionOptions,N))return Date.now()>=U.createTime+Ga?Ie(I,{token:U.token,createTime:Date.now(),subscriptionOptions:N}):U.token;try{yield li(I.firebaseDependencies,U.token)}catch(Z){console.warn(Z)}return no(I.firebaseDependencies,N)}return no(I.firebaseDependencies,N)})).apply(this,arguments)}function hc(I){return fc.apply(this,arguments)}function fc(){return(fc=(0,O.Z)(function*(I){const T=yield Ao(I.firebaseDependencies);T&&(yield li(I.firebaseDependencies,T.token),yield Ts(I.firebaseDependencies));const N=yield I.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function Ie(I,T){return jt.apply(this,arguments)}function jt(){return(jt=(0,O.Z)(function*(I,T){try{const N=yield dc(I.firebaseDependencies,T),U=Object.assign(Object.assign({},T),{token:N,createTime:Date.now()});return yield So(I.firebaseDependencies,U),N}catch(N){throw yield hc(I),N}})).apply(this,arguments)}function no(I,T){return bn.apply(this,arguments)}function bn(){return(bn=(0,O.Z)(function*(I,T){const U={token:yield ui(I,T),createTime:Date.now(),subscriptionOptions:T};return yield So(I,U),U.token})).apply(this,arguments)}function pc(I,T){return ss.apply(this,arguments)}function ss(){return(ss=(0,O.Z)(function*(I,T){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:zf(T)})})).apply(this,arguments)}function Kr(I,T){return T.vapidKey===I.vapidKey&&T.endpoint===I.endpoint&&T.auth===I.auth&&T.p256dh===I.p256dh}function Wa(I){const T={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function ca(I,T){if(!T.notification)return;I.notification={};const N=T.notification.title;N&&(I.notification.title=N);const U=T.notification.body;U&&(I.notification.body=U);const Z=T.notification.image;Z&&(I.notification.image=Z)}(T,I),function gc(I,T){!T.data||(I.data=T.data)}(T,I),function mc(I,T){if(!T.fcmOptions)return;I.fcmOptions={};const N=T.fcmOptions.link;N&&(I.fcmOptions.link=N);const U=T.fcmOptions.analytics_label;U&&(I.fcmOptions.analyticsLabel=U)}(T,I),T}function za(I){return"object"==typeof I&&!!I&&qu in I}function ro(I,T){const N=[];for(let U=0;U<I.length;U++)N.push(I.charAt(U)),U<T.length&&N.push(T.charAt(U));return N.join("")}function ci(I){return An.create("missing-app-config-values",{valueName:I})}ro("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ro("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class _c{constructor(T,N,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function Rr(I){if(!I||!I.options)throw ci("App Configuration Object");if(!I.name)throw ci("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:N}=I;for(const U of T)if(!N[U])throw ci(U);return{appName:I.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Z,installations:N,analyticsProvider:U}}_delete(){return Promise.resolve()}}function As(I){return $i.apply(this,arguments)}function $i(){return($i=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(qf,{scope:Ld}),I.swRegistration.update().catch(()=>{})}catch(T){throw An.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function yc(I,T){return xo.apply(this,arguments)}function xo(){return(xo=(0,O.Z)(function*(I,T){if(!T&&!I.swRegistration&&(yield As(I)),T||!I.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw An.create("invalid-sw-registration");I.swRegistration=T}})).apply(this,arguments)}function vc(I,T){return da.apply(this,arguments)}function da(){return(da=(0,O.Z)(function*(I,T){T?I.vapidKey=T:I.vapidKey||(I.vapidKey=Wf)})).apply(this,arguments)}function Ro(){return(Ro=(0,O.Z)(function*(I,T){if(!navigator)throw An.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw An.create("permission-blocked");return yield vc(I,null==T?void 0:T.vapidKey),yield yc(I,null==T?void 0:T.serviceWorkerRegistration),qa(I)})).apply(this,arguments)}function Bd(I,T,N){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,O.Z)(function*(I,T,N){const U=ym(T);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:N[qu],message_name:N[To],message_time:N[aa],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ym(I){switch(I){case eo.NOTIFICATION_CLICKED:return"notification_open";case eo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ha(){return(ha=(0,O.Z)(function*(I,T){const N=T.data;if(!N.isFirebaseMessaging)return;I.onMessageHandler&&N.messageType===eo.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Wa(N)):I.onMessageHandler.next(Wa(N)));const U=N.data;za(U)&&"1"===U[Xs]&&(yield Bd(I,N.messageType,U))})).apply(this,arguments)}const Qu="@firebase/messaging",Ju=I=>{const T=new _c(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function Yu(I,T){return ha.apply(this,arguments)}(T,N)),T},jd=I=>{const T=I.getProvider("messaging").getImmediate();return{getToken:U=>function Ku(I,T){return Ro.apply(this,arguments)}(T,U)}};function Yf(){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,O.Z)(function*(){try{yield(0,re.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Za(){(0,se._registerComponent)(new ye.wA("messaging",Ju,"PUBLIC")),(0,se._registerComponent)(new ye.wA("messaging-internal",jd,"PRIVATE")),(0,se.registerVersion)(Qu,"0.9.11"),(0,se.registerVersion)(Qu,"0.9.11","esm2017")}();const el="analytics",Qa="firebase_id",Hd="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",nl="https://www.googletagmanager.com/gtag/js",hr=new oe.Yd("@firebase/analytics");function as(I){return Promise.all(I.map(T=>T.catch(N=>N)))}function rl(I,T){const N=document.createElement("script");N.src=`${nl}?l=${I}&id=${T}`,N.async=!0,document.head.appendChild(N)}function Xf(I,T,N,U,Z,ne){return io.apply(this,arguments)}function io(){return(io=(0,O.Z)(function*(I,T,N,U,Z,ne){const ie=U[Z];try{if(ie)yield T[ie];else{const At=(yield as(N)).find(pt=>pt.measurementId===Z);At&&(yield T[At.appId])}}catch(ze){hr.error(ze)}I("config",Z,ne)})).apply(this,arguments)}function $d(I,T,N,U,Z){return No.apply(this,arguments)}function No(){return(No=(0,O.Z)(function*(I,T,N,U,Z){try{let ne=[];if(Z&&Z.send_to){let ie=Z.send_to;Array.isArray(ie)||(ie=[ie]);const ze=yield as(N);for(const At of ie){const pt=ze.find(It=>It.measurementId===At),$t=pt&&T[pt.appId];if(!$t){ne=[];break}ne.push($t)}}0===ne.length&&(ne=Object.values(T)),yield Promise.all(ne),I("event",U,Z||{})}catch(ne){hr.error(ne)}})).apply(this,arguments)}function zy(){const I=window.document.getElementsByTagName("script");for(const T of Object.values(I))if(T.src&&T.src.includes(nl))return T;return null}const Wn=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),fr=new class Di{constructor(T={},N=1e3){this.throttleMetadata=T,this.intervalMillis=N}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,N){this.throttleMetadata[T]=N}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Xa(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Em(I){return Po.apply(this,arguments)}function Po(){return(Po=(0,O.Z)(function*(I){var T;const{appId:N,apiKey:U}=I,Z={method:"GET",headers:Xa(U)},ne=Hd.replace("{app-id}",N),ie=yield fetch(ne,Z);if(200!==ie.status&&304!==ie.status){let ze="";try{const At=yield ie.json();(null===(T=At.error)||void 0===T?void 0:T.message)&&(ze=At.error.message)}catch(At){}throw Wn.create("config-fetch-failed",{httpStatus:ie.status,responseMessage:ze})}return ie.json()})).apply(this,arguments)}function Gd(I){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,O.Z)(function*(I,T=fr,N){const{appId:U,apiKey:Z,measurementId:ne}=I.options;if(!U)throw Wn.create("no-app-id");if(!Z){if(ne)return{measurementId:ne,appId:U};throw Wn.create("no-api-key")}const ie=T.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new np;return setTimeout((0,O.Z)(function*(){ze.abort()}),void 0!==N?N:6e4),ko({appId:U,apiKey:Z,measurementId:ne},ie,ze,T)})).apply(this,arguments)}function ko(I,T,N){return qi.apply(this,arguments)}function qi(){return(qi=(0,O.Z)(function*(I,{throttleEndTimeMillis:T,backoffCount:N},U,Z=fr){const{appId:ne,measurementId:ie}=I;try{yield lt(U,T)}catch(ze){if(ie)return hr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ie} provided in the "measurementId" field in the local Firebase config. [${ze.message}]`),{appId:ne,measurementId:ie};throw ze}try{const ze=yield Em(I);return Z.deleteThrottleMetadata(ne),ze}catch(ze){if(!tp(ze)){if(Z.deleteThrottleMetadata(ne),ie)return hr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ie} provided in the "measurementId" field in the local Firebase config. [${ze.message}]`),{appId:ne,measurementId:ie};throw ze}const At=503===Number(ze.customData.httpStatus)?(0,re.$s)(N,Z.intervalMillis,30):(0,re.$s)(N,Z.intervalMillis),pt={throttleEndTimeMillis:Date.now()+At,backoffCount:N+1};return Z.setThrottleMetadata(ne,pt),hr.debug(`Calling attemptFetch again in ${At} millis`),ko(I,pt,U,Z)}})).apply(this,arguments)}function lt(I,T){return new Promise((N,U)=>{const Z=Math.max(T-Date.now(),0),ne=setTimeout(N,Z);I.addEventListener(()=>{clearTimeout(ne),U(Wn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function tp(I){if(!(I instanceof re.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}class np{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function fa(){return so.apply(this,arguments)}function so(){return(so=(0,O.Z)(function*(){if(!(0,re.hl)())return hr.warn(Wn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(I){return hr.warn(Wn.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function pa(){return(pa=(0,O.Z)(function*(I,T,N,U,Z,ne,ie){var ze;const At=Gd(I);At.then(rr=>{N[rr.measurementId]=rr.appId,I.options.measurementId&&rr.measurementId!==I.options.measurementId&&hr.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${rr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(rr=>hr.error(rr)),T.push(At);const pt=fa().then(rr=>{if(rr)return U.getId()}),[$t,It]=yield Promise.all([At,pt]);zy()||rl(ne,$t.measurementId),Z("js",new Date);const fi=null!==(ze=null==ie?void 0:ie.config)&&void 0!==ze?ze:{};return fi.origin="firebase",fi.update=!0,null!=It&&(fi[Qa]=It),Z("config",$t.measurementId,fi),$t.measurementId})).apply(this,arguments)}class Oo{constructor(T){this.app=T}_delete(){return delete us[this.app.options.appId],Promise.resolve()}}let us={},il=[];const Ec={};let tu,ga,oo="dataLayer",pr=!1;function Fo(I,T,N){!function ma(){const I=[];if((0,re.ru)()&&I.push("This is a browser extension environment."),(0,re.zI)()||I.push("Cookies are not available."),I.length>0){const T=I.map((U,Z)=>`(${Z+1}) ${U}`).join(" "),N=Wn.create("invalid-analytics-context",{errorInfo:T});hr.warn(N.message)}}();const U=I.options.appId;if(!U)throw Wn.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Wn.create("no-api-key");hr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=us[U])throw Wn.create("already-exists",{id:U});if(!pr){!function vm(I){let T=[];Array.isArray(window[I])?T=window[I]:window[I]=T}(oo);const{wrappedGtag:ne,gtagCore:ie}=function wm(I,T,N,U,Z){let ne=function(...ie){window[U].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(ne=window[Z]),window[Z]=function ep(I,T,N,U){function ne(){return(ne=(0,O.Z)(function*(ie,ze,At){try{"event"===ie?yield $d(I,T,N,ze,At):"config"===ie?yield Xf(I,T,N,U,ze,At):I("set",ze)}catch(pt){hr.error(pt)}})).apply(this,arguments)}return function Z(ie,ze,At){return ne.apply(this,arguments)}}(ne,I,T,N),{gtagCore:ne,wrappedGtag:window[Z]}}(us,il,Ec,oo,"gtag");ga=ne,tu=ie,pr=!0}return us[U]=function Pn(I,T,N,U,Z,ne,ie){return pa.apply(this,arguments)}(I,il,Ec,T,tu,oo,N),new Oo(I)}function gn(){return(gn=(0,O.Z)(function*(I,T,N,U,Z){if(Z&&Z.global)I("event",N,U);else{const ne=yield T;I("event",N,Object.assign(Object.assign({},U),{send_to:ne}))}})).apply(this,arguments)}function ls(){return dn.apply(this,arguments)}function dn(){return(dn=(0,O.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(I){return!1}})).apply(this,arguments)}const Ur="@firebase/analytics";!function hi(){(0,se._registerComponent)(new ye.wA(el,(T,{options:N})=>Fo(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,se._registerComponent)(new ye.wA("analytics-internal",function I(T){try{const N=T.getProvider(el).getImmediate();return{logEvent:(U,Z,ne)=>function ya(I,T,N,U){I=(0,re.m9)(I),function gr(I,T,N,U,Z){return gn.apply(this,arguments)}(ga,us[I.app.options.appId],T,N,U).catch(Z=>hr.error(Z))}(N,U,Z,ne)}}catch(N){throw Wn.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,se.registerVersion)(Ur,"0.7.7"),(0,se.registerVersion)(Ur,"0.7.7","esm2017")}();var Zd=F(4408),xs=F(7565);const bm=new class iu extends xs.v{}(class kn extends Zd.o{constructor(T,N){super(T,N),this.scheduler=T,this.work=N}schedule(T,N=0){return N>0?super.schedule(T,N):(this.delay=N,this.state=T,this.scheduler.flush(this),this)}execute(T,N){return N>0||this.closed?super.execute(T,N):this._execute(T,N)}requestAsyncId(T,N,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(T,N,U):T.flush(this)}});var Qr=F(4986),cs=F(8505),sl=F(5363),va=F(9468);const wa=new d.GfV("7.3.0"),ol="__angularfire_symbol__analyticsIsSupportedValue",Ea="__angularfire_symbol__analyticsIsSupported",bc="__angularfire_symbol__remoteConfigIsSupportedValue",Kd="__angularfire_symbol__remoteConfigIsSupported",Cc="__angularfire_symbol__messagingIsSupportedValue",xt="__angularfire_symbol__messagingIsSupported";function Yd(I,T,N){if(T){if(1===T.length)return T[0];const ne=T.filter(ie=>ie.app===N);if(1===ne.length)return ne[0]}return N.container.getProvider(I).getImmediate({optional:!0})}globalThis[Ea]||(globalThis[Ea]=ls().then(I=>globalThis[ol]=I).catch(()=>globalThis[ol]=!1)),globalThis[xt]||(globalThis[xt]=Yf().then(I=>globalThis[Cc]=I).catch(()=>globalThis[Cc]=!1)),globalThis[Kd]||(globalThis[Kd]=Fd().then(I=>globalThis[bc]=I).catch(()=>globalThis[bc]=!1));const Qd=(I,T)=>{const N=T?[T]:(0,Y.C6)(),U=[];return N.forEach(Z=>{Z.container.getProvider(I).instances.forEach(ie=>{U.includes(ie)||U.push(ie)})}),U};function Ca(){}class Wi{constructor(T,N=bm){this.zone=T,this.delegate=N}now(){return this.delegate.now()}schedule(T,N,U){const Z=this.zone;return this.delegate.schedule(function(ie){Z.runGuarded(()=>{T.apply(this,[ie])})},N,U)}}class Jd{constructor(T){this.zone=T,this.task=null}call(T,N){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ca,{},Ca,Ca)),N.pipe((0,cs.b)({next:U,complete:U,error:U})).subscribe(T).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let al=(()=>{class I{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new Wi(Zone.current)),this.insideAngular=N.run(()=>new Wi(Zone.current,Qr.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(N){return new(N||I)(d.LFG(d.R0b))},I.\u0275prov=d.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Rs(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function zi(I){return I.pipe((0,sl.Q)(Rs().outsideAngular))}function Ia(I){return Rs(),function ao(I){return function(N){return(N=N.lift(new Jd(I.ngZone))).pipe((0,va.R)(I.outsideAngular),(0,sl.Q)(I.insideAngular))}}(Rs())(I)}},2090:(ut,we,F)=>{F.d(we,{$s:()=>Et,BH:()=>Te,DV:()=>Bn,Dv:()=>bi,G6:()=>ht,GJ:()=>yn,L:()=>pe,LL:()=>kt,Lj:()=>Bt,Mn:()=>We,Pz:()=>St,Sg:()=>Ge,UG:()=>X,UI:()=>an,US:()=>oe,Wj:()=>Hn,X3:()=>dt,Yr:()=>Qe,ZB:()=>te,ZR:()=>de,b$:()=>Ne,cI:()=>Mt,d:()=>ot,dS:()=>pn,eu:()=>ce,g5:()=>se,gK:()=>Vr,gQ:()=>cr,h$:()=>ue,hl:()=>ee,hu:()=>O,jU:()=>De,lb:()=>Hu,m9:()=>sn,ne:()=>jn,p$:()=>W,pd:()=>Ae,r3:()=>Eo,ru:()=>Le,tV:()=>q,uI:()=>Fe,ug:()=>et,vZ:()=>xn,w1:()=>Re,w9:()=>zr,xO:()=>Li,xb:()=>sr,z$:()=>Ve,zI:()=>_e,zd:()=>Ir});var d=F(5861);const O=function(G,B){if(!G)throw se(B)},se=function(G){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+G)},re=function(G){const B=[];let z=0;for(let he=0;he<G.length;he++){let Q=G.charCodeAt(he);Q<128?B[z++]=Q:Q<2048?(B[z++]=Q>>6|192,B[z++]=63&Q|128):55296==(64512&Q)&&he+1<G.length&&56320==(64512&G.charCodeAt(he+1))?(Q=65536+((1023&Q)<<10)+(1023&G.charCodeAt(++he)),B[z++]=Q>>18|240,B[z++]=Q>>12&63|128,B[z++]=Q>>6&63|128,B[z++]=63&Q|128):(B[z++]=Q>>12|224,B[z++]=Q>>6&63|128,B[z++]=63&Q|128)}return B},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,B){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,he=[];for(let Q=0;Q<G.length;Q+=3){const Ue=G[Q],_t=Q+1<G.length,Jt=_t?G[Q+1]:0,dr=Q+2<G.length,er=dr?G[Q+2]:0;let $n=(15&Jt)<<2|er>>6,Gn=63&er;dr||(Gn=64,_t||($n=64)),he.push(z[Ue>>2],z[(3&Ue)<<4|Jt>>4],z[$n],z[Gn])}return he.join("")},encodeString(G,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(G):this.encodeByteArray(re(G),B)},decodeString(G,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(G):function(G){const B=[];let z=0,he=0;for(;z<G.length;){const Q=G[z++];if(Q<128)B[he++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Ue=G[z++];B[he++]=String.fromCharCode((31&Q)<<6|63&Ue)}else if(Q>239&&Q<365){const dr=((7&Q)<<18|(63&G[z++])<<12|(63&G[z++])<<6|63&G[z++])-65536;B[he++]=String.fromCharCode(55296+(dr>>10)),B[he++]=String.fromCharCode(56320+(1023&dr))}else{const Ue=G[z++],_t=G[z++];B[he++]=String.fromCharCode((15&Q)<<12|(63&Ue)<<6|63&_t)}}return B.join("")}(this.decodeStringToByteArray(G,B))},decodeStringToByteArray(G,B){this.init_();const z=B?this.charToByteMapWebSafe_:this.charToByteMap_,he=[];for(let Q=0;Q<G.length;){const Ue=z[G.charAt(Q++)],Jt=Q<G.length?z[G.charAt(Q)]:0;++Q;const er=Q<G.length?z[G.charAt(Q)]:64;++Q;const Nt=Q<G.length?z[G.charAt(Q)]:64;if(++Q,null==Ue||null==Jt||null==er||null==Nt)throw Error();he.push(Ue<<2|Jt>>4),64!==er&&(he.push(Jt<<4&240|er>>2),64!==Nt&&he.push(er<<6&192|Nt))}return he},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}},ue=function(G){const B=re(G);return oe.encodeByteArray(B,!0)},pe=function(G){return ue(G).replace(/\./g,"")},q=function(G){try{return oe.decodeString(G,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function W(G){return te(void 0,G)}function te(G,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return B}for(const z in B)!B.hasOwnProperty(z)||!$e(z)||(G[z]=te(G[z],B[z]));return G}function $e(G){return"__proto__"!==G}class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,z)=>{this.resolve=B,this.reject=z})}wrapCallback(B){return(z,he)=>{z?this.reject(z):this.resolve(he),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(z):B(z,he))}}}function Ge(G,B){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const he=B||"demo-project",Q=G.iat||0,Ue=G.sub||G.user_id;if(!Ue)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const _t=Object.assign({iss:`https://securetoken.google.com/${he}`,aud:he,iat:Q,exp:Q+3600,auth_time:Q,sub:Ue,user_id:Ue,firebase:{sign_in_provider:"custom",identities:{}}},G);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(_t)),""].join(".")}function Ve(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Fe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function X(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(G){return!1}}function De(){return"object"==typeof self&&self.self===self}function Le(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function Ne(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ot(){return Ve().indexOf("Electron/")>=0}function Re(){const G=Ve();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function We(){return Ve().indexOf("MSAppHost/")>=0}function Qe(){return!1}function ht(){return!X()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ee(){return"object"==typeof indexedDB}function ce(){return new Promise((G,B)=>{try{let z=!0;const he="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(he);Q.onsuccess=()=>{Q.result.close(),z||self.indexedDB.deleteDatabase(he),G(!0)},Q.onupgradeneeded=()=>{z=!1},Q.onerror=()=>{var Ue;B((null===(Ue=Q.error)||void 0===Ue?void 0:Ue.message)||"")}}catch(z){B(z)}})}function _e(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class de extends Error{constructor(B,z,he){super(z),this.code=B,this.customData=he,this.name="FirebaseError",Object.setPrototypeOf(this,de.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kt.prototype.create)}}class kt{constructor(B,z,he){this.service=B,this.serviceName=z,this.errors=he}create(B,...z){const he=z[0]||{},Q=`${this.service}/${B}`,Ue=this.errors[B],_t=Ue?function tn(G,B){return G.replace(Xn,(z,he)=>{const Q=B[he];return null!=Q?String(Q):`<${he}?>`})}(Ue,he):"Error";return new de(Q,`${this.serviceName}: ${_t} (${Q}).`,he)}}const Xn=/\{\$([^}]+)}/g;function Mt(G){return JSON.parse(G)}function St(G){return JSON.stringify(G)}const yt=function(G){let B={},z={},he={},Q="";try{const Ue=G.split(".");B=Mt(q(Ue[0])||""),z=Mt(q(Ue[1])||""),Q=Ue[2],he=z.d||{},delete z.d}catch(Ue){}return{header:B,claims:z,data:he,signature:Q}},zr=function(G){const z=yt(G).claims;return!!z&&"object"==typeof z&&z.hasOwnProperty("iat")},yn=function(G){const B=yt(G).claims;return"object"==typeof B&&!0===B.admin};function Eo(G,B){return Object.prototype.hasOwnProperty.call(G,B)}function Bn(G,B){if(Object.prototype.hasOwnProperty.call(G,B))return G[B]}function sr(G){for(const B in G)if(Object.prototype.hasOwnProperty.call(G,B))return!1;return!0}function an(G,B,z){const he={};for(const Q in G)Object.prototype.hasOwnProperty.call(G,Q)&&(he[Q]=B.call(z,G[Q],Q,G));return he}function xn(G,B){if(G===B)return!0;const z=Object.keys(G),he=Object.keys(B);for(const Q of z){if(!he.includes(Q))return!1;const Ue=G[Q],_t=B[Q];if(Xo(Ue)&&Xo(_t)){if(!xn(Ue,_t))return!1}else if(Ue!==_t)return!1}for(const Q of he)if(!z.includes(Q))return!1;return!0}function Xo(G){return null!==G&&"object"==typeof G}function Li(G){const B=[];for(const[z,he]of Object.entries(G))Array.isArray(he)?he.forEach(Q=>{B.push(encodeURIComponent(z)+"="+encodeURIComponent(Q))}):B.push(encodeURIComponent(z)+"="+encodeURIComponent(he));return B.length?"&"+B.join("&"):""}function Ir(G){const B={};return G.replace(/^\?/,"").split("&").forEach(he=>{if(he){const[Q,Ue]=he.split("=");B[decodeURIComponent(Q)]=decodeURIComponent(Ue)}}),B}function Ae(G){const B=G.indexOf("?");if(!B)return"";const z=G.indexOf("#",B);return G.substring(B,z>0?z:void 0)}class cr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let B=1;B<this.blockSize;++B)this.pad_[B]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(B,z){z||(z=0);const he=this.W_;if("string"==typeof B)for(let Nt=0;Nt<16;Nt++)he[Nt]=B.charCodeAt(z)<<24|B.charCodeAt(z+1)<<16|B.charCodeAt(z+2)<<8|B.charCodeAt(z+3),z+=4;else for(let Nt=0;Nt<16;Nt++)he[Nt]=B[z]<<24|B[z+1]<<16|B[z+2]<<8|B[z+3],z+=4;for(let Nt=16;Nt<80;Nt++){const $n=he[Nt-3]^he[Nt-8]^he[Nt-14]^he[Nt-16];he[Nt]=4294967295&($n<<1|$n>>>31)}let er,zt,Q=this.chain_[0],Ue=this.chain_[1],_t=this.chain_[2],Jt=this.chain_[3],dr=this.chain_[4];for(let Nt=0;Nt<80;Nt++){Nt<40?Nt<20?(er=Jt^Ue&(_t^Jt),zt=1518500249):(er=Ue^_t^Jt,zt=1859775393):Nt<60?(er=Ue&_t|Jt&(Ue|_t),zt=2400959708):(er=Ue^_t^Jt,zt=3395469782);const $n=(Q<<5|Q>>>27)+er+dr+zt+he[Nt]&4294967295;dr=Jt,Jt=_t,_t=4294967295&(Ue<<30|Ue>>>2),Ue=Q,Q=$n}this.chain_[0]=this.chain_[0]+Q&4294967295,this.chain_[1]=this.chain_[1]+Ue&4294967295,this.chain_[2]=this.chain_[2]+_t&4294967295,this.chain_[3]=this.chain_[3]+Jt&4294967295,this.chain_[4]=this.chain_[4]+dr&4294967295}update(B,z){if(null==B)return;void 0===z&&(z=B.length);const he=z-this.blockSize;let Q=0;const Ue=this.buf_;let _t=this.inbuf_;for(;Q<z;){if(0===_t)for(;Q<=he;)this.compress_(B,Q),Q+=this.blockSize;if("string"==typeof B){for(;Q<z;)if(Ue[_t]=B.charCodeAt(Q),++_t,++Q,_t===this.blockSize){this.compress_(Ue),_t=0;break}}else for(;Q<z;)if(Ue[_t]=B[Q],++_t,++Q,_t===this.blockSize){this.compress_(Ue),_t=0;break}}this.inbuf_=_t,this.total_+=z}digest(){const B=[];let z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Q=this.blockSize-1;Q>=56;Q--)this.buf_[Q]=255&z,z/=256;this.compress_(this.buf_);let he=0;for(let Q=0;Q<5;Q++)for(let Ue=24;Ue>=0;Ue-=8)B[he]=this.chain_[Q]>>Ue&255,++he;return B}}function jn(G,B){const z=new gt(G,B);return z.subscribe.bind(z)}class gt{constructor(B,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{B(this)}).catch(he=>{this.error(he)})}next(B){this.forEachObserver(z=>{z.next(B)})}error(B){this.forEachObserver(z=>{z.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,z,he){let Q;if(void 0===B&&void 0===z&&void 0===he)throw new Error("Missing Observer.");Q=function ws(G,B){if("object"!=typeof G||null===G)return!1;for(const z of B)if(z in G&&"function"==typeof G[z])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:z,complete:he},void 0===Q.next&&(Q.next=or),void 0===Q.error&&(Q.error=or),void 0===Q.complete&&(Q.complete=or);const Ue=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch(_t){}}),this.observers.push(Q),Ue}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,B)}sendOne(B,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{z(this.observers[B])}catch(he){"undefined"!=typeof console&&console.error&&console.error(he)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function or(){}const bi=function(G,B,z,he){let Q;if(he<B?Q="at least "+B:he>z&&(Q=0===z?"none":"no more than "+z),Q)throw new Error(G+" failed: Was called with "+he+(1===he?" argument.":" arguments.")+" Expects "+Q+".")};function Vr(G,B){return`${G} failed: ${B} argument `}function Hn(G,B,z,he){if((!he||z)&&"function"!=typeof z)throw new Error(Vr(G,B)+"must be a valid function.")}function Hu(G,B,z,he){if((!he||z)&&("object"!=typeof z||null===z))throw new Error(Vr(G,B)+"must be a valid context object.")}const pn=function(G){const B=[];let z=0;for(let he=0;he<G.length;he++){let Q=G.charCodeAt(he);if(Q>=55296&&Q<=56319){const Ue=Q-55296;he++,O(he<G.length,"Surrogate pair missing trail surrogate."),Q=65536+(Ue<<10)+(G.charCodeAt(he)-56320)}Q<128?B[z++]=Q:Q<2048?(B[z++]=Q>>6|192,B[z++]=63&Q|128):Q<65536?(B[z++]=Q>>12|224,B[z++]=Q>>6&63|128,B[z++]=63&Q|128):(B[z++]=Q>>18|240,B[z++]=Q>>12&63|128,B[z++]=Q>>6&63|128,B[z++]=63&Q|128)}return B},et=function(G){let B=0;for(let z=0;z<G.length;z++){const he=G.charCodeAt(z);he<128?B++:he<2048?B+=2:he>=55296&&he<=56319?(B+=4,z++):B+=3}return B};function Et(G,B=1e3,z=2){const he=B*Math.pow(z,G),Q=Math.round(.5*he*(Math.random()-.5)*2);return Math.min(144e5,he+Q)}function sn(G){return G&&G._delegate?G._delegate:G}function bt(G,B){return new Promise((z,he)=>{G.onsuccess=Q=>{z(Q.target.result)},G.onerror=Q=>{var Ue;he(`${B}: ${null===(Ue=Q.target.error)||void 0===Ue?void 0:Ue.message}`)}})}class Ut{constructor(B){this._db=B,this.objectStoreNames=this._db.objectStoreNames}transaction(B,z){return new Je(this._db.transaction.call(this._db,B,z))}createObjectStore(B,z){return new be(this._db.createObjectStore(B,z))}close(){this._db.close()}}class Je{constructor(B){this._transaction=B,this.complete=new Promise((z,he)=>{this._transaction.oncomplete=function(){z()},this._transaction.onerror=()=>{he(this._transaction.error)},this._transaction.onabort=()=>{he(this._transaction.error)}})}objectStore(B){return new be(this._transaction.objectStore(B))}}class be{constructor(B){this._store=B}index(B){return new at(this._store.index(B))}createIndex(B,z,he){return new at(this._store.createIndex(B,z,he))}get(B){return bt(this._store.get(B),"Error reading from IndexedDB")}put(B,z){return bt(this._store.put(B,z),"Error writing to IndexedDB")}delete(B){return bt(this._store.delete(B),"Error deleting from IndexedDB")}clear(){return bt(this._store.clear(),"Error clearing IndexedDB object store")}}class at{constructor(B){this._index=B}get(B){return bt(this._index.get(B),"Error reading from IndexedDB")}}function dt(G,B,z){return new Promise((he,Q)=>{try{const Ue=indexedDB.open(G,B);Ue.onsuccess=_t=>{he(new Ut(_t.target.result))},Ue.onerror=_t=>{var Jt;Q(`Error opening indexedDB: ${null===(Jt=_t.target.error)||void 0===Jt?void 0:Jt.message}`)},Ue.onupgradeneeded=_t=>{z(new Ut(Ue.result),_t.oldVersion,_t.newVersion,new Je(Ue.transaction))}}catch(Ue){Q(`Error opening indexedDB: ${Ue.message}`)}})}function Bt(G){return un.apply(this,arguments)}function un(){return(un=(0,d.Z)(function*(G){return new Promise((B,z)=>{try{const he=indexedDB.deleteDatabase(G);he.onsuccess=()=>{B()},he.onerror=Q=>{var Ue;z(`Error deleting indexedDB database "${G}": ${null===(Ue=Q.target.error)||void 0===Ue?void 0:Ue.message}`)}}catch(he){z(`Error deleting indexedDB database "${G}": ${he.message}`)}})})).apply(this,arguments)}},9248:(ut,we,F)=>{var d=F(5e3);let Y=null;function O(){return Y}const oe=new d.OlP("DocumentToken");let ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function pe(){return(0,d.LFG)(W)}()},providedIn:"platform"}),n})();const q=new d.OlP("Location Initialized");let W=(()=>{class n extends ue{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){te()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){te()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function $e(){return new W((0,d.LFG)(oe))}()},providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function Te(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ge(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ve(n){return n&&"?"!==n[0]?"?"+n:n}let Fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function X(n){const e=(0,d.LFG)(oe).location;return new Le((0,d.LFG)(ue),e&&e.origin||"")}()},providedIn:"root"}),n})();const De=new d.OlP("appBaseHref");let Le=(()=>{class n extends Fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Te(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ve(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+Ve(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+Ve(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue),d.LFG(De,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ne=(()=>{class n extends Fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Te(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+Ve(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+Ve(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue),d.LFG(De,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),ot=(()=>{class n{constructor(t,r){this._subject=new d.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ge(Qe(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ve(r))}normalize(t){return n.stripTrailingSlash(function We(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Qe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ve,n.joinWithSlash=Te,n.stripTrailingSlash=Ge,n.\u0275fac=function(t){return new(t||n)(d.LFG(Fe),d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Re(){return new ot((0,d.LFG)(Fe),(0,d.LFG)(ue))}()},providedIn:"root"}),n})();function Qe(n){return n.replace(/\/index.html$/,"")}var ce=(()=>((ce=ce||{})[ce.Zero=0]="Zero",ce[ce.One=1]="One",ce[ce.Two=2]="Two",ce[ce.Few=3]="Few",ce[ce.Many=4]="Many",ce[ce.Other=5]="Other",ce))(),_e=(()=>((_e=_e||{})[_e.Format=0]="Format",_e[_e.Standalone=1]="Standalone",_e))(),ve=(()=>((ve=ve||{})[ve.Narrow=0]="Narrow",ve[ve.Abbreviated=1]="Abbreviated",ve[ve.Wide=2]="Wide",ve[ve.Short=3]="Short",ve))(),Pe=(()=>((Pe=Pe||{})[Pe.Short=0]="Short",Pe[Pe.Medium=1]="Medium",Pe[Pe.Long=2]="Long",Pe[Pe.Full=3]="Full",Pe))(),de=(()=>((de=de||{})[de.Decimal=0]="Decimal",de[de.Group=1]="Group",de[de.List=2]="List",de[de.PercentSign=3]="PercentSign",de[de.PlusSign=4]="PlusSign",de[de.MinusSign=5]="MinusSign",de[de.Exponential=6]="Exponential",de[de.SuperscriptingExponent=7]="SuperscriptingExponent",de[de.PerMille=8]="PerMille",de[de.Infinity=9]="Infinity",de[de.NaN=10]="NaN",de[de.TimeSeparator=11]="TimeSeparator",de[de.CurrencyDecimal=12]="CurrencyDecimal",de[de.CurrencyGroup=13]="CurrencyGroup",de))();function zr(n,e){return nn((0,d.cg1)(n)[d.wAp.DateFormat],e)}function yn(n,e){return nn((0,d.cg1)(n)[d.wAp.TimeFormat],e)}function Eo(n,e){return nn((0,d.cg1)(n)[d.wAp.DateTimeFormat],e)}function Bn(n,e){const t=(0,d.cg1)(n),r=t[d.wAp.NumberSymbols][e];if(void 0===r){if(e===de.CurrencyDecimal)return t[d.wAp.NumberSymbols][de.Decimal];if(e===de.CurrencyGroup)return t[d.wAp.NumberSymbols][de.Group]}return r}const Ir=d.kL8;function Ae(n){if(!n[d.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[d.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function nn(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function ws(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Tr=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Hn={},Hu=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var pn=(()=>((pn=pn||{})[pn.Short=0]="Short",pn[pn.ShortGMT=1]="ShortGMT",pn[pn.Long=2]="Long",pn[pn.Extended=3]="Extended",pn))(),et=(()=>((et=et||{})[et.FullYear=0]="FullYear",et[et.Month=1]="Month",et[et.Date=2]="Date",et[et.Hours=3]="Hours",et[et.Minutes=4]="Minutes",et[et.Seconds=5]="Seconds",et[et.FractionalSeconds=6]="FractionalSeconds",et[et.Day=7]="Day",et))(),vt=(()=>((vt=vt||{})[vt.DayPeriods=0]="DayPeriods",vt[vt.Days=1]="Days",vt[vt.Months=2]="Months",vt[vt.Eras=3]="Eras",vt))();function Ks(n,e,t,r){let i=function Jt(n){if(er(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,a=1,l=1]=n.split("-").map(p=>+p);return Es(i,a-1,l)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Tr))return function dr(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,a=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const l=Number(n[4]||0)-t,p=Number(n[5]||0)-r,_=Number(n[6]||0),E=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return a.call(e,l,p,_,E),e}(r)}const e=new Date(n);if(!er(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=rn(t,e)||e;let p,l=[];for(;e;){if(p=Hu.exec(e),!p){l.push(e);break}{l=l.concat(p.slice(1));const D=l.pop();if(!D)break;e=D}}let _=i.getTimezoneOffset();r&&(_=Q(r,_),i=function _t(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function Ue(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(Q(e,i)-i))}(i,r,!0));let E="";return l.forEach(D=>{const S=function he(n){if(z[n])return z[n];let e;switch(n){case"G":case"GG":case"GGG":e=Ut(vt.Eras,ve.Abbreviated);break;case"GGGG":e=Ut(vt.Eras,ve.Wide);break;case"GGGGG":e=Ut(vt.Eras,ve.Narrow);break;case"y":e=sn(et.FullYear,1,0,!1,!0);break;case"yy":e=sn(et.FullYear,2,0,!0,!0);break;case"yyy":e=sn(et.FullYear,3,0,!1,!0);break;case"yyyy":e=sn(et.FullYear,4,0,!1,!0);break;case"Y":e=B(1);break;case"YY":e=B(2,!0);break;case"YYY":e=B(3);break;case"YYYY":e=B(4);break;case"M":case"L":e=sn(et.Month,1,1);break;case"MM":case"LL":e=sn(et.Month,2,1);break;case"MMM":e=Ut(vt.Months,ve.Abbreviated);break;case"MMMM":e=Ut(vt.Months,ve.Wide);break;case"MMMMM":e=Ut(vt.Months,ve.Narrow);break;case"LLL":e=Ut(vt.Months,ve.Abbreviated,_e.Standalone);break;case"LLLL":e=Ut(vt.Months,ve.Wide,_e.Standalone);break;case"LLLLL":e=Ut(vt.Months,ve.Narrow,_e.Standalone);break;case"w":e=G(1);break;case"ww":e=G(2);break;case"W":e=G(1,!0);break;case"d":e=sn(et.Date,1);break;case"dd":e=sn(et.Date,2);break;case"c":case"cc":e=sn(et.Day,1);break;case"ccc":e=Ut(vt.Days,ve.Abbreviated,_e.Standalone);break;case"cccc":e=Ut(vt.Days,ve.Wide,_e.Standalone);break;case"ccccc":e=Ut(vt.Days,ve.Narrow,_e.Standalone);break;case"cccccc":e=Ut(vt.Days,ve.Short,_e.Standalone);break;case"E":case"EE":case"EEE":e=Ut(vt.Days,ve.Abbreviated);break;case"EEEE":e=Ut(vt.Days,ve.Wide);break;case"EEEEE":e=Ut(vt.Days,ve.Narrow);break;case"EEEEEE":e=Ut(vt.Days,ve.Short);break;case"a":case"aa":case"aaa":e=Ut(vt.DayPeriods,ve.Abbreviated);break;case"aaaa":e=Ut(vt.DayPeriods,ve.Wide);break;case"aaaaa":e=Ut(vt.DayPeriods,ve.Narrow);break;case"b":case"bb":case"bbb":e=Ut(vt.DayPeriods,ve.Abbreviated,_e.Standalone,!0);break;case"bbbb":e=Ut(vt.DayPeriods,ve.Wide,_e.Standalone,!0);break;case"bbbbb":e=Ut(vt.DayPeriods,ve.Narrow,_e.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ut(vt.DayPeriods,ve.Abbreviated,_e.Format,!0);break;case"BBBB":e=Ut(vt.DayPeriods,ve.Wide,_e.Format,!0);break;case"BBBBB":e=Ut(vt.DayPeriods,ve.Narrow,_e.Format,!0);break;case"h":e=sn(et.Hours,1,-12);break;case"hh":e=sn(et.Hours,2,-12);break;case"H":e=sn(et.Hours,1);break;case"HH":e=sn(et.Hours,2);break;case"m":e=sn(et.Minutes,1);break;case"mm":e=sn(et.Minutes,2);break;case"s":e=sn(et.Seconds,1);break;case"ss":e=sn(et.Seconds,2);break;case"S":e=sn(et.FractionalSeconds,1);break;case"SS":e=sn(et.FractionalSeconds,2);break;case"SSS":e=sn(et.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=be(pn.Short);break;case"ZZZZZ":e=be(pn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=be(pn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=be(pn.Long);break;default:return null}return z[n]=e,e}(D);E+=S?S(i,t,_):"''"===D?"'":D.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),E}function Es(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function rn(n,e){const t=function tn(n){return(0,d.cg1)(n)[d.wAp.LocaleId]}(n);if(Hn[t]=Hn[t]||{},Hn[t][e])return Hn[t][e];let r="";switch(e){case"shortDate":r=zr(n,Pe.Short);break;case"mediumDate":r=zr(n,Pe.Medium);break;case"longDate":r=zr(n,Pe.Long);break;case"fullDate":r=zr(n,Pe.Full);break;case"shortTime":r=yn(n,Pe.Short);break;case"mediumTime":r=yn(n,Pe.Medium);break;case"longTime":r=yn(n,Pe.Long);break;case"fullTime":r=yn(n,Pe.Full);break;case"short":const i=rn(n,"shortTime"),a=rn(n,"shortDate");r=Et(Eo(n,Pe.Short),[i,a]);break;case"medium":const l=rn(n,"mediumTime"),p=rn(n,"mediumDate");r=Et(Eo(n,Pe.Medium),[l,p]);break;case"long":const _=rn(n,"longTime"),E=rn(n,"longDate");r=Et(Eo(n,Pe.Long),[_,E]);break;case"full":const D=rn(n,"fullTime"),S=rn(n,"fullDate");r=Et(Eo(n,Pe.Full),[D,S])}return r&&(Hn[t][e]=r),r}function Et(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Dr(n,e,t="-",r,i){let a="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,a=t));let l=String(n);for(;l.length<e;)l="0"+l;return r&&(l=l.substr(l.length-e)),a+l}function sn(n,e,t=0,r=!1,i=!1){return function(a,l){let p=function bt(n,e){switch(n){case et.FullYear:return e.getFullYear();case et.Month:return e.getMonth();case et.Date:return e.getDate();case et.Hours:return e.getHours();case et.Minutes:return e.getMinutes();case et.Seconds:return e.getSeconds();case et.FractionalSeconds:return e.getMilliseconds();case et.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,a);if((t>0||p>-t)&&(p+=t),n===et.Hours)0===p&&-12===t&&(p=12);else if(n===et.FractionalSeconds)return function bo(n,e){return Dr(n,3).substr(0,e)}(p,e);const _=Bn(l,de.MinusSign);return Dr(p,e,_,r,i)}}function Ut(n,e,t=_e.Format,r=!1){return function(i,a){return function Je(n,e,t,r,i,a){switch(t){case vt.Months:return function St(n,e,t){const r=(0,d.cg1)(n),a=nn([r[d.wAp.MonthsFormat],r[d.wAp.MonthsStandalone]],e);return nn(a,t)}(e,i,r)[n.getMonth()];case vt.Days:return function Mt(n,e,t){const r=(0,d.cg1)(n),a=nn([r[d.wAp.DaysFormat],r[d.wAp.DaysStandalone]],e);return nn(a,t)}(e,i,r)[n.getDay()];case vt.DayPeriods:const l=n.getHours(),p=n.getMinutes();if(a){const E=function cr(n){const e=(0,d.cg1)(n);return Ae(e),(e[d.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?ws(r):[ws(r[0]),ws(r[1])])}(e),D=function jn(n,e,t){const r=(0,d.cg1)(n);Ae(r);const a=nn([r[d.wAp.ExtraData][0],r[d.wAp.ExtraData][1]],e)||[];return nn(a,t)||[]}(e,i,r),S=E.findIndex(P=>{if(Array.isArray(P)){const[V,H]=P,le=l>=V.hours&&p>=V.minutes,Ee=l<H.hours||l===H.hours&&p<H.minutes;if(V.hours<H.hours){if(le&&Ee)return!0}else if(le||Ee)return!0}else if(P.hours===l&&P.minutes===p)return!0;return!1});if(-1!==S)return D[S]}return function Xn(n,e,t){const r=(0,d.cg1)(n),a=nn([r[d.wAp.DayPeriodsFormat],r[d.wAp.DayPeriodsStandalone]],e);return nn(a,t)}(e,i,r)[l<12?0:1];case vt.Eras:return function yt(n,e){return nn((0,d.cg1)(n)[d.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,a,n,e,t,r)}}function be(n){return function(e,t,r){const i=-1*r,a=Bn(t,de.MinusSign),l=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case pn.Short:return(i>=0?"+":"")+Dr(l,2,a)+Dr(Math.abs(i%60),2,a);case pn.ShortGMT:return"GMT"+(i>=0?"+":"")+Dr(l,1,a);case pn.Long:return"GMT"+(i>=0?"+":"")+Dr(l,2,a)+":"+Dr(Math.abs(i%60),2,a);case pn.Extended:return 0===r?"Z":(i>=0?"+":"")+Dr(l,2,a)+":"+Dr(Math.abs(i%60),2,a);default:throw new Error(`Unknown zone width "${n}"`)}}}function un(n){return Es(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function G(n,e=!1){return function(t,r){let i;if(e){const a=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,l=t.getDate();i=1+Math.floor((l+a)/7)}else{const a=un(t),l=function Bt(n){const e=Es(n,0,1).getDay();return Es(n,0,1+(e<=4?4:11)-e)}(a.getFullYear()),p=a.getTime()-l.getTime();i=1+Math.round(p/6048e5)}return Dr(i,n,Bn(r,de.MinusSign))}}function B(n,e=!1){return function(t,r){return Dr(un(t).getFullYear(),n,Bn(r,de.MinusSign),e)}}const z={};function Q(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function er(n){return n instanceof Date&&!isNaN(n.valueOf())}class Ar{}let na=(()=>{class n extends Ar{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Ir(r||this.locale)(t)){case ce.Zero:return"zero";case ce.One:return"one";case ce.Two:return"two";case ce.Few:return"few";case ce.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.soG))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Dt(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}class Cs{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Qs=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function Ii(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((i,a,l)=>{if(null==i.previousIndex){const p=this._viewContainer.createEmbeddedView(this._template,new Cs(null,this._ngForOf,-1,-1),null===l?void 0:l),_=new Sr(i,p);r.push(_)}else if(null==l)this._viewContainer.remove(null===a?void 0:a);else if(null!==a){const p=this._viewContainer.get(a);this._viewContainer.move(p,l);const _=new Sr(i,p);r.push(_)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,a=this._viewContainer.length;i<a;i++){const l=this._viewContainer.get(i);l.context.index=i,l.context.count=a,l.context.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Sr{constructor(e,t){this.record=e,this.view=t}}let Ui=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Bi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ln("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ln("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Bi{constructor(){this.$implicit=null,this.ngIf=null}}function ln(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}function ji(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,d.AaK)(n)}'`)}class sa{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class $f{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const Pd=new $f,Gf=new sa;let ac=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,d.QGY)(t))return Pd;if((0,d.F4k)(t))return Gf;throw ji(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.sBO,16))},n.\u0275pipe=d.Yjl({name:"async",type:n,pure:!1}),n})();const lc=new d.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let oa=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",i,a){var l;if(null==t||""===t||t!=t)return null;try{return Ks(t,r,a||this.locale,null!==(l=null!=i?i:this.defaultTimezone)&&void 0!==l?l:void 0)}catch(p){throw ji(n,p.message)}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.soG,16),d.Y36(lc,24))},n.\u0275pipe=d.Yjl({name:"date",type:n,pure:!0}),n})(),Vd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[{provide:Ar,useClass:na}]}),n})();function xr(n){return"server"===n}let Kf=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new Ha((0,d.LFG)(oe),window)}),n})();class Ha{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Cn(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ai(this.window.history)||ai(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ai(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ao{}class So extends class Ln extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){Y||(Y=n)}(new So)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ts(){return Zr=Zr||document.querySelector("base"),Zr?Zr.getAttribute("href"):null}();return null==t?null:function Wu(n){Mn=Mn||document.createElement("a"),Mn.setAttribute("href",n);const e=Mn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Zr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Dt(document.cookie,e)}}let Mn,Zr=null;const $a=new d.OlP("TRANSITION_ID"),ui=[{provide:d.ip1,useFactory:function An(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[$a,oe,d.zs3],multi:!0}];class Hi{static init(){(0,d.VLi)(new Hi)}addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const p=function(_){l=l||_,a--,0==a&&r(l)};i.forEach(function(_){_.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let dc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ds=new d.OlP("EventManagerPlugins");let li=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ds),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class ua{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let to=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),tt=(()=>{class n extends to{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(zu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(zu))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function zu(n){O().remove(n)}const Zu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ga=/%COMP%/g;function no(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?no(n,i,t):(i=i.replace(Ga,n),t.push(i))}return t}function bn(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ss=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Kr(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new gc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new mc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=no(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(li),d.LFG(tt),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Kr{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Zu[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Zu[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Zu[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,bn(r)):this.eventManager.addEventListener(e,t,bn(r))}}class gc extends Kr{constructor(e,t,r,i){super(e),this.component=r;const a=no(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Ie(n){return"_ngcontent-%COMP%".replace(Ga,n)}(i+"-"+r.id),this.hostAttr=function jt(n){return"_nghost-%COMP%".replace(Ga,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class mc extends Kr{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=no(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const p=document.createElement("style");p.textContent=a[l],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let za=(()=>{class n extends ua{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const ro=["alt","control","meta","shift"],ci={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_c={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},As={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let $i=(()=>{class n extends ua{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="";if(ro.forEach(_=>{const E=r.indexOf(_);E>-1&&(r.splice(E,1),l+=_+".")}),l+=a,0!=r.length||0===a.length)return null;const p={};return p.domEventName=i,p.fullKey=l,p}static getEventFullKey(t){let r="",i=function yc(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&_c.hasOwnProperty(e)&&(e=_c[e]))}return ci[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ro.forEach(a=>{a!=i&&As[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ro=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function xo(){So.makeCurrent(),Hi.init()},multi:!0},{provide:oe,useFactory:function da(){return(0,d.RDi)(document),document},deps:[]}]),Bd=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function vc(){return new d.qLn},deps:[]},{provide:Ds,useClass:za,multi:!0,deps:[oe,d.R0b,d.Lbi]},{provide:Ds,useClass:$i,multi:!0,deps:[oe]},{provide:ss,useClass:ss,deps:[li,tt,d.AFp]},{provide:d.FYo,useExisting:ss},{provide:to,useExisting:tt},{provide:tt,useClass:tt,deps:[oe]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b]},{provide:li,useClass:li,deps:[Ds,d.R0b]},{provide:Ao,useClass:dc,deps:[]}];let Mo=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:$a,useExisting:d.AFp},ui]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(n,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:Bd,imports:[Vd,d.hGG]}),n})();"undefined"!=typeof window&&window;var cn=F(8996),Wn=F(3269);function ft(...n){const e=(0,Wn.yG)(n);return(0,cn.D)(n,e)}var Gi=F(7579);class Di extends Gi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var fr=F(8306);const{isArray:Xa}=Array,{getPrototypeOf:Em,prototype:Po,keys:Gd}=Object;function Ss(n){if(1===n.length){const e=n[0];if(Xa(e))return{args:e,keys:null};if(function ko(n){return n&&"object"==typeof n&&Em(n)===Po}(e)){const t=Gd(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var qi=F(4671),lt=F(4004);const{isArray:tp}=Array;function fa(n){return(0,lt.U)(e=>function np(n,e){return tp(e)?n(...e):n(e)}(n,e))}function so(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Pn=F(5403),pa=F(9672);function il(n,e,t){n?(0,pa.f)(t,n,e):e()}const oo=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var eu=F(8189);function ga(...n){return function tu(){return(0,eu.J)(1)}()((0,cn.D)(n,(0,Wn.yG)(n)))}var pr=F(8421);function nu(n){return new fr.y(e=>{(0,pr.Xf)(n()).subscribe(e)})}var ma=F(515),Fo=F(727),gr=F(4482);function gn(){return(0,gr.e)((n,e)=>{let t=null;n._refCount++;const r=new Pn.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class qd extends fr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,gr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Fo.w0;const t=this.getSubject();e.add(this.source.subscribe(new Pn.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Fo.w0.EMPTY)}return e}refCount(){return gn()(this)}}function Tn(n,e){return(0,gr.e)((t,r)=>{let i=null,a=0,l=!1;const p=()=>l&&!i&&r.complete();t.subscribe(new Pn.Q(r,_=>{null==i||i.unsubscribe();let E=0;const D=a++;(0,pr.Xf)(n(_,D)).subscribe(i=new Pn.Q(r,S=>r.next(e?e(_,S,D,E++):S),()=>{i=null,p()}))},()=>{l=!0,p()}))})}var ru=F(5698);function di(...n){const e=(0,Wn.yG)(n);return(0,gr.e)((t,r)=>{(e?ga(n,t,e):ga(n,t)).subscribe(r)})}function _a(n,e,t,r,i){return(a,l)=>{let p=t,_=e,E=0;a.subscribe(new Pn.Q(l,D=>{const S=E++;_=p?n(_,D,S):(p=!0,D),r&&l.next(_)},i&&(()=>{p&&l.next(_),l.complete()})))}}function Yr(n,e){return(0,gr.e)(_a(n,e,arguments.length>=2,!0))}function Ai(n,e){return(0,gr.e)((t,r)=>{let i=0;t.subscribe(new Pn.Q(r,a=>n.call(e,a,i++)&&r.next(a)))})}function Si(n){return(0,gr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe(new Pn.Q(t,void 0,void 0,l=>{a=(0,pr.Xf)(n(l,Si(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var Sn=F(5577),Wd=F(576);function ls(n,e){return(0,Wd.m)(e)?(0,Sn.z)(n,e,1):(0,Sn.z)(n,1)}function dn(n){return n<=0?()=>ma.E:(0,gr.e)((e,t)=>{let r=[];e.subscribe(new Pn.Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function rp(n=ip){return(0,gr.e)((e,t)=>{let r=!1;e.subscribe(new Pn.Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function ip(){return new oo}function sp(n){return(0,gr.e)((e,t)=>{let r=!1;e.subscribe(new Pn.Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ya(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ai((i,a)=>n(i,a,r)):qi.y,(0,ru.q)(1),t?sp(e):rp(()=>new oo))}var Ur=F(8505);class hi{constructor(e,t){this.id=e,this.url=t}}class Zd extends hi{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class kn extends hi{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xs extends hi{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class iu extends hi{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class bm extends hi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cm extends hi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qr extends hi{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class cs extends hi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sl extends hi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class va{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wa{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ol{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ea{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bc{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kd{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cc{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const xt="primary";class Br{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Lo(n){return new Br(n)}const ba="ngNavigationCancelingError";function ap(n){const e=Error("NavigationCancelingError: "+n);return e[ba]=!0,e}function Qd(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],p=n[a];if(l.startsWith(":"))i[l.substring(1)]=p;else if(l!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Wi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Jd(n[i],e[i]))return!1;return!0}function Jd(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function al(n){return Array.prototype.concat.apply([],n)}function Rs(n){return n.length>0?n[n.length-1]:null}function wn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function zi(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,cn.D)(Promise.resolve(n)):ft(n)}const Ia={exact:function I(n,e,t){if(!pt(n.segments,e.segments)||!Z(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!I(n.children[r],e.children[r],t))return!1;return!0},subset:N},ao={exact:function Im(n,e){return Wi(n,e)},subset:function T(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Jd(n[t],e[t]))},ignored:()=>!0};function cl(n,e,t){return Ia[t.paths](n.root,e.root,t.matrixParams)&&ao[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function N(n,e,t){return U(n,e,e.segments,t)}function U(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!pt(i,t)||e.hasChildren()||!Z(i,t,r))}if(n.segments.length===t.length){if(!pt(n.segments,t)||!Z(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!N(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(pt(n.segments,i)&&Z(n.segments,i,r)&&n.children[xt])&&U(n.children[xt],e,a,r)}}function Z(n,e,t){return e.every((r,i)=>ao[t](n[i].parameters,r.parameters))}class ne{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lo(this.queryParams)),this._queryParamMap}toString(){return rr.serialize(this)}}class ie{constructor(e,t){this.segments=e,this.children=t,this.parent=null,wn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zi(this)}}class ze{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Lo(this.parameters)),this._parameterMap}toString(){return Ic(this)}}function pt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class It{}class fi{parse(e){const t=new hb(e);return new ne(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${jr(e.root,!0)}`,r=function Zy(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Hr(t)}=${Hr(i)}`).join("&"):`${Hr(t)}=${Hr(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Ns(n){return encodeURI(n)}(e.fragment)}`:""}`}}const rr=new fi;function Zi(n){return n.segments.map(e=>Ic(e)).join("/")}function jr(n,e){if(!n.hasChildren())return Zi(n);if(e){const t=n.children[xt]?jr(n.children[xt],!1):"",r=[];return wn(n.children,(i,a)=>{a!==xt&&r.push(`${a}:${jr(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function $t(n,e){let t=[];return wn(n.children,(r,i)=>{i===xt&&(t=t.concat(e(r,i)))}),wn(n.children,(r,i)=>{i!==xt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===xt?[jr(n.children[xt],!1)]:[`${i}:${jr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[xt]?`${Zi(n)}/${t[0]}`:`${Zi(n)}/(${t.join("//")})`}}function Ms(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hr(n){return Ms(n).replace(/%3B/gi,";")}function su(n){return Ms(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dl(n){return decodeURIComponent(n)}function ou(n){return dl(n.replace(/\+/g,"%20"))}function Ic(n){return`${su(n.path)}${function up(n){return Object.keys(n).map(e=>`;${su(e)}=${su(n[e])}`).join("")}(n.parameters)}`}const au=/^[^\/()?;=#]+/;function Vo(n){const e=n.match(au);return e?e[0]:""}const Ky=/^[^=?&#]+/,Xd=/^[^&#]+/;class hb{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ie([],{}):new ie([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[xt]=new ie(e,t)),r}parseSegment(){const e=Vo(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ze(dl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Vo(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Vo(this.remaining);i&&(r=i,this.capture(r))}e[dl(t)]=dl(r)}parseQueryParam(e){const t=function db(n){const e=n.match(Ky);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Yy(n){const e=n.match(Xd);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=ou(t),a=ou(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Vo(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=xt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[xt]:new ie([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class eh{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=lp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=lp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=cp(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return cp(e,this._root).map(t=>t.value)}}function lp(n,e){if(n===e.value)return e;for(const t of e.children){const r=lp(n,t);if(r)return r}return null}function cp(n,e){if(n===e.value)return[e];for(const t of e.children){const r=cp(n,t);if(r.length)return r.unshift(e),r}return[]}class xi{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ta(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Uo extends eh{constructor(e,t){super(e),this.snapshot=t,Dc(this,e)}toString(){return this.snapshot.toString()}}function Tc(n,e){const t=function dp(n,e){const l=new fl([],{},{},"",{},xt,e,null,n.root,-1,{});return new th("",new xi(l,[]))}(n,e),r=new Di([new ze("",{})]),i=new Di({}),a=new Di({}),l=new Di({}),p=new Di(""),_=new hl(r,i,l,p,a,xt,e,t.root);return _.snapshot=t.root,new Uo(new xi(_,[]),t)}class hl{constructor(e,t,r,i,a,l,p,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=p,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,lt.U)(e=>Lo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,lt.U)(e=>Lo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function uu(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function hp(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class fl{constructor(e,t,r,i,a,l,p,_,E,D,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=p,this.routeConfig=_,this._urlSegment=E,this._lastPathIndex=D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Lo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class th extends eh{constructor(e,t){super(t),this.url=e,Dc(this,t)}toString(){return fp(this._root)}}function Dc(n,e){e.value._routerState=n,e.children.forEach(t=>Dc(n,t))}function fp(n){const e=n.children.length>0?` { ${n.children.map(fp).join(", ")} } `:"";return`${n.value}${e}`}function nh(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Wi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Wi(e.params,t.params)||n.params.next(t.params),function Ca(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Wi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Wi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Ac(n,e){const t=Wi(n.params,e.params)&&function At(n,e){return pt(n,e)&&n.every((t,r)=>Wi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ac(n.parent,e.parent))}function Sc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Jy(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Sc(n,r,i);return Sc(n,r)})}(n,e,t);return new xi(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(p=>Sc(n,p)),l}}const r=function uo(n){return new hl(new Di(n.url),new Di(n.params),new Di(n.queryParams),new Di(n.fragment),new Di(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Sc(n,a));return new xi(r,i)}}function rh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Rc(n){return"object"==typeof n&&null!=n&&n.outlets}function Tm(n,e,t,r,i){let a={};return r&&wn(r,(l,p)=>{a[p]=Array.isArray(l)?l.map(_=>`${_}`):`${l}`}),new ne(t.root===n?e:ih(t.root,n,e),a,i)}function ih(n,e,t){const r={};return wn(n.children,(i,a)=>{r[a]=i===e?t:ih(i,e,t)}),new ie(n.segments,r)}class Xy{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&rh(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Rc);if(i&&i!==Rs(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sh{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Dm(n,e,t){if(n||(n=new ie([],{})),0===n.segments.length&&n.hasChildren())return pp(n,e,t);const r=function gp(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],p=t[r];if(Rc(p))break;const _=`${p}`,E=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&E&&"object"==typeof E&&void 0===E.outlets){if(!gl(_,E,l))return a;r+=2}else{if(!gl(_,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new ie(n.segments.slice(0,r.pathIndex),{});return a.children[xt]=new ie(n.segments.slice(r.pathIndex),n.children),pp(a,0,i)}return r.match&&0===i.length?new ie(n.segments,{}):r.match&&!n.hasChildren()?pl(n,e,t):r.match?pp(n,0,i):pl(n,e,t)}function pp(n,e,t){if(0===t.length)return new ie(n.segments,{});{const r=function nv(n){return Rc(n[0])?n[0].outlets:{[xt]:n}}(t),i={};return wn(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=Dm(n.children[l],e,a))}),wn(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new ie(n.segments,i)}}function pl(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Rc(a)){const _=Am(a.outlets);return new ie(r,_)}if(0===i&&rh(t[0])){r.push(new ze(n.segments[e].path,Ps(t[0]))),i++;continue}const l=Rc(a)?a.outlets[xt]:`${a}`,p=i<t.length-1?t[i+1]:null;l&&p&&rh(p)?(r.push(new ze(l,Ps(p))),i+=2):(r.push(new ze(l,{})),i++)}return new ie(r,{})}function Am(n){const e={};return wn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=pl(new ie([],{}),0,t))}),e}function Ps(n){const e={};return wn(n,(t,r)=>e[r]=`${t}`),e}function gl(n,e,t){return n==t.path&&Wi(e,t.parameters)}class mp{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),nh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ta(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),wn(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Ta(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Ta(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ta(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Kd(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Ea(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(nh(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(p.contexts),l.attachRef=p.componentRef,l.route=p.route.value,l.outlet&&l.outlet.attach(p.componentRef,p.route.value),nh(p.route.value),this.activateChildRoutes(e,null,l.children)}else{const p=function xm(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=p?p.module.componentFactoryResolver:null;l.attachRef=null,l.route=i,l.resolver=_,l.outlet&&l.outlet.activateWith(i,_),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Rm{constructor(e,t){this.routes=e,this.module=t}}function lu(n){return"function"==typeof n}function ks(n){return n instanceof ne}const ml=Symbol("INITIAL_VALUE");function cu(){return Tn(n=>function Oo(...n){const e=(0,Wn.yG)(n),t=(0,Wn.jO)(n),{args:r,keys:i}=Ss(n);if(0===r.length)return(0,cn.D)([],e);const a=new fr.y(function us(n,e,t=qi.y){return r=>{il(e,()=>{const{length:i}=n,a=new Array(i);let l=i,p=i;for(let _=0;_<i;_++)il(e,()=>{const E=(0,cn.D)(n[_],e);let D=!1;E.subscribe(new Pn.Q(r,S=>{a[_]=S,D||(D=!0,p--),p||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>so(i,l):qi.y));return t?a.pipe(fa(t)):a}(n.map(e=>e.pipe((0,ru.q)(1),di(ml)))).pipe(Yr((e,t)=>{let r=!1;return t.reduce((i,a,l)=>i!==ml?i:(a===ml&&(r=!0),r||!1!==a&&l!==t.length-1&&!ks(a)?i:a),e)},ml),Ai(e=>e!==ml),(0,lt.U)(e=>ks(e)?e:!0===e),(0,ru.q)(1)))}class iv{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new _l,this.attachRef=null}}class _l{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new iv,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let oh=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=a||xt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,_=new Mm(t,p,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(_l),d.Y36(d.s_b),d.Y36(d._Vd),d.$8M("name"),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Mm{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===hl?this.route:e===_l?this.childContexts:this.parent.get(e,t)}}let Nc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},directives:[oh],encapsulation:2}),n})();function Nm(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Pm(r,du(e,r))}}function Pm(n,e){n.children&&Nm(n.children,e)}function du(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function zn(n){const e=n.children&&n.children.map(zn),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==xt&&(t.component=Nc),t}function ds(n){return n.outlet||xt}function ah(n,e){const t=n.filter(r=>ds(r)===e);return t.push(...n.filter(r=>ds(r)!==e)),t}const uh={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function hu(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},uh):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(e.matcher||Qd)(t,n,e);if(!a)return Object.assign({},uh);const l={};wn(a.posParams,(_,E)=>{l[E]=_.path});const p=a.consumed.length>0?Object.assign(Object.assign({},l),a.consumed[a.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:p,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function lh(n,e,t,r,i="corrected"){if(t.length>0&&function ov(n,e,t){return t.some(r=>Pc(n,e,r)&&ds(r)!==xt)}(n,t,r)){const l=new ie(e,function yp(n,e,t,r){const i={};i[xt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&ds(a)!==xt){const l=new ie([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[ds(a)]=l}return i}(n,e,r,new ie(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function av(n,e,t){return t.some(r=>Pc(n,e,r))}(n,t,r)){const l=new ie(n.segments,function sv(n,e,t,r,i,a){const l={};for(const p of r)if(Pc(n,t,p)&&!i[ds(p)]){const _=new ie([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[ds(p)]=_}return Object.assign(Object.assign({},i),l)}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new ie(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Pc(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function uv(n,e,t,r){return!!(ds(n)===r||r!==xt&&Pc(e,t,n))&&("**"===n.path||hu(e,n,t).matched)}function yl(n,e,t){return 0===e.length&&!n.children[t]}class mr{constructor(e){this.segmentGroup=e||null}}class ch{constructor(e){this.urlTree=e}}function kc(n){return new fr.y(e=>e.error(new mr(n)))}function dh(n){return new fr.y(e=>e.error(new ch(n)))}function Mr(n){return new fr.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class wp{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(d.h0i)}apply(){const e=lh(this.urlTree.root,[],[],this.config).segmentGroup,t=new ie(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,xt).pipe((0,lt.U)(a=>this.createUrlTree(hh(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Si(a=>{if(a instanceof ch)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof mr?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,xt).pipe((0,lt.U)(i=>this.createUrlTree(hh(i),e.queryParams,e.fragment))).pipe(Si(i=>{throw i instanceof mr?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new ie([],{[xt]:e}):e;return new ne(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,lt.U)(a=>new ie([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,cn.D)(i).pipe(ls(a=>{const l=r.children[a],p=ah(t,a);return this.expandSegmentGroup(e,p,l,a).pipe((0,lt.U)(_=>({segment:_,outlet:a})))}),Yr((a,l)=>(a[l.outlet]=l.segment,a),{}),function op(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ai((i,a)=>n(i,a,r)):qi.y,dn(1),t?sp(e):rp(()=>new oo))}())}expandSegment(e,t,r,i,a,l){return(0,cn.D)(r).pipe(ls(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,a,l).pipe(Si(E=>{if(E instanceof mr)return ft(null);throw E}))),ya(p=>!!p),Si((p,_)=>{if(p instanceof oo||"EmptyError"===p.name){if(yl(t,i,a))return ft(new ie([],{}));throw new mr(t)}throw p}))}expandSegmentAgainstRoute(e,t,r,i,a,l,p){return uv(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):kc(t):kc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?dh(a):this.lineralizeSegments(r,a).pipe((0,Sn.z)(l=>{const p=new ie(l,{});return this.expandSegment(e,p,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:p,consumedSegments:_,lastChild:E,positionalParamSegments:D}=hu(t,i,a);if(!p)return kc(t);const S=this.applyRedirectCommands(_,i.redirectTo,D);return i.redirectTo.startsWith("/")?dh(S):this.lineralizeSegments(i,S).pipe((0,Sn.z)(P=>this.expandSegment(e,t,r,P.concat(a.slice(E)),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?ft(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,lt.U)(P=>(r._loadedConfig=P,new ie(i,{})))):ft(new ie(i,{}));const{matched:l,consumedSegments:p,lastChild:_}=hu(t,r,i);if(!l)return kc(t);const E=i.slice(_);return this.getChildConfig(e,r,i).pipe((0,Sn.z)(S=>{const P=S.module,V=S.routes,{segmentGroup:H,slicedSegments:le}=lh(t,p,E,V),Ee=new ie(H.segments,H.children);if(0===le.length&&Ee.hasChildren())return this.expandChildren(P,V,Ee).pipe((0,lt.U)(Ze=>new ie(p,Ze)));if(0===V.length&&0===le.length)return ft(new ie(p,{}));const Ye=ds(r)===a;return this.expandSegment(P,Ee,V,le,Ye?xt:a,!0).pipe((0,lt.U)(ct=>new ie(p.concat(ct.segments),ct.children)))}))}getChildConfig(e,t,r){return t.children?ft(new Rm(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ft(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Sn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,lt.U)(a=>(t._loadedConfig=a,a))):function Oc(n){return new fr.y(e=>e.error(ap(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):ft(new Rm([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?ft(i.map(l=>{const p=e.get(l);let _;if(function _p(n){return n&&lu(n.canLoad)}(p))_=p.canLoad(t,r);else{if(!lu(p))throw new Error("Invalid CanLoad guard");_=p(t,r)}return zi(_)})).pipe(cu(),(0,Ur.b)(l=>{if(!ks(l))return;const p=ap(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw p.url=l,p}),(0,lt.U)(l=>!0===l)):ft(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ft(r);if(i.numberOfChildren>1||!i.children[xt])return Mr(e.redirectTo);i=i.children[xt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new ne(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return wn(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[a]=t[p]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return wn(t.children,(p,_)=>{l[_]=this.createSegmentGroup(e,p,r,i)}),new ie(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function hh(n){const e={};for(const r of Object.keys(n.children)){const a=hh(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function Ep(n){if(1===n.numberOfChildren&&n.children[xt]){const e=n.children[xt];return new ie(n.segments.concat(e.segments),e.children)}return n}(new ie(n.segments,e))}class vl{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class fh{constructor(e,t){this.component=e,this.route=t}}function km(n,e,t){const r=n._root;return fu(r,e?e._root:null,t,[r.value])}function Fc(n,e,t){const r=function dv(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function fu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Ta(e);return n.children.forEach(l=>{(function hv(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const _=function fv(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!pt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!pt(n.url,e.url)||!Wi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ac(n,e)||!Wi(n.queryParams,e.queryParams);default:return!Ac(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new vl(r)):(a.data=l.data,a._resolvedData=l._resolvedData),fu(n,e,a.component?p?p.children:null:t,r,i),_&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new fh(p.outlet.component,l))}else l&&pu(e,p,i),i.canActivateChecks.push(new vl(r)),fu(n,null,a.component?p?p.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),wn(a,(l,p)=>pu(l,t.getContext(p),i)),i}function pu(n,e,t){const r=Ta(n),i=n.value;wn(r,(a,l)=>{pu(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new fh(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Ip{}function ph(n){return new fr.y(e=>e.error(n))}class Tp{constructor(e,t,r,i,a,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=l}recognize(){const e=lh(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,xt);if(null===t)return null;const r=new fl([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},xt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new xi(r,t),a=new th(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=uu(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const l=t.children[a],p=ah(e,a),_=this.processSegmentGroup(p,l,a);if(null===_)return null;r.push(..._)}const i=Dp(r);return function yv(n){n.sort((e,t)=>e.value.outlet===xt?-1:t.value.outlet===xt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const l=this.processSegmentAgainstRoute(a,t,r,i);if(null!==l)return l}return yl(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!uv(e,t,r,i))return null;let a,l=[],p=[];if("**"===e.path){const V=r.length>0?Rs(r).parameters:{};a=new fl(r,V,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Os(e),ds(e),e.component,e,gh(t),Bo(t)+r.length,Lm(e))}else{const V=hu(t,e,r);if(!V.matched)return null;l=V.consumedSegments,p=r.slice(V.lastChild),a=new fl(l,V.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Os(e),ds(e),e.component,e,gh(t),Bo(t)+l.length,Lm(e))}const _=function Ki(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:E,slicedSegments:D}=lh(t,l,p,_.filter(V=>void 0===V.redirectTo),this.relativeLinkResolution);if(0===D.length&&E.hasChildren()){const V=this.processChildren(_,E);return null===V?null:[new xi(a,V)]}if(0===_.length&&0===D.length)return[new xi(a,[])];const S=ds(e)===i,P=this.processSegment(_,E,D,S?xt:i);return null===P?null:[new xi(a,P)]}}function wl(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Dp(n){const e=[],t=new Set;for(const r of n){if(!wl(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Dp(r.children);e.push(new xi(r.value,i))}return e.filter(r=>!t.has(r))}function gh(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Bo(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Os(n){return n.data||{}}function Lm(n){return n.resolve||{}}function Vc(n){return Tn(e=>{const t=n(e);return t?(0,cn.D)(t).pipe((0,lt.U)(()=>e)):ft(e)})}class gu extends class pi{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const El=new d.OlP("ROUTES");class Sp{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,lt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=a.create(e);return new Rm(al(l.injector.get(El,void 0,d.XFs.Self|d.XFs.Optional)).map(zn),l)}),Si(a=>{throw t._loader$=void 0,a}));return t._loader$=new qd(i,()=>new Gi.x).pipe(gn()),t._loader$}loadModuleFactory(e){return zi(e()).pipe((0,Sn.z)(t=>t instanceof d.YKP?ft(t):(0,cn.D)(this.compiler.compileModuleAsync(t))))}}class mu{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function xp(n){throw n}function wv(n,e,t){return e.parse("/")}function _u(n,e){return ft(null)}const Uc={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Um={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ri=(()=>{class n{constructor(t,r,i,a,l,p,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Gi.x,this.errorHandler=xp,this.malformedUriErrorHandler=wv,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:_u,afterPreactivation:_u},this.urlHandlingStrategy=new mu,this.routeReuseStrategy=new gu,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(d.h0i),this.console=l.get(d.c2e);const S=l.get(d.R0b);this.isNgZoneEnabled=S instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function ll(){return new ne(new ie([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Sp(l,p,P=>this.triggerEvent(new va(P)),P=>this.triggerEvent(new wa(P))),this.routerState=Tc(this.currentUrlTree,this.rootComponentType),this.transitions=new Di({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ai(i=>0!==i.id),(0,lt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Tn(i=>{let a=!1,l=!1;return ft(i).pipe((0,Ur.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Tn(p=>{const _=this.browserUrlTree.toString(),E=!this.navigated||p.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||E)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return mh(p.source)&&(this.browserUrlTree=p.extractedUrl),ft(p).pipe(Tn(S=>{const P=this.transitions.getValue();return r.next(new Zd(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),P!==this.transitions.getValue()?ma.E:Promise.resolve(S)}),function lv(n,e,t,r){return Tn(i=>function vp(n,e,t,r,i){return new wp(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,lt.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ur.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function _b(n,e,t,r,i){return(0,Sn.z)(a=>function _v(n,e,t,r,i="emptyOnly",a="legacy"){try{const l=new Tp(n,e,t,r,i,a).recognize();return null===l?ph(new Ip):ft(l)}catch(l){return ph(l)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,lt.U)(l=>Object.assign(Object.assign({},a),{targetSnapshot:l}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ur.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(V,S)}this.browserUrlTree=S.urlAfterRedirects}const P=new bm(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(P)}));if(E&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:V,source:H,restoredState:le,extras:Ee}=p,Ye=new Zd(P,this.serializeUrl(V),H,le);r.next(Ye);const qe=Tc(V,this.rootComponentType).snapshot;return ft(Object.assign(Object.assign({},p),{targetSnapshot:qe,urlAfterRedirects:V,extras:Object.assign(Object.assign({},Ee),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),ma.E}),Vc(p=>{const{targetSnapshot:_,id:E,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:P,replaceUrl:V}}=p;return this.hooks.beforePreactivation(_,{navigationId:E,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!P,replaceUrl:!!V})}),(0,Ur.b)(p=>{const _=new Cm(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),(0,lt.U)(p=>Object.assign(Object.assign({},p),{guards:km(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function bp(n,e){return(0,Sn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?ft(Object.assign(Object.assign({},t),{guardsResult:!0})):function Om(n,e,t,r){return(0,cn.D)(n).pipe((0,Sn.z)(i=>function Cp(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?ft(a.map(p=>{const _=Fc(p,e,i);let E;if(function rv(n){return n&&lu(n.canDeactivate)}(_))E=zi(_.canDeactivate(n,e,t,r));else{if(!lu(_))throw new Error("Invalid CanDeactivate guard");E=zi(_(n,e,t,r))}return E.pipe(ya())})).pipe(cu()):ft(!0)}(i.component,i.route,t,e,r)),ya(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Sn.z)(p=>p&&function pb(n){return"boolean"==typeof n}(p)?function pv(n,e,t,r){return(0,cn.D)(e).pipe(ls(i=>ga(function gv(n,e){return null!==n&&e&&e(new ol(n)),ft(!0)}(i.route.parent,r),function Lc(n,e){return null!==n&&e&&e(new bc(n)),ft(!0)}(i.route,r),function Fm(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function cv(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>nu(()=>ft(l.guards.map(_=>{const E=Fc(_,l.node,t);let D;if(function gb(n){return n&&lu(n.canActivateChild)}(E))D=zi(E.canActivateChild(r,n));else{if(!lu(E))throw new Error("Invalid CanActivateChild guard");D=zi(E(r,n))}return D.pipe(ya())})).pipe(cu())));return ft(a).pipe(cu())}(n,i.path,t),function mv(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ft(!0);const i=r.map(a=>nu(()=>{const l=Fc(a,e,t);let p;if(function Mc(n){return n&&lu(n.canActivate)}(l))p=zi(l.canActivate(e,n));else{if(!lu(l))throw new Error("Invalid CanActivate guard");p=zi(l(e,n))}return p.pipe(ya())}));return ft(i).pipe(cu())}(n,i.route,t))),ya(i=>!0!==i,!0))}(r,a,n,e):ft(p)),(0,lt.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,Ur.b)(p=>{if(ks(p.guardsResult)){const E=ap(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw E.url=p.guardsResult,E}const _=new Qr(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(_)}),Ai(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),Vc(p=>{if(p.guards.canActivateChecks.length)return ft(p).pipe((0,Ur.b)(_=>{const E=new cs(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(E)}),Tn(_=>{let E=!1;return ft(_).pipe(function jo(n,e){return(0,Sn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ft(t);let a=0;return(0,cn.D)(i).pipe(ls(l=>function vv(n,e,t,r){return function lo(n,e,t,r){const i=Object.keys(n);if(0===i.length)return ft({});const a={};return(0,cn.D)(i).pipe((0,Sn.z)(l=>function Ap(n,e,t,r){const i=Fc(n,e,r);return zi(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe((0,Ur.b)(p=>{a[l]=p}))),dn(1),(0,Sn.z)(()=>Object.keys(a).length===i.length?ft(a):ma.E))}(n._resolve,n,e,r).pipe((0,lt.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),uu(n,t).resolve),null)))}(l.route,r,n,e)),(0,Ur.b)(()=>a++),dn(1),(0,Sn.z)(l=>a===i.length?ft(t):ma.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ur.b)({next:()=>E=!0,complete:()=>{E||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,Ur.b)(_=>{const E=new sl(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(E)}))}),Vc(p=>{const{targetSnapshot:_,id:E,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:P,replaceUrl:V}}=p;return this.hooks.afterPreactivation(_,{navigationId:E,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!P,replaceUrl:!!V})}),(0,lt.U)(p=>{const _=function Qy(n,e,t){const r=Sc(n,e._root,t?t._root:void 0);return new Uo(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:_})}),(0,Ur.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,lt.U)(r=>(new mp(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,Ur.b)({next(){a=!0},complete(){a=!0}}),function zd(n){return(0,gr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var p;a||l||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===i.id&&(this.currentNavigation=null)}),Si(p=>{if(l=!0,function Yd(n){return n&&n[ba]}(p)){const _=ks(p.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const E=new xs(i.id,this.serializeUrl(i.extractedUrl),p.message);r.next(E),_?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||mh(i.source)};this.scheduleNavigation(D,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new iu(i.id,this.serializeUrl(i.extractedUrl),p);r.next(_);try{i.resolve(this.errorHandler(p))}catch(E){i.reject(E)}}return ma.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},l=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(l){const _=Object.assign({},l);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const p=this.parseUrl(t.url);this.scheduleNavigation(p,r,l,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Nm(t),this.config=t.map(zn),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:p,preserveFragment:_}=r,E=i||this.routerState.root,D=_?this.currentUrlTree.fragment:l;let S=null;switch(p){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),function xc(n,e,t,r,i){if(0===t.length)return Tm(e.root,e.root,e,r,i);const a=function fb(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Xy(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const p={};return wn(a.outlets,(_,E)=>{p[E]="string"==typeof _?_.split("/"):_}),[...i,{outlets:p}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((p,_)=>{0==_&&"."===p||(0==_&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,a]},[]);return new Xy(t,e,r)}(t);if(a.toRoot())return Tm(e.root,new ie([],{}),e,r,i);const l=function ev(n,e,t){if(n.isAbsolute)return new sh(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new sh(a,a===e.root,0)}const r=rh(n.commands[0])?0:1;return function tv(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new sh(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),p=l.processChildren?pp(l.segmentGroup,l.index,a.commands):Dm(l.segmentGroup,l.index,a.commands);return Tm(l.segmentGroup,p,e,r,i)}(E,this.currentUrlTree,t,S,null!=D?D:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=ks(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Rp(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},Uc):!1===r?Object.assign({},Um):r,ks(t))return cl(this.currentUrlTree,t,i);const a=this.parseUrl(t);return cl(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new kn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){var p,_,E;if(this.disposed)return Promise.resolve(!1);const D=this.transitions.value,S=mh(r)&&D&&!mh(D.source),P=D.rawUrl.toString()===t.toString(),V=D.id===(null===(p=this.currentNavigation)||void 0===p?void 0:p.id);if(S&&P&&V)return Promise.resolve(!0);let le,Ee,Ye;l?(le=l.resolve,Ee=l.reject,Ye=l.promise):Ye=new Promise((Ze,Pt)=>{le=Ze,Ee=Pt});const qe=++this.navigationId;let ct;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),ct=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(_=this.browserPageId)&&void 0!==_?_:0:(null!==(E=this.browserPageId)&&void 0!==E?E:0)+1):ct=0,this.setTransition({id:qe,targetPageId:ct,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:le,reject:Ee,promise:Ye,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ye.catch(Ze=>Promise.reject(Ze))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===l?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new xs(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function mh(n){return"imperative"!==n}let y=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.commands=null,this.onChanges=new Gi.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:g(this.skipLocationChange),replaceUrl:g(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:g(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ri),d.Y36(hl),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),n})(),f=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Gi.x,this.subscription=t.events.subscribe(a=>{a instanceof kn&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,l){if(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const p={skipLocationChange:g(this.skipLocationChange),replaceUrl:g(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:g(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ri),d.Y36(hl),d.Y36(Fe))},n.\u0275dir=d.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&d.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&d.uIk("target",r.target)("href",r.href,d.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),n})();function g(n){return""===n||!!n}class R{}class J{preload(e,t){return ft(null)}}let Me=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new Sp(i,r,_=>t.triggerEvent(new va(_)),_=>t.triggerEvent(new wa(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ai(t=>t instanceof kn),ls(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(d.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const l=a._loadedConfig;i.push(this.processRoutes(l.module,l.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,cn.D)(i).pipe((0,eu.J)(),(0,lt.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?ft(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Sn.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ri),d.LFG(d.Sil),d.LFG(d.zs3),d.LFG(R))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Zd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof kn&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Cc&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Cc(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Xe=new d.OlP("ROUTER_CONFIGURATION"),Gt=new d.OlP("ROUTER_FORROOT_GUARD"),On=[ot,{provide:It,useClass:fi},{provide:Ri,useFactory:function Np(n,e,t,r,i,a,l={},p,_){const E=new Ri(null,n,e,t,r,i,al(a));return p&&(E.urlHandlingStrategy=p),_&&(E.routeReuseStrategy=_),function Pp(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,E),l.enableTracing&&E.events.subscribe(D=>{var S,P;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${D.constructor.name}`),console.log(D.toString()),console.log(D),null===(P=console.groupEnd)||void 0===P||P.call(console)}),E},deps:[It,_l,ot,d.zs3,d.Sil,El,Xe,[class Fs{},new d.FiY],[class Vm{},new d.FiY]]},_l,{provide:hl,useFactory:function Hc(n){return n.routerState.root},deps:[Ri]},Me,J,class j{preload(e,t){return t().pipe(Si(()=>ft(null)))}},{provide:Xe,useValue:{enableTracing:!1}}];function Ho(){return new d.PXZ("Router",Ri)}let bl=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[On,jc(t),{provide:Gt,useFactory:Bm,deps:[[Ri,new d.FiY,new d.tp0]]},{provide:Xe,useValue:r||{}},{provide:Fe,useFactory:Bc,deps:[ue,[new d.tBr(De),new d.FiY],Xe]},{provide:Se,useFactory:Mp,deps:[Ri,Kf,Xe]},{provide:R,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:J},{provide:d.PXZ,multi:!0,useFactory:Ho},[$c,{provide:d.ip1,multi:!0,useFactory:_h,deps:[$c]},{provide:kp,useFactory:Cl,deps:[$c]},{provide:d.tb,multi:!0,useExisting:kp}]]}}static forChild(t){return{ngModule:n,providers:[jc(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Gt,8),d.LFG(Ri,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function Mp(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Se(n,e,t)}function Bc(n,e,t={}){return t.useHash?new Ne(n,e):new Le(n,e)}function Bm(n){return"guarded"}function jc(n){return[{provide:d.deG,multi:!0,useValue:n},{provide:El,multi:!0,useValue:n}]}let $c=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Gi.x}appInitializer(){return this.injector.get(q,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(p=>r=p),a=this.injector.get(Ri),l=this.injector.get(Xe);return"disabled"===l.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?ft(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Xe),i=this.injector.get(Me),a=this.injector.get(Se),l=this.injector.get(Ri),p=this.injector.get(d.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&l.initialNavigation(),i.setUpPreloading(),a.init(),l.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function _h(n){return n.appInitializer.bind(n)}function Cl(n){return n.bootstrapListener.bind(n)}const kp=new d.OlP("Router Initializer");let bv=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-about-page"]],decls:44,vars:0,consts:[[1,"container","max-w-full","max-h-full","bg-primary-300"],[1,"bg-primary-50","min-h-screen"],[1,"py-8","px-8"],[1,"text-3xl","font-sans","font-bold","text-primary-700","leading-snug"],[1,"text-xl","font-sans","font-thin","text-primary-500","leading-normal"],[1,"text-xl","font-sans","font-thin","text-primary-400","leading-normal","my-2"],[1,"list-disc","list-inside","text-sans","font-thin","text-primary-300","px-8","py-2"],[1,"py-2"],[1,"font-bold"],[1,"text-xl","font-sans","font-thin","text-primary-500","leading-normal","mt-2"],[1,"mt-12","flex","justify-center","items-center","px-2","py-4"],[1,"relative","group"],[1,"animate-tilt","group-hover:duration-200","duration-1000","group-hover:opacity-100","transition","absolute","inset-0.5","bg-gradient-to-r","from-secondary-300","to-secondary-900","rounded-lg","blur","opacity-85"],["routerLink","/contact",1,"relative","py-4","px-6","bg-secondary-600","hover:bg-secondary-600","rounded-lg","leading-none","flex","items-center","text","divide-x","divide-secondary-50"],[1,"text-secondary-50","pr-6","font-sans","transition","duration-200"],[1,"flex","items-center","space-x-5","pl-6","animate-tilt"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","#fafafa","viewBox","0 0 256 256"],["width","256","height","256","fill","none"],["d","M192,120,136,64l26.3-26.3a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4Z","opacity","0.2"],["d","M96,216H48a8,8,0,0,1-8-8V163.3a7.9,7.9,0,0,1,2.3-5.6l120-120a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4Z","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","136","y1","64","x2","192","y2","120","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["points","216 216 96 216 40.5 160.5","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","164","y1","92","x2","68","y2","188","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"h1",3),d._uU(4," Sachem "),d.qZA(),d.TgZ(5,"h2",4),d._uU(6," Implant\xe9e \xe0 Saint Laurent du Maroni, l'agence accompagne ses clients dans la r\xe9alisation de leurs outils de communication interne ou externe : "),d.qZA(),d.TgZ(7,"h2",5),d._uU(8," Notre coeur de m\xe9tier: "),d.qZA(),d.TgZ(9,"ul",6),d.TgZ(10,"li",7),d.TgZ(11,"span",8),d._uU(12," R\xe9daction de documents "),d.qZA(),d.qZA(),d.TgZ(13,"li",7),d.TgZ(14,"span",8),d._uU(15," Conseil en communication "),d.qZA(),d.qZA(),d.TgZ(16,"li",7),d.TgZ(17,"span",8),d._uU(18," Cr\xe9ation de site internet "),d.qZA(),d.qZA(),d.TgZ(19,"li",7),d.TgZ(20,"span",8),d._uU(21," Cr\xe9ation d'identit\xe9 visuelle "),d.qZA(),d.qZA(),d.TgZ(22,"li",7),d.TgZ(23,"span",8),d._uU(24," Edition publicitaire "),d.qZA(),d.qZA(),d.TgZ(25,"li",7),d.TgZ(26,"span",8),d._uU(27," Relecture et correction "),d.qZA(),d.qZA(),d.qZA(),d.TgZ(28,"h2",9),d._uU(29," Les valeurs environnementales et humaines sont au coeur de notre projet d'entreprise. "),d.qZA(),d.qZA(),d.TgZ(30,"div",10),d.TgZ(31,"div",11),d._UZ(32,"div",12),d.TgZ(33,"button",13),d.TgZ(34,"span",14),d._uU(35,"Contactez nous"),d.qZA(),d.TgZ(36,"span",15),d.O4$(),d.TgZ(37,"svg",16),d._UZ(38,"rect",17),d._UZ(39,"path",18),d._UZ(40,"path",19),d._UZ(41,"line",20),d._UZ(42,"polyline",21),d._UZ(43,"line",22),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA())},directives:[y],styles:[""]}),n})();class yh{}var Op=F(4986),hn=F(5813);function Cv(){return(0,gr.e)((n,e)=>{let t,r=!1;n.subscribe(new Pn.Q(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function yb(n,e=qi.y){return n=null!=n?n:vb,(0,gr.e)((t,r)=>{let i,a=!0;t.subscribe(new Pn.Q(r,l=>{const p=e(l);(a||!n(i,p))&&(a=!1,i=p,r.next(l))}))})}function vb(n,e){return n===e}var nt,_r=F(2011),wb=(F(1254),F(3942)),ge=F(5861),Yi=F(9681),co=F(4859),$o=F(1877),k=F(2090),Go="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},yu={},Iv=Iv||{},Ot=Go||self;function jm(){}function Tv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function vh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Dv="closure_uid_"+(1e9*Math.random()>>>0),OD=0;function Lt(n,e,t){return n.call.apply(n.bind,arguments)}function Eb(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Jr(n,e,t){return(Jr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Lt:Eb).apply(null,arguments)}function Fp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Nr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var l=Array(arguments.length-2),p=2;p<arguments.length;p++)l[p-2]=arguments[p];return e.prototype[i].apply(r,l)}}function Xr(){this.s=this.s,this.o=this.o}var FD={};Xr.prototype.s=!1,Xr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function kD(n){return Object.prototype.hasOwnProperty.call(n,Dv)&&n[Dv]||(n[Dv]=++OD)}(this);delete FD[n]}},Xr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Hm=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Da=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function Sv(n){return Array.prototype.concat.apply([],arguments)}function Lp(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function xv(n){return/^[\s\xa0]*$/.test(n)}var ei,Rv=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function hs(n,e){return-1!=n.indexOf(e)}function wh(n,e){return n<e?-1:n>e?1:0}e:{var $m=Ot.navigator;if($m){var Gm=$m.userAgent;if(Gm){ei=Gm;break e}}ei=""}function Vp(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function LD(n){const e={};for(const t in n)e[t]=n[t];return e}var Cb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ib(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<Cb.length;a++)t=Cb[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Mv(n){return Mv[" "](n),n}Mv[" "]=jm;var Eh,n,Tb=hs(ei,"Opera"),Up=hs(ei,"Trident")||hs(ei,"MSIE"),Db=hs(ei,"Edge"),Ab=Db||Up,Nv=hs(ei,"Gecko")&&!(hs(ei.toLowerCase(),"webkit")&&!hs(ei,"Edge"))&&!(hs(ei,"Trident")||hs(ei,"MSIE"))&&!hs(ei,"Edge"),Sb=hs(ei.toLowerCase(),"webkit")&&!hs(ei,"Edge");function xb(){var n=Ot.document;return n?n.documentMode:void 0}e:{var Rb="",Mb=(n=ei,Nv?/rv:([^\);]+)(\)|;)/.exec(n):Db?/Edge\/([\d\.]+)/.exec(n):Up?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Sb?/WebKit\/(\S+)/.exec(n):Tb?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Mb&&(Rb=Mb?Mb[1]:""),Up){var Nb=xb();if(null!=Nb&&Nb>parseFloat(Rb)){Eh=String(Nb);break e}}Eh=Rb}var gM={};var _M=Ot.document&&Up&&(xb()||parseInt(Eh,10))||void 0,yM=function(){if(!Ot.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ot.addEventListener("test",jm,e),Ot.removeEventListener("test",jm,e)}catch(t){}return n}();function Qi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function ho(n,e){if(Qi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Nv){e:{try{Mv(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Pv[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ho.Z.h.call(this)}}Qi.prototype.h=function(){this.defaultPrevented=!0},Nr(ho,Qi);var Pv={2:"touch",3:"pen",4:"mouse"};ho.prototype.h=function(){ho.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Bp="closure_listenable_"+(1e6*Math.random()|0),kb=0;function kv(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++kb,this.ca=this.fa=!1}function jp(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function bh(n){this.src=n,this.g={},this.h=0}function Ov(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=Hm(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(jp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Aa(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}bh.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=Aa(n,e,r,i);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new kv(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var qm="closure_lm_"+(1e6*Math.random()|0),Fv={};function Wm(n,e,t,r,i){if(r&&r.once)return Lb(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)Wm(n,e[a],t,r,i);return null}return t=Tl(t),n&&n[Bp]?n.N(e,t,vh(r)?!!r.capture:!!r,i):Ob(n,e,t,!1,r,i)}function Ob(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=vh(i)?!!i.capture:!!i,p=Il(n);if(p||(n[qm]=p=new bh(n)),(t=p.add(e,t,r,l,a)).proxy)return t;if(r=function Fb(){var e=Lv;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)yM||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(qc(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Lb(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Lb(n,e[a],t,r,i);return null}return t=Tl(t),n&&n[Bp]?n.O(e,t,vh(r)?!!r.capture:!!r,i):Ob(n,e,t,!0,r,i)}function Vb(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Vb(n,e[a],t,r,i);else r=vh(r)?!!r.capture:!!r,t=Tl(t),n&&n[Bp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Aa(a=n.g[e],t,r,i))&&(jp(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Il(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Aa(e,t,r,i)),(t=-1<n?e[n]:null)&&Gc(t))}function Gc(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Bp])Ov(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(qc(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Il(e))?(Ov(t,n),0==t.h&&(t.src=null,e[qm]=null)):jp(n)}}}function qc(n){return n in Fv?Fv[n]:Fv[n]="on"+n}function Lv(n,e){if(n.ca)n=!0;else{e=new ho(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Gc(n),n=t.call(r,e)}return n}function Il(n){return(n=n[qm])instanceof bh?n:null}var Wc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tl(n){return"function"==typeof n?n:(n[Wc]||(n[Wc]=function(e){return n.handleEvent(e)}),n[Wc])}function ti(){Xr.call(this),this.i=new bh(this),this.P=this,this.I=null}function ni(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Qi(e,n);else if(e instanceof Qi)e.target=e.target||n;else{var i=e;Ib(e=new Qi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=Hp(l,r,!0,e)&&i}if(i=Hp(l=e.g=n,r,!0,e)&&i,i=Hp(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Hp(l=e.g=t[a],r,!1,e)&&i}function Hp(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ca&&l.capture==t){var p=l.listener,_=l.ia||l.src;l.fa&&Ov(n.i,l),i=!1!==p.call(_,r)&&i}}return i&&!r.defaultPrevented}Nr(ti,Xr),ti.prototype[Bp]=!0,ti.prototype.removeEventListener=function(n,e,t,r){Vb(this,n,e,t,r)},ti.prototype.M=function(){if(ti.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)jp(t[r]);delete n.g[e],n.h--}}this.I=null},ti.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ti.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var $p=Ot.JSON.stringify;function Vv(){var n=Bv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var zm,Gp=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new BD,n=>n.reset());class BD{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Bb(n){Ot.setTimeout(()=>{throw n},0)}function jb(n,e){zm||function Hb(){var n=Ot.Promise.resolve(void 0);zm=function(){n.then(jD)}}(),Uv||(zm(),Uv=!0),Bv.add(n,e)}var Uv=!1,Bv=new class Ub{constructor(){this.h=this.g=null}add(e,t){const r=Gp.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function jD(){for(var n;n=Vv();){try{n.h.call(n.g)}catch(t){Bb(t)}var e=Gp;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Uv=!1}function Zm(n,e){ti.call(this),this.h=n||1,this.g=e||Ot,this.j=Jr(this.kb,this),this.l=Date.now()}function Ji(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function jv(n,e,t){if("function"==typeof n)t&&(n=Jr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Jr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ot.setTimeout(n,e||0)}function $b(n){n.g=jv(()=>{n.g=null,n.i&&(n.i=!1,$b(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Nr(Zm,ti),(nt=Zm.prototype).da=!1,nt.S=null,nt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ni(this,"tick"),this.da&&(Ji(this),this.start()))}},nt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},nt.M=function(){Zm.Z.M.call(this),Ji(this),delete this.g};class vM extends Xr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:$b(this)}M(){super.M(),this.g&&(Ot.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Km(n){Xr.call(this),this.h=n,this.g={}}Nr(Km,Xr);var Hv=[];function HD(n,e,t,r){Array.isArray(t)||(t&&(Hv[0]=t.toString()),t=Hv);for(var i=0;i<t.length;i++){var a=Wm(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function Gb(n){Vp(n.g,function(e,t){this.g.hasOwnProperty(t)&&Gc(e)},n),n.g={}}function Ch(){this.g=!0}function Ih(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Wb(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return $p(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}Km.prototype.M=function(){Km.Z.M.call(this),Gb(this)},Km.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ch.prototype.Aa=function(){this.g=!1},Ch.prototype.info=function(){};var zc={},$v=null;function Ym(){return $v=$v||new ti}function zb(n){Qi.call(this,zc.Ma,n)}function Th(n){const e=Ym();ni(e,new zb(e,n))}function Gv(n,e){Qi.call(this,zc.STAT_EVENT,n),this.stat=e}function Xi(n){const e=Ym();ni(e,new Gv(e,n))}function qo(n,e){Qi.call(this,zc.Na,n),this.size=e}function Zc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ot.setTimeout(function(){n()},e)}zc.Ma="serverreachability",Nr(zb,Qi),zc.STAT_EVENT="statevent",Nr(Gv,Qi),zc.Na="timingevent",Nr(qo,Qi);var Qm={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Zb={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Kb(){}function Yb(){}Kb.prototype.h=null;var zv,qp={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Wv(){Qi.call(this,"d")}function Wp(){Qi.call(this,"c")}function Jm(){}function Dl(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Km(this),this.P=qD,this.W=new Zm(n=Ab?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Xm}function Xm(){this.i=null,this.g="",this.h=!1}Nr(Wv,Qi),Nr(Wp,Qi),Nr(Jm,Kb),Jm.prototype.g=function(){return new XMLHttpRequest},Jm.prototype.i=function(){return{}},zv=new Jm;var qD=45e3,zp={},Dh={};function e_(n,e,t){n.K=1,n.v=s_(Ls(e)),n.s=t,n.U=!0,Qb(n,null)}function Qb(n,e){n.F=Date.now(),Zp(n),n.A=Ls(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),o_(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Xm,n.g=nd(n.l,t?e:null,!n.s),0<n.O&&(n.L=new vM(Jr(n.Ia,n,n.g),n.O)),HD(n.V,n.g,"readystatechange",n.gb),e=n.H?LD(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Th(1),function qb(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",p=a.split("&"),_=0;_<p.length;_++){var E=p[_].split("=");if(1<E.length){var D=E[0];E=E[1];var S=D.split("_");l=2<=S.length&&"type"==S[1]?l+(D+"=")+E+"&":l+(D+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Jb(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function t_(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=wM(n,t),i==Dh){4==e&&(n.o=4,Xi(14),r=!1),Ih(n.j,n.m,null,"[Incomplete Response]");break}if(i==zp){n.o=4,Xi(15),Ih(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ih(n.j,n.m,i,null),n_(n,i)}Jb(n)&&i!=Dh&&i!=zp&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Xi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),ng(e),e.L=!0,Xi(11))):(Ih(n.j,n.m,t,"[Invalid Chunked Response]"),Al(n),Ah(n))}function wM(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Dh:(t=Number(e.substring(t,r)),isNaN(t)?zp:(r+=1)+t>e.length?Dh:(e=e.substr(r,t),n.C=r+t,e))}function Zp(n){n.Y=Date.now()+n.P,Zv(n,n.P)}function Zv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Zc(Jr(n.eb,n),e)}function Kp(n){n.B&&(Ot.clearTimeout(n.B),n.B=null)}function Ah(n){0==n.l.G||n.I||Jc(n.l,n)}function Al(n){Kp(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Ji(n.W),Gb(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function n_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||e0(t.i,n)))if(t.I=n.N,!n.J&&e0(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(E){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Zc(Jr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;bu(t),Rl(t)}fs(t),Xi(18)}if(1>=iC(t.i)&&t.ka){try{t.ka()}catch(E){}t.ka=void 0}}else fo(t,11)}else if((n.J||t.g==n)&&bu(t),!xv(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let E=i[e];if(t.U=E[0],E=E[1],2==t.G)if("c"==E[0]){t.J=E[1],t.la=E[2];const D=E[3];null!=D&&(t.ma=D,t.h.info("VER="+t.ma));const S=E[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const P=E[5];null!=P&&"number"==typeof P&&0<P&&(t.K=r=1.5*P,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const H=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(H){var a=r.i;!a.g&&(hs(H,"spdy")||hs(H,"quic")||hs(H,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(a_(a,a.h),a.h=null))}if(r.D){const le=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;le&&(r.sa=le,Vn(r.F,r.D,le))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=td(r,r.H?r.la:null,r.W),l.J){QD(r.i,l);var p=l,_=r.K;_&&p.setTimeout(_),p.B&&(Kp(p),Zp(p)),r.g=l}else tg(r);0<t.l.length&&Fh(t)}else"stop"!=E[0]&&"close"!=E[0]||fo(t,7);else 3==t.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?fo(t,7):o0(t):"noop"!=E[0]&&t.j&&t.j.wa(E),t.A=0)}Th(4)}catch(E){}}function Sh(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Tv(n)||"string"==typeof n)Da(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Tv(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function vu(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Tv(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function xh(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof xh)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Kv(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Rh(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Rh(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Rh(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(nt=Dl.prototype).setTimeout=function(n){this.P=n},nt.gb=function(n){n=n.target;const e=this.L;e&&3==Eu(n)?e.l():this.Ia(n)},nt.Ia=function(n){try{if(n==this.g)e:{const D=Eu(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>D)&&(3!=D||Ab||this.g&&(this.h.h||this.g.ga()||lC(this.g)))){this.I||4!=D||7==e||Th(8==e||0>=S?3:2),Kp(this);var t=this.g.ba();this.N=t;t:if(Jb(this)){var r=lC(this.g);n="";var i=r.length,a=4==Eu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Al(this),Ah(this);var l="";break t}this.h.i=new Ot.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function $D(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.X,D,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,_=this.g;if((p=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xv(p)){var E=p;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,Xi(12),Al(this),Ah(this);break e}Ih(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,n_(this,t)}this.U?(t_(this,D,l),Ab&&this.i&&3==D&&(HD(this.V,this.W,"tick",this.fb),this.W.start())):(Ih(this.j,this.m,l,null),n_(this,l)),4==D&&Al(this),this.i&&!this.I&&(4==D?Jc(this.l,this):(this.i=!1,Zp(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Xi(12)):(this.o=0,Xi(13)),Al(this),Ah(this)}}}catch(D){}},nt.fb=function(){if(this.g){var n=Eu(this.g),e=this.g.ga();this.C<e.length&&(Kp(this),t_(this,n,e),this.i&&4!=n&&Zp(this))}},nt.cancel=function(){this.I=!0,Al(this)},nt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function GD(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Th(3),Xi(17)),Al(this),this.o=2,Ah(this)):Zv(this,this.Y-n)},(nt=xh.prototype).R=function(){Kv(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},nt.T=function(){return Kv(this),this.g.concat()},nt.get=function(n,e){return Rh(this.h,n)?this.h[n]:e},nt.set=function(n,e){Rh(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},nt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var r_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function wu(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof wu){this.g=void 0!==e?e:n.g,i_(this,n.j),this.s=n.s,Mh(this,n.i),Yp(this,n.m),this.l=n.l,e=n.h;var t=new Jp;t.i=e.i,e.g&&(t.g=new xh(e.g),t.h=e.h),Yv(this,t),this.o=n.o}else n&&(t=String(n).match(r_))?(this.g=!!e,i_(this,t[1]||"",!0),this.s=Qp(t[2]||""),Mh(this,t[3]||"",!0),Yp(this,t[4]),this.l=Qp(t[5]||"",!0),Yv(this,t[6]||"",!0),this.o=Qp(t[7]||"")):(this.g=!!e,this.h=new Jp(null,this.g))}function Ls(n){return new wu(n)}function i_(n,e,t){n.j=t?Qp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Mh(n,e,t){n.i=t?Qp(e,!0):e}function Yp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Yv(n,e,t){e instanceof Jp?(n.h=e,function tC(n,e){e&&!n.j&&(Sl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(eC(this,r),o_(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Nh(e,kh)),n.h=new Jp(e,n.g))}function Vn(n,e,t){n.h.set(e,t)}function s_(n){return Vn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Qp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Nh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Ph),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Ph(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}wu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Nh(e,Jv,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Nh(e,Jv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Nh(t,"/"==t.charAt(0)?ZD:zD,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Nh(t,KD)),n.join("")};var Jv=/[#\/\?@]/g,zD=/[#\?:]/g,ZD=/[#\?]/g,kh=/[#\?@]/g,KD=/#/g;function Jp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Sl(n){n.g||(n.g=new xh,n.h=0,n.i&&function Xb(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function eC(n,e){Sl(n),e=Kc(n,e),Rh(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Rh((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Kv(n)))}function Vs(n,e){return Sl(n),e=Kc(n,e),Rh(n.g.h,e)}function o_(n,e,t){eC(n,e),0<t.length&&(n.i=null,n.g.set(Kc(n,e),Lp(t)),n.h+=t.length)}function Kc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Xv(n){this.l=n||YD,n=Ot.PerformanceNavigationTiming?0<(n=Ot.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ot.g&&Ot.g.Ea&&Ot.g.Ea()&&Ot.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(nt=Jp.prototype).add=function(n,e){Sl(this),this.i=null,n=Kc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},nt.forEach=function(n,e){Sl(this),this.g.forEach(function(t,r){Da(t,function(i){n.call(e,i,r,this)},this)},this)},nt.T=function(){Sl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},nt.R=function(n){Sl(this);var e=[];if("string"==typeof n)Vs(this,n)&&(e=Sv(e,this.g.get(Kc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Sv(e,n[t])}return e},nt.set=function(n,e){return Sl(this),this.i=null,Vs(this,n=Kc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},nt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},nt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var l=i;""!==r[a]&&(l+="="+encodeURIComponent(String(r[a]))),n.push(l)}}return this.i=n.join("&")};var YD=10;function rC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function iC(n){return n.h?1:n.g?n.g.size:0}function e0(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function a_(n,e){n.g?n.g.add(e):n.h=e}function QD(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function t0(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Lp(n.i)}function n0(){}function JD(){this.g=new n0}function EM(n,e,t){const r=t||"";try{Sh(n,function(i,a){let l=i;vh(i)&&(l=$p(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Oh(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function Xp(n){this.l=n.$b||null,this.j=n.ib||!1}function eg(n,e){ti.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=u_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Xv.prototype.cancel=function(){if(this.i=t0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},n0.prototype.stringify=function(n){return Ot.JSON.stringify(n,void 0)},n0.prototype.parse=function(n){return Ot.JSON.parse(n,void 0)},Nr(Xp,Kb),Xp.prototype.g=function(){return new eg(this.l,this.j)},Xp.prototype.i=function(n){return function(){return n}}({}),Nr(eg,ti);var u_=0;function XD(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function es(n){n.readyState=4,n.l=null,n.j=null,n.A=null,l_(n)}function l_(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(nt=eg.prototype).open=function(n,e){if(this.readyState!=u_)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,l_(this)},nt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ot).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},nt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,es(this)),this.readyState=u_},nt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,l_(this)),this.g&&(this.readyState=3,l_(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ot.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;XD(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},nt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?es(this):l_(this),3==this.readyState&&XD(this)}},nt.Ua=function(n){this.g&&(this.response=this.responseText=n,es(this))},nt.Ta=function(n){this.g&&(this.response=n,es(this))},nt.ha=function(){this.g&&es(this)},nt.setRequestHeader=function(n,e){this.v.append(n,e)},nt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},nt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(eg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var CM=Ot.JSON.parse;function yr(n){ti.call(this),this.headers=new xh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=r0,this.K=this.L=!1}Nr(yr,ti);var r0="",sC=/^https?$/i,eA=["POST","PUT"];function oC(n){return"content-type"==n.toLowerCase()}function c_(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,aC(n),h_(n)}function aC(n){n.D||(n.D=!0,ni(n,"complete"),ni(n,"error"))}function d_(n){if(n.h&&void 0!==Iv&&(!n.C[1]||4!=Eu(n)||2!=n.ba()))if(n.v&&4==Eu(n))jv(n.Fa,0,n);else if(ni(n,"readystatechange"),4==Eu(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(r_)[1]||null;if(!i&&Ot.self&&Ot.self.location){var a=Ot.self.location.protocol;i=a.substr(0,a.length-1)}r=!sC.test(i?i.toLowerCase():"")}t=r}if(t)ni(n,"complete"),ni(n,"success");else{n.m=6;try{var l=2<Eu(n)?n.g.statusText:""}catch(_){l=""}n.j=l+" ["+n.ba()+"]",aC(n)}}finally{h_(n)}}}function h_(n,e){if(n.g){uC(n);const t=n.g,r=n.C[0]?jm:null;n.g=null,n.C=null,e||ni(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function uC(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ot.clearTimeout(n.A),n.A=null)}function Eu(n){return n.g?n.g.readyState:0}function lC(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case r0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function s0(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function tA(n){let e="";return Vp(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Vn(n,e,t))}function xl(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Yc(n){this.za=0,this.l=[],this.h=new Ch,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=xl("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=xl("baseRetryDelayMs",5e3,n),this.$a=xl("retryDelaySeedMs",1e4,n),this.Ya=xl("forwardChannelMaxRetries",2,n),this.ra=xl("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Xv(n&&n.concurrentRequestLimit),this.Ca=new JD,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function o0(n){if(cC(n),3==n.G){var e=n.V++,t=Ls(n.F);Vn(t,"SID",n.J),Vn(t,"RID",e),Vn(t,"TYPE","terminate"),Pr(n,t),(e=new Dl(n,n.h,e,void 0)).K=2,e.v=s_(Ls(t)),t=!1,Ot.navigator&&Ot.navigator.sendBeacon&&(t=Ot.navigator.sendBeacon(e.v.toString(),"")),!t&&Ot.Image&&((new Image).src=e.v,t=!0),t||(e.g=nd(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Zp(e)}ed(n)}function Rl(n){n.g&&(ng(n),n.g.cancel(),n.g=null)}function cC(n){Rl(n),n.u&&(Ot.clearTimeout(n.u),n.u=null),bu(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ot.clearTimeout(n.m),n.m=null)}function a0(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Fh(n)}function Fh(n){rC(n.i)||n.m||(n.m=!0,jb(n.Ha,n),n.C=0)}function Lh(n,e){var t;t=e?e.m:n.V++;const r=Ls(n.F);Vn(r,"SID",n.J),Vn(r,"RID",t),Vn(r,"AID",n.U),Pr(n,r),n.o&&n.s&&s0(r,n.o,n.s),t=new Dl(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Ml(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),a_(n.i,t),e_(t,r,e)}function Pr(n,e){n.j&&Sh({},function(t,r){Vn(e,r,t)})}function Ml(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Jr(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let p=!0;for(let _=0;_<t;_++){let E=i[_].h;const D=i[_].g;if(E-=a,0>E)a=Math.max(0,i[_].h-100),p=!1;else try{EM(D,l,"req"+E+"_")}catch(S){r&&r(D)}}if(p){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function tg(n){n.g||n.u||(n.Y=1,jb(n.Ga,n),n.A=0)}function fs(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Zc(Jr(n.Ga,n),Xc(n,n.A)),n.A++,0))}function ng(n){null!=n.B&&(Ot.clearTimeout(n.B),n.B=null)}function Qc(n){n.g=new Dl(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Ls(n.oa);Vn(e,"RID","rpc"),Vn(e,"SID",n.J),Vn(e,"CI",n.N?"0":"1"),Vn(e,"AID",n.U),Pr(n,e),Vn(e,"TYPE","xmlhttp"),n.o&&n.s&&s0(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=s_(Ls(e)),t.s=null,t.U=!0,Qb(t,n)}function bu(n){null!=n.v&&(Ot.clearTimeout(n.v),n.v=null)}function Jc(n,e){var t=null;if(n.g==e){bu(n),ng(n),n.g=null;var r=2}else{if(!e0(n.i,e))return;t=e.D,QD(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ni(r=Ym(),new qo(r,t,e,i)),Fh(n)}else tg(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function Sa(n,e){return!(iC(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Zc(Jr(n.Ha,n,e),Xc(n,n.C)),n.C++,0)))}(n,e)||2==r&&fs(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:fo(n,5);break;case 4:fo(n,10);break;case 3:fo(n,6);break;default:fo(n,2)}}function Xc(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function fo(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Jr(n.jb,n);t||(t=new wu("//www.google.com/images/cleardot.gif"),Ot.location&&"http"==Ot.location.protocol||i_(t,"https"),s_(t)),function bM(n,e){const t=new Ch;if(Ot.Image){const r=new Image;r.onload=Fp(Oh,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Fp(Oh,t,r,"TestLoadImage: error",!1,e),r.onabort=Fp(Oh,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Fp(Oh,t,r,"TestLoadImage: timeout",!1,e),Ot.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Xi(2);n.G=0,n.j&&n.j.va(e),ed(n),cC(n)}function ed(n){n.G=0,n.I=-1,n.j&&((0!=t0(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Lp(n.l),n.l.length=0),n.j.ua())}function td(n,e,t){let r=function Qv(n){return n instanceof wu?Ls(n):new wu(n,void 0)}(t);if(""!=r.i)e&&Mh(r,e+"."+r.i),Yp(r,r.m);else{const i=Ot.location;r=function WD(n,e,t,r){var i=new wu(null,void 0);return n&&i_(i,n),e&&Mh(i,e),t&&Yp(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Vp(n.aa,function(i,a){Vn(r,a,i)}),t=n.sa,(e=n.D)&&t&&Vn(r,e,t),Vn(r,"VER",n.ma),Pr(n,r),r}function nd(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new yr(t&&n.Ba&&!n.qa?new Xp({ib:!0}):n.qa)).L=n.H,e}function rd(){}function rg(){if(Up&&!(10<=Number(_M)))throw Error("Environmental error: no available transport.")}function ps(n,e){ti.call(this),this.g=new Yc(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!xv(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xv(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new id(this)}function u0(n){Wv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function l0(){Wp.call(this),this.status=1}function id(n){this.g=n}(nt=yr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():zv.g(),this.C=function qv(n){return n.h||(n.h=n.i())}(this.u?this.u:zv),this.g.onreadystatechange=Jr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void c_(this,a)}n=t||"";const i=new xh(this.headers);r&&Sh(r,function(a,l){i.set(l,a)}),r=function Av(n){e:{var e=oC;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Ot.FormData&&n instanceof Ot.FormData,!(0<=Hm(eA,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,l){this.g.setRequestHeader(l,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{uC(this),0<this.B&&((this.K=function IM(n){return Up&&function mM(){return function VD(n){var e=gM;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Rv(String(Eh)).split("."),t=Rv("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=wh(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||wh(0==i[2].length,0==a[2].length)||wh(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jr(this.pa,this)):this.A=jv(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){c_(this,a)}},nt.pa=function(){void 0!==Iv&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ni(this,"timeout"),this.abort(8))},nt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ni(this,"complete"),ni(this,"abort"),h_(this))},nt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),h_(this,!0)),yr.Z.M.call(this)},nt.Fa=function(){this.s||(this.F||this.v||this.l?d_(this):this.cb())},nt.cb=function(){d_(this)},nt.ba=function(){try{return 2<Eu(this)?this.g.status:-1}catch(n){return-1}},nt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},nt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),CM(e)}},nt.Da=function(){return this.m},nt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(nt=Yc.prototype).ma=8,nt.G=1,nt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},nt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Dl(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=LD(a),Ib(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ml(this,i,e),Vn(t=Ls(this.F),"RID",n),Vn(t,"CVER",22),this.D&&Vn(t,"X-HTTP-Session-Id",this.D),Pr(this,t),this.o&&a&&s0(t,this.o,a),a_(this.i,i),this.Ra&&Vn(t,"TYPE","init"),this.ja?(Vn(t,"$req",e),Vn(t,"SID","null"),i.$=!0,e_(i,t,null)):e_(i,t,e),this.G=2}}else 3==this.G&&(n?Lh(this,n):0==this.l.length||rC(this.i)||Lh(this))},nt.Ga=function(){if(this.u=null,Qc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Zc(Jr(this.bb,this),n)}},nt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Xi(10),Rl(this),Qc(this))},nt.ab=function(){null!=this.v&&(this.v=null,Rl(this),fs(this),Xi(19))},nt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Xi(2)):(this.h.info("Failed to ping google.com"),Xi(1))},(nt=rd.prototype).xa=function(){},nt.wa=function(){},nt.va=function(){},nt.ua=function(){},nt.Oa=function(){},rg.prototype.g=function(n,e){return new ps(n,e)},Nr(ps,ti),ps.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),jb(Jr(n.hb,n,e))),Xi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=td(n,null,n.W),Fh(n)},ps.prototype.close=function(){o0(this.g)},ps.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,a0(this.g,e)}else this.v?((e={}).__data__=$p(n),a0(this.g,e)):a0(this.g,n)},ps.prototype.M=function(){this.g.j=null,delete this.j,o0(this.g),delete this.g,ps.Z.M.call(this)},Nr(u0,Wv),Nr(l0,Wp),Nr(id,rd),id.prototype.xa=function(){ni(this.g,"a")},id.prototype.wa=function(n){ni(this.g,new u0(n))},id.prototype.va=function(n){ni(this.g,new l0(n))},id.prototype.ua=function(){ni(this.g,"b")},rg.prototype.createWebChannel=rg.prototype.g,ps.prototype.send=ps.prototype.u,ps.prototype.open=ps.prototype.m,ps.prototype.close=ps.prototype.close,Qm.NO_ERROR=0,Qm.TIMEOUT=8,Qm.HTTP_ERROR=6,Zb.COMPLETE="complete",Yb.EventType=qp,qp.OPEN="a",qp.CLOSE="b",qp.ERROR="c",qp.MESSAGE="d",ti.prototype.listen=ti.prototype.N,yr.prototype.listenOnce=yr.prototype.O,yr.prototype.getLastError=yr.prototype.La,yr.prototype.getLastErrorCode=yr.prototype.Da,yr.prototype.getStatus=yr.prototype.ba,yr.prototype.getResponseJson=yr.prototype.Qa,yr.prototype.getResponseText=yr.prototype.ga,yr.prototype.send=yr.prototype.ea;var dC=yu.createWebChannelTransport=function(){return new rg},hC=yu.getStatEventTarget=function(){return Ym()},f_=yu.ErrorCode=Qm,fC=yu.EventType=Zb,nA=yu.Event=zc,c0=yu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},rA=yu.FetchXmlHttpFactory=Xp,ig=yu.WebChannel=Yb,pC=yu.XhrIo=yr;const gC="@firebase/firestore";class gi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gi.UNAUTHENTICATED=new gi(null),gi.GOOGLE_CREDENTIALS=new gi("google-credentials-uid"),gi.FIRST_PARTY=new gi("first-party-uid"),gi.MOCK_USER=new gi("mock-user");let sd="9.6.10";const Nl=new $o.Yd("@firebase/firestore");function p_(){return Nl.logLevel}function ke(n,...e){if(Nl.logLevel<=$o.in.DEBUG){const t=e.map(og);Nl.debug(`Firestore (${sd}): ${n}`,...t)}}function $r(n,...e){if(Nl.logLevel<=$o.in.ERROR){const t=e.map(og);Nl.error(`Firestore (${sd}): ${n}`,...t)}}function sg(n,...e){if(Nl.logLevel<=$o.in.WARN){const t=e.map(og);Nl.warn(`Firestore (${sd}): ${n}`,...t)}}function og(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${sd}) INTERNAL ASSERTION FAILED: `+n;throw $r(e),new Error(e)}function Rt(n,e){n||it()}function Ke(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class sA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(gi.UNAUTHENTICATED))}shutdown(){}}class Vh{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class aA{constructor(e){this.t=e,this.currentUser=gi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=E=>this.i!==i?(i=this.i,t(E)):Promise.resolve();let l=new Gr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Gr,e.enqueueRetryable(()=>a(this.currentUser))};const p=()=>{const E=l;e.enqueueRetryable((0,ge.Z)(function*(){yield E.promise,yield a(r.currentUser)}))},_=E=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(E=>_(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?_(E):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Gr)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rt("string"==typeof r.accessToken),new sA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Rt(null===e||"string"==typeof e),new gi(e)}}class mC{constructor(e,t,r){this.type="FirstParty",this.user=gi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class uA{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new mC(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(gi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class d0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class g_{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.p;return this.p=a.token,ke("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Rt("string"==typeof t.token),this.p=t.token,new d0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class gs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function lA(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}gs.A=-1;class _C{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=lA(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Wt(n,e){return n<e?-1:n>e?1:0}function Uh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function yC(n){return n+"\0"}class ar{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ar.fromMillis(Date.now())}static fromDate(e){return ar.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ar(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wt(this.nanoseconds,e.nanoseconds):Wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ct{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new ar(0,0))}static max(){return new Ct(new ar(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function h0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Pl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function m_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class __{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===__.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof __?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Xt extends __{construct(e,t,r){return new Xt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Xt(t)}static emptyPath(){return new Xt([])}}const cA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mi extends __{construct(e,t,r){return new mi(e,t,r)}static isValidIdentifier(e){return cA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new mi(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new xe(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new xe(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new xe(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===p?(l=!l,i++):"."!==p||l?(r+=p,i++):(a(),i++)}if(a(),l)throw new xe(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mi(t)}static emptyPath(){return new mi([])}}class xa{constructor(e){this.fields=e,e.sort(mi.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Uh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class vr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new vr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new vr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vr.EMPTY_BYTE_STRING=new vr("");const f0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kl(n){if(Rt(!!n),"string"==typeof n){let e=0;const t=f0.exec(n);if(Rt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Zn(n.seconds),nanos:Zn(n.nanos)}}function Zn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Cu(n){return"string"==typeof n?vr.fromBase64String(n):vr.fromUint8Array(n)}function y_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function dA(n){const e=n.mapValue.fields.__previous_value__;return y_(e)?dA(e):e}function ag(n){const e=kl(n.mapValue.fields.__local_write_time__.timestampValue);return new ar(e.seconds,e.nanos)}class p0{constructor(e,t,r,i,a,l,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=p,this.useFetchStreams=_}}class Wo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Wo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Wo&&e.projectId===this.projectId&&e.database===this.database}}function od(n){return null==n}function Bh(n){return 0===n&&1/n==-1/0}function v_(n){return"number"==typeof n&&Number.isInteger(n)&&!Bh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Be{constructor(e){this.path=e}static fromPath(e){return new Be(Xt.fromString(e))}static fromName(e){return new Be(Xt.fromString(e).popFirst(5))}static empty(){return new Be(Xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Xt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new Xt(e.slice()))}}const g0={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},w_={nullValue:"NULL_VALUE"};function Ol(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?y_(n)?4:v0(n)?9:10:it()}function Ra(n,e){if(n===e)return!0;const t=Ol(n);if(t!==Ol(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ag(n).isEqual(ag(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=kl(r.timestampValue),l=kl(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Cu(n.bytesValue).isEqual(Cu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Zn(r.geoPointValue.latitude)===Zn(i.geoPointValue.latitude)&&Zn(r.geoPointValue.longitude)===Zn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Zn(r.integerValue)===Zn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Zn(r.doubleValue),l=Zn(i.doubleValue);return a===l?Bh(a)===Bh(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Uh(n.arrayValue.values||[],e.arrayValue.values||[],Ra);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(h0(a)!==h0(l))return!1;for(const p in a)if(a.hasOwnProperty(p)&&(void 0===l[p]||!Ra(a[p],l[p])))return!1;return!0}(n,e);default:return it()}var i}function jh(n,e){return void 0!==(n.values||[]).find(t=>Ra(t,e))}function Iu(n,e){if(n===e)return 0;const t=Ol(n),r=Ol(e);if(t!==r)return Wt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Wt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Zn(i.integerValue||i.doubleValue),p=Zn(a.integerValue||a.doubleValue);return l<p?-1:l>p?1:l===p?0:isNaN(l)?isNaN(p)?0:-1:1}(n,e);case 3:return E_(n.timestampValue,e.timestampValue);case 4:return E_(ag(n),ag(e));case 5:return Wt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=Cu(i),p=Cu(a);return l.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),p=a.split("/");for(let _=0;_<l.length&&_<p.length;_++){const E=Wt(l[_],p[_]);if(0!==E)return E}return Wt(l.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Wt(Zn(i.latitude),Zn(a.latitude));return 0!==l?l:Wt(Zn(i.longitude),Zn(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],p=a.values||[];for(let _=0;_<l.length&&_<p.length;++_){const E=Iu(l[_],p[_]);if(E)return E}return Wt(l.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const l=i.fields||{},p=Object.keys(l),_=a.fields||{},E=Object.keys(_);p.sort(),E.sort();for(let D=0;D<p.length&&D<E.length;++D){const S=Wt(p[D],E[D]);if(0!==S)return S;const P=Iu(l[p[D]],_[E[D]]);if(0!==P)return P}return Wt(p.length,E.length)}(n.mapValue,e.mapValue);default:throw it()}}function E_(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Wt(n,e);const t=kl(n),r=kl(e),i=Wt(t.seconds,r.seconds);return 0!==i?i:Wt(t.nanos,r.nanos)}function ad(n){return m0(n)}function m0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=kl(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Cu(n.bytesValue).toBase64():"referenceValue"in n?Be.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=m0(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const p of i)l?l=!1:a+=",",a+=`${p}:${m0(r.fields[p])}`;return a+"}"}(n.mapValue):it();var e}function Hh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function _0(n){return!!n&&"integerValue"in n}function $h(n){return!!n&&"arrayValue"in n}function ug(n){return!!n&&"nullValue"in n}function y0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function lg(n){return!!n&&"mapValue"in n}function Gh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Pl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Gh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function v0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function w0(n,e){return void 0===n?e:void 0===e||Iu(n,e)>0?n:e}function E0(n,e){return void 0===n?e:void 0===e||Iu(n,e)<0?n:e}class _i{constructor(e){this.value=e}static empty(){return new _i({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!lg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gh(t)}setAll(e){let t=mi.emptyPath(),r={},i=[];e.forEach((l,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=p.popLast()}l?r[p.lastSegment()]=Gh(l):i.push(p.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());lg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ra(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];lg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Pl(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new _i(Gh(this.value))}}function b0(n){const e=[];return Pl(n.fields,(t,r)=>{const i=new mi([t]);if(lg(r)){const a=b0(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new xa(e)}class Kn{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Kn(e,0,Ct.min(),Ct.min(),_i.empty(),0)}static newFoundDocument(e,t,r){return new Kn(e,1,t,Ct.min(),r,0)}static newNoDocument(e,t){return new Kn(e,2,t,Ct.min(),_i.empty(),0)}static newUnknownDocument(e,t){return new Kn(e,3,t,Ct.min(),_i.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_i.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_i.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class b_{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function C0(n){return n.fields.find(e=>2===e.kind)}function ud(n){return n.fields.filter(e=>2!==e.kind)}b_.UNKNOWN_ID=-1;class C_{constructor(e,t){this.fieldPath=e,this.kind=t}}class ir{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ir(0,Tu.min())}}function I0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ct.fromTimestamp(1e9===r?new ar(t+1,0):new ar(t,r));return new Tu(i,Be.empty(),e)}function hA(n){return new Tu(n.readTime,n.key,-1)}class Tu{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Tu(Ct.min(),Be.empty(),-1)}static max(){return new Tu(Ct.max(),Be.empty(),-1)}}function wC(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Be.comparator(n.documentKey,e.documentKey),0!==t?t:Wt(n.largestBatchId,e.largestBatchId))}class fA{constructor(e,t=null,r=[],i=[],a=null,l=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=p,this.P=null}}function T0(n,e=null,t=[],r=[],i=null,a=null,l=null){return new fA(n,e,t,r,i,a,l)}function Fl(n){const e=Ke(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+ad(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),od(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ad(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ad(r)).join(",")),e.P=t}return e.P}function cg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!CC(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Ra(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!IC(n.startAt,e.startAt)&&IC(n.endAt,e.endAt)}function I_(n){return Be.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function dg(n,e){return n.filters.filter(t=>t instanceof yi&&t.field.isEqual(e))}class yi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new EC(e,t,r):"array-contains"===t?new Ma(e,r):"in"===t?new pA(e,r):"not-in"===t?new gA(e,r):"array-contains-any"===t?new Na(e,r):new yi(e,t,r)}static V(e,t,r){return"in"===t?new AM(e,r):new bC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Iu(t,this.value)):null!==t&&Ol(this.value)===Ol(t)&&this.v(Iu(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class EC extends yi{constructor(e,t,r){super(e,t,r),this.key=Be.fromName(r.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.v(t)}}class AM extends yi{constructor(e,t){super(e,"in",t),this.keys=T_(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class bC extends yi{constructor(e,t){super(e,"not-in",t),this.keys=T_(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function T_(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Be.fromName(r.referenceValue))}class Ma extends yi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $h(t)&&jh(t.arrayValue,this.value)}}class pA extends yi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&jh(this.value.arrayValue,t)}}class gA extends yi{constructor(e,t){super(e,"not-in",t)}matches(e){if(jh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!jh(this.value.arrayValue,t)}}class Na extends yi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$h(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>jh(this.value.arrayValue,r))}}class ri{constructor(e,t){this.position=e,this.inclusive=t}}class Mi{constructor(e,t="asc"){this.field=e,this.dir=t}}function CC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function D0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Be.comparator(Be.fromName(l.referenceValue),t.key):Iu(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function IC(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ra(n.position[t],e.position[t]))return!1;return!0}class Du{constructor(e,t=null,r=[],i=[],a=null,l="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=p,this.endAt=_,this.D=null,this.C=null}}function TC(n,e,t,r,i,a,l,p){return new Du(n,e,t,r,i,a,l,p)}function Wh(n){return new Du(n)}function zh(n){return!od(n.limit)&&"F"===n.limitType}function Ll(n){return!od(n.limit)&&"L"===n.limitType}function A0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function D_(n){for(const e of n.filters)if(e.S())return e.field;return null}function S0(n){return null!==n.collectionGroup}function ld(n){const e=Ke(n);if(null===e.D){e.D=[];const t=D_(e),r=A0(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Mi(t)),e.D.push(new Mi(mi.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Mi(mi.keyField(),a))}}}return e.D}function Us(n){const e=Ke(n);if(!e.C)if("F"===e.limitType)e.C=T0(e.path,e.collectionGroup,ld(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of ld(e))t.push(new Mi(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new ri(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new ri(e.startAt.position,!e.startAt.inclusive):null;e.C=T0(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function hg(n,e,t){return new Du(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function fg(n,e){return cg(Us(n),Us(e))&&n.limitType===e.limitType}function x0(n){return`${Fl(Us(n))}|lt:${n.limitType}`}function A_(n){return`Query(target=${function qh(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${ad(r.value)}`;var r}).join(", ")}]`),od(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>ad(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>ad(t)).join(",")),`Target(${e})`}(Us(n))}; limitType=${n.limitType})`}function pg(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Be.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const p=D0(i,a,l);return i.inclusive?p<=0:p<0}(t.startAt,ld(t),r)||t.endAt&&!function(i,a,l){const p=D0(i,a,l);return i.inclusive?p>=0:p>0}(t.endAt,ld(t),r)));var t,r}function gg(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function R0(n){return(e,t)=>{let r=!1;for(const i of ld(n)){const a=DC(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function DC(n,e,t){const r=n.field.isKeyField()?Be.comparator(e.key,t.key):function(i,a,l){const p=a.data.field(i),_=l.data.field(i);return null!==p&&null!==_?Iu(p,_):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}function M0(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bh(e)?"-0":e}}function N0(n){return{integerValue:""+n}}function P0(n,e){return v_(e)?N0(e):M0(n,e)}class mg{constructor(){this._=void 0}}function AC(n,e,t){return n instanceof Zh?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof cd?RC(n,e):n instanceof dd?MC(n,e):function(r,i){const a=xC(r,i),l=NC(a)+NC(r.k);return _0(a)&&_0(r.k)?N0(l):M0(r.M,l)}(n,e)}function SC(n,e,t){return n instanceof cd?RC(n,e):n instanceof dd?MC(n,e):t}function xC(n,e){return n instanceof Kh?_0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Zh extends mg{}class cd extends mg{constructor(e){super(),this.elements=e}}function RC(n,e){const t=PC(e);for(const r of n.elements)t.some(i=>Ra(i,r))||t.push(r);return{arrayValue:{values:t}}}class dd extends mg{constructor(e){super(),this.elements=e}}function MC(n,e){let t=PC(e);for(const r of n.elements)t=t.filter(i=>!Ra(i,r));return{arrayValue:{values:t}}}class Kh extends mg{constructor(e,t){super(),this.M=e,this.k=t}}function NC(n){return Zn(n.integerValue||n.doubleValue)}function PC(n){return $h(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class _g{constructor(e,t){this.field=e,this.transform=t}}class _A{constructor(e,t){this.version=e,this.transformResults=t}}class kr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kr}static exists(e){return new kr(void 0,e)}static updateTime(e){return new kr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function S_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class x_{}function yA(n,e,t){n instanceof Yh?function(r,i,a){const l=r.value.clone(),p=V0(r.fieldTransforms,i,a.transformResults);l.setAll(p),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Vl?function(r,i,a){if(!S_(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=V0(r.fieldTransforms,i,a.transformResults),p=i.data;p.setAll(L0(r)),p.setAll(l),i.convertToFoundDocument(a.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function k0(n,e,t){var i;n instanceof Yh?function(r,i,a){if(!S_(r.precondition,i))return;const l=r.value.clone(),p=U0(r.fieldTransforms,a,i);l.setAll(p),i.convertToFoundDocument(F0(i),l).setHasLocalMutations()}(n,e,t):n instanceof Vl?function(r,i,a){if(!S_(r.precondition,i))return;const l=U0(r.fieldTransforms,a,i),p=i.data;p.setAll(L0(r)),p.setAll(l),i.convertToFoundDocument(F0(i),p).setHasLocalMutations()}(n,e,t):S_(n.precondition,i=e)&&i.convertToNoDocument(Ct.min())}function vA(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=xC(r.transform,i||null);null!=a&&(null==t&&(t=_i.empty()),t.set(r.field,a))}return t||null}function O0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Uh(t,r,(i,a)=>function mA(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof cd&&r instanceof cd||t instanceof dd&&r instanceof dd?Uh(t.elements,r.elements,Ra):t instanceof Kh&&r instanceof Kh?Ra(t.k,r.k):t instanceof Zh&&r instanceof Zh);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function F0(n){return n.isFoundDocument()?n.version:Ct.min()}class Yh extends x_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Vl extends x_{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function L0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function V0(n,e,t){const r=new Map;Rt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,p=e.data.field(a.field);r.set(a.field,SC(l,p,t[i]))}return r}function U0(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,AC(a,l,e))}return r}class Qh extends x_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class R_ extends x_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class kC{constructor(e){this.count=e}}var wr,qt;function OC(n){switch(n){default:return it();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function FC(n){if(void 0===n)return $r("GRPC error has no .code"),ae.UNKNOWN;switch(n){case wr.OK:return ae.OK;case wr.CANCELLED:return ae.CANCELLED;case wr.UNKNOWN:return ae.UNKNOWN;case wr.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case wr.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case wr.INTERNAL:return ae.INTERNAL;case wr.UNAVAILABLE:return ae.UNAVAILABLE;case wr.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case wr.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case wr.NOT_FOUND:return ae.NOT_FOUND;case wr.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case wr.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case wr.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case wr.ABORTED:return ae.ABORTED;case wr.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case wr.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case wr.DATA_LOSS:return ae.DATA_LOSS;default:return it()}}(qt=wr||(wr={}))[qt.OK=0]="OK",qt[qt.CANCELLED=1]="CANCELLED",qt[qt.UNKNOWN=2]="UNKNOWN",qt[qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qt[qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qt[qt.NOT_FOUND=5]="NOT_FOUND",qt[qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",qt[qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",qt[qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",qt[qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qt[qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qt[qt.ABORTED=10]="ABORTED",qt[qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",qt[qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",qt[qt.INTERNAL=13]="INTERNAL",qt[qt.UNAVAILABLE=14]="UNAVAILABLE",qt[qt.DATA_LOSS=15]="DATA_LOSS";class Bs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Pl(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return m_(this.inner)}size(){return this.innerSize}}class Or{constructor(e,t){this.comparator=e,this.root=t||Ni.EMPTY}insert(e,t){return new Or(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ni.BLACK,null,null))}remove(e){return new Or(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ni.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jh(this.root,e,this.comparator,!0)}}class Jh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ni{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:Ni.RED,this.left=null!=i?i:Ni.EMPTY,this.right=null!=a?a:Ni.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Ni(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ni.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ni.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ni.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ni.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}Ni.EMPTY=null,Ni.RED=!0,Ni.BLACK=!1,Ni.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ni(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Fn{constructor(e){this.comparator=e,this.data=new Or(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new B0(this.data.getIterator())}getIteratorFrom(e){return new B0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Fn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Fn(this.comparator);return t.data=e,t}}class B0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function yg(n){return n.hasNext()?n.getNext():void 0}const wt=new Or(Be.comparator);function po(){return wt}const wA=new Or(Be.comparator);function j0(){return wA}function Ul(){return new Bs(n=>n.toString(),(n,e)=>n.isEqual(e))}const EA=new Or(Be.comparator),M_=new Fn(Be.comparator);function fn(...n){let e=M_;for(const t of n)e=e.add(t);return e}const ur=new Fn(Wt);function H0(){return ur}class Xh{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,vg.createSynthesizedTargetChangeForCurrentChange(e,t)),new Xh(Ct.min(),r,H0(),po(),fn())}}class vg{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new vg(vr.EMPTY_BYTE_STRING,t,fn(),fn(),fn())}}class N_{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class $0{constructor(e,t){this.targetId=e,this.$=t}}class G0{constructor(e,t,r=vr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class q0{constructor(){this.B=0,this.L=UC(),this.U=vr.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=fn(),t=fn(),r=fn();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:it()}}),new vg(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=UC()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class LC{constructor(e){this.nt=e,this.st=new Map,this.it=po(),this.rt=VC(),this.ot=new Fn(Wt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const a=i.target;if(I_(a))if(0===r){const l=new Be(a.path);this.ct(t,l,Kn.newNoDocument(l,Ct.min()))}else Rt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,l)=>{const p=this.wt(l);if(p){if(a.current&&I_(p.target)){const _=new Be(p.target.path);null!==this.it.get(_)||this.It(l,_)||this.ct(l,_,Kn.newNoDocument(_,e))}a.j&&(t.set(l,a.H()),a.J())}});let r=fn();this.rt.forEach((a,l)=>{let p=!0;l.forEachWhile(_=>{const E=this.wt(_);return!E||2===E.purpose||(p=!1,!1)}),p&&(r=r.add(a))}),this.it.forEach((a,l)=>l.setReadTime(e));const i=new Xh(e,t,this.ot,this.it,r);return this.it=po(),this.rt=VC(),this.ot=new Fn(Wt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new q0,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Fn(Wt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new q0),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function VC(){return new Or(Be.comparator)}function UC(){return new Or(Be.comparator)}const bA={asc:"ASCENDING",desc:"DESCENDING"},wg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class CA{constructor(e,t){this.databaseId=e,this.N=t}}function Eg(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BC(n,e){return n.N?e.toBase64():e.toUint8Array()}function P_(n,e){return Eg(n,e.toTimestamp())}function qr(n){return Rt(!!n),Ct.fromTimestamp(function(e){const t=kl(e);return new ar(t.seconds,t.nanos)}(n))}function k_(n,e){return(t=n,new Xt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function W0(n){const e=Xt.fromString(n);return Rt(GC(e)),e}function bg(n,e){return k_(n.databaseId,e.path)}function ms(n,e){const t=W0(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Be(HC(t))}function hd(n,e){return k_(n.databaseId,e)}function jC(n){const e=W0(n);return 4===e.length?Xt.emptyPath():HC(e)}function Cg(n){return new Xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function HC(n){return Rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function z0(n,e,t){return{name:bg(n,e),fields:t.value.mapValue.fields}}function Z0(n,e,t){const r=ms(n,e.name),i=qr(e.updateTime),a=new _i({mapValue:{fields:e.fields}}),l=Kn.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function ef(n,e){let t;if(e instanceof Yh)t={update:z0(n,e.key,e.value)};else if(e instanceof Qh)t={delete:bg(n,e.key)};else if(e instanceof Vl)t={update:z0(n,e.key,e.data),updateMask:MA(e.fieldMask)};else{if(!(e instanceof R_))return it();t={verify:bg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Zh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof cd)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof dd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Kh)return{fieldPath:a.field.canonicalString(),increment:l.k};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:P_(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:it()),t;var i}function K0(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?kr.updateTime(qr(i.updateTime)):void 0!==i.exists?kr.exists(i.exists):kr.none():kr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let p=null;"setToServerValue"in l?(Rt("REQUEST_TIME"===l.setToServerValue),p=new Zh):"appendMissingElements"in l?p=new cd(l.appendMissingElements.values||[]):"removeAllFromArray"in l?p=new dd(l.removeAllFromArray.values||[]):"increment"in l?p=new Kh(a,l.increment):it();const _=mi.fromServerFormat(l.fieldPath);return new _g(_,p)}(n,i)):[];var i;if(e.update){const i=ms(n,e.update.name),a=new _i({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new xa((e.updateMask.fieldPaths||[]).map(E=>mi.fromServerFormat(E)));return new Vl(i,a,l,t,r)}return new Yh(i,a,t,r)}if(e.delete){const i=ms(n,e.delete);return new Qh(i,t)}if(e.verify){const i=ms(n,e.verify);return new R_(i,t)}return it()}function DA(n,e){return{documents:[hd(n,e.path)]}}function AA(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=hd(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=hd(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const E=_.map(D=>function(S){if("=="===S.op){if(y0(S.value))return{unaryFilter:{field:tf(S.field),op:"IS_NAN"}};if(ug(S.value))return{unaryFilter:{field:tf(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(y0(S.value))return{unaryFilter:{field:tf(S.field),op:"IS_NOT_NAN"}};if(ug(S.value))return{unaryFilter:{field:tf(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tf(S.field),op:xA(S.op),value:S.value}}}(D));return 1===E.length?E[0]:{compositeFilter:{op:"AND",filters:E}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(E=>{return{field:tf((D=E).field),direction:O_(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(E=e.limit,n.N||od(E)?E:{value:E});var E,p,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function SA(n){let e=jC(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Rt(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=Y0(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new Mi(fd((S=D).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let p=null;t.limit&&(p=function(D){let S;return S="object"==typeof D?D.value:D,od(S)?null:S}(t.limit));let _=null;var D;t.startAt&&(_=new ri((D=t.startAt).values||[],!!D.before));let E=null;return t.endAt&&(E=function(D){return new ri(D.values||[],!D.before)}(t.endAt)),TC(e,i,l,a,p,"F",_,E)}function Y0(n){return n?void 0!==n.unaryFilter?[RA(n)]:void 0!==n.fieldFilter?[Ig(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Y0(e)).reduce((e,t)=>e.concat(t)):it():[]}function O_(n){return bA[n]}function xA(n){return wg[n]}function tf(n){return{fieldPath:n.canonicalString()}}function fd(n){return mi.fromServerFormat(n.fieldPath)}function Ig(n){return yi.create(fd(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(n.fieldFilter.op),n.fieldFilter.value)}function RA(n){switch(n.unaryFilter.op){case"IS_NAN":const e=fd(n.unaryFilter.field);return yi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=fd(n.unaryFilter.field);return yi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=fd(n.unaryFilter.field);return yi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=fd(n.unaryFilter.field);return yi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return it()}}function MA(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function GC(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ii(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Q0(e)),e=NA(n.get(t),e);return Q0(e)}function NA(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function Q0(n){return n+"\x01\x01"}function zo(n){const e=n.length;if(Rt(e>=2),2===e)return Rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Xt.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&it(),n.charAt(l+1)){case"\x01":const p=n.substring(a,l);let _;0===i.length?_=p:(i+=p,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:it()}a=l+2}return new Xt(r)}const qC=["userId","batchId"];function Au(n,e){return[n,ii(e)]}function WC(n,e,t){return[n,ii(e),t]}const zC={},PA=["prefixPath","collectionGroup","readTime","documentId"],ZC=["prefixPath","collectionGroup","documentId"],kA=["collectionGroup","readTime","prefixPath","documentId"],KC=["canonicalId","targetId"],OA=["targetId","path"],J0=["path","targetId"],FA=["collectionId","parent"],YC=["indexId","uid"],QC=["uid","sequenceNumber"],LA=["indexId","uid","arrayValue","directionalValue","documentKey"],VA=["indexId","uid","documentKey"],UA=["userId","collectionPath","documentId"],X0=["userId","collectionPath","largestBatchId"],BA=["userId","collectionGroup","largestBatchId"],ew=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],jA=[...ew,"documentOverlays"],JC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],HA=[...JC,"indexConfiguration","indexState","indexEntries"],XC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.reject(t)}static resolve(e){return new fe((t,r)=>{t(e)})}static reject(e){return new fe((t,r)=>{r(e)})}static waitFor(e){return new fe((t,r)=>{let i=0,a=0,l=!1;e.forEach(p=>{++i,p.next(()=>{++a,l&&a===i&&t()},_=>r(_))}),l=!0,a===i&&t()})}static or(e){let t=fe.resolve(!1);for(const r of e)t=t.next(i=>i?fe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class F_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Gr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new nf(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=tw(r.target.error);this.At.reject(new nf(e,i))}}static open(e,t,r,i){try{return new F_(t,e.transaction(i,r))}catch(a){throw new nf(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new $A(t)}}class Zo{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Zo.Vt((0,k.z$)())&&$r("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),Bl(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,k.hl)())return!1;if(Zo.St())return!0;const e=(0,k.z$)(),t=Zo.Vt(e),r=0<t&&t<10,i=Zo.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ge.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new nf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const p=l.target.error;i("VersionError"===p.name?new xe(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new xe(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new nf(e,p))},a.onupgradeneeded=l=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.Pt.kt(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ge.Z)(function*(){const l="readonly"===t;let p=0;for(;;){++p;try{a.db=yield a.Nt(e);const _=F_.open(a.db,e,l?"readonly":"readwrite",r),E=i(_).next(D=>(_.bt(),D)).catch(D=>(_.abort(D),fe.reject(D))).toPromise();return E.catch(()=>{}),yield _.Rt,E}catch(_){const E="FirebaseError"!==_.name&&p<3;if(ke("SimpleDb","Transaction failed with error:",_.message,"Retrying:",E),a.close(),!E)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class tI{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Bl(this.Ft.delete())}}class nf extends xe{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function pd(n){return"IndexedDbTransactionError"===n.name}class $A{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Bl(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),Bl(this.store.add(e))}get(e){return Bl(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),Bl(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),Bl(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Gt(i,(l,p)=>{a.push(p)}).next(()=>a)}{const i=this.store.getAll(r.range);return new fe((a,l)=>{i.onerror=p=>{l(p.target.error)},i.onsuccess=p=>{a(p.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new fe((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Qt(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Gt(i,(a,l,p)=>p.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Gt(i,t)}zt(e){const t=this.cursor({});return new fe((r,i)=>{t.onerror=a=>{const l=tw(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(p=>{p?l.continue():r()}):r()}})}Gt(e,t){const r=[];return new fe((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const p=l.target.result;if(!p)return void i();const _=new tI(p),E=t(p.primaryKey,p.value,_);if(E instanceof fe){const D=E.catch(S=>(_.done(),fe.reject(S)));r.push(D)}_.isDone?i():null===_.Lt?p.continue():p.continue(_.Lt)}}).next(()=>fe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Bl(n){return new fe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=tw(r.target.error);t(i)}})}let nI=!1;function tw(n){const e=Zo.Vt((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return nI||(nI=!0,setTimeout(()=>{throw r},0)),r}}return n}class rI extends eI{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Fr(n,e){const t=Ke(n);return Zo.xt(t.Ht,e)}class Tg{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&yA(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&k0(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&k0(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Ct.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),fn())}isEqual(e){return this.batchId===e.batchId&&Uh(this.mutations,e.mutations,(t,r)=>O0(t,r))&&Uh(this.baseMutations,e.baseMutations,(t,r)=>O0(t,r))}}class L_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Rt(e.mutations.length===r.length);let i=EA;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new L_(e,t,r,i)}}class Dg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class jl{constructor(e,t,r,i,a=Ct.min(),l=Ct.min(),p=vr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=p}withSequenceNumber(e){return new jl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new jl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new jl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class iI{constructor(e){this.Jt=e}}function sI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ag(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:bg(i=n.Jt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Eg(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:gd(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:gd(e.version)}}var i,a;return r}function Ag(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function gd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Hl(n){const e=new ar(n.seconds,n.nanoseconds);return Ct.fromTimestamp(e)}function rf(n,e){const t=(e.baseMutations||[]).map(a=>K0(n.Jt,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>K0(n.Jt,a)),i=ar.fromMillis(e.localWriteTimeMs);return new Tg(e.batchId,i,t,r)}function sf(n){const e=Hl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Hl(n.lastLimboFreeSnapshotVersion):Ct.min();let r;var i;return void 0!==n.query.documents?(Rt(1===(i=n.query).documents.length),r=Us(Wh(jC(i.documents[0])))):r=Us(SA(n.query)),new jl(r,n.targetId,0,n.lastListenSequenceNumber,e,t,vr.fromBase64String(n.resumeToken))}function GA(n,e){const t=gd(e.snapshotVersion),r=gd(e.lastLimboFreeSnapshotVersion);let i;i=I_(e.target)?DA(n.Jt,e.target):AA(n.Jt,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fl(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function rw(n){const e=SA({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?hg(e,e.limit,"L"):e}function md(n,e){return new Dg(e.largestBatchId,K0(n.Jt,e.overlayMutation))}function oI(n,e){const t=e.path.lastSegment();return[n,ii(e.path.popLast()),t]}class af{getBundleMetadata(e,t){return uf(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Hl(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return uf(e).put({bundleId:(r=t).id,createTime:gd(qr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return aI(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:rw(i.bundledQuery),readTime:Hl(i.readTime)};var i})}saveNamedQuery(e,t){return aI(e).put({name:(r=t).name,readTime:gd(qr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function uf(n){return Fr(n,"bundles")}function aI(n){return Fr(n,"namedQueries")}class uI{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new uI(e,t.uid||"")}getOverlay(e,t){return lf(e).get(oI(this.userId,t)).next(r=>r?md(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const p=new Dg(t,l);i.push(this.Xt(e,p))}),fe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(ii(l.getCollectionPath())));const a=[];return i.forEach(l=>{const p=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(lf(e).Qt("collectionPathOverlayIndex",p))}),fe.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Ul(),a=ii(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return lf(e).qt("collectionPathOverlayIndex",l).next(p=>{for(const _ of p){const E=md(this.M,_);i.set(E.getKey(),E)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Ul();let l;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return lf(e).Wt({index:"collectionGroupOverlayIndex",range:p},(_,E,D)=>{const S=md(this.M,E);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):D.done()}).next(()=>a)}Xt(e,t){return lf(e).put(function(r,i,a){const[l,p,_]=oI(i,a.mutation.key);return{userId:i,collectionPath:p,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:ef(r.Jt,a.mutation)}}(this.M,this.userId,t))}}function lf(n){return Fr(n,"documentOverlays")}class cf{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Zn(e.integerValue));else if("doubleValue"in e){const r=Zn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Bh(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Cu(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?v0(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):it()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),Be.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function qA(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function lI(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=qA(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}cf.fe=new cf;class WA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=lI(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=lI(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class cI{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class dI{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class df{constructor(){this.De=new WA,this.Ce=new cI(this.De),this.xe=new dI(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Ko{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ko(this.indexId,this.documentKey,this.arrayValue,r)}}function Yo(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=hI(n.arrayValue,e.arrayValue),0!==t?t:(t=hI(n.directionalValue,e.directionalValue),0!==t?t:Be.comparator(n.documentKey,e.documentKey)))}function hI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class fI{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=C0(e);if(void 0!==t&&!this.Be(t))return!1;const r=ud(e);let i=0,a=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const l=r[i];if(!this.Le(this.Fe,l)||!this.Ue(this.Me[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Me.length||!this.Ue(this.Me[a++],l))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class pI{constructor(){this.qe=new iw}addToCollectionParentIndex(e,t){return this.qe.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getFieldIndex(e,t){return fe.resolve(null)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}updateCollectionGroup(e,t,r){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class iw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Fn(Xt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Fn(Xt.comparator)).toArray()}}const V_=new Uint8Array(0);class zA{constructor(e){this.user=e,this.Ge=new iw,this.Ke=new Bs(t=>Fl(t),(t,r)=>cg(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const a={collectionId:r,parent:ii(i)};return U_(e).put(a)}return fe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[yC(t),""],!1,!0);return U_(e).qt(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(zo(l.parent))}return r})}addFieldIndex(e,t){const r=sw(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=sw(e),i=B_(e),a=Sg(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Sg(e);let i=!0;const a=new Map;return fe.forEach(this.Qe(t),l=>this.getFieldIndex(e,l).next(p=>{i&&(i=!!p),a.set(l,p)})).next(()=>{if(i){let l=fn();return fe.forEach(a,(p,_)=>{var E;ke("IndexedDbIndexManager",`Using index ${E=p,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(qe=>`${qe.fieldPath}:${qe.kind}`).join(",")}`} to execute ${Fl(t)}`);const D=function(qe,ct){const Ze=C0(ct);if(void 0===Ze)return null;for(const Pt of dg(qe,Ze.fieldPath))switch(Pt.op){case"array-contains-any":return Pt.value.arrayValue.values||[];case"array-contains":return[Pt.value]}return null}(_,p),S=function(qe,ct){const Ze=new Map;for(const Pt of ud(ct))for(const Vt of dg(qe,Pt.fieldPath))switch(Vt.op){case"==":case"in":Ze.set(Pt.fieldPath.canonicalString(),Vt.value);break;case"not-in":case"!=":return Ze.set(Pt.fieldPath.canonicalString(),Vt.value),Array.from(Ze.values())}return null}(_,p),P=function(qe,ct){const Ze=[];let Pt=!0;for(const wo of ud(ct)){let wi,ju=!0;for(const Ei of dg(qe,wo.fieldPath)){let Cr,Gy=!0;switch(Ei.op){case"<":case"<=":Cr="nullValue"in(Vt=Ei.value)?w_:"booleanValue"in Vt?{booleanValue:!1}:"integerValue"in Vt||"doubleValue"in Vt?{doubleValue:NaN}:"timestampValue"in Vt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in Vt?{stringValue:""}:"bytesValue"in Vt?{bytesValue:""}:"referenceValue"in Vt?Hh(Wo.empty(),Be.empty()):"geoPointValue"in Vt?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in Vt?{arrayValue:{}}:"mapValue"in Vt?{mapValue:{}}:it();break;case"==":case"in":case">=":Cr=Ei.value;break;case">":Cr=Ei.value,Gy=!1;break;case"!=":case"not-in":Cr=w_}w0(wi,Cr)===Cr&&(wi=Cr,ju=Gy)}if(null!==qe.startAt)for(let Ei=0;Ei<qe.orderBy.length;++Ei)if(qe.orderBy[Ei].field.isEqual(wo.fieldPath)){const Cr=qe.startAt.position[Ei];w0(wi,Cr)===Cr&&(wi=Cr,ju=qe.startAt.inclusive);break}if(void 0===wi)return null;Ze.push(wi),Pt&&(Pt=ju)}var Vt;return new ri(Ze,Pt)}(_,p),V=function(qe,ct){const Ze=[];let Pt=!0;for(const wo of ud(ct)){let wi,ju=!0;for(const Ei of dg(qe,wo.fieldPath)){let Cr,Gy=!0;switch(Ei.op){case">=":case">":Cr="nullValue"in(Vt=Ei.value)?{booleanValue:!1}:"booleanValue"in Vt?{doubleValue:NaN}:"integerValue"in Vt||"doubleValue"in Vt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in Vt?{stringValue:""}:"stringValue"in Vt?{bytesValue:""}:"bytesValue"in Vt?Hh(Wo.empty(),Be.empty()):"referenceValue"in Vt?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in Vt?{arrayValue:{}}:"arrayValue"in Vt?{mapValue:{}}:"mapValue"in Vt?g0:it(),Gy=!1;break;case"==":case"in":case"<=":Cr=Ei.value;break;case"<":Cr=Ei.value,Gy=!1;break;case"!=":case"not-in":Cr=g0}E0(wi,Cr)===Cr&&(wi=Cr,ju=Gy)}if(null!==qe.endAt)for(let Ei=0;Ei<qe.orderBy.length;++Ei)if(qe.orderBy[Ei].field.isEqual(wo.fieldPath)){const Cr=qe.endAt.position[Ei];E0(wi,Cr)===Cr&&(wi=Cr,ju=qe.endAt.inclusive);break}if(void 0===wi)return null;Ze.push(wi),Pt&&(Pt=ju)}var Vt;return new ri(Ze,Pt)}(_,p),H=this.je(p,_,P),le=this.je(p,_,V),Ee=this.We(p,_,S),Ye=this.ze(p.indexId,D,H,!!P&&P.inclusive,le,!!V&&V.inclusive,Ee);return fe.forEach(Ye,qe=>r.Kt(qe,t.limit).next(ct=>{ct.forEach(Ze=>{l=l.add(new Be(zo(Ze.documentKey)))})}))}).next(()=>l)}return fe.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,i,a,l,p){const _=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=a?a.length:1),E=_/(null!=t?t.length:1),D=[];for(let S=0;S<_;++S){const P=t?this.He(t[S/E]):V_,V=r?this.Je(e,P,r[S%E],i):this.Ye(e),H=a?this.Xe(e,P,a[S%E],l):this.Ye(e+1);D.push(...this.createRange(V,H,p.map(le=>this.Je(e,P,le,!0))))}return D}Je(e,t,r,i){const a=new Ko(e,Be.empty(),t,r);return i?a:a.ke()}Xe(e,t,r,i){const a=new Ko(e,Be.empty(),t,r);return i?a.ke():a}Ye(e){return new Ko(e,Be.empty(),V_,V_)}getFieldIndex(e,t){const r=new fI(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{const l=a.filter(p=>r.$e(p));return l.sort((p,_)=>_.fields.length-p.fields.length),l.length>0?l[0]:null})}Ze(e,t){const r=new df;for(const i of ud(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.Ne(i.kind);cf.fe.Zt(a,l)}return r.Se()}He(e){const t=new df;return cf.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new df);let a=0;for(const l of ud(e)){const p=r[a++];for(const _ of i)if(this.tn(t,l.fieldPath)&&$h(p))i=this.en(i,l,p);else{const E=_.Ne(l.kind);cf.fe.Zt(p,E)}}return this.nn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const p of i){const _=new df;_.seed(p.Se()),cf.fe.Zt(l,_.Ne(t.kind)),a.push(_)}return a}tn(e,t){return!!e.filters.find(r=>r instanceof yi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=sw(e),i=B_(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const l=[];return fe.forEach(a,p=>i.get([p.indexId,this.uid]).next(_=>{l.push(function(E,D){const S=D?new ir(D.sequenceNumber,new Tu(Hl(D.readTime),new Be(zo(D.documentKey)),D.largestBatchId)):ir.empty(),P=E.fields.map(([V,H])=>new C_(mi.fromServerFormat(V),H));return new b_(E.indexId,E.collectionGroup,P,S)}(p,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Wt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=sw(e),a=B_(e);return this.sn(e).next(l=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>fe.forEach(p,_=>{return a.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:l,readTime:gd((P=r).readTime),documentKey:ii(P.documentKey.path),largestBatchId:P.largestBatchId});var P})))}updateIndexEntries(e,t){const r=new Map;return fe.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?fe.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),fe.forEach(p,_=>this.rn(e,i,_).next(E=>{const D=this.on(a,_);return E.isEqual(D)?fe.resolve():this.un(e,a,E,D)}))))})}an(e,t,r){return Sg(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:ii(t.key.path)})}cn(e,t,r){return Sg(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,ii(t.key.path)])}rn(e,t,r){const i=Sg(e);let a=new Fn(Yo);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,ii(t.path)])},(l,p)=>{a=a.add(new Ko(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>a)}on(e,t){let r=new Fn(Yo);const i=this.Ze(t,e);if(null==i)return r;const a=C0(t);if(null!=a){const l=e.data.field(a.fieldPath);if($h(l))for(const p of l.arrayValue.values||[])r=r.add(new Ko(t.indexId,e.key,this.He(p),i))}else r=r.add(new Ko(t.indexId,e.key,V_,i));return r}un(e,t,r,i){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(l,p,_,E,D){const S=l.getIterator(),P=p.getIterator();let V=yg(S),H=yg(P);for(;V||H;){let le=!1,Ee=!1;if(V&&H){const Ye=_(V,H);Ye<0?Ee=!0:Ye>0&&(le=!0)}else null!=V?Ee=!0:le=!0;le?(E(H),H=yg(P)):Ee?(D(V),V=yg(S)):(V=yg(S),H=yg(P))}}(r,i,Yo,l=>{a.push(this.an(e,t,l))},l=>{a.push(this.cn(e,t,l))}),fe.waitFor(a)}sn(e){let t=1;return B_(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,p)=>Yo(l,p)).filter((l,p,_)=>!p||0!==Yo(l,_[p-1]));const i=[];i.push(e);for(const l of r){const p=Yo(l,e),_=Yo(l,t);if(0===p)i[0]=e.ke();else if(p>0&&_<0)i.push(l),i.push(l.ke());else if(_>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,""],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,""]));return a}}function U_(n){return Fr(n,"collectionParents")}function Sg(n){return Fr(n,"indexEntries")}function sw(n){return Fr(n,"indexConfiguration")}function B_(n){return Fr(n,"indexState")}const gI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Wr{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Wr(e,Wr.DEFAULT_COLLECTION_PERCENTILE,Wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ow(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let p=0;const _=r.Wt({range:l},(D,S,P)=>(p++,P.delete()));a.push(_.next(()=>{Rt(1===p)}));const E=[];for(const D of t.mutations){const S=WC(e,D.key.path,t.batchId);a.push(i.delete(S)),E.push(D.key)}return fe.waitFor(a).next(()=>E)}function Su(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}Wr.DEFAULT_COLLECTION_PERCENTILE=10,Wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wr.DEFAULT=new Wr(41943040,Wr.DEFAULT_COLLECTION_PERCENTILE,Wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wr.DISABLED=new Wr(-1,0,0);class mI{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.hn={}}static Yt(e,t,r,i){Rt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new mI(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $l(e).Wt({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=xg(e),l=$l(e);return l.add({}).next(p=>{Rt("number"==typeof p);const _=new Tg(p,t,r,i),E=function(P,V,H){const le=H.baseMutations.map(Ye=>ef(P.Jt,Ye)),Ee=H.mutations.map(Ye=>ef(P.Jt,Ye));return{userId:V,batchId:H.batchId,localWriteTimeMs:H.localWriteTime.toMillis(),baseMutations:le,mutations:Ee}}(this.M,this.userId,_),D=[];let S=new Fn((P,V)=>Wt(P.canonicalString(),V.canonicalString()));for(const P of i){const V=WC(this.userId,P.key.path,p);S=S.add(P.key.path.popLast()),D.push(l.put(E)),D.push(a.put(V,zC))}return S.forEach(P=>{D.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.hn[p]=_.keys()}),fe.waitFor(D).next(()=>_)})}lookupMutationBatch(e,t){return $l(e).get(t).next(r=>r?(Rt(r.userId===this.userId),rf(this.M,r)):null)}ln(e,t){return this.hn[t]?fe.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.hn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return $l(e).Wt({index:"userMutationsIndex",range:i},(l,p,_)=>{p.userId===this.userId&&(Rt(p.batchId>=r),a=rf(this.M,p)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return $l(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $l(e).qt("userMutationsIndex",t).next(r=>r.map(i=>rf(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Au(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return xg(e).Wt({range:i},(l,p,_)=>{const[E,D,S]=l,P=zo(D);if(E===this.userId&&t.path.isEqual(P))return $l(e).get(S).next(V=>{if(!V)throw it();Rt(V.userId===this.userId),a.push(rf(this.M,V))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Fn(Wt);const i=[];return t.forEach(a=>{const l=Au(this.userId,a.path),p=IDBKeyRange.lowerBound(l),_=xg(e).Wt({range:p},(E,D,S)=>{const[P,V,H]=E,le=zo(V);P===this.userId&&a.path.isEqual(le)?r=r.add(H):S.done()});i.push(_)}),fe.waitFor(i).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Au(this.userId,r),l=IDBKeyRange.lowerBound(a);let p=new Fn(Wt);return xg(e).Wt({range:l},(_,E,D)=>{const[S,P,V]=_,H=zo(P);S===this.userId&&r.isPrefixOf(H)?H.length===i&&(p=p.add(V)):D.done()}).next(()=>this.fn(e,p))}fn(e,t){const r=[],i=[];return t.forEach(a=>{i.push($l(e).get(a).next(l=>{if(null===l)throw it();Rt(l.userId===this.userId),r.push(rf(this.M,l))}))}),fe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return ow(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),fe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return fe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return xg(e).Wt({range:r},(a,l,p)=>{if(a[0]===this.userId){const _=zo(a[1]);i.push(_)}else p.done()}).next(()=>{Rt(0===i.length)})})}containsKey(e,t){return aw(e,this.userId,t)}_n(e){return uw(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function aw(n,e,t){const r=Au(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return xg(n).Wt({range:a,jt:!0},(p,_,E)=>{const[D,S,P]=p;D===e&&S===i&&(l=!0),E.done()}).next(()=>l)}function $l(n){return Fr(n,"mutations")}function xg(n){return Fr(n,"documentMutations")}function uw(n){return Fr(n,"mutationQueues")}class hf{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new hf(0)}static gn(){return new hf(-1)}}class _I{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new hf(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>Ct.fromTimestamp(new ar(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.pn(e,i)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Gl(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(Rt(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Gl(e).Wt((l,p)=>{const _=sf(p);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>fe.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Gl(e).Wt((r,i)=>{const a=sf(i);t(a)})}yn(e){return yI(e).get("targetGlobalKey").next(t=>(Rt(null!==t),t))}pn(e,t){return yI(e).put("targetGlobalKey",t)}In(e,t){return Gl(e).put(GA(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Fl(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Gl(e).Wt({range:i,index:"queryTargetsIndex"},(l,p,_)=>{const E=sf(p);cg(t,E.target)&&(a=E,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=ql(e);return t.forEach(l=>{const p=ii(l.path);i.push(a.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,l))}),fe.waitFor(i)}removeMatchingKeys(e,t,r){const i=ql(e);return fe.forEach(t,a=>{const l=ii(a.path);return fe.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=ql(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ql(e);let a=fn();return i.Wt({range:r,jt:!0},(l,p,_)=>{const E=zo(l[1]),D=new Be(E);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=ii(t.path),i=IDBKeyRange.bound([r],[yC(r)],!1,!0);let a=0;return ql(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([l,p],_,E)=>{0!==l&&(a++,E.done())}).next(()=>a>0)}Et(e,t){return Gl(e).get(t).next(r=>r?sf(r):null)}}function Gl(n){return Fr(n,"targets")}function yI(n){return Fr(n,"targetGlobal")}function ql(n){return Fr(n,"targetDocuments")}function _d(n){return lw.apply(this,arguments)}function lw(){return lw=(0,ge.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==XC)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),lw.apply(this,arguments)}function vI([n,e],[t,r]){const i=Wt(n,t);return 0===i?Wt(e,r):i}class ZA{constructor(e){this.En=e,this.buffer=new Fn(vI),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();vI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class KA{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;ke("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ge.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){pd(i)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield _d(i)}yield t.vn(e)}))}}class YA{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return fe.resolve(gs.A);const r=new ZA(t);return this.Sn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Sn.Cn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(gI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gI):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,i,a,l,p,_,E;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,p=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(E=Date.now(),p_()<=$o.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${i} in `+(p-l)+`ms\n\tRemoved ${a} targets in `+(_-p)+`ms\n\tRemoved ${S} documents in `+(E-_)+`ms\nTotal Duration: ${E-D}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class QA{constructor(e,t){this.db=e,this.garbageCollector=new YA(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,i)=>t(i))}addReference(e,t,r){return j_(e,r)}removeReference(e,t,r){return j_(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return j_(e,t)}Mn(e,t){return function(r,i){let a=!1;return uw(r).zt(l=>aw(r,l,i).next(p=>(p&&(a=!0),fe.resolve(!p)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.kn(e,(l,p)=>{if(p<=t){const _=this.Mn(e,l).next(E=>{if(!E)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Ct.min()),ql(e).delete([0,ii(l.path)])))});i.push(_)}}).next(()=>fe.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return j_(e,t)}kn(e,t){const r=ql(e);let i,a=gs.A;return r.Wt({index:"documentTargetsIndex"},([l,p],{path:_,sequenceNumber:E})=>{0===l?(a!==gs.A&&t(new Be(zo(i)),a),a=E,i=_):a=gs.A}).next(()=>{a!==gs.A&&t(new Be(zo(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function j_(n,e){return ql(n).put((r=n.currentSequenceNumber,{targetId:0,path:ii(e.path),sequenceNumber:r}));var r}class ff{constructor(){this.changes=new Bs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Kn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class wI{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wl(e).put(r)}removeEntry(e,t,r){return Wl(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Ag(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=Kn.newInvalidDocument(t);return Wl(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(pf(t))},(i,a)=>{r=this.Fn(t,a)}).next(()=>r)}$n(e,t){let r={size:0,document:Kn.newInvalidDocument(t)};return Wl(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(pf(t))},(i,a)=>{r={document:this.Fn(t,a),size:Su(a)}}).next(()=>r)}getEntries(e,t){let r=po();return this.Bn(e,t,(i,a)=>{const l=this.Fn(i,a);r=r.insert(i,l)}).next(()=>r)}Ln(e,t){let r=po(),i=new Or(Be.comparator);return this.Bn(e,t,(a,l)=>{const p=this.Fn(a,l);r=r.insert(a,p),i=i.insert(a,Su(l))}).next(()=>({documents:r,Un:i}))}Bn(e,t,r){if(t.isEmpty())return fe.resolve();let i=new Fn(bI);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(pf(i.first()),pf(i.last())),l=i.getIterator();let p=l.getNext();return Wl(e).Wt({index:"documentKeyIndex",range:a},(_,E,D)=>{const S=Be.fromSegments([...E.prefixPath,E.collectionGroup,E.documentId]);for(;p&&bI(p,S)<0;)r(p,null),p=l.getNext();p&&p.isEqual(S)&&(r(p,E),p=l.hasNext()?l.getNext():null),p?D.Ut(pf(p)):D.done()}).next(()=>{for(;p;)r(p,null),p=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),Ag(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wl(e).qt(IDBKeyRange.bound(i,a,!0)).next(l=>{let p=po();for(const _ of l){const E=this.Fn(Be.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);p=p.insert(E.key,E)}return p})}getAllFromCollectionGroup(e,t,r,i){let a=po();const l=dw(t,r),p=dw(t,Tu.max());return Wl(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,p,!0)},(_,E,D)=>{const S=this.Fn(Be.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);a=a.insert(S.key,S),a.size===i&&D.done()}).next(()=>a)}newChangeBuffer(e){return new EI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return cw(e).get("remoteDocumentGlobalKey").next(t=>(Rt(!!t),t))}On(e,t){return cw(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function nw(n,e){let t;if(e.document)t=Z0(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Be.fromSegments(e.noDocument.path),i=Hl(e.noDocument.readTime);t=Kn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=Be.fromSegments(e.unknownDocument.path),i=Hl(e.unknownDocument.version);t=Kn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new ar(r[0],r[1]);return Ct.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Ct.min()))return r}return Kn.newInvalidDocument(e)}}class EI extends ff{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new Bs(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Fn((a,l)=>Wt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const p=this.Gn.get(a);if(t.push(this.qn.removeEntry(e,a,p.readTime)),l.isValidDocument()){const _=sI(this.qn.M,l);i=i.add(a.path.popLast()),r+=Su(_)-p.size,t.push(this.qn.addEntry(e,a,_))}else if(r-=p.size,this.trackRemovals){const _=sI(this.qn.M,l.convertToNoDocument(Ct.min()));t.push(this.qn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.qn.updateMetadata(e,r)),fe.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:i})=>(i.forEach((a,l)=>{this.Gn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function cw(n){return Fr(n,"remoteDocumentGlobal")}function Wl(n){return Fr(n,"remoteDocumentsV14")}function pf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function dw(n,e){const t=e.documentKey.path.toArray();return[n,Ag(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function bI(n,e){const t=n.path.length-e.path.length;return 0!==t?t:Be.comparator(n,e)}class CI{constructor(e){this.M=e}kt(e,t,r,i){const a=new F_("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qC,{unique:!0}),p.createObjectStore("documentMutations"),hw(e),function(p){p.createObjectStore("remoteDocuments")}(e));let l=fe.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),hw(e)),l=l.next(()=>function(p){const _=p.store("targetGlobal"),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ct.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",E)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(p,_){return _.store("mutations").qt().next(E=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qC,{unique:!0});const D=_.store("mutations"),S=E.map(P=>D.put(P));return fe.waitFor(S)})}(e,a))),l=l.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Kn(a))),r<6&&i>=6&&(l=l.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(a)))),r<7&&i>=7&&(l=l.next(()=>this.jn(a))),r<8&&i>=8&&(l=l.next(()=>this.Wn(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.zn(a))),r<11&&i>=11&&(l=l.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(p){const _=p.createObjectStore("documentOverlays",{keyPath:UA});_.createIndex("collectionPathOverlayIndex",X0,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",BA,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(p){const _=p.createObjectStore("remoteDocumentsV14",{keyPath:PA});_.createIndex("documentKeyIndex",ZC),_.createIndex("collectionGroupIndex",kA)}(e)).next(()=>this.Hn(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>{!function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:YC}).createIndex("sequenceNumberIndex",QC,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:LA}).createIndex("documentKeyIndex",VA,{unique:!1})}(e)})),l}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=Su(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>fe.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",l).next(p=>fe.forEach(p,_=>{Rt(_.userId===a.userId);const E=rf(this.M,_);return ow(e,a.userId,E).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Wt((l,p)=>{const _=new Xt(l),E=[0,ii(_)];a.push(t.get(E).next(D=>D?fe.resolve():t.put({targetId:0,path:ii(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>fe.waitFor(a))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:FA});const r=t.store("collectionParents"),i=new iw,a=l=>{if(i.add(l)){const p=l.lastSegment(),_=l.popLast();return r.put({collectionId:p,parent:ii(_)})}};return t.store("remoteDocuments").Wt({jt:!0},(l,p)=>{const _=new Xt(l);return a(_.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([l,p,_],E)=>{const D=zo(p);return a(D.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,i)=>{const a=sf(i),l=GA(this.M,a);return t.put(l)})}Hn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((a,l)=>{const p=t.store("remoteDocumentsV14"),_=(E=l,E.document?new Be(Xt.fromString(E.document.name).popFirst(5)):E.noDocument?Be.fromSegments(E.noDocument.path):E.unknownDocument?Be.fromSegments(E.unknownDocument.path):it()).path.toArray();var E;const D={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(p.put(D))}).next(()=>fe.waitFor(i))}}function hw(n){n.createObjectStore("targetDocuments",{keyPath:OA}).createIndex("documentTargetsIndex",J0,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",KC,{unique:!0}),n.createObjectStore("targetGlobal")}const fw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class pw{constructor(e,t,r,i,a,l,p,_,E,D,S=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=a,this.window=l,this.document=p,this.Yn=E,this.Xn=D,this.Zn=S,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=P=>Promise.resolve(),!pw.vt())throw new xe(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new QA(this,i),this.cs=t+"main",this.M=new iI(_),this.hs=new Zo(this.cs,this.Zn,new CI(this.M)),this.ls=new _I(this.referenceDelegate,this.M),this.fs=new wI(this.M),this.ds=new af,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===D&&$r("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(ae.FAILED_PRECONDITION,fw);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new gs(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,ge.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,ge.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,ge.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>zl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(pd(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return Rg(e).get("owner").next(t=>fe.resolve(this.bs(t)))}Ps(e){return zl(e).delete(this.clientId)}Vs(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Fr(r,"clientMetadata");return i.qt().next(a=>{const l=e.Ss(a,18e5),p=a.filter(_=>-1===l.indexOf(_));return fe.forEach(p,_=>i.delete(_.clientId)).next(()=>p)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?fe.resolve(!0):Rg(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new xe(ae.FAILED_PRECONDITION,fw);return!1}}return!(!this.networkEnabled||!this.inForeground)||zl(e).qt().next(r=>void 0===this.Ss(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new rI(t,gs.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>zl(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return mI.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new zA(e)}getDocumentOverlayCache(e){return uI.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=14===(l=this.Zn)?HA:13===l?JC:12===l?jA:11===l?ew:void it();var l;let p;return this.hs.runTransaction(e,i,a,_=>(p=new rI(_,this.ts?this.ts.next():gs.A),"readwrite-primary"===t?this.Ts(p).next(E=>!!E||this.Es(p)).next(E=>{if(!E)throw $r(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new xe(ae.FAILED_PRECONDITION,XC);return r(p)}).next(E=>this.Rs(p).next(()=>E)):this.Fs(p).next(()=>r(p)))).then(_=>(p.raiseOnCommittedEvent(),_))}Fs(e){return Rg(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(ae.FAILED_PRECONDITION,fw)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Rg(e).put("owner",t)}static vt(){return Zo.vt()}As(e){const t=Rg(e);return t.get("owner").next(r=>this.bs(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):fe.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&($r(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return $r("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){$r("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Rg(n){return Fr(n,"owner")}function zl(n){return Fr(n,"clientMetadata")}function gw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class mw{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}Us(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return Be.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Qs(e,t.path):S0(t)?this.js(e,t,r):this.Ws(e,t,r);var i}Qs(e,t){return this.Bs(e,new Be(t)).next(r=>{let i=j0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}js(e,t,r){const i=t.collectionGroup;let a=j0();return this.indexManager.getCollectionParents(e,i).next(l=>fe.forEach(l,p=>{const _=(E=t,D=p.child(i),new Du(D,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,D;return this.Ws(e,_,r).next(E=>{E.forEach((D,S)=>{a=a.insert(D,S)})})}).next(()=>a))}Ws(e,t,r){let i;return this.fs.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const l of a)for(const p of l.mutations){const _=p.key;let E=i.get(_);null==E&&(E=Kn.newInvalidDocument(_),i=i.insert(_,E)),k0(p,E,l.localWriteTime),E.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((a,l)=>{pg(t,l)||(i=i.remove(a))}),i))}}class go{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=i}static Js(e,t){let r=fn(),i=fn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new go(e,t.fromCache,r,i)}}class II{Ys(e){this.Xs=e}Ks(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(Ct.min())?this.Zs(e,t):this.Xs.qs(e,i).next(a=>{const l=this.ti(t,a);return(zh(t)||Ll(t))&&this.ei(t.limitType,l,i,r)?this.Zs(e,t):(p_()<=$o.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),A_(t)),this.Xs.Ks(e,t,I0(r,-1)).next(p=>(l.forEach(_=>{p=p.insert(_.key,_)}),p)))});var a}ti(e,t){let r=new Fn(R0(e));return t.forEach((i,a)=>{pg(e,a)&&(r=r.add(a))}),r}ei(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Zs(e,t){return p_()<=$o.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",A_(t)),this.Xs.Ks(e,t,Tu.min())}}class _w{constructor(e,t,r,i){this.persistence=e,this.ni=t,this.M=i,this.si=new Or(Wt),this.ii=new Bs(a=>Fl(a),cg),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new mw(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function gf(n,e,t,r){return new _w(n,e,t,r)}function TI(n,e){return yw.apply(this,arguments)}function yw(){return yw=(0,ge.Z)(function*(n,e){const t=Ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.$s.getAllMutationBatches(r).next(a=>(i=a,t.ui(e),t.$s.getAllMutationBatches(r))).next(a=>{const l=[],p=[];let _=fn();for(const E of i){l.push(E.batchId);for(const D of E.mutations)_=_.add(D.key)}for(const E of a){p.push(E.batchId);for(const D of E.mutations)_=_.add(D.key)}return t.ai.qs(r,_).next(E=>({ci:E,removedBatchIds:l,addedBatchIds:p}))})})}),yw.apply(this,arguments)}function JA(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.oi.newChangeBuffer({trackRemovals:!0});return function(l,p,_,E){const D=_.batch,S=D.keys();let P=fe.resolve();return S.forEach(V=>{P=P.next(()=>E.getEntry(p,V)).next(H=>{const le=_.docVersions.get(V);Rt(null!==le),H.version.compareTo(le)<0&&(D.applyToRemoteDocument(H,_),H.isValidDocument()&&(H.setReadTime(_.commitVersion),E.addEntry(H)))})}),P.next(()=>l.$s.removeMutationBatch(p,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,i))})}function Mg(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function H_(n,e){const t=Ke(n),r=e.snapshotVersion;let i=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.oi.newChangeBuffer({trackRemovals:!0});i=t.si;const p=[];e.targetChanges.forEach((E,D)=>{const S=i.get(D);if(!S)return;p.push(t.ls.removeMatchingKeys(a,E.removedDocuments,D).next(()=>t.ls.addMatchingKeys(a,E.addedDocuments,D)));let P=S.withSequenceNumber(a.currentSequenceNumber);var V,H,le;e.targetMismatches.has(D)?P=P.withResumeToken(vr.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):E.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(E.resumeToken,r)),i=i.insert(D,P),H=P,le=E,(0===(V=S).resumeToken.approximateByteSize()||H.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8||le.addedDocuments.size+le.modifiedDocuments.size+le.removedDocuments.size>0)&&p.push(t.ls.updateTargetData(a,P))});let _=po();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(a,E))}),p.push(DI(a,l,e.documentUpdates).next(E=>{_=E})),!r.isEqual(Ct.min())){const E=t.ls.getLastRemoteSnapshotVersion(a).next(D=>t.ls.setTargetsMetadata(a,a.currentSequenceNumber,r));p.push(E)}return fe.waitFor(p).next(()=>l.apply(a)).next(()=>t.ai.Gs(a,_)).next(()=>_)}).then(a=>(t.si=i,a))}function DI(n,e,t){let r=fn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=po();return t.forEach((l,p)=>{const _=i.get(l);p.isNoDocument()&&p.version.isEqual(Ct.min())?(e.removeEntry(l,p.readTime),a=a.insert(l,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(p),a=a.insert(l,p)):ke("LocalStore","Ignoring outdated watch update for ",l,". Current version:",_.version," Watch version:",p.version)}),a})}function XA(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function yd(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ls.getTargetData(r,e).next(a=>a?(i=a,fe.resolve(i)):t.ls.allocateTargetId(r).next(l=>(i=new jl(e,l,0,r.currentSequenceNumber),t.ls.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.si.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function vd(n,e,t){return Ng.apply(this,arguments)}function Ng(){return Ng=(0,ge.Z)(function*(n,e,t){const r=Ke(n),i=r.si.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!pd(l))throw l;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.si=r.si.remove(e),r.ii.delete(i.target)}),Ng.apply(this,arguments)}function Pg(n,e,t){const r=Ke(n);let i=Ct.min(),a=fn();return r.persistence.runTransaction("Execute query","readonly",l=>function(p,_,E){const D=Ke(p),S=D.ii.get(E);return void 0!==S?fe.resolve(D.si.get(S)):D.ls.getTargetData(_,E)}(r,l,Us(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(l,p.targetId).next(_=>{a=_})}).next(()=>r.ni.Ks(l,e,t?i:Ct.min(),t?a:fn())).next(p=>(eS(r,gg(e),p),{documents:p,hi:a})))}function AI(n,e){const t=Ke(n),r=Ke(t.ls),i=t.si.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(l=>l?l.target:null))}function SI(n,e){const t=Ke(n),r=t.ri.get(e)||Ct.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.oi.getAllFromCollectionGroup(i,e,I0(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(eS(t,e,i),i))}function eS(n,e,t){let r=Ct.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.ri.set(e,r)}function kg(){return kg=(0,ge.Z)(function*(n,e,t,r){const i=Ke(n);let a=fn(),l=po();for(const E of t){const D=e.li(E.metadata.name);E.document&&(a=a.add(D));const S=e.fi(E);S.setReadTime(e.di(E.metadata.readTime)),l=l.insert(D,S)}const p=i.oi.newChangeBuffer({trackRemovals:!0}),_=yield yd(i,(E=r,Us(Wh(Xt.fromString(`__bundle__/docs/${E}`)))));var E;return i.persistence.runTransaction("Apply bundle documents","readwrite",E=>DI(E,p,l).next(D=>(p.apply(E),D)).next(D=>i.ls.removeMatchingKeysForTargetId(E,_.targetId).next(()=>i.ls.addMatchingKeys(E,a,_.targetId)).next(()=>i.ai.Gs(E,D)).next(()=>D)))}),kg.apply(this,arguments)}function xI(n,e){return Og.apply(this,arguments)}function Og(){return Og=(0,ge.Z)(function*(n,e,t=fn()){const r=yield yd(n,Us(rw(e.bundledQuery))),i=Ke(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=qr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.ds.saveNamedQuery(a,e);const p=r.withResumeToken(vr.EMPTY_BYTE_STRING,l);return i.si=i.si.insert(p.targetId,p),i.ls.updateTargetData(a,p).next(()=>i.ls.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.ls.addMatchingKeys(a,t,r.targetId)).next(()=>i.ds.saveNamedQuery(a,e))})}),Og.apply(this,arguments)}class ww{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return fe.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:qr(r.createTime)}),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:rw(r.bundledQuery),readTime:qr(r.readTime)}),fe.resolve();var r}}class tS{constructor(){this.overlays=new Or(Be.comparator),this.mi=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.Xt(e,t,a)}),fe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.mi.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.mi.delete(r)),fe.resolve()}getOverlaysForCollection(e,t,r){const i=Ul(),a=t.length+1,l=new Be(t.child("")),p=this.overlays.getIteratorFrom(l);for(;p.hasNext();){const _=p.getNext().value,E=_.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return fe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Or((E,D)=>E-D);const l=this.overlays.getIterator();for(;l.hasNext();){const E=l.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>r){let D=a.get(E.largestBatchId);null===D&&(D=Ul(),a=a.insert(E.largestBatchId,D)),D.set(E.getKey(),E)}}const p=Ul(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((E,D)=>p.set(E,D)),!(p.size()>=i)););return fe.resolve(p)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const l=this.mi.get(i.largestBatchId).delete(r.key);this.mi.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Dg(t,r));let a=this.mi.get(t);void 0===a&&(a=fn(),this.mi.set(t,a)),this.mi.set(t,a.add(r.key))}}class Ew{constructor(){this.gi=new Fn(si.yi),this.pi=new Fn(si.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new si(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new si(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new Be(new Xt([])),r=new si(t,e),i=new si(t,e+1),a=[];return this.pi.forEachInRange([r,i],l=>{this.Ei(l),a.push(l.key)}),a}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new Be(new Xt([])),r=new si(t,e),i=new si(t,e+1);let a=fn();return this.pi.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new si(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class si{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return Be.comparator(e.key,t.key)||Wt(e.Vi,t.Vi)}static Ii(e,t){return Wt(e.Vi,t.Vi)||Be.comparator(e.key,t.key)}}class nS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new Fn(si.yi)}checkEmpty(e){return fe.resolve(0===this.$s.length)}addMutationBatch(e,t,r,i){const a=this.vi;this.vi++;const l=new Tg(a,t,r,i);this.$s.push(l);for(const p of i)this.Si=this.Si.add(new si(p.key,a)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return fe.resolve(l)}lookupMutationBatch(e,t){return fe.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ci(t+1),a=i<0?0:i;return fe.resolve(this.$s.length>a?this.$s[a]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return fe.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new si(t,0),i=new si(t,Number.POSITIVE_INFINITY),a=[];return this.Si.forEachInRange([r,i],l=>{const p=this.Di(l.Vi);a.push(p)}),fe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Fn(Wt);return t.forEach(i=>{const a=new si(i,0),l=new si(i,Number.POSITIVE_INFINITY);this.Si.forEachInRange([a,l],p=>{r=r.add(p.Vi)})}),fe.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Be.isDocumentKey(a)||(a=a.child(""));const l=new si(new Be(a),0);let p=new Fn(Wt);return this.Si.forEachWhile(_=>{const E=_.key.path;return!!r.isPrefixOf(E)&&(E.length===i&&(p=p.add(_.Vi)),!0)},l),fe.resolve(this.xi(p))}xi(e){const t=[];return e.forEach(r=>{const i=this.Di(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Rt(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return fe.forEach(t.mutations,i=>{const a=new si(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new si(t,0),i=this.Si.firstAfterOrEqual(r);return fe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return fe.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class RI{constructor(e){this.ki=e,this.docs=new Or(Be.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return fe.resolve(r?r.document.mutableCopy():Kn.newInvalidDocument(t))}getEntries(e,t){let r=po();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Kn.newInvalidDocument(i))}),fe.resolve(r)}getAllFromCollection(e,t,r){let i=po();const a=new Be(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:p,value:{document:_}}=l.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||wC(hA(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return fe.resolve(i)}getAllFromCollectionGroup(e,t,r,i){it()}Mi(e,t){return fe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new bw(this)}getSize(e){return fe.resolve(this.size)}}class bw extends ff{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.qn.addEntry(e,i)):this.qn.removeEntry(r)}),fe.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class MI{constructor(e){this.persistence=e,this.Oi=new Bs(t=>Fl(t),cg),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.Fi=0,this.$i=new Ew,this.targetCount=0,this.Bi=hf.mn()}forEachTarget(e,t){return this.Oi.forEach((r,i)=>t(i)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),fe.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new hf(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.In(t),fe.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Oi.forEach((l,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Oi.delete(l),a.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),fe.waitFor(a).next(()=>i)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return fe.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),fe.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),fe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return fe.resolve(r)}containsKey(e,t){return fe.resolve(this.$i.containsKey(t))}}class rS{constructor(e,t){this.Li={},this.overlays={},this.ts=new gs(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new MI(this),this.indexManager=new pI,this.fs=new RI(r=>this.referenceDelegate.Ui(r)),this.M=new iI(t),this.ds=new ww(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new nS(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const i=new NI(this.ts.next());return this.referenceDelegate.qi(),r(i).next(a=>this.referenceDelegate.Gi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ki(e,t){return fe.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class NI extends eI{constructor(e){super(),this.currentSequenceNumber=e}}class $_{constructor(e){this.persistence=e,this.Qi=new Ew,this.ji=null}static Wi(e){return new $_(e)}get zi(){if(this.ji)return this.ji;throw it()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),fe.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(i=>this.zi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.zi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.zi,r=>{const i=Be.fromPath(r);return this.Hi(e,i).next(a=>{a||t.removeEntry(i,Ct.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return fe.or([()=>fe.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function PI(n,e){return`firestore_clients_${n}_${e}`}function Cw(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function G_(n,e){return`firestore_targets_${n}_${e}`}class q_{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new xe(i.error.code,i.error.message))),l?new q_(e,t,i.state,a):($r("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mf{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new xe(r.error.code,r.error.message))),a?new mf(e,r.state,i):($r("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=H0();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=v_(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new Fg(e,a):($r("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class vi{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new vi(t.clientId,t.onlineState):($r("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Zl{constructor(){this.activeTargetIds=H0()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Iw{constructor(e,t,r,i,a){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Or(Wt),this.started=!1,this.ir=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=PI(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new Zl),this.ar=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const t=yield e.syncEngine.Os();for(const i of t){if(i===e.tr)continue;const a=e.getItem(PI(e.persistenceKey,i));if(a){const l=Fg.Ji(i,a);l&&(e.sr=e.sr.insert(l.clientId,l))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(G_(this.persistenceKey,e));if(r){const i=mf.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(G_(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void $r("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,ge.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const i=t.Vr(r.key,r.newValue);if(i)return t.vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(a){let l=gs.A;if(null!=a)try{const p=JSON.parse(a);Rt("number"==typeof p),l=p}catch(p){$r("SharedClientState","Failed to read sequence number from WebStorage",p)}return l}(r.newValue);i!==gs.A&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Nr(a)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new q_(this.currentUser,e,t,r),a=Cw(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Yi())}pr(e){const t=Cw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=G_(this.persistenceKey,e),a=new mf(e,t,r);this.setItem(i,a.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return Fg.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),i=Number(r[1]);return q_.Ji(new gi(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return mf.Ji(i,t)}wr(e){return vi.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),l=[],p=[];return a.forEach(_=>{i.has(_)||l.push(_)}),i.forEach(_=>{a.has(_)||p.push(_)}),this.syncEngine.Or(l,p).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=H0();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class kI{constructor(){this.Fr=new Zl,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Zl,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class xM{Br(e){}shutdown(){}}class _f{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const iS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Tw{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class sS extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,a){const l=this.oo(e,t);ke("RestConnection","Sending: ",l,r);const p={};return this.uo(p,i,a),this.ao(e,l,p,r).then(_=>(ke("RestConnection","Received: ",_),_),_=>{throw sg("RestConnection",`${e} failed with error: `,_,"url: ",l,"request:",r),_})}co(e,t,r,i,a){return this.ro(e,t,r,i,a)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+sd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}oo(e,t){return`${this.so}/v1/${t}:${iS[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,i){return new Promise((a,l)=>{const p=new pC;p.listenOnce(fC.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case f_.NO_ERROR:const E=p.getResponseJson();ke("Connection","XHR received:",JSON.stringify(E)),a(E);break;case f_.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),l(new xe(ae.DEADLINE_EXCEEDED,"Request time out"));break;case f_.HTTP_ERROR:const D=p.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',D,"response text:",p.getResponseText()),D>0){const S=p.getResponseJson().error;if(S&&S.status&&S.message){const P=function(V){const H=V.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(H)>=0?H:ae.UNKNOWN}(S.status);l(new xe(P,S.message))}else l(new xe(ae.UNKNOWN,"Server responded with status "+p.getStatus()))}else l(new xe(ae.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);p.send(t,"POST",_,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=dC(),l=hC(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new rA({})),this.uo(p.initMessageHeaders,t,r),(0,k.uI)()||(0,k.b$)()||(0,k.d)()||(0,k.w1)()||(0,k.Mn)()||(0,k.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");ke("Connection","Creating WebChannel: "+_,p);const E=a.createWebChannel(_,p);let D=!1,S=!1;const P=new Tw({jr:H=>{S?ke("Connection","Not sending because WebChannel is closed:",H):(D||(ke("Connection","Opening WebChannel transport."),E.open(),D=!0),ke("Connection","WebChannel sending:",H),E.send(H))},Wr:()=>E.close()}),V=(H,le,Ee)=>{H.listen(le,Ye=>{try{Ee(Ye)}catch(qe){setTimeout(()=>{throw qe},0)}})};return V(E,ig.EventType.OPEN,()=>{S||ke("Connection","WebChannel transport opened.")}),V(E,ig.EventType.CLOSE,()=>{S||(S=!0,ke("Connection","WebChannel transport closed"),P.eo())}),V(E,ig.EventType.ERROR,H=>{S||(S=!0,sg("Connection","WebChannel transport errored:",H),P.eo(new xe(ae.UNAVAILABLE,"The operation could not be completed")))}),V(E,ig.EventType.MESSAGE,H=>{var le;if(!S){const Ee=H.data[0];Rt(!!Ee);const Ye=Ee,qe=Ye.error||(null===(le=Ye[0])||void 0===le?void 0:le.error);if(qe){ke("Connection","WebChannel received error:",qe);const ct=qe.status;let Ze=function(Vt){const wo=wr[Vt];if(void 0!==wo)return FC(wo)}(ct),Pt=qe.message;void 0===Ze&&(Ze=ae.INTERNAL,Pt="Unknown error status: "+ct+" with message "+qe.message),S=!0,P.eo(new xe(Ze,Pt)),E.close()}else ke("Connection","WebChannel received:",Ee),P.no(Ee)}}),V(l,nA.STAT_EVENT,H=>{H.stat===c0.PROXY?ke("Connection","Detected buffering proxy"):H.stat===c0.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.Zr()},0),P}}function Dw(){return"undefined"!=typeof window?window:null}function W_(){return"undefined"!=typeof document?document:null}function Lg(n){return new CA(n,!0)}class Vg{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Aw{constructor(e,t,r,i,a,l,p,_){this.Jn=e,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new Vg(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ge.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,ge.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,ge.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?($r(t.toString()),$r("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new xe(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,ge.Z)(function*(){e.state=0,e.start()}))}qo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OI extends Aw{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.M=a}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function IA(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:it(),i=e.targetChange.targetIds||[],a=function(_,E){return _.N?(Rt(void 0===E||"string"==typeof E),vr.fromBase64String(E||"")):(Rt(void 0===E||E instanceof Uint8Array),vr.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,p=l&&function(_){const E=void 0===_.code?ae.UNKNOWN:FC(_.code);return new xe(E,_.message||"")}(l);t=new G0(r,i,a,p||null)}else if("documentChange"in e){const r=e.documentChange,i=ms(n,r.document.name),a=qr(r.document.updateTime),l=new _i({mapValue:{fields:r.document.fields}}),p=Kn.newFoundDocument(i,a,l);t=new N_(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=ms(n,r.document),a=r.readTime?qr(r.readTime):Ct.min(),l=Kn.newNoDocument(i,a);t=new N_([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=ms(n,r.document);t=new N_([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return it();{const r=e.filter,a=new kC(r.count||0);t=new $0(r.targetId,a)}}var _;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return Ct.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ct.min():a.readTime?qr(a.readTime):Ct.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=Cg(this.M),t.addTarget=function(i,a){let l;const p=a.target;return l=I_(p)?{documents:DA(i,p)}:{query:AA(i,p)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=BC(i,a.resumeToken):a.snapshotVersion.compareTo(Ct.min())>0&&(l.readTime=Eg(i,a.snapshotVersion.toTimestamp())),l}(this.M,e);const r=function SM(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return it()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=Cg(this.M),t.removeTarget=e,this.Oo(t)}}class z_ extends Aw{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.M=a,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function TA(n,e){return n&&n.length>0?(Rt(void 0!==e),n.map(t=>function(r,i){let a=qr(r.updateTime?r.updateTime:i);return a.isEqual(Ct.min())&&(a=qr(i)),new _A(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=qr(e.commitTime);return this.listener.Jo(r,t)}return Rt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Cg(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>ef(this.M,r))};this.Oo(t)}}class Sw extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.Zo=!1}tu(){if(this.Zo)throw new xe(ae.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ro(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new xe(ae.UNKNOWN,i.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new xe(ae.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class RM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?($r(t),this.su=!1):ke("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class FI{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br(p=>{r.enqueueAndForget((0,ge.Z)(function*(){var _;Ru(l)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,ge.Z)(function*(E){const D=Ke(E);D.lu.add(4),yield xu(D),D._u.set("Unknown"),D.lu.delete(4),yield Ug(D)}),function(E){return _.apply(this,arguments)})(l))}))}),this._u=new RM(r,i)}}function Ug(n){return Z_.apply(this,arguments)}function Z_(){return Z_=(0,ge.Z)(function*(n){if(Ru(n))for(const e of n.fu)yield e(!0)}),Z_.apply(this,arguments)}function xu(n){return K_.apply(this,arguments)}function K_(){return K_=(0,ge.Z)(function*(n){for(const e of n.fu)yield e(!1)}),K_.apply(this,arguments)}function Y_(n,e){const t=Ke(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),Rw(t)?xw(t):bd(t).Co()&&Bg(t,e))}function wd(n,e){const t=Ke(n),r=bd(t);t.hu.delete(e),r.Co()&&oS(t,e),0===t.hu.size&&(r.Co()?r.ko():Ru(t)&&t._u.set("Unknown"))}function Bg(n,e){n.wu.Z(e.targetId),bd(n).Qo(e)}function oS(n,e){n.wu.Z(e),bd(n).jo(e)}function xw(n){n.wu=new LC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),bd(n).start(),n._u.iu()}function Rw(n){return Ru(n)&&!bd(n).Do()&&n.hu.size>0}function Ru(n){return 0===Ke(n).lu.size}function Mw(n){n.wu=void 0}function aS(n){return Q_.apply(this,arguments)}function Q_(){return Q_=(0,ge.Z)(function*(n){n.hu.forEach((e,t)=>{Bg(n,e)})}),Q_.apply(this,arguments)}function LI(n,e){return Nw.apply(this,arguments)}function Nw(){return Nw=(0,ge.Z)(function*(n,e){Mw(n),Rw(n)?(n._u.uu(e),xw(n)):n._u.set("Unknown")}),Nw.apply(this,arguments)}function uS(n,e,t){return J_.apply(this,arguments)}function J_(){return J_=(0,ge.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof G0&&2===e.state&&e.cause)try{yield(r=(0,ge.Z)(function*(i,a){const l=a.cause;for(const p of a.targetIds)i.hu.has(p)&&(yield i.remoteSyncer.rejectListen(p,l),i.hu.delete(p),i.wu.removeTarget(p))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield X_(n,r)}else if(e instanceof N_?n.wu.ut(e):e instanceof $0?n.wu._t(e):n.wu.ht(e),!t.isEqual(Ct.min()))try{const r=yield Mg(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.wu.yt(a);return l.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const E=i.hu.get(_);E&&i.hu.set(_,E.withResumeToken(p.resumeToken,a))}}),l.targetMismatches.forEach(p=>{const _=i.hu.get(p);if(!_)return;i.hu.set(p,_.withResumeToken(vr.EMPTY_BYTE_STRING,_.snapshotVersion)),oS(i,p);const E=new jl(_.target,p,1,_.sequenceNumber);Bg(i,E)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield X_(n,r)}var r}),J_.apply(this,arguments)}function X_(n,e,t){return ey.apply(this,arguments)}function ey(){return ey=(0,ge.Z)(function*(n,e,t){if(!pd(e))throw e;n.lu.add(1),yield xu(n),n._u.set("Offline"),t||(t=()=>Mg(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield Ug(n)}))}),ey.apply(this,arguments)}function Pw(n,e){return e().catch(t=>X_(n,t,e))}function Ed(n){return ty.apply(this,arguments)}function ty(){return ty=(0,ge.Z)(function*(n){const e=Ke(n),t=Yl(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;lS(e);)try{const i=yield XA(e.localStore,r);if(null===i){0===e.cu.length&&t.ko();break}r=i.batchId,cS(e,i)}catch(i){yield X_(e,i)}dS(e)&&kw(e)}),ty.apply(this,arguments)}function lS(n){return Ru(n)&&n.cu.length<10}function cS(n,e){n.cu.push(e);const t=Yl(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function dS(n){return Ru(n)&&!Yl(n).Do()&&n.cu.length>0}function kw(n){Yl(n).start()}function MM(n){return VI.apply(this,arguments)}function VI(){return VI=(0,ge.Z)(function*(n){Yl(n).Xo()}),VI.apply(this,arguments)}function NM(n){return UI.apply(this,arguments)}function UI(){return UI=(0,ge.Z)(function*(n){const e=Yl(n);for(const t of n.cu)e.Ho(t.mutations)}),UI.apply(this,arguments)}function PM(n,e,t){return BI.apply(this,arguments)}function BI(){return BI=(0,ge.Z)(function*(n,e,t){const r=n.cu.shift(),i=L_.from(r,e,t);yield Pw(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ed(n)}),BI.apply(this,arguments)}function kM(n,e){return jI.apply(this,arguments)}function jI(){return jI=(0,ge.Z)(function*(n,e){var t;e&&Yl(n).zo&&(yield(t=(0,ge.Z)(function*(r,i){if(OC(a=i.code)&&a!==ae.ABORTED){const l=r.cu.shift();Yl(r).No(),yield Pw(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Ed(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),dS(n)&&kw(n)}),jI.apply(this,arguments)}function jg(n,e){return HI.apply(this,arguments)}function HI(){return HI=(0,ge.Z)(function*(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=Ru(t);t.lu.add(3),yield xu(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Ug(t)}),HI.apply(this,arguments)}function Hg(n,e){return Kl.apply(this,arguments)}function Kl(){return Kl=(0,ge.Z)(function*(n,e){const t=Ke(n);e?(t.lu.delete(2),yield Ug(t)):e||(t.lu.add(2),yield xu(t),t._u.set("Unknown"))}),Kl.apply(this,arguments)}function bd(n){return n.mu||(n.mu=function(e,t,r){const i=Ke(e);return i.tu(),new OI(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:aS.bind(null,n),Jr:LI.bind(null,n),Ko:uS.bind(null,n)}),n.fu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.mu.No(),Rw(n)?xw(n):n._u.set("Unknown")):(yield n.mu.stop(),Mw(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Yl(n){return n.gu||(n.gu=function(e,t,r){const i=Ke(e);return i.tu(),new z_(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:MM.bind(null,n),Jr:kM.bind(null,n),Yo:NM.bind(null,n),Jo:PM.bind(null,n)}),n.fu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.gu.No(),yield Ed(n)):(yield n.gu.stop(),n.cu.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class Ow{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,p=new Ow(e,t,l,i,a);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ql(n,e){if($r("AsyncQueue",`${e}: ${n}`),pd(n))return new xe(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class Cd{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Be.comparator(t.key,r.key):(t,r)=>Be.comparator(t.key,r.key),this.keyedMap=j0(),this.sortedSet=new Or(this.comparator)}static emptySet(e){return new Cd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Cd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Cd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Fw{constructor(){this.yu=new Or(Be.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):it():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Id{constructor(e,t,r,i,a,l,p,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=p,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new Id(e,t,Cd.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class OM{constructor(){this.Iu=void 0,this.listeners=[]}}class $I{constructor(){this.queries=new Bs(e=>x0(e),fg),this.onlineState="Unknown",this.Tu=new Set}}function yf(n,e){return ny.apply(this,arguments)}function ny(){return ny=(0,ge.Z)(function*(n,e){const t=Ke(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new OM),i)try{a.Iu=yield t.onListen(r)}catch(l){const p=Ql(l,`Initialization of query '${A_(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,a),a.listeners.push(e),e.Eu(t.onlineState),a.Iu&&e.Au(a.Iu)&&$g(t)}),ny.apply(this,arguments)}function GI(n,e){return qI.apply(this,arguments)}function qI(){return qI=(0,ge.Z)(function*(n,e){const t=Ke(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),qI.apply(this,arguments)}function FM(n,e){const t=Ke(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const p of l.listeners)p.Au(i)&&(r=!0);l.Iu=i}}r&&$g(t)}function hS(n,e,t){const r=Ke(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function $g(n){n.Tu.forEach(e=>{e.next()})}class Lw{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Id(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Id.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class LM{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class WI{constructor(e){this.M=e}li(e){return ms(this.M,e)}fi(e){return e.metadata.exists?Z0(this.M,e.document,!1):Kn.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return qr(e)}}class Vw{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=zI(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Xt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new WI(this.M);for(const i of e)if(i.metadata.queries){const a=r.li(i.metadata.name);for(const l of i.metadata.queries){const p=(t.get(l)||fn()).add(a);t.set(l,p)}}return t}complete(){var e=this;return(0,ge.Z)(function*(){const t=yield function vw(n,e,t,r){return kg.apply(this,arguments)}(e.localStore,new WI(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield xI(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function zI(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class _s{constructor(e){this.key=e}}class ZI{constructor(e){this.key=e}}class ry{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=fn(),this.mutatedKeys=fn(),this.Lu=R0(e),this.Uu=new Cd(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new Fw,i=t?t.Uu:this.Uu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,p=!1;const _=zh(this.query)&&i.size===this.query.limit?i.last():null,E=Ll(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const P=i.get(D),V=pg(this.query,S)?S:null,H=!!P&&this.mutatedKeys.has(P.key),le=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let Ee=!1;P&&V?P.data.isEqual(V.data)?H!==le&&(r.track({type:3,doc:V}),Ee=!0):this.Qu(P,V)||(r.track({type:2,doc:V}),Ee=!0,(_&&this.Lu(V,_)>0||E&&this.Lu(V,E)<0)&&(p=!0)):!P&&V?(r.track({type:0,doc:V}),Ee=!0):P&&!V&&(r.track({type:1,doc:P}),Ee=!0,(_||E)&&(p=!0)),Ee&&(V?(l=l.add(V),a=le?a.add(D):a.delete(D)):(l=l.delete(D),a=a.delete(D)))}),zh(this.query)||Ll(this.query))for(;l.size>this.query.limit;){const D=zh(this.query)?l.last():l.first();l=l.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{Uu:l,Ku:r,ei:p,mutatedKeys:a}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const a=e.Ku.pu();a.sort((E,D)=>function(S,P){const V=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return V(S)-V(P)}(E.type,D.type)||this.Lu(E.doc,D.doc)),this.ju(r);const l=t?this.Wu():[],p=0===this.Bu.size&&this.current?1:0,_=p!==this.$u;return this.$u=p,0!==a.length||_?{snapshot:new Id(this.query,e.Uu,i,a,e.mutatedKeys,0===p,_,!1),zu:l}:{zu:l}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new Fw,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=fn(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new ZI(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new _s(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=fn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return Id.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class fS{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class pS{constructor(e){this.key=e,this.Xu=!1}}class Uw{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Zu={},this.ta=new Bs(p=>x0(p),fg),this.ea=new Map,this.na=new Set,this.sa=new Or(Be.comparator),this.ia=new Map,this.ra=new Ew,this.oa={},this.ua=new Map,this.aa=hf.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function KI(n,e){return iy.apply(this,arguments)}function iy(){return iy=(0,ge.Z)(function*(n,e){const t=Nu(n);let r,i;const a=t.ta.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Yu();else{const l=yield yd(t.localStore,Us(e));t.isPrimaryClient&&Y_(t.remoteStore,l);const p=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield Bw(t,e,r,"current"===p)}return i}),iy.apply(this,arguments)}function Bw(n,e,t,r){return sy.apply(this,arguments)}function sy(){return sy=(0,ge.Z)(function*(n,e,t,r){n.ha=(D,S,P)=>{return(V=(0,ge.Z)(function*(H,le,Ee,Ye){let qe=le.view.Gu(Ee);qe.ei&&(qe=yield Pg(H.localStore,le.query,!1).then(({documents:Pt})=>le.view.Gu(Pt,qe)));const ct=Ye&&Ye.targetChanges.get(le.targetId),Ze=le.view.applyChanges(qe,H.isPrimaryClient,ct);return Td(H,le.targetId,Ze.zu),Ze.snapshot}),function(H,le,Ee,Ye){return V.apply(this,arguments)})(n,D,S,P);var V};const i=yield Pg(n.localStore,e,!0),a=new ry(e,i.hi),l=a.Gu(i.documents),p=vg.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=a.applyChanges(l,n.isPrimaryClient,p);Td(n,t,_.zu);const E=new fS(e,t,a);return n.ta.set(e,E),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),_.snapshot}),sy.apply(this,arguments)}function YI(n,e){return jw.apply(this,arguments)}function jw(){return jw=(0,ge.Z)(function*(n,e){const t=Ke(n),r=t.ta.get(e),i=t.ea.get(r.targetId);if(i.length>1)return t.ea.set(r.targetId,i.filter(a=>!fg(a,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield vd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),wd(t.remoteStore,r.targetId),vf(t,r.targetId)}).catch(_d))):(vf(t,r.targetId),yield vd(t.localStore,r.targetId,!0))}),jw.apply(this,arguments)}function Gg(){return Gg=(0,ge.Z)(function*(n,e,t){const r=fy(n);try{const i=yield function(a,l){const p=Ke(a),_=ar.now(),E=l.reduce((S,P)=>S.add(P.key),fn());let D;return p.persistence.runTransaction("Locally write mutations","readwrite",S=>p.ai.qs(S,E).next(P=>{D=P;const V=[];for(const H of l){const le=vA(H,D.get(H.key));null!=le&&V.push(new Vl(H.key,le,b0(le.value.mapValue),kr.exists(!0)))}return p.$s.addMutationBatch(S,_,V,l)})).then(S=>(S.applyToLocalDocumentSet(D),{batchId:S.batchId,changes:D}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,p){let _=a.oa[a.currentUser.toKey()];_||(_=new Or(Wt)),_=_.insert(l,p),a.oa[a.currentUser.toKey()]=_}(r,i.batchId,t),yield Mu(r,i.changes),yield Ed(r.remoteStore)}catch(i){const a=Ql(i,"Failed to persist write");t.reject(a)}}),Gg.apply(this,arguments)}function mo(n,e){return Hw.apply(this,arguments)}function Hw(){return Hw=(0,ge.Z)(function*(n,e){const t=Ke(n);try{const r=yield H_(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.ia.get(a);l&&(Rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Xu=!0:i.modifiedDocuments.size>0?Rt(l.Xu):i.removedDocuments.size>0&&(Rt(l.Xu),l.Xu=!1))}),yield Mu(t,r,e)}catch(r){yield _d(r)}}),Hw.apply(this,arguments)}function mS(n,e,t){const r=Ke(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ta.forEach((a,l)=>{const p=l.view.Eu(e);p.snapshot&&i.push(p.snapshot)}),function(a,l){const p=Ke(a);p.onlineState=l;let _=!1;p.queries.forEach((E,D)=>{for(const S of D.listeners)S.Eu(l)&&(_=!0)}),_&&$g(p)}(r.eventManager,e),i.length&&r.Zu.Ko(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function _S(n,e,t){return oy.apply(this,arguments)}function oy(){return oy=(0,ge.Z)(function*(n,e,t){const r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ia.get(e),a=i&&i.key;if(a){let l=new Or(Be.comparator);l=l.insert(a,Kn.newNoDocument(a,Ct.min()));const p=fn().add(a),_=new Xh(Ct.min(),new Map,new Fn(Wt),l,p);yield mo(r,_),r.sa=r.sa.remove(a),r.ia.delete(e),ly(r)}else yield vd(r.localStore,e,!1).then(()=>vf(r,e,t)).catch(_d)}),oy.apply(this,arguments)}function yS(n,e){return $w.apply(this,arguments)}function $w(){return $w=(0,ge.Z)(function*(n,e){const t=Ke(n),r=e.batch.batchId;try{const i=yield JA(t.localStore,e);qw(t,r,null),uy(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Mu(t,i)}catch(i){yield _d(i)}}),$w.apply(this,arguments)}function QI(n,e,t){return Gw.apply(this,arguments)}function Gw(){return Gw=(0,ge.Z)(function*(n,e,t){const r=Ke(n);try{const i=yield function(a,l){const p=Ke(a);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let E;return p.$s.lookupMutationBatch(_,l).next(D=>(Rt(null!==D),E=D.keys(),p.$s.removeMutationBatch(_,D))).next(()=>p.$s.performConsistencyCheck(_)).next(()=>p.ai.qs(_,E))})}(r.localStore,e);qw(r,e,t),uy(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Mu(r,i)}catch(i){yield _d(i)}}),Gw.apply(this,arguments)}function ay(){return ay=(0,ge.Z)(function*(n,e){const t=Ke(n);Ru(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=Ke(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>l.$s.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ua.get(r)||[];i.push(e),t.ua.set(r,i)}catch(r){const i=Ql(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),ay.apply(this,arguments)}function uy(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function qw(n,e,t){const r=Ke(n);let i=r.oa[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.oa[r.currentUser.toKey()]=i}}function vf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||Ww(n,r)})}function Ww(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(wd(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),ly(n))}function Td(n,e,t){for(const r of t)r instanceof _s?(n.ra.addReference(r.key,e),zw(n,r)):r instanceof ZI?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||Ww(n,r.key)):it()}function zw(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.na.add(r),ly(n))}function ly(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new Be(Xt.fromString(e)),r=n.aa.next();n.ia.set(r,new pS(t)),n.sa=n.sa.insert(t,r),Y_(n.remoteStore,new jl(Us(Wh(t.path)),r,2,gs.A))}}function Mu(n,e,t){return cy.apply(this,arguments)}function cy(){return cy=(0,ge.Z)(function*(n,e,t){const r=Ke(n),i=[],a=[],l=[];var p;r.ta.isEmpty()||(r.ta.forEach((p,_)=>{l.push(r.ha(_,e,t).then(E=>{if(E){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,E.fromCache?"not-current":"current"),i.push(E);const D=go.Js(_.targetId,E);a.push(D)}}))}),yield Promise.all(l),r.Zu.Ko(i),yield(p=(0,ge.Z)(function*(_,E){const D=Ke(_);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>fe.forEach(E,P=>fe.forEach(P.zs,V=>D.persistence.referenceDelegate.addReference(S,P.targetId,V)).next(()=>fe.forEach(P.Hs,V=>D.persistence.referenceDelegate.removeReference(S,P.targetId,V)))))}catch(S){if(!pd(S))throw S;ke("LocalStore","Failed to update sequence numbers: "+S)}for(const S of E){const P=S.targetId;if(!S.fromCache){const V=D.si.get(P),le=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);D.si=D.si.insert(P,le)}}}),function(_,E){return p.apply(this,arguments)})(r.localStore,a))}),cy.apply(this,arguments)}function JI(n,e){return Zw.apply(this,arguments)}function Zw(){return Zw=(0,ge.Z)(function*(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield TI(t.localStore,e);t.currentUser=e,(i=t).ua.forEach(l=>{l.forEach(p=>{p.reject(new xe(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Mu(t,r.ci)}var i}),Zw.apply(this,arguments)}function vS(n,e){const t=Ke(n),r=t.ia.get(e);if(r&&r.Xu)return fn().add(r.key);{let i=fn();const a=t.ea.get(e);if(!a)return i;for(const l of a){const p=t.ta.get(l);i=i.unionWith(p.view.qu)}return i}}function UM(n,e){return XI.apply(this,arguments)}function XI(){return XI=(0,ge.Z)(function*(n,e){const t=Ke(n),r=yield Pg(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&Td(t,e.targetId,i.zu),i}),XI.apply(this,arguments)}function eT(n,e){return Kw.apply(this,arguments)}function Kw(){return Kw=(0,ge.Z)(function*(n,e){const t=Ke(n);return SI(t.localStore,e).then(r=>Mu(t,r))}),Kw.apply(this,arguments)}function wS(n,e,t,r){return Yw.apply(this,arguments)}function Yw(){return Yw=(0,ge.Z)(function*(n,e,t,r){const i=Ke(n),a=yield function(l,p){const _=Ke(l),E=Ke(_.$s);return _.persistence.runTransaction("Lookup mutation documents","readonly",D=>E.ln(D,p).next(S=>S?_.ai.qs(D,S):fe.resolve(null)))}(i.localStore,e);var p;null!==a?("pending"===t?yield Ed(i.remoteStore):"acknowledged"===t||"rejected"===t?(qw(i,e,r||null),uy(i,e),p=e,Ke(Ke(i.localStore).$s).dn(p)):it(),yield Mu(i,a)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),Yw.apply(this,arguments)}function tT(){return tT=(0,ge.Z)(function*(n,e){const t=Ke(n);if(Nu(t),fy(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield ES(t,r.toArray());t.ca=!0,yield Hg(t.remoteStore,!0);for(const a of i)Y_(t.remoteStore,a)}else if(!1===e&&!1!==t.ca){const r=[];let i=Promise.resolve();t.ea.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(vf(t,l),vd(t.localStore,l,!0))),wd(t.remoteStore,l)}),yield i,yield ES(t,r),function(a){const l=Ke(a);l.ia.forEach((p,_)=>{wd(l.remoteStore,_)}),l.ra.bi(),l.ia=new Map,l.sa=new Or(Be.comparator)}(t),t.ca=!1,yield Hg(t.remoteStore,!1)}}),tT.apply(this,arguments)}function ES(n,e,t){return nT.apply(this,arguments)}function nT(){return nT=(0,ge.Z)(function*(n,e,t){const r=Ke(n),i=[],a=[];for(const l of e){let p;const _=r.ea.get(l);if(_&&0!==_.length){p=yield yd(r.localStore,Us(_[0]));for(const E of _){const D=r.ta.get(E),S=yield UM(r,D);S.snapshot&&a.push(S.snapshot)}}else{const E=yield AI(r.localStore,l);p=yield yd(r.localStore,E),yield Bw(r,bS(E),l,!1)}i.push(p)}return r.Zu.Ko(a),i}),nT.apply(this,arguments)}function bS(n){return TC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function CS(n){const e=Ke(n);return Ke(Ke(e.localStore).persistence).Os()}function dy(n,e,t,r){return Qw.apply(this,arguments)}function Qw(){return Qw=(0,ge.Z)(function*(n,e,t,r){const i=Ke(n);if(i.ca)return void ke("SyncEngine","Ignoring unexpected query state notification.");const a=i.ea.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield SI(i.localStore,gg(a[0])),p=Xh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Mu(i,l,p);break}case"rejected":yield vd(i.localStore,e,!0),vf(i,e,r);break;default:it()}}),Qw.apply(this,arguments)}function IS(n,e,t){return hy.apply(this,arguments)}function hy(){return hy=(0,ge.Z)(function*(n,e,t){const r=Nu(n);if(r.ca){for(const i of e){if(r.ea.has(i)){ke("SyncEngine","Adding an already active target "+i);continue}const a=yield AI(r.localStore,i),l=yield yd(r.localStore,a);yield Bw(r,bS(a),l.targetId,!1),Y_(r.remoteStore,l)}for(const i of t)r.ea.has(i)&&(yield vd(r.localStore,i,!1).then(()=>{wd(r.remoteStore,i),vf(r,i)}).catch(_d))}}),hy.apply(this,arguments)}function Nu(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=mo.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_S.bind(null,e),e.Zu.Ko=FM.bind(null,e.eventManager),e.Zu.la=hS.bind(null,e.eventManager),e}function fy(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QI.bind(null,e),e}class py{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.M=Lg(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return gf(this.persistence,new II,e.initialUser,this.M)}_a(e){return new rS($_.Wi,this.M)}da(e){return new kI}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class rT extends py{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield fy(r.ga.syncEngine),yield Ed(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return gf(this.persistence,new II,e.initialUser,this.M)}wa(e){return new KA(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=gw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Wr.withCacheSize(this.cacheSizeBytes):Wr.DEFAULT;return new pw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Dw(),W_(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new kI}}class Xw extends rT{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e);const i=r.ga.syncEngine;r.sharedClientState instanceof Iw&&(r.sharedClientState.syncEngine={kr:wS.bind(null,i),Mr:dy.bind(null,i),Or:IS.bind(null,i),Os:CS.bind(null,i),Nr:eT.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var a=(0,ge.Z)(function*(l){yield function BM(n,e){return tT.apply(this,arguments)}(r.ga.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):l||r.gcScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}da(e){const t=Dw();if(!Iw.vt(t))throw new xe(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=gw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Iw(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class qg{initialize(e,t){var r=this;return(0,ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>mS(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=JI.bind(null,r.syncEngine),yield Hg(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new $I}createDatastore(e){const t=Lg(e.databaseInfo.databaseId),r=new sS(e.databaseInfo);return new Sw(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=p=>mS(this.syncEngine,p,0),l=_f.vt()?new _f:new xM,new FI(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,p,_,E){const D=new Uw(r,i,a,l,p,_);return E&&(D.ca=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const r=Ke(t);ke("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield xu(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function eE(n,e=10240){let t=0;return{read:()=>(0,ge.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Wg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class jM{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new Gr,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),i=Number(r);isNaN(i)&&e.Ra(`length string (${r}) is not valid number`);const a=yield e.ba(i);return new LM(JSON.parse(a),t.length+i)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,ge.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class HM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ge.Z)(function*(a,l){const p=Ke(a),_=Cg(p.M)+"/documents",E={documents:l.map(V=>bg(p.M,V))},D=yield p.co("BatchGetDocuments",_,E),S=new Map;D.forEach(V=>{const H=function $C(n,e){return"found"in e?function(t,r){Rt(!!r.found);const i=ms(t,r.found.name),a=qr(r.found.updateTime),l=new _i({mapValue:{fields:r.found.fields}});return Kn.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){Rt(!!r.missing),Rt(!!r.readTime);const i=ms(t,r.missing),a=qr(r.readTime);return Kn.newNoDocument(i,a)}(n,e):it()}(p.M,V);S.set(H.key.toString(),H)});const P=[];return l.forEach(V=>{const H=S.get(V.toString());Rt(!!H),P.push(H)}),P}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Qh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Be.fromPath(i);e.mutations.push(new R_(a,e.precondition(a)))}),yield(r=(0,ge.Z)(function*(i,a){const l=Ke(i),p=Cg(l.M)+"/documents",_={writes:a.map(E=>ef(l.M,E))};yield l.ro("Commit",p,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=Ct.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?kr.updateTime(t):kr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ct.min()))throw new xe(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kr.updateTime(t)}return kr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class $M{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.va=5,this.So=new Vg(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,ge.Z)(function*(){const t=new HM(e.datastore),r=e.Da(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Ca(a)}))}).catch(i=>{e.Ca(i)})}))}Da(e){try{const t=this.updateFunction(e);return!od(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!OC(t)}return!1}}class GM{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=gi.UNAUTHENTICATED,this.clientId=_C.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ge.Z)(function*(p){ke("FirestoreClient","Received user=",p.uid),yield a.authCredentialListener(p),a.user=p});return function(p){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(ke("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Ql(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function TS(n,e){return iT.apply(this,arguments)}function iT(){return iT=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ge.Z)(function*(a){r.isEqual(a)||(yield TI(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),iT.apply(this,arguments)}function DS(n,e){return gy.apply(this,arguments)}function gy(){return gy=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield tE(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>jg(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>jg(e.remoteStore,a)),n.onlineComponents=e}),gy.apply(this,arguments)}function tE(n){return nE.apply(this,arguments)}function nE(){return nE=(0,ge.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield TS(n,new py)),n.offlineComponents}),nE.apply(this,arguments)}function my(n){return rE.apply(this,arguments)}function rE(){return rE=(0,ge.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield DS(n,new qg)),n.onlineComponents}),rE.apply(this,arguments)}function iE(n){return tE(n).then(e=>e.persistence)}function _y(n){return tE(n).then(e=>e.localStore)}function sE(n){return my(n).then(e=>e.remoteStore)}function oE(n){return my(n).then(e=>e.syncEngine)}function wf(n){return yy.apply(this,arguments)}function yy(){return yy=(0,ge.Z)(function*(n){const e=yield my(n),t=e.eventManager;return t.onListen=KI.bind(null,e.syncEngine),t.onUnlisten=YI.bind(null,e.syncEngine),t}),yy.apply(this,arguments)}function zg(n,e,t={}){const r=new Gr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(i,a,l,p,_){const E=new Wg({next:S=>{a.enqueueAndForget(()=>GI(i,D));const P=S.docs.has(l);!P&&S.fromCache?_.reject(new xe(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&p&&"server"===p.source?_.reject(new xe(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new Lw(Wh(l.path),E,{includeMetadataChanges:!0,Du:!0});return yf(i,D)}(yield wf(n),n.asyncQueue,e,t,r)})),r.promise}function oT(n,e,t={}){const r=new Gr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(i,a,l,p,_){const E=new Wg({next:S=>{a.enqueueAndForget(()=>GI(i,D)),S.fromCache&&"server"===p.source?_.reject(new xe(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new Lw(l,E,{includeMetadataChanges:!0,Du:!0});return yf(i,D)}(yield wf(n),n.asyncQueue,e,t,r)})),r.promise}const aT=new Map;function aE(n,e,t){if(!t)throw new xe(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function uT(n,e,t,r){if(!0===e&&!0===r)throw new xe(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function lT(n){if(!Be.isDocumentKey(n))throw new xe(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function cT(n){if(Be.isDocumentKey(n))throw new xe(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function wy(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function on(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wy(n);throw new xe(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function NS(n,e){if(e<=0)throw new xe(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class PS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,uT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ey{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new PS({}),this._settingsFrozen=!1,e instanceof Wo?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new xe(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wo(i.options.projectId)}(e))}get app(){if(!this._app)throw new xe(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new PS(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new oA;switch(t.type){case"gapi":const r=t.client;return Rt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new uA(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xe(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=aT.get(e);t&&(ke("ComponentProvider","Removing Datastore"),aT.delete(e),t.terminate())}(this),Promise.resolve()}}class Yn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yn(this.firestore,e,this._key)}}class Pi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pi(this.firestore,e,this._query)}}class Pu extends Pi{constructor(e,t,r){super(e,t,Wh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yn(this.firestore,null,new Be(e))}withConverter(e){return new Pu(this.firestore,e,this._path)}}function kS(n,e,...t){if(n=(0,k.m9)(n),aE("collection","path",e),n instanceof Ey){const r=Xt.fromString(e,...t);return cT(r),new Pu(n,null,r)}{if(!(n instanceof Yn||n instanceof Pu))throw new xe(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return cT(r),new Pu(n.firestore,null,r)}}function uE(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=_C.R()),aE("doc","path",e),n instanceof Ey){const r=Xt.fromString(e,...t);return lT(r),new Yn(n,null,new Be(r))}{if(!(n instanceof Yn||n instanceof Pu))throw new xe(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return lT(r),new Yn(n.firestore,n instanceof Pu?n.converter:null,new Be(r))}}function s(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof Yn||n instanceof Pu)&&(e instanceof Yn||e instanceof Pu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function o(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof Pi&&e instanceof Pi&&n.firestore===e.firestore&&fg(n._query,e._query)&&n.converter===e.converter}class u{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new Vg(this,"async_queue_retry"),this.Ua=()=>{const t=W_();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=W_();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=W_();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new Gr;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,ge.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!pd(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,$r("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const i=Ow.createAndSchedule(this,e,t,r,a=>this.Qa(a));return this.Oa.push(i),i}qa(){this.Fa&&it()}verifyOperationInProgress(){}ja(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function c(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class h{constructor(){this._progressObserver={},this._taskCompletionResolver=new Gr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class v extends Ey{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new u,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||M(this),this._firestoreClient.terminate()}}function x(n){return n._firestoreClient||M(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function M(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new p0(n._databaseId,a,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var a,p;n._firestoreClient=new GM(n._authCredentials,n._appCheckCredentials,n._queue,r)}function K(n,e,t){const r=new Gr;return n.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield TS(n,t),yield DS(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===ae.FAILED_PRECONDITION||a.code===ae.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function mn(n){if(n._initialized||n._terminated)throw new xe(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Er{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _o{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _o(vr.fromBase64String(e))}catch(t){throw new xe(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _o(vr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ku{constructor(e){this._methodName=e}}class bf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wt(this._lat,e._lat)||Wt(this._long,e._long)}}const lE=/^__.*__$/;class cE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Vl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yh(e,this.data,t,this.fieldTransforms)}}class by{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Vl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Cy(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class Cf{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ja(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new Cf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.ec(e),i}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.Ja(),i}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return fT(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(Cy(this.Ya)&&lE.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class dE{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Lg(e)}uc(e,t,r,i=!1){return new Cf({Ya:e,methodName:t,oc:r,path:mi.emptyPath(),tc:!1,rc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Zg(n){const e=n._freezeSettings(),t=Lg(n._databaseId);return new dE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function dT(n,e,t,r,i,a={}){const l=n.uc(a.merge||a.mergeFields?2:0,e,t,i);VS("Data must be an object, but it was:",l,r);const p=YM(r,l);let _,E;if(a.merge)_=new xa(l.fieldMask),E=l.fieldTransforms;else if(a.mergeFields){const D=[];for(const S of a.mergeFields){const P=US(e,S,t);if(!l.contains(P))throw new xe(ae.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);JM(D,P)||D.push(P)}_=new xa(D),E=l.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,E=l.fieldTransforms;return new cE(new _i(p),_,E)}class hE extends ku{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hE}}function ZM(n,e,t){return new Cf({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class OS extends ku{_toFieldTransform(e){return new _g(e.path,new Zh)}isEqual(e){return e instanceof OS}}class fF extends ku{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=ZM(this,e,!0),r=this.ac.map(a=>Kg(a,t)),i=new cd(r);return new _g(e.path,i)}isEqual(e){return this===e}}class pF extends ku{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=ZM(this,e,!0),r=this.ac.map(a=>Kg(a,t)),i=new dd(r);return new _g(e.path,i)}isEqual(e){return this===e}}class gF extends ku{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new Kh(e.M,P0(e.M,this.cc));return new _g(e.path,t)}isEqual(e){return this===e}}function FS(n,e,t,r){const i=n.uc(1,e,t);VS("Data must be an object, but it was:",i,r);const a=[],l=_i.empty();Pl(r,(_,E)=>{const D=hT(e,_,t);E=(0,k.m9)(E);const S=i.nc(D);if(E instanceof hE)a.push(D);else{const P=Kg(E,S);null!=P&&(a.push(D),l.set(D,P))}});const p=new xa(a);return new by(l,p,i.fieldTransforms)}function LS(n,e,t,r,i,a){const l=n.uc(1,e,t),p=[US(e,r,t)],_=[i];if(a.length%2!=0)throw new xe(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<a.length;P+=2)p.push(US(e,a[P])),_.push(a[P+1]);const E=[],D=_i.empty();for(let P=p.length-1;P>=0;--P)if(!JM(E,p[P])){const V=p[P];let H=_[P];H=(0,k.m9)(H);const le=l.nc(V);if(H instanceof hE)E.push(V);else{const Ee=Kg(H,le);null!=Ee&&(E.push(V),D.set(V,Ee))}}const S=new xa(E);return new by(D,S,l.fieldTransforms)}function KM(n,e,t,r=!1){return Kg(t,n.uc(r?4:3,e))}function Kg(n,e){if(QM(n=(0,k.m9)(n)))return VS("Unsupported field value:",e,n),YM(n,e);if(n instanceof ku)return function(t,r){if(!Cy(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let p=Kg(l,r.sc(a));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return P0(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=ar.fromDate(t);return{timestampValue:Eg(r.M,i)}}if(t instanceof ar){const i=new ar(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Eg(r.M,i)}}if(t instanceof bf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof _o)return{bytesValue:BC(r.M,t._byteString)};if(t instanceof Yn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ic(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:k_(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${wy(t)}`)}(n,e)}function YM(n,e){const t={};return m_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pl(n,(r,i)=>{const a=Kg(i,e.Za(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function QM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ar||n instanceof bf||n instanceof _o||n instanceof Yn||n instanceof ku)}function VS(n,e,t){if(!QM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=wy(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function US(n,e,t){if((e=(0,k.m9)(e))instanceof Er)return e._internalPath;if("string"==typeof e)return hT(n,e);throw fT("Field path arguments must be of type string or ",n,!1,void 0,t)}const mF=new RegExp("[~\\*/\\[\\]]");function hT(n,e,t){if(e.search(mF)>=0)throw fT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Er(...e.split("."))._internalPath}catch(r){throw fT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function fT(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(a||l)&&(_+=" (found",a&&(_+=` in field ${r}`),l&&(_+=` in document ${i}`),_+=")"),new xe(ae.INVALID_ARGUMENT,p+n+_)}function JM(n,e){return n.some(t=>t.isEqual(e))}class fE{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Yn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _F(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class _F extends fE{data(){return super.data()}}function pT(n,e){return"string"==typeof e?hT(n,e):e instanceof Er?e._internalPath:e._delegate._internalPath}class Yg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dd extends fE{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(pT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class pE extends Dd{data(e={}){return super.data(e)}}class If{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Yg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new pE(this._firestore,this._userDataWriter,r.key,r,new Yg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new pE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Yg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const p=new pE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Yg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,E=-1;return 0!==l.type&&(_=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),E=a.indexOf(l.doc.key)),{type:yF(l.type),doc:p,oldIndex:_,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function yF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function XM(n,e){return n instanceof Dd&&e instanceof Dd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof If&&e instanceof If&&n._firestore===e._firestore&&o(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function eN(n){if(Ll(n)&&0===n.explicitOrderBy.length)throw new xe(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gE{}function Tf(n,...e){for(const t of e)n=t._apply(n);return n}class vF extends gE{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=Zg(e.firestore),r=function(i,a,l,p,_,E,D){let S;if(_.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new xe(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){oN(D,E);const V=[];for(const H of D)V.push(sN(p,i,H));S={arrayValue:{values:V}}}else S=sN(p,i,D)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||oN(D,E),S=KM(l,"where",D,"in"===E||"not-in"===E);const P=yi.create(_,E,S);return function(V,H){if(H.S()){const Ee=D_(V);if(null!==Ee&&!Ee.isEqual(H.field))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ee.toString()}' and '${H.field.toString()}'`);const Ye=A0(V);null!==Ye&&aN(0,H.field,Ye)}const le=function(Ee,Ye){for(const qe of Ee.filters)if(Ye.indexOf(qe.op)>=0)return qe.op;return null}(V,function(Ee){switch(Ee){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(H.op));if(null!==le)throw new xe(ae.INVALID_ARGUMENT,le===H.op?`Invalid query. You cannot use more than one '${H.op.toString()}' filter.`:`Invalid query. You cannot use '${H.op.toString()}' filters with '${le.toString()}' filters.`)}(i,P),P}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new Pi(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new Du(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class EF extends gE{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new xe(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Mi(i,a);return function(p,_){if(null===A0(p)){const E=D_(p);null!==E&&aN(0,E,_.field)}}(r,l),l}(e._query,this.hc,this.dc);return new Pi(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Du(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class tN extends gE{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new Pi(e.firestore,e.converter,hg(e._query,this._c,this.wc))}}class nN extends gE{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=iN(e,this.type,this.mc,this.gc);return new Pi(e.firestore,e.converter,(i=t,new Du((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class rN extends gE{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=iN(e,this.type,this.mc,this.gc);return new Pi(e.firestore,e.converter,(i=t,new Du((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function iN(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof fE)return function(i,a,l,p,_){if(!p)throw new xe(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const E=[];for(const D of ld(i))if(D.field.isKeyField())E.push(Hh(a,p.key));else{const S=p.data.field(D.field);if(y_(S))throw new xe(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const P=D.field.canonicalString();throw new xe(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}E.push(S)}return new ri(E,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Zg(n.firestore);return function(a,l,p,_,E,D){const S=a.explicitOrderBy;if(E.length>S.length)throw new xe(ae.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let V=0;V<E.length;V++){const H=E[V];if(S[V].field.isKeyField()){if("string"!=typeof H)throw new xe(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof H}`);if(!S0(a)&&-1!==H.indexOf("/"))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${H}' contains a slash.`);const le=a.path.child(Xt.fromString(H));if(!Be.isDocumentKey(le))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${le}' is not because it contains an odd number of segments.`);const Ee=new Be(le);P.push(Hh(l,Ee))}else{const le=KM(p,_,H);P.push(le)}}return new ri(P,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function sN(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new xe(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!S0(e)&&-1!==t.indexOf("/"))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Xt.fromString(t));if(!Be.isDocumentKey(r))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hh(n,new Be(r))}if(t instanceof Yn)return Hh(n,t._key);throw new xe(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wy(t)}.`)}function oN(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(ae.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function aN(n,e,t){if(!t.isEqual(e))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class BS{convertValue(e,t="none"){switch(Ol(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){const r={};return Pl(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new bf(Zn(e.latitude),Zn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=dA(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ag(e));default:return null}}convertTimestamp(e){const t=kl(e);return new ar(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Xt.fromString(e);Rt(GC(r));const i=new Wo(r.get(1),r.get(3)),a=new Be(r.popFirst(5));return i.isEqual(t)||$r(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function gT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class xF extends BS{constructor(e){super(),this.firestore=e}convertBytes(e){return new _o(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yn(this.firestore,null,t)}}class uN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Zg(e)}set(e,t,r){this._verifyNotCommitted();const i=Df(e,this._firestore),a=gT(i.converter,t,r),l=dT(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,kr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Df(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof Er?LS(this._dataReader,"WriteBatch.update",a._key,t,r,i):FS(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,kr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Df(e,this._firestore);return this._mutations=this._mutations.concat(new Qh(t._key,kr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Df(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new xe(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Qg extends BS{constructor(e){super(),this.firestore=e}convertBytes(e){return new _o(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yn(this.firestore,null,t)}}function lN(n,e,t){n=on(n,Yn);const r=on(n.firestore,v),i=gT(n.converter,e,t);return Iy(r,[dT(Zg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,kr.none())])}function cN(n,e,t,...r){n=on(n,Yn);const i=on(n.firestore,v),a=Zg(i);let l;return l="string"==typeof(e=(0,k.m9)(e))||e instanceof Er?LS(a,"updateDoc",n._key,e,t,r):FS(a,"updateDoc",n._key,e),Iy(i,[l.toMutation(n._key,kr.exists(!0))])}function dN(n,...e){var t,r,i;n=(0,k.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||c(e[l])||(a=e[l],l++);const p={includeMetadataChanges:a.includeMetadataChanges};if(c(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let _,E,D;if(n instanceof Yn)E=on(n.firestore,v),D=Wh(n._key.path),_={next:S=>{e[l]&&e[l](jS(E,n,S))},error:e[l+1],complete:e[l+2]};else{const S=on(n,Pi);E=on(S.firestore,v),D=S._query;const P=new Qg(E);_={next:V=>{e[l]&&e[l](new If(E,P,S,V))},error:e[l+1],complete:e[l+2]},eN(n._query)}return function(S,P,V,H){const le=new Wg(H),Ee=new Lw(P,le,V);return S.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return yf(yield wf(S),Ee)})),()=>{le.pa(),S.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return GI(yield wf(S),Ee)}))}}(x(E),D,p,_)}function Iy(n,e){return function(t,r){const i=new Gr;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function gS(n,e,t){return Gg.apply(this,arguments)}(yield oE(t),r,i)})),i.promise}(x(n),e)}function jS(n,e,t){const r=t.docs.get(e._key),i=new Qg(n);return new Dd(n,i,e._key,r,new Yg(t.hasPendingWrites,t.fromCache),e.converter)}class UF extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Zg(e)}get(e){const t=Df(e,this._firestore),r=new xF(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return it();const a=i[0];if(a.isFoundDocument())return new fE(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new fE(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const i=Df(e,this._firestore),a=gT(i.converter,t,r),l=dT(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Df(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof Er?LS(this._dataReader,"Transaction.update",a._key,t,r,i):FS(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Df(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Df(e,this._firestore),r=new Qg(this._firestore);return super.get(e).then(i=>new Dd(this._firestore,r,t._key,i._document,new Yg(!1,!1),t.converter))}}function HS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function fN(){if("undefined"==typeof Uint8Array)throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function pN(){if(!function vC(){return"undefined"!=typeof atob}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){sd=Yi.SDK_VERSION,(0,Yi._registerComponent)(new co.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new v(i,new aA(t.getProvider("auth-internal")),new g_(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,Yi.registerVersion)(gC,"3.4.7",n),(0,Yi.registerVersion)(gC,"3.4.7","esm2017")}();class mE{constructor(e){this._delegate=e}static fromBase64String(e){return pN(),new mE(_o.fromBase64String(e))}static fromUint8Array(e){return fN(),new mE(_o.fromUint8Array(e))}toBase64(){return pN(),this._delegate.toBase64()}toUint8Array(){return fN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function $S(n){return function ZF(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class KF{enableIndexedDbPersistence(e,t){return function L(n,e){mn(n=on(n,v));const t=x(n),r=n._freezeSettings(),i=new qg;return K(t,i,new rT(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function $(n){mn(n=on(n,v));const e=x(n),t=n._freezeSettings(),r=new qg;return K(e,r,new Xw(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function me(n){if(n._initialized&&!n._terminated)throw new xe(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Gr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(t=(0,ge.Z)(function*(r){if(!Zo.vt())return Promise.resolve();const i=r+"main";yield Zo.delete(i)}),function(r){return t.apply(this,arguments)})(gw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class gN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Wo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&sg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function WM(n,e,t,r={}){var i;const a=(n=on(n,Ey))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&sg("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,p;if("string"==typeof r.mockUserToken)l=r.mockUserToken,p=gi.MOCK_USER;else{l=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new xe(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new gi(_)}n._authCredentials=new Vh(new sA(l,p))}}(this._delegate,e,t,r)}enableNetwork(){return function je(n){return function vy(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield iE(n),t=yield sE(n);return e.setNetworkEnabled(!0),function(r){const i=Ke(r);return i.lu.delete(0),Ug(i)}(t)}))}(x(n=on(n,v)))}(this._delegate)}disableNetwork(){return function st(n){return function AS(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield iE(n),t=yield sE(n);return e.setNetworkEnabled(!1),(r=(0,ge.Z)(function*(i){const a=Ke(i);a.lu.add(0),yield xu(a),a._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(x(n=on(n,v)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,uT("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Oe(n){return function(e){const t=new Gr;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function VM(n,e){return ay.apply(this,arguments)}(yield oE(e),t)})),t.promise}(x(n=on(n,v)))}(this._delegate)}onSnapshotsInSync(e){return function VF(n,e){return function xS(n,e){const t=new Wg(e);return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield wf(n),i=t,Ke(r).Tu.add(i),void i.next();var r,i})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield wf(n),i=t,void Ke(r).Tu.delete(i);var r,i}))}}(x(n=on(n,v)),c(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ty(this,kS(this._delegate,e))}catch(t){throw js(t,"collection()","Firestore.collection()")}}doc(e){try{return new Pa(this,uE(this._delegate,e))}catch(t){throw js(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Hs(this,function zM(n,e){if(n=on(n,Ey),aE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Pi(n,null,(t=e,new Du(Xt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw js(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function BF(n,e){return function RS(n,e){const t=new Gr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const r=yield(i=n,my(i).then(a=>a.datastore));var i;new $M(n.asyncQueue,r,e,t).run()})),t.promise}(x(n=on(n,v)),t=>e(new UF(n,t)))}(this._delegate,t=>e(new mN(this,t)))}batch(){return x(this._delegate),new _N(new uN(this._delegate,e=>Iy(this._delegate,e)))}loadBundle(e){return function mt(n,e){const t=x(n=on(n,v)),r=new h;return function qM(n,e,t,r){const i=function(a,l){let p;return p="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,E){if(_ instanceof Uint8Array)return eE(_,E);if(_ instanceof ArrayBuffer)return eE(new Uint8Array(_),E);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new jM(_,l);var _}(t,Lg(e));n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function Jw(n,e,t){const r=Ke(n);var i;(i=(0,ge.Z)(function*(a,l,p){try{const _=yield l.getMetadata();if(yield function(P,V){const H=Ke(P),le=qr(V.createTime);return H.persistence.runTransaction("hasNewerBundle","readonly",Ee=>H.ds.getBundleMetadata(Ee,V.id)).then(Ee=>!!Ee&&Ee.createTime.compareTo(le)>=0)}(a.localStore,_))return yield l.close(),p._completeWith({taskState:"Success",documentsLoaded:(P=_).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);p._updateProgress(zI(_));const E=new Vw(_,a.localStore,l.M);let D=yield l.fa();for(;D;){const P=yield E.Nu(D);P&&p._updateProgress(P),D=yield l.fa()}const S=yield E.complete();return yield Mu(a,S.Ou,void 0),yield function(P,V){const H=Ke(P);return H.persistence.runTransaction("Save bundle","readwrite",le=>H.ds.saveBundleMetadata(le,V))}(a.localStore,_),p._completeWith(S.progress),Promise.resolve(S.Mu)}catch(_){return sg("SyncEngine",`Loading bundle failed with ${_}`),p._failWith(_),Promise.resolve(new Set)}var P}),function(a,l,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield oE(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Kt(n,e){return function MS(n,e){return n.asyncQueue.enqueue((0,ge.Z)(function*(){return function(t,r){const i=Ke(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.ds.getNamedQuery(a,r))}(yield _y(n),e)}))}(x(n=on(n,v)),e).then(t=>t?new Pi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Hs(this,t):null)}}class mT extends BS{constructor(e){super(),this.firestore=e}convertBytes(e){return new mE(new _o(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Pa.forKey(t,this.firestore,null)}}class mN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new mT(e)}get(e){const t=Xg(e);return this._delegate.get(t).then(r=>new _E(this._firestore,new Dd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Xg(e);return r?(HS("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Xg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Xg(e);return this._delegate.delete(t),this}}class _N{constructor(e){this._delegate=e}set(e,t,r){const i=Xg(e);return r?(HS("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Xg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Xg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Jg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new pE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new yE(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Jg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Jg(e,new mT(e),t),i.set(t,a)),a}}Jg.INSTANCES=new WeakMap;class Pa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new mT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Pa(t,new Yn(t._delegate,r,new Be(e)))}static forKey(e,t,r){return new Pa(t,new Yn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ty(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ty(this.firestore,kS(this._delegate,e))}catch(t){throw js(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof Yn&&s(this._delegate,e)}set(e,t){t=HS("DocumentReference.set",t);try{return t?lN(this._delegate,e,t):lN(this._delegate,e)}catch(r){throw js(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?cN(this._delegate,e):cN(this._delegate,e,t,...r)}catch(i){throw js(i,"updateDoc()","DocumentReference.update()")}}delete(){return function FF(n){return Iy(on(n.firestore,v),[new Qh(n._key,kr.none())])}(this._delegate)}onSnapshot(...e){const t=yN(e),r=vN(e,i=>new _E(this.firestore,new Dd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return dN(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function MF(n){n=on(n,Yn);const e=on(n.firestore,v),t=x(e),r=new Qg(e);return function sT(n,e){const t=new Gr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(i,a,l){try{const p=yield function(_,E){const D=Ke(_);return D.persistence.runTransaction("read document","readonly",S=>D.ai.Bs(S,E))}(i,a);p.isFoundDocument()?l.resolve(p):p.isNoDocument()?l.resolve(null):l.reject(new xe(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const _=Ql(p,`Failed to get document '${a} from cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield _y(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Dd(e,r,n._key,i,new Yg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function NF(n){n=on(n,Yn);const e=on(n.firestore,v);return zg(x(e),n._key,{source:"server"}).then(t=>jS(e,n,t))}(this._delegate):function RF(n){n=on(n,Yn);const e=on(n.firestore,v);return zg(x(e),n._key).then(t=>jS(e,n,t))}(this._delegate),t.then(r=>new _E(this.firestore,new Dd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Pa(this.firestore,this._delegate.withConverter(e?Jg.getInstance(this.firestore,e):null))}}function js(n,e,t){return n.message=n.message.replace(e,t),n}function yN(n){for(const e of n)if("object"==typeof e&&!$S(e))return e;return{}}function vN(n,e){var t,r;let i;return i=$S(n[0])?n[0]:$S(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class _E{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Pa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return XM(this._delegate,e._delegate)}}class yE extends _E{data(e){const t=this._delegate.data(e);return function TM(n,e){n||it()}(void 0!==t),t}}class Hs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new mT(e)}where(e,t,r){try{return new Hs(this.firestore,Tf(this._delegate,function wF(n,e,t){const r=e,i=pT("where",n);return new vF(i,r,t)}(e,t,r)))}catch(i){throw js(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Hs(this.firestore,Tf(this._delegate,function bF(n,e="asc"){const t=e,r=pT("orderBy",n);return new EF(r,t)}(e,t)))}catch(r){throw js(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Hs(this.firestore,Tf(this._delegate,function CF(n){return NS("limit",n),new tN("limit",n,"F")}(e)))}catch(t){throw js(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Hs(this.firestore,Tf(this._delegate,function IF(n){return NS("limitToLast",n),new tN("limitToLast",n,"L")}(e)))}catch(t){throw js(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Hs(this.firestore,Tf(this._delegate,function TF(...n){return new nN("startAt",n,!0)}(...e)))}catch(t){throw js(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Hs(this.firestore,Tf(this._delegate,function DF(...n){return new nN("startAfter",n,!1)}(...e)))}catch(t){throw js(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Hs(this.firestore,Tf(this._delegate,function AF(...n){return new rN("endBefore",n,!1)}(...e)))}catch(t){throw js(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Hs(this.firestore,Tf(this._delegate,function SF(...n){return new rN("endAt",n,!0)}(...e)))}catch(t){throw js(t,"endAt()","Query.endAt()")}}isEqual(e){return o(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function kF(n){n=on(n,Pi);const e=on(n.firestore,v),t=x(e),r=new Qg(e);return function SS(n,e){const t=new Gr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(i,a,l){try{const p=yield Pg(i,a,!0),_=new ry(a,p.hi),E=_.Gu(p.documents),D=_.applyChanges(E,!1);l.resolve(D.snapshot)}catch(p){const _=Ql(p,`Failed to execute query '${a} against cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield _y(n),e,t);var r})),t.promise}(t,n._query).then(i=>new If(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function OF(n){n=on(n,Pi);const e=on(n.firestore,v),t=x(e),r=new Qg(e);return oT(t,n._query,{source:"server"}).then(i=>new If(e,r,n,i))}(this._delegate):function PF(n){n=on(n,Pi);const e=on(n.firestore,v),t=x(e),r=new Qg(e);return eN(n._query),oT(t,n._query).then(i=>new If(e,r,n,i))}(this._delegate),t.then(r=>new GS(this.firestore,new If(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=yN(e),r=vN(e,i=>new GS(this.firestore,new If(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return dN(this._delegate,t,r)}withConverter(e){return new Hs(this.firestore,this._delegate.withConverter(e?Jg.getInstance(this.firestore,e):null))}}class QF{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new yE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class GS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Hs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new yE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new QF(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new yE(this._firestore,r))})}isEqual(e){return XM(this._delegate,e._delegate)}}class Ty extends Hs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Pa(this.firestore,e):null}doc(e){try{return new Pa(this.firestore,void 0===e?uE(this._delegate):uE(this._delegate,e))}catch(t){throw js(t,"doc()","CollectionReference.doc()")}}add(e){return function LF(n,e){const t=on(n.firestore,v),r=uE(n),i=gT(n.converter,e);return Iy(t,[dT(Zg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,kr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Pa(this.firestore,t))}isEqual(e){return s(this._delegate,e._delegate)}withConverter(e){return new Ty(this.firestore,this._delegate.withConverter(e?Jg.getInstance(this.firestore,e):null))}}function Xg(n){return on(n,Yn)}class qS{constructor(...e){this._delegate=new Er(...e)}static documentId(){return new qS(mi.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof Er&&this._delegate._internalPath.isEqual(e._internalPath)}}class em{constructor(e){this._delegate=e}static serverTimestamp(){const e=function HF(){return new OS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new em(e)}static delete(){const e=function jF(){return new hE("deleteField")}();return e._methodName="FieldValue.delete",new em(e)}static arrayUnion(...e){const t=function $F(...n){return new fF("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new em(t)}static arrayRemove(...e){const t=function GF(...n){return new pF("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new em(t)}static increment(e){const t=function qF(n){return new gF("increment",n)}(e);return t._methodName="FieldValue.increment",new em(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const JF={Firestore:gN,GeoPoint:bf,Timestamp:ar,Blob:mE,Transaction:mN,WriteBatch:_N,DocumentReference:Pa,DocumentSnapshot:_E,Query:Hs,QueryDocumentSnapshot:yE,QuerySnapshot:GS,CollectionReference:Ty,FieldPath:qS,FieldValue:em,setLogLevel:function YF(n){!function iA(n){Nl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function eL(n){(function XF(n,e){n.INTERNAL.registerComponent(new co.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},JF)))})(n,(e,t)=>new gN(e,t,new KF)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(wb.Z);var WS=F(6451),_T=F(5363),tL=F(6063);class nL extends Gi.x{constructor(e=1/0,t=1/0,r=tL.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let p=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)p=_;p&&r.splice(0,p+1)}}}var wN=F(3099);function EN(n,e,t){var r,i;let a,l=!1;return n&&"object"==typeof n?(a=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,l=!!n.refCount,t=n.scheduler):a=null!=n?n:1/0,(0,wN.B)({connector:()=>new nL(a,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:l})}function bN(n,e){return(0,Wd.m)(e)?Tn(()=>n,e):Tn(()=>n)}var zS=F(9468);F(5867);const IN=new Map,aL={activated:!1,tokenObservers:[]},uL={initialized:!1,enabled:!1};function ki(n){return IN.get(n)||aL}function Ou(n,e){IN.set(n,e)}function vT(){return uL}class fL{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ge.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function pL(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const $s=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function DN(n){if(!ki(n).activated)throw $s.create("use-before-activation",{appName:n.name})}function QS(n,e){return JS.apply(this,arguments)}function JS(){return JS=(0,ge.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,p;try{l=yield fetch(n,a)}catch(S){throw $s.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==l.status)throw $s.create("fetch-status-error",{httpStatus:l.status});try{p=yield l.json()}catch(S){throw $s.create("fetch-parse-error",{originalErrorMessage:S.message})}const _=p.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw $s.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const E=1e3*Number(_[1]),D=Date.now();return{token:p.attestationToken,expireTimeMillis:D+E,issuedAtTimeMillis:D}}),JS.apply(this,arguments)}function vL(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const vE="firebase-app-check-store";let bT=null;function SN(){return bT||(bT=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e($s.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(vE,{keyPath:"compositeKey"})}}catch(t){e($s.create("storage-open",{originalErrorMessage:t.message}))}}),bT)}function XS(){return XS=(0,ge.Z)(function*(n,e){const r=(yield SN()).transaction(vE,"readwrite"),a=r.objectStore(vE).put({compositeKey:n,value:e});return new Promise((l,p)=>{a.onsuccess=_=>{l()},r.onerror=_=>{var E;p($s.create("storage-set",{originalErrorMessage:null===(E=_.target.error)||void 0===E?void 0:E.message}))}})}),XS.apply(this,arguments)}const wE=new $o.Yd("@firebase/app-check");function NN(n,e){return(0,k.hl)()?function CL(n,e){return function xN(n,e){return XS.apply(this,arguments)}(function MN(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{wE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function PN(){return vT().enabled}function kN(){return rx.apply(this,arguments)}function rx(){return rx=(0,ge.Z)(function*(){const n=vT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),rx.apply(this,arguments)}const xL={error:"UNKNOWN_ERROR"};function RL(n){return k.US.encodeString(JSON.stringify(n),!1)}function CT(n){return ix.apply(this,arguments)}function ix(){return ix=(0,ge.Z)(function*(n,e=!1){const t=n.app;DN(t);const r=ki(t);let a,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&IT(_)&&(i=_)}if(!e&&i&&IT(i))return{token:i.token};let p,l=!1;if(PN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=QS(vL(t,yield kN()),n.heartbeatServiceProvider).then(E=>(r.exchangeTokenPromise=void 0,E)),l=!0);const _=yield r.exchangeTokenPromise;return yield NN(t,_),Ou(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),l=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?wE.warn(_.message):wE.error(_),a=_}return i?(p={token:i.token},Ou(t,Object.assign(Object.assign({},r),{token:i})),yield NN(t,i)):p=NL(a),l&&FN(t,p),p}),ix.apply(this,arguments)}function ox(n,e){const t=ki(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ou(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function ON(n){const{app:e}=n,t=ki(e);let r=t.tokenRefresher;r||(r=function ML(n){const{app:e}=n;return new fL((0,ge.Z)(function*(){let r;if(r=ki(e).token?yield CT(n,!0):yield CT(n),r.error)throw r.error}),()=>!0,()=>{const t=ki(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ou(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function FN(n,e){const t=ki(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function IT(n){return n.expireTimeMillis-Date.now()>0}function NL(n){return{token:RL(xL),error:n}}class PL{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ki(this.app);for(const t of e)ox(this.app,t.next);return Promise.resolve()}}const GN="app-check-internal";!function zL(){(0,Yi._registerComponent)(new co.wA("app-check",n=>function kL(n,e){return new PL(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(GN).initialize()})),(0,Yi._registerComponent)(new co.wA(GN,n=>function OL(n){return{getToken:e=>CT(n,e),addTokenListener:e=>function sx(n,e,t,r){const{app:i}=n,a=ki(i),l={next:t,error:r,type:e};if(Ou(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,l]})),a.token&&IT(a.token)){const p=a.token;Promise.resolve().then(()=>{t({token:p.token}),ON(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>ON(n))}(n,"INTERNAL",e),removeTokenListener:e=>ox(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Yi.registerVersion)("@firebase/app-check","0.5.5")}();class EE{constructor(){return(0,hn.vb)("app-check")}}"undefined"!=typeof window&&window;var DT=F(127);const dx=new d.OlP("angularfire2.auth.use-emulator"),hx=new d.OlP("angularfire2.auth.settings"),fx=new d.OlP("angularfire2.auth.tenant-id"),px=new d.OlP("angularfire2.auth.langugage-code"),gx=new d.OlP("angularfire2.auth.use-device-language"),mx=new d.OlP("angularfire.auth.persistence"),_x=(n,e,t,r,i,a,l,p)=>(0,_r.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),l)for(const[E,D]of Object.entries(l))_.settings[E]=D;return p&&_.setPersistence(p),_},[t,r,i,a,l,p]);let bE=(()=>{class n{constructor(t,r,i,a,l,p,_,E,D,S,P,V){const H=new Gi.x,le=ft(void 0).pipe((0,_T.Q)(l.outsideAngular),Tn(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,1254)))),(0,lt.U)(()=>(0,_r.on)(t,a,r)),(0,lt.U)(Ee=>_x(Ee,a,p,E,D,S,_,P)),EN({bufferSize:1,refCount:!1}));if(xr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ft(null);else{le.pipe(ya()).subscribe();const Ye=le.pipe(Tn(Ze=>Ze.getRedirectResult().then(Pt=>Pt,()=>null)),hn.iC,EN({bufferSize:1,refCount:!1})),qe=le.pipe(Tn(Ze=>new fr.y(Pt=>({unsubscribe:a.runOutsideAngular(()=>Ze.onAuthStateChanged(Vt=>Pt.next(Vt),Vt=>Pt.error(Vt),()=>Pt.complete()))})))),ct=le.pipe(Tn(Ze=>new fr.y(Pt=>({unsubscribe:a.runOutsideAngular(()=>Ze.onIdTokenChanged(Vt=>Pt.next(Vt),Vt=>Pt.error(Vt),()=>Pt.complete()))}))));this.authState=Ye.pipe(bN(qe),(0,zS.R)(l.outsideAngular),(0,_T.Q)(l.insideAngular)),this.user=Ye.pipe(bN(ct),(0,zS.R)(l.outsideAngular),(0,_T.Q)(l.insideAngular)),this.idToken=this.user.pipe(Tn(Ze=>Ze?(0,cn.D)(Ze.getIdToken()):ft(null))),this.idTokenResult=this.user.pipe(Tn(Ze=>Ze?(0,cn.D)(Ze.getIdTokenResult()):ft(null))),this.credential=(0,WS.T)(Ye,H,this.authState.pipe(Ai(Ze=>!Ze))).pipe((0,lt.U)(Ze=>(null==Ze?void 0:Ze.user)?Ze:null),(0,zS.R)(l.outsideAngular),(0,_T.Q)(l.insideAngular))}return(0,_r.pX)(this,le,a,{spy:{apply:(Ee,Ye,qe)=>{(Ee.startsWith("signIn")||Ee.startsWith("createUser"))&&qe.then(ct=>H.next(ct))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_r.Dh),d.LFG(_r.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(hn.HU),d.LFG(dx,8),d.LFG(hx,8),d.LFG(fx,8),d.LFG(px,8),d.LFG(gx,8),d.LFG(mx,8),d.LFG(EE,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),XL=(()=>{class n{constructor(){DT.Z.registerVersion("angularfire",hn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[bE]}),n})();function WN(n,e){return function eV(n,e=Op.z){return new fr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function yx(n,e){return WN(n,e).pipe((0,lt.U)(t=>({payload:t,type:"query"})))}function AT(n,e){return yx(n,e).pipe(di(void 0),Cv(),(0,lt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,p)=>{const _=i.find(D=>D.doc.ref.isEqual(l.ref)),E=null==t?void 0:t.payload.docs.find(D=>D.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&E&&JSON.stringify(E.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:l}})}),a}))}function zN(n,e,t){return AT(n,t).pipe(Yr((r,i)=>function nV(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function rV(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return vx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return vx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return vx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),yb(),(0,lt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function vx(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function ZN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class KN{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=AT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,lt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(di(void 0),Cv(),Ai(([r,i])=>i.length>0||!r),(0,lt.U)(([r,i])=>i),hn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Yr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=ZN(e);return zN(this.query,t,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(e={}){return yx(this.query,this.afs.schedulers.outsideAngular).pipe((0,lt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),hn.iC)}get(e){return(0,cn.D)(this.query.get(e)).pipe(hn.iC)}add(e){return this.ref.add(e)}doc(e){return new YN(this.ref.doc(e),this.afs)}}class YN{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=XN(r,t);return new KN(i,a,this.afs)}snapshotChanges(){return function tV(n,e){return WN(n,e).pipe(di(void 0),Cv(),(0,lt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,lt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,cn.D)(this.ref.get(e)).pipe(hn.iC)}}class iV{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?AT(this.query,this.afs.schedulers.outsideAngular).pipe((0,lt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ai(t=>t.length>0),hn.iC):AT(this.query,this.afs.schedulers.outsideAngular).pipe(hn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Yr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=ZN(e);return zN(this.query,t,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(e={}){return yx(this.query,this.afs.schedulers.outsideAngular).pipe((0,lt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),hn.iC)}get(e){return(0,cn.D)(this.query.get(e)).pipe(hn.iC)}}const QN=new d.OlP("angularfire2.enableFirestorePersistence"),JN=new d.OlP("angularfire2.firestore.persistenceSettings"),sV=new d.OlP("angularfire2.firestore.settings"),oV=new d.OlP("angularfire2.firestore.use-emulator");function XN(n,e=(t=>t)){return{query:e(n),ref:n}}let eP=(()=>{class n{constructor(t,r,i,a,l,p,_,E,D,S,P,V,H,le,Ee,Ye,qe){this.schedulers=_;const ct=(0,_r.on)(t,p,r),Ze=D;S&&_x(ct,p,P,H,le,Ee,V,Ye),[this.firestore,this.persistenceEnabled$]=(0,_r.cc)(`${ct.name}.firestore`,"AngularFirestore",ct.name,()=>{const Pt=p.runOutsideAngular(()=>ct.firestore());if(a&&Pt.settings(a),Ze&&Pt.useEmulator(...Ze),i&&!xr(l)){const Vt=()=>{try{return(0,cn.D)(Pt.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(wo){return"undefined"!=typeof console&&console.warn(wo),ft(!1)}};return[Pt,p.runOutsideAngular(Vt)]}return[Pt,ft(!1)]},[a,Ze,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=XN(i,r),p=this.schedulers.ngZone.run(()=>a);return new KN(p,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new iV(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new YN(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_r.Dh),d.LFG(_r.xv,8),d.LFG(QN,8),d.LFG(sV,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(hn.HU),d.LFG(JN,8),d.LFG(oV,8),d.LFG(bE,8),d.LFG(dx,8),d.LFG(hx,8),d.LFG(fx,8),d.LFG(px,8),d.LFG(gx,8),d.LFG(mx,8),d.LFG(EE,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),aV=(()=>{class n{constructor(){DT.Z.registerVersion("angularfire",hn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:QN,useValue:!0},{provide:JN,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[eP]}),n})(),CE=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.user={email:null,idToken:null},this.subject=new Di(null),this.user$=this.subject.asObservable(),this.afAuth.authState.subscribe(l=>{l?(this.user.email=l.email,l.getIdToken().then(p=>{this.user.idToken=p,this.subject.next(this.user)})):this.subject.next(null)}),this.isLogIn$=this.user$.pipe((0,lt.U)(l=>!!l)),this.isLogOut$=this.isLogIn$.pipe((0,lt.U)(l=>!l))}signIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{var a;return(null===(a=i.user)||void 0===a?void 0:a.email)&&(this.user.email=i.user.email,i.user.getIdToken().then(l=>{this.user.idToken=l,this.subject.next(this.user)})),i}).catch(i=>{window.alert(i.message)})}signOut(){this.afAuth.signOut(),this.subject.next(null)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(eP),d.LFG(bE),d.LFG(Ri),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var uV=F(5032);const tP="@firebase/database";let wx="";function rP(n){wx=n}class dV{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class hV{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const iP=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new dV(e)}}catch(e){}return new hV},tm=iP("localStorage"),Ex=iP("sessionStorage"),Dy=new $o.Yd("@firebase/database"),sP=function(){let n=1;return function(){return n++}}(),oP=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},IE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=IE.apply(null,r):e+="object"==typeof r?(0,k.Pz)(r):r,e+=" "}return e};let nm=null,aP=!0;const uP=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Dy.logLevel=$o.in.VERBOSE,nm=Dy.log.bind(Dy),e&&Ex.set("logging_enabled",!0)):"function"==typeof n?nm=n:(nm=null,Ex.remove("logging_enabled"))},Oi=function(...n){if(!0===aP&&(aP=!1,null===nm&&!0===Ex.get("logging_enabled")&&uP(!0)),nm){const e=IE.apply(null,n);nm(e)}},TE=function(n){return function(...e){Oi(n,...e)}},bx=function(...n){const e="FIREBASE INTERNAL ERROR: "+IE(...n);Dy.error(e)},Jl=function(...n){const e=`FIREBASE FATAL ERROR: ${IE(...n)}`;throw Dy.error(e),new Error(e)},Gs=function(...n){const e="FIREBASE WARNING: "+IE(...n);Dy.warn(e)},ST=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ad="[MIN_NAME]",Xl="[MAX_NAME]",rm=function(n,e){if(n===e)return 0;if(n===Ad||e===Xl)return-1;if(e===Ad||n===Xl)return 1;{const t=xT(n),r=xT(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},gV=function(n,e){return n===e?0:n<e?-1:1},DE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Pz)(e))},Cx=function(n){if("object"!=typeof n||null===n)return(0,k.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Pz)(e[r]),t+=":",t+=Cx(n[e[r]]);return t+="}",t},lP=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Fi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const cP=function(n){(0,k.hu)(!ST(n),"Invalid JSON number");const r=1023;let i,a,l,p,_;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(p=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=p+r,l=Math.round(n*Math.pow(2,52-p)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const E=[];for(_=52;_;_-=1)E.push(l%2?1:0),l=Math.floor(l/2);for(_=11;_;_-=1)E.push(a%2?1:0),a=Math.floor(a/2);E.push(i?1:0),E.reverse();const D=E.join("");let S="";for(_=0;_<64;_+=8){let P=parseInt(D.substr(_,8),2).toString(16);1===P.length&&(P="0"+P),S+=P}return S.toLowerCase()},vV=new RegExp("^-?(0*)\\d{1,10}$"),dP=-2147483648,Ix=2147483647,xT=function(n){if(vV.test(n)){const e=Number(n);if(e>=dP&&e<=Ix)return e}return null},Ay=function(n){try{n()}catch(e){setTimeout(()=>{throw Gs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},AE=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class EV{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Gs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class bV{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Oi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Gs(e)}}let SE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const mP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,yP="websocket",vP="long_polling";class Dx{constructor(e,t,r,i,a=!1,l="",p=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=tm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&tm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function wP(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===yP)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==vP)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function IV(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Fi(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class TV{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const Ax={},Sx={};function xx(n){const e=n.toString();return Ax[e]||(Ax[e]=new TV),Ax[e]}class AV{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ay(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Sy{constructor(e,t,r,i,a,l,p){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=TE(e),this.stats_=xx(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),wP(t,vP,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new AV(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Rx((...a)=>{const[l,p,_,E,D]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=p,this.password=_;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,p]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,p)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&mP.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Sy.forceAllow_=!0}static forceDisallow(){Sy.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!Sy.forceAllow_&&(Sy.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=lP(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Rx{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=sP(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Rx.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(p){Oi("frame writing exception"),p.stack&&Oi(p.stack),Oi(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Oi("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Oi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let xE=null;"undefined"!=typeof MozWebSocket?xE=MozWebSocket:"undefined"!=typeof WebSocket&&(xE=WebSocket);let RE=(()=>{class n{constructor(t,r,i,a,l,p,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=TE(this.connId),this.stats_=xx(r),this.connURL=n.connectionURL_(r,p,_,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a){const l={v:"5"};return!(0,k.Yr)()&&"undefined"!=typeof location&&location.hostname&&mP.test(location.hostname)&&(l.r="f"),r&&(l.s=r),i&&(l.ls=i),a&&(l.ac=a),wP(t,yP,l)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,tm.set("previous_websocket_failure",!0);try{if((0,k.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${wx}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,p=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;p&&(a.proxy={origin:p}),this.mySock=new xE(this.connURL,[],a)}else this.mySock=new xE(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==xE&&!n.forceDisallow_}static previouslyFailed(){return tm.isInMemoryStorage||!0===tm.get("previous_websocket_failure")}markConnectionHealthy(){tm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=lP(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class Mx{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Sy,RE]}initTransports_(e){const t=RE&&RE.isAvailable();let r=t&&!RE.previouslyFailed();if(e.webSocketOnly&&(t||Gs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[RE];else{const i=this.transports_=[];for(const a of Mx.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class PP{constructor(e,t,r,i,a,l,p,_,E,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=p,this.onDisconnect_=_,this.onKill_=E,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=TE("c:"+this.id+":"),this.transportManager_=new Mx(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=AE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=DE("t",e),r=DE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=DE("t",e),r=DE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=DE("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?bx("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):bx("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Gs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),AE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):AE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(tm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class kP{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class OP{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class MT extends OP{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new MT}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Dn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function En(){return new Dn("")}function Yt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Af(n){return n.pieces_.length-n.pieceNum_}function Un(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Dn(n.pieces_,e)}function Px(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ME(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function VP(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Dn(e,0)}function lr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Dn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Dn(t,0)}function Qt(n){return n.pieceNum_>=n.pieces_.length}function qs(n,e){const t=Yt(n),r=Yt(e);if(null===t)return e;if(t===r)return qs(Un(n),Un(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function KV(n,e){const t=ME(n,0),r=ME(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=rm(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function kx(n,e){if(Af(n)!==Af(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ka(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Af(n)>Af(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class YV{constructor(e,t){this.errorPrefix_=t,this.parts_=ME(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);UP(this)}}function UP(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+im(n))}function im(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Ox extends OP{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Ox}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const NE=1e3;let PT,sm=(()=>{class n extends kP{constructor(t,r,i,a,l,p,_,E){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=p,this.appCheckTokenProvider_=_,this.authOverride_=E,this.id=n.nextPersistentConnectionId_++,this.log_=TE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=NE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,E&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ox.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&MT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,k.Pz)(l)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new k.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:p=>{const _=p.d;"ok"===p.s?(this.onDataUpdate_(i.p,_,!1,null),r.resolve(_)):r.reject(_)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const p=this.outstandingGets_[l];void 0===p||a!==p||(delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+l+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(l),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,p=t._path.toString();this.log_("Listen called for "+p+" "+l),this.listens.has(p)||this.listens.set(p,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(p).has(l),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(p).set(l,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,_=>{const E=_.d,D=_.s;n.warnOnListenWarnings_(E,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==D&&this.removeListen_(i,a),t.onComplete&&t.onComplete(D,E))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Gs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,p=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,p))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,p=>{a&&setTimeout(()=>{a(p.s,p.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const p={p:r,d:i};void 0!==l&&(p.h=l),this.outstandingPuts_.push({action:t,request:p,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):bx("Unrecognized action received from server: "+(0,k.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=NE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=NE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=NE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ge.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,p=t.lastSessionId;let _=!1,E=null;const D=function(){E?E.close():(_=!0,a())};t.realtime_={close:D,sendRequest:function(V){(0,k.hu)(E,"sendRequest call when we're not connected not allowed."),E.sendRequest(V)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,H]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);_?Oi("getToken() completed but was canceled"):(Oi("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=H&&H.token,E=new PP(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,le=>{Gs(le+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},p))}catch(V){t.log_("Failed to get token: "+V),_||(t.repoInfo_.nodeAdmin&&Gs(V),D())}}})()}interrupt(t){Oi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Oi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=NE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>Cx(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Dn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Oi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Oi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+wx.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=MT.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class en{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new en(e,t)}}class NT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new en(Ad,e),i=new en(Ad,t);return 0!==this.compare(r,i)}minPost(){return en.MIN}}class HP extends NT{static get __EMPTY_NODE(){return PT}static set __EMPTY_NODE(e){PT=e}compare(e,t){return rm(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return en.MIN}maxPost(){return new en(Xl,PT)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new en(e,PT)}toString(){return".key"}}const ec=new HP;class kT{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Lx,Fu=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:yo.EMPTY_NODE,this.right=null!=l?l:yo.EMPTY_NODE}copy(t,r,i,a,l){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return yo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return yo.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class yo{constructor(e,t=yo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new yo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Fu.BLACK,null,null))}remove(e){return new yo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Fu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new kT(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new kT(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new kT(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new kT(this.root_,null,this.comparator_,!0,e)}}function sU(n,e){return rm(n.name,e.name)}function Fx(n,e){return rm(n,e)}yo.EMPTY_NODE=new class iU{copy(e,t,r,i,a){return this}insert(e,t,r){return new Fu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const $P=function(n){return"number"==typeof n?"number:"+cP(n):"string:"+n},GP=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===Lx||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===Lx||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let qP,WP,zP,xy=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),GP(this.priorityNode_)}static set __childrenNodeConstructor(t){qP=t}static get __childrenNodeConstructor(){return qP}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Qt(t)?this:".priority"===Yt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Yt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===Af(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Un(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+$P(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?cP(this.value_):this.value_,this.lazyHash_=oP(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(a>=0,"Unknown leaf type: "+r),(0,k.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Qn=new class lU extends NT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?rm(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return en.MIN}maxPost(){return new en(Xl,new xy("[PRIORITY-POST]",zP))}makePost(e,t){const r=WP(e);return new en(t,new xy("[PRIORITY-POST]",r))}toString(){return".priority"}},cU=Math.log(2);class dU{constructor(e){this.count=parseInt(Math.log(e+1)/cU,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const OT=function(n,e,t,r){n.sort(e);const i=function(_,E){const D=E-_;let S,P;if(0===D)return null;if(1===D)return S=n[_],P=t?t(S):S,new Fu(P,S.node,Fu.BLACK,null,null);{const V=parseInt(D/2,10)+_,H=i(_,V),le=i(V+1,E);return S=n[V],P=t?t(S):S,new Fu(P,S.node,Fu.BLACK,H,le)}},p=function(_){let E=null,D=null,S=n.length;const P=function(H,le){const Ee=S-H,Ye=S;S-=H;const qe=i(Ee+1,Ye),ct=n[Ee],Ze=t?t(ct):ct;V(new Fu(Ze,ct.node,le,null,qe))},V=function(H){E?(E.left=H,E=H):(D=H,E=H)};for(let H=0;H<_.count;++H){const le=_.nextBitIsOne(),Ee=Math.pow(2,_.count-(H+1));le?P(Ee,Fu.BLACK):(P(Ee,Fu.BLACK),P(Ee,Fu.RED))}return D}(new dU(n.length));return new yo(r||e,p)};let Vx;const Ry={};class Sd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(Ry&&Qn,"ChildrenNode.ts has not been loaded"),Vx=Vx||new Sd({".priority":Ry},{".priority":Qn}),Vx}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof yo?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==ec,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(en.Wrap);let p,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();p=i?OT(r,e.getCompare()):Ry;const _=e.toString(),E=Object.assign({},this.indexSet_);E[_]=e;const D=Object.assign({},this.indexes_);return D[_]=p,new Sd(D,E)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,a)=>{const l=(0,k.DV)(this.indexSet_,a);if((0,k.hu)(l,"Missing index implementation for "+a),i===Ry){if(l.isDefinedOn(e.node)){const p=[],_=t.getIterator(en.Wrap);let E=_.getNext();for(;E;)E.name!==e.name&&p.push(E),E=_.getNext();return p.push(e),OT(p,l.getCompare())}return Ry}{const p=t.get(e.name);let _=i;return p&&(_=_.remove(new en(e.name,p))),_.insert(e,e.node)}});return new Sd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===Ry)return i;{const a=t.get(e.name);return a?i.remove(new en(e.name,a)):i}});return new Sd(r,this.indexSet_)}}let PE,Ht=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&GP(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return PE||(PE=new n(new yo(Fx),null,Sd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||PE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?PE:r}}getChild(t){const r=Yt(t);return null===r?this:this.getImmediateChild(r).getChild(Un(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new en(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const p=a.isEmpty()?PE:this.priorityNode_;return new n(a,p,l)}}updateChild(t,r){const i=Yt(t);if(null===i)return r;{(0,k.hu)(".priority"!==Yt(t)||1===Af(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Un(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(Qn,(p,_)=>{r[p]=_.val(t),i++,l&&n.INTEGER_REGEXP_.test(p)?a=Math.max(a,Number(p)):l=!1}),!t&&l&&a<2*i){const p=[];for(const _ in r)p[_]=r[_];return p}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+$P(this.getPriority().val())+":"),this.forEachChild(Qn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":oP(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new en(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new en(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new en(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,en.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,en.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===kE?-1:0}withIndex(t){if(t===ec||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===ec||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Qn),a=r.getIterator(Qn);let l=i.getNext(),p=a.getNext();for(;l&&p;){if(l.name!==p.name||!l.node.equals(p.node))return!1;l=i.getNext(),p=a.getNext()}return null===l&&null===p}return!1}return!1}}resolveIndex_(t){return t===ec?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const kE=new class hU extends Ht{constructor(){super(new yo(Fx),Ht.EMPTY_NODE,Sd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ht.EMPTY_NODE}isEmpty(){return!1}};function br(n,e=null){if(null===n)return Ht.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new xy(n,br(e));if(n instanceof Array){let t=Ht.EMPTY_NODE;return Fi(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const a=br(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(br(e))}{const t=[];let r=!1;if(Fi(n,(l,p)=>{if("."!==l.substring(0,1)){const _=br(p);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new en(l,_)))}}),0===t.length)return Ht.EMPTY_NODE;const a=OT(t,sU,l=>l.name,Fx);if(r){const l=OT(t,Qn.getCompare());return new Ht(a,br(e),new Sd({".priority":l},{".priority":Qn}))}return new Ht(a,br(e),Sd.Default)}}Object.defineProperties(en,{MIN:{value:new en(Ad,Ht.EMPTY_NODE)},MAX:{value:new en(Xl,kE)}}),HP.__EMPTY_NODE=Ht.EMPTY_NODE,xy.__childrenNodeConstructor=Ht,function oU(n){Lx=n}(kE),function uU(n){zP=n}(kE),function aU(n){WP=n}(br);class Ux extends NT{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!Qt(e)&&".priority"!==Yt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?rm(e.name,t.name):a}makePost(e,t){const r=br(e),i=Ht.EMPTY_NODE.updateChild(this.indexPath_,r);return new en(t,i)}maxPost(){const e=Ht.EMPTY_NODE.updateChild(this.indexPath_,kE);return new en(Xl,e)}toString(){return ME(this.indexPath_,0).join("/")}}const Bx=new class pU extends NT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?rm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return en.MIN}maxPost(){return en.MAX}makePost(e,t){const r=br(e);return new en(t,r)}toString(){return".value"}},My="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",gU=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=My.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=My.charAt(e[i]);return(0,k.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),YP=function(n){if(n===""+Ix)return"-";const e=xT(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Xl;const a=My.charAt(My.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},QP=function(n){if(n===""+dP)return Ad;const e=xT(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+Ix:(delete t[t.length-1],t.join("")):(t[t.length-1]=My.charAt(My.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function JP(n){return{type:"value",snapshotNode:n}}function Ny(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function OE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function FE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Hx{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(t);return p.getChild(i).equals(r.getChild(i))&&p.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(OE(t,p)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?l.trackChildChange(Ny(t,r)):l.trackChildChange(FE(t,r,p))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Qn,(i,a)=>{t.hasChild(i)||r.trackChildChange(OE(i,a))}),t.isLeafNode()||t.forEachChild(Qn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(FE(i,a,l))}else r.trackChildChange(Ny(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ht.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class LE{constructor(e){this.indexedFilter_=new Hx(e.getIndex()),this.index_=e.getIndex(),this.startPost_=LE.getStartPost_(e),this.endPost_=LE.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new en(t,r))||(r=Ht.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Ht.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Ht.EMPTY_NODE);const a=this;return t.forEachChild(Qn,(l,p)=>{a.matches(new en(l,p))||(i=i.updateImmediateChild(l,Ht.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class _U{constructor(e){this.rangedFilter_=new LE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new en(t,r))||(r=Ht.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Ht.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Ht.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const p=a.getNext();let _;if(_=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),p)<=0:this.index_.compare(p,this.rangedFilter_.getEndPost())<=0,!_)break;i=i.updateImmediateChild(p.name,p.node),l++}}else{let a,l,p,_;if(i=t.withIndex(this.index_),i=i.updatePriority(Ht.EMPTY_NODE),this.reverse_){_=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();p=(P,V)=>S(V,P)}else _=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),p=this.index_.getCompare();let E=0,D=!1;for(;_.hasNext();){const S=_.getNext();!D&&p(a,S)<=0&&(D=!0),D&&E<this.limit_&&p(S,l)<=0?E++:i=i.updateImmediateChild(S.name,Ht.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(P,V)=>S(V,P)}else l=this.index_.getCompare();const p=e;(0,k.hu)(p.numChildren()===this.limit_,"");const _=new en(t,r),E=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),D=this.rangedFilter_.matches(_);if(p.hasChild(t)){const S=p.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,E,this.reverse_);for(;null!=P&&(P.name===t||p.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const V=null==P?1:l(P,_);if(D&&!r.isEmpty()&&V>=0)return null!=a&&a.trackChildChange(FE(t,r,S)),p.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(OE(t,S));const le=p.updateImmediateChild(t,Ht.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(null!=a&&a.trackChildChange(Ny(P.name,P.node)),le.updateImmediateChild(P.name,P.node)):le}}return r.isEmpty()?e:D&&l(E,_)>=0?(null!=a&&(a.trackChildChange(OE(E.name,E.node)),a.trackChildChange(Ny(t,r))),p.updateImmediateChild(t,r).updateImmediateChild(E.name,Ht.EMPTY_NODE)):e}}class FT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Qn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ad}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Xl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Qn}copy(){const e=new FT;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function $x(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Gx(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function LT(n,e){const t=n.copy();return t.index_=e,t}function XP(n){const e={};if(n.isDefault())return e;let t;return n.index_===Qn?t="$priority":n.index_===Bx?t="$value":n.index_===ec?t="$key":((0,k.hu)(n.index_ instanceof Ux,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Pz)(t),n.startSet_&&(e.startAt=(0,k.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,k.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,k.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,k.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function e1(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Qn&&(e.i=n.index_.toString()),e}class VT extends kP{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=TE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=VT.getListenId_(e,r),p={};this.listens_[l]=p;const _=XP(e._queryParams);this.restRequest_(a+".json",_,(E,D)=>{let S=D;if(404===E&&(S=null,E=null),null===E&&this.onDataUpdate_(a,S,!1,r),(0,k.DV)(this.listens_,l)===p){let P;P=E?401===E?"permission_denied":"rest_error:"+E:"ok",i(P,null)}})}unlisten(e,t){const r=VT.getListenId_(e,t);delete this.listens_[r]}get(e){const t=XP(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(a,l)=>{let p=l;404===a&&(p=null,a=null),null===a?(this.onDataUpdate_(r,p,!1,null),i.resolve(p)):i.reject(new Error(p))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+l);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(r&&4===p.readyState){this.log_("REST Response for "+l+" received. status:",p.status,"response:",p.responseText);let _=null;if(p.status>=200&&p.status<300){try{_=(0,k.cI)(p.responseText)}catch(E){Gs("Failed to parse JSON response for "+l+": "+p.responseText)}r(null,_)}else 401!==p.status&&404!==p.status&&Gs("Got unsuccessful REST response for "+l+" Status: "+p.status),r(p.status);r=null}},p.open("GET",l,!0),p.send()})}}class CU{constructor(){this.rootNode_=Ht.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function UT(){return{value:null,children:new Map}}function Py(n,e,t){if(Qt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Yt(e);n.children.has(r)||n.children.set(r,UT()),Py(n.children.get(r),e=Un(e),t)}}function qx(n,e){if(Qt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Qn,(r,i)=>{Py(n,new Dn(r),i)}),qx(n,e)}}if(n.children.size>0){const t=Yt(e);return e=Un(e),n.children.has(t)&&qx(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Wx(n,e,t){null!==n.value?t(e,n.value):function IU(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Wx(i,new Dn(e.toString()+"/"+r),t)})}class TU{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Fi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class SU{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new TU(e);const r=1e4+2e4*Math.random();AE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Fi(e,(i,a)=>{a>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),AE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Oa=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Oa||(Oa={})),Oa))();function Kx(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class BT{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Oa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Qt(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Dn(e));return new BT(En(),t,this.revert)}}return(0,k.hu)(Yt(this.path)===e,"operationForChild called for unrelated child."),new BT(Un(this.path),this.affectedTree,this.revert)}}class VE{constructor(e,t){this.source=e,this.path=t,this.type=Oa.LISTEN_COMPLETE}operationForChild(e){return Qt(this.path)?new VE(this.source,En()):new VE(this.source,Un(this.path))}}class om{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Oa.OVERWRITE}operationForChild(e){return Qt(this.path)?new om(this.source,En(),this.snap.getImmediateChild(e)):new om(this.source,Un(this.path),this.snap)}}class ky{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Oa.MERGE}operationForChild(e){if(Qt(this.path)){const t=this.children.subtree(new Dn(e));return t.isEmpty()?null:t.value?new om(this.source,En(),t.value):new ky(this.source,En(),t)}return(0,k.hu)(Yt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ky(this.source,Un(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Sf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Qt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Yt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class xU{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function UE(n,e,t,r,i,a){const l=r.filter(p=>p.type===t);l.sort((p,_)=>function NU(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new en(e.childName,e.snapshotNode),i=new en(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,p,_)),l.forEach(p=>{const _=function MU(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,p,a);i.forEach(E=>{E.respondsTo(p.type)&&e.push(E.createEvent(_,n.query_))})})}function jT(n,e){return{eventCache:n,serverCache:e}}function BE(n,e,t,r){return jT(new Sf(e,t,r),n.serverCache)}function n1(n,e,t,r){return jT(n.eventCache,new Sf(e,t,r))}function HT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function am(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Yx;class Jn{constructor(e,t=(()=>(Yx||(Yx=new yo(gV)),Yx))()){this.value=e,this.children=t}static fromObject(e){let t=new Jn(null);return Fi(e,(r,i)=>{t=t.set(new Dn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:En(),value:this.value};if(Qt(e))return null;{const r=Yt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Un(e),t);return null!=a?{path:lr(new Dn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Qt(e))return this;{const t=Yt(e),r=this.children.get(t);return null!==r?r.subtree(Un(e)):new Jn(null)}}set(e,t){if(Qt(e))return new Jn(t,this.children);{const r=Yt(e),a=(this.children.get(r)||new Jn(null)).set(Un(e),t),l=this.children.insert(r,a);return new Jn(this.value,l)}}remove(e){if(Qt(e))return this.children.isEmpty()?new Jn(null):new Jn(null,this.children);{const t=Yt(e),r=this.children.get(t);if(r){const i=r.remove(Un(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Jn(null):new Jn(this.value,a)}return this}}get(e){if(Qt(e))return this.value;{const t=Yt(e),r=this.children.get(t);return r?r.get(Un(e)):null}}setTree(e,t){if(Qt(e))return t;{const r=Yt(e),a=(this.children.get(r)||new Jn(null)).setTree(Un(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Jn(this.value,l)}}fold(e){return this.fold_(En(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(lr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,En(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Qt(e))return null;{const a=Yt(e),l=this.children.get(a);return l?l.findOnPath_(Un(e),lr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,En(),t)}foreachOnPath_(e,t,r){if(Qt(e))return this;{this.value&&r(t,this.value);const i=Yt(e),a=this.children.get(i);return a?a.foreachOnPath_(Un(e),lr(t,i),r):new Jn(null)}}foreach(e){this.foreach_(En(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(lr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Lu{constructor(e){this.writeTree_=e}static empty(){return new Lu(new Jn(null))}}function jE(n,e,t){if(Qt(e))return new Lu(new Jn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=qs(i,e);return a=a.updateChild(l,t),new Lu(n.writeTree_.set(i,a))}{const i=new Jn(t),a=n.writeTree_.setTree(e,i);return new Lu(a)}}}function Qx(n,e,t){let r=n;return Fi(t,(i,a)=>{r=jE(r,lr(e,i),a)}),r}function r1(n,e){if(Qt(e))return Lu.empty();{const t=n.writeTree_.setTree(e,new Jn(null));return new Lu(t)}}function Jx(n,e){return null!=um(n,e)}function um(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(qs(t.path,e)):null}function i1(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Qn,(r,i)=>{e.push(new en(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new en(r,i.value))}),e}function xf(n,e){if(Qt(e))return n;{const t=um(n,e);return new Lu(null!=t?new Jn(t):n.writeTree_.subtree(e))}}function Xx(n){return n.writeTree_.isEmpty()}function Oy(n,e){return s1(En(),n.writeTree_,e)}function s1(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,k.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=s1(lr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(lr(n,".priority"),r)),t}}function $T(n,e){return c1(e,n)}function VU(n,e){if(n.snap)return ka(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ka(lr(n.path,t),e))return!0;return!1}function BU(n){return n.visible}function o1(n,e,t){let r=Lu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let p;if(a.snap)ka(t,l)?(p=qs(t,l),r=jE(r,p,a.snap)):ka(l,t)&&(p=qs(l,t),r=jE(r,En(),a.snap.getChild(p)));else{if(!a.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(ka(t,l))p=qs(t,l),r=Qx(r,p,a.children);else if(ka(l,t))if(p=qs(l,t),Qt(p))r=Qx(r,En(),a.children);else{const _=(0,k.DV)(a.children,Yt(p));if(_){const E=_.getChild(Un(p));r=jE(r,En(),E)}}}}}return r}function a1(n,e,t,r,i){if(r||i){const a=xf(n.visibleWrites,e);return!i&&Xx(a)?t:i||null!=t||Jx(a,En())?Oy(o1(n.allWrites,function(E){return(E.visible||i)&&(!r||!~r.indexOf(E.writeId))&&(ka(E.path,e)||ka(e,E.path))},e),t||Ht.EMPTY_NODE):null}{const a=um(n.visibleWrites,e);if(null!=a)return a;{const l=xf(n.visibleWrites,e);return Xx(l)?t:null!=t||Jx(l,En())?Oy(l,t||Ht.EMPTY_NODE):null}}}function GT(n,e,t,r){return a1(n.writeTree,n.treePath,e,t,r)}function eR(n,e){return function jU(n,e,t){let r=Ht.EMPTY_NODE;const i=um(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Qn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=xf(n.visibleWrites,e);return t.forEachChild(Qn,(l,p)=>{const _=Oy(xf(a,new Dn(l)),p);r=r.updateImmediateChild(l,_)}),i1(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return i1(xf(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function u1(n,e,t,r){return function HU(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=lr(e,t);if(Jx(n.visibleWrites,a))return null;{const l=xf(n.visibleWrites,a);return Xx(l)?i.getChild(t):Oy(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function qT(n,e){return function GU(n,e){return um(n.visibleWrites,e)}(n.writeTree,lr(n.treePath,e))}function tR(n,e,t){return function $U(n,e,t,r){const i=lr(e,t),a=um(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Oy(xf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function l1(n,e){return c1(lr(n.treePath,e),n.writeTree)}function c1(n,e){return{treePath:n,writeTree:e}}class ZU{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,FE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,OE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Ny(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,FE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const d1=new class KU{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class nR{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Sf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return tR(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:am(this.viewCache_),a=function zU(n,e,t,r,i,a){return function qU(n,e,t,r,i,a,l){let p;const _=xf(n.visibleWrites,e),E=um(_,En());if(null!=E)p=E;else{if(null==t)return[];p=Oy(_,t)}if(p=p.withIndex(l),p.isEmpty()||p.isLeafNode())return[];{const D=[],S=l.getCompare(),P=a?p.getReverseIteratorFrom(r,l):p.getIteratorFrom(r,l);let V=P.getNext();for(;V&&D.length<i;)0!==S(V,r)&&D.push(V),V=P.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function h1(n,e,t,r,i,a){const l=e.eventCache;if(null!=qT(r,t))return e;{let p,_;if(Qt(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const E=am(e),S=eR(r,E instanceof Ht?E:Ht.EMPTY_NODE);p=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const E=GT(r,am(e));p=n.filter.updateFullNode(e.eventCache.getNode(),E,a)}else{const E=Yt(t);if(".priority"===E){(0,k.hu)(1===Af(t),"Can't have a priority with additional path components");const D=l.getNode();_=e.serverCache.getNode();const S=u1(r,t,D,_);p=null!=S?n.filter.updatePriority(D,S):l.getNode()}else{const D=Un(t);let S;if(l.isCompleteForChild(E)){_=e.serverCache.getNode();const P=u1(r,t,l.getNode(),_);S=null!=P?l.getNode().getImmediateChild(E).updateChild(D,P):l.getNode().getImmediateChild(E)}else S=tR(r,E,e.serverCache);p=null!=S?n.filter.updateChild(l.getNode(),E,S,D,i,a):l.getNode()}}return BE(e,p,l.isFullyInitialized()||Qt(t),n.filter.filtersNodes())}}function WT(n,e,t,r,i,a,l,p){const _=e.serverCache;let E;const D=l?n.filter:n.filter.getIndexedFilter();if(Qt(t))E=D.updateFullNode(_.getNode(),r,null);else if(D.filtersNodes()&&!_.isFiltered()){const V=_.getNode().updateChild(t,r);E=D.updateFullNode(_.getNode(),V,null)}else{const V=Yt(t);if(!_.isCompleteForPath(t)&&Af(t)>1)return e;const H=Un(t),Ee=_.getNode().getImmediateChild(V).updateChild(H,r);E=".priority"===V?D.updatePriority(_.getNode(),Ee):D.updateChild(_.getNode(),V,Ee,H,d1,null)}const S=n1(e,E,_.isFullyInitialized()||Qt(t),D.filtersNodes());return h1(n,S,t,i,new nR(i,S,a),p)}function rR(n,e,t,r,i,a,l){const p=e.eventCache;let _,E;const D=new nR(i,e,a);if(Qt(t))E=n.filter.updateFullNode(e.eventCache.getNode(),r,l),_=BE(e,E,!0,n.filter.filtersNodes());else{const S=Yt(t);if(".priority"===S)E=n.filter.updatePriority(e.eventCache.getNode(),r),_=BE(e,E,p.isFullyInitialized(),p.isFiltered());else{const P=Un(t),V=p.getNode().getImmediateChild(S);let H;if(Qt(P))H=r;else{const le=D.getCompleteChild(S);H=null!=le?".priority"===Px(P)&&le.getChild(VP(P)).isEmpty()?le:le.updateChild(P,r):Ht.EMPTY_NODE}_=V.equals(H)?e:BE(e,n.filter.updateChild(p.getNode(),S,H,P,D,l),p.isFullyInitialized(),n.filter.filtersNodes())}}return _}function f1(n,e){return n.eventCache.isCompleteForChild(e)}function p1(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function iR(n,e,t,r,i,a,l,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let E,_=e;E=Qt(t)?r:new Jn(null).setTree(t,r);const D=e.serverCache.getNode();return E.children.inorderTraversal((S,P)=>{if(D.hasChild(S)){const H=p1(0,e.serverCache.getNode().getImmediateChild(S),P);_=WT(n,_,new Dn(S),H,i,a,l,p)}}),E.children.inorderTraversal((S,P)=>{const V=!e.serverCache.isCompleteForChild(S)&&void 0===P.value;if(!D.hasChild(S)&&!V){const le=p1(0,e.serverCache.getNode().getImmediateChild(S),P);_=WT(n,_,new Dn(S),le,i,a,l,p)}}),_}class i2{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Hx(r.getIndex()),a=function yU(n){return n.loadsAllData()?new Hx(n.getIndex()):n.hasLimit()?new _U(n):new LE(n)}(r);this.processor_=function YU(n){return{filter:n}}(a);const l=t.serverCache,p=t.eventCache,_=i.updateFullNode(Ht.EMPTY_NODE,l.getNode(),null),E=a.updateFullNode(Ht.EMPTY_NODE,p.getNode(),null),D=new Sf(_,l.isFullyInitialized(),i.filtersNodes()),S=new Sf(E,p.isFullyInitialized(),a.filtersNodes());this.viewCache_=jT(S,D),this.eventGenerator_=new xU(this.query_)}get query(){return this.query_}}function a2(n,e){const t=am(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Qt(e)&&!t.getImmediateChild(Yt(e)).isEmpty())?t.getChild(e):null}function g1(n){return 0===n.eventRegistrations_.length}function m1(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function _1(n,e,t,r){e.type===Oa.MERGE&&null!==e.source.queryId&&((0,k.hu)(am(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(HT(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function JU(n,e,t,r,i){const a=new ZU;let l,p;if(t.type===Oa.OVERWRITE){const E=t;E.source.fromUser?l=rR(n,e,E.path,E.snap,r,i,a):((0,k.hu)(E.source.fromServer,"Unknown source."),p=E.source.tagged||e.serverCache.isFiltered()&&!Qt(E.path),l=WT(n,e,E.path,E.snap,r,i,p,a))}else if(t.type===Oa.MERGE){const E=t;E.source.fromUser?l=function e2(n,e,t,r,i,a,l){let p=e;return r.foreach((_,E)=>{const D=lr(t,_);f1(e,Yt(D))&&(p=rR(n,p,D,E,i,a,l))}),r.foreach((_,E)=>{const D=lr(t,_);f1(e,Yt(D))||(p=rR(n,p,D,E,i,a,l))}),p}(n,e,E.path,E.children,r,i,a):((0,k.hu)(E.source.fromServer,"Unknown source."),p=E.source.tagged||e.serverCache.isFiltered(),l=iR(n,e,E.path,E.children,r,i,p,a))}else if(t.type===Oa.ACK_USER_WRITE){const E=t;l=E.revert?function r2(n,e,t,r,i,a){let l;if(null!=qT(r,t))return e;{const p=new nR(r,e,i),_=e.eventCache.getNode();let E;if(Qt(t)||".priority"===Yt(t)){let D;if(e.serverCache.isFullyInitialized())D=GT(r,am(e));else{const S=e.serverCache.getNode();(0,k.hu)(S instanceof Ht,"serverChildren would be complete if leaf node"),D=eR(r,S)}D=D,E=n.filter.updateFullNode(_,D,a)}else{const D=Yt(t);let S=tR(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=_.getImmediateChild(D)),E=null!=S?n.filter.updateChild(_,D,S,Un(t),p,a):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(_,D,Ht.EMPTY_NODE,Un(t),p,a):_,E.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=GT(r,am(e)),l.isLeafNode()&&(E=n.filter.updateFullNode(E,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=qT(r,En()),BE(e,E,l,n.filter.filtersNodes())}}(n,e,E.path,r,i,a):function t2(n,e,t,r,i,a,l){if(null!=qT(i,t))return e;const p=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(Qt(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return WT(n,e,t,_.getNode().getChild(t),i,a,p,l);if(Qt(t)){let E=new Jn(null);return _.getNode().forEachChild(ec,(D,S)=>{E=E.set(new Dn(D),S)}),iR(n,e,t,E,i,a,p,l)}return e}{let E=new Jn(null);return r.foreach((D,S)=>{const P=lr(t,D);_.isCompleteForPath(P)&&(E=E.set(D,_.getNode().getChild(P)))}),iR(n,e,t,E,i,a,p,l)}}(n,e,E.path,E.affectedTree,r,i,a)}else{if(t.type!==Oa.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);l=function n2(n,e,t,r,i){const a=e.serverCache;return h1(n,n1(e,a.getNode(),a.isFullyInitialized()||Qt(t),a.isFiltered()),t,r,d1,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function XU(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=HT(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(JP(HT(e)))}}(e,l,_),{viewCache:l,changes:_}}(n.processor_,i,e,t,r);return function QU(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,k.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,y1(n,a.changes,a.viewCache.eventCache.getNode(),null)}function y1(n,e,t,r){return function RU(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function mU(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),UE(n,i,"child_removed",e,r,t),UE(n,i,"child_added",e,r,t),UE(n,i,"child_moved",a,r,t),UE(n,i,"child_changed",e,r,t),UE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let zT,KT;class v1{constructor(){this.views=new Map}}function sR(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,k.hu)(null!=a,"SyncTree gave us an op for an invalid query."),_1(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(_1(l,e,t,r));return a}}function w1(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let p=GT(t,i?r:null),_=!1;p?_=!0:r instanceof Ht?(p=eR(t,r),_=!1):(p=Ht.EMPTY_NODE,_=!1);const E=jT(new Sf(p,_,!1),new Sf(r,i,!1));return new i2(e,E)}return l}function E1(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Rf(n,e){let t=null;for(const r of n.views.values())t=t||a2(r,e);return t}function b1(n,e){return e._queryParams.loadsAllData()?ZT(n):n.views.get(e._queryIdentifier)}function C1(n,e){return null!=b1(n,e)}function Mf(n){return null!=ZT(n)}function ZT(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let _2=1;class I1{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Jn(null),this.pendingWriteTree_=function WU(){return{visibleWrites:Lu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function oR(n,e,t,r,i){return function kU(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=jE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Fy(n,new om({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Nf(n,e,t=!1){const r=function FU(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function LU(n,e){const t=n.allWrites.findIndex(p=>p.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const p=n.allWrites[l];p.visible&&(l>=t&&VU(p,r.path)?i=!1:ka(r.path,p.path)&&(a=!0)),l--}return!!i&&(a?(function UU(n){n.visibleWrites=o1(n.allWrites,BU,En()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=r1(n.visibleWrites,r.path):Fi(r.children,_=>{n.visibleWrites=r1(n.visibleWrites,lr(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new Jn(null);return null!=r.snap?a=a.set(En(),!0):Fi(r.children,l=>{a=a.set(new Dn(l),!0)}),Fy(n,new BT(r.path,a,t))}return[]}function HE(n,e,t){return Fy(n,new om({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function aR(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let l=[];if(a&&("default"===e._queryIdentifier||C1(a,e))){const p=function p2(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const p=Mf(n);if("default"===i)for(const[_,E]of n.views.entries())l=l.concat(m1(E,t,r)),g1(E)&&(n.views.delete(_),E.query._queryParams.loadsAllData()||a.push(E.query));else{const _=n.views.get(i);_&&(l=l.concat(m1(_,t,r)),g1(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return p&&!Mf(n)&&a.push(new(function d2(){return(0,k.hu)(zT,"Reference.ts has not been loaded"),zT}())(e._repo,e._path)),{removed:a,events:l}}(a,e,t,r);(function h2(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const _=p.removed;l=p.events;const E=-1!==_.findIndex(S=>S._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(i,(S,P)=>Mf(P));if(E&&!D){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const P=function T2(n){return n.fold((e,t,r)=>{if(t&&Mf(t))return[ZT(t)];{let i=[];return t&&(i=E1(t)),Fi(r,(a,l)=>{i=i.concat(l)}),i}})}(S);for(let V=0;V<P.length;++V){const H=P[V],le=H.query,Ee=S1(n,H);n.listenProvider_.startListening($E(le),QT(n,le),Ee.hashFn,Ee.onComplete)}}}!D&&_.length>0&&!r&&(E?n.listenProvider_.stopListening($E(e),null):_.forEach(S=>{const P=n.queryToTagMap.get(JT(S));n.listenProvider_.stopListening($E(S),P)})),function D2(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=JT(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,_)}return l}function T1(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(S,P)=>{const V=qs(S,r);i=i||Rf(P,V),a=a||Mf(P)});let p,l=n.syncPointTree_.get(r);l?(a=a||Mf(l),i=i||Rf(l,En())):(l=new v1,n.syncPointTree_=n.syncPointTree_.set(r,l)),null!=i?p=!0:(p=!1,i=Ht.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((P,V)=>{const H=Rf(V,En());H&&(i=i.updateImmediateChild(P,H))}));const _=C1(l,e);if(!_&&!e._queryParams.loadsAllData()){const S=JT(e);(0,k.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const P=function A2(){return _2++}();n.queryToTagMap.set(S,P),n.tagToQueryMap.set(P,S)}let D=function f2(n,e,t,r,i,a){const l=w1(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function u2(n,e){n.eventRegistrations_.push(e)}(l,t),function l2(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Qn,(a,l)=>{r.push(Ny(a,l))}),t.isFullyInitialized()&&r.push(JP(t.getNode())),y1(n,r,t.getNode(),e)}(l,t)}(l,e,t,$T(n.pendingWriteTree_,r),i,p);if(!_&&!a){const S=b1(l,e);D=D.concat(function S2(n,e,t){const r=e._path,i=QT(n,e),a=S1(n,t),l=n.listenProvider_.startListening($E(e),i,a.hashFn,a.onComplete),p=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!Mf(p.value),"If we're adding a query, it shouldn't be shadowed");else{const _=p.fold((E,D,S)=>{if(!Qt(E)&&D&&Mf(D))return[ZT(D).query];{let P=[];return D&&(P=P.concat(E1(D).map(V=>V.query))),Fi(S,(V,H)=>{P=P.concat(H)}),P}});for(let E=0;E<_.length;++E){const D=_[E];n.listenProvider_.stopListening($E(D),QT(n,D))}}return l}(n,e,S))}return D}function YT(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,p)=>{const E=Rf(p,qs(l,e));if(E)return E});return a1(i,e,a,t,!0)}function Fy(n,e){return D1(e,n.syncPointTree_,null,$T(n.pendingWriteTree_,En()))}function D1(n,e,t,r){if(Qt(n.path))return A1(n,e,t,r);{const i=e.get(En());null==t&&null!=i&&(t=Rf(i,En()));let a=[];const l=Yt(n.path),p=n.operationForChild(l),_=e.children.get(l);if(_&&p){const E=t?t.getImmediateChild(l):null,D=l1(r,l);a=a.concat(D1(p,_,E,D))}return i&&(a=a.concat(sR(i,n,r,t))),a}}function A1(n,e,t,r){const i=e.get(En());null==t&&null!=i&&(t=Rf(i,En()));let a=[];return e.children.inorderTraversal((l,p)=>{const _=t?t.getImmediateChild(l):null,E=l1(r,l),D=n.operationForChild(l);D&&(a=a.concat(A1(D,p,_,E)))}),i&&(a=a.concat(sR(i,n,r,t))),a}function S1(n,e){const t=e.query,r=QT(n,t);return{hashFn:()=>(function s2(n){return n.viewCache_.serverCache.getNode()}(e)||Ht.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function E2(n,e,t){const r=uR(n,t);if(r){const i=lR(r),a=i.path,l=i.queryId,p=qs(a,e);return cR(n,a,new VE(Kx(l),p))}return[]}(n,t._path,r):function w2(n,e){return Fy(n,new VE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function yV(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return aR(n,t,null,a)}}}}function QT(n,e){const t=JT(e);return n.queryToTagMap.get(t)}function JT(n){return n._path.toString()+"$"+n._queryIdentifier}function uR(n,e){return n.tagToQueryMap.get(e)}function lR(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Dn(n.substr(0,e))}}function cR(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),sR(r,t,$T(n.pendingWriteTree_,e),null)}function $E(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function m2(){return(0,k.hu)(KT,"Reference.ts has not been loaded"),KT}())(n._repo,n._path):n}class dR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new dR(t)}node(){return this.node_}}class hR{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=lr(this.path_,e);return new hR(this.syncTree_,t)}node(){return YT(this.syncTree_,this.path_)}}const x1=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?R2(n[".sv"],e,t):"object"==typeof n[".sv"]?M2(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},R2=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},M2=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},R1=function(n,e,t,r){return pR(e,new hR(t,n),r)},fR=function(n,e,t){return pR(n,new dR(e),t)};function pR(n,e,t){const r=n.getPriority().val(),i=x1(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,p=x1(l.getValue(),e,t);return p!==l.getValue()||i!==l.getPriority().val()?new xy(p,br(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new xy(i))),l.forEachChild(Qn,(p,_)=>{const E=pR(_,e.getImmediateChild(p),t);E!==_&&(a=a.updateImmediateChild(p,E))}),a}}class gR{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function XT(n,e){let t=e instanceof Dn?e:new Dn(e),r=n,i=Yt(t);for(;null!==i;){const a=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new gR(i,r,a),t=Un(t),i=Yt(t)}return r}function lm(n){return n.node.value}function mR(n,e){n.node.value=e,_R(n)}function M1(n){return n.node.childCount>0}function eD(n,e){Fi(n.node.children,(t,r)=>{e(new gR(t,n,r))})}function N1(n,e,t,r){t&&!r&&e(n),eD(n,i=>{N1(i,e,!0,r)}),t&&r&&e(n)}function GE(n){return new Dn(null===n.parent?n.name:GE(n.parent)+"/"+n.name)}function _R(n){null!==n.parent&&function k2(n,e,t){const r=function N2(n){return void 0===lm(n)&&!M1(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,_R(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,_R(n))}(n.parent,n.name,n)}const O2=/[\[\].#$\/\u0000-\u001F\u007F]/,F2=/[\[\].#$\u0000-\u001F\u007F]/,yR=10485760,tD=function(n){return"string"==typeof n&&0!==n.length&&!O2.test(n)},P1=function(n){return"string"==typeof n&&0!==n.length&&!F2.test(n)},qE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!ST(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},tc=function(n,e,t,r){r&&void 0===e||WE((0,k.gK)(n,"value"),e,t)},WE=function(n,e,t){const r=t instanceof Dn?new YV(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+im(r));if("function"==typeof e)throw new Error(n+"contains a function "+im(r)+" with contents = "+e.toString());if(ST(e))throw new Error(n+"contains "+e.toString()+" "+im(r));if("string"==typeof e&&e.length>yR/3&&(0,k.ug)(e)>yR)throw new Error(n+"contains a string greater than "+yR+" utf8 bytes "+im(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Fi(e,(l,p)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!tD(l)))throw new Error(n+" contains an invalid key ("+l+") "+im(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function QV(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),UP(n)})(r,l),WE(n,p,r),function JV(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+im(r)+" in addition to actual children.")}},k1=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Fi(e,(l,p)=>{const _=new Dn(l);if(WE(i,p,lr(t,_)),".priority"===Px(_)&&!qE(p))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=ME(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!tD(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(KV);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&ka(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},vR=function(n,e,t){if(!t||void 0!==e){if(ST(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!qE(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},zE=function(n,e,t,r){if(!(r&&void 0===t||tD(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ZE=function(n,e,t,r){if(!(r&&void 0===t||P1(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Fa=function(n,e){if(".info"===Yt(e))throw new Error(n+" failed = Can't modify data under /.info/")},O1=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!tD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),P1(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class B2{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function nD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!kx(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function wR(n,e,t){nD(n,t),F1(n,r=>kx(r,e))}function La(n,e,t){nD(n,t),F1(n,r=>ka(r,e)||ka(e,r))}function F1(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(j2(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function j2(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();nm&&Oi("event: "+t.toString()),Ay(r)}}}const L1="repo_interrupt";class $2{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new B2,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=UT(),this.transactionQueueTree_=new gR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function V1(n){const t=n.infoData_.getNode(new Dn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function KE(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:V1(n)})}function U1(n,e,t,r,i){n.dataUpdateCount++;const a=new Dn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const _=(0,k.UI)(t,E=>br(E));l=function C2(n,e,t,r){const i=uR(n,r);if(i){const a=lR(i),l=a.path,p=a.queryId,_=qs(l,e),E=Jn.fromObject(t);return cR(n,l,new ky(Kx(p),_,E))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=br(t);l=function b2(n,e,t,r){const i=uR(n,r);if(null!=i){const a=lR(i),l=a.path,p=a.queryId,_=qs(l,e);return cR(n,l,new om(Kx(p),_,t))}return[]}(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,k.UI)(t,E=>br(E));l=function v2(n,e,t){const r=Jn.fromObject(t);return Fy(n,new ky({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=br(t);l=HE(n.serverSyncTree_,a,_)}let p=a;l.length>0&&(p=Vy(n,a)),La(n.eventQueue_,p,l)}function B1(n,e){ER(n,"connected",e),!1===e&&function Z2(n){Ly(n,"onDisconnectEvents");const e=KE(n),t=UT();Wx(n.onDisconnect_,En(),(i,a)=>{const l=R1(i,a,n.serverSyncTree_,e);Py(t,i,l)});let r=[];Wx(t,En(),(i,a)=>{r=r.concat(HE(n.serverSyncTree_,i,a));const l=TR(n,i);Vy(n,l)}),n.onDisconnect_=UT(),La(n.eventQueue_,En(),r)}(n)}function ER(n,e,t){const r=new Dn("/.info/"+e),i=br(t);n.infoData_.updateSnapshot(r,i);const a=HE(n.infoSyncTree_,r,i);La(n.eventQueue_,r,a)}function rD(n){return n.nextWriteId_++}function bR(n,e,t,r,i){Ly(n,"set",{path:e.toString(),value:t,priority:r});const a=KE(n),l=br(t,r),p=YT(n.serverSyncTree_,e),_=fR(l,p,a),E=rD(n),D=oR(n.serverSyncTree_,e,_,E,!0);nD(n.eventQueue_,D),n.server_.put(e.toString(),l.val(!0),(P,V)=>{const H="ok"===P;H||Gs("set at "+e+" failed: "+P);const le=Nf(n.serverSyncTree_,E,!H);La(n.eventQueue_,e,le),Pf(0,i,P,V)});const S=TR(n,e);Vy(n,S),La(n.eventQueue_,S,[])}function K2(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&qx(n.onDisconnect_,e),Pf(0,t,r,i)})}function j1(n,e,t,r){const i=br(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&Py(n.onDisconnect_,e,i),Pf(0,r,a,l)})}function CR(n,e,t){let r;r=".info"===Yt(e._path)?aR(n.infoSyncTree_,e,t):aR(n.serverSyncTree_,e,t),wR(n.eventQueue_,e._path,r)}function H1(n){n.persistentConnection_&&n.persistentConnection_.interrupt(L1)}function Ly(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Oi(t,...e)}function Pf(n,e,t,r){e&&Ay(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function IR(n,e,t){return YT(n.serverSyncTree_,e,t)||Ht.EMPTY_NODE}function iD(n,e=n.transactionQueueTree_){if(e||sD(n,e),lm(e)){const t=G1(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function tB(n,e,t){const r=t.map(E=>E.currentWriteId),i=IR(n,e,r);let a=i;const l=i.hash();for(let E=0;E<t.length;E++){const D=t[E];(0,k.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=qs(e,D.path);a=a.updateChild(S,D.currentOutputSnapshotRaw)}const p=a.val(!0),_=e;n.server_.put(_.toString(),p,E=>{Ly(n,"transaction put response",{path:_.toString(),status:E});let D=[];if("ok"===E){const S=[];for(let P=0;P<t.length;P++)t[P].status=2,D=D.concat(Nf(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&S.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();sD(n,XT(n.transactionQueueTree_,e)),iD(n,n.transactionQueueTree_),La(n.eventQueue_,e,D);for(let P=0;P<S.length;P++)Ay(S[P])}else{if("datastale"===E)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{Gs("transaction at "+_.toString()+" failed: "+E);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=E}Vy(n,e)}},l)}(n,GE(e),t)}else M1(e)&&eD(e,t=>{iD(n,t)})}function Vy(n,e){const t=$1(n,e),r=GE(t);return function nB(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(p=>0===p.status).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const _=e[p],E=qs(t,_.path);let S,D=!1;if((0,k.hu)(null!==E,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)D=!0,S=_.abortReason,i=i.concat(Nf(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)D=!0,S="maxretry",i=i.concat(Nf(n.serverSyncTree_,_.currentWriteId,!0));else{const P=IR(n,_.path,l);_.currentInputSnapshot=P;const V=e[p].update(P.val());if(void 0!==V){WE("transaction failed: Data returned ",V,_.path);let H=br(V);"object"==typeof V&&null!=V&&(0,k.r3)(V,".priority")||(H=H.updatePriority(P.getPriority()));const Ee=_.currentWriteId,Ye=KE(n),qe=fR(H,P,Ye);_.currentOutputSnapshotRaw=H,_.currentOutputSnapshotResolved=qe,_.currentWriteId=rD(n),l.splice(l.indexOf(Ee),1),i=i.concat(oR(n.serverSyncTree_,_.path,qe,_.currentWriteId,_.applyLocally)),i=i.concat(Nf(n.serverSyncTree_,Ee,!0))}else D=!0,S="nodata",i=i.concat(Nf(n.serverSyncTree_,_.currentWriteId,!0))}La(n.eventQueue_,t,i),i=[],D&&(e[p].status=2,setTimeout(e[p].unwatcher,Math.floor(0)),e[p].onComplete&&r.push("nodata"===S?()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot):()=>e[p].onComplete(new Error(S),!1,null)))}sD(n,n.transactionQueueTree_);for(let p=0;p<r.length;p++)Ay(r[p]);iD(n,n.transactionQueueTree_)}(n,G1(n,t),r),r}function $1(n,e){let t,r=n.transactionQueueTree_;for(t=Yt(e);null!==t&&void 0===lm(r);)r=XT(r,t),t=Yt(e=Un(e));return r}function G1(n,e){const t=[];return q1(n,e,t),t.sort((r,i)=>r.order-i.order),t}function q1(n,e,t){const r=lm(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);eD(e,i=>{q1(n,i,t)})}function sD(n,e){const t=lm(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,mR(e,t.length>0?t:void 0)}eD(e,r=>{sD(n,r)})}function TR(n,e){const t=GE($1(n,e)),r=XT(n.transactionQueueTree_,e);return function P2(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{DR(n,i)}),DR(n,r),N1(r,i=>{DR(n,i)}),t}function DR(n,e){const t=lm(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,k.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,k.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Nf(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?mR(e,void 0):t.length=a+1,La(n.eventQueue_,GE(e),i);for(let l=0;l<r.length;l++)Ay(r[l])}}const AR=function(n,e){const t=sB(n),r=t.namespace;return"firebase.com"===t.domain&&Jl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Jl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Gs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Dx(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new Dn(t.pathString)}},sB=function(n){let e="",t="",r="",i="",a="",l=!0,p="https",_=443;if("string"==typeof n){let E=n.indexOf("//");E>=0&&(p=n.substring(0,E-1),n=n.substring(E+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function rB(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(D,S)));const P=function iB(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Gs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));E=e.indexOf(":"),E>=0?(l="https"===p||"wss"===p,_=parseInt(e.substring(E+1),10)):E=e.length;const V=e.slice(0,E);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const H=e.indexOf(".");r=e.substring(0,H).toLowerCase(),t=e.substring(H+1),a=r}"ns"in P&&(a=P.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:l,scheme:p,pathString:i,namespace:a}};class W1{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Pz)(this.snapshot.exportVal())}}class z1{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Z1{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class K1{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return K2(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Fa("OnDisconnect.remove",this._path);const e=new k.BH;return j1(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Fa("OnDisconnect.set",this._path),tc("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return j1(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Fa("OnDisconnect.setWithPriority",this._path),tc("OnDisconnect.setWithPriority",e,this._path,!1),vR("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function Y2(n,e,t,r,i){const a=br(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,p)=>{"ok"===l&&Py(n.onDisconnect_,e,a),Pf(0,i,l,p)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Fa("OnDisconnect.update",this._path),k1("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function Q2(n,e,t,r){if((0,k.xb)(t))return Oi("onDisconnect().update() called with empty data.  Don't do anything."),void Pf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Fi(t,(l,p)=>{const _=br(p);Py(n.onDisconnect_,lr(e,l),_)}),Pf(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class vo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Qt(this._path)?null:Px(this._path)}get ref(){return new Va(this._repo,this._path)}get _queryIdentifier(){const e=e1(this._queryParams),t=Cx(e);return"{}"===t?"default":t}get _queryObject(){return e1(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof vo))return!1;const t=this._repo===e._repo,r=kx(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function ZV(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function oD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function kf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===ec){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Ad)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Xl)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Qn){if(null!=e&&!qE(e)||null!=t&&!qE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof Ux||n.getIndex()===Bx,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function aD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Va extends vo{constructor(e,t){super(e,t,new FT,!1)}get parent(){const e=VP(this._path);return null===e?null:new Va(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class cm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Dn(e),r=dm(this.ref,e);return new cm(this._node.getChild(t),r,Qn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new cm(i,dm(this.ref,r),Qn)))}hasChild(e){const t=new Dn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Y1(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?dm(n._root,e):n._root}function Q1(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=AR(e,n._repo.repoInfo_.nodeAdmin);O1("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Jl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Y1(n,t.path.toString())}function dm(n,e){return null===Yt((n=(0,k.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ZE("child","path",t,!1)):ZE("child","path",e,!1),new Va(n._repo,lr(n._path,e));var t}function SR(n,e){n=(0,k.m9)(n),Fa("set",n._path),tc("set",e,n._path,!1);const t=new k.BH;return bR(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function cB(n,e){k1("update",e,n._path,!1);const t=new k.BH;return function z2(n,e,t,r){Ly(n,"update",{path:e.toString(),value:t});let i=!0;const a=KE(n),l={};if(Fi(t,(p,_)=>{i=!1,l[p]=R1(lr(e,p),br(_),n.serverSyncTree_,a)}),i)Oi("update() called with empty data.  Don't do anything."),Pf(0,r,"ok",void 0);else{const p=rD(n),_=function y2(n,e,t,r){!function OU(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Qx(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Jn.fromObject(t);return Fy(n,new ky({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,p);nD(n.eventQueue_,_),n.server_.merge(e.toString(),t,(E,D)=>{const S="ok"===E;S||Gs("update at "+e+" failed: "+E);const P=Nf(n.serverSyncTree_,p,!S),V=P.length>0?Vy(n,e):e;La(n.eventQueue_,V,P),Pf(0,r,E,D)}),Fi(t,E=>{const D=TR(n,lr(e,E));Vy(n,D)}),La(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function dB(n){return function W2(n,e){const t=function I2(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(E,D)=>{const S=qs(E,t);r=r||Rf(D,S)});let i=n.syncPointTree_.get(t);i?r=r||Rf(i,En()):(i=new v1,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new Sf(r,!0,!1):null;return function o2(n){return HT(n.viewCache_)}(w1(i,e,$T(n.pendingWriteTree_,e._path),a?l.getNode():Ht.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=br(r).withIndex(e._queryParams.getIndex()),a=HE(n.serverSyncTree_,e._path,i);return wR(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(Ly(n,"get for query "+(0,k.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,k.m9)(n))._repo,n).then(e=>new cm(e,new Va(n._repo,n._path),n._queryParams.getIndex()))}class uD{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new W1("value",this,new cm(e.snapshotNode,new Va(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new z1(this,e,t):null}matches(e){return e instanceof uD&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class lD{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new z1(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=dm(new Va(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new W1(e.type,this,new cm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof lD&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function YE(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,E=(D,S)=>{CR(n._repo,n,p),_(D,S)};E.userCallback=t.userCallback,E.context=t.context,t=E}const l=new Z1(t,a||void 0),p="value"===e?new uD(l):new lD(e,l);return function J2(n,e,t){let r;r=".info"===Yt(e._path)?T1(n.infoSyncTree_,e,t):T1(n.serverSyncTree_,e,t),wR(n.eventQueue_,e._path,r)}(n._repo,n,p),()=>CR(n._repo,n,p)}function xR(n,e,t,r){return YE(n,"value",e,t,r)}function J1(n,e,t,r){return YE(n,"child_added",e,t,r)}function X1(n,e,t,r){return YE(n,"child_changed",e,t,r)}function ek(n,e,t,r){return YE(n,"child_moved",e,t,r)}function tk(n,e,t,r){return YE(n,"child_removed",e,t,r)}function nk(n,e,t){let r=null;const i=t?new Z1(t):null;"value"===e?r=new uD(i):e&&(r=new lD(e,i)),CR(n._repo,n,r)}class Vu{}class rk extends Vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){tc("endAt",this._value,e._path,!0);const t=Gx(e._queryParams,this._value,this._key);if(aD(t),kf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new vo(e._repo,e._path,t,e._orderByCalled)}}class fB extends Vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){tc("endBefore",this._value,e._path,!1);const t=function bU(n,e,t){let r,i;return n.index_===ec?("string"==typeof e&&(e=QP(e)),i=Gx(n,e,t)):(r=null==t?Ad:QP(t),i=Gx(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(aD(t),kf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new vo(e._repo,e._path,t,e._orderByCalled)}}class ik extends Vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){tc("startAt",this._value,e._path,!0);const t=$x(e._queryParams,this._value,this._key);if(aD(t),kf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new vo(e._repo,e._path,t,e._orderByCalled)}}class mB extends Vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){tc("startAfter",this._value,e._path,!1);const t=function EU(n,e,t){let r;if(n.index_===ec)"string"==typeof e&&(e=YP(e)),r=$x(n,e,t);else{let i;i=null==t?Xl:YP(t),r=$x(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(aD(t),kf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new vo(e._repo,e._path,t,e._orderByCalled)}}class yB extends Vu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new vo(e._repo,e._path,function vU(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class wB extends Vu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new vo(e._repo,e._path,function wU(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class bB extends Vu{constructor(e){super(),this._path=e}_apply(e){oD(e,"orderByChild");const t=new Dn(this._path);if(Qt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Ux(t),i=LT(e._queryParams,r);return kf(i),new vo(e._repo,e._path,i,!0)}}class IB extends Vu{_apply(e){oD(e,"orderByKey");const t=LT(e._queryParams,ec);return kf(t),new vo(e._repo,e._path,t,!0)}}class DB extends Vu{_apply(e){oD(e,"orderByPriority");const t=LT(e._queryParams,Qn);return kf(t),new vo(e._repo,e._path,t,!0)}}class SB extends Vu{_apply(e){oD(e,"orderByValue");const t=LT(e._queryParams,Bx);return kf(t),new vo(e._repo,e._path,t,!0)}}class RB extends Vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(tc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new rk(this._value,this._key)._apply(new ik(this._value,this._key)._apply(e))}}function Uu(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function c2(n){(0,k.hu)(!zT,"__referenceConstructor has already been defined"),zT=n})(Va),function g2(n){(0,k.hu)(!KT,"__referenceConstructor has already been defined"),KT=n}(Va);const RR={};function ok(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Jl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Oi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,E,l=AR(a,i),p=l.repoInfo;"undefined"!=typeof process&&(E=process.env.FIREBASE_DATABASE_EMULATOR_HOST),E?(_=!0,a=`http://${E}?ns=${p.namespace}`,l=AR(a,i),p=l.repoInfo):_=!l.repoInfo.secure;const D=i&&_?new SE(SE.OWNER):new bV(n.name,n.options,e);O1("Invalid Firebase Database URL",l),Qt(l.path)||Jl("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function OB(n,e,t,r){let i=RR[e.name];i||(i={},RR[e.name]=i);let a=i[n.toURLString()];return a&&Jl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new $2(n,false,t,r),i[n.toURLString()]=a,a}(p,n,D,new EV(n.name,t));return new LB(S,n)}class LB{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function G2(n,e,t){if(n.stats_=xx(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new VT(n.repoInfo_,(r,i,a,l)=>{U1(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>B1(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new sm(n.repoInfo_,e,(r,i,a,l)=>{U1(n,r,i,a,l)},r=>{B1(n,r)},r=>{!function q2(n,e){Fi(e,(t,r)=>{ER(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function DV(n,e){const t=n.toString();return Sx[t]||(Sx[t]=e()),Sx[t]}(n.repoInfo_,()=>new SU(n.stats_,n.server_)),n.infoData_=new CU,n.infoSyncTree_=new I1({startListening:(r,i,a,l)=>{let p=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(p=HE(n.infoSyncTree_,r._path,_),setTimeout(()=>{l("ok")},0)),p},stopListening:()=>{}}),ER(n,"connected",!1),n.serverSyncTree_=new I1({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(p,_)=>{const E=l(p,_);La(n.eventQueue_,r._path,E)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Va(this._repo,En())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function kB(n,e){const t=RR[e];(!t||t[n.key]!==n)&&Jl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),H1(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Jl("Cannot call "+e+" on a deleted database.")}}function jB(n,e){uP(n,e)}const $B={".sv":"timestamp"};class WB{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}sm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},sm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function HB(n){rP(Yi.SDK_VERSION),(0,Yi._registerComponent)(new co.wA("database",(e,{instanceIdentifier:t})=>ok(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Yi.registerVersion)(tP,"0.12.7",n),(0,Yi.registerVersion)(tP,"0.12.7","esm2017")}();const YB=new $o.Yd("@firebase/database-compat"),ak=function(n){YB.warn("FIREBASE WARNING: "+n)};class XB{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,ak("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class ej{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Of{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),ZE("DataSnapshot.child","path",e,!1),new Of(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),ZE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Of(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new Qo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ts{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const l=ts.getCancelAndContextArgs_("Query.on",r,i),p=(E,D)=>{t.call(l.context,new Of(this.database,E),D)};p.userCallback=t,p.context=l.context;const _=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return xR(this._delegate,p,_),t;case"child_added":return J1(this._delegate,p,_),t;case"child_removed":return tk(this._delegate,p,_),t;case"child_changed":return X1(this._delegate,p,_),t;case"child_moved":return ek(this._delegate,p,_),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,nk(this._delegate,e,i)}else nk(this._delegate,e)}get(){return dB(this._delegate).then(e=>new Of(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const a=ts.getCancelAndContextArgs_("Query.once",r,i),l=new k.BH,p=(E,D)=>{const S=new Of(this.database,E);t&&t.call(a.context,S,D),l.resolve(S)};p.userCallback=t,p.context=a.context;const _=E=>{a.cancel&&a.cancel.call(a.context,E),l.reject(E)};switch(e){case"value":xR(this._delegate,p,_,{onlyOnce:!0});break;case"child_added":J1(this._delegate,p,_,{onlyOnce:!0});break;case"child_removed":tk(this._delegate,p,_,{onlyOnce:!0});break;case"child_changed":X1(this._delegate,p,_,{onlyOnce:!0});break;case"child_moved":ek(this._delegate,p,_,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new ts(this.database,Uu(this._delegate,function vB(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new yB(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new ts(this.database,Uu(this._delegate,function EB(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new wB(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new ts(this.database,Uu(this._delegate,function CB(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ZE("orderByChild","path",n,!1),new bB(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new ts(this.database,Uu(this._delegate,function TB(){return new IB}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new ts(this.database,Uu(this._delegate,function AB(){return new DB}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new ts(this.database,Uu(this._delegate,function xB(){return new SB}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new ts(this.database,Uu(this._delegate,function gB(n=null,e){return zE("startAt","key",e,!0),new ik(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new ts(this.database,Uu(this._delegate,function _B(n,e){return zE("startAfter","key",e,!0),new mB(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new ts(this.database,Uu(this._delegate,function hB(n,e){return zE("endAt","key",e,!0),new rk(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new ts(this.database,Uu(this._delegate,function pB(n,e){return zE("endBefore","key",e,!0),new fB(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new ts(this.database,Uu(this._delegate,function MB(n,e){return zE("equalTo","key",e,!0),new RB(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ts))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Qo(this.database,new Va(this._delegate._repo,this._delegate._path))}}class Qo extends ts{constructor(e,t){super(e,new vo(t._repo,t._path,new FT,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Qo(this.database,dm(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Qo(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new Qo(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=SR(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,ak("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Fa("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=cB(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function lB(n,e,t){if(Fa("setWithPriority",n._path),tc("setWithPriority",e,n._path,!1),vR("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return bR(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function aB(n){return Fa("remove",n._path),SR(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function zB(n,e,t){var r;if(n=(0,k.m9)(n),Fa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new k.BH,p=xR(n,()=>{});return function eB(n,e,t,r,i,a){Ly(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:sP(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},p=IR(n,e,void 0);l.currentInputSnapshot=p;const _=l.update(p.val());if(void 0===_)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{WE("transaction failed: Data returned ",_,l.path),l.status=0;const E=XT(n.transactionQueueTree_,e),D=lm(E)||[];let S;D.push(l),mR(E,D),"object"==typeof _&&null!==_&&(0,k.r3)(_,".priority")?(S=(0,k.DV)(_,".priority"),(0,k.hu)(qE(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(YT(n.serverSyncTree_,e)||Ht.EMPTY_NODE).getPriority().val();const P=KE(n),V=br(_,S),H=fR(V,p,P);l.currentOutputSnapshotRaw=V,l.currentOutputSnapshotResolved=H,l.currentWriteId=rD(n);const le=oR(n.serverSyncTree_,e,H,l.currentWriteId,l.applyLocally);La(n.eventQueue_,e,le),iD(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,E,D)=>{let S=null;_?a.reject(_):(S=new cm(D,new Va(n._repo,n._path),Qn),a.resolve(new WB(E,S)))},p,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new ej(a.committed,new Of(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function uB(n,e){n=(0,k.m9)(n),Fa("setPriority",n._path),vR("setPriority",e,!1);const t=new k.BH;return bR(n._repo,lr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function oB(n,e){n=(0,k.m9)(n),Fa("push",n._path),tc("push",e,n._path,!0);const t=V1(n._repo),r=gU(t),i=dm(n,r),a=dm(n,r);let l;return l=null!=e?SR(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Qo(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Qo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Fa("Reference.onDisconnect",this._delegate._path),new XB(new K1(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class QE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function VB(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Jl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Jl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new SE(SE.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);a=new SE(l)}!function PB(n,e,t,r){n.repoInfo_=new Dx(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof Qo){const t=Q1(this._delegate,e.toString());return new Qo(this,t)}{const t=Y1(this._delegate,e);return new Qo(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=Q1(this._delegate,e);return new Qo(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function UB(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),H1(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function BB(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function X2(n){n.persistentConnection_&&n.persistentConnection_.resume(L1)}(n._repo)}(this._delegate)}}QE.ServerValue={TIMESTAMP:function GB(){return $B}(),increment:n=>function qB(n){return{".sv":{increment:n}}}(n)};var nj=Object.freeze({__proto__:null,initStandalone:function tj({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){rP(t);const l=new co.zt("auth-internal",new co.H0("database-standalone"));return l.setComponent(new co.wA("auth-internal",()=>r,"PRIVATE")),{instance:new QE(ok(n,l,void 0,e,a),n),namespace:i}}});const rj=QE.ServerValue;function uk(n){return null==n}function lk(n){return"function"==typeof n.set}function ck(n,e){return lk(e)?e:n.ref(e)}function dk(n,e){if(function sj(n){return"string"==typeof n}(n))return e.stringCase();if(lk(n))return e.firebaseCase();if(function oj(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function JE(n,e,t="on",r=Op.z){return new fr.y(i=>{let a=null;return a=n[t](e,(l,p)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:p})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,lt.U)(i=>{const{snapshot:a,prevKey:l}=i;let p=null;return a.exists()&&(p=a.key),{type:e,payload:a,prevKey:l,key:p}}),(0,wN.B)())}function hk(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function lj(n,e){const{payload:t,prevKey:r,key:i}=e,a=hk(n,i),l=function uj(n,e){if(uk(e))return 0;{const t=hk(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let p=null;e.payload.forEach(_=>{const E={payload:_,type:"value",prevKey:p,key:_.key};return p=_.key,n=[...n,E],!1})}return n;case"child_added":if(a>-1){const p=n[a-1];(p&&p.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(p=>p.payload.key!==t.key);case"child_changed":return n.map(p=>p.payload.key===i?e:p);case"child_moved":if(a>-1){const p=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,p),n}return n;default:return n}}function fk(n){return(uk(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function pk(n,e,t){return function aj(n,e,t){return JE(n,"value","once",t).pipe(Tn(r=>{const i=[ft(r)];return e.forEach(a=>i.push(JE(n,a,"on",t))),(0,WS.T)(...i).pipe(Yr(lj,[]))}),yb())}(n,e=fk(e),t)}function gk(n,e,t){const r=(e=fk(e)).map(i=>JE(n,i,"on",t));return(0,WS.T)(...r)}function mk(n,e){return function(r,i){return dk(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function fj(n){return function(t){return t?dk(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function _k(n,e){return function(){return JE(n,"value","on",e)}}!function ij(n){n.INTERNAL.registerComponent(new co.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new QE(i,r)},"PUBLIC").setServiceProps({Reference:Qo,Query:ts,Database:QE,DataSnapshot:Of,enableLogging:jB,INTERNAL:nj,ServerValue:rj}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.7")}(wb.Z);const mj=new d.OlP("angularfire2.realtimeDatabaseURL"),_j=new d.OlP("angularfire2.database.use-emulator");let MR=(()=>{class n{constructor(t,r,i,a,l,p,_,E,D,S,P,V,H,le,Ee){this.schedulers=p;const Ye=_,qe=(0,_r.on)(t,l,r);E&&_x(qe,l,D,P,V,H,S,le),this.database=(0,_r.cc)(`${qe.name}.database.${i}`,"AngularFireDatabase",qe.name,()=>{const ct=l.runOutsideAngular(()=>qe.database(i||void 0));return Ye&&ct.useEmulator(...Ye),ct},[Ye])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>ck(this.database,t));let a=i;return r&&(a=r(i)),function pj(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:mk(r,"update"),set:mk(r,"set"),push:i=>r.push(i),remove:fj(r),snapshotChanges:i=>pk(n,i,t).pipe(hn.iC),stateChanges:i=>gk(n,i,t).pipe(hn.iC),auditTrail:i=>function cj(n,e,t){return function hj(n,e,t){return function dj(n,e){return JE(n,"value","on",e).pipe((0,lt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function lV(...n){const e=(0,Wn.jO)(n);return(0,gr.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),p=!1;for(let _=0;_<i;_++)(0,pr.Xf)(n[_]).subscribe(new Pn.Q(r,E=>{a[_]=E,!p&&!l[_]&&(l[_]=!0,(p=l.every(qi.y))&&(l=null))},uV.Z));t.subscribe(new Pn.Q(r,_=>{if(p){const E=[_,...a];r.next(e?e(...E):E)}}))})}(e),(0,lt.U)(([i,a])=>{const l=i.lastKeyToLoad,p=a.map(_=>_.key);return{actions:a,lastKeyToLoad:l,loadedKeys:p}}),function cV(n){return(0,gr.e)((e,t)=>{let r=!1,i=0;e.subscribe(new Pn.Q(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,lt.U)(i=>i.actions))}(n,gk(n,e).pipe(Yr((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(hn.iC),valueChanges:(i,a)=>pk(n,i,t).pipe((0,lt.U)(p=>p.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),hn.iC)}}(a,this)}object(t){return function gj(n,e){return{query:n,snapshotChanges:()=>_k(n,e.schedulers.outsideAngular)().pipe(hn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>_k(n,e.schedulers.outsideAngular)().pipe(hn.iC,(0,lt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>ck(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_r.Dh),d.LFG(_r.xv,8),d.LFG(mj,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(hn.HU),d.LFG(_j,8),d.LFG(bE,8),d.LFG(dx,8),d.LFG(hx,8),d.LFG(fx,8),d.LFG(px,8),d.LFG(gx,8),d.LFG(mx,8),d.LFG(EE,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),yj=(()=>{class n{constructor(){DT.Z.registerVersion("angularfire",hn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[MR]}),n})(),XE=(()=>{class n{constructor(t,r){this.auth=t,this.db=r,this.sendCurrentNumberPage=new Gi.x,this.auth.user$.subscribe(i=>{this.idToken=null==i?void 0:i.idToken})}currentPage(t){return this.sendCurrentNumberPage.next(t)}getArticles(){return this.db.list("articles").valueChanges().pipe((0,lt.U)(t=>t.sort((r,i)=>new Date(i.creationDate).getTime()-new Date(r.creationDate).getTime())))}getCountArticles(){return this.db.list("articles").valueChanges().pipe((0,lt.U)(t=>t.length))}getLastArticle(){return this.db.list("articles").valueChanges().pipe((0,lt.U)(t=>t.sort((r,i)=>new Date(i.creationDate).getTime()-new Date(r.creationDate).getTime())[0]))}searchArticles(t){return this.db.list("articles").valueChanges().pipe((0,lt.U)(r=>r.filter(i=>i.title.toLowerCase().includes(t.toLowerCase()))))}paginate(t,r){return this.db.list("articles").valueChanges().pipe((0,lt.U)(i=>i.sort((a,l)=>new Date(l.creationDate).getTime()-new Date(a.creationDate).getTime()).slice((t-1)*r,t*r)))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(CE),d.LFG(MR))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yk=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),hm=(()=>{class n extends yk{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const nc=new d.OlP("NgValueAccessor"),Ej={provide:nc,useExisting:(0,d.Gpc)(()=>eb),multi:!0},Cj=new d.OlP("CompositionEventMode");let eb=(()=>{class n extends yk{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function bj(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(Cj,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[d._Bn([Ej]),d.qOj]}),n})();const ys=new d.OlP("NgValidators"),Lf=new d.OlP("NgAsyncValidators");function xk(n){return null!=n}function Rk(n){const e=(0,d.QGY)(n)?(0,cn.D)(n):n;return(0,d.CqO)(e),e}function Mk(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Nk(n,e){return e.map(t=>t(n))}function Pk(n){return n.map(e=>function Tj(n){return!n.validate}(e)?e:t=>e.validate(t))}function NR(n){return null!=n?function kk(n){if(!n)return null;const e=n.filter(xk);return 0==e.length?null:function(t){return Mk(Nk(t,e))}}(Pk(n)):null}function PR(n){return null!=n?function Ok(n){if(!n)return null;const e=n.filter(xk);return 0==e.length?null:function(t){return function vj(...n){const e=(0,Wn.jO)(n),{args:t,keys:r}=Ss(n),i=new fr.y(a=>{const{length:l}=t;if(!l)return void a.complete();const p=new Array(l);let _=l,E=l;for(let D=0;D<l;D++){let S=!1;(0,pr.Xf)(t[D]).subscribe(new Pn.Q(a,P=>{S||(S=!0,E--),p[D]=P},()=>_--,void 0,()=>{(!_||!S)&&(E||a.next(r?so(r,p):p),a.complete())}))}});return e?i.pipe(fa(e)):i}(Nk(t,e).map(Rk)).pipe((0,lt.U)(Mk))}}(Pk(n)):null}function Fk(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function kR(n){return n?Array.isArray(n)?n:[n]:[]}function cD(n,e){return Array.isArray(n)?n.includes(e):n===e}function Uk(n,e){const t=kR(e);return kR(n).forEach(i=>{cD(t,i)||t.push(i)}),t}function Bk(n,e){return kR(e).filter(t=>!cD(n,t))}class jk{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=NR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=PR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Vf extends jk{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ws extends jk{get formDirective(){return null}get path(){return null}}class Hk{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let OR=(()=>{class n extends Hk{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Vf,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[d.qOj]}),n})(),dD=(()=>{class n extends Hk{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ws,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[d.qOj]}),n})();function nb(n,e){VR(n,e),e.valueAccessor.writeValue(n.value),function Rj(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&$k(n,e)})}(n,e),function Nj(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Mj(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&$k(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function xj(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function gD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function VR(n,e){const t=function Lk(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Fk(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Vk(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Fk(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();gD(e._rawValidators,i),gD(e._rawAsyncValidators,i)}function $k(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function _D(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const rb="VALID",yD="INVALID",Uy="PENDING",ib="DISABLED";function jR(n){return($R(n)?n.validators:n)||null}function Wk(n){return Array.isArray(n)?NR(n):n||null}function HR(n,e){return($R(e)?e.asyncValidators:n)||null}function zk(n){return Array.isArray(n)?PR(n):n||null}function $R(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class GR{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Wk(this._rawValidators),this._composedAsyncValidatorFn=zk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===rb}get invalid(){return this.status===yD}get pending(){return this.status==Uy}get disabled(){return this.status===ib}get enabled(){return this.status!==ib}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Wk(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=zk(e)}addValidators(e){this.setValidators(Uk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Uk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Bk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Bk(e,this._rawAsyncValidators))}hasValidator(e){return cD(this._rawValidators,e)}hasAsyncValidator(e){return cD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Uy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ib,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=rb,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===rb||this.status===Uy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ib:rb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Uy,this._hasOwnPendingAsyncValidator=!0;const t=Rk(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function Fj(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=r instanceof qR?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof Lj&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?ib:this.errors?yD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Uy)?Uy:this._anyControlsHaveStatus(yD)?yD:rb}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){$R(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class vD extends GR{constructor(e=null,t,r){super(jR(t),HR(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){_D(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){_D(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class qR extends GR{constructor(e,t,r){super(jR(t),HR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof vD?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class Lj extends GR{constructor(e,t,r){super(jR(t),HR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof vD?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Vj={provide:Ws,useExisting:(0,d.Gpc)(()=>By)},sb=(()=>Promise.resolve(null))();let By=(()=>{class n extends Ws{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new d.vpe,this.form=new qR({},NR(t),PR(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){sb.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),nb(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){sb.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),_D(this._directives,t)})}addFormGroup(t){sb.then(()=>{const r=this._findContainer(t.path),i=new qR({});(function Gk(n,e){VR(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){sb.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){sb.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function qk(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ys,10),d.Y36(Lf,10))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([Vj]),d.qOj]}),n})();const Bj={provide:Vf,useExisting:(0,d.Gpc)(()=>wD)},Yk=(()=>Promise.resolve(null))();let wD=(()=>{class n extends Vf{constructor(t,r,i,a){super(),this.control=new vD,this._registered=!1,this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function BR(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===eb?t=a:function Oj(n){return Object.getPrototypeOf(n.constructor)===hm}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function UR(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function fD(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){nb(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Yk.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;Yk.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ws,9),d.Y36(ys,10),d.Y36(Lf,10),d.Y36(nc,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([Bj]),d.qOj,d.TTD]}),n})(),ED=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Jk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const iH={provide:ys,useExisting:(0,d.Gpc)(()=>CD),multi:!0};let CD=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?function Ck(n){return function Ff(n){return null==n||0===n.length}(n.value)?{required:!0}:null}(t):null}registerOnValidatorChange(t){this._onChange=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("required",r.required?"":null)},inputs:{required:"required"},features:[d._Bn([iH])]}),n})(),cH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Jk]]}),n})(),dH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[cH]}),n})();function hH(n,e){if(1&n&&(d.TgZ(0,"div"),d.TgZ(1,"div",12),d.TgZ(2,"h2",13),d._uU(3),d.qZA(),d.qZA(),d.qZA()),2&n){const t=d.oxw();d.xp6(3),d.hij(" ",t.searchFound," articles trouv\xe9s ")}}function fH(n,e){1&n&&(d.TgZ(0,"div",12),d.TgZ(1,"h2",13),d._uU(2," Aucun article trouv\xe9s "),d.qZA(),d.qZA())}function pH(n,e){if(1&n&&(d.TgZ(0,"h2",15),d._uU(1," Like: "),d.TgZ(2,"span",17),d._uU(3),d.qZA(),d.qZA()),2&n){const t=d.oxw().$implicit;d.xp6(3),d.Oqu(t.like)}}function gH(n,e){if(1&n&&(d.TgZ(0,"h2",15),d._uU(1," Tags: "),d.TgZ(2,"span",17),d._uU(3),d.qZA(),d.qZA()),2&n){const t=d.oxw().$implicit;d.xp6(3),d.Oqu(t.tags)}}function mH(n,e){if(1&n&&(d.TgZ(0,"li",14),d.TgZ(1,"h2",15),d._uU(2," Titre: "),d.TgZ(3,"a",16),d.TgZ(4,"span",17),d._uU(5),d.qZA(),d.qZA(),d.qZA(),d.TgZ(6,"h2",15),d._uU(7," Description: "),d.TgZ(8,"span",17),d._uU(9),d.qZA(),d.qZA(),d.TgZ(10,"h2",15),d._uU(11," Date: "),d.TgZ(12,"span",17),d._uU(13),d.ALo(14,"date"),d.qZA(),d.qZA(),d.YNc(15,pH,4,1,"h2",18),d.YNc(16,gH,4,1,"h2",18),d.qZA()),2&n){const t=e.$implicit;d.xp6(3),d.MGl("routerLink","/description/",t.id,""),d.xp6(2),d.Oqu(t.title),d.xp6(4),d.Oqu(t.description),d.xp6(4),d.Oqu(d.xi3(14,6,t.creationDate,"dd/MM/YYYY")),d.xp6(2),d.Q6J("ngIf",t.like),d.xp6(1),d.Q6J("ngIf",t.tags)}}let _H=(()=>{class n{constructor(t){this.articleService=t,this.onPlay=new d.vpe,this.onDurationStart=new d.vpe,this.searchFound=0,this.count=0,this.word=""}set currentPage(t){this.articleService.paginate(t,2).subscribe(r=>this.articles=r)}ngOnInit(){this.articleService.getCountArticles().subscribe(t=>{this.count=t,this.searchFound=t})}onTyping(t){t.target.value.length>0?(this.articleService.searchArticles(t.target.value).subscribe(r=>this.articles=r),this.searchFound=this.articles.length):(this.articleService.getArticles().subscribe(r=>this.articles=r),this.searchFound=0)}onSubmit(t){""!==t.value.word?(this.articleService.searchArticles(t.value.word).subscribe(r=>this.articles=r),this.articles.length>0?this.searchFound=this.articles.length:(this.articleService.getArticles().subscribe(r=>this.articles=r),this.searchFound=0)):(this.articleService.getArticles().subscribe(r=>this.articles=r),this.searchFound=0)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(XE))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-articles"]],inputs:{currentPage:"currentPage"},outputs:{onPlay:"onPlay",onDurationStart:"onDurationStart"},decls:14,vars:4,consts:[[1,"container","max-w-screen-md","mx-auto"],[1,"pt-4","px-4"],[1,"flex","flex-col","items-center","justify-center","pt-2","px-4"],[3,"ngSubmit"],["formSearch","ngForm"],["name","word","type","text","placeholder","Search","aria-label","Search",1,"font-thin","text-secondary-600","px-2","py-2","outline-none","focus:ring-primary-200","focus:ring-2","rounded-md","placeholder-primary-200","bg-white",3,"keyup"],["type","submit",1,"bg-secondary-500","hover:bg-secondary-600","text-secondary-50","font-sans","ml-2","py-2","px-4","rounded-xl",3,"disabled"],[4,"ngIf","ngIfElse"],["nothingFound",""],[1,"flex","items-center","justify-center","rounded-md"],[1,"grid","grid-cols-2","grid-rows-1","gap-20","place-content-evenly","max-w-screen-xl"],["class","col-span-1 row-span-1 mb-4 px-4 py-8 bg-white shadow-md rounded-md",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-center","py-4","px-4"],[1,"font-sans","font-bold","text-center","text-primary-700"],[1,"col-span-1","row-span-1","mb-4","px-4","py-8","bg-white","shadow-md","rounded-md"],[1,"px-1","py-2","font-bold","text-primary-800"],[3,"routerLink"],[1,"font-thin","text-primary-500"],["class","px-1 py-2 font-bold text-primary-800",4,"ngIf"]],template:function(t,r){if(1&t){const i=d.EpF();d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"form",3,4),d.NdJ("ngSubmit",function(){d.CHM(i);const l=d.MAs(4);return r.onSubmit(l)}),d.TgZ(5,"input",5),d.NdJ("keyup",function(l){return r.onTyping(l)}),d.qZA(),d.TgZ(6,"button",6),d._uU(7," Search "),d.qZA(),d.qZA(),d.YNc(8,hH,4,1,"div",7),d.YNc(9,fH,3,0,"ng-template",null,8,d.W1O),d.qZA(),d.qZA(),d.TgZ(11,"div",9),d.TgZ(12,"ul",10),d.YNc(13,mH,17,9,"li",11),d.qZA(),d.qZA(),d.qZA()}if(2&t){const i=d.MAs(4),a=d.MAs(10);d.xp6(6),d.Q6J("disabled",i.invalid),d.xp6(2),d.Q6J("ngIf",r.searchFound>0)("ngIfElse",a),d.xp6(5),d.Q6J("ngForOf",r.articles)}},directives:[ED,dD,By,Ui,Qs,f],pipes:[oa],encapsulation:2}),n})(),yH=(()=>{class n{constructor(t){this.articleService=t,this.perPage=2,this.page=1,this.max_page=0,this.currentPage=new d.vpe,t.sendCurrentNumberPage.subscribe(r=>{})}ngOnInit(){this.articleService.getCountArticles().subscribe(t=>this.max_page=t/this.perPage)}next(){this.page=this.page<this.max_page?this.page+1:1,this.currentPage.emit(this.page)}previous(){this.page=this.page>1?this.page-1:this.max_page,this.currentPage.emit(this.page)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(XE))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-paginate"]],outputs:{currentPage:"currentPage"},decls:12,vars:0,consts:[[1,"flex","items-center","justify-center","px-4","py-8"],["aria-label","Pagination",1,"relative","z-0","inline-flex","rounded-md","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-primary-100","bg-white","text-sm","font-medium","text-primary-800","hover:bg-primary-50",3,"click"],[1,"sr-only"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"h-5","w-5"],["fill-rule","evenodd","d","M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule","evenodd"],[1,"outline-none","relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-primary-100","bg-white","text-sm","font-medium","text-primary-800","hover:bg-primary-50",3,"click"],["fill-rule","evenodd","d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule","evenodd"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"nav",1),d.TgZ(2,"button",2),d.NdJ("click",function(){return r.previous()}),d.TgZ(3,"span",3),d._uU(4,"Previous"),d.qZA(),d.O4$(),d.TgZ(5,"svg",4),d._UZ(6,"path",5),d.qZA(),d.qZA(),d.kcU(),d.TgZ(7,"button",6),d.NdJ("click",function(){return r.next()}),d.TgZ(8,"span",3),d._uU(9,"Next"),d.qZA(),d.O4$(),d.TgZ(10,"svg",4),d._UZ(11,"path",7),d.qZA(),d.qZA(),d.qZA(),d.qZA())},styles:[""]}),n})(),vH=(()=>{class n{constructor(t){this.articleService=t,this.lastArticle=new yh,this.currentAlbumPage=1}ngOnInit(){this.articleService.getLastArticle().subscribe(t=>{this.lastArticle=t})}setCurrentAlbumPage(t){this.currentAlbumPage=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(XE))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-articles-page"]],decls:3,vars:1,consts:[[1,"bg-primary-50","min-w-full","min-h-screen"],[3,"currentPage"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d._UZ(1,"app-articles",1),d.TgZ(2,"app-paginate",1),d.NdJ("currentPage",function(a){return r.setCurrentAlbumPage(a)}),d.qZA(),d.qZA()),2&t&&(d.xp6(1),d.Q6J("currentPage",r.currentAlbumPage))},directives:[_H,yH],styles:[""]}),n})(),wH=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-contact-page"]],decls:28,vars:0,consts:[[1,"container","max-w-full","bg-primary-50","mt-0"],[1,"bg-primary-50","min-h-screen","w-full"],[1,"flex","items-center","justify-center","pt-10"],[1,"bg-primary-100","shadow","rounded","py-12","lg:px-28","px-8"],[1,"md:text-3xl","text-xl","font-bold","leading-7","text-center","text-primary-700"],[1,"md:flex","items-center","mt-12"],[1,"md:w-72","flex","flex-col"],[1,"text-base","font-semibold","leading-none","text-primary-800"],["tabindex","0","arial-label","Please input name","type","name","placeholder","Compl\xe9ter votre nom",1,"focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","mt-4","bg-white","rounded","placeholder-primary-100"],[1,"md:w-72","flex","flex-col","md:ml-6","md:mt-0","mt-4"],["tabindex","0","arial-label","Please input email address","type","name","placeholder","Compl\xe9ter votre email",1,"focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","mt-4","bg-white","rounded","placeholder-primary-100"],[1,"md:flex","items-center","mt-8"],["tabindex","0","role","input","arial-label","Please input company name","type","name","placeholder","Compl\xe9ter votre entreprise",1,"focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","mt-4","bg-white","rounded","placeholder-primary-100"],[1,"w-full","flex","flex-col","mt-8"],["tabindex","0","aria-label","leave a message","role","textbox","type","name",1,"outline-none","h-36","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","mt-4","rounded","focus:ring-2","focus:ring-primary-700","border-primary-200","placeholder-primary-100","resize-none","bg-white"],[1,"flex","items-center","justify-center","w-full"],[1,"mt-9","text-base","font-semibold","leading-none","text-primary-50","py-4","px-10","bg-primary-700","rounded","hover:bg-primary-600","focus:ring-2","focus:ring-primary-700","focus:outline-none"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d.TgZ(4,"p",4),d._uU(5," Contactez nous "),d.qZA(),d.TgZ(6,"div",5),d.TgZ(7,"div",6),d.TgZ(8,"label",7),d._uU(9,"Nom *"),d.qZA(),d._UZ(10,"input",8),d.qZA(),d.TgZ(11,"div",9),d.TgZ(12,"label",7),d._uU(13,"Email *"),d.qZA(),d._UZ(14,"input",10),d.qZA(),d.qZA(),d.TgZ(15,"div",11),d.TgZ(16,"div",6),d.TgZ(17,"label",7),d._uU(18," Entreprise *"),d.qZA(),d._UZ(19,"input",12),d.qZA(),d.qZA(),d.TgZ(20,"div"),d.TgZ(21,"div",13),d.TgZ(22,"label",7),d._uU(23,"Message *"),d.qZA(),d._UZ(24,"textarea",14),d.qZA(),d.qZA(),d.TgZ(25,"div",15),d.TgZ(26,"button",16),d._uU(27," ENVOYEZ "),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA())},styles:[""]}),n})(),EH=(()=>{class n{constructor(t,r,i){this.db=t,this.articleService=r,this.datePipe=i,this.id="",this.status="",this.title="",this.description="",this.creationDate=new Date,this.articleService.getCountArticles().subscribe(a=>{this.id=a.toString(),console.log(this.id)})}ngOnInit(){this.datePipe.transform(this.creationDate,"dd/MM/yyyy")}onSubmit(t){console.log(this.id),this.db.list("articles").set(this.id,{id:this.id,status:"Published",title:t.value.title,description:t.value.description,creationDate:t.value.creationDate})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(MR),d.Y36(XE),d.Y36(oa))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-add-article"]],decls:18,vars:7,consts:[[3,"ngSubmit"],["formSearch","ngForm"],[1,"mb-4"],["for","username",1,"block","text-primary-700","text-sm","font-bold","mb-2"],["name","title","id","title","type","text","placeholder","Titre","aria-label","Tilte","required","",1,"w-full","focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","bg-white","rounded","placeholder-primary-100",3,"ngModel","ngModelChange"],["for","password",1,"block","text-primary-700","text-sm","font-bold","mb-2"],["name","description","required","","id","description","type","description","placeholder","Entrer une description de votre article","aria-label","Description",1,"justify-start","w-full","focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","bg-white","rounded","placeholder-primary-100","h-96","overflow-y-scroll",3,"ngModel","ngModelChange"],["name","creationDate","required","","id","creationDate","min","2018-01-01","max","2030-12-31","type","date","aria-label","CreationDate",1,"w-full","focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","bg-white","rounded","placeholder-primary-100",3,"ngModel","ngModelChange"],[1,"flex","items-center","justify-center","my-8"],["type","submit",1,"bg-primary-500","hover:bg-primary-600","text-white","font-thin","py-2","px-4","rounded-xl",3,"disabled"]],template:function(t,r){if(1&t){const i=d.EpF();d.TgZ(0,"form",0,1),d.NdJ("ngSubmit",function(){d.CHM(i);const l=d.MAs(1);return r.onSubmit(l)}),d.TgZ(2,"div",2),d.TgZ(3,"label",3),d._uU(4," Titre * "),d.qZA(),d.TgZ(5,"input",4),d.NdJ("ngModelChange",function(l){return r.title=l}),d.qZA(),d.qZA(),d.TgZ(6,"div",2),d.TgZ(7,"label",5),d._uU(8," Description * "),d.qZA(),d.TgZ(9,"textarea",6),d.NdJ("ngModelChange",function(l){return r.description=l}),d.qZA(),d.qZA(),d.TgZ(10,"div",2),d.TgZ(11,"label",5),d._uU(12," Date de creation * "),d.qZA(),d.TgZ(13,"input",7),d.NdJ("ngModelChange",function(l){return r.creationDate=l}),d.ALo(14,"date"),d.qZA(),d.qZA(),d.TgZ(15,"div",8),d.TgZ(16,"button",9),d._uU(17," Add article "),d.qZA(),d.qZA(),d.qZA()}if(2&t){const i=d.MAs(1);d.xp6(5),d.Q6J("ngModel",r.title),d.xp6(4),d.Q6J("ngModel",r.description),d.xp6(4),d.Q6J("ngModel",d.xi3(14,4,r.creationDate,"yyyy-MM-dd")),d.xp6(3),d.Q6J("disabled",i.invalid)}},directives:[ED,dD,By,eb,CD,OR,wD],pipes:[oa],styles:[""]}),n})();function bH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",5),d.TgZ(1,"form",6,7),d.NdJ("ngSubmit",function(){d.CHM(t);const i=d.MAs(2);return d.oxw().onSubmit(i)}),d.TgZ(3,"div",8),d.TgZ(4,"label",9),d._uU(5," Username "),d.qZA(),d.TgZ(6,"input",10),d.NdJ("ngModelChange",function(i){return d.CHM(t),d.oxw().username=i}),d.qZA(),d.qZA(),d.TgZ(7,"div",8),d.TgZ(8,"label",11),d._uU(9," Password "),d.qZA(),d.TgZ(10,"input",12),d.NdJ("ngModelChange",function(i){return d.CHM(t),d.oxw().password=i}),d.qZA(),d.qZA(),d.TgZ(11,"div",13),d.TgZ(12,"button",14),d._uU(13," Log In "),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&n){const t=d.MAs(2),r=d.oxw();d.xp6(6),d.Q6J("ngModel",r.username),d.xp6(4),d.Q6J("ngModel",r.password),d.xp6(2),d.Q6J("disabled",t.invalid)}}function CH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",15),d.TgZ(1,"div",16),d.TgZ(2,"h1",17),d._uU(3),d.ALo(4,"async"),d.qZA(),d._UZ(5,"app-add-article"),d.TgZ(6,"a",18),d.NdJ("click",function(){return d.CHM(t),d.oxw().onLogout()}),d._uU(7," Log Out "),d.qZA(),d.qZA(),d.qZA()}if(2&n){const t=d.oxw();let r;d.xp6(3),d.hij(" Welcome ",null==(r=d.lcZ(4,1,t.user$))?null:r.email," ")}}let IH=(()=>{class n{constructor(t){this.auth=t,this.username="",this.password="",this.loginSucess$=this.auth.isLogIn$,this.user$=this.auth.user$}onSubmit(t){this.auth.signIn(t.value.username,t.value.password),this.username="",this.password=""}onLogout(){this.auth.signOut()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(CE))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-login"]],decls:7,vars:4,consts:[[1,"container","max-w-full","max-h-full","bg-primary-300"],[1,"bg-primary-50","py-8","px-4","flex","flex-col","min-w-screen","min-h-screen","items-center","justify-center"],[1,"container","max-w-lg"],["class","container bg-primary-100 shadow-xl rounded-md px-8 pt-6 pb-8 mb-4",4,"ngIf","ngIfElse"],["logIn",""],[1,"container","bg-primary-100","shadow-xl","rounded-md","px-8","pt-6","pb-8","mb-4"],[3,"ngSubmit"],["formSearch","ngForm"],[1,"mb-4"],["for","username",1,"block","text-primary-700","text-sm","font-bold","mb-2"],["name","username","id","username","type","text","placeholder","Username","aria-label","Username",1,"w-full","focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","bg-white","rounded","placeholder-primary-100",3,"ngModel","ngModelChange"],["for","password",1,"block","text-primary-700","text-sm","font-bold","mb-2"],["name","password","id","password","type","password","placeholder","******************","aria-label","Password",1,"w-full","focus:ring-2","focus:ring-primary-700","outline-none","text-base","leading-none","text-primary-900","p-3","focus:oultine-none","focus:border-primary-700","bg-white","rounded","placeholder-primary-100",3,"ngModel","ngModelChange"],[1,"flex","items-center","justify-center","mt-8"],["type","submit",1,"bg-primary-500","hover:bg-primary-600","text-white","font-thin","py-2","px-4","rounded-xl",3,"disabled"],[1,"flex","items-center","justify-center"],[1,"text-center"],[1,"text-primary-700","text-3xl","font-bold","mb-8"],[1,"text-primary-500","hover:text-primary-500","font-thin","underline","mt-4","cursor-pointer","justify-end",3,"click"]],template:function(t,r){if(1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.YNc(3,bH,14,3,"div",3),d.ALo(4,"async"),d.YNc(5,CH,8,3,"ng-template",null,4,d.W1O),d.qZA(),d.qZA(),d.qZA()),2&t){const i=d.MAs(6);d.xp6(3),d.Q6J("ngIf",!d.lcZ(4,2,r.loginSucess$))("ngIfElse",i)}},directives:[Ui,ED,dD,By,eb,OR,wD,EH],pipes:[ac],styles:[""]}),n})();var TH=F(3532);function xH(n,e){if(1&n&&d._UZ(0,"img",6),2&n){const t=d.oxw().$implicit;d.Q6J("src",t.src,d.LSH)}}function RH(n,e){if(1&n&&(d.TgZ(0,"div",7),d._UZ(1,"img",8),d.qZA()),2&n){const t=d.oxw().$implicit;d.xp6(1),d.Q6J("src",t.src,d.LSH)}}function MH(n,e){if(1&n&&(d.ynx(0),d.TgZ(1,"div",3),d.YNc(2,xH,1,1,"img",4),d.qZA(),d.YNc(3,RH,2,1,"ng-template",null,5,d.W1O),d.BQk()),2&n){const t=e.index,r=d.MAs(4);d.xp6(2),d.Q6J("ngIf",0==t)("ngIfElse",r)}}let NH=(()=>{class n{constructor(){}ngOnInit(){this.observableCarousel$=function SH(n=0,e=Op.z){return n<0&&(n=0),function AH(n=0,e,t=Op.P){let r=-1;return null!=e&&((0,TH.K)(e)?t=e:r=e),new fr.y(i=>{let a=function DH(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let l=0;return t.schedule(function(){i.closed||(i.next(l++),0<=r?this.schedule(void 0,r):i.complete())},a)})}(n,n,e)}(3e3),this.observableCarousel$.subscribe(t=>{this.slides.push(this.slides.shift())})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-carousel"]],inputs:{slides:"slides"},decls:3,vars:1,consts:[[1,"flex","flex-1","items-center","justify-center","py-8","px-4"],[1,"relative","h-40","w-96","overflow-hidden","border-1"],[4,"ngFor","ngForOf"],[1,"duration-1000","ease-in-out"],["class","absolute w-full h-full top-0 left-0 object-scale-down border-1 hover:scale-105",3,"src",4,"ngIf","ngIfElse"],["hidden",""],[1,"absolute","w-full","h-full","top-0","left-0","object-scale-down","border-1","hover:scale-105",3,"src"],[1,"duration-700","ease-in-out"],[1,"absolute","hidden","w-full","h-full","top-0","left-0","object-scale-down","border-1","hover:scale-105",3,"src"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.YNc(2,MH,5,2,"ng-container",2),d.qZA(),d.qZA()),2&t&&(d.xp6(2),d.Q6J("ngForOf",r.slides))},directives:[Qs,Ui],styles:[""]}),n})();function PH(n,e){if(1&n&&(d.O4$(),d.kcU(),d.TgZ(0,"h2",34),d._uU(1," Dernier article "),d.TgZ(2,"h3",35),d.TgZ(3,"a",36),d.TgZ(4,"span",37),d._uU(5),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&n){const t=d.oxw();d.xp6(3),d.MGl("routerLink","/description/",t.lastArticle.id,""),d.xp6(2),d.Oqu(t.lastArticle.title)}}function kH(n,e){1&n&&(d.O4$(),d._uU(0," No articles "))}let mO=(()=>{class n{constructor(t){this.articleService=t,this.lastArticle=new yh,this.slides=[{src:"/assets/images/greenMag.jpeg"},{src:"/assets/images/guyaMag.png"},{src:"/assets/images/greenMag.jpeg"},{src:"/assets/images/guyaMag.png"}]}ngOnInit(){this.articleService.getLastArticle().subscribe(t=>{this.lastArticle=t})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(XE))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-main-page"]],decls:46,vars:3,consts:[[1,"container","max-w-full","max-h-full","bg-primary-300"],[1,"bg-secondary-600","text-white","flex","justify-center","items-center","py-0.5"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","#fafafa","viewBox","0 0 256 256"],["x","32","y","48","width","192","height","160","rx","8","opacity","0.2"],["x","32","y","48","width","192","height","160","rx","8","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","76","y1","96","x2","180","y2","96","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","76","y1","128","x2","180","y2","128","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","76","y1","160","x2","180","y2","160","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["class","flex ml-2 text-secondary-50",4,"ngIf","ngIfElse"],["nothingToShow",""],[1,"bg-primary-50","min-h-screen"],[1,"max-w-3xl","p-12"],[1,"text-3xl","font-title","font-bold","text-primary-700","leading-snug"],["routerLink","/sachem"],[1,"typewriter","mt-4"],[1,"text-2xl","font-sans","font-semibold","text-primary-400","leading-snug"],[1,"flex","flex-col","justify-center","items-center","mt-4"],[1,"text-2xl","font-sans","font-semibold","text-primary-300","leading-snug","mt-4"],[1,"max-w-2xl","flex","items-center","justify-center","mt-4"],[1,"text-2xl","font-sans","font-thin","text-primary-800","leading-snug","decoration-clone","p-1"],[1,"container"],[3,"slides"],[1,"mt-8","flex","justify-center","items-center","px-2","py-4"],[1,"relative","group"],[1,"animate-tilt","group-hover:duration-200","duration-1000","group-hover:opacity-100","transition","absolute","inset-0.5","bg-gradient-to-r","from-secondary-300","to-secondary-900","rounded-lg","blur","opacity-85"],["routerLink","/contact",1,"relative","py-4","px-6","bg-secondary-600","hover:bg-secondary-600","rounded-lg","leading-none","flex","items-center","text","divide-x","divide-secondary-50"],[1,"text-secondary-50","pr-6","font-sans","transition","duration-200"],[1,"flex","items-center","space-x-5","pl-6","animate-tilt"],["width","256","height","256","fill","none"],["d","M192,120,136,64l26.3-26.3a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4Z","opacity","0.2"],["d","M96,216H48a8,8,0,0,1-8-8V163.3a7.9,7.9,0,0,1,2.3-5.6l120-120a8,8,0,0,1,11.4,0l44.6,44.6a8,8,0,0,1,0,11.4Z","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","136","y1","64","x2","192","y2","120","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["points","216 216 96 216 40.5 160.5","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],["x1","164","y1","92","x2","68","y2","188","fill","none","stroke","#fafafa","stroke-linecap","round","stroke-linejoin","round","stroke-width","16"],[1,"flex","ml-2","text-secondary-50"],[1,"ml-2"],[3,"routerLink"],[1,"font-thin","text-secondary-100"]],template:function(t,r){if(1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.O4$(),d.TgZ(2,"svg",2),d._UZ(3,"rect",3),d._UZ(4,"rect",4),d._UZ(5,"line",5),d._UZ(6,"line",6),d._UZ(7,"line",7),d.qZA(),d.YNc(8,PH,6,2,"h2",8),d.YNc(9,kH,1,0,"ng-template",null,9,d.W1O),d.qZA(),d.kcU(),d.TgZ(11,"div",10),d.TgZ(12,"div",11),d.TgZ(13,"h1",12),d.TgZ(14,"a",13),d._uU(15,"SaCh'M"),d.qZA(),d._UZ(16,"br"),d.qZA(),d.TgZ(17,"div",14),d.TgZ(18,"h1",15),d._uU(19," Agence de redaction \xe0 votre service "),d._UZ(20,"br"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(21,"div",16),d.TgZ(22,"h1",17),d._uU(23," 10 ans d'exp\xe9rience, plus de 500 articles publi\xe9es,"),d._UZ(24,"br"),d.qZA(),d.TgZ(25,"h1",17),d._uU(26," A travers la France metropolitaine et les Outre-Mer, "),d.qZA(),d.TgZ(27,"div",18),d.TgZ(28,"h1",19),d._uU(29," Ils nous ont fait confiance: "),d.qZA(),d.qZA(),d.TgZ(30,"div",20),d._UZ(31,"app-carousel",21),d.qZA(),d.TgZ(32,"div",22),d.TgZ(33,"div",23),d._UZ(34,"div",24),d.TgZ(35,"button",25),d.TgZ(36,"span",26),d._uU(37,"Contactez nous"),d.qZA(),d.TgZ(38,"span",27),d.O4$(),d.TgZ(39,"svg",2),d._UZ(40,"rect",28),d._UZ(41,"path",29),d._UZ(42,"path",30),d._UZ(43,"line",31),d._UZ(44,"polyline",32),d._UZ(45,"line",33),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t){const i=d.MAs(10);d.xp6(8),d.Q6J("ngIf",r.lastArticle)("ngIfElse",i),d.xp6(23),d.Q6J("slides",r.slides)}},directives:[Ui,f,NH,y],styles:[".typewriter[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{overflow:hidden;border-right:.15em solid orange;white-space:nowrap;margin:0 auto;letter-spacing:.3em;animation:typing 3.5s steps(40,end),blink-caret .75s step-end infinite}@keyframes typing{0%{width:0}to{width:100%}}@keyframes blink-caret{0%,to{border-color:transparent}50%{border-color:orange}}"]}),n})();const OH=[{path:"main",component:mO},{path:"login",component:IH},{path:"sachem",component:bv},{path:"articles",component:vH},{path:"contact",component:wH},{path:"**",component:mO}];let FH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[bl.forRoot(OH)],bl]}),n})();function LH(n,e){1&n&&(d.TgZ(0,"a",9),d._uU(1,"Login"),d.qZA())}function VH(n,e){if(1&n&&(d.TgZ(0,"a",9),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Oqu(t.logInName)}}let UH=(()=>{class n{constructor(t){this.auth=t,this.loggedIn=!1,this.logInName="",this.auth.isLogIn$.subscribe(r=>{this.loggedIn=r,r&&this.auth.user$.subscribe(i=>{this.logInName=i.email.search("@")>0?i.email.substring(0,i.email.search("@")):i.email})})}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(CE))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-nav-bar"]],decls:19,vars:2,consts:[[1,"bg-primary-400","px-8","py-2"],[1,"flex","items-center","justify-between","mt-0","text-sm","font-medium"],[1,"flex","justify-center","items-center"],["routerLink","/main",1,"block","py-2","pr-4","pl-3","font-sans","border-transparent","text-primary-50","hover:text-primary-100","border-b-2","hover:border-primary-100","bg-transparent"],["routerLink","/sachem",1,"block","py-2","pr-4","pl-3","font-sans","border-transparent","text-primary-50","hover:text-primary-100","border-b-2","hover:border-primary-100","bg-transparent"],["routerLink","/articles",1,"block","py-2","pr-4","pl-3","font-sans","border-transparent","text-primary-50","hover:text-primary-100","border-b-2","hover:border-primary-100","bg-transparent"],["routerLink","/contact",1,"block","py-2","pr-4","pl-3","font-sans","border-transparent","text-primary-50","hover:text-primary-100","border-b-2","hover:border-primary-100","bg-transparent"],["routerLink","/login","class","block py-2 pr-4 pl-3 font-sans text-slate-50 border-b-2 border-transparent hover:border-slate-100 hover:text-slate-100 bg-transparent",4,"ngIf","ngIfElse"],["isLoggedIn",""],["routerLink","/login",1,"block","py-2","pr-4","pl-3","font-sans","text-slate-50","border-b-2","border-transparent","hover:border-slate-100","hover:text-slate-100","bg-transparent"]],template:function(t,r){if(1&t&&(d.TgZ(0,"nav",0),d.TgZ(1,"ul",1),d.TgZ(2,"div",2),d.TgZ(3,"li"),d.TgZ(4,"a",3),d._uU(5,"Accueil"),d.qZA(),d.qZA(),d.TgZ(6,"li"),d.TgZ(7,"a",4),d._uU(8,"SaCh'm"),d.qZA(),d.qZA(),d.TgZ(9,"li"),d.TgZ(10,"a",5),d._uU(11,"Articles"),d.qZA(),d.qZA(),d.TgZ(12,"li"),d.TgZ(13,"a",6),d._uU(14,"Contact"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(15,"li"),d.YNc(16,LH,2,0,"a",7),d.YNc(17,VH,2,1,"ng-template",null,8,d.W1O),d.qZA(),d.qZA(),d.qZA()),2&t){const i=d.MAs(18);d.xp6(16),d.Q6J("ngIf",!r.loggedIn)("ngIfElse",i)}},directives:[f,Ui],styles:[""]}),n})(),BH=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-footer"]],decls:6,vars:0,consts:[[1,"bg-primary-400","shadow","flex","md:items-center","justify-between","p-4"],[1,"text-sm","text-primary-50","text-center"],["routerLink","/main",1,"hover:underline"]],template:function(t,r){1&t&&(d.TgZ(0,"footer",0),d.TgZ(1,"span",1),d._uU(2,"\xa9 2022 "),d.TgZ(3,"a",2),d._uU(4,"Sandrine CHOPOT"),d.qZA(),d._uU(5,". All Rights Reserved. "),d.qZA(),d.qZA())},directives:[f],styles:[""]}),n})(),jH=(()=>{class n{constructor(t){this.auth=t,this.title="app-music"}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(CE))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(t,r){1&t&&(d._UZ(0,"app-nav-bar"),d._UZ(1,"router-outlet"),d._UZ(2,"app-footer"))},directives:[UH,oh,BH],styles:[""]}),n})();class _O{}class yO{}class xd{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(l):this.headers.set(a,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof xd?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new xd;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof xd?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let l=this.headers.get(t);if(!l)return;l=l.filter(p=>-1===a.indexOf(p)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class HH{encodeKey(e){return vO(e)}encodeValue(e){return vO(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const GH=/%(\d[a-f0-9])/gi,qH={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function vO(n){return encodeURIComponent(n).replace(GH,(e,t)=>{var r;return null!==(r=qH[t])&&void 0!==r?r:e})}function wO(n){return`${n}`}class Uf{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new HH,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function $H(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[l,p]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],_=t.get(l)||[];_.push(p),t.set(l,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Uf({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(wO(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(wO(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class WH{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function EO(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function bO(n){return"undefined"!=typeof Blob&&n instanceof Blob}function CO(n){return"undefined"!=typeof FormData&&n instanceof FormData}class ob{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function zH(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new xd),this.context||(this.context=new WH),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+l}}else this.params=new Uf,this.urlWithParams=t}serializeBody(){return null===this.body?null:EO(this.body)||bO(this.body)||CO(this.body)||function ZH(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Uf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||CO(this.body)?null:bO(this.body)?this.body.type||null:EO(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Uf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,a=e.responseType||this.responseType,l=void 0!==e.body?e.body:this.body,p=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,_=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let E=e.headers||this.headers,D=e.params||this.params;const S=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(E=Object.keys(e.setHeaders).reduce((P,V)=>P.set(V,e.setHeaders[V]),E)),e.setParams&&(D=Object.keys(e.setParams).reduce((P,V)=>P.set(V,e.setParams[V]),D)),new ob(r,i,l,{params:D,headers:E,context:S,reportProgress:_,responseType:a,withCredentials:p})}}var oi=(()=>((oi=oi||{})[oi.Sent=0]="Sent",oi[oi.UploadProgress=1]="UploadProgress",oi[oi.ResponseHeader=2]="ResponseHeader",oi[oi.DownloadProgress=3]="DownloadProgress",oi[oi.Response=4]="Response",oi[oi.User=5]="User",oi))();class QR{constructor(e,t=200,r="OK"){this.headers=e.headers||new xd,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class JR extends QR{constructor(e={}){super(e),this.type=oi.ResponseHeader}clone(e={}){return new JR({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ID extends QR{constructor(e={}){super(e),this.type=oi.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new ID({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class IO extends QR{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function XR(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let KH=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof ob)a=t;else{let _,E;_=i.headers instanceof xd?i.headers:new xd(i.headers),i.params&&(E=i.params instanceof Uf?i.params:new Uf({fromObject:i.params})),a=new ob(t,r,void 0!==i.body?i.body:null,{headers:_,context:i.context,params:E,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=ft(a).pipe(ls(_=>this.handler.handle(_)));if(t instanceof ob||"events"===i.observe)return l;const p=l.pipe(Ai(_=>_ instanceof ID));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return p.pipe((0,lt.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return p.pipe((0,lt.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return p.pipe((0,lt.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return p.pipe((0,lt.U)(_=>_.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Uf).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,XR(i,r))}post(t,r,i={}){return this.request("POST",t,XR(i,r))}put(t,r,i={}){return this.request("PUT",t,XR(i,r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_O))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class TO{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const DO=new d.OlP("HTTP_INTERCEPTORS");let YH=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const QH=/^\)\]\}',?\n/;let AO=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new fr.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((V,H)=>i.setRequestHeader(V,H.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const V=t.detectContentTypeHeader();null!==V&&i.setRequestHeader("Content-Type",V)}if(t.responseType){const V=t.responseType.toLowerCase();i.responseType="json"!==V?V:"text"}const a=t.serializeBody();let l=null;const p=()=>{if(null!==l)return l;const V=1223===i.status?204:i.status,H=i.statusText||"OK",le=new xd(i.getAllResponseHeaders()),Ee=function JH(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new JR({headers:le,status:V,statusText:H,url:Ee}),l},_=()=>{let{headers:V,status:H,statusText:le,url:Ee}=p(),Ye=null;204!==H&&(Ye=void 0===i.response?i.responseText:i.response),0===H&&(H=Ye?200:0);let qe=H>=200&&H<300;if("json"===t.responseType&&"string"==typeof Ye){const ct=Ye;Ye=Ye.replace(QH,"");try{Ye=""!==Ye?JSON.parse(Ye):null}catch(Ze){Ye=ct,qe&&(qe=!1,Ye={error:Ze,text:Ye})}}qe?(r.next(new ID({body:Ye,headers:V,status:H,statusText:le,url:Ee||void 0})),r.complete()):r.error(new IO({error:Ye,headers:V,status:H,statusText:le,url:Ee||void 0}))},E=V=>{const{url:H}=p(),le=new IO({error:V,status:i.status||0,statusText:i.statusText||"Unknown Error",url:H||void 0});r.error(le)};let D=!1;const S=V=>{D||(r.next(p()),D=!0);let H={type:oi.DownloadProgress,loaded:V.loaded};V.lengthComputable&&(H.total=V.total),"text"===t.responseType&&!!i.responseText&&(H.partialText=i.responseText),r.next(H)},P=V=>{let H={type:oi.UploadProgress,loaded:V.loaded};V.lengthComputable&&(H.total=V.total),r.next(H)};return i.addEventListener("load",_),i.addEventListener("error",E),i.addEventListener("timeout",E),i.addEventListener("abort",E),t.reportProgress&&(i.addEventListener("progress",S),null!==a&&i.upload&&i.upload.addEventListener("progress",P)),i.send(a),r.next({type:oi.Sent}),()=>{i.removeEventListener("error",E),i.removeEventListener("abort",E),i.removeEventListener("load",_),i.removeEventListener("timeout",E),t.reportProgress&&(i.removeEventListener("progress",S),null!==a&&i.upload&&i.upload.removeEventListener("progress",P)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ao))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const eM=new d.OlP("XSRF_COOKIE_NAME"),tM=new d.OlP("XSRF_HEADER_NAME");class SO{}let XH=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Dt(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe),d.LFG(d.Lbi),d.LFG(eM))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),nM=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(SO),d.LFG(tM))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),e$=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(DO,[]);this.chain=r.reduceRight((i,a)=>new TO(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(yO),d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),t$=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:nM,useClass:YH}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:eM,useValue:t.cookieName}:[],t.headerName?{provide:tM,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[nM,{provide:DO,useExisting:nM,multi:!0},{provide:SO,useClass:XH},{provide:eM,useValue:"XSRF-TOKEN"},{provide:tM,useValue:"X-XSRF-TOKEN"}]}),n})(),n$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[KH,{provide:_O,useClass:e$},AO,{provide:yO,useExisting:AO}],imports:[[t$.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const xO="firebasestorage.googleapis.com",RO="storageBucket";class Lr extends k.ZR{constructor(e,t){super(rM(e),`Firebase Storage: ${t} (${rM(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Lr.prototype)}_codeEquals(e){return rM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function rM(n){return"storage/"+n}function iM(){return new Lr("unknown","An unknown error occurred, please check the error payload for server response.")}function MO(){return new Lr("canceled","User canceled the upload/download.")}function NO(){return new Lr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function jy(n){return new Lr("invalid-argument",n)}function PO(){return new Lr("app-deleted","The Firebase app was deleted.")}function kO(n){return new Lr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ab(n,e){return new Lr("invalid-format","String does not match format '"+n+"': "+e)}function ub(n){throw new Lr("internal-error","Internal error: "+n)}class vs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=vs.makeFromUrl(e,t)}catch(i){return new vs(e,"")}if(""===r.path)return r;throw function f$(n){return new Lr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",p=new RegExp("^gs://"+i+"(/(.*))?$","i");function E(Ze){Ze.path_=decodeURIComponent(Ze.path)}const S=t.replace(/[.]/g,"\\."),ct=[{regex:p,indices:{bucket:1,path:3},postModify:function a(Ze){"/"===Ze.path.charAt(Ze.path.length-1)&&(Ze.path_=Ze.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:E},{regex:new RegExp(`^https?://${t===xO?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:E}];for(let Ze=0;Ze<ct.length;Ze++){const Pt=ct[Ze],Vt=Pt.regex.exec(e);if(Vt){let wi=Vt[Pt.indices.path];wi||(wi=""),r=new vs(Vt[Pt.indices.bucket],wi),Pt.postModify(r);break}}if(null==r)throw function h$(n){return new Lr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class _${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function TD(n){return"string"==typeof n||n instanceof String}function OO(n){return sM()&&n instanceof Blob}function sM(){return"undefined"!=typeof Blob}function oM(n,e,t,r){if(r<e)throw jy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw jy(`Invalid value for '${n}'. Expected ${t} or less.`)}function Rd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function FO(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Bf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Bf||(Bf={})),Bf))();class C${constructor(e,t,r,i,a,l,p,_,E,D,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=p,this.errorCallback_=_,this.timeout_=E,this.progressCallback_=D,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,V)=>{this.resolve_=P,this.reject_=V,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,p=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(p,p.getResponse());!function w$(n){return void 0!==n}(_)?a():a(_)}catch(_){l(_)}else if(null!==p){const _=iM();_.serverResponse=p.getErrorText(),l(this.errorCallback_?this.errorCallback_(p,_):_)}else l(i.canceled?this.appDelete_?PO():MO():function d$(){return new Lr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new DD(!1,null,!0)):this.backoffId_=function y$(n,e,t){let r=1,i=null,a=null,l=!1,p=0;function _(){return 2===p}let E=!1;function D(...Ee){E||(E=!0,e.apply(null,Ee))}function S(Ee){i=setTimeout(()=>{i=null,n(V,_())},Ee)}function P(){a&&clearTimeout(a)}function V(Ee,...Ye){if(E)return void P();if(Ee)return P(),void D.call(null,Ee,...Ye);if(_()||l)return P(),void D.call(null,Ee,...Ye);let ct;r<64&&(r*=2),1===p?(p=2,ct=0):ct=1e3*(r+Math.random()),S(ct)}let H=!1;function le(Ee){H||(H=!0,P(),!E&&(null!==i?(Ee||(p=2),clearTimeout(i),S(0)):Ee||(p=1)))}return S(0),a=setTimeout(()=>{l=!0,le(!0)},t),le}((r,i)=>{if(i)return void r(!1,new DD(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=p=>{null!==this.progressCallback_&&this.progressCallback_(p.loaded,p.lengthComputable?p.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const p=a.getErrorCode()===Bf.NO_ERROR,_=a.getStatus();if(!p||this.isRetryStatusCode_(_)){const D=a.getErrorCode()===Bf.ABORT;return void r(!1,new DD(!1,null,D))}const E=-1!==this.successCodes_.indexOf(_);r(!0,new DD(E,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function v$(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class DD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function R$(...n){const e=function x$(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(sM())return new Blob(n);throw new Lr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Jo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class aM{constructor(e,t){this.data=e,this.contentType=t||null}}function uM(n,e){switch(n){case Jo.RAW:return new aM(LO(e));case Jo.BASE64:case Jo.BASE64URL:return new aM(VO(n,e));case Jo.DATA_URL:return new aM(function k$(n){const e=new UO(n);return e.base64?VO(Jo.BASE64,e.rest):function P$(n){let e;try{e=decodeURIComponent(n)}catch(t){throw ab(Jo.DATA_URL,"Malformed data URL.")}return LO(e)}(e.rest)}(e),function O$(n){return new UO(n).contentType}(e))}throw iM()}function LO(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function VO(n,e){switch(n){case Jo.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw ab(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Jo.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw ab(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function N$(n){return atob(n)}(e)}catch(i){throw ab(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class UO{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw ab(Jo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function F$(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class rc{constructor(e,t){let r=0,i="";OO(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(OO(this.data_)){const i=function M$(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new rc(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new rc(r,!0)}}static getBlob(...e){if(sM()){const t=e.map(r=>r instanceof rc?r.data_:r);return new rc(R$.apply(null,t))}{const t=e.map(l=>TD(l)?uM(Jo.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let p=0;p<l.length;p++)i[a++]=l[p]}),new rc(i,!0)}}uploadData(){return this.data_}}function lM(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function b$(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function BO(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function U$(n,e){return e}class zs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||U$}}let AD=null;function lb(){if(AD)return AD;const n=[];n.push(new zs("bucket")),n.push(new zs("generation")),n.push(new zs("metageneration")),n.push(new zs("name","fullPath",!0));const t=new zs("name");t.xform=function e(a,l){return function B$(n){return!TD(n)||n.length<2?n:BO(n)}(l)},n.push(t);const i=new zs("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new zs("timeCreated")),n.push(new zs("updated")),n.push(new zs("md5Hash",null,!0)),n.push(new zs("cacheControl",null,!0)),n.push(new zs("contentDisposition",null,!0)),n.push(new zs("contentEncoding",null,!0)),n.push(new zs("contentLanguage",null,!0)),n.push(new zs("contentType",null,!0)),n.push(new zs("metadata","customMetadata",!0)),AD=n,AD}function jO(n,e,t){const r=lM(e);return null===r?null:function H$(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function j$(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new vs(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function cM(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const HO="prefixes";class ic{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function sc(n){if(!n)throw iM()}function SD(n,e){return function t(r,i){const a=jO(n,i,e);return sc(null!==a),a}}function Hy(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function l$(){return new Lr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function u$(){return new Lr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function a$(n){return new Lr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function c$(n){return new Lr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function cb(n){const e=Hy(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function o$(n){return new Lr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function GO(n,e,t){const i=Rd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,p=new ic(i,"GET",SD(n,t),l);return p.errorHandler=cb(e),p}function Z$(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const p=Rd(e.bucketOnlyServerUrl(),n.host,n._protocol),E=n.maxOperationRetryTime,D=new ic(p,"GET",function W$(n,e){return function t(r,i){const a=function q$(n,e,t){const r=lM(t);return null===r?null:function G$(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[HO])for(const i of t[HO]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new vs(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new vs(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return sc(null!==a),a}}(n,e.bucket),E);return D.urlParams=a,D.errorHandler=Hy(e),D}function WO(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function J$(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class xD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function dM(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){sc(!1)}return sc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const nG={STATE_CHANGED:"state_changed"},Zs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function hM(n){switch(n){case"running":case"pausing":case"canceling":return Zs.RUNNING;case"paused":return Zs.PAUSED;case"success":return Zs.SUCCESS;case"canceled":return Zs.CANCELED;default:return Zs.ERROR}}class rG{constructor(e,t,r){if(function E$(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function $y(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class sG extends class iG{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Bf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Bf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Bf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw ub("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ub("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ub("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw ub("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ub("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Bu(){return new sG}class YO{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=lb(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function X$(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=WO(e,r,i),p={name:l.fullPath},_=Rd(a,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=cM(l,t),H=new ic(_,"POST",function V(le){let Ee;dM(le);try{Ee=le.getResponseHeader("X-Goog-Upload-URL")}catch(Ye){sc(!1)}return sc(TD(Ee)),Ee},n.maxUploadRetryTime);return H.urlParams=p,H.headers=D,H.body=S,H.errorHandler=Hy(e),H}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Bu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function eG(n,e,t,r){const _=new ic(t,"POST",function a(E){const D=dM(E,["active","final"]);let S=null;try{S=E.getResponseHeader("X-Goog-Upload-Size-Received")}catch(V){sc(!1)}S||sc(!1);const P=Number(S);return sc(!isNaN(P)),new xD(P,r.size(),"final"===D)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=Hy(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Bu,t,r);this._request=a,a.getPromise().then(l=>{l=l,this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new xD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function tG(n,e,t,r,i,a,l,p){const _=new xD(0,0);if(l?(_.current=l.current,_.total=l.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function g$(){return new Lr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const E=_.total-_.current;let D=E;i>0&&(D=Math.min(D,i));const S=_.current,H={"X-Goog-Upload-Command":D===E?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},le=r.slice(S,S+D);if(null===le)throw NO();const ct=new ic(t,"POST",function Ee(Ze,Pt){const Vt=dM(Ze,["active","final"]),wo=_.current+D,wi=r.size();let ju;return ju="final"===Vt?SD(e,a)(Ze,Pt):null,new xD(wo,wi,"final"===Vt,ju)},e.maxUploadRetryTime);return ct.headers=H,ct.body=le.uploadData(),ct.progressCallback=p||null,ct.errorHandler=Hy(n),ct}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const p=this._ref.storage._makeRequest(l,Bu,i,a);this._request=p,p.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=GO(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Bu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function zO(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},_=function p(){let ct="";for(let Ze=0;Ze<2;Ze++)ct+=Math.random().toString().slice(2);return ct}();l["Content-Type"]="multipart/related; boundary="+_;const E=WO(e,r,i),D=cM(E,t),V=rc.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+_+"\r\nContent-Type: "+E.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===V)throw NO();const H={name:E.fullPath},le=Rd(a,n.host,n._protocol),Ye=n.maxUploadRetryTime,qe=new ic(le,"POST",SD(n,t),Ye);return qe.urlParams=H,qe.headers=l,qe.body=V.uploadData(),qe.errorHandler=Hy(e),qe}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Bu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=MO(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=hM(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new rG(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(hM(this._state)){case Zs.SUCCESS:$y(this._resolve.bind(null,this.snapshot))();break;case Zs.CANCELED:case Zs.ERROR:$y(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(hM(this._state)){case Zs.RUNNING:case Zs.PAUSED:e.next&&$y(e.next.bind(e,this.snapshot))();break;case Zs.SUCCESS:e.complete&&$y(e.complete.bind(e))();break;default:e.error&&$y(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class fm{constructor(e,t){this._service=e,this._location=t instanceof vs?t:vs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new fm(e,t)}get root(){const e=new vs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return BO(this._location.path)}get storage(){return this._service}get parent(){const e=function L$(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new vs(this._location.bucket,e);return new fm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw kO(e)}}function JO(n,e,t){return fM.apply(this,arguments)}function fM(){return fM=(0,ge.Z)(function*(n,e,t){const i=yield XO(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield JO(n,e,i.nextPageToken))}),fM.apply(this,arguments)}function XO(n,e){null!=e&&"number"==typeof e.maxResults&&oM("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Z$(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Bu)}function _G(n){n._throwIfRoot("getDownloadURL");const e=function K$(n,e,t){const i=Rd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,p=new ic(i,"GET",function z$(n,e){return function t(r,i){const a=jO(n,i,e);return sc(null!==a),function $$(n,e,t,r){const i=lM(e);if(null===i||!TD(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(E=>{const S=n.fullPath;return Rd("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+FO({alt:"media",token:E})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return p.errorHandler=cb(e),p}(n.storage,n._location,lb());return n.storage.makeRequestWithTokens(e,Bu).then(t=>{if(null===t)throw function m$(){return new Lr("no-download-url","The given file does not have any download URLs.")}();return t})}function eF(n,e){const t=function V$(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new vs(n._location.bucket,t);return new fm(n.storage,r)}function tF(n,e){if(n instanceof pM){const t=n;if(null==t._bucket)throw function p$(){return new Lr("no-default-bucket","No default bucket found. Did you set the '"+RO+"' property when initializing the app?")}();const r=new fm(t,t._bucket);return null!=e?tF(r,e):r}return void 0!==e?eF(n,e):n}function EG(n,e){if(e&&function vG(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof pM)return function wG(n,e){return new fm(n,e)}(n,e);throw jy("To use ref(service, url), the first argument must be a Storage instance.")}return tF(n,e)}function nF(n,e){const t=null==e?void 0:e[RO];return null==t?null:vs.makeFromBucketSpec(t,n)}class pM{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=xO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?vs.makeFromBucketSpec(i,this._host):nF(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?vs.makeFromBucketSpec(this._url,e):nF(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){oM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){oM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ge.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ge.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fm(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new _$(PO());{const a=function S$(n,e,t,r,i,a){const l=FO(n.urlParams),p=n.url+l,_=Object.assign({},n.headers);return function D$(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function I$(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function T$(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(_,a),function A$(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new C$(p,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,ge.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const rF="@firebase/storage";function oF(n,e){return EG(n=(0,k.m9)(n),e)}function NG(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new pM(t,r,i,e,Yi.SDK_VERSION)}!function PG(){(0,Yi._registerComponent)(new co.wA("storage",NG,"PUBLIC").setMultipleInstances(!0)),(0,Yi.registerVersion)(rF,"0.9.4",""),(0,Yi.registerVersion)(rF,"0.9.4","esm2017")}();class RD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class aF{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new RD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new RD(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new RD(l,this,this._ref)):{next:t.next?l=>t.next(new RD(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class uF{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Md(e,this._service))}get items(){return this._delegate.items.map(e=>new Md(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Md{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function RG(n,e){return eF(n,e)}(this._delegate,e);return new Md(t,this.storage)}get root(){return new Md(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Md(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new aF(function CG(n,e,t){return function hG(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new YO(n,new rc(e),t)}(n=(0,k.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Jo.RAW,r){this._throwIfRoot("putString");const i=uM(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new aF(new YO(this._delegate,new rc(i.data,!0),a),this)}listAll(){return function AG(n){return function pG(n){const e={prefixes:[],items:[]};return JO(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new uF(e,this.storage))}list(e){return function DG(n,e){return XO(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new uF(t,this.storage))}getMetadata(){return function IG(n){return function gG(n){n._throwIfRoot("getMetadata");const e=GO(n.storage,n._location,lb());return n.storage.makeRequestWithTokens(e,Bu)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function TG(n,e){return function mG(n,e){n._throwIfRoot("updateMetadata");const t=function Y$(n,e,t,r){const a=Rd(e.fullServerUrl(),n.host,n._protocol),p=cM(t,r),E=n.maxOperationRetryTime,D=new ic(a,"PATCH",SD(n,r),E);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=p,D.errorHandler=cb(e),D}(n.storage,n._location,e,lb());return n.storage.makeRequestWithTokens(t,Bu)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function SG(n){return _G(n=(0,k.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function xG(n){return function yG(n){n._throwIfRoot("deleteObject");const e=function Q$(n,e){const r=Rd(e.fullServerUrl(),n.host,n._protocol),p=new ic(r,"DELETE",function l(_,E){},n.maxOperationRetryTime);return p.successCodes=[200,204],p.errorHandler=cb(e),p}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Bu)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw kO(e)}}class lF{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(cF(e))throw jy("ref() expected a child path but got a URL, use refFromURL instead.");return new Md(oF(this._delegate,e),this)}refFromURL(e){if(!cF(e))throw jy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{vs.makeFromUrl(e,this._delegate.host)}catch(t){throw jy("refFromUrl() expected a valid full URL but got an invalid one.")}return new Md(oF(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function MG(n,e,t,r={}){!function bG(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,k.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function cF(n){return/^[A-Za-z]+:\/\//.test(n)}function LG(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new lF(t,r)}function dF(n){const e=function UG(n){return new fr.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function r$(n,e=Op.z){return(0,gr.e)((t,r)=>{let i=null,a=null,l=null;const p=()=>{if(i){i.unsubscribe(),i=null;const E=a;a=null,r.next(E)}};function _(){const E=l+n,D=e.now();if(D<E)return i=this.schedule(void 0,E-D),void r.add(i);p()}t.subscribe(new Pn.Q(r,E=>{a=E,l=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{p(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,lt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function MD(n){return{getDownloadURL:()=>ft(void 0).pipe(hn.fc,Tn(()=>n.getDownloadURL()),hn.iC),getMetadata:()=>ft(void 0).pipe(hn.fc,Tn(()=>n.getMetadata()),hn.iC),delete:()=>(0,cn.D)(n.delete()),child:e=>MD(n.child(e)),updateMetadata:e=>(0,cn.D)(n.updateMetadata(e)),put:(e,t)=>dF(n.put(e,t)),putString:(e,t,r)=>dF(n.putString(e,t,r)),list:e=>(0,cn.D)(n.list(e)),listAll:()=>(0,cn.D)(n.listAll())}}!function VG(n){const e={TaskState:Zs,TaskEvent:nG,StringFormat:Jo,Storage:lF,Reference:Md};n.INTERNAL.registerComponent(new co.wA("storage-compat",LG,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.12")}(wb.Z);const BG=new d.OlP("angularfire2.storageBucket"),jG=new d.OlP("angularfire2.storage.maxUploadRetryTime"),HG=new d.OlP("angularfire2.storage.maxOperationRetryTime"),$G=new d.OlP("angularfire2.storage.use-emulator");let GG=(()=>{class n{constructor(t,r,i,a,l,p,_,E,D,S){const P=(0,_r.on)(t,l,r);this.storage=(0,_r.cc)(`${P.name}.storage.${i}`,"AngularFireStorage",P.name,()=>{const V=l.runOutsideAngular(()=>P.storage(i||void 0)),H=D;return H&&V.useEmulator(...H),_&&V.setMaxUploadRetryTime(_),E&&V.setMaxOperationRetryTime(E),V},[_,E])}ref(t){return MD(this.storage.ref(t))}refFromURL(t){return MD(this.storage.refFromURL(t))}upload(t,r,i){return MD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_r.Dh),d.LFG(_r.xv,8),d.LFG(BG,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(hn.HU),d.LFG(jG,8),d.LFG(HG,8),d.LFG($G,8),d.LFG(EE,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),qG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),WG=(()=>{class n{constructor(){DT.Z.registerVersion("angularfire",hn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[GG],imports:[qG]}),n})();const hF_firebaseConfig={apiKey:"AIzaSyA_qMTzXvNHhR4FQlPuazr5NC9Cmo4gwlw",authDomain:"sachem-fcd12.firebaseapp.com",databaseURL:"https://sachem-fcd12-default-rtdb.europe-west1.firebasedatabase.app",projectId:"sachem-fcd12",storageBucket:"sachem-fcd12.appspot.com",messagingSenderId:"44609888106",appId:"1:44609888106:web:390916816d50e3e5cd0f13",measurementId:"G-QVNQXHPHDS"};let zG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[jH]}),n.\u0275inj=d.cJS({providers:[CE,oa],imports:[[Mo,FH,dH,n$,_r.hO.initializeApp(hF_firebaseConfig),XL,aV,WG,yj]]}),n})();(0,d.G48)(),Ro().bootstrapModule(zG).catch(n=>console.error(n))},5867:(ut,we,F)=>{F.d(we,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=F(9681);(0,d.registerVersion)("firebase","9.6.10","app")},127:(ut,we,F)=>{F.d(we,{Z:()=>d.Z});var d=F(3942);d.Z.registerVersion("firebase","9.6.10","app-compat")},1254:(ut,we,F)=>{F.r(we);var d=F(5861),Y=F(3942),O=F(2090),se=F(9681);function ue(y,f){var g={};for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&f.indexOf(w)<0&&(g[w]=y[w]);if(null!=y&&"function"==typeof Object.getOwnPropertySymbols){var A=0;for(w=Object.getOwnPropertySymbols(y);A<w.length;A++)f.indexOf(w[A])<0&&Object.prototype.propertyIsEnumerable.call(y,w[A])&&(g[w[A]]=y[w[A]])}return g}var Pe=F(1877),de=F(4859);const ns=function yt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},zr=function _n(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},yn=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Bn=new Pe.Yd("@firebase/auth");function sr(y,...f){Bn.logLevel<=Pe.in.ERROR&&Bn.error(`Auth (${se.SDK_VERSION}): ${y}`,...f)}function an(y,...f){throw Ir(y,...f)}function xn(y,...f){return Ir(y,...f)}function Xo(y,f,g){const w=Object.assign(Object.assign({},zr()),{[f]:g});return new O.LL("auth","Firebase",w).create(f,{appName:y.name})}function Li(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&an(y,"argument-error"),Xo(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ir(y,...f){if("string"!=typeof y){const g=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(g,...w)}return yn.create(y,...f)}function Ae(y,f,...g){if(!y)throw Ir(f,...g)}function cr(y){const f="INTERNAL ASSERTION FAILED: "+y;throw sr(f),new Error(f)}function jn(y,f){y||cr(f)}const gt=new Map;function nn(y){jn(y instanceof Function,"Expected a class definition");let f=gt.get(y);return f?(jn(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,gt.set(y,f),f)}function bi(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Vr(){return"http:"===Tr()||"https:"===Tr()}function Tr(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class pn{constructor(f,g){this.shortDelay=f,this.longDelay=g,jn(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Hn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Vr()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function et(y,f){jn(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class vt{static initialize(f,g,w){this.fetchImpl=f,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ks={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Es=new pn(3e4,6e4);function rn(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Et(y,f,g,w){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,d.Z)(function*(y,f,g,w,A={}){return bo(y,A,(0,d.Z)(function*(){let R={},j={};w&&("GET"===f?j=w:R={body:JSON.stringify(w)});const J=(0,O.xO)(Object.assign({key:y.config.apiKey},j)).slice(1),Me=yield y._getAdditionalHeaders();return Me["Content-Type"]="application/json",y.languageCode&&(Me["X-Firebase-Locale"]=y.languageCode),vt.fetch()(Je(y,y.config.apiHost,g,J),Object.assign({method:f,headers:Me,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function bo(y,f,g){return sn.apply(this,arguments)}function sn(){return(sn=(0,d.Z)(function*(y,f,g){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},Ks),f);try{const A=new be(y),R=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const j=yield R.json();if("needConfirmation"in j)throw at(y,"account-exists-with-different-credential",j);if(R.ok&&!("errorMessage"in j))return j;{const J=R.ok?j.errorMessage:j.error.message,[Me,Se]=J.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Me)throw at(y,"credential-already-in-use",j);if("EMAIL_EXISTS"===Me)throw at(y,"email-already-in-use",j);const rt=w[Me]||Me.toLowerCase().replace(/[_\s]+/g,"-");if(Se)throw Xo(y,rt,Se);an(y,rt)}}catch(A){if(A instanceof O.ZR)throw A;an(y,"network-request-failed")}})).apply(this,arguments)}function bt(y,f,g,w){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,d.Z)(function*(y,f,g,w,A={}){const R=yield Et(y,f,g,w,A);return"mfaPendingCredential"in R&&an(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Je(y,f,g,w){const A=`${f}${g}?${w}`;return y.config.emulator?et(y.config,A):`${y.config.apiScheme}://${A}`}class be{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(xn(this.auth,"network-request-failed")),Es.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function at(y,f,g){const w={appName:y.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const A=xn(y,f,w);return A.customData._tokenResponse=g,A}function Bt(){return(Bt=(0,d.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function un(y,f){return G.apply(this,arguments)}function G(){return(G=(0,d.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function B(y,f){return z.apply(this,arguments)}function z(){return(z=(0,d.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function he(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function _t(){return(_t=(0,d.Z)(function*(y,f=!1){const g=(0,O.m9)(y),w=yield g.getIdToken(f),A=dr(w);Ae(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const R="object"==typeof A.firebase?A.firebase:void 0,j=null==R?void 0:R.sign_in_provider;return{claims:A,token:w,authTime:he(Jt(A.auth_time)),issuedAtTime:he(Jt(A.iat)),expirationTime:he(Jt(A.exp)),signInProvider:j||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function Jt(y){return 1e3*Number(y)}function dr(y){const[f,g,w]=y.split(".");if(void 0===f||void 0===g||void 0===w)return sr("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,O.tV)(g);return A?JSON.parse(A):(sr("Failed to decode base64 JWT payload"),null)}catch(A){return sr("Caught error parsing JWT payload as JSON",A),null}}function zt(y,f){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,d.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(w){throw w instanceof O.ZR&&$n(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function $n({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Gn{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,d.Z)(function*(){yield g.iteration()}),w)}iteration(){var f=this;return(0,d.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class bs{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=he(this.lastLoginAt),this.creationTime=he(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ea(y){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,d.Z)(function*(y){var f;const g=y.auth,w=yield y.getIdToken(),A=yield zt(y,B(g,{idToken:w}));Ae(null==A?void 0:A.users.length,g,"internal-error");const R=A.users[0];y._notifyReloadListener(R);const j=(null===(f=R.providerUserInfo)||void 0===f?void 0:f.length)?jf(R.providerUserInfo):[],J=tr(y.providerData,j),rt=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==J?void 0:J.length)),Xe={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:J,metadata:new bs(R.createdAt,R.lastLoginAt),isAnonymous:rt};Object.assign(y,Xe)})).apply(this,arguments)}function Vi(){return(Vi=(0,d.Z)(function*(y){const f=(0,O.m9)(y);yield ea(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function tr(y,f){return[...y.filter(w=>!f.some(A=>A.providerId===w.providerId)),...f]}function jf(y){return y.map(f=>{var{providerId:g}=f,w=ue(f,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function He(){return(He=(0,d.Z)(function*(y,f){const g=yield bo(y,{},(0,d.Z)(function*(){const w=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:R}=y.config,j=Je(y,A,"/v1/token",`key=${R}`),J=yield y._getAdditionalHeaders();return J["Content-Type"]="application/x-www-form-urlencoded",vt.fetch()(j,{method:"POST",headers:J,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Tt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Ae(f.idToken,"internal-error"),Ae(void 0!==f.idToken,"internal-error"),Ae(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function er(y){const f=dr(y);return Ae(f,"internal-error"),Ae(void 0!==f.exp,"internal-error"),Ae(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var w=this;return(0,d.Z)(function*(){return Ae(!w.accessToken||w.refreshToken,f,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var w=this;return(0,d.Z)(function*(){const{accessToken:A,refreshToken:R,expiresIn:j}=yield function Ci(y,f){return He.apply(this,arguments)}(f,g);w.updateTokensAndExpiration(A,R,Number(j))})()}updateTokensAndExpiration(f,g,w){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,g){const{refreshToken:w,accessToken:A,expirationTime:R}=g,j=new Tt;return w&&(Ae("string"==typeof w,"internal-error",{appName:f}),j.refreshToken=w),A&&(Ae("string"==typeof A,"internal-error",{appName:f}),j.accessToken=A),R&&(Ae("number"==typeof R,"internal-error",{appName:f}),j.expirationTime=R),j}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Tt,this.toJSON())}_performRefresh(){return cr("not implemented")}}function Zt(y,f){Ae("string"==typeof y||void 0===y,"internal-error",{appName:f})}class qn{constructor(f){var{uid:g,auth:w,stsTokenManager:A}=f,R=ue(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new bs(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,d.Z)(function*(){const w=yield zt(g,g.stsTokenManager.getToken(g.auth,f));return Ae(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(f){return function Ue(y){return _t.apply(this,arguments)}(this,f)}reload(){return function Ua(y){return Vi.apply(this,arguments)}(this)}_assign(f){this!==f&&(Ae(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new qn(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var w=this;return(0,d.Z)(function*(){let A=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),A=!0),g&&(yield ea(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,d.Z)(function*(){const g=yield f.getIdToken();return yield zt(f,function dt(y,f){return Bt.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var w,A,R,j,J,Me,Se,rt;const Xe=null!==(w=g.displayName)&&void 0!==w?w:void 0,Gt=null!==(A=g.email)&&void 0!==A?A:void 0,On=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,Ho=null!==(j=g.photoURL)&&void 0!==j?j:void 0,bl=null!==(J=g.tenantId)&&void 0!==J?J:void 0,Mp=null!==(Me=g._redirectEventId)&&void 0!==Me?Me:void 0,Bc=null!==(Se=g.createdAt)&&void 0!==Se?Se:void 0,Bm=null!==(rt=g.lastLoginAt)&&void 0!==rt?rt:void 0,{uid:jc,emailVerified:Np,isAnonymous:Pp,providerData:Hc,stsTokenManager:$c}=g;Ae(jc&&$c,f,"internal-error");const _h=Tt.fromJSON(this.name,$c);Ae("string"==typeof jc,f,"internal-error"),Zt(Xe,f.name),Zt(Gt,f.name),Ae("boolean"==typeof Np,f,"internal-error"),Ae("boolean"==typeof Pp,f,"internal-error"),Zt(On,f.name),Zt(Ho,f.name),Zt(bl,f.name),Zt(Mp,f.name),Zt(Bc,f.name),Zt(Bm,f.name);const Cl=new qn({uid:jc,auth:f,email:Gt,emailVerified:Np,displayName:Xe,isAnonymous:Pp,photoURL:Ho,phoneNumber:On,tenantId:bl,stsTokenManager:_h,createdAt:Bc,lastLoginAt:Bm});return Hc&&Array.isArray(Hc)&&(Cl.providerData=Hc.map(kp=>Object.assign({},kp))),Mp&&(Cl._redirectEventId=Mp),Cl}static _fromIdTokenResponse(f,g,w=!1){return(0,d.Z)(function*(){const A=new Tt;A.updateFromServerResponse(g);const R=new qn({uid:g.localId,auth:f,stsTokenManager:A,isAnonymous:w});return yield ea(R),R})()}}const vn=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(g,w){var A=this;return(0,d.Z)(function*(){A.storage[g]=w})()}_get(g){var w=this;return(0,d.Z)(function*(){const A=w.storage[g];return void 0===A?null:A})()}_remove(g){var w=this;return(0,d.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return y.type="NONE",y})();function Ar(y,f,g){return`firebase:${y}:${f}:${g}`}class Ft{constructor(f,g,w){this.persistence=f,this.auth=g,this.userKey=w;const{config:A,name:R}=this.auth;this.fullUserKey=Ar(this.userKey,A.apiKey,R),this.fullPersistenceKey=Ar("persistence",A.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,d.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?qn._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,d.Z)(function*(){if(g.persistence===f)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,w="authUser"){return(0,d.Z)(function*(){if(!g.length)return new Ft(nn(vn),f,w);const A=(yield Promise.all(g.map(function(){var Se=(0,d.Z)(function*(rt){if(yield rt._isAvailable())return rt});return function(rt){return Se.apply(this,arguments)}}()))).filter(Se=>Se);let R=A[0]||nn(vn);const j=Ar(w,f.config.apiKey,f.name);let J=null;for(const Se of g)try{const rt=yield Se._get(j);if(rt){const Xe=qn._fromJSON(f,rt);Se!==R&&(J=Xe),R=Se;break}}catch(rt){}const Me=A.filter(Se=>Se._shouldAllowMigration);return R._shouldAllowMigration&&Me.length?(R=Me[0],J&&(yield R._set(j,J.toJSON())),yield Promise.all(g.map(function(){var Se=(0,d.Z)(function*(rt){if(rt!==R)try{yield rt._remove(j)}catch(Xe){}});return function(rt){return Se.apply(this,arguments)}}())),new Ft(R,f,w)):new Ft(R,f,w)})()}}function na(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Co(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(ra(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Qs(f))return"Blackberry";if(Sr(f))return"Webos";if(Dt(f))return"Safari";if((f.includes("chrome/")||ia(f))&&!f.includes("edge/"))return"Chrome";if(Cs(f))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function ra(y=(0,O.z$)()){return/firefox\//i.test(y)}function Dt(y=(0,O.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function ia(y=(0,O.z$)()){return/crios\//i.test(y)}function Co(y=(0,O.z$)()){return/iemobile/i.test(y)}function Cs(y=(0,O.z$)()){return/android/i.test(y)}function Qs(y=(0,O.z$)()){return/blackberry/i.test(y)}function Sr(y=(0,O.z$)()){return/webos/i.test(y)}function Ii(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function oc(y=(0,O.z$)()){return Ii(y)||Cs(y)||Sr(y)||Qs(y)||/windows phone/i.test(y)||Co(y)}function rs(y,f=[]){let g;switch(y){case"Browser":g=na((0,O.z$)());break;case"Worker":g=`${na((0,O.z$)())}-${y}`;break;default:g=y}const w=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${se.SDK_VERSION}/${w}`}class is{constructor(f,g,w){this.app=f,this.heartbeatServiceProvider=g,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ba(this),this.idTokenSubscription=new Ba(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,g){var w=this;return g&&(this._popupRedirectResolver=nn(g)),this._initializationPromise=this.queue((0,d.Z)(function*(){var A,R;if(!w._deleted&&(w.persistenceManager=yield Ft.create(w,f),!w._deleted)){if(null===(A=w._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(j){}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(R=w.currentUser)||void 0===R?void 0:R.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,d.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g)}})()}initializeCurrentUser(f){var g=this;return(0,d.Z)(function*(){var w;let A=yield g.assertedPersistence.getCurrentUser();if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const R=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,j=null==A?void 0:A._redirectEventId,J=yield g.tryRedirectSignIn(f);(!R||R===j)&&(null==J?void 0:J.user)&&(A=J.user)}return A?A._redirectEventId?(Ae(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===A._redirectEventId?g.directlySetCurrentUser(A):g.reloadAndSetCurrentUserOrClear(A)):g.reloadAndSetCurrentUserOrClear(A):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var g=this;return(0,d.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(A){yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,d.Z)(function*(){try{yield ea(f)}catch(w){if("auth/network-request-failed"!==w.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Hu(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,d.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,d.Z)(function*(){const w=f?(0,O.m9)(f):null;return w&&Ae(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(f){var g=this;return(0,d.Z)(function*(){if(!g._deleted)return f&&Ae(g.tenantId===f.tenantId,g,"tenant-id-mismatch"),g.queue((0,d.Z)(function*(){yield g.directlySetCurrentUser(f),g.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,d.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var g=this;return this.queue((0,d.Z)(function*(){yield g.assertedPersistence.setPersistence(nn(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,g,w){return this.registerStateListener(this.authStateSubscription,f,g,w)}onIdTokenChanged(f,g,w){return this.registerStateListener(this.idTokenSubscription,f,g,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var w=this;return(0,d.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(g);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,d.Z)(function*(){if(!g.redirectPersistenceManager){const w=f&&nn(f)||g._popupRedirectResolver;Ae(w,g,"argument-error"),g.redirectPersistenceManager=yield Ft.create(g,[nn(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,d.Z)(function*(){var w,A;return g._isInitialized&&(yield g.queue((0,d.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===f?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,d.Z)(function*(){if(f===g.currentUser)return g.queue((0,d.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,w,A){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),j=this._isInitialized?Promise.resolve():this._initializationPromise;return Ae(j,this,"internal-error"),j.then(()=>R(this.currentUser)),"function"==typeof g?f.addObserver(g,w,A):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,d.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=rs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,d.Z)(function*(){var g;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return A&&(w["X-Firebase-Client"]=A),w})()}}function Rn(y){return(0,O.m9)(y)}class Ba{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ti(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function pm(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class sa{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return cr("not implemented")}_getIdTokenResponse(f){return cr("not implemented")}_linkToIdToken(f,g){return cr("not implemented")}_getReauthenticationResolver(f){return cr("not implemented")}}function $f(y,f){return Pd.apply(this,arguments)}function Pd(){return(Pd=(0,d.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:resetPassword",rn(y,f))})).apply(this,arguments)}function Gf(y,f){return ac.apply(this,arguments)}function ac(){return(ac=(0,d.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function uc(y,f){return Js.apply(this,arguments)}function Js(){return(Js=(0,d.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:update",rn(y,f))})).apply(this,arguments)}function kd(){return(kd=(0,d.Z)(function*(y,f){return bt(y,"POST","/v1/accounts:signInWithPassword",rn(y,f))})).apply(this,arguments)}function lc(y,f){return oa.apply(this,arguments)}function oa(){return(oa=(0,d.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:sendOobCode",rn(y,f))})).apply(this,arguments)}function mm(y,f){return Od.apply(this,arguments)}function Od(){return(Od=(0,d.Z)(function*(y,f){return lc(y,f)})).apply(this,arguments)}function qy(y,f){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,d.Z)(function*(y,f){return lc(y,f)})).apply(this,arguments)}function Fd(y,f){return Io.apply(this,arguments)}function Io(){return(Io=(0,d.Z)(function*(y,f){return lc(y,f)})).apply(this,arguments)}function qf(y,f){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,d.Z)(function*(y,f){return lc(y,f)})).apply(this,arguments)}function Is(){return(Is=(0,d.Z)(function*(y,f){return bt(y,"POST","/v1/accounts:signInWithEmailLink",rn(y,f))})).apply(this,arguments)}function To(){return(To=(0,d.Z)(function*(y,f){return bt(y,"POST","/v1/accounts:signInWithEmailLink",rn(y,f))})).apply(this,arguments)}class aa extends sa{constructor(f,g,w,A=null){super("password",w),this._email=f,this._password=g,this._tenantId=A}static _fromEmailAndPassword(f,g){return new aa(f,g,"password")}static _fromEmailAndCode(f,g,w=null){return new aa(f,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,d.Z)(function*(){switch(g.signInMethod){case"password":return function gm(y,f){return kd.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Wf(y,f){return Is.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:an(f,"internal-error")}})()}_linkToIdToken(f,g){var w=this;return(0,d.Z)(function*(){switch(w.signInMethod){case"password":return Gf(f,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function qu(y,f){return To.apply(this,arguments)}(f,{idToken:g,email:w._email,oobCode:w._password});default:an(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Xs(y,f){return Vd.apply(this,arguments)}function Vd(){return(Vd=(0,d.Z)(function*(y,f){return bt(y,"POST","/v1/accounts:signInWithIdp",rn(y,f))})).apply(this,arguments)}class nr extends sa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new nr(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):an("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A}=g,R=ue(g,["providerId","signInMethod"]);if(!w||!A)return null;const j=new nr(w,A);return j.idToken=R.idToken||void 0,j.accessToken=R.accessToken||void 0,j.secret=R.secret,j.nonce=R.nonce,j.pendingToken=R.pendingToken||null,j}_getIdTokenResponse(f){return Xs(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,Xs(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Xs(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,O.xO)(g)}return f}}function zf(y,f){return Do.apply(this,arguments)}function Do(){return(Do=(0,d.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:sendVerificationCode",rn(y,f))})).apply(this,arguments)}function xr(){return(xr=(0,d.Z)(function*(y,f){return bt(y,"POST","/v1/accounts:signInWithPhoneNumber",rn(y,f))})).apply(this,arguments)}function ja(){return(ja=(0,d.Z)(function*(y,f){const g=yield bt(y,"POST","/v1/accounts:signInWithPhoneNumber",rn(y,f));if(g.temporaryProof)throw at(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Ud={USER_NOT_FOUND:"user-not-found"};function Ha(){return(Ha=(0,d.Z)(function*(y,f){return bt(y,"POST","/v1/accounts:signInWithPhoneNumber",rn(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Ud)})).apply(this,arguments)}class ai extends sa{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new ai({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new ai({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function _m(y,f){return xr.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Zf(y,f){return ja.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Kf(y,f){return Ha.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:w,verificationCode:A}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:w,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:w,phoneNumber:A,temporaryProof:R}=f;return w||g||A||R?new ai({verificationId:g,verificationCode:w,phoneNumber:A,temporaryProof:R}):null}}class Ao{constructor(f){var g,w,A,R,j,J;const Me=(0,O.zd)((0,O.pd)(f)),Se=null!==(g=Me.apiKey)&&void 0!==g?g:null,rt=null!==(w=Me.oobCode)&&void 0!==w?w:null,Xe=function Cn(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Me.mode)&&void 0!==A?A:null);Ae(Se&&rt&&Xe,"argument-error"),this.apiKey=Se,this.operation=Xe,this.code=rt,this.continueUrl=null!==(R=Me.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(j=Me.languageCode)&&void 0!==j?j:null,this.tenantId=null!==(J=Me.tenantId)&&void 0!==J?J:null}static parseLink(f){const g=function cc(y){const f=(0,O.zd)((0,O.pd)(y)).link,g=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,w=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(w?(0,O.zd)((0,O.pd)(w)).link:null)||w||g||f||y}(f);try{return new Ao(g)}catch(w){return null}}}let So=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,w){return aa._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const A=Ao.parseLink(w);return Ae(A,"argument-error"),aa._fromEmailAndCode(g,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Zr{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Ts extends Zr{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Mn extends Ts{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return Ae("providerId"in g&&"signInMethod"in g,"argument-error"),nr._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Ae(f.idToken||f.accessToken,"argument-error"),nr._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Mn.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Mn.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:R,nonce:j,providerId:J}=f;if(!w&&!A&&!g&&!R||!J)return null;try{return new Mn(J)._credential({idToken:g,accessToken:w,nonce:j,pendingToken:R})}catch(Me){return null}}}let Wu=(()=>{class y extends Ts{constructor(){super("facebook.com")}static credential(g){return nr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(w){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),$a=(()=>{class y extends Ts{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return nr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:A}=g;if(!w&&!A)return null;try{return y.credential(w,A)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),An=(()=>{class y extends Ts{constructor(){super("github.com")}static credential(g){return nr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(w){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Hi extends sa{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Xs(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,Xs(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Xs(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A,pendingToken:R}=g;return w&&A&&R&&w===A?new Hi(w,R):null}static _create(f,g){return new Hi(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ds extends Zr{constructor(f){Ae(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Ds.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Ds.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Hi.fromJSON(f);return Ae(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:w}=f;if(!g||!w)return null;try{return Hi._create(w,g)}catch(A){return null}}}let li=(()=>{class y extends Ts{constructor(){super("twitter.com")}static credential(g,w){return nr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=g;if(!w||!A)return null;try{return y.credential(w,A)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function ua(y,f){return to.apply(this,arguments)}function to(){return(to=(0,d.Z)(function*(y,f){return bt(y,"POST","/v1/accounts:signUp",rn(y,f))})).apply(this,arguments)}class tt{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,w,A=!1){return(0,d.Z)(function*(){const R=yield qn._fromIdTokenResponse(f,w,A),j=zu(w);return new tt({user:R,providerId:j,_tokenResponse:w,operationType:g})})()}static _forOperation(f,g,w){return(0,d.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const A=zu(w);return new tt({user:f,providerId:A,_tokenResponse:w,operationType:g})})()}}function zu(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Ga(){return(Ga=(0,d.Z)(function*(y){var f;const g=Rn(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new tt({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield ua(g,{returnSecureToken:!0}),A=yield tt._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class qa extends O.ZR{constructor(f,g,w,A){var R;super(g.code,g.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,qa.prototype),this.customData={appName:f.name,tenantId:null!==(R=f.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,g,w,A){return new qa(f,g,w,A)}}function la(y,f,g,w){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?qa._fromErrorAndOperation(y,R,f,w):R})}function hc(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function Ie(){return(Ie=(0,d.Z)(function*(y,f){const g=(0,O.m9)(y);yield bn(!0,g,f);const{providerUserInfo:w}=yield un(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),A=hc(w||[]);return g.providerData=g.providerData.filter(R=>A.has(R.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function jt(y,f){return no.apply(this,arguments)}function no(){return(no=(0,d.Z)(function*(y,f,g=!1){const w=yield zt(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return tt._forOperation(y,"link",w)})).apply(this,arguments)}function bn(y,f,g){return pc.apply(this,arguments)}function pc(){return(pc=(0,d.Z)(function*(y,f,g){yield ea(f);const A=!1===y?"provider-already-linked":"no-such-provider";Ae(hc(f.providerData).has(g)===y,f.auth,A)})).apply(this,arguments)}function ss(y,f){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,d.Z)(function*(y,f,g=!1){const{auth:w}=y,A="reauthenticate";try{const R=yield zt(y,la(w,A,f,y),g);Ae(R.idToken,w,"internal-error");const j=dr(R.idToken);Ae(j,w,"internal-error");const{sub:J}=j;return Ae(y.uid===J,w,"user-mismatch"),tt._forOperation(y,A,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&an(w,"user-mismatch"),R}})).apply(this,arguments)}function Wa(y,f){return ca.apply(this,arguments)}function ca(){return(ca=(0,d.Z)(function*(y,f,g=!1){const w="signIn",A=yield la(y,w,f),R=yield tt._fromIdTokenResponse(y,w,A);return g||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function gc(y,f){return mc.apply(this,arguments)}function mc(){return(mc=(0,d.Z)(function*(y,f){return Wa(Rn(y),f)})).apply(this,arguments)}function za(y,f){return ro.apply(this,arguments)}function ro(){return(ro=(0,d.Z)(function*(y,f){const g=(0,O.m9)(y);return yield bn(!1,g,f.providerId),jt(g,f)})).apply(this,arguments)}function Rr(y,f){return ci.apply(this,arguments)}function ci(){return(ci=(0,d.Z)(function*(y,f){return ss((0,O.m9)(y),f)})).apply(this,arguments)}function _c(y,f){return As.apply(this,arguments)}function As(){return(As=(0,d.Z)(function*(y,f){return bt(y,"POST","/v1/accounts:signInWithCustomToken",rn(y,f))})).apply(this,arguments)}function yc(){return(yc=(0,d.Z)(function*(y,f){const g=Rn(y),w=yield _c(g,{token:f,returnSecureToken:!0}),A=yield tt._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class xo{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?vc._fromServerResponse(f,g):an(f,"internal-error")}}class vc extends xo{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new vc(g)}}function da(y,f,g){var w;Ae((null===(w=g.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),Ae(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Ae(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(Ae(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function Ro(){return(Ro=(0,d.Z)(function*(y,f,g){const w=(0,O.m9)(y),A={requestType:"PASSWORD_RESET",email:f};g&&da(w,A,g),yield qy(w,A)})).apply(this,arguments)}function Mo(){return(Mo=(0,d.Z)(function*(y,f,g){yield $f((0,O.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Yu(){return(Yu=(0,d.Z)(function*(y,f){yield uc((0,O.m9)(y),{oobCode:f})})).apply(this,arguments)}function ha(y,f){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,d.Z)(function*(y,f){const g=(0,O.m9)(y),w=yield $f(g,{oobCode:f}),A=w.requestType;switch(Ae(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ae(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ae(w.mfaInfo,g,"internal-error");default:Ae(w.email,g,"internal-error")}let R=null;return w.mfaInfo&&(R=xo._fromServerResponse(Rn(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:R},operation:A}})).apply(this,arguments)}function Ju(){return(Ju=(0,d.Z)(function*(y,f){const{data:g}=yield ha((0,O.m9)(y),f);return g.email})).apply(this,arguments)}function Za(){return(Za=(0,d.Z)(function*(y,f,g){const w=Rn(y),A=yield ua(w,{returnSecureToken:!0,email:f,password:g}),R=yield tt._fromIdTokenResponse(w,"signIn",A);return yield w._updateCurrentUser(R.user),R})).apply(this,arguments)}function In(){return(In=(0,d.Z)(function*(y,f,g){const w=(0,O.m9)(y),A={requestType:"EMAIL_SIGNIN",email:f};Ae(g.handleCodeInApp,w,"argument-error"),g&&da(w,A,g),yield Fd(w,A)})).apply(this,arguments)}function Ka(){return(Ka=(0,d.Z)(function*(y,f,g){const w=(0,O.m9)(y),A=So.credentialWithLink(f,g||bi());return Ae(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),gc(w,A)})).apply(this,arguments)}function Qf(y,f){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,d.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:createAuthUri",rn(y,f))})).apply(this,arguments)}function Jf(){return(Jf=(0,d.Z)(function*(y,f){const w={identifier:f,continueUri:Vr()?bi():"http://localhost"},{signinMethods:A}=yield Qf((0,O.m9)(y),w);return A||[]})).apply(this,arguments)}function Qa(){return(Qa=(0,d.Z)(function*(y,f){const g=(0,O.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&da(g.auth,A,f);const{email:R}=yield mm(g.auth,A);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function Ja(){return(Ja=(0,d.Z)(function*(y,f,g){const w=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&da(w.auth,R,g);const{email:j}=yield qf(w.auth,R);j!==y.email&&(yield y.reload())})).apply(this,arguments)}function Hd(y,f){return nl.apply(this,arguments)}function nl(){return(nl=(0,d.Z)(function*(y,f){return Et(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function as(){return(as=(0,d.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const w=(0,O.m9)(y),R={idToken:yield w.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},j=yield zt(w,Hd(w.auth,R));w.displayName=j.displayName||null,w.photoURL=j.photoUrl||null;const J=w.providerData.find(({providerId:Me})=>"password"===Me);J&&(J.displayName=w.displayName,J.photoURL=w.photoURL),yield w._updateTokensIfNecessary(j)})).apply(this,arguments)}function Xf(y,f,g){return io.apply(this,arguments)}function io(){return(io=(0,d.Z)(function*(y,f,g){const{auth:w}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(R.email=f),g&&(R.password=g);const j=yield zt(y,Gf(w,R));yield y._updateTokensIfNecessary(j,!0)})).apply(this,arguments)}class No{constructor(f,g,w={}){this.isNewUser=f,this.providerId=g,this.profile=w}}class ep extends No{constructor(f,g,w,A){super(f,g,w),this.username=A}}class wm extends No{constructor(f,g){super(f,"facebook.com",g)}}class zy extends ep{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class cn extends No{constructor(f,g){super(f,"google.com",g)}}class Wn extends ep{constructor(f,g,w){super(f,"twitter.com",g,w)}}function ft(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function $d(y){var f,g;if(!y)return null;const{providerId:w}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&(null==y?void 0:y.idToken)){const j=null===(g=null===(f=dr(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(j)return new No(R,"anonymous"!==j&&"custom"!==j?j:null)}if(!w)return null;switch(w){case"facebook.com":return new wm(R,A);case"github.com":return new zy(R,A);case"google.com":return new cn(R,A);case"twitter.com":return new Wn(R,A,y.screenName||null);case"custom":case"anonymous":return new No(R,null);default:return new No(R,w,A)}}(g)}class ko{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new ko("enroll",f)}static _fromMfaPendingCredential(f){return new ko("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,w;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return ko._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(w=f.multiFactorSession)||void 0===w?void 0:w.idToken)return ko._fromIdtoken(f.multiFactorSession.idToken)}return null}}class qi{constructor(f,g,w){this.session=f,this.hints=g,this.signInResolver=w}static _fromError(f,g){const w=Rn(f),A=g.customData._serverResponse,R=(A.mfaInfo||[]).map(J=>xo._fromServerResponse(w,J));Ae(A.mfaPendingCredential,w,"internal-error");const j=ko._fromMfaPendingCredential(A.mfaPendingCredential);return new qi(j,R,function(){var J=(0,d.Z)(function*(Me){const Se=yield Me._process(w,j);delete A.mfaInfo,delete A.mfaPendingCredential;const rt=Object.assign(Object.assign({},A),{idToken:Se.idToken,refreshToken:Se.refreshToken});switch(g.operationType){case"signIn":const Xe=yield tt._fromIdTokenResponse(w,g.operationType,rt);return yield w._updateCurrentUser(Xe.user),Xe;case"reauthenticate":return Ae(g.user,w,"internal-error"),tt._forOperation(g.user,g.operationType,rt);default:an(w,"internal-error")}});return function(Me){return J.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,d.Z)(function*(){return g.signInResolver(f)})()}}function tp(y,f){return Et(y,"POST","/v2/accounts/mfaEnrollment:start",rn(y,f))}class so{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>xo._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new so(f)}getSession(){var f=this;return(0,d.Z)(function*(){return ko._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var w=this;return(0,d.Z)(function*(){const A=f,R=yield w.getSession(),j=yield zt(w.user,A._process(w.user.auth,R,g));return yield w.user._updateTokensIfNecessary(j),w.user.reload()})()}unenroll(f){var g=this;return(0,d.Z)(function*(){const w="string"==typeof f?f:f.uid,A=yield g.user.getIdToken(),R=yield zt(g.user,function fa(y,f){return Et(y,"POST","/v2/accounts/mfaEnrollment:withdraw",rn(y,f))}(g.user.auth,{idToken:A,mfaEnrollmentId:w}));g.enrolledFactors=g.enrolledFactors.filter(({uid:j})=>j!==w),yield g.user._updateTokensIfNecessary(R);try{yield g.user.reload()}catch(j){if("auth/user-token-expired"!==j.code)throw j}})()}}const Pn=new WeakMap,Oo="__sak";class us{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Oo,"1"),this.storage.removeItem(Oo),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const tu=(()=>{class y extends us{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function il(){const y=(0,O.z$)();return Dt(y)||Ii(y)}()&&function Nd(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=oc(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),R=this.localCache[w];A!==R&&g(w,R,A)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((J,Me,Se)=>{this.notifyListeners(J,Se)});const A=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const J=this.storage.getItem(A);if(g.newValue!==J)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!w)return}const R=()=>{const J=this.storage.getItem(A);!w&&this.localCache[A]===J||this.notifyListeners(A,J)},j=this.storage.getItem(A);!function ln(){return(0,O.w1)()&&10===document.documentMode}()||j===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,w){this.localCache[g]=w;const A=this.listeners[g];if(A)for(const R of Array.from(A))R(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var A=()=>super._set,R=this;return(0,d.Z)(function*(){yield A().call(R,g,w),R.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,A=this;return(0,d.Z)(function*(){const R=yield w().call(A,g);return A.localCache[g]=JSON.stringify(R),R})()}_remove(g){var w=()=>super._remove,A=this;return(0,d.Z)(function*(){yield w().call(A,g),delete A.localCache[g]})()}}return y.type="LOCAL",y})(),pr=(()=>{class y extends us{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return y.type="SESSION",y})();let ma=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(R=>R.isListeningto(g));if(w)return w;const A=new y(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,d.Z)(function*(){const A=g,{eventId:R,eventType:j,data:J}=A.data,Me=w.handlersMap[j];if(!(null==Me?void 0:Me.size))return;A.ports[0].postMessage({status:"ack",eventId:R,eventType:j});const Se=Array.from(Me).map(function(){var Xe=(0,d.Z)(function*(Gt){return Gt(A.origin,J)});return function(Gt){return Xe.apply(this,arguments)}}()),rt=yield function nu(y){return Promise.all(y.map(function(){var f=(0,d.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return f.apply(this,arguments)}}()))}(Se);A.ports[0].postMessage({status:"done",eventId:R,eventType:j,response:rt})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Fo(y="",f=10){let g="";for(let w=0;w<f;w++)g+=Math.floor(10*Math.random());return y+g}class gr{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,w=50){var A=this;return(0,d.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let j,J;return new Promise((Me,Se)=>{const rt=Fo("",20);R.port1.start();const Xe=setTimeout(()=>{Se(new Error("unsupported_event"))},w);J={messageChannel:R,onMessage(Gt){const On=Gt;if(On.data.eventId===rt)switch(On.data.status){case"ack":clearTimeout(Xe),j=setTimeout(()=>{Se(new Error("timeout"))},3e3);break;case"done":clearTimeout(j),Me(On.data.response);break;default:clearTimeout(Xe),clearTimeout(j),Se(new Error("invalid_response"))}}},A.handlers.add(J),R.port1.addEventListener("message",J.onMessage),A.target.postMessage({eventType:f,eventId:rt,data:g},[R.port2])}).finally(()=>{J&&A.removeMessageHandler(J)})})()}}function gn(){return window}function Tn(){return void 0!==gn().WorkerGlobalScope&&"function"==typeof gn().importScripts}function di(){return(di=(0,d.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Ai="firebaseLocalStorageDb",Sn="firebaseLocalStorage",Wd="fbase_key";class ls{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function dn(y,f){return y.transaction([Sn],f?"readwrite":"readonly").objectStore(Sn)}function ip(){const y=indexedDB.open(Ai,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(Sn,{keyPath:Wd})}catch(A){g(A)}}),y.addEventListener("success",(0,d.Z)(function*(){const w=y.result;w.objectStoreNames.contains(Sn)?f(w):(w.close(),yield function rp(){const y=indexedDB.deleteDatabase(Ai);return new ls(y).toPromise()}(),f(yield ip()))}))})}function sp(y,f,g){return op.apply(this,arguments)}function op(){return(op=(0,d.Z)(function*(y,f,g){const w=dn(y,!0).put({[Wd]:f,value:g});return new ls(w).toPromise()})).apply(this,arguments)}function Ur(){return(Ur=(0,d.Z)(function*(y,f){const g=dn(y,!1).get(f),w=yield new ls(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function zd(y,f){const g=dn(y,!0).delete(f);return new ls(g).toPromise()}const xs=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,d.Z)(function*(){return g.db||(g.db=yield ip()),g.db})()}_withRetries(g){var w=this;return(0,d.Z)(function*(){let A=0;for(;;)try{const R=yield w._openDb();return yield g(R)}catch(R){if(A++>3)throw R;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,d.Z)(function*(){return Tn()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,d.Z)(function*(){g.receiver=ma._getInstance(function Yr(){return Tn()?self:null}()),g.receiver._subscribe("keyChanged",function(){var w=(0,d.Z)(function*(A,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(A,R){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,d.Z)(function*(A,R){return["keyChanged"]});return function(A,R){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,d.Z)(function*(){var w,A;if(g.activeServiceWorker=yield function ru(){return di.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new gr(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(w=R[0])||void 0===w?void 0:w.fulfilled)&&(null===(A=R[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,d.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function _a(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const g=yield ip();return yield sp(g,Oo,"1"),yield zd(g,Oo),!0}catch(g){}return!1})()}_withPendingWrite(g){var w=this;return(0,d.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var A=this;return(0,d.Z)(function*(){return A._withPendingWrite((0,d.Z)(function*(){return yield A._withRetries(R=>sp(R,g,w)),A.localCache[g]=w,A.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,d.Z)(function*(){const A=yield w._withRetries(R=>function ya(y,f){return Ur.apply(this,arguments)}(R,g));return w.localCache[g]=A,A})()}_remove(g){var w=this;return(0,d.Z)(function*(){return w._withPendingWrite((0,d.Z)(function*(){return yield w._withRetries(A=>zd(A,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,d.Z)(function*(){const w=yield g._withRetries(j=>{const J=dn(j,!1).getAll();return new ls(J).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const A=[],R=new Set;for(const{fbase_key:j,value:J}of w)R.add(j),JSON.stringify(g.localCache[j])!==JSON.stringify(J)&&(g.notifyListeners(j,J),A.push(j));for(const j of Object.keys(g.localCache))g.localCache[j]&&!R.has(j)&&(g.notifyListeners(j,null),A.push(j));return A})()}notifyListeners(g,w){this.localCache[g]=w;const A=this.listeners[g];if(A)for(const R of Array.from(A))R(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function iu(y,f){return Et(y,"POST","/v2/accounts/mfaSignIn:start",rn(y,f))}function Qr(){return(Qr=(0,d.Z)(function*(y){return(yield Et(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function sl(y){return new Promise((f,g)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=f,w.onerror=A=>{const R=xn("internal-error");R.customData=A,g(R)},w.type="text/javascript",w.charset="UTF-8",function cs(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(w)})}function va(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Ea=1e12;class bc{constructor(f){this.auth=f,this.counter=Ea,this._widgets=new Map}render(f,g){const w=this.counter;return this._widgets.set(w,new Kd(f,this.auth.name,g||{})),this.counter++,w}reset(f){var g;const w=f||Ea;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(f){var g;return(null===(g=this._widgets.get(f||Ea))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,d.Z)(function*(){var w;return null===(w=g._widgets.get(f||Ea))||void 0===w||w.execute(),""})()}}class Kd{constructor(f,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;Ae(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Cc(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const xt=va("rcb"),Br=new pn(3e4,6e4);class ba{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!gn().grecaptcha}load(f,g=""){return Ae(function ap(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(gn().grecaptcha):new Promise((w,A)=>{const R=gn().setTimeout(()=>{A(xn(f,"network-request-failed"))},Br.get());gn()[xt]=()=>{gn().clearTimeout(R),delete gn()[xt];const J=gn().grecaptcha;if(!J)return void A(xn(f,"internal-error"));const Me=J.render;J.render=(Se,rt)=>{const Xe=Me(Se,rt);return this.counter++,Xe},this.hostLanguage=g,w(J)},sl(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:xt,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),A(xn(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!gn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Yd{load(f){return(0,d.Z)(function*(){return new bc(f)})()}clearedOneInstance(){}}const Qd="recaptcha",Ca={theme:"light",type:"image"};class Wi{constructor(f,g=Object.assign({},Ca),w){this.parameters=g,this.type=Qd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Rn(w),this.isInvisible="invisible"===this.parameters.size,Ae("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;Ae(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Yd:new ba,this.validateStartingState()}verify(){var f=this;return(0,d.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(g)||new Promise(R=>{const j=J=>{!J||(f.tokenChangeListeners.delete(j),R(J))};f.tokenChangeListeners.add(j),f.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Ae(!this.parameters.sitekey,this.auth,"argument-error"),Ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ae("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof f)f(g);else if("string"==typeof f){const w=gn()[f];"function"==typeof w&&w(g)}}}assertNotDestroyed(){Ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,d.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,d.Z)(function*(){Ae(Vr()&&!Tn(),f.auth,"internal-error"),yield function Jd(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Cm(y){return Qr.apply(this,arguments)}(f.auth);Ae(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return Ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class al{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=ai._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function ul(){return(ul=(0,d.Z)(function*(y,f,g){const w=Rn(y),A=yield ao(w,f,(0,O.m9)(g));return new al(A,R=>gc(w,R))})).apply(this,arguments)}function zi(){return(zi=(0,d.Z)(function*(y,f,g){const w=(0,O.m9)(y);yield bn(!1,w,"phone");const A=yield ao(w.auth,f,(0,O.m9)(g));return new al(A,R=>za(w,R))})).apply(this,arguments)}function Ia(){return(Ia=(0,d.Z)(function*(y,f,g){const w=(0,O.m9)(y),A=yield ao(w.auth,f,(0,O.m9)(g));return new al(A,R=>Rr(w,R))})).apply(this,arguments)}function ao(y,f,g){return cl.apply(this,arguments)}function cl(){return(cl=(0,d.Z)(function*(y,f,g){var w;const A=yield g.verify();try{let R;if(Ae("string"==typeof A,y,"argument-error"),Ae(g.type===Qd,y,"argument-error"),R="string"==typeof f?{phoneNumber:f}:f,"session"in R){const j=R.session;if("phoneNumber"in R)return Ae("enroll"===j.type,y,"internal-error"),(yield tp(y,{idToken:j.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{Ae("signin"===j.type,y,"internal-error");const J=(null===(w=R.multiFactorHint)||void 0===w?void 0:w.uid)||R.multiFactorUid;return Ae(J,y,"missing-multi-factor-info"),(yield iu(y,{mfaPendingCredential:j.credential,mfaEnrollmentId:J,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:j}=yield zf(y,{phoneNumber:R.phoneNumber,recaptchaToken:A});return j}}finally{g._reset()}})).apply(this,arguments)}function I(){return(I=(0,d.Z)(function*(y,f){yield jt((0,O.m9)(y),f)})).apply(this,arguments)}let T=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Rn(g)}verifyPhoneNumber(g,w){return ao(this.auth,g,(0,O.m9)(w))}static credential(g,w){return ai._fromVerification(g,w)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:A}=g;return w&&A?ai._fromTokenResponse(w,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function N(y,f){return f?nn(f):(Ae(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class U extends sa{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Xs(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Xs(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Xs(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function Z(y){return Wa(y.auth,new U(y),y.bypassAuthState)}function ne(y){const{auth:f,user:g}=y;return Ae(g,f,"internal-error"),ss(g,new U(y),y.bypassAuthState)}function ie(y){return ze.apply(this,arguments)}function ze(){return(ze=(0,d.Z)(function*(y){const{auth:f,user:g}=y;return Ae(g,f,"internal-error"),jt(g,new U(y),y.bypassAuthState)})).apply(this,arguments)}class At{constructor(f,g,w,A,R=!1){this.auth=f,this.resolver=w,this.user=A,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,d.Z)(function*(w,A){f.pendingPromise={resolve:w,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(R){f.reject(R)}});return function(w,A){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,d.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:R,tenantId:j,error:J,type:Me}=f;if(J)return void g.reject(J);const Se={auth:g.auth,requestUri:w,sessionId:A,tenantId:j||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Me)(Se))}catch(rt){g.reject(rt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Z;case"linkViaPopup":case"linkViaRedirect":return ie;case"reauthViaPopup":case"reauthViaRedirect":return ne;default:an(this.auth,"internal-error")}}resolve(f){jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const pt=new pn(2e3,1e4);function It(){return(It=(0,d.Z)(function*(y,f,g){const w=Rn(y);Li(y,f,Zr);const A=N(w,g);return new Ms(w,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function rr(){return(rr=(0,d.Z)(function*(y,f,g){const w=(0,O.m9)(y);Li(w.auth,f,Zr);const A=N(w.auth,g);return new Ms(w.auth,"reauthViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}function jr(){return(jr=(0,d.Z)(function*(y,f,g){const w=(0,O.m9)(y);Li(w.auth,f,Zr);const A=N(w.auth,g);return new Ms(w.auth,"linkViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}let Ms=(()=>{class y extends At{constructor(g,w,A,R,j){super(g,w,R,j),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,d.Z)(function*(){const w=yield g.execute();return Ae(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,d.Z)(function*(){jn(1===g.filter.length,"Popup operations only handle one event");const w=Fo();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(xn(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,A;this.pollId=(null===(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(xn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,pt.get())};g()}}return y.currentPopupAction=null,y})();const Ns=new Map;class su extends At{constructor(f,g,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,d.Z)(function*(){let w=Ns.get(g.auth._key());if(!w){try{const R=(yield function dl(y,f){return ou.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;w=()=>Promise.resolve(R)}catch(A){w=()=>Promise.reject(A)}Ns.set(g.auth._key(),w)}return g.bypassAuthState||Ns.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,w=this;return(0,d.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(w,f);if("unknown"!==f.type){if(f.eventId){const A=yield w.auth._redirectUserForId(f.eventId);if(A)return w.user=A,g().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function ou(){return(ou=(0,d.Z)(function*(y,f){const g=Vo(f),w=au(y);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(g));return yield w._remove(g),A})).apply(this,arguments)}function Ic(y,f){return up.apply(this,arguments)}function up(){return(up=(0,d.Z)(function*(y,f){return au(y)._set(Vo(f),"true")})).apply(this,arguments)}function au(y){return nn(y._redirectPersistence)}function Vo(y){return Ar("pendingRedirect",y.config.apiKey,y.name)}function Xd(){return(Xd=(0,d.Z)(function*(y,f,g){const w=Rn(y);Li(y,f,Zr);const A=N(w,g);return yield Ic(A,w),A._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function eh(){return(eh=(0,d.Z)(function*(y,f,g){const w=(0,O.m9)(y);Li(w.auth,f,Zr);const A=N(w.auth,g);yield Ic(A,w.auth);const R=yield hl(w);return A._openRedirect(w.auth,f,"reauthViaRedirect",R)})).apply(this,arguments)}function xi(){return(xi=(0,d.Z)(function*(y,f,g){const w=(0,O.m9)(y);Li(w.auth,f,Zr);const A=N(w.auth,g);yield bn(!1,w,f.providerId),yield Ic(A,w.auth);const R=yield hl(w);return A._openRedirect(w.auth,f,"linkViaRedirect",R)})).apply(this,arguments)}function Uo(){return(Uo=(0,d.Z)(function*(y,f){return yield Rn(y)._initializationPromise,Tc(y,f,!1)})).apply(this,arguments)}function Tc(y,f){return dp.apply(this,arguments)}function dp(){return(dp=(0,d.Z)(function*(y,f,g=!1){const w=Rn(y),A=N(w,f),j=yield new su(w,A,g).execute();return j&&!g&&(delete j.user._redirectEventId,yield w._persistUserIfCurrent(j.user),yield w._setRedirectUser(null,f)),j})).apply(this,arguments)}function hl(y){return uu.apply(this,arguments)}function uu(){return(uu=(0,d.Z)(function*(y){const f=Fo(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class fl{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(g=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function fp(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Dc(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var w;if(f.error&&!Dc(f)){const A=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(xn(this.auth,A))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const w=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(th(f))}saveEventToCache(f){this.cachedEventUids.add(th(f)),this.lastProcessedEventTime=Date.now()}}function th(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Dc({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function nh(y){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,d.Z)(function*(y,f={}){return Et(y,"GET","/v1/projects",f)})).apply(this,arguments)}const Qy=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sc=/^https?/;function uo(){return(uo=(0,d.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield nh(y);for(const g of f)try{if(xc(g))return}catch(w){}an(y,"unauthorized-domain")})).apply(this,arguments)}function xc(y){const f=bi(),{protocol:g,hostname:w}=new URL(f);if(y.startsWith("chrome-extension://")){const j=new URL(y);return""===j.hostname&&""===w?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&j.hostname===w}if(!Sc.test(g))return!1;if(Qy.test(y))return w===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const rh=new pn(3e4,6e4);function Rc(){const y=gn().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let ih=null;function Xy(y){return ih=ih||function Tm(y){return new Promise((f,g)=>{var w,A,R;function j(){Rc(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Rc(),g(xn(y,"network-request-failed"))},timeout:rh.get()})}if(null===(A=null===(w=gn().gapi)||void 0===w?void 0:w.iframes)||void 0===A?void 0:A.Iframe)f(gapi.iframes.getContext());else{if(!(null===(R=gn().gapi)||void 0===R?void 0:R.load)){const J=va("iframefcb");return gn()[J]=()=>{gapi.load?j():g(xn(y,"network-request-failed"))},sl(`https://apis.google.com/js/api.js?onload=${J}`).catch(Me=>g(Me))}j()}}).catch(f=>{throw ih=null,f})}(y),ih}const fb=new pn(5e3,15e3),tv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Dm(y){const f=y.config;Ae(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?et(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:y.name,v:se.SDK_VERSION},A=nv.get(y.config.apiHost);A&&(w.eid=A);const R=y._getFrameworks();return R.length&&(w.fw=R.join(",")),`${g}?${(0,O.xO)(w).slice(1)}`}function gp(){return gp=(0,d.Z)(function*(y){const f=yield Xy(y),g=gn().gapi;return Ae(g,y,"internal-error"),f.open({where:document.body,url:Dm(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tv,dontclear:!0},w=>new Promise(function(){var A=(0,d.Z)(function*(R,j){yield w.restyle({setHideOnLeave:!1});const J=xn(y,"network-request-failed"),Me=gn().setTimeout(()=>{j(J)},fb.get());function Se(){gn().clearTimeout(Me),R(w)}w.ping(Se).then(Se,()=>{j(J)})});return function(R,j){return A.apply(this,arguments)}}()))}),gp.apply(this,arguments)}const pl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class mp{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function ks(y,f,g,w,A,R){Ae(y.config.authDomain,y,"auth-domain-config-required"),Ae(y.config.apiKey,y,"invalid-api-key");const j={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:w,v:se.SDK_VERSION,eventId:A};if(f instanceof Zr){f.setDefaultLanguage(y.languageCode),j.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(j.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Me,Se]of Object.entries(R||{}))j[Me]=Se}if(f instanceof Ts){const Me=f.getScopes().filter(Se=>""!==Se);Me.length>0&&(j.scopes=Me.join(","))}y.tenantId&&(j.tid=y.tenantId);const J=j;for(const Me of Object.keys(J))void 0===J[Me]&&delete J[Me];return`${function _p({config:y}){return y.emulator?et(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(J).slice(1)}`}const Mc="webStorageSupport";class cu extends class ml{constructor(f){this.factorId=f}_process(f,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,w);case"signin":return this._finalizeSignIn(f,g.credential);default:return cr("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new cu(f)}_finalizeEnroll(f,g,w){return function np(y,f){return Et(y,"POST","/v2/accounts/mfaEnrollment:finalize",rn(y,f))}(f,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function bm(y,f){return Et(y,"POST","/v2/accounts/mfaSignIn:finalize",rn(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let iv=(()=>{class y{constructor(){}static assertion(g){return cu._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var _l="@firebase/auth",oh="0.19.11";class Mm{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,d.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(w=>{var A;f((null===(A=w)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function du(){return window}function ah(){return(ah=(0,d.Z)(function*(y,f,g){var w;const{BuildInfo:A}=du();jn(f.sessionId,"AuthEvent did not contain a session ID");const R=yield av(f.sessionId),j={};return Ii()?j.ibi=A.packageName:Cs()?j.apn=A.packageName:an(y,"operation-not-supported-in-this-environment"),A.displayName&&(j.appDisplayName=A.displayName),j.sessionId=R,ks(y,g,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,j)})).apply(this,arguments)}function hu(){return(hu=(0,d.Z)(function*(y){const{BuildInfo:f}=du(),g={};Ii()?g.iosBundleId=f.packageName:Cs()?g.androidPackageName=f.packageName:an(y,"operation-not-supported-in-this-environment"),yield nh(y,g)})).apply(this,arguments)}function yp(){return(yp=(0,d.Z)(function*(y,f,g){const{cordova:w}=du();let A=()=>{};try{yield new Promise((R,j)=>{let J=null;function Me(){var Xe;R();const Gt=null===(Xe=w.plugins.browsertab)||void 0===Xe?void 0:Xe.close;"function"==typeof Gt&&Gt(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Se(){J||(J=window.setTimeout(()=>{j(xn(y,"redirect-cancelled-by-user"))},2e3))}function rt(){"visible"===(null==document?void 0:document.visibilityState)&&Se()}f.addPassiveListener(Me),document.addEventListener("resume",Se,!1),Cs()&&document.addEventListener("visibilitychange",rt,!1),A=()=>{f.removePassiveListener(Me),document.removeEventListener("resume",Se,!1),document.removeEventListener("visibilitychange",rt,!1),J&&window.clearTimeout(J)}})}finally{A()}})).apply(this,arguments)}function av(y){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,d.Z)(function*(y){const f=uv(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function uv(y){if(jn(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let w=0;w<y.length;w++)g[w]=y.charCodeAt(w);return g}!function Nm(y){(0,se._registerComponent)(new de.wA("auth",(f,{options:g})=>{const w=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),{apiKey:R,authDomain:j}=w.options;return((J,Me)=>{Ae(R&&!R.includes(":"),"invalid-api-key",{appName:J.name}),Ae(!(null==j?void 0:j.includes(":")),"argument-error",{appName:J.name});const Se={apiKey:R,authDomain:j,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rs(y)},rt=new is(J,Me,Se);return function or(y,f){const g=(null==f?void 0:f.persistence)||[],w=(Array.isArray(g)?g:[g]).map(nn);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(w,null==f?void 0:f.popupRedirectResolver)}(rt,g),rt})(w,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,w)=>{f.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new de.wA("auth-internal",f=>{const g=Rn(f.getProvider("auth").getImmediate());return new Mm(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(_l,oh,function Nc(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,se.registerVersion)(_l,oh,"esm2017")}("Browser");class mr extends fl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,d.Z)(function*(){yield f.initPromise})()}}function dh(y){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,d.Z)(function*(y){const f=yield wp()._get(Ep(y));return f&&(yield wp()._remove(Ep(y))),f})).apply(this,arguments)}function vp(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*f.length);y.push(f.charAt(w))}return y.join("")}function wp(){return nn(tu)}function Ep(y){return Ar("authEvent",y.config.apiKey,y.name)}function vl(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,O.zd)(g.join("?"))}function Fc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:xn("no-auth-event")}}function pu(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Om(y=(0,O.z$)()){return!("file:"!==pu()&&"ionic:"!==pu()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Fm(){try{const y=self.localStorage,f=Fo();if(y)return y.setItem(f,"1"),y.removeItem(f),!function mv(y=(0,O.z$)()){return function Lc(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function gv(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return Cp()&&(0,O.hl)()}return!1}function Cp(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ip(){return(function bp(){return"http:"===pu()||"https:"===pu()}()||(0,O.ru)()||Om())&&!function pv(){return(0,O.b$)()||(0,O.UG)()}()&&Fm()&&!Cp()}function ph(){return Om()&&"undefined"!=typeof document}function Tp(){return(Tp=(0,d.Z)(function*(){return!!ph()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Ki={LOCAL:"local",NONE:"none",SESSION:"session"},wl=Ae,Dp="persistence";function gh(y){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,d.Z)(function*(y){yield y._initializationPromise;const f=Lm(),g=Ar(Dp,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function Lm(){var y;try{return(null===(y=function yv(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const _b=Ae;class jo{constructor(){this.browserResolver=nn(class gb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pr,this._completeRedirectFn=Tc}_openPopup(f,g,w,A){var R=this;return(0,d.Z)(function*(){var j;jn(null===(j=R.eventManagers[f._key()])||void 0===j?void 0:j.manager,"_initialize() not called before _openPopup()");const J=ks(f,g,w,bi(),A);return function xm(y,f,g,w=500,A=600){const R=Math.max((window.screen.availHeight-A)/2,0).toString(),j=Math.max((window.screen.availWidth-w)/2,0).toString();let J="";const Me=Object.assign(Object.assign({},pl),{width:w.toString(),height:A.toString(),top:R,left:j}),Se=(0,O.z$)().toLowerCase();g&&(J=ia(Se)?"_blank":g),ra(Se)&&(f=f||"http://localhost",Me.scrollbars="yes");const rt=Object.entries(Me).reduce((Gt,[On,Ho])=>`${Gt}${On}=${Ho},`,"");if(function Bi(y=(0,O.z$)()){var f;return Ii(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Se)&&"_self"!==J)return function Rm(y,f){const g=document.createElement("a");g.href=y,g.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(f||"",J),new mp(null);const Xe=window.open(f||"",J,rt);Ae(Xe,y,"popup-blocked");try{Xe.focus()}catch(Gt){}return new mp(Xe)}(f,J,Fo())})()}_openRedirect(f,g,w,A){var R=this;return(0,d.Z)(function*(){return yield R._originValidation(f),function qd(y){gn().location.href=y}(ks(f,g,w,bi(),A)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:A,promise:R}=this.eventManagers[g];return A?Promise.resolve(A):(jn(R,"If manager is not set, promise should be"),R)}const w=this.initAndGetManager(f);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(f){var g=this;return(0,d.Z)(function*(){const w=yield function pp(y){return gp.apply(this,arguments)}(f),A=new fl(f);return w.register("authEvent",R=>(Ae(null==R?void 0:R.authEvent,f,"invalid-auth-event"),{status:A.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:A},g.iframes[f._key()]=w,A})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Mc,{type:Mc},A=>{var R;const j=null===(R=null==A?void 0:A[0])||void 0===R?void 0:R[Mc];void 0!==j&&g(!!j),an(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Jy(y){return uo.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return oc()||Dt()||Ii()}}),this.cordovaResolver=nn(class km{constructor(){this._redirectPersistence=pr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Tc}_initialize(f){var g=this;return(0,d.Z)(function*(){const w=f._key();let A=g.eventManagers.get(w);return A||(A=new mr(f),g.eventManagers.set(w,A),g.attachCallbackListeners(f,A)),A})()}_openPopup(f){an(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,w,A){var R=this;return(0,d.Z)(function*(){!function ov(y){var f,g,w,A,R,j,J,Me,Se,rt;const Xe=du();Ae("function"==typeof(null===(f=null==Xe?void 0:Xe.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ae(void 0!==(null===(g=null==Xe?void 0:Xe.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ae("function"==typeof(null===(R=null===(A=null===(w=null==Xe?void 0:Xe.cordova)||void 0===w?void 0:w.plugins)||void 0===A?void 0:A.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ae("function"==typeof(null===(Me=null===(J=null===(j=null==Xe?void 0:Xe.cordova)||void 0===j?void 0:j.plugins)||void 0===J?void 0:J.browsertab)||void 0===Me?void 0:Me.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ae("function"==typeof(null===(rt=null===(Se=null==Xe?void 0:Xe.cordova)||void 0===Se?void 0:Se.InAppBrowser)||void 0===rt?void 0:rt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const j=yield R._initialize(f);yield j.initialized(),j.resetRedirect(),function Zy(){Ns.clear()}(),yield R._originValidation(f);const J=function ch(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:vp(),postBody:null,tenantId:y.tenantId,error:xn(y,"no-auth-event")}}(f,w,A);yield function kc(y,f){return wp()._set(Ep(y),f)}(f,J);const Me=yield function ds(y,f,g){return ah.apply(this,arguments)}(f,J,g),Se=yield function lh(y){const{cordova:f}=du();return new Promise(g=>{f.plugins.browsertab.isAvailable(w=>{let A=null;w?f.plugins.browsertab.openUrl(y):A=f.InAppBrowser.open(y,function Ui(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(A)})})}(Me);return function sv(y,f,g){return yp.apply(this,arguments)}(f,j,Se)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function uh(y){return hu.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:w,handleOpenURL:A,BuildInfo:R}=du(),j=setTimeout((0,d.Z)(function*(){yield dh(f),g.onEvent(Fc())}),500),J=function(){var rt=(0,d.Z)(function*(Xe){clearTimeout(j);const Gt=yield dh(f);let On=null;Gt&&(null==Xe?void 0:Xe.url)&&(On=function Oc(y,f){var g,w;const A=function lv(y){const f=vl(y),g=f.link?decodeURIComponent(f.link):void 0,w=vl(g).link,A=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return vl(A).link||A||w||g||y}(f);if(A.includes("/__/auth/callback")){const R=vl(A),j=R.firebaseError?function hh(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(R.firebaseError)):null,J=null===(w=null===(g=null==j?void 0:j.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],Me=J?xn(J):null;return Me?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Me,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(Gt,Xe.url)),g.onEvent(On||Fc())});return function(Gt){return rt.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,J);const Me=A,Se=`${R.packageName.toLowerCase()}://`;du().handleOpenURL=function(){var rt=(0,d.Z)(function*(Xe){if(Xe.toLowerCase().startsWith(Se)&&J({url:Xe}),"function"==typeof Me)try{Me(Xe)}catch(Gt){console.error(Gt)}});return function(Xe){return rt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=pr,this._completeRedirectFn=Tc}_initialize(f){var g=this;return(0,d.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,w,A){var R=this;return(0,d.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(f,g,w,A)})()}_openRedirect(f,g,w,A){var R=this;return(0,d.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(f,g,w,A)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return ph()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return _b(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,d.Z)(function*(){if(f.underlyingResolver)return;const g=yield function _v(){return Tp.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function vv(y){return y.unwrap()}function Ap(y){return Vm(y)}function Vm(y){const{_tokenResponse:f}=y instanceof O.ZR?y.customData:y;if(!f)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return T.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=$a;break;case"facebook.com":w=Wu;break;case"github.com":w=An;break;case"twitter.com":w=li;break;default:const{oauthIdToken:A,oauthAccessToken:R,oauthTokenSecret:j,pendingToken:J,nonce:Me}=f;return R||j||A||J?J?g.startsWith("saml.")?Hi._create(g,J):nr._fromParams({providerId:g,signInMethod:g,pendingToken:J,idToken:A,accessToken:R}):new Mn(g).credential({idToken:A,accessToken:R,rawNonce:Me}):null}return y instanceof O.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function pi(y,f){return f.catch(g=>{throw g instanceof O.ZR&&function Vc(y,f){var g;const w=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new Sp(y,function lt(y,f){var g;const w=(0,O.m9)(y),A=f;return Ae(f.customData.operationType,w,"argument-error"),Ae(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),qi._fromError(w,A)}(y,f));else if(w){const A=Vm(f),R=f;A&&(R.credential=A,R.tenantId=w.tenantId||void 0,R.email=w.email||void 0,R.phoneNumber=w.phoneNumber||void 0)}}(y,g),g}).then(g=>{const A=g.user;return{operationType:g.operationType,credential:Ap(g),additionalUserInfo:ft(g),user:Fs.getOrCreate(A)}})}function gu(y,f){return El.apply(this,arguments)}function El(){return(El=(0,d.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:w=>pi(y,g.confirm(w))}})).apply(this,arguments)}class Sp{constructor(f,g){this.resolver=g,this.auth=function lo(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return pi(vv(this.auth),this.resolver.resolveSignIn(f))}}class Fs{constructor(f){this._delegate=f,this.multiFactor=function pa(y){const f=(0,O.m9)(y);return Pn.has(f)||Pn.set(f,so._fromUser(f)),Pn.get(f)}(f)}static getOrCreate(f){return Fs.USER_MAP.has(f)||Fs.USER_MAP.set(f,new Fs(f)),Fs.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,d.Z)(function*(){return pi(g.auth,za(g._delegate,f))})()}linkWithPhoneNumber(f,g){var w=this;return(0,d.Z)(function*(){return gu(w.auth,function wn(y,f,g){return zi.apply(this,arguments)}(w._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,d.Z)(function*(){return pi(g.auth,function Zi(y,f,g){return jr.apply(this,arguments)}(g._delegate,f,jo))})()}linkWithRedirect(f){var g=this;return(0,d.Z)(function*(){return yield gh(Rn(g.auth)),function lp(y,f,g){return function cp(y,f,g){return xi.apply(this,arguments)}(y,f,g)}(g._delegate,f,jo)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,d.Z)(function*(){return pi(g.auth,Rr(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return gu(this.auth,function ll(y,f,g){return Ia.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return pi(this.auth,function fi(y,f,g){return rr.apply(this,arguments)}(this._delegate,f,jo))}reauthenticateWithRedirect(f){var g=this;return(0,d.Z)(function*(){return yield gh(Rn(g.auth)),function Yy(y,f,g){return function hb(y,f,g){return eh.apply(this,arguments)}(y,f,g)}(g._delegate,f,jo)})()}sendEmailVerification(f){return function el(y,f){return Qa.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,d.Z)(function*(){return yield function fc(y,f){return Ie.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function rl(y,f){return Xf((0,O.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function vm(y,f){return Xf((0,O.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Im(y,f){return I.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function hr(y,f){return as.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function tl(y,f,g){return Ja.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Fs.USER_MAP=new WeakMap;const mu=Ae;let xp=(()=>{class y{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=g.options;mu(A,"invalid-api-key",{appName:g.name}),mu(A,"invalid-api-key",{appName:g.name});const R="undefined"!=typeof window?jo:void 0;this._delegate=w.initialize({options:{persistence:_u(A,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(ns),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Fs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function $u(y,f,g){const w=Rn(y);Ae(w._canInitEmulator,w,"emulator-config-failed"),Ae(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const A=!!(null==g?void 0:g.disableWarnings),R=Ti(f),{host:j,port:J}=function Hf(y){const f=Ti(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const R=A[1];return{host:R,port:pm(w.substr(R.length+1))}}{const[R,j]=w.split(":");return{host:R,port:pm(j)}}}(f);w.config.emulator={url:`${R}//${j}${null===J?"":`:${J}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:j,port:J,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function ji(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,w)}applyActionCode(g){return function ym(y,f){return Yu.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return ha(this._delegate,g)}confirmPasswordReset(g,w){return function Bd(y,f,g){return Mo.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var A=this;return(0,d.Z)(function*(){return pi(A._delegate,function jd(y,f,g){return Za.apply(this,arguments)}(A._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Wy(y,f){return Jf.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function os(y,f){const g=Ao.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,d.Z)(function*(){mu(Ip(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function Ta(y,f){return Uo.apply(this,arguments)}(g._delegate,jo);return w?pi(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function dv(y,f){Rn(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,w,A){const{next:R,error:j,complete:J}=wv(g,w,A);return this._delegate.onAuthStateChanged(R,j,J)}onIdTokenChanged(g,w,A){const{next:R,error:j,complete:J}=wv(g,w,A);return this._delegate.onIdTokenChanged(R,j,J)}sendSignInLinkToEmail(g,w){return function Xu(y,f,g){return In.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function Ku(y,f,g){return Ro.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,d.Z)(function*(){let A;switch(function mb(y,f){wl(Object.values(Ki).includes(f),y,"invalid-persistence-type"),(0,O.b$)()?wl(f!==Ki.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?wl(f===Ki.NONE,y,"unsupported-persistence-type"):Cp()?wl(f===Ki.NONE||f===Ki.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):wl(f===Ki.NONE||Fm(),y,"unsupported-persistence-type")}(w._delegate,g),g){case Ki.SESSION:A=pr;break;case Ki.LOCAL:A=(yield nn(xs)._isAvailable())?xs:tu;break;case Ki.NONE:A=vn;break;default:return an("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return pi(this._delegate,function Zu(y){return Ga.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return pi(this._delegate,gc(this._delegate,g))}signInWithCustomToken(g){return pi(this._delegate,function $i(y,f){return yc.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return pi(this._delegate,function Yf(y,f,g){return gc((0,O.m9)(y),So.credential(f,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return pi(this._delegate,function Nn(y,f,g){return Ka.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return gu(this._delegate,function Rs(y,f,g){return ul.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,d.Z)(function*(){return mu(Ip(),w._delegate,"operation-not-supported-in-this-environment"),pi(w._delegate,function $t(y,f,g){return It.apply(this,arguments)}(w._delegate,g,jo))})()}signInWithRedirect(g){var w=this;return(0,d.Z)(function*(){return mu(Ip(),w._delegate,"operation-not-supported-in-this-environment"),yield gh(w._delegate),function Ky(y,f,g){return function db(y,f,g){return Xd.apply(this,arguments)}(y,f,g)}(w._delegate,g,jo)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function wc(y,f){return Ju.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ki,y})();function wv(y,f,g){let w=y;"function"!=typeof y&&({next:w,error:f,complete:g}=y);const A=w;return{next:j=>A(j&&Fs.getOrCreate(j)),error:f,complete:g}}function _u(y,f){const g=function Os(y,f){const g=Lm();if(!g)return[];const w=Ar(Dp,y,f);switch(g.getItem(w)){case Ki.NONE:return[vn];case Ki.LOCAL:return[xs,pr];case Ki.SESSION:return[pr];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(xs)&&g.push(xs),"undefined"!=typeof window)for(const w of[tu,pr])g.includes(w)||g.push(w);return g.includes(vn)||g.push(vn),g}class Uc{constructor(){this.providerId="phone",this._delegate=new T(vv(Y.Z.auth()))}static credential(f,g){return T.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Uc.PHONE_SIGN_IN_METHOD=T.PHONE_SIGN_IN_METHOD,Uc.PROVIDER_ID=T.PROVIDER_ID;const Um=Ae;class Ri{constructor(f,g,w=Y.Z.app()){var A;Um(null===(A=w.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Wi(f,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function mh(y){y.INTERNAL.registerComponent(new de.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new xp(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:So,FacebookAuthProvider:Wu,GithubAuthProvider:An,GoogleAuthProvider:$a,OAuthProvider:Mn,SAMLAuthProvider:Ds,PhoneAuthProvider:Uc,PhoneMultiFactorGenerator:iv,RecaptchaVerifier:Ri,TwitterAuthProvider:li,Auth:xp,AuthCredential:sa,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.11")}(Y.Z)},8306:(ut,we,F)=>{F.d(we,{y:()=>q});var d=F(930),Y=F(727),O=F(8822),se=F(4671);var oe=F(2416),ue=F(576),pe=F(2806);let q=(()=>{class Te{constructor(Ve){Ve&&(this._subscribe=Ve)}lift(Ve){const Fe=new Te;return Fe.source=this,Fe.operator=Ve,Fe}subscribe(Ve,Fe,X){const De=function $e(Te){return Te&&Te instanceof d.Lv||function te(Te){return Te&&(0,ue.m)(Te.next)&&(0,ue.m)(Te.error)&&(0,ue.m)(Te.complete)}(Te)&&(0,Y.Nn)(Te)}(Ve)?Ve:new d.Hp(Ve,Fe,X);return(0,pe.x)(()=>{const{operator:Le,source:Ne}=this;De.add(Le?Le.call(De,Ne):Ne?this._subscribe(De):this._trySubscribe(De))}),De}_trySubscribe(Ve){try{return this._subscribe(Ve)}catch(Fe){Ve.error(Fe)}}forEach(Ve,Fe){return new(Fe=W(Fe))((X,De)=>{let Le;Le=this.subscribe(Ne=>{try{Ve(Ne)}catch(ot){De(ot),null==Le||Le.unsubscribe()}},De,X)})}_subscribe(Ve){var Fe;return null===(Fe=this.source)||void 0===Fe?void 0:Fe.subscribe(Ve)}[O.L](){return this}pipe(...Ve){return function ye(Te){return 0===Te.length?se.y:1===Te.length?Te[0]:function(Ve){return Te.reduce((Fe,X)=>X(Fe),Ve)}}(Ve)(this)}toPromise(Ve){return new(Ve=W(Ve))((Fe,X)=>{let De;this.subscribe(Le=>De=Le,Le=>X(Le),()=>Fe(De))})}}return Te.create=Ge=>new Te(Ge),Te})();function W(Te){var Ge;return null!==(Ge=null!=Te?Te:oe.v.Promise)&&void 0!==Ge?Ge:Promise}},7579:(ut,we,F)=>{F.d(we,{x:()=>oe});var d=F(8306),Y=F(727);const se=(0,F(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=F(8737),ye=F(2806);let oe=(()=>{class pe extends d.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const te=new ue(this,this);return te.operator=W,te}_throwIfClosed(){if(this.closed)throw new se}next(W){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const te=this.observers.slice();for(const $e of te)$e.next(W)}})}error(W){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:te}=this;for(;te.length;)te.shift().error(W)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:te,isStopped:$e,observers:Te}=this;return te||$e?Y.Lc:(Te.push(W),new Y.w0(()=>(0,re.P)(Te,W)))}_checkFinalizedStatuses(W){const{hasError:te,thrownError:$e,isStopped:Te}=this;te?W.error($e):Te&&W.complete()}asObservable(){const W=new d.y;return W.source=this,W}}return pe.create=(q,W)=>new ue(q,W),pe})();class ue extends oe{constructor(q,W){super(),this.destination=q,this.source=W}next(q){var W,te;null===(te=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===te||te.call(W,q)}error(q){var W,te;null===(te=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===te||te.call(W,q)}complete(){var q,W;null===(W=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===W||W.call(q)}_subscribe(q){var W,te;return null!==(te=null===(W=this.source)||void 0===W?void 0:W.subscribe(q))&&void 0!==te?te:Y.Lc}}},930:(ut,we,F)=>{F.d(we,{Hp:()=>$e,Lv:()=>te});var d=F(576),Y=F(727),O=F(2416),se=F(7849),re=F(5032);const ye=pe("C",void 0,void 0);function pe(X,De,Le){return{kind:X,value:De,error:Le}}var q=F(3410),W=F(2806);class te extends Y.w0{constructor(De){super(),this.isStopped=!1,De?(this.destination=De,(0,Y.Nn)(De)&&De.add(this)):this.destination=Fe}static create(De,Le,Ne){return new $e(De,Le,Ne)}next(De){this.isStopped?Ve(function ue(X){return pe("N",X,void 0)}(De),this):this._next(De)}error(De){this.isStopped?Ve(function oe(X){return pe("E",void 0,X)}(De),this):(this.isStopped=!0,this._error(De))}complete(){this.isStopped?Ve(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(De){this.destination.next(De)}_error(De){try{this.destination.error(De)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class $e extends te{constructor(De,Le,Ne){let ot;if(super(),(0,d.m)(De))ot=De;else if(De){let Re;({next:ot,error:Le,complete:Ne}=De),this&&O.v.useDeprecatedNextContext?(Re=Object.create(De),Re.unsubscribe=()=>this.unsubscribe()):Re=De,ot=null==ot?void 0:ot.bind(Re),Le=null==Le?void 0:Le.bind(Re),Ne=null==Ne?void 0:Ne.bind(Re)}this.destination={next:ot?Te(ot):re.Z,error:Te(null!=Le?Le:Ge),complete:Ne?Te(Ne):re.Z}}}function Te(X,De){return(...Le)=>{try{X(...Le)}catch(Ne){O.v.useDeprecatedSynchronousErrorHandling?(0,W.O)(Ne):(0,se.h)(Ne)}}}function Ge(X){throw X}function Ve(X,De){const{onStoppedNotification:Le}=O.v;Le&&q.z.setTimeout(()=>Le(X,De))}const Fe={closed:!0,next:re.Z,error:Ge,complete:re.Z}},727:(ut,we,F)=>{F.d(we,{Lc:()=>ye,w0:()=>re,Nn:()=>oe});var d=F(576);const O=(0,F(3888).d)(pe=>function(W){pe(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((te,$e)=>`${$e+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var se=F(8737);class re{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const Te of W)Te.remove(this);else W.remove(this);const{initialTeardown:te}=this;if((0,d.m)(te))try{te()}catch(Te){q=Te instanceof O?Te.errors:[Te]}const{_teardowns:$e}=this;if($e){this._teardowns=null;for(const Te of $e)try{ue(Te)}catch(Ge){q=null!=q?q:[],Ge instanceof O?q=[...q,...Ge.errors]:q.push(Ge)}}if(q)throw new O(q)}}add(q){var W;if(q&&q!==this)if(this.closed)ue(q);else{if(q instanceof re){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._teardowns=null!==(W=this._teardowns)&&void 0!==W?W:[]).push(q)}}_hasParent(q){const{_parentage:W}=this;return W===q||Array.isArray(W)&&W.includes(q)}_addParent(q){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(q),W):W?[W,q]:q}_removeParent(q){const{_parentage:W}=this;W===q?this._parentage=null:Array.isArray(W)&&(0,se.P)(W,q)}remove(q){const{_teardowns:W}=this;W&&(0,se.P)(W,q),q instanceof re&&q._removeParent(this)}}re.EMPTY=(()=>{const pe=new re;return pe.closed=!0,pe})();const ye=re.EMPTY;function oe(pe){return pe instanceof re||pe&&"closed"in pe&&(0,d.m)(pe.remove)&&(0,d.m)(pe.add)&&(0,d.m)(pe.unsubscribe)}function ue(pe){(0,d.m)(pe)?pe():pe.unsubscribe()}},2416:(ut,we,F)=>{F.d(we,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ut,we,F)=>{F.d(we,{E:()=>Y});const Y=new(F(8306).y)(re=>re.complete())},8996:(ut,we,F)=>{F.d(we,{D:()=>ot});var d=F(8421),Y=F(5363),O=F(9468),ye=F(8306),ue=F(2202),pe=F(576),q=F(9672);function te(Re,We){if(!Re)throw new Error("Iterable cannot be null");return new ye.y(Qe=>{(0,q.f)(Qe,We,()=>{const ht=Re[Symbol.asyncIterator]();(0,q.f)(Qe,We,()=>{ht.next().then(ee=>{ee.done?Qe.complete():Qe.next(ee.value)})},0,!0)})})}var $e=F(3670),Te=F(8239),Ge=F(1144),Ve=F(6495),Fe=F(2206),X=F(4532),De=F(3260);function ot(Re,We){return We?function Ne(Re,We){if(null!=Re){if((0,$e.c)(Re))return function se(Re,We){return(0,d.Xf)(Re).pipe((0,O.R)(We),(0,Y.Q)(We))}(Re,We);if((0,Ge.z)(Re))return function oe(Re,We){return new ye.y(Qe=>{let ht=0;return We.schedule(function(){ht===Re.length?Qe.complete():(Qe.next(Re[ht++]),Qe.closed||this.schedule())})})}(Re,We);if((0,Te.t)(Re))return function re(Re,We){return(0,d.Xf)(Re).pipe((0,O.R)(We),(0,Y.Q)(We))}(Re,We);if((0,Fe.D)(Re))return te(Re,We);if((0,Ve.T)(Re))return function W(Re,We){return new ye.y(Qe=>{let ht;return(0,q.f)(Qe,We,()=>{ht=Re[ue.h](),(0,q.f)(Qe,We,()=>{let ee,ce;try{({value:ee,done:ce}=ht.next())}catch(_e){return void Qe.error(_e)}ce?Qe.complete():Qe.next(ee)},0,!0)}),()=>(0,pe.m)(null==ht?void 0:ht.return)&&ht.return()})}(Re,We);if((0,De.L)(Re))return function Le(Re,We){return te((0,De.Q)(Re),We)}(Re,We)}throw(0,X.z)(Re)}(Re,We):(0,d.Xf)(Re)}},8421:(ut,we,F)=>{F.d(we,{Xf:()=>$e});var d=F(5987),Y=F(1144),O=F(8239),se=F(8306),re=F(3670),ye=F(2206),oe=F(4532),ue=F(6495),pe=F(3260),q=F(576),W=F(7849),te=F(8822);function $e(Ne){if(Ne instanceof se.y)return Ne;if(null!=Ne){if((0,re.c)(Ne))return function Te(Ne){return new se.y(ot=>{const Re=Ne[te.L]();if((0,q.m)(Re.subscribe))return Re.subscribe(ot);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ne);if((0,Y.z)(Ne))return function Ge(Ne){return new se.y(ot=>{for(let Re=0;Re<Ne.length&&!ot.closed;Re++)ot.next(Ne[Re]);ot.complete()})}(Ne);if((0,O.t)(Ne))return function Ve(Ne){return new se.y(ot=>{Ne.then(Re=>{ot.closed||(ot.next(Re),ot.complete())},Re=>ot.error(Re)).then(null,W.h)})}(Ne);if((0,ye.D)(Ne))return X(Ne);if((0,ue.T)(Ne))return function Fe(Ne){return new se.y(ot=>{for(const Re of Ne)if(ot.next(Re),ot.closed)return;ot.complete()})}(Ne);if((0,pe.L)(Ne))return function De(Ne){return X((0,pe.Q)(Ne))}(Ne)}throw(0,oe.z)(Ne)}function X(Ne){return new se.y(ot=>{(function Le(Ne,ot){var Re,We,Qe,ht;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Re=(0,d.KL)(Ne);!(We=yield Re.next()).done;)if(ot.next(We.value),ot.closed)return}catch(ee){Qe={error:ee}}finally{try{We&&!We.done&&(ht=Re.return)&&(yield ht.call(Re))}finally{if(Qe)throw Qe.error}}ot.complete()})})(Ne,ot).catch(Re=>ot.error(Re))})}},6451:(ut,we,F)=>{F.d(we,{T:()=>ye});var d=F(8189),Y=F(8421),O=F(515),se=F(3269),re=F(8996);function ye(...oe){const ue=(0,se.yG)(oe),pe=(0,se._6)(oe,1/0),q=oe;return q.length?1===q.length?(0,Y.Xf)(q[0]):(0,d.J)(pe)((0,re.D)(q,ue)):O.E}},5403:(ut,we,F)=>{F.d(we,{Q:()=>Y});var d=F(930);class Y extends d.Lv{constructor(se,re,ye,oe,ue){super(se),this.onFinalize=ue,this._next=re?function(pe){try{re(pe)}catch(q){se.error(q)}}:super._next,this._error=oe?function(pe){try{oe(pe)}catch(q){se.error(q)}finally{this.unsubscribe()}}:super._error,this._complete=ye?function(){try{ye()}catch(pe){se.error(pe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;const{closed:re}=this;super.unsubscribe(),!re&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}},4004:(ut,we,F)=>{F.d(we,{U:()=>O});var d=F(4482),Y=F(5403);function O(se,re){return(0,d.e)((ye,oe)=>{let ue=0;ye.subscribe(new Y.Q(oe,pe=>{oe.next(se.call(re,pe,ue++))}))})}},8189:(ut,we,F)=>{F.d(we,{J:()=>O});var d=F(5577),Y=F(4671);function O(se=1/0){return(0,d.z)(Y.y,se)}},5577:(ut,we,F)=>{F.d(we,{z:()=>ue});var d=F(4004),Y=F(8421),O=F(4482),se=F(9672),re=F(5403),oe=F(576);function ue(pe,q,W=1/0){return(0,oe.m)(q)?ue((te,$e)=>(0,d.U)((Te,Ge)=>q(te,Te,$e,Ge))((0,Y.Xf)(pe(te,$e))),W):("number"==typeof q&&(W=q),(0,O.e)((te,$e)=>function ye(pe,q,W,te,$e,Te,Ge,Ve){const Fe=[];let X=0,De=0,Le=!1;const Ne=()=>{Le&&!Fe.length&&!X&&q.complete()},ot=We=>X<te?Re(We):Fe.push(We),Re=We=>{Te&&q.next(We),X++;let Qe=!1;(0,Y.Xf)(W(We,De++)).subscribe(new re.Q(q,ht=>{null==$e||$e(ht),Te?ot(ht):q.next(ht)},()=>{Qe=!0},void 0,()=>{if(Qe)try{for(X--;Fe.length&&X<te;){const ht=Fe.shift();Ge?(0,se.f)(q,Ge,()=>Re(ht)):Re(ht)}Ne()}catch(ht){q.error(ht)}}))};return pe.subscribe(new re.Q(q,ot,()=>{Le=!0,Ne()})),()=>{null==Ve||Ve()}}(te,$e,pe,W)))}},5363:(ut,we,F)=>{F.d(we,{Q:()=>se});var d=F(9672),Y=F(4482),O=F(5403);function se(re,ye=0){return(0,Y.e)((oe,ue)=>{oe.subscribe(new O.Q(ue,pe=>(0,d.f)(ue,re,()=>ue.next(pe),ye),()=>(0,d.f)(ue,re,()=>ue.complete(),ye),pe=>(0,d.f)(ue,re,()=>ue.error(pe),ye)))})}},3099:(ut,we,F)=>{F.d(we,{B:()=>ye});var d=F(8996),Y=F(5698),O=F(7579),se=F(930),re=F(4482);function ye(ue={}){const{connector:pe=(()=>new O.x),resetOnError:q=!0,resetOnComplete:W=!0,resetOnRefCountZero:te=!0}=ue;return $e=>{let Te=null,Ge=null,Ve=null,Fe=0,X=!1,De=!1;const Le=()=>{null==Ge||Ge.unsubscribe(),Ge=null},Ne=()=>{Le(),Te=Ve=null,X=De=!1},ot=()=>{const Re=Te;Ne(),null==Re||Re.unsubscribe()};return(0,re.e)((Re,We)=>{Fe++,!De&&!X&&Le();const Qe=Ve=null!=Ve?Ve:pe();We.add(()=>{Fe--,0===Fe&&!De&&!X&&(Ge=oe(ot,te))}),Qe.subscribe(We),Te||(Te=new se.Hp({next:ht=>Qe.next(ht),error:ht=>{De=!0,Le(),Ge=oe(Ne,q,ht),Qe.error(ht)},complete:()=>{X=!0,Le(),Ge=oe(Ne,W),Qe.complete()}}),(0,d.D)(Re).subscribe(Te))})($e)}}function oe(ue,pe,...q){return!0===pe?(ue(),null):!1===pe?null:pe(...q).pipe((0,Y.q)(1)).subscribe(()=>ue())}},9468:(ut,we,F)=>{F.d(we,{R:()=>Y});var d=F(4482);function Y(O,se=0){return(0,d.e)((re,ye)=>{ye.add(O.schedule(()=>re.subscribe(ye),se))})}},5698:(ut,we,F)=>{F.d(we,{q:()=>se});var d=F(515),Y=F(4482),O=F(5403);function se(re){return re<=0?()=>d.E:(0,Y.e)((ye,oe)=>{let ue=0;ye.subscribe(new O.Q(oe,pe=>{++ue<=re&&(oe.next(pe),re<=ue&&oe.complete())}))})}},8505:(ut,we,F)=>{F.d(we,{b:()=>re});var d=F(576),Y=F(4482),O=F(5403),se=F(4671);function re(ye,oe,ue){const pe=(0,d.m)(ye)||oe||ue?{next:ye,error:oe,complete:ue}:ye;return pe?(0,Y.e)((q,W)=>{var te;null===(te=pe.subscribe)||void 0===te||te.call(pe);let $e=!0;q.subscribe(new O.Q(W,Te=>{var Ge;null===(Ge=pe.next)||void 0===Ge||Ge.call(pe,Te),W.next(Te)},()=>{var Te;$e=!1,null===(Te=pe.complete)||void 0===Te||Te.call(pe),W.complete()},Te=>{var Ge;$e=!1,null===(Ge=pe.error)||void 0===Ge||Ge.call(pe,Te),W.error(Te)},()=>{var Te,Ge;$e&&(null===(Te=pe.unsubscribe)||void 0===Te||Te.call(pe)),null===(Ge=pe.finalize)||void 0===Ge||Ge.call(pe)}))}):se.y}},4408:(ut,we,F)=>{F.d(we,{o:()=>re});var d=F(727);class Y extends d.w0{constructor(oe,ue){super()}schedule(oe,ue=0){return this}}const O={setInterval(...ye){const{delegate:oe}=O;return((null==oe?void 0:oe.setInterval)||setInterval)(...ye)},clearInterval(ye){const{delegate:oe}=O;return((null==oe?void 0:oe.clearInterval)||clearInterval)(ye)},delegate:void 0};var se=F(8737);class re extends Y{constructor(oe,ue){super(oe,ue),this.scheduler=oe,this.work=ue,this.pending=!1}schedule(oe,ue=0){if(this.closed)return this;this.state=oe;const pe=this.id,q=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId(q,pe,ue)),this.pending=!0,this.delay=ue,this.id=this.id||this.requestAsyncId(q,this.id,ue),this}requestAsyncId(oe,ue,pe=0){return O.setInterval(oe.flush.bind(oe,this),pe)}recycleAsyncId(oe,ue,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return ue;O.clearInterval(ue)}execute(oe,ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(oe,ue);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,ue){let q,pe=!1;try{this.work(oe)}catch(W){pe=!0,q=W||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),q}unsubscribe(){if(!this.closed){const{id:oe,scheduler:ue}=this,{actions:pe}=ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(pe,this),null!=oe&&(this.id=this.recycleAsyncId(ue,oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(ut,we,F)=>{F.d(we,{v:()=>O});var d=F(6063);class Y{constructor(re,ye=Y.now){this.schedulerActionCtor=re,this.now=ye}schedule(re,ye=0,oe){return new this.schedulerActionCtor(this,re).schedule(oe,ye)}}Y.now=d.l.now;class O extends Y{constructor(re,ye=Y.now){super(re,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:ye}=this;if(this._active)return void ye.push(re);let oe;this._active=!0;do{if(oe=re.execute(re.state,re.delay))break}while(re=ye.shift());if(this._active=!1,oe){for(;re=ye.shift();)re.unsubscribe();throw oe}}}},4986:(ut,we,F)=>{F.d(we,{P:()=>se,z:()=>O});var d=F(4408);const O=new(F(7565).v)(d.o),se=O},6063:(ut,we,F)=>{F.d(we,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(ut,we,F)=>{F.d(we,{z:()=>d});const d={setTimeout(...Y){const{delegate:O}=d;return((null==O?void 0:O.setTimeout)||setTimeout)(...Y)},clearTimeout(Y){const{delegate:O}=d;return((null==O?void 0:O.clearTimeout)||clearTimeout)(Y)},delegate:void 0}},2202:(ut,we,F)=>{F.d(we,{h:()=>Y});const Y=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ut,we,F)=>{F.d(we,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ut,we,F)=>{F.d(we,{_6:()=>ye,jO:()=>se,yG:()=>re});var d=F(576),Y=F(3532);function O(oe){return oe[oe.length-1]}function se(oe){return(0,d.m)(O(oe))?oe.pop():void 0}function re(oe){return(0,Y.K)(O(oe))?oe.pop():void 0}function ye(oe,ue){return"number"==typeof O(oe)?oe.pop():ue}},8737:(ut,we,F)=>{function d(Y,O){if(Y){const se=Y.indexOf(O);0<=se&&Y.splice(se,1)}}F.d(we,{P:()=>d})},3888:(ut,we,F)=>{function d(Y){const se=Y(re=>{Error.call(re),re.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}F.d(we,{d:()=>d})},2806:(ut,we,F)=>{F.d(we,{O:()=>se,x:()=>O});var d=F(2416);let Y=null;function O(re){if(d.v.useDeprecatedSynchronousErrorHandling){const ye=!Y;if(ye&&(Y={errorThrown:!1,error:null}),re(),ye){const{errorThrown:oe,error:ue}=Y;if(Y=null,oe)throw ue}}else re()}function se(re){d.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=re)}},9672:(ut,we,F)=>{function d(Y,O,se,re=0,ye=!1){const oe=O.schedule(function(){se(),ye?Y.add(this.schedule(null,re)):this.unsubscribe()},re);if(Y.add(oe),!ye)return oe}F.d(we,{f:()=>d})},4671:(ut,we,F)=>{function d(Y){return Y}F.d(we,{y:()=>d})},1144:(ut,we,F)=>{F.d(we,{z:()=>d});const d=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(ut,we,F)=>{F.d(we,{D:()=>Y});var d=F(576);function Y(O){return Symbol.asyncIterator&&(0,d.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(ut,we,F)=>{function d(Y){return"function"==typeof Y}F.d(we,{m:()=>d})},3670:(ut,we,F)=>{F.d(we,{c:()=>O});var d=F(8822),Y=F(576);function O(se){return(0,Y.m)(se[d.L])}},6495:(ut,we,F)=>{F.d(we,{T:()=>O});var d=F(2202),Y=F(576);function O(se){return(0,Y.m)(null==se?void 0:se[d.h])}},8239:(ut,we,F)=>{F.d(we,{t:()=>Y});var d=F(576);function Y(O){return(0,d.m)(null==O?void 0:O.then)}},3260:(ut,we,F)=>{F.d(we,{L:()=>se,Q:()=>O});var d=F(5987),Y=F(576);function O(re){return(0,d.FC)(this,arguments,function*(){const oe=re.getReader();try{for(;;){const{value:ue,done:pe}=yield(0,d.qq)(oe.read());if(pe)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(ue)}}finally{oe.releaseLock()}})}function se(re){return(0,Y.m)(null==re?void 0:re.getReader)}},3532:(ut,we,F)=>{F.d(we,{K:()=>Y});var d=F(576);function Y(O){return O&&(0,d.m)(O.schedule)}},4482:(ut,we,F)=>{F.d(we,{A:()=>Y,e:()=>O});var d=F(576);function Y(se){return(0,d.m)(null==se?void 0:se.lift)}function O(se){return re=>{if(Y(re))return re.lift(function(ye){try{return se(ye,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ut,we,F)=>{function d(){}F.d(we,{Z:()=>d})},7849:(ut,we,F)=>{F.d(we,{h:()=>O});var d=F(2416),Y=F(3410);function O(se){Y.z.setTimeout(()=>{const{onUnhandledError:re}=d.v;if(!re)throw se;re(se)})}},4532:(ut,we,F)=>{function d(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(we,{z:()=>d})},5987:(ut,we,F)=>{function ue(ee,ce,_e,ve){return new(_e||(_e=Promise))(function(de,kt){function tn(St){try{Mt(ve.next(St))}catch(yt){kt(yt)}}function Xn(St){try{Mt(ve.throw(St))}catch(yt){kt(yt)}}function Mt(St){St.done?de(St.value):function Pe(de){return de instanceof _e?de:new _e(function(kt){kt(de)})}(St.value).then(tn,Xn)}Mt((ve=ve.apply(ee,ce||[])).next())})}function Fe(ee){return this instanceof Fe?(this.v=ee,this):new Fe(ee)}function X(ee,ce,_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,ve=_e.apply(ee,ce||[]),de=[];return Pe={},kt("next"),kt("throw"),kt("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe;function kt(_n){ve[_n]&&(Pe[_n]=function(ns){return new Promise(function(zr,yn){de.push([_n,ns,zr,yn])>1||tn(_n,ns)})})}function tn(_n,ns){try{!function Xn(_n){_n.value instanceof Fe?Promise.resolve(_n.value.v).then(Mt,St):yt(de[0][2],_n)}(ve[_n](ns))}catch(zr){yt(de[0][3],zr)}}function Mt(_n){tn("next",_n)}function St(_n){tn("throw",_n)}function yt(_n,ns){_n(ns),de.shift(),de.length&&tn(de[0][0],de[0][1])}}function Le(ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _e,ce=ee[Symbol.asyncIterator];return ce?ce.call(ee):(ee=function te(ee){var ce="function"==typeof Symbol&&Symbol.iterator,_e=ce&&ee[ce],ve=0;if(_e)return _e.call(ee);if(ee&&"number"==typeof ee.length)return{next:function(){return ee&&ve>=ee.length&&(ee=void 0),{value:ee&&ee[ve++],done:!ee}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(ee),_e={},ve("next"),ve("throw"),ve("return"),_e[Symbol.asyncIterator]=function(){return this},_e);function ve(de){_e[de]=ee[de]&&function(kt){return new Promise(function(tn,Xn){!function Pe(de,kt,tn,Xn){Promise.resolve(Xn).then(function(Mt){de({value:Mt,done:tn})},kt)}(tn,Xn,(kt=ee[de](kt)).done,kt.value)})}}}F.d(we,{FC:()=>X,KL:()=>Le,mG:()=>ue,qq:()=>Fe})},5e3:(ut,we,F)=>{F.d(we,{$8M:()=>ru,$Z:()=>vC,AFp:()=>bd,ALo:()=>dw,AaK:()=>ue,BQk:()=>Wo,CHM:()=>no,CRH:()=>$_,CZH:()=>Kl,CqO:()=>g0,EJc:()=>ny,EpF:()=>Bh,F4k:()=>Be,FYo:()=>lf,FiY:()=>jr,G48:()=>vS,GfV:()=>cI,Gpc:()=>W,JOm:()=>lo,LFG:()=>ie,LSH:()=>uh,Lbi:()=>Fw,MAs:()=>ig,MGl:()=>ug,NdJ:()=>w_,O4$:()=>Ka,OlP:()=>dn,Oqu:()=>pg,PXZ:()=>yS,Q6J:()=>vr,QGY:()=>v_,Qsj:()=>cf,R0b:()=>_s,RDi:()=>Kf,Rgc:()=>gf,SBq:()=>uf,Sil:()=>$g,Suo:()=>NI,TTD:()=>To,TgZ:()=>Zn,VLi:()=>gS,W1O:()=>Fg,X6Q:()=>Zw,XFs:()=>gt,Xpm:()=>G,Y36:()=>xa,YKP:()=>ow,YNc:()=>c0,Yjl:()=>er,Yz7:()=>yn,ZZ4:()=>vy,_Bn:()=>Ag,_UZ:()=>y_,_Vd:()=>md,_c5:()=>MS,_uU:()=>A_,aQg:()=>zg,c2e:()=>$I,cJS:()=>Bn,cg1:()=>Jh,dDg:()=>sy,deG:()=>rp,dqk:()=>Et,eFA:()=>QI,ekj:()=>T_,g9A:()=>Cd,h0i:()=>Wr,hGG:()=>on,hij:()=>gg,iGM:()=>MI,ifc:()=>et,ip1:()=>Hg,kL8:()=>Fn,kcU:()=>Ya,lG2:()=>dr,lcZ:()=>CI,n5z:()=>qd,oAB:()=>Ue,oxw:()=>ad,q4F:()=>dI,qLn:()=>Lc,qOj:()=>c_,qZA:()=>Cu,sBO:()=>Kw,sIi:()=>Rl,s_b:()=>H_,soG:()=>yf,tBr:()=>Zi,tb:()=>Id,tp0:()=>Hr,uIk:()=>ng,vHH:()=>Ge,vpe:()=>go,wAp:()=>wt,xi3:()=>hw,xp6:()=>Eb,ynx:()=>p0,z2F:()=>Td,zSh:()=>wu,zs3:()=>Vs});var d=F(7579),Y=F(727),O=F(8306),se=F(6451),re=F(3099);function ye(s){for(let o in s)if(s[o]===ye)return o;throw Error("Could not find renamed property on target object.")}function oe(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function ue(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ue).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function pe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const q=ye({__forward_ref__:ye});function W(s){return s.__forward_ref__=W,s.toString=function(){return ue(this())},s}function te(s){return $e(s)?s():s}function $e(s){return"function"==typeof s&&s.hasOwnProperty(q)&&s.__forward_ref__===W}class Ge extends Error{constructor(o,u){super(function Fe(s,o){return`${s?`NG0${s}: `:""}${o}`}(o,u)),this.code=o}}function X(s){return"string"==typeof s?s:null==s?"":String(s)}function De(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():X(s)}function Re(s,o){const u=o?` in ${o}`:"";throw new Ge("201",`No provider for ${De(s)} found${u}`)}function St(s,o){null==s&&function yt(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function yn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Bn(s){return{providers:s.providers||[],imports:s.imports||[]}}function sr(s){return an(s,Ir)||an(s,cr)}function an(s,o){return s.hasOwnProperty(o)?s[o]:null}function Li(s){return s&&(s.hasOwnProperty(Ae)||s.hasOwnProperty(jn))?s[Ae]:null}const Ir=ye({\u0275prov:ye}),Ae=ye({\u0275inj:ye}),cr=ye({ngInjectableDef:ye}),jn=ye({ngInjectorDef:ye});var gt=(()=>((gt=gt||{})[gt.Default=0]="Default",gt[gt.Host=1]="Host",gt[gt.Self=2]="Self",gt[gt.SkipSelf=4]="SkipSelf",gt[gt.Optional=8]="Optional",gt))();let nn;function or(s){const o=nn;return nn=s,o}function bi(s,o,u){const c=sr(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&gt.Optional?null:void 0!==o?o:void Re(ue(s),"Injector")}function Tr(s){return{toString:s}.toString()}var Hn=(()=>((Hn=Hn||{})[Hn.OnPush=0]="OnPush",Hn[Hn.Default=1]="Default",Hn))(),et=(()=>{return(s=et||(et={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",et;var s})();const vt="undefined"!=typeof globalThis&&globalThis,Ks="undefined"!=typeof window&&window,Es="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Et=vt||"undefined"!=typeof global&&global||Ks||Es,sn={},bt=[],Ut=ye({\u0275cmp:ye}),Je=ye({\u0275dir:ye}),be=ye({\u0275pipe:ye}),at=ye({\u0275mod:ye}),dt=ye({\u0275fac:ye}),Bt=ye({__NG_ELEMENT_ID__:ye});let un=0;function G(s){return Tr(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Hn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||bt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||et.Emulated,id:"c",styles:s.styles||bt,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,m=s.features,v=s.pipes;return c.id+=un++,c.inputs=Jt(s.inputs,u),c.outputs=Jt(s.outputs),m&&m.forEach(b=>b(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(z):null,c.pipeDefs=v?()=>("function"==typeof v?v():v).map(he):null,c})}function z(s){return zt(s)||function Nt(s){return s[Je]||null}(s)}function he(s){return function $n(s){return s[be]||null}(s)}const Q={};function Ue(s){return Tr(()=>{const o={type:s.type,bootstrap:s.bootstrap||bt,declarations:s.declarations||bt,imports:s.imports||bt,exports:s.exports||bt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Q[s.id]=s.type),o})}function Jt(s,o){if(null==s)return sn;const u={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),u[h]=c,o&&(o[h]=m)}return u}const dr=G;function er(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function zt(s){return s[Ut]||null}function Gn(s,o){const u=s[at]||null;if(!u&&!0===o)throw new Error(`Type ${ue(s)} does not have '\u0275mod' property.`);return u}function rs(s){return Array.isArray(s)&&"object"==typeof s[1]}function is(s){return Array.isArray(s)&&!0===s[1]}function Rn(s){return 0!=(8&s.flags)}function Ba(s){return 2==(2&s.flags)}function $u(s){return 1==(1&s.flags)}function Ti(s){return null!==s.template}function Hf(s){return 0!=(512&s[2])}function Is(s,o){return s.hasOwnProperty(dt)?s[dt]:null}class qu{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function To(){return aa}function aa(s){return s.type.prototype.ngOnChanges&&(s.setInput=Vd),Xs}function Xs(){const s=nr(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===sn)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Vd(s,o,u,c){const h=nr(s)||function zf(s,o){return s[eo]=o}(s,{previous:sn,current:null}),m=h.current||(h.current={}),v=h.previous,b=this.declaredInputs[u],C=v[b];m[b]=new qu(C&&C.currentValue,o,v===sn),s[c]=o}To.ngInherit=!0;const eo="__ngSimpleChanges__";function nr(s){return s[eo]||null}const Zf="http://www.w3.org/2000/svg";let Ud;function Kf(s){Ud=s}function Cn(s){return!!s.listen}const cc={createRenderer:(s,o)=>function Ha(){return void 0!==Ud?Ud:"undefined"!=typeof document?document:void 0}()};function Ln(s){for(;Array.isArray(s);)s=s[0];return s}function Ts(s,o){return Ln(o[s])}function Mn(s,o){return Ln(o[s.index])}function $a(s,o){return s.data[o]}function An(s,o){return s[o]}function ui(s,o){const u=o[s];return rs(u)?u:u[0]}function Hi(s){return 4==(4&s[2])}function dc(s){return 128==(128&s[2])}function li(s,o){return null==o?null:s[o]}function ua(s){s[18]=0}function to(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const tt={lFrame:wc(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function la(){return tt.bindingsEnabled}function Ie(){return tt.lFrame.lView}function jt(){return tt.lFrame.tView}function no(s){return tt.lFrame.contextLView=s,s[8]}function bn(){let s=pc();for(;null!==s&&64===s.type;)s=s.parent;return s}function pc(){return tt.lFrame.currentTNode}function Kr(s,o){const u=tt.lFrame;u.currentTNode=s,u.isParent=o}function Wa(){return tt.lFrame.isParent}function ca(){tt.lFrame.isParent=!1}function za(){return tt.isInCheckNoChangesMode}function ro(s){tt.isInCheckNoChangesMode=s}function Rr(){const s=tt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function As(){return tt.lFrame.bindingIndex++}function vc(s,o){const u=tt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Ku(o)}function Ku(s){tt.lFrame.currentDirectiveIndex=s}function Bd(){return tt.lFrame.currentQueryIndex}function Mo(s){tt.lFrame.currentQueryIndex=s}function ym(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Yu(s,o,u){if(u&gt.SkipSelf){let h=o,m=s;for(;!(h=h.parent,null!==h||u&gt.Host||(h=ym(m),null===h||(m=m[15],10&h.type))););if(null===h)return!1;o=h,s=m}const c=tt.lFrame=Qu();return c.currentTNode=o,c.lView=s,!0}function ha(s){const o=Qu(),u=s[1];tt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Qu(){const s=tt.lFrame,o=null===s?null:s.child;return null===o?wc(s):o}function wc(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Ju(){const s=tt.lFrame;return tt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const jd=Ju;function Za(){const s=Ju();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function In(){return tt.lFrame.selectedIndex}function os(s){tt.lFrame.selectedIndex=s}function Nn(){const s=tt.lFrame;return $a(s.tView,s.selectedIndex)}function Ka(){tt.lFrame.currentNamespace=Zf}function Ya(){!function Wy(){tt.lFrame.currentNamespace=null}()}function Qa(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const m=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:b,ngAfterViewInit:C,ngAfterViewChecked:x,ngOnDestroy:M}=m;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),b&&((s.contentHooks||(s.contentHooks=[])).push(u,b),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,b)),C&&(s.viewHooks||(s.viewHooks=[])).push(-u,C),x&&((s.viewHooks||(s.viewHooks=[])).push(u,x),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,x)),null!=M&&(s.destroyHooks||(s.destroyHooks=[])).push(u,M)}}function tl(s,o,u){nl(s,o,3,u)}function Ja(s,o,u,c){(3&s[2])===u&&nl(s,o,u,c)}function Hd(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function nl(s,o,u,c){const m=null!=c?c:-1,v=o.length-1;let b=0;for(let C=void 0!==c?65535&s[18]:0;C<v;C++)if("number"==typeof o[C+1]){if(b=o[C],null!=c&&b>=c)break}else o[C]<0&&(s[18]+=65536),(b<m||-1==m)&&(hr(s,u,o,C),s[18]=(4294901760&s[18])+C+2),C++}function hr(s,o,u,c){const h=u[c]<0,m=u[c+1],b=s[h?-u[c]:u[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{m.call(b)}finally{}}}else try{m.call(b)}finally{}}class rl{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function cn(s,o,u){const c=Cn(s);let h=0;for(;h<u.length;){const m=u[h];if("number"==typeof m){if(0!==m)break;h++;const v=u[h++],b=u[h++],C=u[h++];c?s.setAttribute(o,b,C,v):o.setAttributeNS(v,b,C)}else{const v=m,b=u[++h];ft(v)?c&&s.setProperty(o,v,b):c?s.setAttribute(o,v,b):o.setAttribute(v,b),h++}}return h}function Wn(s){return 3===s||4===s||6===s}function ft(s){return 64===s.charCodeAt(0)}function Gi(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?u=h:0===u||Di(s,u,h,null,-1===u||2===u?o[++c]:null)}}return s}function Di(s,o,u,c,h){let m=0,v=s.length;if(-1===o)v=-1;else for(;m<s.length;){const b=s[m++];if("number"==typeof b){if(b===o){v=-1;break}if(b>o){v=m-1;break}}}for(;m<s.length;){const b=s[m];if("number"==typeof b)break;if(b===u){if(null===c)return void(null!==h&&(s[m+1]=h));if(c===s[m+1])return void(s[m+2]=h)}m++,null!==c&&m++,null!==h&&m++}-1!==v&&(s.splice(v,0,o),m=v+1),s.splice(m++,0,u),null!==c&&s.splice(m++,0,c),null!==h&&s.splice(m++,0,h)}function fr(s){return-1!==s}function Xa(s){return 32767&s}function Po(s,o){let u=function Em(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Gd=!0;function Ss(s){const o=Gd;return Gd=s,o}let tp=0;function fa(s,o){const u=Pn(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,so(c.data,s),so(o,null),so(c.blueprint,null));const h=pa(s,o),m=s.injectorIndex;if(fr(h)){const v=Xa(h),b=Po(h,o),C=b[1].data;for(let x=0;x<8;x++)o[m+x]=b[v+x]|C[v+x]}return o[m+8]=h,m}function so(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Pn(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function pa(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,h=o;for(;null!==h;){const m=h[1],v=m.type;if(c=2===v?m.declTNode:1===v?h[6]:null,null===c)return-1;if(u++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function Oo(s,o,u){!function np(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Bt)&&(c=u[Bt]),null==c&&(c=u[Bt]=tp++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function il(s,o,u){if(u&gt.Optional)return s;Re(o,"NodeInjector")}function Ec(s,o,u,c){if(u&gt.Optional&&void 0===c&&(c=null),0==(u&(gt.Self|gt.Host))){const h=s[9],m=or(void 0);try{return h?h.get(o,c,u&gt.Optional):bi(o,c,u&gt.Optional)}finally{or(m)}}return il(c,o,u)}function oo(s,o,u,c=gt.Default,h){if(null!==s){const m=function ma(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Bt)?s[Bt]:void 0;return"number"==typeof o?o>=0?255&o:tu:o}(u);if("function"==typeof m){if(!Yu(o,s,c))return c&gt.Host?il(h,u,c):Ec(o,u,c,h);try{const v=m(c);if(null!=v||c&gt.Optional)return v;Re(u)}finally{jd()}}else if("number"==typeof m){let v=null,b=Pn(s,o),C=-1,x=c&gt.Host?o[16][6]:null;for((-1===b||c&gt.SkipSelf)&&(C=-1===b?pa(s,o):o[b+8],-1!==C&&gr(c,!1)?(v=o[1],b=Xa(C),o=Po(C,o)):b=-1);-1!==b;){const M=o[1];if(Fo(m,b,M.data)){const L=ga(b,o,u,v,c,x);if(L!==eu)return L}C=o[b+8],-1!==C&&gr(c,o[1].data[b+8]===x)&&Fo(m,b,o)?(v=M,b=Xa(C),o=Po(C,o)):b=-1}}}return Ec(o,u,c,h)}const eu={};function tu(){return new gn(bn(),Ie())}function ga(s,o,u,c,h,m){const v=o[1],b=v.data[s+8],M=pr(b,v,u,null==c?Ba(b)&&Gd:c!=v&&0!=(3&b.type),h&gt.Host&&m===b);return null!==M?nu(o,v,M,b):eu}function pr(s,o,u,c,h){const m=s.providerIndexes,v=o.data,b=1048575&m,C=s.directiveStart,M=m>>20,$=h?b+M:s.directiveEnd;for(let K=c?b:b+M;K<$;K++){const me=v[K];if(K<C&&u===me||K>=C&&me.type===u)return K}if(h){const K=v[C];if(K&&Ti(K)&&K.type===u)return C}return null}function nu(s,o,u,c){let h=s[u];const m=o.data;if(function vm(s){return s instanceof rl}(h)){const v=h;v.resolving&&function Le(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ge("200",`Circular dependency in DI detected for ${s}${u}`)}(De(m[u]));const b=Ss(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?or(v.injectImpl):null;Yu(s,c,gt.Default);try{h=s[u]=v.factory(void 0,m,s,c),o.firstCreatePass&&u>=c.directiveStart&&function el(s,o,u){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:m}=o.type.prototype;if(c){const v=aa(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,m))}(u,m[u],o)}finally{null!==C&&or(C),Ss(b),v.resolving=!1,jd()}}return h}function Fo(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function gr(s,o){return!(s&gt.Self||s&gt.Host&&o)}class gn{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return oo(this._tNode,this._lView,o,c,u)}}function qd(s){return Tr(()=>{const o=s.prototype.constructor,u=o[dt]||Tn(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const m=h[dt]||Tn(h);if(m&&m!==u)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function Tn(s){return $e(s)?()=>{const o=Tn(te(s));return o&&o()}:Is(s)}function ru(s){return function us(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let h=0;for(;h<c;){const m=u[h];if(Wn(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<c&&"string"==typeof u[h];)h++;else{if(m===o)return u[h+1];h+=2}}}return null}(bn(),s)}const _a="__parameters__";function Sn(s,o,u){return Tr(()=>{const c=function Si(s){return function(...u){if(s){const c=s(...u);for(const h in c)this[h]=c[h]}}}(o);function h(...m){if(this instanceof h)return c.apply(this,m),this;const v=new h(...m);return b.annotation=v,b;function b(C,x,M){const L=C.hasOwnProperty(_a)?C[_a]:Object.defineProperty(C,_a,{value:[]})[_a];for(;L.length<=M;)L.push(null);return(L[M]=L[M]||[]).push(v),C}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class dn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=yn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const rp=new dn("AnalyzeForEntryComponents");function Qr(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),Qr(c,o)):o!==s&&o.push(c)}return o}function cs(s,o){s.forEach(u=>Array.isArray(u)?cs(u,o):o(u))}function sl(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function va(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Br(s,o,u){let c=ba(s,o);return c>=0?s[1|c]=u:(c=~c,function bc(s,o,u,c){let h=s.length;if(h==o)s.push(u,c);else if(1===h)s.push(c,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function Lo(s,o){const u=ba(s,o);if(u>=0)return s[1|u]}function ba(s,o){return function Yd(s,o,u){let c=0,h=s.length>>u;for(;h!==c;){const m=c+(h-c>>1),v=s[m<<u];if(o===v)return m<<u;v>o?h=m:c=m+1}return~(h<<u)}(s,o,1)}const ll={},Ia="__NG_DI_FLAG__",ao="ngTempTokenPath",Im=/\n/gm,T="__source",N=ye({provide:String,useValue:ye});let U;function Z(s){const o=U;return U=s,o}function ne(s,o=gt.Default){if(void 0===U)throw new Error("inject() must be called from an injection context");return null===U?bi(s,void 0,o):U.get(s,o&gt.Optional?null:void 0,o)}function ie(s,o=gt.Default){return(function ws(){return nn}()||ne)(te(s),o)}function pt(s){const o=[];for(let u=0;u<s.length;u++){const c=te(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Error("Arguments array must have arguments.");let h,m=gt.Default;for(let v=0;v<c.length;v++){const b=c[v],C=It(b);"number"==typeof C?-1===C?h=b.token:m|=C:h=b}o.push(ie(h,m))}else o.push(ie(c))}return o}function $t(s,o){return s[Ia]=o,s.prototype[Ia]=o,s}function It(s){return s[Ia]}const Zi=$t(Sn("Inject",s=>({token:s})),-1),jr=$t(Sn("Optional"),8),Hr=$t(Sn("SkipSelf"),4);class fp{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function uo(s){return s instanceof fp?s.changingThisBreaksApplicationSecurity:s}const Dm=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,gp=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var zn=(()=>((zn=zn||{})[zn.NONE=0]="NONE",zn[zn.HTML=1]="HTML",zn[zn.STYLE=2]="STYLE",zn[zn.SCRIPT=3]="SCRIPT",zn[zn.URL=4]="URL",zn[zn.RESOURCE_URL=5]="RESOURCE_URL",zn))();function uh(s){const o=function yl(){const s=Ie();return s&&s[12]}();return o?o.sanitize(zn.URL,s)||"":function xc(s,o){const u=function rh(s){return s instanceof fp&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?uo(s):function pl(s){return(s=String(s)).match(Dm)||s.match(gp)?s:"unsafe:"+s}(X(s))}const dh="__ngContext__";function Mr(s,o){s[dh]=o}function vp(s){const o=function Oc(s){return s[dh]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function bp(s){return s.ngOriginalError}function pv(s,...o){s.error(...o)}class Lc{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=function Om(s){return s&&s.ngErrorLogger||pv}(o);c(this._console,"ERROR",o),u&&c(this._console,"ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&bp(o);for(;u&&bp(u);)u=bp(u);return u||null}}const wl=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Et))();function Os(s){return s instanceof Function?s():s}var lo=(()=>((lo=lo||{})[lo.Important=1]="Important",lo[lo.DashCase=2]="DashCase",lo))();function Vc(s,o){return undefined(s,o)}function gu(s){const o=s[3];return is(o)?o[3]:o}function Fs(s){return xp(s[13])}function mu(s){return xp(s[4])}function xp(s){for(;null!==s&&!is(s);)s=s[4];return s}function _u(s,o,u,c,h){if(null!=c){let m,v=!1;is(c)?m=c:rs(c)&&(v=!0,c=c[0]);const b=Ln(c);0===s&&null!==u?null==h?Ho(o,u,b):On(o,u,b,h||null,!0):1===s&&null!==u?On(o,u,b,h||null,!0):2===s?function ND(s,o,u){const c=Bc(s,o);c&&function Mp(s,o,u,c){Cn(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}(o,b,v):3===s&&o.destroyNode(b),null!=m&&function Cv(s,o,u,c,h){const m=u[7];m!==Ln(u)&&_u(o,s,c,m,h);for(let b=10;b<u.length;b++){const C=u[b];yh(C[1],C,s,o,c,m)}}(o,s,m,u,h)}}function Rp(s,o,u){return Cn(s)?s.createElement(o,u):null===u?s.createElement(o):s.createElementNS(u,o)}function R(s,o){const u=s[9],c=u.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,to(h,-1)),u.splice(c,1)}function j(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const h=c[17];null!==h&&h!==s&&R(h,c),o>0&&(s[u-1][4]=c[4]);const m=va(s,10+o);!function mh(s,o){yh(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=m[19];null!==v&&v.detachView(m[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function J(s,o){if(!(256&o[2])){const u=o[11];Cn(u)&&u.destroyNode&&yh(s,o,u,3,null,null),function g(s){let o=s[13];if(!o)return Me(s[1],s);for(;o;){let u=null;if(rs(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)rs(o)&&Me(o[1],o),o=o[3];null===o&&(o=s),rs(o)&&Me(o[1],o),u=o&&o[4]}o=u}}(o)}}function Me(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function rt(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const h=o[u[c]];if(!(h instanceof rl)){const m=u[c+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const b=h[m[v]],C=m[v+1];try{C.call(b)}finally{}}else try{m.call(h)}finally{}}}}(s,o),function Se(s,o){const u=s.cleanup,c=o[7];let h=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const v=u[m+1],b="function"==typeof v?v(o):Ln(o[v]),C=c[h=u[m+2]],x=u[m+3];"boolean"==typeof x?b.removeEventListener(u[m],C,x):x>=0?c[h=x]():c[h=-x].unsubscribe(),m+=2}else{const v=c[h=u[m+1]];u[m].call(v)}if(null!==c){for(let m=h+1;m<c.length;m++)c[m]();o[7]=null}}(s,o),1===o[1].type&&Cn(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&is(o[3])){u!==o[3]&&R(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function Xe(s,o,u){return function Gt(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===et.None||h===et.Emulated)return null}return Mn(c,u)}(s,o.parent,u)}function On(s,o,u,c,h){Cn(s)?s.insertBefore(o,u,c,h):o.insertBefore(u,c,h)}function Ho(s,o,u){Cn(s)?s.appendChild(o,u):o.appendChild(u)}function bl(s,o,u,c,h){null!==c?On(s,o,u,c,h):Ho(s,o,u)}function Bc(s,o){return Cn(s)?s.parentNode(o):o.parentNode}let Pp=function Np(s,o,u){return 40&s.type?Mn(s,u):null};function _h(s,o,u,c){const h=Xe(s,c,o),m=o[11],b=function jc(s,o,u){return Pp(s,o,u)}(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(u))for(let C=0;C<u.length;C++)bl(m,h,u[C],b,!1);else bl(m,h,u,b,!1)}function Cl(s,o){if(null!==o){const u=o.type;if(3&u)return Mn(o,s);if(4&u)return Ev(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return Cl(s,c);{const h=s[o.index];return is(h)?Ev(-1,h):Ln(h)}}if(32&u)return Vc(o,s)()||Ln(s[o.index]);{const c=kp(s,o);return null!==c?Array.isArray(c)?c[0]:Cl(gu(s[16]),c):Cl(s,o.next)}}return null}function kp(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Ev(s,o){const u=10+s+1;if(u<o.length){const c=o[u],h=c[1].firstChild;if(null!==h)return Cl(c,h)}return o[7]}function bv(s,o,u,c,h,m,v){for(;null!=u;){const b=c[u.index],C=u.type;if(v&&0===o&&(b&&Mr(Ln(b),c),u.flags|=4),64!=(64&u.flags))if(8&C)bv(s,o,u.child,c,h,m,!1),_u(o,s,h,b,m);else if(32&C){const x=Vc(u,c);let M;for(;M=x();)_u(o,s,h,M,m);_u(o,s,h,b,m)}else 16&C?hn(s,o,c,u,h,m):_u(o,s,h,b,m);u=v?u.projectionNext:u.next}}function yh(s,o,u,c,h,m){bv(u,c,s.firstChild,o,h,m,!1)}function hn(s,o,u,c,h,m){const v=u[16],C=v[6].projection[c.projection];if(Array.isArray(C))for(let x=0;x<C.length;x++)_u(o,s,h,C[x],m);else bv(s,o,C,v[3],h,m,!0)}function vb(s,o,u){Cn(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function _r(s,o,u){Cn(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function PD(s,o,u){let c=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const m=o.length;if(h+m===c||s.charCodeAt(h+m)<=32)return h}u=h+1}}const ge="ng-template";function Yi(s,o,u){let c=0;for(;c<s.length;){let h=s[c++];if(u&&"class"===h){if(h=s[c],-1!==PD(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function co(s){return 4===s.type&&s.value!==ge}function $o(s,o,u){return o===(4!==s.type||u?s.value:ge)}function k(s,o,u){let c=4;const h=s.attrs||[],m=function Ot(s){for(let o=0;o<s.length;o++)if(Wn(s[o]))return o;return s.length}(h);let v=!1;for(let b=0;b<o.length;b++){const C=o[b];if("number"!=typeof C){if(!v)if(4&c){if(c=2|1&c,""!==C&&!$o(s,C,u)||""===C&&1===o.length){if(Go(c))return!1;v=!0}}else{const x=8&c?C:o[++b];if(8&c&&null!==s.attrs){if(!Yi(s.attrs,x,u)){if(Go(c))return!1;v=!0}continue}const L=yu(8&c?"class":C,h,co(s),u);if(-1===L){if(Go(c))return!1;v=!0;continue}if(""!==x){let $;$=L>m?"":h[L+1].toLowerCase();const K=8&c?$:null;if(K&&-1!==PD(K,x,0)||2&c&&x!==$){if(Go(c))return!1;v=!0}}}}else{if(!v&&!Go(c)&&!Go(C))return!1;if(v&&Go(C))continue;v=!1,c=C|1&c}}return Go(c)||v}function Go(s){return 0==(1&s)}function yu(s,o,u,c){if(null===o)return-1;let h=0;if(c||!u){let m=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)m=!0;else{if(1===v||2===v){let b=o[++h];for(;"string"==typeof b;)b=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=m?1:2}return-1}return function jm(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function nt(s,o,u=!1){for(let c=0;c<o.length;c++)if(k(s,o[c],u))return!0;return!1}function vh(s,o){return s?":not("+o.trim()+")":o}function kD(s){let o=s[0],u=1,c=2,h="",m=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&c){const b=s[++u];h+="["+v+(b.length>0?'="'+b+'"':"")+"]"}else 8&c?h+="."+v:4&c&&(h+=" "+v);else""!==h&&!Go(v)&&(o+=vh(m,h),h=""),c=v,m=m||!Go(c);u++}return""!==h&&(o+=vh(m,h)),o}const Lt={};function Eb(s){Jr(jt(),Ie(),In()+s,za())}function Jr(s,o,u,c){if(!c)if(3==(3&o[2])){const m=s.preOrderCheckHooks;null!==m&&tl(o,m,u)}else{const m=s.preOrderHooks;null!==m&&Ja(o,m,0,u)}os(u)}function Nr(s,o){return s<<17|o<<2}function Xr(s){return s>>17&32767}function Hm(s){return 2|s}function Da(s){return(131068&s)>>2}function Av(s,o){return-131069&s|o<<2}function Lp(s){return 1|s}function Fb(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const h=u[c],m=u[c+1];if(-1!==m){const v=s.data[m];Mo(h),v.contentQueries(2,o[m],m)}}}function Gc(s,o,u,c,h,m,v,b,C,x){const M=o.blueprint.slice();return M[0]=h,M[2]=140|c,ua(M),M[3]=M[15]=s,M[8]=u,M[10]=v||s&&s[10],M[11]=b||s&&s[11],M[12]=C||s&&s[12]||null,M[9]=x||s&&s[9]||null,M[6]=m,M[16]=2==o.type?s[16]:M,M}function qc(s,o,u,c,h){let m=s.data[o];if(null===m)m=function Lv(s,o,u,c,h){const m=pc(),v=Wa(),C=s.data[o]=function Uv(s,o,u,c,h,m){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,u,o,c,h);return null===s.firstChild&&(s.firstChild=C),null!==m&&(v?null==m.child&&null!==C.parent&&(m.child=C):null===m.next&&(m.next=C)),C}(s,o,u,c,h),function yc(){return tt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=u,m.value=c,m.attrs=h;const v=function ss(){const s=tt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return Kr(m,!0),m}function Il(s,o,u,c){if(0===u)return-1;const h=o.length;for(let m=0;m<u;m++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function Wc(s,o,u){ha(o);try{const c=s.viewQuery;null!==c&&t_(1,c,u);const h=s.template;null!==h&&ni(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Fb(s,o),s.staticViewQueries&&t_(2,s.viewQuery,u);const m=s.components;null!==m&&function Vb(s,o){for(let u=0;u<o.length;u++)zv(s,o[u])}(o,m)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Za()}}function Tl(s,o,u,c){const h=o[2];if(256==(256&h))return;ha(o);const m=za();try{ua(o),function _c(s){return tt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&ni(s,o,u,2,c);const v=3==(3&h);if(!m)if(v){const x=s.preOrderCheckHooks;null!==x&&tl(o,x,null)}else{const x=s.preOrderHooks;null!==x&&Ja(o,x,0,null),Hd(o,0)}if(function qp(s){for(let o=Fs(s);null!==o;o=mu(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const h=u[c],m=h[3];0==(1024&h[2])&&to(m,1),h[2]|=1024}}}(o),function Yb(s){for(let o=Fs(s);null!==o;o=mu(o))for(let u=10;u<o.length;u++){const c=o[u],h=c[1];dc(c)&&Tl(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&Fb(s,o),!m)if(v){const x=s.contentCheckHooks;null!==x&&tl(o,x)}else{const x=s.contentHooks;null!==x&&Ja(o,x,1),Hd(o,1)}!function Ob(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const h=u[c];if(h<0)os(~h);else{const m=h,v=u[++c],b=u[++c];vc(v,m),b(2,o[m])}}}finally{os(-1)}}(s,o);const b=s.components;null!==b&&function Lb(s,o){for(let u=0;u<o.length;u++)Wv(s,o[u])}(o,b);const C=s.viewQuery;if(null!==C&&t_(2,C,c),!m)if(v){const x=s.viewCheckHooks;null!==x&&tl(o,x)}else{const x=s.viewHooks;null!==x&&Ja(o,x,2),Hd(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),m||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,to(o[3],-1))}finally{Za()}}function ti(s,o,u,c){const h=o[10],m=!za(),v=Hi(o);try{m&&!v&&h.begin&&h.begin(),v&&Wc(s,o,c),Tl(s,o,u,c)}finally{m&&!v&&h.end&&h.end()}}function ni(s,o,u,c,h){const m=In(),v=2&c;try{os(-1),v&&o.length>20&&Jr(s,o,20,za()),u(c,h)}finally{os(m)}}function Hp(s,o,u){if(Rn(o)){const h=o.directiveEnd;for(let m=o.directiveStart;m<h;m++){const v=s.data[m];v.contentQueries&&v.contentQueries(1,u[m],m)}}}function $p(s,o,u){!la()||(function Ih(s,o,u,c){const h=u.directiveStart,m=u.directiveEnd;s.firstCreatePass||fa(u,o),Mr(c,o);const v=u.initialInputs;for(let b=h;b<m;b++){const C=s.data[b],x=Ti(C);x&&Xi(o,u,C);const M=nu(o,s,b,u);Mr(M,o),null!==v&&Qm(0,b-h,M,C,0,v),x&&(ui(u.index,o)[8]=M)}}(s,o,u,Mn(u,o)),128==(128&u.flags)&&function GD(s,o,u){const c=u.directiveStart,h=u.directiveEnd,v=u.index,b=function da(){return tt.lFrame.currentDirectiveIndex}();try{os(v);for(let C=c;C<h;C++){const x=s.data[C],M=o[C];Ku(C),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&Wb(x,M)}}finally{os(-1),Ku(b)}}(s,o,u))}function Vv(s,o,u=Mn){const c=o.localNames;if(null!==c){let h=o.index+1;for(let m=0;m<c.length;m+=2){const v=c[m+1],b=-1===v?u(o,s):s[v];s[h++]=b}}}function Ub(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Gp(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Gp(s,o,u,c,h,m,v,b,C,x){const M=20+c,L=M+h,$=function BD(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Lt);return u}(M,L),K="function"==typeof x?x():x;return $[1]={type:s,blueprint:$,template:u,queries:null,viewQuery:b,declTNode:o,data:$.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:K,incompleteFirstPass:!1}}function Hb(s,o,u,c){const h=Zv(o);null===u?h.push(c):(h.push(u),s.firstCreatePass&&Kp(s).push(c,h.length-1))}function Bv(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,h):u[c]=[o,h]}return u}function Ji(s,o,u,c,h,m,v,b){const C=Mn(o,u);let M,x=o.inputs;!b&&null!=x&&(M=x[c])?(n_(s,u,M,c,h),Ba(o)&&function jv(s,o){const u=ui(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function Zm(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=v?v(h,o.value||"",c):h,Cn(m)?m.setProperty(C,c,h):ft(c)||(C.setProperty?C.setProperty(c,h):C[c]=h))}function Ch(s,o,u,c){let h=!1;if(la()){const m=function zc(s,o,u){const c=s.directiveRegistry;let h=null;if(c)for(let m=0;m<c.length;m++){const v=c[m];nt(u,v.selectors,!1)&&(h||(h=[]),Oo(fa(u,o),s,v.type),Ti(v)?($v(s,u),h.unshift(v)):h.push(v))}return h}(s,o,u),v=null===c?null:{"":-1};if(null!==m){h=!0,Th(u,s.data.length,m.length);for(let M=0;M<m.length;M++){const L=m[M];L.providersResolver&&L.providersResolver(L)}let b=!1,C=!1,x=Il(s,o,m.length,null);for(let M=0;M<m.length;M++){const L=m[M];u.mergedAttrs=Gi(u.mergedAttrs,L.hostAttrs),Gv(s,u,o,x,L),zb(x,L,v),null!==L.contentQueries&&(u.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(u.flags|=128);const $=L.type.prototype;!b&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),b=!0),!C&&($.ngOnChanges||$.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),C=!0),x++}!function jD(s,o){const c=o.directiveEnd,h=s.data,m=o.attrs,v=[];let b=null,C=null;for(let x=o.directiveStart;x<c;x++){const M=h[x],L=M.inputs,$=null===m||co(o)?null:Zb(L,m);v.push($),b=Bv(L,x,b),C=Bv(M.outputs,x,C)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=16),b.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=b,o.outputs=C}(s,u)}v&&function Ym(s,o,u){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const m=u[o[h+1]];if(null==m)throw new Ge("301",`Export of name '${o[h+1]}' not found!`);c.push(o[h],m)}}}(u,c,v)}return u.mergedAttrs=Gi(u.mergedAttrs,u.attrs),h}function qb(s,o,u,c,h,m){const v=m.hostBindings;if(v){let b=s.hostBindingOpCodes;null===b&&(b=s.hostBindingOpCodes=[]);const C=~o.index;(function $D(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(b)!=C&&b.push(C),b.push(c,h,v)}}function Wb(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function $v(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function zb(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;Ti(o)&&(u[""]=s)}}function Th(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function Gv(s,o,u,c,h){s.data[c]=h;const m=h.factory||(h.factory=Is(h.type)),v=new rl(m,Ti(h),null);s.blueprint[c]=v,u[c]=v,qb(s,o,0,c,Il(s,u,h.hostVars,Lt),h)}function Xi(s,o,u){const c=Mn(o,s),h=Ub(u),m=s[10],v=Dl(s,Gc(s,h,null,u.onPush?64:16,c,o,m,m.createRenderer(c,u),null,null));s[o.index]=v}function qo(s,o,u,c,h,m){const v=Mn(s,o);!function Zc(s,o,u,c,h,m,v){if(null==m)Cn(s)?s.removeAttribute(o,h,u):o.removeAttribute(h);else{const b=null==v?X(m):v(m,c||"",h);Cn(s)?s.setAttribute(o,h,b,u):u?o.setAttributeNS(u,h,b):o.setAttribute(h,b)}}(o[11],v,m,s.value,u,c,h)}function Qm(s,o,u,c,h,m){const v=m[o];if(null!==v){const b=c.setInput;for(let C=0;C<v.length;){const x=v[C++],M=v[C++],L=v[C++];null!==b?c.setInput(u,L,x,M):u[M]=L}}}function Zb(s,o){let u=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===u&&(u=[]),u.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return u}function qv(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function Wv(s,o){const u=ui(o,s);if(dc(u)){const c=u[1];80&u[2]?Tl(c,u,c.template,u[8]):u[5]>0&&Wp(u)}}function Wp(s){for(let c=Fs(s);null!==c;c=mu(c))for(let h=10;h<c.length;h++){const m=c[h];if(1024&m[2]){const v=m[1];Tl(v,m,v.template,m[8])}else m[5]>0&&Wp(m)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const h=ui(u[c],s);dc(h)&&h[5]>0&&Wp(h)}}function zv(s,o){const u=ui(o,s),c=u[1];(function Jm(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),Wc(c,u,u[8])}function Dl(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Xm(s){for(;s;){s[2]|=64;const o=gu(s);if(Hf(s)&&!o)return s;s=o}return null}function Dh(s,o,u){const c=o[10];c.begin&&c.begin();try{Tl(s,o,s.template,u)}catch(h){throw Al(o,h),h}finally{c.end&&c.end()}}function e_(s){!function zp(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=vp(u),h=c[1];ti(h,c,h.template,u)}}(s[8])}function t_(s,o,u){Mo(0),o(s,u)}const Zp=(()=>Promise.resolve(null))();function Zv(s){return s[7]||(s[7]=[])}function Kp(s){return s.cleanup||(s.cleanup=[])}function Al(s,o){const u=s[9],c=u?u.get(Lc,null):null;c&&c.handleError(o)}function n_(s,o,u,c,h){for(let m=0;m<u.length;){const v=u[m++],b=u[m++],C=o[v],x=s.data[v];null!==x.setInput?x.setInput(C,h,c,b):C[b]=h}}function vu(s,o,u){const c=Ts(o,s);!function Um(s,o,u){Cn(s)?s.setValue(o,u):o.textContent=u}(s[11],c,u)}function Sh(s,o,u){let c=u?s.styles:null,h=u?s.classes:null,m=0;if(null!==o)for(let v=0;v<o.length;v++){const b=o[v];"number"==typeof b?m=b:1==m?h=pe(h,b):2==m&&(c=pe(c,b+": "+o[++v]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=h:s.classesWithoutHost=h}const r_=new dn("INJECTOR",-1);class Xb{get(o,u=ll){if(u===ll){const c=new Error(`NullInjectorError: No provider for ${ue(o)}!`);throw c.name="NullInjectorError",c}return u}}const wu=new dn("Set Injector scope."),Ls={},i_={};let Mh;function Yp(){return void 0===Mh&&(Mh=new Xb),Mh}function Yv(s,o=null,u=null,c){const h=Vn(s,o,u,c);return h._resolveInjectorDefTypes(),h}function Vn(s,o=null,u=null,c){return new s_(s,u,o||Yp(),c)}class s_{constructor(o,u,c,h=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];u&&cs(u,b=>this.processProvider(b,o,u)),cs([o],b=>this.processInjectorType(b,[],m)),this.records.set(r_,Ph(void 0,this));const v=this.records.get(wu);this.scope=null!=v?v.value:null,this.source=h||("object"==typeof o?null:ue(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=ll,c=gt.Default){this.assertNotDestroyed();const h=Z(this),m=or(void 0);try{if(!(c&gt.SkipSelf)){let b=this.records.get(o);if(void 0===b){const C=function eC(s){return"function"==typeof s||"object"==typeof s&&s instanceof dn}(o)&&sr(o);b=C&&this.injectableDefInScope(C)?Ph(Qv(o),Ls):null,this.records.set(o,b)}if(null!=b)return this.hydrate(o,b)}return(c&gt.Self?Yp():this.parent).get(o,u=c&gt.Optional&&u===ll?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[ao]=v[ao]||[]).unshift(ue(o)),h)throw v;return function fi(s,o,u,c){const h=s[ao];throw o[T]&&h.unshift(o[T]),s.message=function rr(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=ue(o);if(Array.isArray(o))h=o.map(ue).join(" -> ");else if("object"==typeof o){let m=[];for(let v in o)if(o.hasOwnProperty(v)){let b=o[v];m.push(v+":"+("string"==typeof b?JSON.stringify(b):ue(b)))}h=`{${m.join(", ")}}`}return`${u}${c?"("+c+")":""}[${h}]: ${s.replace(Im,"\n  ")}`}("\n"+s.message,h,u,c),s.ngTokenPath=h,s[ao]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{or(m),Z(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,h)=>o.push(ue(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(o,u,c){if(!(o=te(o)))return!1;let h=Li(o);const m=null==h&&o.ngModule||void 0,v=void 0===m?o:m,b=-1!==c.indexOf(v);if(void 0!==m&&(h=Li(m)),null==h)return!1;if(null!=h.imports&&!b){let M;c.push(v);try{cs(h.imports,L=>{this.processInjectorType(L,u,c)&&(void 0===M&&(M=[]),M.push(L))})}finally{}if(void 0!==M)for(let L=0;L<M.length;L++){const{ngModule:$,providers:K}=M[L];cs(K,me=>this.processProvider(me,$,K||bt))}}this.injectorDefTypes.add(v);const C=Is(v)||(()=>new v);this.records.set(v,Ph(C,Ls));const x=h.providers;if(null!=x&&!b){const M=o;cs(x,L=>this.processProvider(L,M,x))}return void 0!==m&&void 0!==o.providers}processProvider(o,u,c){let h=kh(o=te(o))?o:te(o&&o.provide);const m=function Qp(s,o,u){return Jv(s)?Ph(void 0,s.useValue):Ph(Nh(s),Ls)}(o);if(kh(o)||!0!==o.multi)this.records.get(h);else{let v=this.records.get(h);v||(v=Ph(void 0,Ls,!0),v.factory=()=>pt(v.multi),this.records.set(h,v)),h=o,v.multi.push(o)}this.records.set(h,m)}hydrate(o,u){return u.value===Ls&&(u.value=i_,u.value=u.factory()),"object"==typeof u.value&&u.value&&function Sl(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=te(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function Qv(s){const o=sr(s),u=null!==o?o.factory:Is(s);if(null!==u)return u;if(s instanceof dn)throw new Error(`Token ${ue(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function WD(s){const o=s.length;if(o>0){const c=function wa(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?");throw new Error(`Can't resolve all parameters for ${ue(s)}: (${c.join(", ")}).`)}const u=function xn(s){const o=s&&(s[Ir]||s[cr]);if(o){const u=function Xo(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Error("unreachable")}function Nh(s,o,u){let c;if(kh(s)){const h=te(s);return Is(h)||Qv(h)}if(Jv(s))c=()=>te(s.useValue);else if(function ZD(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...pt(s.deps||[]));else if(function zD(s){return!(!s||!s.useExisting)}(s))c=()=>ie(te(s.useExisting));else{const h=te(s&&(s.useClass||s.provide));if(!function Jp(s){return!!s.deps}(s))return Is(h)||Qv(h);c=()=>new h(...pt(s.deps))}return c}function Ph(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function Jv(s){return null!==s&&"object"==typeof s&&N in s}function kh(s){return"function"==typeof s}let Vs=(()=>{class s{static create(u,c){var h;if(Array.isArray(u))return Yv({name:""},c,u,"");{const m=null!==(h=u.name)&&void 0!==h?h:"";return Yv({name:m},u.parent,u.providers,m)}}}return s.THROW_IF_NOT_FOUND=ll,s.NULL=new Xb,s.\u0275prov=yn({token:s,providedIn:"any",factory:()=>ie(r_)}),s.__NG_ELEMENT_ID__=-1,s})();function eA(s,o){Qa(vp(s)[1],bn())}function c_(s){let o=function oC(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let h;if(Ti(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Error("Directives cannot inherit Components");h=o.\u0275dir}if(h){if(u){c.push(h);const v=s;v.inputs=d_(s.inputs),v.declaredInputs=d_(s.declaredInputs),v.outputs=d_(s.outputs);const b=h.hostBindings;b&&Eu(s,b);const C=h.viewQuery,x=h.contentQueries;if(C&&h_(s,C),x&&uC(s,x),oe(s.inputs,h.inputs),oe(s.declaredInputs,h.declaredInputs),oe(s.outputs,h.outputs),Ti(h)&&h.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let v=0;v<m.length;v++){const b=m[v];b&&b.ngInherit&&b(s),b===c_&&(u=!1)}}o=Object.getPrototypeOf(o)}!function aC(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=Gi(h.hostAttrs,u=Gi(u,h.hostAttrs))}}(c)}function d_(s){return s===sn?{}:s===bt?[]:s}function h_(s,o){const u=s.viewQuery;s.viewQuery=u?(c,h)=>{o(c,h),u(c,h)}:o}function uC(s,o){const u=s.contentQueries;s.contentQueries=u?(c,h,m)=>{o(c,h,m),u(c,h,m)}:o}function Eu(s,o){const u=s.hostBindings;s.hostBindings=u?(c,h)=>{o(c,h),u(c,h)}:o}let xl=null;function Yc(){if(!xl){const s=Et.Symbol;if(s&&s.iterator)xl=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(xl=c)}}}return xl}function Rl(s){return!!Fh(s)&&(Array.isArray(s)||!(s instanceof Map)&&Yc()in s)}function Fh(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Sa(s,o,u){return s[o]=u}function Pr(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function ng(s,o,u,c){const h=Ie();return Pr(h,As(),o)&&(jt(),qo(Nn(),h,s,o,u,c)),ng}function bu(s,o,u,c){return Pr(s,As(),u)?o+X(u)+c:Lt}function c0(s,o,u,c,h,m,v,b){const C=Ie(),x=jt(),M=s+20,L=x.firstCreatePass?function nA(s,o,u,c,h,m,v,b,C){const x=o.consts,M=qc(o,s,4,v||null,li(x,b));Ch(o,u,M,li(x,C)),Qa(o,M);const L=M.tViews=Gp(2,M,c,h,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,M),L.queries=o.queries.embeddedTView(M)),M}(M,x,C,o,u,c,h,m,v):x.data[M];Kr(L,!1);const $=C[11].createComment("");_h(x,C,$,L),Mr($,C),Dl(C,C[M]=qv($,C,$,L)),$u(L)&&$p(x,C,L),null!=v&&Vv(C,L,b)}function ig(s){return An(function mc(){return tt.lFrame.contextLView}(),20+s)}function xa(s,o=gt.Default){const u=Ie();return null===u?ie(s,o):oo(bn(),u,te(s),o)}function vC(){throw new Error("invalid")}function vr(s,o,u){const c=Ie();return Pr(c,As(),o)&&Ji(jt(),Nn(),c,s,o,c[11],u,!1),vr}function f0(s,o,u,c,h){const v=h?"class":"style";n_(s,u,o.inputs[v],v,c)}function Zn(s,o,u,c){const h=Ie(),m=jt(),v=20+s,b=h[11],C=h[v]=Rp(b,o,function Jf(){return tt.lFrame.currentNamespace}()),x=m.firstCreatePass?function kl(s,o,u,c,h,m,v){const b=o.consts,x=qc(o,s,2,h,li(b,m));return Ch(o,u,x,li(b,v)),null!==x.attrs&&Sh(x,x.attrs,!1),null!==x.mergedAttrs&&Sh(x,x.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,x),x}(v,m,h,0,o,u,c):m.data[v];Kr(x,!0);const M=x.mergedAttrs;null!==M&&cn(b,C,M);const L=x.classes;null!==L&&_r(b,C,L);const $=x.styles;null!==$&&vb(b,C,$),64!=(64&x.flags)&&_h(m,h,C,x),0===function Zu(){return tt.lFrame.elementDepthCount}()&&Mr(C,h),function Ga(){tt.lFrame.elementDepthCount++}(),$u(x)&&($p(m,h,x),Hp(m,x,h)),null!==c&&Vv(h,x)}function Cu(){let s=bn();Wa()?ca():(s=s.parent,Kr(s,!1));const o=s;!function qa(){tt.lFrame.elementDepthCount--}();const u=jt();u.firstCreatePass&&(Qa(u,s),Rn(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function No(s){return 0!=(16&s.flags)}(o)&&f0(u,o,Ie(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function ep(s){return 0!=(32&s.flags)}(o)&&f0(u,o,Ie(),o.stylesWithoutHost,!1)}function y_(s,o,u,c){Zn(s,o,u,c),Cu()}function p0(s,o,u){const c=Ie(),h=jt(),m=s+20,v=h.firstCreatePass?function ag(s,o,u,c,h){const m=o.consts,v=li(m,c),b=qc(o,s,8,"ng-container",v);return null!==v&&Sh(b,v,!0),Ch(o,u,b,li(m,h)),null!==o.queries&&o.queries.elementStart(o,b),b}(m,h,c,o,u):h.data[m];Kr(v,!0);const b=c[m]=c[11].createComment("");_h(h,c,b,v),Mr(b,c),$u(v)&&($p(h,c,v),Hp(h,v,c)),null!=u&&Vv(c,v)}function Wo(){let s=bn();const o=jt();Wa()?ca():(s=s.parent,Kr(s,!1)),o.firstCreatePass&&(Qa(o,s),Rn(s)&&o.queries.elementEnd(s))}function Bh(){return Ie()}function v_(s){return!!s&&"function"==typeof s.then}function Be(s){return!!s&&"function"==typeof s.subscribe}const g0=Be;function w_(s,o,u,c){const h=Ie(),m=jt(),v=bn();return function jh(s,o,u,c,h,m,v,b){const C=$u(c),M=s.firstCreatePass&&Kp(s),L=o[8],$=Zv(o);let K=!0;if(3&c.type||b){const je=Mn(c,o),st=b?b(je):je,Ce=$.length,mt=b?Kt=>b(Ln(Kt[c.index])):c.index;if(Cn(u)){let Kt=null;if(!b&&C&&(Kt=function Ra(s,o,u,c){const h=s.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const v=h[m];if(v===u&&h[m+1]===c){const b=o[7],C=h[m+2];return b.length>C?b[C]:null}"string"==typeof v&&(m+=2)}return null}(s,o,h,c.index)),null!==Kt)(Kt.__ngLastListenerFn__||Kt).__ngNextListenerFn__=m,Kt.__ngLastListenerFn__=m,K=!1;else{m=E_(c,o,L,m,!1);const mn=u.listen(st,h,m);$.push(m,mn),M&&M.push(h,mt,Ce,Ce+1)}}else m=E_(c,o,L,m,!0),st.addEventListener(h,m,v),$.push(m),M&&M.push(h,mt,Ce,v)}else m=E_(c,o,L,m,!1);const me=c.outputs;let Oe;if(K&&null!==me&&(Oe=me[h])){const je=Oe.length;if(je)for(let st=0;st<je;st+=2){const Er=o[Oe[st]][Oe[st+1]].subscribe(m),Ef=$.length;$.push(m,Er),M&&M.push(h,c.index,Ef,-(Ef+1))}}}(m,h,h[11],v,s,o,!!u,c),w_}function Iu(s,o,u,c){try{return!1!==u(c)}catch(h){return Al(s,h),!1}}function E_(s,o,u,c,h){return function m(v){if(v===Function)return c;const b=2&s.flags?ui(s.index,o):o;0==(32&o[2])&&Xm(b);let C=Iu(o,0,c,v),x=m.__ngNextListenerFn__;for(;x;)C=Iu(o,0,x,v)&&C,x=x.__ngNextListenerFn__;return h&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function ad(s=1){return function Yf(s){return(tt.lFrame.contextLView=function Xu(s,o){for(;s>0;)o=o[15],s--;return o}(s,tt.lFrame.contextLView))[8]}(s)}function ug(s,o,u,c,h){const m=Ie(),v=bu(m,o,u,c);return v!==Lt&&Ji(jt(),Nn(),m,s,v,m[11],h,!1),ug}function ud(s,o,u,c,h){const m=s[u+1],v=null===o;let b=c?Xr(m):Da(m),C=!1;for(;0!==b&&(!1===C||v);){const M=s[b+1];C_(s[b],o)&&(C=!0,s[b+1]=c?Lp(M):Hm(M)),b=c?Xr(M):Da(M)}C&&(s[u+1]=c?Hm(m):Lp(m))}function C_(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&ba(s,o)>=0}function T_(s,o){return function ri(s,o,u,c){const h=Ie(),m=jt(),v=function $i(s){const o=tt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);m.firstUpdatePass&&function D0(s,o,u,c){const h=s.data;if(null===h[u+1]){const m=h[In()],v=function CC(s,o){return o>=s.expandoStartIndex}(s,u);(function x0(s,o){return 0!=(s.flags&(o?16:32))})(m,c)&&null===o&&!v&&(o=!1),o=function IC(s,o,u,c){const h=function Ro(s){const o=tt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let m=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(u=Ll(u=zh(null,s,o,u,c),o.attrs,c),m=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(u=zh(h,s,o,u,c),null===m){let C=function Du(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==Da(c))return s[Xr(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=zh(null,s,o,C[1],c),C=Ll(C,o.attrs,c),function TC(s,o,u,c){s[Xr(u?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else m=function Wh(s,o,u){let c;const h=o.directiveEnd;for(let m=1+o.directiveStylingLast;m<h;m++)c=Ll(c,s[m].hostAttrs,u);return Ll(c,o.attrs,u)}(s,o,c)}return void 0!==m&&(c?o.residualClasses=m:o.residualStyles=m),u}(h,m,o,c),function b_(s,o,u,c,h,m){let v=m?o.classBindings:o.styleBindings,b=Xr(v),C=Da(v);s[c]=u;let M,x=!1;if(Array.isArray(u)){const L=u;M=L[1],(null===M||ba(L,M)>0)&&(x=!0)}else M=u;if(h)if(0!==C){const $=Xr(s[b+1]);s[c+1]=Nr($,b),0!==$&&(s[$+1]=Av(s[$+1],c)),s[b+1]=function FD(s,o){return 131071&s|o<<17}(s[b+1],c)}else s[c+1]=Nr(b,0),0!==b&&(s[b+1]=Av(s[b+1],c)),b=c;else s[c+1]=Nr(C,0),0===b?b=c:s[C+1]=Av(s[C+1],c),C=c;x&&(s[c+1]=Hm(s[c+1])),ud(s,M,c,!0),ud(s,M,c,!1),function C0(s,o,u,c,h){const m=h?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof o&&ba(m,o)>=0&&(u[c+1]=Lp(u[c+1]))}(o,M,s,c,m),v=Nr(b,C),m?o.classBindings=v:o.styleBindings=v}(h,m,o,u,v,c)}}(m,s,v,c),o!==Lt&&Pr(h,v,o)&&function ld(s,o,u,c,h,m,v,b){if(!(3&o.type))return;const C=s.data,x=C[b+1];hg(function Sv(s){return 1==(1&s)}(x)?Us(C,o,u,h,Da(x),v):void 0)||(hg(m)||function bb(s){return 2==(2&s)}(x)&&(m=Us(C,null,u,h,b,v)),function yb(s,o,u,c,h){const m=Cn(s);if(o)h?m?s.addClass(u,c):u.classList.add(c):m?s.removeClass(u,c):u.classList.remove(c);else{let v=-1===c.indexOf("-")?void 0:lo.DashCase;if(null==h)m?s.removeStyle(u,c,v):u.style.removeProperty(c);else{const b="string"==typeof h&&h.endsWith("!important");b&&(h=h.slice(0,-10),v|=lo.Important),m?s.setStyle(u,c,h,v):u.style.setProperty(c,h,b?"important":"")}}}(c,v,Ts(In(),u),h,m))}(m,m.data[In()],h,h[11],s,h[v+1]=function fg(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ue(uo(s)))),s}(o,u),c,v)}(s,o,null,!0),T_}function zh(s,o,u,c,h){let m=null;const v=u.directiveEnd;let b=u.directiveStylingLast;for(-1===b?b=u.directiveStart:b++;b<v&&(m=o[b],c=Ll(c,m.hostAttrs,h),m!==s);)b++;return null!==s&&(u.directiveStylingLast=b),c}function Ll(s,o,u){const c=u?1:2;let h=-1;if(null!==o)for(let m=0;m<o.length;m++){const v=o[m];"number"==typeof v?h=v:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Br(s,v,!!u||o[++m]))}return void 0===s?null:s}function Us(s,o,u,c,h,m){const v=null===o;let b;for(;h>0;){const C=s[h],x=Array.isArray(C),M=x?C[1]:C,L=null===M;let $=u[h+1];$===Lt&&($=L?bt:void 0);let K=L?Lo($,c):M===c?$:void 0;if(x&&!hg(K)&&(K=Lo(C,c)),hg(K)&&(b=K,v))return b;const me=s[h+1];h=v?Xr(me):Da(me)}if(null!==o){let C=m?o.residualClasses:o.residualStyles;null!=C&&(b=Lo(C,c))}return b}function hg(s){return void 0!==s}function A_(s,o=""){const u=Ie(),c=jt(),h=s+20,m=c.firstCreatePass?qc(c,h,1,o,null):c.data[h],v=u[h]=function Uc(s,o){return Cn(s)?s.createText(o):s.createTextNode(o)}(u[11],o);_h(c,u,v,m),Kr(m,!1)}function pg(s){return gg("",s,""),pg}function gg(s,o,u){const c=Ie(),h=bu(c,s,o,u);return h!==Lt&&vu(c,In(),h),gg}const qt=void 0;var FC=["en",[["a","p"],["AM","PM"],qt],[["AM","PM"],qt,qt],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],qt,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],qt,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",qt,"{1} 'at' {0}",qt],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function OC(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Bs={};function Jh(s){const o=function po(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=B0(o);if(u)return u;const c=o.split("-")[0];if(u=B0(c),u)return u;if("en"===c)return FC;throw new Error(`Missing locale data for the locale "${s}".`)}function Fn(s){return Jh(s)[wt.PluralCase]}function B0(s){return s in Bs||(Bs[s]=Et.ng&&Et.ng.common&&Et.ng.common.locales&&Et.ng.common.locales[s]),Bs[s]}var wt=(()=>((wt=wt||{})[wt.LocaleId=0]="LocaleId",wt[wt.DayPeriodsFormat=1]="DayPeriodsFormat",wt[wt.DayPeriodsStandalone=2]="DayPeriodsStandalone",wt[wt.DaysFormat=3]="DaysFormat",wt[wt.DaysStandalone=4]="DaysStandalone",wt[wt.MonthsFormat=5]="MonthsFormat",wt[wt.MonthsStandalone=6]="MonthsStandalone",wt[wt.Eras=7]="Eras",wt[wt.FirstDayOfWeek=8]="FirstDayOfWeek",wt[wt.WeekendRange=9]="WeekendRange",wt[wt.DateFormat=10]="DateFormat",wt[wt.TimeFormat=11]="TimeFormat",wt[wt.DateTimeFormat=12]="DateTimeFormat",wt[wt.NumberSymbols=13]="NumberSymbols",wt[wt.NumberFormats=14]="NumberFormats",wt[wt.CurrencyCode=15]="CurrencyCode",wt[wt.CurrencySymbol=16]="CurrencySymbol",wt[wt.CurrencyName=17]="CurrencyName",wt[wt.Currencies=18]="Currencies",wt[wt.Directionality=19]="Directionality",wt[wt.PluralCase=20]="PluralCase",wt[wt.ExtraData=21]="ExtraData",wt))();const Ul="en-US";let Xh=Ul;function Fr(s,o,u,c,h){if(s=te(s),Array.isArray(s))for(let m=0;m<s.length;m++)Fr(s[m],o,u,c,h);else{const m=jt(),v=Ie();let b=kh(s)?s:te(s.provide),C=Nh(s);const x=bn(),M=1048575&x.providerIndexes,L=x.directiveStart,$=x.providerIndexes>>20;if(kh(s)||!s.multi){const K=new rl(C,h,xa),me=Dg(b,o,h?M:M+$,L);-1===me?(Oo(fa(x,v),m,b),Tg(m,s,o.length),o.push(b),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),u.push(K),v.push(K)):(u[me]=K,v[me]=K)}else{const K=Dg(b,o,M+$,L),me=Dg(b,o,M,M+$),Oe=K>=0&&u[K],je=me>=0&&u[me];if(h&&!je||!h&&!Oe){Oo(fa(x,v),m,b);const st=function sI(s,o,u,c,h){const m=new rl(s,u,xa);return m.multi=[],m.index=o,m.componentProviders=0,L_(m,h,c&&!u),m}(h?iI:jl,u.length,h,c,C);!h&&je&&(u[me].providerFactory=st),Tg(m,s,o.length,0),o.push(b),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),u.push(st),v.push(st)}else Tg(m,s,K>-1?K:me,L_(u[h?me:K],C,!h&&c));!h&&c&&je&&u[me].componentProviders++}}}function Tg(s,o,u,c){const h=kh(o),m=function KD(s){return!!s.useClass}(o);if(h||m){const C=(m?te(o.useClass):o).prototype.ngOnDestroy;if(C){const x=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const M=x.indexOf(u);-1===M?x.push(u,[c,C]):x[M+1].push(c,C)}else x.push(u,C)}}}function L_(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Dg(s,o,u,c){for(let h=u;h<c;h++)if(o[h]===s)return h;return-1}function jl(s,o,u,c){return nw(this.multi,[])}function iI(s,o,u,c){const h=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,b=nu(u,u[1],this.providerFactory.index,c);m=b.slice(0,v),nw(h,m);for(let C=v;C<b.length;C++)m.push(b[C])}else m=[],nw(h,m);return m}function nw(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function Ag(s,o=[]){return u=>{u.providersResolver=(c,h)=>function rI(s,o,u){const c=jt();if(c.firstCreatePass){const h=Ti(s);Fr(u,c.data,c.blueprint,h,!0),Fr(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class Hl{}class rw{resolveComponentFactory(o){throw function rf(s){const o=Error(`No component factory found for ${ue(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let md=(()=>{class s{}return s.NULL=new rw,s})();function oI(){return af(bn(),Ie())}function af(s,o){return new uf(Mn(s,o))}let uf=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=oI,s})();function aI(s){return s instanceof uf?s.nativeElement:s}class lf{}let cf=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function lI(){const s=Ie(),u=ui(bn().index,s);return function qA(s){return s[11]}(rs(u)?u:s)}(),s})(),WA=(()=>{class s{}return s.\u0275prov=yn({token:s,providedIn:"root",factory:()=>null}),s})();class cI{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const dI=new cI("13.0.3"),df={};function Ko(s,o,u,c,h=!1){for(;null!==u;){const m=o[u.index];if(null!==m&&c.push(Ln(m)),is(m))for(let b=10;b<m.length;b++){const C=m[b],x=C[1].firstChild;null!==x&&Ko(C[1],C,x,c)}const v=u.type;if(8&v)Ko(s,o,u.child,c);else if(32&v){const b=Vc(u,o);let C;for(;C=b();)c.push(C)}else if(16&v){const b=kp(o,u);if(Array.isArray(b))c.push(...b);else{const C=gu(o[16]);Ko(C[1],C,b,c,!0)}}u=h?u.projectionNext:u.next}return c}class Yo{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Ko(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(is(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(j(o,c),va(u,c))}this._attachedToViewContainer=!1}J(this._lView[1],this._lView)}onDestroy(o){Hb(this._lView[1],this._lView,null,o)}markForCheck(){Xm(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Dh(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Qb(s,o,u){ro(!0);try{Dh(s,o,u)}finally{ro(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function f(s,o){yh(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=o}}class hI extends Yo{constructor(o){super(o),this._view=o}detectChanges(){e_(this._view)}checkNoChanges(){!function Jb(s){ro(!0);try{e_(s)}finally{ro(!1)}}(this._view)}get context(){return null}}class fI extends md{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=zt(o);return new U_(u,this.ngModule)}}function pI(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}const V_=new dn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>wl});class U_ extends Hl{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function Dv(s){return s.map(kD).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return pI(this.componentDef.inputs)}get outputs(){return pI(this.componentDef.outputs)}create(o,u,c,h){const m=(h=h||this.ngModule)?function zA(s,o){return{get:(u,c,h)=>{const m=s.get(u,df,h);return m!==df||c===df?m:o.get(u,c,h)}}}(o,h.injector):o,v=m.get(lf,cc),b=m.get(WA,null),C=v.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",M=c?function zm(s,o,u){if(Cn(s))return s.selectRootElement(o,u===et.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(C,c,this.componentDef.encapsulation):Rp(v.createRenderer(null,this.componentDef),x,function iw(s){const o=s.toLowerCase();return"svg"===o?Zf:"math"===o?"http://www.w3.org/1998/MathML/":null}(x)),L=this.componentDef.onPush?576:528,$=function sC(s,o){return{components:[],scheduler:s||wl,clean:Zp,playerHandler:o||null,flags:0}}(),K=Gp(0,null,null,1,0,null,null,null,null,null),me=Gc(null,K,$,L,null,null,v,C,b,m);let Oe,je;ha(me);try{const st=function yr(s,o,u,c,h,m){const v=u[1];u[20]=s;const C=qc(v,20,2,"#host",null),x=C.mergedAttrs=o.hostAttrs;null!==x&&(Sh(C,x,!0),null!==s&&(cn(h,s,x),null!==C.classes&&_r(h,s,C.classes),null!==C.styles&&vb(h,s,C.styles)));const M=c.createRenderer(s,o),L=Gc(u,Ub(o),null,o.onPush?64:16,u[20],C,c,M,m||null,null);return v.firstCreatePass&&(Oo(fa(C,u),v,o.type),$v(v,C),Th(C,u.length,1)),Dl(u,L),u[20]=L}(M,this.componentDef,me,v,C);if(M)if(c)cn(C,M,["ng-version",dI.full]);else{const{attrs:Ce,classes:mt}=function OD(s){const o=[],u=[];let c=1,h=2;for(;c<s.length;){let m=s[c];if("string"==typeof m)2===h?""!==m&&o.push(m,s[++c]):8===h&&u.push(m);else{if(!Go(h))break;h=m}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Ce&&cn(C,M,Ce),mt&&mt.length>0&&_r(C,M,mt.join(" "))}if(je=$a(K,20),void 0!==u){const Ce=je.projection=[];for(let mt=0;mt<this.ngContentSelectors.length;mt++){const Kt=u[mt];Ce.push(null!=Kt?Array.from(Kt):null)}}Oe=function r0(s,o,u,c,h){const m=u[1],v=function Gb(s,o,u){const c=bn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),Gv(s,c,o,Il(s,o,1,null),u));const h=nu(o,s,c.directiveStart,c);Mr(h,o);const m=Mn(c,o);return m&&Mr(m,o),h}(m,u,o);if(c.components.push(v),s[8]=v,h&&h.forEach(C=>C(v,o)),o.contentQueries){const C=bn();o.contentQueries(1,v,C.directiveStart)}const b=bn();return!m.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(os(b.index),qb(u[1],b,0,b.directiveStart,b.directiveEnd,o),Wb(o,v)),v}(st,this.componentDef,me,$,[eA]),Wc(K,me,null)}finally{Za()}return new B_(this.componentType,Oe,af(je,me),me,je)}}class B_ extends class gd{}{constructor(o,u,c,h,m){super(),this.location=c,this._rootLView=h,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new hI(h),this.componentType=o}get injector(){return new gn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Wr{}class ow{}const Su=new Map;class _I extends Wr{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new fI(this);const c=Gn(o);this._bootstrapComponents=Os(c.bootstrap),this._r3Injector=Vn(o,u,[{provide:Wr,useValue:this},{provide:md,useValue:this.componentFactoryResolver}],ue(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=Vs.THROW_IF_NOT_FOUND,c=gt.Default){return o===Vs||o===Wr||o===r_?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Gl extends ow{constructor(o){super(),this.moduleType=o,null!==Gn(o)&&function $l(s){const o=new Set;!function u(c){const h=Gn(c,!0),m=h.id;null!==m&&(function aw(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${ue(o)} vs ${ue(o.name)}`)}(m,Su.get(m),c),Su.set(m,c));const v=Os(h.imports);for(const b of v)o.has(b)||(o.add(b),u(b))}(s)}(o)}create(o){return new _I(this.moduleType,o)}}function ff(s,o){const u=s[o];return u===Lt?void 0:u}function EI(s,o,u,c,h,m,v){const b=o+u;return function Ml(s,o,u,c){const h=Pr(s,o,u);return Pr(s,o+1,c)||h}(s,b,h,m)?Sa(s,b+2,v?c.call(v,h,m):c(h,m)):ff(s,b+2)}function dw(s,o){const u=jt();let c;const h=s+20;u.firstCreatePass?(c=function bI(s,o){if(o)for(let u=o.length-1;u>=0;u--){const c=o[u];if(s===c.name)return c}}(o,u.pipeRegistry),u.data[h]=c,c.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(h,c.onDestroy)):c=u.data[h];const m=c.factory||(c.factory=Is(c.type)),v=or(xa);try{const b=Ss(!1),C=m();return Ss(b),function rA(s,o,u,c){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),o[u]=c}(u,Ie(),h,C),C}finally{or(v)}}function CI(s,o,u){const c=s+20,h=Ie(),m=An(h,c);return zl(h,c)?function wI(s,o,u,c,h,m){const v=o+u;return Pr(s,v,h)?Sa(s,v+1,m?c.call(m,h):c(h)):ff(s,v+1)}(h,Rr(),o,m.transform,u,m):m.transform(u)}function hw(s,o,u,c){const h=s+20,m=Ie(),v=An(m,h);return zl(m,h)?EI(m,Rr(),o,v.transform,u,c,v):v.transform(u,c)}function zl(s,o){return s[1].data[o].pure}function mw(s){return o=>{setTimeout(s,void 0,o)}}const go=class gw extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var h,m,v;let b=o,C=u||(()=>null),x=c;if(o&&"object"==typeof o){const L=o;b=null===(h=L.next)||void 0===h?void 0:h.bind(L),C=null===(m=L.error)||void 0===m?void 0:m.bind(L),x=null===(v=L.complete)||void 0===v?void 0:v.bind(L)}this.__isAsync&&(C=mw(C),b&&(b=mw(b)),x&&(x=mw(x)));const M=super.subscribe({next:b,error:C,complete:x});return o instanceof Y.w0&&o.add(M),M}};function II(){return this._results[Yc()]()}class _w{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Yc(),c=_w.prototype;c[u]||(c[u]=II)}get changes(){return this._changes||(this._changes=new go)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const h=Qr(o);(this._changesDetected=!function Cm(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],m=o[c];if(u&&(h=u(h),m=u(m)),m!==h)return!1}return!0}(c._results,h,u))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let gf=(()=>{class s{}return s.__NG_ELEMENT_ID__=JA,s})();const TI=gf,yw=class extends TI{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=Gc(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(c[19]=m.createEmbeddedView(u)),Wc(u,c,o),new Yo(c)}};function JA(){return Mg(bn(),Ie())}function Mg(s,o){return 4&s.type?new yw(o,s,af(s,o)):null}let H_=(()=>{class s{}return s.__NG_ELEMENT_ID__=DI,s})();function DI(){return Pg(bn(),Ie())}const XA=H_,yd=class extends XA{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return af(this._hostTNode,this._hostLView)}get injector(){return new gn(this._hostTNode,this._hostLView)}get parentInjector(){const o=pa(this._hostTNode,this._hostLView);if(fr(o)){const u=Po(o,this._hostLView),c=Xa(o);return new gn(u[1].data[c+8],u)}return new gn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=vd(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const h=o.createEmbeddedView(u||{});return this.insert(h,c),h}createComponent(o,u,c,h,m){const v=o&&!function iu(s){return"function"==typeof s}(o);let b;if(v)b=u;else{const L=u||{};b=L.index,c=L.injector,h=L.projectableNodes,m=L.ngModuleRef}const C=v?o:new U_(zt(o)),x=c||this.parentInjector;if(!m&&null==C.ngModule&&x){const L=x.get(Wr,null);L&&(m=L)}const M=C.create(x,h,void 0,m);return this.insert(M.hostView,b),M}insert(o,u){const c=o._lView,h=c[1];if(function Ds(s){return is(s[3])}(c)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const L=c[3],$=new yd(L,L[6],L[3]);$.detach($.indexOf(o))}}const m=this._adjustIndex(u),v=this._lContainer;!function w(s,o,u,c){const h=10+c,m=u.length;c>0&&(u[h-1][4]=o),c<m-10?(o[4]=u[h],sl(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const v=o[17];null!==v&&u!==v&&function A(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(v,o);const b=o[19];null!==b&&b.insertView(s),o[2]|=128}(h,c,v,m);const b=Ev(m,v),C=c[11],x=Bc(C,v[7]);return null!==x&&function y(s,o,u,c,h,m){c[0]=h,c[6]=o,yh(s,c,u,1,h,m)}(h,v[6],C,c,x,b),o.attachToViewContainerRef(),sl(Ng(v),m,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=vd(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=j(this._lContainer,u);c&&(va(Ng(this._lContainer),u),J(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=j(this._lContainer,u);return c&&null!=va(Ng(this._lContainer),u)?new Yo(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function vd(s){return s[8]}function Ng(s){return s[8]||(s[8]=[])}function Pg(s,o){let u;const c=o[s.index];if(is(c))u=c;else{let h;if(8&s.type)h=Ln(c);else{const m=o[11];h=m.createComment("");const v=Mn(s,o);On(m,Bc(m,v),h,function Bm(s,o){return Cn(s)?s.nextSibling(o):o.nextSibling}(m,v),!1)}o[s.index]=u=qv(c,o,h,s),Dl(o,u)}return new yd(u,s,o)}class vw{constructor(o){this.queryList=o,this.matches=null}clone(){return new vw(this.queryList)}setDirty(){this.queryList.setDirty()}}class kg{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let m=0;m<c;m++){const v=u.getByIndex(m);h.push(this.queries[v.indexInDeclarationView].clone())}return new kg(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==mf(o,u).matches&&this.queries[u].setDirty()}}class xI{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class Og{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const h=null!==u?u.length:0,m=this.getByIndex(c).embeddedTView(o,h);m&&(m.indexInDeclarationView=c,null!==u?u.push(m):u=[m])}return null!==u?new Og(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class ww{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new ww(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const m=c[h];this.matchTNodeWithReadOption(o,u,tS(u,m)),this.matchTNodeWithReadOption(o,u,pr(u,o,m,!1,!1))}else c===gf?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,pr(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===uf||h===H_||h===gf&&4&u.type)this.addMatch(u.index,-2);else{const m=pr(u,o,h,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function tS(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function si(s,o,u,c){return-1===u?function Ew(s,o){return 11&s.type?af(s,o):4&s.type?Mg(s,o):null}(o,s):-2===u?function nS(s,o,u){return u===uf?af(o,s):u===gf?Mg(o,s):u===H_?Pg(o,s):void 0}(s,o,c):nu(s,s[1],u,o)}function RI(s,o,u,c){const h=o[19].queries[c];if(null===h.matches){const m=s.data,v=u.matches,b=[];for(let C=0;C<v.length;C+=2){const x=v[C];b.push(x<0?null:si(o,m[x],v[C+1],u.metadata.read))}h.matches=b}return h.matches}function bw(s,o,u,c){const h=s.queries.getByIndex(u),m=h.matches;if(null!==m){const v=RI(s,o,h,u);for(let b=0;b<m.length;b+=2){const C=m[b];if(C>0)c.push(v[b/2]);else{const x=m[b+1],M=o[-C];for(let L=10;L<M.length;L++){const $=M[L];$[17]===$[3]&&bw($[1],$,x,c)}if(null!==M[9]){const L=M[9];for(let $=0;$<L.length;$++){const K=L[$];bw(K[1],K,x,c)}}}}}return c}function MI(s){const o=Ie(),u=jt(),c=Bd();Mo(c+1);const h=mf(u,c);if(s.dirty&&Hi(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const m=h.crossesNgTemplate?bw(u,o,c,[]):RI(u,o,h,c);s.reset(m,aI),s.notifyOnChanges()}return!0}return!1}function NI(s,o,u,c){const h=jt();if(h.firstCreatePass){const m=bn();(function G_(s,o,u){null===s.queries&&(s.queries=new Og),s.queries.track(new ww(o,u))})(h,new xI(o,u,c),m.index),function q_(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}!function Cw(s,o,u){const c=new _w(4==(4&u));Hb(s,o,c,c.destroy),null===o[19]&&(o[19]=new kg),o[19].queries.push(new vw(c))}(h,Ie(),u)}function $_(){return function PI(s,o){return s[19].queries[o].queryList}(Ie(),Bd())}function mf(s,o){return s.queries.getByIndex(o)}function Fg(s,o){return Mg(s,o)}function jg(...s){}const Hg=new dn("Application Initializer");let Kl=(()=>{class s{constructor(u){this.appInits=u,this.resolve=jg,this.reject=jg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(v_(m))u.push(m);else if(g0(m)){const v=new Promise((b,C)=>{m.subscribe({complete:b,error:C})});u.push(v)}}Promise.all(u).then(()=>{c()}).catch(h=>{this.reject(h)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(ie(Hg,8))},s.\u0275prov=yn({token:s,factory:s.\u0275fac}),s})();const bd=new dn("AppId"),Ow={provide:bd,useFactory:function Yl(){return`${Ql()}${Ql()}${Ql()}`},deps:[]};function Ql(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Cd=new dn("Platform Initializer"),Fw=new dn("Platform ID"),Id=new dn("appBootstrapListener");let $I=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=yn({token:s,factory:s.\u0275fac}),s})();const yf=new dn("LocaleId"),ny=new dn("DefaultCurrencyCode");class hS{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let $g=(()=>{class s{compileModuleSync(u){return new Gl(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),m=Os(Gn(u).declarations).reduce((v,b)=>{const C=zt(b);return C&&v.push(new U_(C)),v},[]);return new hS(c,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=yn({token:s,factory:s.\u0275fac}),s})();const WI=(()=>Promise.resolve(0))();function Vw(s){"undefined"==typeof Zone?WI.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class _s{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new go(!1),this.onMicrotaskEmpty=new go(!1),this.onStable=new go(!1),this.onError=new go(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&u,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function zI(){let s=Et.requestAnimationFrame,o=Et.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function pS(s){const o=()=>{!function fS(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Et,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Uw(s),s.isCheckStableRunning=!0,ry(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Uw(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,h,m,v,b)=>{try{return KI(s),u.invokeTask(h,m,v,b)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),iy(s)}},onInvoke:(u,c,h,m,v,b,C)=>{try{return KI(s),u.invoke(h,m,v,b,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),iy(s)}},onHasTask:(u,c,h,m)=>{u.hasTask(h,m),c===h&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,Uw(s),ry(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,c,h,m)=>(u.handleError(h,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_s.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(_s.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,h){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+h,o,ZI,jg,jg);try{return m.runTask(v,u,c)}finally{m.cancelTask(v)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const ZI={};function ry(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Uw(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function KI(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function iy(s){s._nesting--,ry(s)}class Bw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new go,this.onMicrotaskEmpty=new go,this.onStable=new go,this.onError=new go}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,h){return o.apply(u,c)}}let sy=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_s.assertNotInAngularZone(),Vw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Vw(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,h){let m=-1;c&&c>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:h})}whenStable(u,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(ie(_s))},s.\u0275prov=yn({token:s,factory:s.\u0275fac}),s})(),YI=(()=>{class s{constructor(){this._applications=new Map,Gg.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return Gg.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=yn({token:s,factory:s.\u0275fac}),s})();class jw{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function gS(s){Gg=s}let mo,Gg=new jw;const oy=new dn("AllowMultipleToken");class yS{constructor(o,u){this.name=o,this.token=u}}function QI(s,o,u=[]){const c=`Platform: ${o}`,h=new dn(c);return(m=[])=>{let v=ay();if(!v||v.injector.get(oy,!1))if(s)s(u.concat(m).concat({provide:h,useValue:!0}));else{const b=u.concat(m).concat({provide:h,useValue:!0},{provide:wu,useValue:"platform"});!function $w(s){if(mo&&!mo.destroyed&&!mo.injector.get(oy,!1))throw new Ge("400","");mo=s.get(uy);const o=s.get(Cd,null);o&&o.forEach(u=>u())}(Vs.create({providers:b,name:c}))}return function Gw(s){const o=ay();if(!o)throw new Ge("401","");return o}()}}function ay(){return mo&&!mo.destroyed?mo:null}let uy=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const b=function qw(s,o){let u;return u="noop"===s?new Bw:("zone.js"===s?void 0:s)||new _s({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),C=[{provide:_s,useValue:b}];return b.run(()=>{const x=Vs.create({providers:C,parent:this.injector,name:u.moduleType.name}),M=u.create(x),L=M.injector.get(Lc,null);if(!L)throw new Ge("402","");return b.runOutsideAngular(()=>{const $=b.onError.subscribe({next:K=>{L.handleError(K)}});M.onDestroy(()=>{zw(this._modules,M),$.unsubscribe()})}),function vf(s,o,u){try{const c=u();return v_(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(L,b,()=>{const $=M.injector.get(Kl);return $.runInitializers(),$.donePromise.then(()=>(function vg(s){St(s,"Expected localeId to be defined"),"string"==typeof s&&(Xh=s.toLowerCase().replace(/_/g,"-"))}(M.injector.get(yf,Ul)||Ul),this._moduleDoBootstrap(M),M))})})}bootstrapModule(u,c=[]){const h=Ww({},c);return function Hw(s,o,u){const c=new Gl(u);return Promise.resolve(c)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(u){const c=u.injector.get(Td);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new Ge("403","");u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ge("404","");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(ie(Vs))},s.\u0275prov=yn({token:s,factory:s.\u0275fac}),s})();function Ww(s,o){return Array.isArray(o)?o.reduce(Ww,s):Object.assign(Object.assign({},s),o)}let Td=(()=>{class s{constructor(u,c,h,m,v){this._zone=u,this._injector=c,this._exceptionHandler=h,this._componentFactoryResolver=m,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const b=new O.y(x=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{x.next(this._stable),x.complete()})}),C=new O.y(x=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{_s.assertNotInAngularZone(),Vw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,x.next(!0))})})});const L=this._zone.onUnstable.subscribe(()=>{_s.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{x.next(!1)}))});return()=>{M.unsubscribe(),L.unsubscribe()}});this.isStable=(0,se.T)(b,C.pipe((0,re.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new Ge("405","");let h;h=u instanceof Hl?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(h.componentType);const m=function _S(s){return s.isBoundToModule}(h)?void 0:this._injector.get(Wr),b=h.create(Vs.NULL,[],c||h.selector,m),C=b.location.nativeElement,x=b.injector.get(sy,null),M=x&&b.injector.get(YI);return x&&M&&M.registerApplication(C,x),b.onDestroy(()=>{this.detachView(b.hostView),zw(this.components,b),M&&M.unregisterApplication(C)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new Ge("101","");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;zw(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(Id,[]).concat(this._bootstrapListeners).forEach(h=>h(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(ie(_s),ie(Vs),ie(Lc),ie(md),ie(Kl))},s.\u0275prov=yn({token:s,factory:s.\u0275fac}),s})();function zw(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let cy=!0,JI=!1;function Zw(){return JI=!0,cy}function vS(){if(JI)throw new Error("Cannot enable prod mode after platform setup.");cy=!1}let Kw=(()=>{class s{}return s.__NG_ELEMENT_ID__=wS,s})();function wS(s){return function Yw(s,o,u){if(Ba(s)&&!u){const c=ui(s.index,o);return new Yo(c,c)}return 47&s.type?new Yo(o[16],o):null}(bn(),Ie(),16==(16&s))}class gy{constructor(){}supports(o){return Rl(o)}create(o){return new nE(o)}}const tE=(s,o)=>o;class nE{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||tE}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,h=0,m=null;for(;u||c;){const v=!c||u&&u.currentIndex<_y(c,h,m)?u:c,b=_y(v,h,m),C=v.currentIndex;if(v===c)h--,c=c._nextRemoved;else if(u=u._next,null==v.previousIndex)h++;else{m||(m=[]);const x=b-h,M=C-h;if(x!=M){for(let $=0;$<x;$++){const K=$<m.length?m[$]:m[$]=0,me=K+$;M<=me&&me<x&&(m[$]=K+1)}m[v.previousIndex]=M-x}}b!==C&&o(v,b,C)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Rl(o))throw new Error(`Error trying to diff '${ue(o)}'. Only arrays and iterables are allowed`);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,m,v,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let b=0;b<this.length;b++)m=o[b],v=this._trackByFn(b,m),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,m,v,b)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,v,b),c=!0),u=u._next}else h=0,function a0(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Yc()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,b=>{v=this._trackByFn(h,b),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,b,v,h)),Object.is(u.item,b)||this._addIdentityChange(u,b)):(u=this._mismatch(u,b,v,h),c=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,h){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,m,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,m,h)):o=this._addAfter(new my(u,c),m,h),o}_verifyReinsertion(o,u,c,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==m?o=this._reinsertAfter(m,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,m=o._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new iE),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new iE),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class my{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class rE{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class iE{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new rE,this.map.set(u,c)),c.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function _y(s,o,u){const c=s.previousIndex;if(null===c)return c;let h=0;return u&&c<u.length&&(h=u[c]),c+o+h}class sE{constructor(){}supports(o){return o instanceof Map||Fh(o)}create(){return new oE}}class oE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Fh(o)))throw new Error(`Error trying to diff '${ue(o)}'. Only maps and objects are allowed`)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(h,c);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const m=h._prev,v=h._next;return m&&(m._next=v),v&&(v._prev=m),h._next=null,h._prev=null,h}const c=new wf(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class wf{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function yy(){return new vy([new gy])}let vy=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||yy()),deps:[[s,new Hr,new jr]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(null!=c)return c;throw new Error(`Cannot find a differ supporting object '${u}' of type '${function AS(s){return s.name||typeof s}(u)}'`)}}return s.\u0275prov=yn({token:s,providedIn:"root",factory:yy}),s})();function sT(){return new zg([new sE])}let zg=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||sT()),deps:[[s,new Hr,new jr]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(c)return c;throw new Error(`Cannot find a differ supporting object '${u}'`)}}return s.\u0275prov=yn({token:s,providedIn:"root",factory:sT}),s})();const SS=[new sE],xS=new vy([new gy]),RS=new zg(SS),MS=QI(null,"core",[{provide:Fw,useValue:"unknown"},{provide:uy,deps:[Vs]},{provide:YI,deps:[]},{provide:$I,deps:[]}]),cT=[{provide:Td,useClass:Td,deps:[_s,Vs,Lc,md,Kl]},{provide:V_,deps:[_s],useFactory:function wy(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(u){o.push(u)}}},{provide:Kl,useClass:Kl,deps:[[new jr,Hg]]},{provide:$g,useClass:$g,deps:[]},Ow,{provide:vy,useFactory:function aT(){return xS},deps:[]},{provide:zg,useFactory:function aE(){return RS},deps:[]},{provide:yf,useFactory:function uT(s){return s||function lT(){return"undefined"!=typeof $localize&&$localize.locale||Ul}()},deps:[[new Zi(yf),new jr,new Hr]]},{provide:ny,useValue:"USD"}];let on=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(ie(Td))},s.\u0275mod=Ue({type:s}),s.\u0275inj=Bn({providers:cT}),s})()},3942:(ut,we,F)=>{F.d(we,{Z:()=>Ge});var d=F(2090),Y=F(4859),O=F(9681),se=F(1877);class re{constructor(Fe,X){this._delegate=Fe,this.firebase=X,(0,O._addComponent)(Fe,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=Fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Fe){this._delegate.automaticDataCollectionEnabled=Fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Fe=>{this._delegate.checkDestroyed(),Fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(Fe,X=O._DEFAULT_ENTRY_NAME){var De;this._delegate.checkDestroyed();const Le=this._delegate.container.getProvider(Fe);return!Le.isInitialized()&&"EXPLICIT"===(null===(De=Le.getComponent())||void 0===De?void 0:De.instantiationMode)&&Le.initialize(),Le.getImmediate({identifier:X})}_removeServiceInstance(Fe,X=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Fe).clearInstance(X)}_addComponent(Fe){(0,O._addComponent)(this._delegate,Fe)}_addOrOverwriteComponent(Fe){(0,O._addOrOverwriteComponent)(this._delegate,Fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const oe=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function pe(){const Ve=function ue(Ve){const Fe={},X={__esModule:!0,initializeApp:function Ne(Qe,ht={}){const ee=O.initializeApp(Qe,ht);if((0,d.r3)(Fe,ee.name))return Fe[ee.name];const ce=new Ve(ee,X);return Fe[ee.name]=ce,ce},app:Le,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Re(Qe){const ht=Qe.name,ee=ht.replace("-compat","");if(O._registerComponent(Qe)&&"PUBLIC"===Qe.type){const ce=(_e=Le())=>{if("function"!=typeof _e[ee])throw oe.create("invalid-app-argument",{appName:ht});return _e[ee]()};void 0!==Qe.serviceProps&&(0,d.ZB)(ce,Qe.serviceProps),X[ee]=ce,Ve.prototype[ee]=function(..._e){return this._getService.bind(this,ht).apply(this,Qe.multipleInstances?_e:[])}}return"PUBLIC"===Qe.type?X[ee]:null},removeApp:function De(Qe){delete Fe[Qe]},useAsService:function We(Qe,ht){return"serverAuth"===ht?null:ht},modularAPIs:O}};function Le(Qe){if(!(0,d.r3)(Fe,Qe=Qe||O._DEFAULT_ENTRY_NAME))throw oe.create("no-app",{appName:Qe});return Fe[Qe]}return X.default=X,Object.defineProperty(X,"apps",{get:function ot(){return Object.keys(Fe).map(Qe=>Fe[Qe])}}),Le.App=Ve,X}(re);return Ve.INTERNAL=Object.assign(Object.assign({},Ve.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function Fe(X){(0,d.ZB)(Ve,X)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),Ve}(),W=new se.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ve=self.firebase.SDK_VERSION;Ve&&Ve.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ge=q;!function Te(Ve){(0,O.registerVersion)("@firebase/app-compat","0.1.21",Ve)}()},9681:(ut,we,F)=>{F.r(we),F.d(we,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Xo,_DEFAULT_ENTRY_NAME:()=>Xn,_addComponent:()=>_n,_addOrOverwriteComponent:()=>ns,_apps:()=>St,_clearComponents:()=>Bn,_components:()=>yt,_getProvider:()=>yn,_registerComponent:()=>zr,_removeServiceInstance:()=>Eo,deleteApp:()=>cr,getApp:()=>Ir,getApps:()=>Ae,initializeApp:()=>Li,onLog:()=>nn,registerVersion:()=>gt,setLogLevel:()=>ws});var d=F(5861),Y=F(4859),O=F(1877),se=F(2090);class re{constructor(be){this.container=be}getPlatformInfoString(){return this.container.getProviders().map(at=>{if(function ye(Je){const be=Je.getComponent();return"VERSION"===(null==be?void 0:be.type)}(at)){const dt=at.getImmediate();return`${dt.library}/${dt.version}`}return null}).filter(at=>at).join(" ")}}const oe="@firebase/app",pe=new O.Yd("@firebase/app"),Xn="[DEFAULT]",Mt={[oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},St=new Map,yt=new Map;function _n(Je,be){try{Je.container.addComponent(be)}catch(at){pe.debug(`Component ${be.name} failed to register with FirebaseApp ${Je.name}`,at)}}function ns(Je,be){Je.container.addOrOverwriteComponent(be)}function zr(Je){const be=Je.name;if(yt.has(be))return pe.debug(`There were multiple attempts to register component ${be}.`),!1;yt.set(be,Je);for(const at of St.values())_n(at,Je);return!0}function yn(Je,be){const at=Je.container.getProvider("heartbeat").getImmediate({optional:!0});return at&&at.triggerHeartbeat(),Je.container.getProvider(be)}function Eo(Je,be,at=Xn){yn(Je,be).clearInstance(at)}function Bn(){yt.clear()}const an=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class xn{constructor(be,at,dt){this._isDeleted=!1,this._options=Object.assign({},be),this._config=Object.assign({},at),this._name=at.name,this._automaticDataCollectionEnabled=at.automaticDataCollectionEnabled,this._container=dt,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this.checkDestroyed(),this._automaticDataCollectionEnabled=be}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(be){this._isDeleted=be}checkDestroyed(){if(this.isDeleted)throw an.create("app-deleted",{appName:this._name})}}const Xo="9.6.10";function Li(Je,be={}){"object"!=typeof be&&(be={name:be});const at=Object.assign({name:Xn,automaticDataCollectionEnabled:!1},be),dt=at.name;if("string"!=typeof dt||!dt)throw an.create("bad-app-name",{appName:String(dt)});const Bt=St.get(dt);if(Bt){if((0,se.vZ)(Je,Bt.options)&&(0,se.vZ)(at,Bt.config))return Bt;throw an.create("duplicate-app",{appName:dt})}const un=new Y.H0(dt);for(const B of yt.values())un.addComponent(B);const G=new xn(Je,at,un);return St.set(dt,G),G}function Ir(Je=Xn){const be=St.get(Je);if(!be)throw an.create("no-app",{appName:Je});return be}function Ae(){return Array.from(St.values())}function cr(Je){return jn.apply(this,arguments)}function jn(){return(jn=(0,d.Z)(function*(Je){const be=Je.name;St.has(be)&&(St.delete(be),yield Promise.all(Je.container.getProviders().map(at=>at.delete())),Je.isDeleted=!0)})).apply(this,arguments)}function gt(Je,be,at){var dt;let Bt=null!==(dt=Mt[Je])&&void 0!==dt?dt:Je;at&&(Bt+=`-${at}`);const un=Bt.match(/\s|\//),G=be.match(/\s|\//);if(un||G){const B=[`Unable to register library "${Bt}" with version "${be}":`];return un&&B.push(`library name "${Bt}" contains illegal characters (whitespace or "/")`),un&&G&&B.push("and"),G&&B.push(`version name "${be}" contains illegal characters (whitespace or "/")`),void pe.warn(B.join(" "))}zr(new Y.wA(`${Bt}-version`,()=>({library:Bt,version:be}),"VERSION"))}function nn(Je,be){if(null!==Je&&"function"!=typeof Je)throw an.create("invalid-log-argument");(0,O.Am)(Je,be)}function ws(Je){(0,O.Ub)(Je)}const Vr="firebase-heartbeat-store";let Tr=null;function Hn(){return Tr||(Tr=(0,se.X3)("firebase-heartbeat-database",1,(Je,be)=>{0===be&&Je.createObjectStore(Vr)}).catch(Je=>{throw an.create("storage-open",{originalErrorMessage:Je.message})})),Tr}function pn(){return(pn=(0,d.Z)(function*(Je){try{return(yield Hn()).transaction(Vr).objectStore(Vr).get(Ks(Je))}catch(be){throw an.create("storage-get",{originalErrorMessage:be.message})}})).apply(this,arguments)}function et(Je,be){return vt.apply(this,arguments)}function vt(){return(vt=(0,d.Z)(function*(Je,be){try{const dt=(yield Hn()).transaction(Vr,"readwrite");return yield dt.objectStore(Vr).put(be,Ks(Je)),dt.complete}catch(at){throw an.create("storage-set",{originalErrorMessage:at.message})}})).apply(this,arguments)}function Ks(Je){return`${Je.name}!${Je.options.appId}`}class Et{constructor(be){this.container=be,this._heartbeatsCache=null;const at=this.container.getProvider("app").getImmediate();this._storage=new sn(at),this._heartbeatsCachePromise=this._storage.read().then(dt=>(this._heartbeatsCache=dt,dt))}triggerHeartbeat(){var be=this;return(0,d.Z)(function*(){const dt=be.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Bt=Dr();if(null===be._heartbeatsCache&&(be._heartbeatsCache=yield be._heartbeatsCachePromise),be._heartbeatsCache.lastSentHeartbeatDate!==Bt&&!be._heartbeatsCache.heartbeats.some(un=>un.date===Bt))return be._heartbeatsCache.heartbeats.push({date:Bt,agent:dt}),be._heartbeatsCache.heartbeats=be._heartbeatsCache.heartbeats.filter(un=>{const G=new Date(un.date).valueOf();return Date.now()-G<=2592e6}),be._storage.overwrite(be._heartbeatsCache)})()}getHeartbeatsHeader(){var be=this;return(0,d.Z)(function*(){if(null===be._heartbeatsCache&&(yield be._heartbeatsCachePromise),null===be._heartbeatsCache||0===be._heartbeatsCache.heartbeats.length)return"";const at=Dr(),{heartbeatsToSend:dt,unsentEntries:Bt}=function bo(Je,be=1024){const at=[];let dt=Je.slice();for(const Bt of Je){const un=at.find(G=>G.agent===Bt.agent);if(un){if(un.dates.push(Bt.date),bt(at)>be){un.dates.pop();break}}else if(at.push({agent:Bt.agent,dates:[Bt.date]}),bt(at)>be){at.pop();break}dt=dt.slice(1)}return{heartbeatsToSend:at,unsentEntries:dt}}(be._heartbeatsCache.heartbeats),un=(0,se.L)(JSON.stringify({version:2,heartbeats:dt}));return be._heartbeatsCache.lastSentHeartbeatDate=at,Bt.length>0?(be._heartbeatsCache.heartbeats=Bt,yield be._storage.overwrite(be._heartbeatsCache)):(be._heartbeatsCache.heartbeats=[],be._storage.overwrite(be._heartbeatsCache)),un})()}}function Dr(){return(new Date).toISOString().substring(0,10)}class sn{constructor(be){this.app=be,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var be=this;return(0,d.Z)(function*(){return(yield be._canUseIndexedDBPromise)&&(yield function Hu(Je){return pn.apply(this,arguments)}(be.app))||{heartbeats:[]}})()}overwrite(be){var at=this;return(0,d.Z)(function*(){var dt;if(yield at._canUseIndexedDBPromise){const un=yield at.read();return et(at.app,{lastSentHeartbeatDate:null!==(dt=be.lastSentHeartbeatDate)&&void 0!==dt?dt:un.lastSentHeartbeatDate,heartbeats:be.heartbeats})}})()}add(be){var at=this;return(0,d.Z)(function*(){var dt;if(yield at._canUseIndexedDBPromise){const un=yield at.read();return et(at.app,{lastSentHeartbeatDate:null!==(dt=be.lastSentHeartbeatDate)&&void 0!==dt?dt:un.lastSentHeartbeatDate,heartbeats:[...un.heartbeats,...be.heartbeats]})}})()}}function bt(Je){return(0,se.L)(JSON.stringify({version:2,heartbeats:Je})).length}!function Ut(Je){zr(new Y.wA("platform-logger",be=>new re(be),"PRIVATE")),zr(new Y.wA("heartbeat",be=>new Et(be),"PRIVATE")),gt(oe,"0.7.20",Je),gt(oe,"0.7.20","esm2017"),gt("fire-js","")}("")},4859:(ut,we,F)=>{F.d(we,{H0:()=>ue,wA:()=>O,zt:()=>re});var d=F(5861),Y=F(2090);class O{constructor(q,W,te){this.name=q,this.instanceFactory=W,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const se="[DEFAULT]";class re{constructor(q,W){this.name=q,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const W=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has(W)){const te=new Y.BH;if(this.instancesDeferred.set(W,te),this.isInitialized(W)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:W});$e&&te.resolve($e)}catch($e){}}return this.instancesDeferred.get(W).promise}getImmediate(q){var W;const te=this.normalizeInstanceIdentifier(null==q?void 0:q.identifier),$e=null!==(W=null==q?void 0:q.optional)&&void 0!==W&&W;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Te){if($e)return null;throw Te}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if(function oe(pe){return"EAGER"===pe.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:se})}catch(W){}for(const[W,te]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(W);try{const Te=this.getOrInitializeService({instanceIdentifier:$e});te.resolve(Te)}catch(Te){}}}}clearInstance(q=se){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,d.Z)(function*(){const W=Array.from(q.instances.values());yield Promise.all([...W.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...W.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=se){return this.instances.has(q)}getOptions(q=se){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:W={}}=q,te=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:te,options:W});for(const[Te,Ge]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Te)&&Ge.resolve($e);return $e}onInit(q,W){var te;const $e=this.normalizeInstanceIdentifier(W),Te=null!==(te=this.onInitCallbacks.get($e))&&void 0!==te?te:new Set;Te.add(q),this.onInitCallbacks.set($e,Te);const Ge=this.instances.get($e);return Ge&&q(Ge,$e),()=>{Te.delete(q)}}invokeOnInitCallbacks(q,W){const te=this.onInitCallbacks.get(W);if(te)for(const $e of te)try{$e(q,W)}catch(Te){}}getOrInitializeService({instanceIdentifier:q,options:W={}}){let te=this.instances.get(q);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=q,pe===se?void 0:pe),options:W}),this.instances.set(q,te),this.instancesOptions.set(q,W),this.invokeOnInitCallbacks(te,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,te)}catch($e){}var pe;return te||null}normalizeInstanceIdentifier(q=se){return this.component?this.component.multipleInstances?q:se:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const W=this.getProvider(q.name);if(W.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);W.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const W=new re(q,this);return this.providers.set(q,W),W}getProviders(){return Array.from(this.providers.values())}}},1877:(ut,we,F)=>{F.d(we,{Am:()=>pe,Ub:()=>ue,Yd:()=>oe,in:()=>Y});const d=[];var Y=(()=>{return(q=Y||(Y={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",Y;var q})();const O={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},se=Y.INFO,re={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},ye=(q,W,...te)=>{if(W<q.logLevel)return;const $e=(new Date).toISOString(),Te=re[W];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[Te](`[${$e}]  ${q.name}:`,...te)};class oe{constructor(W){this.name=W,this._logLevel=se,this._logHandler=ye,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in Y))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?O[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...W),this._logHandler(this,Y.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...W),this._logHandler(this,Y.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...W),this._logHandler(this,Y.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...W),this._logHandler(this,Y.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...W),this._logHandler(this,Y.ERROR,...W)}}function ue(q){d.forEach(W=>{W.setLogLevel(q)})}function pe(q,W){for(const te of d){let $e=null;W&&W.level&&($e=O[W.level]),te.userLogHandler=null===q?null:(Te,Ge,...Ve)=>{const Fe=Ve.map(X=>{if(null==X)return null;if("string"==typeof X)return X;if("number"==typeof X||"boolean"==typeof X)return X.toString();if(X instanceof Error)return X.message;try{return JSON.stringify(X)}catch(De){return null}}).filter(X=>X).join(" ");Ge>=(null!=$e?$e:Te.logLevel)&&q({level:Y[Ge].toLowerCase(),message:Fe,args:Ve,type:Te.name})}}}},5861:(ut,we,F)=>{function d(O,se,re,ye,oe,ue,pe){try{var q=O[ue](pe),W=q.value}catch(te){return void re(te)}q.done?se(W):Promise.resolve(W).then(ye,oe)}function Y(O){return function(){var se=this,re=arguments;return new Promise(function(ye,oe){var ue=O.apply(se,re);function pe(W){d(ue,ye,oe,pe,q,"next",W)}function q(W){d(ue,ye,oe,pe,q,"throw",W)}pe(void 0)})}}F.d(we,{Z:()=>Y})}},ut=>{ut(ut.s=9248)}]);